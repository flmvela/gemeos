var VR=Object.defineProperty;var hw=e=>{throw TypeError(e)};var HR=(e,t,n)=>t in e?VR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var as=(e,t,n)=>HR(e,typeof t!="symbol"?t+"":t,n),Df=(e,t,n)=>t.has(e)||hw("Cannot "+n);var M=(e,t,n)=>(Df(e,t,"read from private field"),n?n.call(e):t.get(e)),Ae=(e,t,n)=>t.has(e)?hw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),we=(e,t,n,r)=>(Df(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),We=(e,t,n)=>(Df(e,t,"access private method"),n);var du=(e,t,n,r)=>({set _(i){we(e,t,i,n)},get _(){return M(e,t,r)}});function GR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function WR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var dN={exports:{}},mp={},uN={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd=Symbol.for("react.element"),KR=Symbol.for("react.portal"),QR=Symbol.for("react.fragment"),YR=Symbol.for("react.strict_mode"),XR=Symbol.for("react.profiler"),JR=Symbol.for("react.provider"),ZR=Symbol.for("react.context"),e4=Symbol.for("react.forward_ref"),t4=Symbol.for("react.suspense"),n4=Symbol.for("react.memo"),r4=Symbol.for("react.lazy"),pw=Symbol.iterator;function s4(e){return e===null||typeof e!="object"?null:(e=pw&&e[pw]||e["@@iterator"],typeof e=="function"?e:null)}var hN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pN=Object.assign,fN={};function Ol(e,t,n){this.props=e,this.context=t,this.refs=fN,this.updater=n||hN}Ol.prototype.isReactComponent={};Ol.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ol.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mN(){}mN.prototype=Ol.prototype;function bv(e,t,n){this.props=e,this.context=t,this.refs=fN,this.updater=n||hN}var jv=bv.prototype=new mN;jv.constructor=bv;pN(jv,Ol.prototype);jv.isPureReactComponent=!0;var fw=Array.isArray,gN=Object.prototype.hasOwnProperty,Nv={current:null},xN={key:!0,ref:!0,__self:!0,__source:!0};function vN(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)gN.call(t,r)&&!xN.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:kd,type:e,key:a,ref:o,props:i,_owner:Nv.current}}function i4(e,t){return{$$typeof:kd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _v(e){return typeof e=="object"&&e!==null&&e.$$typeof===kd}function a4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mw=/\/+/g;function Of(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a4(""+e.key):t.toString(36)}function Vu(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case kd:case KR:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Of(o,0):r,fw(i)?(n="",e!=null&&(n=e.replace(mw,"$&/")+"/"),Vu(i,t,n,"",function(d){return d})):i!=null&&(_v(i)&&(i=i4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(mw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",fw(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Of(a,l);o+=Vu(a,t,n,c,i)}else if(c=s4(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Of(a,l++),o+=Vu(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function uu(e,t,n){if(e==null)return e;var r=[],i=0;return Vu(e,r,"","",function(a){return t.call(n,a,i++)}),r}function o4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var An={current:null},Hu={transition:null},l4={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:Hu,ReactCurrentOwner:Nv};function yN(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:uu,forEach:function(e,t,n){uu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return uu(e,function(){t++}),t},toArray:function(e){return uu(e,function(t){return t})||[]},only:function(e){if(!_v(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=Ol;Xe.Fragment=QR;Xe.Profiler=XR;Xe.PureComponent=bv;Xe.StrictMode=YR;Xe.Suspense=t4;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l4;Xe.act=yN;Xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pN({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Nv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)gN.call(t,c)&&!xN.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:kd,type:e.type,key:i,ref:a,props:r,_owner:o}};Xe.createContext=function(e){return e={$$typeof:ZR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:JR,_context:e},e.Consumer=e};Xe.createElement=vN;Xe.createFactory=function(e){var t=vN.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:e4,render:e}};Xe.isValidElement=_v;Xe.lazy=function(e){return{$$typeof:r4,_payload:{_status:-1,_result:e},_init:o4}};Xe.memo=function(e,t){return{$$typeof:n4,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=Hu.transition;Hu.transition={};try{e()}finally{Hu.transition=t}};Xe.unstable_act=yN;Xe.useCallback=function(e,t){return An.current.useCallback(e,t)};Xe.useContext=function(e){return An.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return An.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return An.current.useEffect(e,t)};Xe.useId=function(){return An.current.useId()};Xe.useImperativeHandle=function(e,t,n){return An.current.useImperativeHandle(e,t,n)};Xe.useInsertionEffect=function(e,t){return An.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return An.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return An.current.useMemo(e,t)};Xe.useReducer=function(e,t,n){return An.current.useReducer(e,t,n)};Xe.useRef=function(e){return An.current.useRef(e)};Xe.useState=function(e){return An.current.useState(e)};Xe.useSyncExternalStore=function(e,t,n){return An.current.useSyncExternalStore(e,t,n)};Xe.useTransition=function(){return An.current.useTransition()};Xe.version="18.3.1";uN.exports=Xe;var p=uN.exports;const he=Dl(p),Sv=GR({__proto__:null,default:he},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4=p,d4=Symbol.for("react.element"),u4=Symbol.for("react.fragment"),h4=Object.prototype.hasOwnProperty,p4=c4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f4={key:!0,ref:!0,__self:!0,__source:!0};function wN(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)h4.call(t,r)&&!f4.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:d4,type:e,key:a,ref:o,props:i,_owner:p4.current}}mp.Fragment=u4;mp.jsx=wN;mp.jsxs=wN;dN.exports=mp;var s=dN.exports,bN={exports:{}},vr={},jN={exports:{}},NN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,I){var T=D.length;D.push(I);e:for(;0<T;){var H=T-1>>>1,O=D[H];if(0<i(O,I))D[H]=I,D[T]=O,T=H;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var I=D[0],T=D.pop();if(T!==I){D[0]=T;e:for(var H=0,O=D.length,P=O>>>1;H<P;){var Z=2*(H+1)-1,ee=D[Z],W=Z+1,X=D[W];if(0>i(ee,T))W<O&&0>i(X,ee)?(D[H]=X,D[W]=T,H=W):(D[H]=ee,D[Z]=T,H=Z);else if(W<O&&0>i(X,T))D[H]=X,D[W]=T,H=W;else break e}}return I}function i(D,I){var T=D.sortIndex-I.sortIndex;return T!==0?T:D.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,x=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var I=n(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=D)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(d)}}function k(D){if(g=!1,w(D),!x)if(n(c)!==null)x=!0,z(S);else{var I=n(d);I!==null&&q(k,I.startTime-D)}}function S(D,I){x=!1,g&&(g=!1,v(j),j=-1),m=!0;var T=f;try{for(w(I),h=n(c);h!==null&&(!(h.expirationTime>I)||D&&!A());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var O=H(h.expirationTime<=I);I=e.unstable_now(),typeof O=="function"?h.callback=O:h===n(c)&&r(c),w(I)}else r(c);h=n(c)}if(h!==null)var P=!0;else{var Z=n(d);Z!==null&&q(k,Z.startTime-I),P=!1}return P}finally{h=null,f=T,m=!1}}var C=!1,N=null,j=-1,_=5,E=-1;function A(){return!(e.unstable_now()-E<_)}function R(){if(N!==null){var D=e.unstable_now();E=D;var I=!0;try{I=N(!0,D)}finally{I?$():(C=!1,N=null)}}else C=!1}var $;if(typeof y=="function")$=function(){y(R)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=R,$=function(){F.postMessage(null)}}else $=function(){b(R,0)};function z(D){N=D,C||(C=!0,$())}function q(D,I){j=b(function(){D(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,z(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var T=f;f=I;try{return D()}finally{f=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var T=f;f=D;try{return I()}finally{f=T}},e.unstable_scheduleCallback=function(D,I,T){var H=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?H+T:H):T=H,D){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=T+O,D={id:u++,callback:I,priorityLevel:D,startTime:T,expirationTime:O,sortIndex:-1},T>H?(D.sortIndex=T,t(d,D),n(c)===null&&D===n(d)&&(g?(v(j),j=-1):g=!0,q(k,T-H))):(D.sortIndex=O,t(c,D),x||m||(x=!0,z(S))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var I=f;return function(){var T=f;f=I;try{return D.apply(this,arguments)}finally{f=T}}}})(NN);jN.exports=NN;var m4=jN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g4=p,gr=m4;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _N=new Set,Gc={};function Ja(e,t){xl(e,t),xl(e+"Capture",t)}function xl(e,t){for(Gc[e]=t,e=0;e<t.length;e++)_N.add(t[e])}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jm=Object.prototype.hasOwnProperty,x4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gw={},xw={};function v4(e){return Jm.call(xw,e)?!0:Jm.call(gw,e)?!1:x4.test(e)?xw[e]=!0:(gw[e]=!0,!1)}function y4(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w4(e,t,n,r){if(t===null||typeof t>"u"||y4(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rn(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cn[e]=new Rn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cn[t]=new Rn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cn[e]=new Rn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cn[e]=new Rn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cn[e]=new Rn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cn[e]=new Rn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cn[e]=new Rn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cn[e]=new Rn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cn[e]=new Rn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cv=/[\-:]([a-z])/g;function kv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cv,kv);cn[t]=new Rn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cv,kv);cn[t]=new Rn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cv,kv);cn[t]=new Rn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cn[e]=new Rn(e,1,!1,e.toLowerCase(),null,!1,!1)});cn.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cn[e]=new Rn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ev(e,t,n,r){var i=cn.hasOwnProperty(t)?cn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w4(t,n,i,r)&&(n=null),r||i===null?v4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ys=g4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hu=Symbol.for("react.element"),So=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Zm=Symbol.for("react.profiler"),SN=Symbol.for("react.provider"),CN=Symbol.for("react.context"),Tv=Symbol.for("react.forward_ref"),eg=Symbol.for("react.suspense"),tg=Symbol.for("react.suspense_list"),Av=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),kN=Symbol.for("react.offscreen"),vw=Symbol.iterator;function tc(e){return e===null||typeof e!="object"?null:(e=vw&&e[vw]||e["@@iterator"],typeof e=="function"?e:null)}var At=Object.assign,Mf;function xc(e){if(Mf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mf=t&&t[1]||""}return`
`+Mf+e}var Lf=!1;function $f(e,t){if(!e||Lf)return"";Lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Lf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xc(e):""}function b4(e){switch(e.tag){case 5:return xc(e.type);case 16:return xc("Lazy");case 13:return xc("Suspense");case 19:return xc("SuspenseList");case 0:case 2:case 15:return e=$f(e.type,!1),e;case 11:return e=$f(e.type.render,!1),e;case 1:return e=$f(e.type,!0),e;default:return""}}function ng(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Co:return"Fragment";case So:return"Portal";case Zm:return"Profiler";case Pv:return"StrictMode";case eg:return"Suspense";case tg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CN:return(e.displayName||"Context")+".Consumer";case SN:return(e._context.displayName||"Context")+".Provider";case Tv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Av:return t=e.displayName||null,t!==null?t:ng(e.type)||"Memo";case gi:t=e._payload,e=e._init;try{return ng(e(t))}catch{}}return null}function j4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ng(t);case 8:return t===Pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function EN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N4(e){var t=EN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pu(e){e._valueTracker||(e._valueTracker=N4(e))}function PN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=EN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rg(e,t){var n=t.checked;return At({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TN(e,t){t=t.checked,t!=null&&Ev(e,"checked",t,!1)}function sg(e,t){TN(e,t);var n=Qi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ig(e,t.type,n):t.hasOwnProperty("defaultValue")&&ig(e,t.type,Qi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ww(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ig(e,t,n){(t!=="number"||hh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var vc=Array.isArray;function Lo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qi(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ag(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return At({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(oe(92));if(vc(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qi(n)}}function AN(e,t){var n=Qi(t.value),r=Qi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function jw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function RN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function og(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?RN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fu,IN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fu=fu||document.createElement("div"),fu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_4=["Webkit","ms","Moz","O"];Object.keys(Ec).forEach(function(e){_4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ec[t]=Ec[e]})});function DN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ec.hasOwnProperty(e)&&Ec[e]?(""+t).trim():t+"px"}function ON(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=DN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var S4=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lg(e,t){if(t){if(S4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function cg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dg=null;function Rv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ug=null,$o=null,Fo=null;function Nw(e){if(e=Td(e)){if(typeof ug!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=wp(t),ug(e.stateNode,e.type,t))}}function MN(e){$o?Fo?Fo.push(e):Fo=[e]:$o=e}function LN(){if($o){var e=$o,t=Fo;if(Fo=$o=null,Nw(e),t)for(e=0;e<t.length;e++)Nw(t[e])}}function $N(e,t){return e(t)}function FN(){}var Ff=!1;function zN(e,t,n){if(Ff)return e(t,n);Ff=!0;try{return $N(e,t,n)}finally{Ff=!1,($o!==null||Fo!==null)&&(FN(),LN())}}function Kc(e,t){var n=e.stateNode;if(n===null)return null;var r=wp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(oe(231,t,typeof n));return n}var hg=!1;if(qs)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){hg=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{hg=!1}function C4(e,t,n,r,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Pc=!1,ph=null,fh=!1,pg=null,k4={onError:function(e){Pc=!0,ph=e}};function E4(e,t,n,r,i,a,o,l,c){Pc=!1,ph=null,C4.apply(k4,arguments)}function P4(e,t,n,r,i,a,o,l,c){if(E4.apply(this,arguments),Pc){if(Pc){var d=ph;Pc=!1,ph=null}else throw Error(oe(198));fh||(fh=!0,pg=d)}}function Za(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function UN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _w(e){if(Za(e)!==e)throw Error(oe(188))}function T4(e){var t=e.alternate;if(!t){if(t=Za(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return _w(i),e;if(a===r)return _w(i),t;a=a.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?e:t}function BN(e){return e=T4(e),e!==null?qN(e):null}function qN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qN(e);if(t!==null)return t;e=e.sibling}return null}var VN=gr.unstable_scheduleCallback,Sw=gr.unstable_cancelCallback,A4=gr.unstable_shouldYield,R4=gr.unstable_requestPaint,Ft=gr.unstable_now,I4=gr.unstable_getCurrentPriorityLevel,Iv=gr.unstable_ImmediatePriority,HN=gr.unstable_UserBlockingPriority,mh=gr.unstable_NormalPriority,D4=gr.unstable_LowPriority,GN=gr.unstable_IdlePriority,gp=null,vs=null;function O4(e){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(gp,e,void 0,(e.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:$4,M4=Math.log,L4=Math.LN2;function $4(e){return e>>>=0,e===0?32:31-(M4(e)/L4|0)|0}var mu=64,gu=4194304;function yc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=yc(l):(a&=o,a!==0&&(r=yc(a)))}else o=n&~i,o!==0?r=yc(o):a!==0&&(r=yc(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jr(t),i=1<<n,r|=e[n],t&=~i;return r}function F4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z4(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Jr(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=F4(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function fg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WN(){var e=mu;return mu<<=1,!(mu&4194240)&&(mu=64),e}function zf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ed(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jr(t),e[t]=n}function U4(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Jr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Dv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ht=0;function KN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QN,Ov,YN,XN,JN,mg=!1,xu=[],Mi=null,Li=null,$i=null,Qc=new Map,Yc=new Map,yi=[],B4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cw(e,t){switch(e){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(t.pointerId)}}function rc(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Td(t),t!==null&&Ov(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function q4(e,t,n,r,i){switch(t){case"focusin":return Mi=rc(Mi,e,t,n,r,i),!0;case"dragenter":return Li=rc(Li,e,t,n,r,i),!0;case"mouseover":return $i=rc($i,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Qc.set(a,rc(Qc.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Yc.set(a,rc(Yc.get(a)||null,e,t,n,r,i)),!0}return!1}function ZN(e){var t=Ca(e.target);if(t!==null){var n=Za(t);if(n!==null){if(t=n.tag,t===13){if(t=UN(n),t!==null){e.blockedOn=t,JN(e.priority,function(){YN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dg=r,n.target.dispatchEvent(r),dg=null}else return t=Td(n),t!==null&&Ov(t),e.blockedOn=n,!1;t.shift()}return!0}function kw(e,t,n){Gu(e)&&n.delete(t)}function V4(){mg=!1,Mi!==null&&Gu(Mi)&&(Mi=null),Li!==null&&Gu(Li)&&(Li=null),$i!==null&&Gu($i)&&($i=null),Qc.forEach(kw),Yc.forEach(kw)}function sc(e,t){e.blockedOn===t&&(e.blockedOn=null,mg||(mg=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,V4)))}function Xc(e){function t(i){return sc(i,e)}if(0<xu.length){sc(xu[0],e);for(var n=1;n<xu.length;n++){var r=xu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Mi!==null&&sc(Mi,e),Li!==null&&sc(Li,e),$i!==null&&sc($i,e),Qc.forEach(t),Yc.forEach(t),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)ZN(n),n.blockedOn===null&&yi.shift()}var zo=Ys.ReactCurrentBatchConfig,xh=!0;function H4(e,t,n,r){var i=ht,a=zo.transition;zo.transition=null;try{ht=1,Mv(e,t,n,r)}finally{ht=i,zo.transition=a}}function G4(e,t,n,r){var i=ht,a=zo.transition;zo.transition=null;try{ht=4,Mv(e,t,n,r)}finally{ht=i,zo.transition=a}}function Mv(e,t,n,r){if(xh){var i=gg(e,t,n,r);if(i===null)Yf(e,t,r,vh,n),Cw(e,r);else if(q4(i,e,t,n,r))r.stopPropagation();else if(Cw(e,r),t&4&&-1<B4.indexOf(e)){for(;i!==null;){var a=Td(i);if(a!==null&&QN(a),a=gg(e,t,n,r),a===null&&Yf(e,t,r,vh,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Yf(e,t,r,null,n)}}var vh=null;function gg(e,t,n,r){if(vh=null,e=Rv(r),e=Ca(e),e!==null)if(t=Za(e),t===null)e=null;else if(n=t.tag,n===13){if(e=UN(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vh=e,null}function e_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I4()){case Iv:return 1;case HN:return 4;case mh:case D4:return 16;case GN:return 536870912;default:return 16}default:return 16}}var Ri=null,Lv=null,Wu=null;function t_(){if(Wu)return Wu;var e,t=Lv,n=t.length,r,i="value"in Ri?Ri.value:Ri.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Wu=i.slice(e,1<r?1-r:void 0)}function Ku(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vu(){return!0}function Ew(){return!1}function yr(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?vu:Ew,this.isPropagationStopped=Ew,this}return At(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),t}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$v=yr(Ml),Pd=At({},Ml,{view:0,detail:0}),W4=yr(Pd),Uf,Bf,ic,xp=At({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ic&&(ic&&e.type==="mousemove"?(Uf=e.screenX-ic.screenX,Bf=e.screenY-ic.screenY):Bf=Uf=0,ic=e),Uf)},movementY:function(e){return"movementY"in e?e.movementY:Bf}}),Pw=yr(xp),K4=At({},xp,{dataTransfer:0}),Q4=yr(K4),Y4=At({},Pd,{relatedTarget:0}),qf=yr(Y4),X4=At({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),J4=yr(X4),Z4=At({},Ml,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eI=yr(Z4),tI=At({},Ml,{data:0}),Tw=yr(tI),nI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sI[e])?!!t[e]:!1}function Fv(){return iI}var aI=At({},Pd,{key:function(e){if(e.key){var t=nI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ku(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fv,charCode:function(e){return e.type==="keypress"?Ku(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ku(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oI=yr(aI),lI=At({},xp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Aw=yr(lI),cI=At({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fv}),dI=yr(cI),uI=At({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),hI=yr(uI),pI=At({},xp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fI=yr(pI),mI=[9,13,27,32],zv=qs&&"CompositionEvent"in window,Tc=null;qs&&"documentMode"in document&&(Tc=document.documentMode);var gI=qs&&"TextEvent"in window&&!Tc,n_=qs&&(!zv||Tc&&8<Tc&&11>=Tc),Rw=" ",Iw=!1;function r_(e,t){switch(e){case"keyup":return mI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ko=!1;function xI(e,t){switch(e){case"compositionend":return s_(t);case"keypress":return t.which!==32?null:(Iw=!0,Rw);case"textInput":return e=t.data,e===Rw&&Iw?null:e;default:return null}}function vI(e,t){if(ko)return e==="compositionend"||!zv&&r_(e,t)?(e=t_(),Wu=Lv=Ri=null,ko=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return n_&&t.locale!=="ko"?null:t.data;default:return null}}var yI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yI[e.type]:t==="textarea"}function i_(e,t,n,r){MN(r),t=yh(t,"onChange"),0<t.length&&(n=new $v("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ac=null,Jc=null;function wI(e){g_(e,0)}function vp(e){var t=To(e);if(PN(t))return e}function bI(e,t){if(e==="change")return t}var a_=!1;if(qs){var Vf;if(qs){var Hf="oninput"in document;if(!Hf){var Ow=document.createElement("div");Ow.setAttribute("oninput","return;"),Hf=typeof Ow.oninput=="function"}Vf=Hf}else Vf=!1;a_=Vf&&(!document.documentMode||9<document.documentMode)}function Mw(){Ac&&(Ac.detachEvent("onpropertychange",o_),Jc=Ac=null)}function o_(e){if(e.propertyName==="value"&&vp(Jc)){var t=[];i_(t,Jc,e,Rv(e)),zN(wI,t)}}function jI(e,t,n){e==="focusin"?(Mw(),Ac=t,Jc=n,Ac.attachEvent("onpropertychange",o_)):e==="focusout"&&Mw()}function NI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vp(Jc)}function _I(e,t){if(e==="click")return vp(t)}function SI(e,t){if(e==="input"||e==="change")return vp(t)}function CI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var es=typeof Object.is=="function"?Object.is:CI;function Zc(e,t){if(es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jm.call(t,i)||!es(e[i],t[i]))return!1}return!0}function Lw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $w(e,t){var n=Lw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lw(n)}}function l_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?l_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function c_(){for(var e=window,t=hh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hh(e.document)}return t}function Uv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kI(e){var t=c_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&l_(n.ownerDocument.documentElement,n)){if(r!==null&&Uv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=$w(n,a);var o=$w(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var EI=qs&&"documentMode"in document&&11>=document.documentMode,Eo=null,xg=null,Rc=null,vg=!1;function Fw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vg||Eo==null||Eo!==hh(r)||(r=Eo,"selectionStart"in r&&Uv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rc&&Zc(Rc,r)||(Rc=r,r=yh(xg,"onSelect"),0<r.length&&(t=new $v("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Eo)))}function yu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Po={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},Gf={},d_={};qs&&(d_=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function yp(e){if(Gf[e])return Gf[e];if(!Po[e])return e;var t=Po[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in d_)return Gf[e]=t[n];return e}var u_=yp("animationend"),h_=yp("animationiteration"),p_=yp("animationstart"),f_=yp("transitionend"),m_=new Map,zw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(e,t){m_.set(e,t),Ja(t,[e])}for(var Wf=0;Wf<zw.length;Wf++){var Kf=zw[Wf],PI=Kf.toLowerCase(),TI=Kf[0].toUpperCase()+Kf.slice(1);sa(PI,"on"+TI)}sa(u_,"onAnimationEnd");sa(h_,"onAnimationIteration");sa(p_,"onAnimationStart");sa("dblclick","onDoubleClick");sa("focusin","onFocus");sa("focusout","onBlur");sa(f_,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);Ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AI=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function Uw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,P4(r,t,void 0,e),e.currentTarget=null}function g_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Uw(i,l,d),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Uw(i,l,d),a=c}}}if(fh)throw e=pg,fh=!1,pg=null,e}function jt(e,t){var n=t[Ng];n===void 0&&(n=t[Ng]=new Set);var r=e+"__bubble";n.has(r)||(x_(t,e,2,!1),n.add(r))}function Qf(e,t,n){var r=0;t&&(r|=4),x_(n,e,r,t)}var wu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[wu]){e[wu]=!0,_N.forEach(function(n){n!=="selectionchange"&&(AI.has(n)||Qf(n,!1,e),Qf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wu]||(t[wu]=!0,Qf("selectionchange",!1,t))}}function x_(e,t,n,r){switch(e_(t)){case 1:var i=H4;break;case 4:i=G4;break;default:i=Mv}n=i.bind(null,t,n,e),i=void 0,!hg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Yf(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ca(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}zN(function(){var d=a,u=Rv(n),h=[];e:{var f=m_.get(e);if(f!==void 0){var m=$v,x=e;switch(e){case"keypress":if(Ku(n)===0)break e;case"keydown":case"keyup":m=oI;break;case"focusin":x="focus",m=qf;break;case"focusout":x="blur",m=qf;break;case"beforeblur":case"afterblur":m=qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Pw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Q4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=dI;break;case u_:case h_:case p_:m=J4;break;case f_:m=hI;break;case"scroll":m=W4;break;case"wheel":m=fI;break;case"copy":case"cut":case"paste":m=eI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Aw}var g=(t&4)!==0,b=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var y=d,w;y!==null;){w=y;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,v!==null&&(k=Kc(y,v),k!=null&&g.push(td(y,k,w)))),b)break;y=y.return}0<g.length&&(f=new m(f,x,null,n,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==dg&&(x=n.relatedTarget||n.fromElement)&&(Ca(x)||x[Vs]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=d,x=x?Ca(x):null,x!==null&&(b=Za(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=d),m!==x)){if(g=Pw,k="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=Aw,k="onPointerLeave",v="onPointerEnter",y="pointer"),b=m==null?f:To(m),w=x==null?f:To(x),f=new g(k,y+"leave",m,n,u),f.target=b,f.relatedTarget=w,k=null,Ca(u)===d&&(g=new g(v,y+"enter",x,n,u),g.target=w,g.relatedTarget=b,k=g),b=k,m&&x)t:{for(g=m,v=x,y=0,w=g;w;w=co(w))y++;for(w=0,k=v;k;k=co(k))w++;for(;0<y-w;)g=co(g),y--;for(;0<w-y;)v=co(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=co(g),v=co(v)}g=null}else g=null;m!==null&&Bw(h,f,m,g,!1),x!==null&&b!==null&&Bw(h,b,x,g,!0)}}e:{if(f=d?To(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=bI;else if(Dw(f))if(a_)S=SI;else{S=NI;var C=jI}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=_I);if(S&&(S=S(e,d))){i_(h,S,n,u);break e}C&&C(e,f,d),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&ig(f,"number",f.value)}switch(C=d?To(d):window,e){case"focusin":(Dw(C)||C.contentEditable==="true")&&(Eo=C,xg=d,Rc=null);break;case"focusout":Rc=xg=Eo=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,Fw(h,n,u);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":Fw(h,n,u)}var N;if(zv)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ko?r_(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(n_&&n.locale!=="ko"&&(ko||j!=="onCompositionStart"?j==="onCompositionEnd"&&ko&&(N=t_()):(Ri=u,Lv="value"in Ri?Ri.value:Ri.textContent,ko=!0)),C=yh(d,j),0<C.length&&(j=new Tw(j,e,null,n,u),h.push({event:j,listeners:C}),N?j.data=N:(N=s_(n),N!==null&&(j.data=N)))),(N=gI?xI(e,n):vI(e,n))&&(d=yh(d,"onBeforeInput"),0<d.length&&(u=new Tw("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=N))}g_(h,t)})}function td(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yh(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Kc(e,n),a!=null&&r.unshift(td(e,a,i)),a=Kc(e,t),a!=null&&r.push(td(e,a,i))),e=e.return}return r}function co(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Bw(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=Kc(n,a),c!=null&&o.unshift(td(n,c,l))):i||(c=Kc(n,a),c!=null&&o.push(td(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var RI=/\r\n?/g,II=/\u0000|\uFFFD/g;function qw(e){return(typeof e=="string"?e:""+e).replace(RI,`
`).replace(II,"")}function bu(e,t,n){if(t=qw(t),qw(e)!==t&&n)throw Error(oe(425))}function wh(){}var yg=null,wg=null;function bg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jg=typeof setTimeout=="function"?setTimeout:void 0,DI=typeof clearTimeout=="function"?clearTimeout:void 0,Vw=typeof Promise=="function"?Promise:void 0,OI=typeof queueMicrotask=="function"?queueMicrotask:typeof Vw<"u"?function(e){return Vw.resolve(null).then(e).catch(MI)}:jg;function MI(e){setTimeout(function(){throw e})}function Xf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Xc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xc(t)}function Fi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),gs="__reactFiber$"+Ll,nd="__reactProps$"+Ll,Vs="__reactContainer$"+Ll,Ng="__reactEvents$"+Ll,LI="__reactListeners$"+Ll,$I="__reactHandles$"+Ll;function Ca(e){var t=e[gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vs]||n[gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hw(e);e!==null;){if(n=e[gs])return n;e=Hw(e)}return t}e=n,n=e.parentNode}return null}function Td(e){return e=e[gs]||e[Vs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function To(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function wp(e){return e[nd]||null}var _g=[],Ao=-1;function ia(e){return{current:e}}function Nt(e){0>Ao||(e.current=_g[Ao],_g[Ao]=null,Ao--)}function vt(e,t){Ao++,_g[Ao]=e.current,e.current=t}var Yi={},yn=ia(Yi),Vn=ia(!1),Fa=Yi;function vl(e,t){var n=e.type.contextTypes;if(!n)return Yi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Hn(e){return e=e.childContextTypes,e!=null}function bh(){Nt(Vn),Nt(yn)}function Gw(e,t,n){if(yn.current!==Yi)throw Error(oe(168));vt(yn,t),vt(Vn,n)}function v_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(oe(108,j4(e)||"Unknown",i));return At({},n,r)}function jh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yi,Fa=yn.current,vt(yn,e),vt(Vn,Vn.current),!0}function Ww(e,t,n){var r=e.stateNode;if(!r)throw Error(oe(169));n?(e=v_(e,t,Fa),r.__reactInternalMemoizedMergedChildContext=e,Nt(Vn),Nt(yn),vt(yn,e)):Nt(Vn),vt(Vn,n)}var Ls=null,bp=!1,Jf=!1;function y_(e){Ls===null?Ls=[e]:Ls.push(e)}function FI(e){bp=!0,y_(e)}function aa(){if(!Jf&&Ls!==null){Jf=!0;var e=0,t=ht;try{var n=Ls;for(ht=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ls=null,bp=!1}catch(i){throw Ls!==null&&(Ls=Ls.slice(e+1)),VN(Iv,aa),i}finally{ht=t,Jf=!1}}return null}var Ro=[],Io=0,Nh=null,_h=0,_r=[],Sr=0,za=null,Fs=1,zs="";function ma(e,t){Ro[Io++]=_h,Ro[Io++]=Nh,Nh=e,_h=t}function w_(e,t,n){_r[Sr++]=Fs,_r[Sr++]=zs,_r[Sr++]=za,za=e;var r=Fs;e=zs;var i=32-Jr(r)-1;r&=~(1<<i),n+=1;var a=32-Jr(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fs=1<<32-Jr(t)+i|n<<i|r,zs=a+e}else Fs=1<<a|n<<i|r,zs=e}function Bv(e){e.return!==null&&(ma(e,1),w_(e,1,0))}function qv(e){for(;e===Nh;)Nh=Ro[--Io],Ro[Io]=null,_h=Ro[--Io],Ro[Io]=null;for(;e===za;)za=_r[--Sr],_r[Sr]=null,zs=_r[--Sr],_r[Sr]=null,Fs=_r[--Sr],_r[Sr]=null}var hr=null,cr=null,_t=!1,Qr=null;function b_(e,t){var n=kr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hr=e,cr=Fi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hr=e,cr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=za!==null?{id:Fs,overflow:zs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,hr=e,cr=null,!0):!1;default:return!1}}function Sg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cg(e){if(_t){var t=cr;if(t){var n=t;if(!Kw(e,t)){if(Sg(e))throw Error(oe(418));t=Fi(n.nextSibling);var r=hr;t&&Kw(e,t)?b_(r,n):(e.flags=e.flags&-4097|2,_t=!1,hr=e)}}else{if(Sg(e))throw Error(oe(418));e.flags=e.flags&-4097|2,_t=!1,hr=e}}}function Qw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hr=e}function ju(e){if(e!==hr)return!1;if(!_t)return Qw(e),_t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bg(e.type,e.memoizedProps)),t&&(t=cr)){if(Sg(e))throw j_(),Error(oe(418));for(;t;)b_(e,t),t=Fi(t.nextSibling)}if(Qw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){cr=Fi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}cr=null}}else cr=hr?Fi(e.stateNode.nextSibling):null;return!0}function j_(){for(var e=cr;e;)e=Fi(e.nextSibling)}function yl(){cr=hr=null,_t=!1}function Vv(e){Qr===null?Qr=[e]:Qr.push(e)}var zI=Ys.ReactCurrentBatchConfig;function ac(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function Nu(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yw(e){var t=e._init;return t(e._payload)}function N_(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=qi(v,y),v.index=0,v.sibling=null,v}function a(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,w,k){return y===null||y.tag!==6?(y=im(w,v.mode,k),y.return=v,y):(y=i(y,w),y.return=v,y)}function c(v,y,w,k){var S=w.type;return S===Co?u(v,y,w.props.children,k,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gi&&Yw(S)===y.type)?(k=i(y,w.props),k.ref=ac(v,y,w),k.return=v,k):(k=th(w.type,w.key,w.props,null,v.mode,k),k.ref=ac(v,y,w),k.return=v,k)}function d(v,y,w,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=am(w,v.mode,k),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function u(v,y,w,k,S){return y===null||y.tag!==7?(y=La(w,v.mode,k,S),y.return=v,y):(y=i(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=im(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hu:return w=th(y.type,y.key,y.props,null,v.mode,w),w.ref=ac(v,null,y),w.return=v,w;case So:return y=am(y,v.mode,w),y.return=v,y;case gi:var k=y._init;return h(v,k(y._payload),w)}if(vc(y)||tc(y))return y=La(y,v.mode,w,null),y.return=v,y;Nu(v,y)}return null}function f(v,y,w,k){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(v,y,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hu:return w.key===S?c(v,y,w,k):null;case So:return w.key===S?d(v,y,w,k):null;case gi:return S=w._init,f(v,y,S(w._payload),k)}if(vc(w)||tc(w))return S!==null?null:u(v,y,w,k,null);Nu(v,w)}return null}function m(v,y,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(w)||null,l(y,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case hu:return v=v.get(k.key===null?w:k.key)||null,c(y,v,k,S);case So:return v=v.get(k.key===null?w:k.key)||null,d(y,v,k,S);case gi:var C=k._init;return m(v,y,w,C(k._payload),S)}if(vc(k)||tc(k))return v=v.get(w)||null,u(y,v,k,S,null);Nu(y,k)}return null}function x(v,y,w,k){for(var S=null,C=null,N=y,j=y=0,_=null;N!==null&&j<w.length;j++){N.index>j?(_=N,N=null):_=N.sibling;var E=f(v,N,w[j],k);if(E===null){N===null&&(N=_);break}e&&N&&E.alternate===null&&t(v,N),y=a(E,y,j),C===null?S=E:C.sibling=E,C=E,N=_}if(j===w.length)return n(v,N),_t&&ma(v,j),S;if(N===null){for(;j<w.length;j++)N=h(v,w[j],k),N!==null&&(y=a(N,y,j),C===null?S=N:C.sibling=N,C=N);return _t&&ma(v,j),S}for(N=r(v,N);j<w.length;j++)_=m(N,v,j,w[j],k),_!==null&&(e&&_.alternate!==null&&N.delete(_.key===null?j:_.key),y=a(_,y,j),C===null?S=_:C.sibling=_,C=_);return e&&N.forEach(function(A){return t(v,A)}),_t&&ma(v,j),S}function g(v,y,w,k){var S=tc(w);if(typeof S!="function")throw Error(oe(150));if(w=S.call(w),w==null)throw Error(oe(151));for(var C=S=null,N=y,j=y=0,_=null,E=w.next();N!==null&&!E.done;j++,E=w.next()){N.index>j?(_=N,N=null):_=N.sibling;var A=f(v,N,E.value,k);if(A===null){N===null&&(N=_);break}e&&N&&A.alternate===null&&t(v,N),y=a(A,y,j),C===null?S=A:C.sibling=A,C=A,N=_}if(E.done)return n(v,N),_t&&ma(v,j),S;if(N===null){for(;!E.done;j++,E=w.next())E=h(v,E.value,k),E!==null&&(y=a(E,y,j),C===null?S=E:C.sibling=E,C=E);return _t&&ma(v,j),S}for(N=r(v,N);!E.done;j++,E=w.next())E=m(N,v,j,E.value,k),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?j:E.key),y=a(E,y,j),C===null?S=E:C.sibling=E,C=E);return e&&N.forEach(function(R){return t(v,R)}),_t&&ma(v,j),S}function b(v,y,w,k){if(typeof w=="object"&&w!==null&&w.type===Co&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case hu:e:{for(var S=w.key,C=y;C!==null;){if(C.key===S){if(S=w.type,S===Co){if(C.tag===7){n(v,C.sibling),y=i(C,w.props.children),y.return=v,v=y;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gi&&Yw(S)===C.type){n(v,C.sibling),y=i(C,w.props),y.ref=ac(v,C,w),y.return=v,v=y;break e}n(v,C);break}else t(v,C);C=C.sibling}w.type===Co?(y=La(w.props.children,v.mode,k,w.key),y.return=v,v=y):(k=th(w.type,w.key,w.props,null,v.mode,k),k.ref=ac(v,y,w),k.return=v,v=k)}return o(v);case So:e:{for(C=w.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=am(w,v.mode,k),y.return=v,v=y}return o(v);case gi:return C=w._init,b(v,y,C(w._payload),k)}if(vc(w))return x(v,y,w,k);if(tc(w))return g(v,y,w,k);Nu(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,w),y.return=v,v=y):(n(v,y),y=im(w,v.mode,k),y.return=v,v=y),o(v)):n(v,y)}return b}var wl=N_(!0),__=N_(!1),Sh=ia(null),Ch=null,Do=null,Hv=null;function Gv(){Hv=Do=Ch=null}function Wv(e){var t=Sh.current;Nt(Sh),e._currentValue=t}function kg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Uo(e,t){Ch=e,Hv=Do=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bn=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(Hv!==e)if(e={context:e,memoizedValue:t,next:null},Do===null){if(Ch===null)throw Error(oe(308));Do=e,Ch.dependencies={lanes:0,firstContext:e}}else Do=Do.next=e;return t}var ka=null;function Kv(e){ka===null?ka=[e]:ka.push(e)}function S_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Kv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Hs(e,r)}function Hs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xi=!1;function Qv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Hs(e,n)}return i=r.interleaved,i===null?(t.next=t,Kv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Hs(e,n)}function Qu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dv(e,n)}}function Xw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function kh(e,t,n,r){var i=e.updateQueue;xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,u=d=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(f=t,m=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=At({},h,f);break e;case 2:xi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ba|=o,e.lanes=o,e.memoizedState=h}}function Jw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var Ad={},ys=ia(Ad),rd=ia(Ad),sd=ia(Ad);function Ea(e){if(e===Ad)throw Error(oe(174));return e}function Yv(e,t){switch(vt(sd,t),vt(rd,e),vt(ys,Ad),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:og(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=og(t,e)}Nt(ys),vt(ys,t)}function bl(){Nt(ys),Nt(rd),Nt(sd)}function k_(e){Ea(sd.current);var t=Ea(ys.current),n=og(t,e.type);t!==n&&(vt(rd,e),vt(ys,n))}function Xv(e){rd.current===e&&(Nt(ys),Nt(rd))}var kt=ia(0);function Eh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zf=[];function Jv(){for(var e=0;e<Zf.length;e++)Zf[e]._workInProgressVersionPrimary=null;Zf.length=0}var Yu=Ys.ReactCurrentDispatcher,em=Ys.ReactCurrentBatchConfig,Ua=0,Et=null,Ht=null,Xt=null,Ph=!1,Ic=!1,id=0,UI=0;function un(){throw Error(oe(321))}function Zv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!es(e[n],t[n]))return!1;return!0}function ey(e,t,n,r,i,a){if(Ua=a,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yu.current=e===null||e.memoizedState===null?HI:GI,e=n(r,i),Ic){a=0;do{if(Ic=!1,id=0,25<=a)throw Error(oe(301));a+=1,Xt=Ht=null,t.updateQueue=null,Yu.current=WI,e=n(r,i)}while(Ic)}if(Yu.current=Th,t=Ht!==null&&Ht.next!==null,Ua=0,Xt=Ht=Et=null,Ph=!1,t)throw Error(oe(300));return e}function ty(){var e=id!==0;return id=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Et.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function Ar(){if(Ht===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var t=Xt===null?Et.memoizedState:Xt.next;if(t!==null)Xt=t,Ht=e;else{if(e===null)throw Error(oe(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Xt===null?Et.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function ad(e,t){return typeof t=="function"?t(e):t}function tm(e){var t=Ar(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var r=Ht,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((Ua&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Et.lanes|=u,Ba|=u}d=d.next}while(d!==null&&d!==a);c===null?o=r:c.next=l,es(r,t.memoizedState)||(Bn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Et.lanes|=a,Ba|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nm(e){var t=Ar(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);es(a,t.memoizedState)||(Bn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function E_(){}function P_(e,t){var n=Et,r=Ar(),i=t(),a=!es(r.memoizedState,i);if(a&&(r.memoizedState=i,Bn=!0),r=r.queue,ny(R_.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,od(9,A_.bind(null,n,r,i,t),void 0,null),Jt===null)throw Error(oe(349));Ua&30||T_(n,t,i)}return i}function T_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function A_(e,t,n,r){t.value=n,t.getSnapshot=r,I_(t)&&D_(e)}function R_(e,t,n){return n(function(){I_(t)&&D_(e)})}function I_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!es(e,n)}catch{return!0}}function D_(e){var t=Hs(e,1);t!==null&&Zr(t,e,1,-1)}function Zw(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ad,lastRenderedState:e},t.queue=e,e=e.dispatch=VI.bind(null,Et,e),[t.memoizedState,e]}function od(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function O_(){return Ar().memoizedState}function Xu(e,t,n,r){var i=cs();Et.flags|=e,i.memoizedState=od(1|t,n,void 0,r===void 0?null:r)}function jp(e,t,n,r){var i=Ar();r=r===void 0?null:r;var a=void 0;if(Ht!==null){var o=Ht.memoizedState;if(a=o.destroy,r!==null&&Zv(r,o.deps)){i.memoizedState=od(t,n,a,r);return}}Et.flags|=e,i.memoizedState=od(1|t,n,a,r)}function eb(e,t){return Xu(8390656,8,e,t)}function ny(e,t){return jp(2048,8,e,t)}function M_(e,t){return jp(4,2,e,t)}function L_(e,t){return jp(4,4,e,t)}function $_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function F_(e,t,n){return n=n!=null?n.concat([e]):null,jp(4,4,$_.bind(null,t,e),n)}function ry(){}function z_(e,t){var n=Ar();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function U_(e,t){var n=Ar();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function B_(e,t,n){return Ua&21?(es(n,t)||(n=WN(),Et.lanes|=n,Ba|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bn=!0),e.memoizedState=n)}function BI(e,t){var n=ht;ht=n!==0&&4>n?n:4,e(!0);var r=em.transition;em.transition={};try{e(!1),t()}finally{ht=n,em.transition=r}}function q_(){return Ar().memoizedState}function qI(e,t,n){var r=Bi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},V_(e))H_(t,n);else if(n=S_(e,t,n,r),n!==null){var i=Sn();Zr(n,e,r,i),G_(n,t,r)}}function VI(e,t,n){var r=Bi(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(V_(e))H_(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,es(l,o)){var c=t.interleaved;c===null?(i.next=i,Kv(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=S_(e,t,i,r),n!==null&&(i=Sn(),Zr(n,e,r,i),G_(n,t,r))}}function V_(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function H_(e,t){Ic=Ph=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function G_(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dv(e,n)}}var Th={readContext:Tr,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},HI={readContext:Tr,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:Tr,useEffect:eb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xu(4194308,4,$_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xu(4,2,e,t)},useMemo:function(e,t){var n=cs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=cs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qI.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:Zw,useDebugValue:ry,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=Zw(!1),t=e[0];return e=BI.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,i=cs();if(_t){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=t(),Jt===null)throw Error(oe(349));Ua&30||T_(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,eb(R_.bind(null,r,a,e),[e]),r.flags|=2048,od(9,A_.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=cs(),t=Jt.identifierPrefix;if(_t){var n=zs,r=Fs;n=(r&~(1<<32-Jr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=id++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UI++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GI={readContext:Tr,useCallback:z_,useContext:Tr,useEffect:ny,useImperativeHandle:F_,useInsertionEffect:M_,useLayoutEffect:L_,useMemo:U_,useReducer:tm,useRef:O_,useState:function(){return tm(ad)},useDebugValue:ry,useDeferredValue:function(e){var t=Ar();return B_(t,Ht.memoizedState,e)},useTransition:function(){var e=tm(ad)[0],t=Ar().memoizedState;return[e,t]},useMutableSource:E_,useSyncExternalStore:P_,useId:q_,unstable_isNewReconciler:!1},WI={readContext:Tr,useCallback:z_,useContext:Tr,useEffect:ny,useImperativeHandle:F_,useInsertionEffect:M_,useLayoutEffect:L_,useMemo:U_,useReducer:nm,useRef:O_,useState:function(){return nm(ad)},useDebugValue:ry,useDeferredValue:function(e){var t=Ar();return Ht===null?t.memoizedState=e:B_(t,Ht.memoizedState,e)},useTransition:function(){var e=nm(ad)[0],t=Ar().memoizedState;return[e,t]},useMutableSource:E_,useSyncExternalStore:P_,useId:q_,unstable_isNewReconciler:!1};function Hr(e,t){if(e&&e.defaultProps){t=At({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Eg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:At({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Np={isMounted:function(e){return(e=e._reactInternals)?Za(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Sn(),i=Bi(e),a=Us(r,i);a.payload=t,n!=null&&(a.callback=n),t=zi(e,a,i),t!==null&&(Zr(t,e,i,r),Qu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Sn(),i=Bi(e),a=Us(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=zi(e,a,i),t!==null&&(Zr(t,e,i,r),Qu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Sn(),r=Bi(e),i=Us(n,r);i.tag=2,t!=null&&(i.callback=t),t=zi(e,i,r),t!==null&&(Zr(t,e,r,n),Qu(t,e,r))}};function tb(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Zc(n,r)||!Zc(i,a):!0}function W_(e,t,n){var r=!1,i=Yi,a=t.contextType;return typeof a=="object"&&a!==null?a=Tr(a):(i=Hn(t)?Fa:yn.current,r=t.contextTypes,a=(r=r!=null)?vl(e,i):Yi),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Np,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function nb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Np.enqueueReplaceState(t,t.state,null)}function Pg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Tr(a):(a=Hn(t)?Fa:yn.current,i.context=vl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Eg(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Np.enqueueReplaceState(i,i.state,null),kh(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function jl(e,t){try{var n="",r=t;do n+=b4(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function rm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var KI=typeof WeakMap=="function"?WeakMap:Map;function K_(e,t,n){n=Us(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rh||(Rh=!0,zg=r),Tg(e,t)},n}function Q_(e,t,n){n=Us(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Tg(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Tg(e,t),typeof r!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function rb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new KI;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=lD.bind(null,e,t,n),t.then(e,e))}function sb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ib(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Us(-1,1),t.tag=2,zi(n,t,1))),n.lanes|=1),e)}var QI=Ys.ReactCurrentOwner,Bn=!1;function _n(e,t,n,r){t.child=e===null?__(t,null,n,r):wl(t,e.child,n,r)}function ab(e,t,n,r,i){n=n.render;var a=t.ref;return Uo(t,i),r=ey(e,t,n,r,a,i),n=ty(),e!==null&&!Bn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i)):(_t&&n&&Bv(t),t.flags|=1,_n(e,t,r,i),t.child)}function ob(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!uy(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Y_(e,t,a,r,i)):(e=th(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Zc,n(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,e=qi(a,r),e.ref=t.ref,e.return=t,t.child=e}function Y_(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Zc(a,r)&&e.ref===t.ref)if(Bn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Bn=!0);else return t.lanes=e.lanes,Gs(e,t,i)}return Ag(e,t,n,r,i)}function X_(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Mo,ar),ar|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vt(Mo,ar),ar|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,vt(Mo,ar),ar|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,vt(Mo,ar),ar|=r;return _n(e,t,i,n),t.child}function J_(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ag(e,t,n,r,i){var a=Hn(n)?Fa:yn.current;return a=vl(t,a),Uo(t,i),n=ey(e,t,n,r,a,i),r=ty(),e!==null&&!Bn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i)):(_t&&r&&Bv(t),t.flags|=1,_n(e,t,n,i),t.child)}function lb(e,t,n,r,i){if(Hn(n)){var a=!0;jh(t)}else a=!1;if(Uo(t,i),t.stateNode===null)Ju(e,t),W_(t,n,r),Pg(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tr(d):(d=Hn(n)?Fa:yn.current,d=vl(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&nb(t,o,r,d),xi=!1;var f=t.memoizedState;o.state=f,kh(t,r,o,i),c=t.memoizedState,l!==r||f!==c||Vn.current||xi?(typeof u=="function"&&(Eg(t,n,u,r),c=t.memoizedState),(l=xi||tb(t,n,l,r,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,C_(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Hr(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tr(c):(c=Hn(n)?Fa:yn.current,c=vl(t,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&nb(t,o,r,c),xi=!1,f=t.memoizedState,o.state=f,kh(t,r,o,i);var x=t.memoizedState;l!==h||f!==x||Vn.current||xi?(typeof m=="function"&&(Eg(t,n,m,r),x=t.memoizedState),(d=xi||tb(t,n,d,r,f,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Rg(e,t,n,r,a,i)}function Rg(e,t,n,r,i,a){J_(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ww(t,n,!1),Gs(e,t,a);r=t.stateNode,QI.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=wl(t,e.child,null,a),t.child=wl(t,null,l,a)):_n(e,t,l,a),t.memoizedState=r.state,i&&Ww(t,n,!0),t.child}function Z_(e){var t=e.stateNode;t.pendingContext?Gw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gw(e,t.context,!1),Yv(e,t.containerInfo)}function cb(e,t,n,r,i){return yl(),Vv(i),t.flags|=256,_n(e,t,n,r),t.child}var Ig={dehydrated:null,treeContext:null,retryLane:0};function Dg(e){return{baseLanes:e,cachePool:null,transitions:null}}function eS(e,t,n){var r=t.pendingProps,i=kt.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),vt(kt,i&1),e===null)return Cg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Cp(o,r,0,null),e=La(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Dg(n),t.memoizedState=Ig,e):sy(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return YI(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=qi(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=qi(l,a):(a=La(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Dg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Ig,r}return a=e.child,e=a.sibling,r=qi(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sy(e,t){return t=Cp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _u(e,t,n,r){return r!==null&&Vv(r),wl(t,e.child,null,n),e=sy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YI(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=rm(Error(oe(422))),_u(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Cp({mode:"visible",children:r.children},i,0,null),a=La(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&wl(t,e.child,null,o),t.child.memoizedState=Dg(o),t.memoizedState=Ig,a);if(!(t.mode&1))return _u(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(oe(419)),r=rm(a,r,void 0),_u(e,t,o,r)}if(l=(o&e.childLanes)!==0,Bn||l){if(r=Jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Hs(e,i),Zr(r,e,i,-1))}return dy(),r=rm(Error(oe(421))),_u(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cD.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,cr=Fi(i.nextSibling),hr=t,_t=!0,Qr=null,e!==null&&(_r[Sr++]=Fs,_r[Sr++]=zs,_r[Sr++]=za,Fs=e.id,zs=e.overflow,za=t),t=sy(t,r.children),t.flags|=4096,t)}function db(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),kg(e.return,t,n)}function sm(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function tS(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_n(e,t,r.children,n),r=kt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&db(e,n,t);else if(e.tag===19)db(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vt(kt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Eh(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),sm(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Eh(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}sm(t,!0,n,null,a);break;case"together":sm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ju(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ba|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,n=qi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XI(e,t,n){switch(t.tag){case 3:Z_(t),yl();break;case 5:k_(t);break;case 1:Hn(t.type)&&jh(t);break;case 4:Yv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;vt(Sh,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(vt(kt,kt.current&1),t.flags|=128,null):n&t.child.childLanes?eS(e,t,n):(vt(kt,kt.current&1),e=Gs(e,t,n),e!==null?e.sibling:null);vt(kt,kt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vt(kt,kt.current),r)break;return null;case 22:case 23:return t.lanes=0,X_(e,t,n)}return Gs(e,t,n)}var nS,Og,rS,sS;nS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Og=function(){};rS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ea(ys.current);var a=null;switch(n){case"input":i=rg(e,i),r=rg(e,r),a=[];break;case"select":i=At({},i,{value:void 0}),r=At({},r,{value:void 0}),a=[];break;case"textarea":i=ag(e,i),r=ag(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wh)}lg(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Gc.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Gc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&jt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};sS=function(e,t,n,r){n!==r&&(t.flags|=4)};function oc(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function JI(e,t,n){var r=t.pendingProps;switch(qv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(t),null;case 1:return Hn(t.type)&&bh(),hn(t),null;case 3:return r=t.stateNode,bl(),Nt(Vn),Nt(yn),Jv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ju(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qr!==null&&(qg(Qr),Qr=null))),Og(e,t),hn(t),null;case 5:Xv(t);var i=Ea(sd.current);if(n=t.type,e!==null&&t.stateNode!=null)rS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(oe(166));return hn(t),null}if(e=Ea(ys.current),ju(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[gs]=t,r[nd]=a,e=(t.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(i=0;i<wc.length;i++)jt(wc[i],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":yw(r,a),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},jt("invalid",r);break;case"textarea":bw(r,a),jt("invalid",r)}lg(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&bu(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&bu(r.textContent,l,e),i=["children",""+l]):Gc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":pu(r),ww(r,a,!0);break;case"textarea":pu(r),jw(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=wh)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=RN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[gs]=t,e[nd]=r,nS(e,t,!1,!1),t.stateNode=e;e:{switch(o=cg(n,r),n){case"dialog":jt("cancel",e),jt("close",e),i=r;break;case"iframe":case"object":case"embed":jt("load",e),i=r;break;case"video":case"audio":for(i=0;i<wc.length;i++)jt(wc[i],e);i=r;break;case"source":jt("error",e),i=r;break;case"img":case"image":case"link":jt("error",e),jt("load",e),i=r;break;case"details":jt("toggle",e),i=r;break;case"input":yw(e,r),i=rg(e,r),jt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=At({},r,{value:void 0}),jt("invalid",e);break;case"textarea":bw(e,r),i=ag(e,r),jt("invalid",e);break;default:i=r}lg(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?ON(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&IN(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wc(e,c):typeof c=="number"&&Wc(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Gc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&jt("scroll",e):c!=null&&Ev(e,a,c,o))}switch(n){case"input":pu(e),ww(e,r,!1);break;case"textarea":pu(e),jw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qi(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Lo(e,!!r.multiple,a,!1):r.defaultValue!=null&&Lo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hn(t),null;case 6:if(e&&t.stateNode!=null)sS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(oe(166));if(n=Ea(sd.current),Ea(ys.current),ju(t)){if(r=t.stateNode,n=t.memoizedProps,r[gs]=t,(a=r.nodeValue!==n)&&(e=hr,e!==null))switch(e.tag){case 3:bu(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bu(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gs]=t,t.stateNode=r}return hn(t),null;case 13:if(Nt(kt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_t&&cr!==null&&t.mode&1&&!(t.flags&128))j_(),yl(),t.flags|=98560,a=!1;else if(a=ju(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(oe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(oe(317));a[gs]=t}else yl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hn(t),a=!1}else Qr!==null&&(qg(Qr),Qr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?Wt===0&&(Wt=3):dy())),t.updateQueue!==null&&(t.flags|=4),hn(t),null);case 4:return bl(),Og(e,t),e===null&&ed(t.stateNode.containerInfo),hn(t),null;case 10:return Wv(t.type._context),hn(t),null;case 17:return Hn(t.type)&&bh(),hn(t),null;case 19:if(Nt(kt),a=t.memoizedState,a===null)return hn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)oc(a,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Eh(e),o!==null){for(t.flags|=128,oc(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return vt(kt,kt.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ft()>Nl&&(t.flags|=128,r=!0,oc(a,!1),t.lanes=4194304)}else{if(!r)if(e=Eh(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),oc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!_t)return hn(t),null}else 2*Ft()-a.renderingStartTime>Nl&&n!==1073741824&&(t.flags|=128,r=!0,oc(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ft(),t.sibling=null,n=kt.current,vt(kt,r?n&1|2:n&1),t):(hn(t),null);case 22:case 23:return cy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ar&1073741824&&(hn(t),t.subtreeFlags&6&&(t.flags|=8192)):hn(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function ZI(e,t){switch(qv(t),t.tag){case 1:return Hn(t.type)&&bh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bl(),Nt(Vn),Nt(yn),Jv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xv(t),null;case 13:if(Nt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));yl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(kt),null;case 4:return bl(),null;case 10:return Wv(t.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var Su=!1,mn=!1,eD=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Oo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(e,t,r)}else n.current=null}function Mg(e,t,n){try{n()}catch(r){Ot(e,t,r)}}var ub=!1;function tD(e,t){if(yg=xh,e=c_(),Uv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++d===i&&(l=o),f===a&&++u===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wg={focusedElem:e,selectionRange:n},xh=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,b=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Hr(t.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(k){Ot(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return x=ub,ub=!1,x}function Dc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Mg(t,n,a)}i=i.next}while(i!==r)}}function _p(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Lg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iS(e){var t=e.alternate;t!==null&&(e.alternate=null,iS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[nd],delete t[Ng],delete t[LI],delete t[$I])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aS(e){return e.tag===5||e.tag===3||e.tag===4}function hb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $g(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wh));else if(r!==4&&(e=e.child,e!==null))for($g(e,t,n),e=e.sibling;e!==null;)$g(e,t,n),e=e.sibling}function Fg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fg(e,t,n),e=e.sibling;e!==null;)Fg(e,t,n),e=e.sibling}var sn=null,Wr=!1;function li(e,t,n){for(n=n.child;n!==null;)oS(e,t,n),n=n.sibling}function oS(e,t,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(gp,n)}catch{}switch(n.tag){case 5:mn||Oo(n,t);case 6:var r=sn,i=Wr;sn=null,li(e,t,n),sn=r,Wr=i,sn!==null&&(Wr?(e=sn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):sn.removeChild(n.stateNode));break;case 18:sn!==null&&(Wr?(e=sn,n=n.stateNode,e.nodeType===8?Xf(e.parentNode,n):e.nodeType===1&&Xf(e,n),Xc(e)):Xf(sn,n.stateNode));break;case 4:r=sn,i=Wr,sn=n.stateNode.containerInfo,Wr=!0,li(e,t,n),sn=r,Wr=i;break;case 0:case 11:case 14:case 15:if(!mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Mg(n,t,o),i=i.next}while(i!==r)}li(e,t,n);break;case 1:if(!mn&&(Oo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ot(n,t,l)}li(e,t,n);break;case 21:li(e,t,n);break;case 22:n.mode&1?(mn=(r=mn)||n.memoizedState!==null,li(e,t,n),mn=r):li(e,t,n);break;default:li(e,t,n)}}function pb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eD),t.forEach(function(r){var i=dD.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:sn=l.stateNode,Wr=!1;break e;case 3:sn=l.stateNode.containerInfo,Wr=!0;break e;case 4:sn=l.stateNode.containerInfo,Wr=!0;break e}l=l.return}if(sn===null)throw Error(oe(160));oS(a,o,i),sn=null,Wr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Ot(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lS(t,e),t=t.sibling}function lS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lr(t,e),os(e),r&4){try{Dc(3,e,e.return),_p(3,e)}catch(g){Ot(e,e.return,g)}try{Dc(5,e,e.return)}catch(g){Ot(e,e.return,g)}}break;case 1:Lr(t,e),os(e),r&512&&n!==null&&Oo(n,n.return);break;case 5:if(Lr(t,e),os(e),r&512&&n!==null&&Oo(n,n.return),e.flags&32){var i=e.stateNode;try{Wc(i,"")}catch(g){Ot(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&TN(i,a),cg(l,o);var d=cg(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?ON(i,h):u==="dangerouslySetInnerHTML"?IN(i,h):u==="children"?Wc(i,h):Ev(i,u,h,d)}switch(l){case"input":sg(i,a);break;case"textarea":AN(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Lo(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Lo(i,!!a.multiple,a.defaultValue,!0):Lo(i,!!a.multiple,a.multiple?[]:"",!1))}i[nd]=a}catch(g){Ot(e,e.return,g)}}break;case 6:if(Lr(t,e),os(e),r&4){if(e.stateNode===null)throw Error(oe(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ot(e,e.return,g)}}break;case 3:if(Lr(t,e),os(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xc(t.containerInfo)}catch(g){Ot(e,e.return,g)}break;case 4:Lr(t,e),os(e);break;case 13:Lr(t,e),os(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(oy=Ft())),r&4&&pb(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(mn=(d=mn)||u,Lr(t,e),mn=d):Lr(t,e),os(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ne=e,u=e.child;u!==null;){for(h=Ne=u;Ne!==null;){switch(f=Ne,m=f.child,f.tag){case 0:case 11:case 14:case 15:Dc(4,f,f.return);break;case 1:Oo(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){Ot(r,n,g)}}break;case 5:Oo(f,f.return);break;case 22:if(f.memoizedState!==null){mb(h);continue}}m!==null?(m.return=f,Ne=m):mb(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=DN("display",o))}catch(g){Ot(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ot(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lr(t,e),os(e),r&4&&pb(e);break;case 21:break;default:Lr(t,e),os(e)}}function os(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(aS(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wc(i,""),r.flags&=-33);var a=hb(e);Fg(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=hb(e);$g(e,l,o);break;default:throw Error(oe(161))}}catch(c){Ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nD(e,t,n){Ne=e,cS(e)}function cS(e,t,n){for(var r=(e.mode&1)!==0;Ne!==null;){var i=Ne,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Su;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||mn;l=Su;var d=mn;if(Su=o,(mn=c)&&!d)for(Ne=i;Ne!==null;)o=Ne,c=o.child,o.tag===22&&o.memoizedState!==null?gb(i):c!==null?(c.return=o,Ne=c):gb(i);for(;a!==null;)Ne=a,cS(a),a=a.sibling;Ne=i,Su=l,mn=d}fb(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ne=a):fb(e)}}function fb(e){for(;Ne!==null;){var t=Ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mn||_p(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Hr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Jw(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Jw(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}mn||t.flags&512&&Lg(t)}catch(f){Ot(t,t.return,f)}}if(t===e){Ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ne=n;break}Ne=t.return}}function mb(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ne=n;break}Ne=t.return}}function gb(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_p(4,t)}catch(c){Ot(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Ot(t,i,c)}}var a=t.return;try{Lg(t)}catch(c){Ot(t,a,c)}break;case 5:var o=t.return;try{Lg(t)}catch(c){Ot(t,o,c)}}}catch(c){Ot(t,t.return,c)}if(t===e){Ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ne=l;break}Ne=t.return}}var rD=Math.ceil,Ah=Ys.ReactCurrentDispatcher,iy=Ys.ReactCurrentOwner,Er=Ys.ReactCurrentBatchConfig,nt=0,Jt=null,Ut=null,an=0,ar=0,Mo=ia(0),Wt=0,ld=null,Ba=0,Sp=0,ay=0,Oc=null,zn=null,oy=0,Nl=1/0,Os=null,Rh=!1,zg=null,Ui=null,Cu=!1,Ii=null,Ih=0,Mc=0,Ug=null,Zu=-1,eh=0;function Sn(){return nt&6?Ft():Zu!==-1?Zu:Zu=Ft()}function Bi(e){return e.mode&1?nt&2&&an!==0?an&-an:zI.transition!==null?(eh===0&&(eh=WN()),eh):(e=ht,e!==0||(e=window.event,e=e===void 0?16:e_(e.type)),e):1}function Zr(e,t,n,r){if(50<Mc)throw Mc=0,Ug=null,Error(oe(185));Ed(e,n,r),(!(nt&2)||e!==Jt)&&(e===Jt&&(!(nt&2)&&(Sp|=n),Wt===4&&wi(e,an)),Gn(e,r),n===1&&nt===0&&!(t.mode&1)&&(Nl=Ft()+500,bp&&aa()))}function Gn(e,t){var n=e.callbackNode;z4(e,t);var r=gh(e,e===Jt?an:0);if(r===0)n!==null&&Sw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Sw(n),t===1)e.tag===0?FI(xb.bind(null,e)):y_(xb.bind(null,e)),OI(function(){!(nt&6)&&aa()}),n=null;else{switch(KN(r)){case 1:n=Iv;break;case 4:n=HN;break;case 16:n=mh;break;case 536870912:n=GN;break;default:n=mh}n=xS(n,dS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dS(e,t){if(Zu=-1,eh=0,nt&6)throw Error(oe(327));var n=e.callbackNode;if(Bo()&&e.callbackNode!==n)return null;var r=gh(e,e===Jt?an:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Dh(e,r);else{t=r;var i=nt;nt|=2;var a=hS();(Jt!==e||an!==t)&&(Os=null,Nl=Ft()+500,Ma(e,t));do try{aD();break}catch(l){uS(e,l)}while(!0);Gv(),Ah.current=a,nt=i,Ut!==null?t=0:(Jt=null,an=0,t=Wt)}if(t!==0){if(t===2&&(i=fg(e),i!==0&&(r=i,t=Bg(e,i))),t===1)throw n=ld,Ma(e,0),wi(e,r),Gn(e,Ft()),n;if(t===6)wi(e,r);else{if(i=e.current.alternate,!(r&30)&&!sD(i)&&(t=Dh(e,r),t===2&&(a=fg(e),a!==0&&(r=a,t=Bg(e,a))),t===1))throw n=ld,Ma(e,0),wi(e,r),Gn(e,Ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(oe(345));case 2:ga(e,zn,Os);break;case 3:if(wi(e,r),(r&130023424)===r&&(t=oy+500-Ft(),10<t)){if(gh(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Sn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jg(ga.bind(null,e,zn,Os),t);break}ga(e,zn,Os);break;case 4:if(wi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Jr(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=Ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rD(r/1960))-r,10<r){e.timeoutHandle=jg(ga.bind(null,e,zn,Os),r);break}ga(e,zn,Os);break;case 5:ga(e,zn,Os);break;default:throw Error(oe(329))}}}return Gn(e,Ft()),e.callbackNode===n?dS.bind(null,e):null}function Bg(e,t){var n=Oc;return e.current.memoizedState.isDehydrated&&(Ma(e,t).flags|=256),e=Dh(e,t),e!==2&&(t=zn,zn=n,t!==null&&qg(t)),e}function qg(e){zn===null?zn=e:zn.push.apply(zn,e)}function sD(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!es(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wi(e,t){for(t&=~ay,t&=~Sp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jr(t),r=1<<n;e[n]=-1,t&=~r}}function xb(e){if(nt&6)throw Error(oe(327));Bo();var t=gh(e,0);if(!(t&1))return Gn(e,Ft()),null;var n=Dh(e,t);if(e.tag!==0&&n===2){var r=fg(e);r!==0&&(t=r,n=Bg(e,r))}if(n===1)throw n=ld,Ma(e,0),wi(e,t),Gn(e,Ft()),n;if(n===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ga(e,zn,Os),Gn(e,Ft()),null}function ly(e,t){var n=nt;nt|=1;try{return e(t)}finally{nt=n,nt===0&&(Nl=Ft()+500,bp&&aa())}}function qa(e){Ii!==null&&Ii.tag===0&&!(nt&6)&&Bo();var t=nt;nt|=1;var n=Er.transition,r=ht;try{if(Er.transition=null,ht=1,e)return e()}finally{ht=r,Er.transition=n,nt=t,!(nt&6)&&aa()}}function cy(){ar=Mo.current,Nt(Mo)}function Ma(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DI(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(qv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:bl(),Nt(Vn),Nt(yn),Jv();break;case 5:Xv(r);break;case 4:bl();break;case 13:Nt(kt);break;case 19:Nt(kt);break;case 10:Wv(r.type._context);break;case 22:case 23:cy()}n=n.return}if(Jt=e,Ut=e=qi(e.current,null),an=ar=t,Wt=0,ld=null,ay=Sp=Ba=0,zn=Oc=null,ka!==null){for(t=0;t<ka.length;t++)if(n=ka[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ka=null}return e}function uS(e,t){do{var n=Ut;try{if(Gv(),Yu.current=Th,Ph){for(var r=Et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ph=!1}if(Ua=0,Xt=Ht=Et=null,Ic=!1,id=0,iy.current=null,n===null||n.return===null){Wt=1,ld=t,Ut=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=an,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=sb(o);if(m!==null){m.flags&=-257,ib(m,o,l,a,t),m.mode&1&&rb(a,d,t),t=m,c=d;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){rb(a,d,t),dy();break e}c=Error(oe(426))}}else if(_t&&l.mode&1){var b=sb(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ib(b,o,l,a,t),Vv(jl(c,l));break e}}a=c=jl(c,l),Wt!==4&&(Wt=2),Oc===null?Oc=[a]:Oc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=K_(a,c,t);Xw(a,v);break e;case 1:l=c;var y=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ui===null||!Ui.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=Q_(a,l,t);Xw(a,k);break e}}a=a.return}while(a!==null)}fS(n)}catch(S){t=S,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function hS(){var e=Ah.current;return Ah.current=Th,e===null?Th:e}function dy(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Jt===null||!(Ba&268435455)&&!(Sp&268435455)||wi(Jt,an)}function Dh(e,t){var n=nt;nt|=2;var r=hS();(Jt!==e||an!==t)&&(Os=null,Ma(e,t));do try{iD();break}catch(i){uS(e,i)}while(!0);if(Gv(),nt=n,Ah.current=r,Ut!==null)throw Error(oe(261));return Jt=null,an=0,Wt}function iD(){for(;Ut!==null;)pS(Ut)}function aD(){for(;Ut!==null&&!A4();)pS(Ut)}function pS(e){var t=gS(e.alternate,e,ar);e.memoizedProps=e.pendingProps,t===null?fS(e):Ut=t,iy.current=null}function fS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZI(n,t),n!==null){n.flags&=32767,Ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,Ut=null;return}}else if(n=JI(n,t,ar),n!==null){Ut=n;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);Wt===0&&(Wt=5)}function ga(e,t,n){var r=ht,i=Er.transition;try{Er.transition=null,ht=1,oD(e,t,n,r)}finally{Er.transition=i,ht=r}return null}function oD(e,t,n,r){do Bo();while(Ii!==null);if(nt&6)throw Error(oe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(U4(e,a),e===Jt&&(Ut=Jt=null,an=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cu||(Cu=!0,xS(mh,function(){return Bo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Er.transition,Er.transition=null;var o=ht;ht=1;var l=nt;nt|=4,iy.current=null,tD(e,n),lS(n,e),kI(wg),xh=!!yg,wg=yg=null,e.current=n,nD(n),R4(),nt=l,ht=o,Er.transition=a}else e.current=n;if(Cu&&(Cu=!1,Ii=e,Ih=i),a=e.pendingLanes,a===0&&(Ui=null),O4(n.stateNode),Gn(e,Ft()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rh)throw Rh=!1,e=zg,zg=null,e;return Ih&1&&e.tag!==0&&Bo(),a=e.pendingLanes,a&1?e===Ug?Mc++:(Mc=0,Ug=e):Mc=0,aa(),null}function Bo(){if(Ii!==null){var e=KN(Ih),t=Er.transition,n=ht;try{if(Er.transition=null,ht=16>e?16:e,Ii===null)var r=!1;else{if(e=Ii,Ii=null,Ih=0,nt&6)throw Error(oe(331));var i=nt;for(nt|=4,Ne=e.current;Ne!==null;){var a=Ne,o=a.child;if(Ne.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ne=d;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:Dc(8,u,a)}var h=u.child;if(h!==null)h.return=u,Ne=h;else for(;Ne!==null;){u=Ne;var f=u.sibling,m=u.return;if(iS(u),u===d){Ne=null;break}if(f!==null){f.return=m,Ne=f;break}Ne=m}}}var x=a.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Ne=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ne=o;else e:for(;Ne!==null;){if(a=Ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Dc(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,Ne=v;break e}Ne=a.return}}var y=e.current;for(Ne=y;Ne!==null;){o=Ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ne=w;else e:for(o=y;Ne!==null;){if(l=Ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_p(9,l)}}catch(S){Ot(l,l.return,S)}if(l===o){Ne=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ne=k;break e}Ne=l.return}}if(nt=i,aa(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(gp,e)}catch{}r=!0}return r}finally{ht=n,Er.transition=t}}return!1}function vb(e,t,n){t=jl(n,t),t=K_(e,t,1),e=zi(e,t,1),t=Sn(),e!==null&&(Ed(e,1,t),Gn(e,t))}function Ot(e,t,n){if(e.tag===3)vb(e,e,n);else for(;t!==null;){if(t.tag===3){vb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ui===null||!Ui.has(r))){e=jl(n,e),e=Q_(t,e,1),t=zi(t,e,1),e=Sn(),t!==null&&(Ed(t,1,e),Gn(t,e));break}}t=t.return}}function lD(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Sn(),e.pingedLanes|=e.suspendedLanes&n,Jt===e&&(an&n)===n&&(Wt===4||Wt===3&&(an&130023424)===an&&500>Ft()-oy?Ma(e,0):ay|=n),Gn(e,t)}function mS(e,t){t===0&&(e.mode&1?(t=gu,gu<<=1,!(gu&130023424)&&(gu=4194304)):t=1);var n=Sn();e=Hs(e,t),e!==null&&(Ed(e,t,n),Gn(e,n))}function cD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mS(e,n)}function dD(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(t),mS(e,n)}var gS;gS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vn.current)Bn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Bn=!1,XI(e,t,n);Bn=!!(e.flags&131072)}else Bn=!1,_t&&t.flags&1048576&&w_(t,_h,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ju(e,t),e=t.pendingProps;var i=vl(t,yn.current);Uo(t,n),i=ey(null,t,r,e,i,n);var a=ty();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hn(r)?(a=!0,jh(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qv(t),i.updater=Np,t.stateNode=i,i._reactInternals=t,Pg(t,r,e,n),t=Rg(null,t,r,!0,a,n)):(t.tag=0,_t&&a&&Bv(t),_n(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ju(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=hD(r),e=Hr(r,e),i){case 0:t=Ag(null,t,r,e,n);break e;case 1:t=lb(null,t,r,e,n);break e;case 11:t=ab(null,t,r,e,n);break e;case 14:t=ob(null,t,r,Hr(r.type,e),n);break e}throw Error(oe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hr(r,i),Ag(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hr(r,i),lb(e,t,r,i,n);case 3:e:{if(Z_(t),e===null)throw Error(oe(387));r=t.pendingProps,a=t.memoizedState,i=a.element,C_(e,t),kh(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=jl(Error(oe(423)),t),t=cb(e,t,r,n,i);break e}else if(r!==i){i=jl(Error(oe(424)),t),t=cb(e,t,r,n,i);break e}else for(cr=Fi(t.stateNode.containerInfo.firstChild),hr=t,_t=!0,Qr=null,n=__(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yl(),r===i){t=Gs(e,t,n);break e}_n(e,t,r,n)}t=t.child}return t;case 5:return k_(t),e===null&&Cg(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,bg(r,i)?o=null:a!==null&&bg(r,a)&&(t.flags|=32),J_(e,t),_n(e,t,o,n),t.child;case 6:return e===null&&Cg(t),null;case 13:return eS(e,t,n);case 4:return Yv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wl(t,null,r,n):_n(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hr(r,i),ab(e,t,r,i,n);case 7:return _n(e,t,t.pendingProps,n),t.child;case 8:return _n(e,t,t.pendingProps.children,n),t.child;case 12:return _n(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,vt(Sh,r._currentValue),r._currentValue=o,a!==null)if(es(a.value,o)){if(a.children===i.children&&!Vn.current){t=Gs(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Us(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),kg(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(oe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),kg(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}_n(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Uo(t,n),i=Tr(i),r=r(i),t.flags|=1,_n(e,t,r,n),t.child;case 14:return r=t.type,i=Hr(r,t.pendingProps),i=Hr(r.type,i),ob(e,t,r,i,n);case 15:return Y_(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hr(r,i),Ju(e,t),t.tag=1,Hn(r)?(e=!0,jh(t)):e=!1,Uo(t,n),W_(t,r,i),Pg(t,r,i,n),Rg(null,t,r,!0,e,n);case 19:return tS(e,t,n);case 22:return X_(e,t,n)}throw Error(oe(156,t.tag))};function xS(e,t){return VN(e,t)}function uD(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(e,t,n,r){return new uD(e,t,n,r)}function uy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hD(e){if(typeof e=="function")return uy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tv)return 11;if(e===Av)return 14}return 2}function qi(e,t){var n=e.alternate;return n===null?(n=kr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function th(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")uy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Co:return La(n.children,i,a,t);case Pv:o=8,i|=8;break;case Zm:return e=kr(12,n,t,i|2),e.elementType=Zm,e.lanes=a,e;case eg:return e=kr(13,n,t,i),e.elementType=eg,e.lanes=a,e;case tg:return e=kr(19,n,t,i),e.elementType=tg,e.lanes=a,e;case kN:return Cp(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SN:o=10;break e;case CN:o=9;break e;case Tv:o=11;break e;case Av:o=14;break e;case gi:o=16,r=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=kr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function La(e,t,n,r){return e=kr(7,e,r,t),e.lanes=n,e}function Cp(e,t,n,r){return e=kr(22,e,r,t),e.elementType=kN,e.lanes=n,e.stateNode={isHidden:!1},e}function im(e,t,n){return e=kr(6,e,null,t),e.lanes=n,e}function am(e,t,n){return t=kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pD(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zf(0),this.expirationTimes=zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hy(e,t,n,r,i,a,o,l,c){return e=new pD(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=kr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qv(a),e}function fD(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:So,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vS(e){if(!e)return Yi;e=e._reactInternals;e:{if(Za(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var n=e.type;if(Hn(n))return v_(e,n,t)}return t}function yS(e,t,n,r,i,a,o,l,c){return e=hy(n,r,!0,e,i,a,o,l,c),e.context=vS(null),n=e.current,r=Sn(),i=Bi(n),a=Us(r,i),a.callback=t??null,zi(n,a,i),e.current.lanes=i,Ed(e,i,r),Gn(e,r),e}function kp(e,t,n,r){var i=t.current,a=Sn(),o=Bi(i);return n=vS(n),t.context===null?t.context=n:t.pendingContext=n,t=Us(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zi(i,t,o),e!==null&&(Zr(e,i,o,a),Qu(e,i,o)),o}function Oh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function py(e,t){yb(e,t),(e=e.alternate)&&yb(e,t)}function mD(){return null}var wS=typeof reportError=="function"?reportError:function(e){console.error(e)};function fy(e){this._internalRoot=e}Ep.prototype.render=fy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));kp(e,t,null,null)};Ep.prototype.unmount=fy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qa(function(){kp(null,e,null,null)}),t[Vs]=null}};function Ep(e){this._internalRoot=e}Ep.prototype.unstable_scheduleHydration=function(e){if(e){var t=XN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yi.length&&t!==0&&t<yi[n].priority;n++);yi.splice(n,0,e),n===0&&ZN(e)}};function my(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wb(){}function gD(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=Oh(o);a.call(d)}}var o=yS(t,r,e,0,null,!1,!1,"",wb);return e._reactRootContainer=o,e[Vs]=o.current,ed(e.nodeType===8?e.parentNode:e),qa(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Oh(c);l.call(d)}}var c=hy(e,0,!1,null,null,!1,!1,"",wb);return e._reactRootContainer=c,e[Vs]=c.current,ed(e.nodeType===8?e.parentNode:e),qa(function(){kp(t,c,n,r)}),c}function Tp(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Oh(o);l.call(c)}}kp(t,o,e,i)}else o=gD(n,t,e,i,r);return Oh(o)}QN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yc(t.pendingLanes);n!==0&&(Dv(t,n|1),Gn(t,Ft()),!(nt&6)&&(Nl=Ft()+500,aa()))}break;case 13:qa(function(){var r=Hs(e,1);if(r!==null){var i=Sn();Zr(r,e,1,i)}}),py(e,1)}};Ov=function(e){if(e.tag===13){var t=Hs(e,134217728);if(t!==null){var n=Sn();Zr(t,e,134217728,n)}py(e,134217728)}};YN=function(e){if(e.tag===13){var t=Bi(e),n=Hs(e,t);if(n!==null){var r=Sn();Zr(n,e,t,r)}py(e,t)}};XN=function(){return ht};JN=function(e,t){var n=ht;try{return ht=e,t()}finally{ht=n}};ug=function(e,t,n){switch(t){case"input":if(sg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wp(r);if(!i)throw Error(oe(90));PN(r),sg(r,i)}}}break;case"textarea":AN(e,n);break;case"select":t=n.value,t!=null&&Lo(e,!!n.multiple,t,!1)}};$N=ly;FN=qa;var xD={usingClientEntryPoint:!1,Events:[Td,To,wp,MN,LN,ly]},lc={findFiberByHostInstance:Ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vD={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=BN(e),e===null?null:e.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||mD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{gp=ku.inject(vD),vs=ku}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xD;vr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(t))throw Error(oe(200));return fD(e,t,null,n)};vr.createRoot=function(e,t){if(!my(e))throw Error(oe(299));var n=!1,r="",i=wS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=hy(e,1,!1,null,null,n,!1,r,i),e[Vs]=t.current,ed(e.nodeType===8?e.parentNode:e),new fy(t)};vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=BN(t),e=e===null?null:e.stateNode,e};vr.flushSync=function(e){return qa(e)};vr.hydrate=function(e,t,n){if(!Pp(t))throw Error(oe(200));return Tp(null,e,t,!0,n)};vr.hydrateRoot=function(e,t,n){if(!my(e))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=wS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=yS(t,null,e,1,n??null,i,!1,a,o),e[Vs]=t.current,ed(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ep(t)};vr.render=function(e,t,n){if(!Pp(t))throw Error(oe(200));return Tp(null,e,t,!1,n)};vr.unmountComponentAtNode=function(e){if(!Pp(e))throw Error(oe(40));return e._reactRootContainer?(qa(function(){Tp(null,null,e,!1,function(){e._reactRootContainer=null,e[Vs]=null})}),!0):!1};vr.unstable_batchedUpdates=ly;vr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pp(n))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return Tp(e,t,n,!1,r)};vr.version="18.3.1-next-f1338f8080-20240426";function bS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bS)}catch(e){console.error(e)}}bS(),bN.exports=vr;var Xs=bN.exports;const gy=Dl(Xs);var jS,bb=Xs;jS=bb.createRoot,bb.hydrateRoot;const yD=1,wD=1e6;let om=0;function bD(){return om=(om+1)%Number.MAX_SAFE_INTEGER,om.toString()}const lm=new Map,jb=e=>{if(lm.has(e))return;const t=setTimeout(()=>{lm.delete(e),Lc({type:"REMOVE_TOAST",toastId:e})},wD);lm.set(e,t)},jD=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,yD)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?jb(n):e.toasts.forEach(r=>{jb(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},nh=[];let rh={toasts:[]};function Lc(e){rh=jD(rh,e),nh.forEach(t=>{t(rh)})}function Vg({...e}){const t=bD(),n=i=>Lc({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Lc({type:"DISMISS_TOAST",toastId:t});return Lc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function rt(){const[e,t]=he.useState(rh);return he.useEffect(()=>(nh.push(t),()=>{const n=nh.indexOf(t);n>-1&&nh.splice(n,1)}),[e]),{...e,toast:Vg,dismiss:n=>Lc({type:"DISMISS_TOAST",toastId:n})}}function ae(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function ND(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Ap(...e){return t=>e.forEach(n=>ND(n,t))}function $e(...e){return p.useCallback(Ap(...e),e)}function _D(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...x}=h,g=(f==null?void 0:f[e][c])||l,b=p.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:m})}function u(h,f){const m=(f==null?void 0:f[e][c])||l,x=p.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,SD(i,...t)]}function SD(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var Cn=p.forwardRef((e,t)=>{const{children:n,...r}=e,i=p.Children.toArray(n),a=i.find(CD);if(a){const o=a.props.children,l=i.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return s.jsx(Hg,{...r,ref:t,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return s.jsx(Hg,{...r,ref:t,children:n})});Cn.displayName="Slot";var Hg=p.forwardRef((e,t)=>{const{children:n,...r}=e;if(p.isValidElement(n)){const i=ED(n);return p.cloneElement(n,{...kD(r,n.props),ref:t?Ap(t,i):i})}return p.Children.count(n)>1?p.Children.only(null):null});Hg.displayName="SlotClone";var xy=({children:e})=>s.jsx(s.Fragment,{children:e});function CD(e){return p.isValidElement(e)&&e.type===xy}function kD(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function ED(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Rp(e){const t=e+"CollectionProvider",[n,r]=_D(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:x,children:g}=m,b=he.useRef(null),v=he.useRef(new Map).current;return s.jsx(i,{scope:x,itemMap:v,collectionRef:b,children:g})};o.displayName=t;const l=e+"CollectionSlot",c=he.forwardRef((m,x)=>{const{scope:g,children:b}=m,v=a(l,g),y=$e(x,v.collectionRef);return s.jsx(Cn,{ref:y,children:b})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",h=he.forwardRef((m,x)=>{const{scope:g,children:b,...v}=m,y=he.useRef(null),w=$e(x,y),k=a(d,g);return he.useEffect(()=>(k.itemMap.set(y,{ref:y,...v}),()=>void k.itemMap.delete(y))),s.jsx(Cn,{[u]:"",ref:w,children:b})});h.displayName=d;function f(m){const x=a(e+"CollectionConsumer",m);return he.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const v=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(x.itemMap.values()).sort((k,S)=>v.indexOf(k.ref.current)-v.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},f,r]}function PD(e,t){const n=p.createContext(t),r=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function i(a){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function wn(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];const d=h=>{var v;const{scope:f,children:m,...x}=h,g=((v=f==null?void 0:f[e])==null?void 0:v[c])||l,b=p.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:m})};d.displayName=a+"Provider";function u(h,f){var g;const m=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,x=p.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,TD(i,...t)]}function TD(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var AD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],je=AD.reduce((e,t)=>{const n=p.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?Cn:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function vy(e,t){e&&Xs.flushSync(()=>e.dispatchEvent(t))}function St(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function RD(e,t=globalThis==null?void 0:globalThis.document){const n=St(e);p.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var ID="DismissableLayer",Gg="dismissableLayer.update",DD="dismissableLayer.pointerDownOutside",OD="dismissableLayer.focusOutside",Nb,NS=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eo=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=p.useContext(NS),[u,h]=p.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),x=$e(t,N=>h(N)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),y=u?g.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,k=y>=v,S=LD(N=>{const j=N.target,_=[...d.branches].some(E=>E.contains(j));!k||_||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},f),C=$D(N=>{const j=N.target;[...d.branches].some(E=>E.contains(j))||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},f);return RD(N=>{y===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),p.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Nb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),_b(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Nb)}},[u,f,n,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),_b())},[u,d]),p.useEffect(()=>{const N=()=>m({});return document.addEventListener(Gg,N),()=>document.removeEventListener(Gg,N)},[]),s.jsx(je.div,{...c,ref:x,style:{pointerEvents:w?k?"auto":"none":void 0,...e.style},onFocusCapture:ae(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ae(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ae(e.onPointerDownCapture,S.onPointerDownCapture)})});eo.displayName=ID;var MD="DismissableLayerBranch",_S=p.forwardRef((e,t)=>{const n=p.useContext(NS),r=p.useRef(null),i=$e(t,r);return p.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(je.div,{...e,ref:i})});_S.displayName=MD;function LD(e,t=globalThis==null?void 0:globalThis.document){const n=St(e),r=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){SS(DD,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function $D(e,t=globalThis==null?void 0:globalThis.document){const n=St(e),r=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!r.current&&SS(OD,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _b(){const e=new CustomEvent(Gg);document.dispatchEvent(e)}function SS(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?vy(i,a):i.dispatchEvent(a)}var FD=eo,zD=_S,qt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},UD="Portal",$l=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[i,a]=p.useState(!1);qt(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?gy.createPortal(s.jsx(je.div,{...r,ref:t}),o):null});$l.displayName=UD;function BD(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var Vt=e=>{const{present:t,children:n}=e,r=qD(t),i=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=$e(r.ref,VD(i));return typeof n=="function"||r.isPresent?p.cloneElement(i,{ref:a}):null};Vt.displayName="Presence";function qD(e){const[t,n]=p.useState(),r=p.useRef({}),i=p.useRef(e),a=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=BD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Eu(r.current);a.current=l==="mounted"?d:"none"},[l]),qt(()=>{const d=r.current,u=i.current;if(u!==e){const f=a.current,m=Eu(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),qt(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=m=>{const g=Eu(r.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!i.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},f=m=>{m.target===t&&(a.current=Eu(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Eu(e){return(e==null?void 0:e.animationName)||"none"}function VD(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function xr({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=HD({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:r,l=St(n),c=p.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else i(d)},[a,e,i,l]);return[o,c]}function HD({defaultProp:e,onChange:t}){const n=p.useState(e),[r]=n,i=p.useRef(r),a=St(t);return p.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}var GD="VisuallyHidden",Rd=p.forwardRef((e,t)=>s.jsx(je.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Rd.displayName=GD;var WD=Rd,yy="ToastProvider",[wy,KD,QD]=Rp("Toast"),[CS,kY]=wn("Toast",[QD]),[YD,Ip]=CS(yy),kS=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=p.useState(null),[d,u]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${yy}\`. Expected non-empty \`string\`.`),s.jsx(wy.Provider,{scope:t,children:s.jsx(YD,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>u(m=>m+1),[]),onToastRemove:p.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};kS.displayName=yy;var ES="ToastViewport",XD=["F8"],Wg="toast.viewportPause",Kg="toast.viewportResume",PS=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=XD,label:i="Notifications ({hotkey})",...a}=e,o=Ip(ES,n),l=KD(n),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=$e(t,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const b=v=>{var w;r.length!==0&&r.every(k=>v[k]||v.code===k)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),p.useEffect(()=>{const b=c.current,v=h.current;if(x&&b&&v){const y=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Wg);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Kg);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},k=C=>{!b.contains(C.relatedTarget)&&w()},S=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",y),b.addEventListener("focusout",k),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[x,o.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:b})=>{const y=l().map(w=>{const k=w.ref.current,S=[k,...dO(k)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?y.reverse():y).flat()},[l]);return p.useEffect(()=>{const b=h.current;if(b){const v=y=>{var S,C,N;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const j=document.activeElement,_=y.shiftKey;if(y.target===b&&_){(S=d.current)==null||S.focus();return}const R=g({tabbingDirection:_?"backwards":"forwards"}),$=R.findIndex(B=>B===j);cm(R.slice($+1))?y.preventDefault():_?(C=d.current)==null||C.focus():(N=u.current)==null||N.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[l,g]),s.jsxs(zD,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(Qg,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});cm(b)}}),s.jsx(wy.Slot,{scope:n,children:s.jsx(je.ol,{tabIndex:-1,...a,ref:f})}),x&&s.jsx(Qg,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});cm(b)}})]})});PS.displayName=ES;var TS="ToastFocusProxy",Qg=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=Ip(TS,n);return s.jsx(Rd,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&r()}})});Qg.displayName=TS;var Dp="Toast",JD="toast.swipeStart",ZD="toast.swipeMove",eO="toast.swipeCancel",tO="toast.swipeEnd",AS=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=xr({prop:r,defaultProp:i,onChange:a});return s.jsx(Vt,{present:n||l,children:s.jsx(sO,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:St(e.onPause),onResume:St(e.onResume),onSwipeStart:ae(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ae(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ae(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ae(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});AS.displayName=Dp;var[nO,rO]=CS(Dp,{onClose(){}}),sO=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...x}=e,g=Ip(Dp,n),[b,v]=p.useState(null),y=$e(t,B=>v(B)),w=p.useRef(null),k=p.useRef(null),S=i||g.duration,C=p.useRef(0),N=p.useRef(S),j=p.useRef(0),{onToastAdd:_,onToastRemove:E}=g,A=St(()=>{var F;(b==null?void 0:b.contains(document.activeElement))&&((F=g.viewport)==null||F.focus()),o()}),R=p.useCallback(B=>{!B||B===1/0||(window.clearTimeout(j.current),C.current=new Date().getTime(),j.current=window.setTimeout(A,B))},[A]);p.useEffect(()=>{const B=g.viewport;if(B){const F=()=>{R(N.current),d==null||d()},z=()=>{const q=new Date().getTime()-C.current;N.current=N.current-q,window.clearTimeout(j.current),c==null||c()};return B.addEventListener(Wg,z),B.addEventListener(Kg,F),()=>{B.removeEventListener(Wg,z),B.removeEventListener(Kg,F)}}},[g.viewport,S,c,d,R]),p.useEffect(()=>{a&&!g.isClosePausedRef.current&&R(S)},[a,S,g.isClosePausedRef,R]),p.useEffect(()=>(_(),()=>E()),[_,E]);const $=p.useMemo(()=>b?$S(b):null,[b]);return g.viewport?s.jsxs(s.Fragment,{children:[$&&s.jsx(iO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),s.jsx(nO,{scope:n,onClose:A,children:Xs.createPortal(s.jsx(wy.ItemSlot,{scope:n,children:s.jsx(FD,{asChild:!0,onEscapeKeyDown:ae(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||A(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ae(e.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:ae(e.onPointerDown,B=>{B.button===0&&(w.current={x:B.clientX,y:B.clientY})}),onPointerMove:ae(e.onPointerMove,B=>{if(!w.current)return;const F=B.clientX-w.current.x,z=B.clientY-w.current.y,q=!!k.current,D=["left","right"].includes(g.swipeDirection),I=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,T=D?I(0,F):0,H=D?0:I(0,z),O=B.pointerType==="touch"?10:2,P={x:T,y:H},Z={originalEvent:B,delta:P};q?(k.current=P,Pu(ZD,h,Z,{discrete:!1})):Sb(P,g.swipeDirection,O)?(k.current=P,Pu(JD,u,Z,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(F)>O||Math.abs(z)>O)&&(w.current=null)}),onPointerUp:ae(e.onPointerUp,B=>{const F=k.current,z=B.target;if(z.hasPointerCapture(B.pointerId)&&z.releasePointerCapture(B.pointerId),k.current=null,w.current=null,F){const q=B.currentTarget,D={originalEvent:B,delta:F};Sb(F,g.swipeDirection,g.swipeThreshold)?Pu(tO,m,D,{discrete:!0}):Pu(eO,f,D,{discrete:!0}),q.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),iO=e=>{const{__scopeToast:t,children:n,...r}=e,i=Ip(Dp,t),[a,o]=p.useState(!1),[l,c]=p.useState(!1);return lO(()=>o(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx($l,{asChild:!0,children:s.jsx(Rd,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},aO="ToastTitle",RS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(je.div,{...r,ref:t})});RS.displayName=aO;var oO="ToastDescription",IS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(je.div,{...r,ref:t})});IS.displayName=oO;var DS="ToastAction",OS=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(LS,{altText:n,asChild:!0,children:s.jsx(by,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${DS}\`. Expected non-empty \`string\`.`),null)});OS.displayName=DS;var MS="ToastClose",by=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=rO(MS,n);return s.jsx(LS,{asChild:!0,children:s.jsx(je.button,{type:"button",...r,ref:t,onClick:ae(e.onClick,i.onClose)})})});by.displayName=MS;var LS=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return s.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function $S(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),cO(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...$S(r))}}),t}function Pu(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?vy(i,a):i.dispatchEvent(a)}var Sb=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>n:!a&&i>n};function lO(e=()=>{}){const t=St(e);qt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function cO(e){return e.nodeType===e.ELEMENT_NODE}function dO(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function cm(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var uO=kS,FS=PS,zS=AS,US=RS,BS=IS,qS=OS,VS=by;function HS(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=HS(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function GS(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=HS(e))&&(r&&(r+=" "),r+=t);return r}const Cb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,kb=GS,to=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return kb(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const f=Cb(u)||Cb(h);return i[d][f]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...a,...l}[g]):{...a,...l}[g]===b})?[...d,h,f]:d},[]);return kb(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WS=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...pO,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:WS("lucide",i),...l},[...o.map(([d,u])=>p.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(e,t)=>{const n=p.forwardRef(({className:r,...i},a)=>p.createElement(fO,{ref:a,iconNode:t,className:WS(`lucide-${hO(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=pe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=pe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=pe("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=pe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=pe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=pe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=pe("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=pe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=pe("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=pe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=pe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=pe("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=pe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=pe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=pe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=pe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=pe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=pe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=pe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=pe("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=pe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=pe("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=pe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=pe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=pe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ky="-",DO=e=>{const t=MO(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(ky);return l[0]===""&&l.length!==1&&l.shift(),sC(l,t)||OO(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},sC=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?sC(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(ky);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},Ab=/^\[(.+)\]$/,OO=e=>{if(Ab.test(e)){const t=Ab.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},MO=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return $O(Object.entries(e.classGroups),n).forEach(([a,o])=>{tx(o,r,a,t)}),r},tx=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:Rb(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(LO(i)){tx(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{tx(o,Rb(t,a),n,r)})})},Rb=(e,t)=>{let n=e;return t.split(ky).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},LO=e=>e.isThemeGetter,$O=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,FO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},iC="!",zO=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let b=0;b<l.length;b++){let v=l[b];if(d===0){if(v===i&&(r||l.slice(b,b+a)===t)){c.push(l.slice(u,b)),u=b+a;continue}if(v==="/"){h=b;continue}}v==="["?d++:v==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(iC),x=m?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},UO=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},BO=e=>({cache:FO(e.cacheSize),parseClassName:zO(e),...DO(e)}),qO=/\s+/,VO=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(qO);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(d);let x=!!m,g=r(x?f.substring(0,m):f);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const b=UO(u).join(":"),v=h?b+iC:b,y=v+g;if(a.includes(y))continue;a.push(y);const w=i(g,x);for(let k=0;k<w.length;++k){const S=w[k];a.push(v+S)}l=d+(l.length>0?" "+l:l)}return l};function HO(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=aC(t))&&(r&&(r+=" "),r+=n);return r}const aC=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=aC(e[r]))&&(n&&(n+=" "),n+=t);return n};function GO(e,...t){let n,r,i,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return n=BO(d),r=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=VO(c,n);return i(c,u),u}return function(){return a(HO.apply(null,arguments))}}const bt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},oC=/^\[(?:([a-z-]+):)?(.+)\]$/i,WO=/^\d+\/\d+$/,KO=new Set(["px","full","screen"]),QO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,YO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,XO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,JO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,As=e=>Ho(e)||KO.has(e)||WO.test(e),ci=e=>Ul(e,"length",oM),Ho=e=>!!e&&!Number.isNaN(Number(e)),dm=e=>Ul(e,"number",Ho),cc=e=>!!e&&Number.isInteger(Number(e)),eM=e=>e.endsWith("%")&&Ho(e.slice(0,-1)),He=e=>oC.test(e),di=e=>QO.test(e),tM=new Set(["length","size","percentage"]),nM=e=>Ul(e,tM,lC),rM=e=>Ul(e,"position",lC),sM=new Set(["image","url"]),iM=e=>Ul(e,sM,cM),aM=e=>Ul(e,"",lM),dc=()=>!0,Ul=(e,t,n)=>{const r=oC.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},oM=e=>YO.test(e)&&!XO.test(e),lC=()=>!1,lM=e=>JO.test(e),cM=e=>ZO.test(e),dM=()=>{const e=bt("colors"),t=bt("spacing"),n=bt("blur"),r=bt("brightness"),i=bt("borderColor"),a=bt("borderRadius"),o=bt("borderSpacing"),l=bt("borderWidth"),c=bt("contrast"),d=bt("grayscale"),u=bt("hueRotate"),h=bt("invert"),f=bt("gap"),m=bt("gradientColorStops"),x=bt("gradientColorStopPositions"),g=bt("inset"),b=bt("margin"),v=bt("opacity"),y=bt("padding"),w=bt("saturate"),k=bt("scale"),S=bt("sepia"),C=bt("skew"),N=bt("space"),j=bt("translate"),_=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",He,t],R=()=>[He,t],$=()=>["",As,ci],B=()=>["auto",Ho,He],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",He],T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[Ho,He];return{cacheSize:500,separator:":",theme:{colors:[dc],spacing:[As,ci],blur:["none","",di,He],brightness:H(),borderColor:[e],borderRadius:["none","","full",di,He],borderSpacing:R(),borderWidth:$(),contrast:H(),grayscale:I(),hueRotate:H(),invert:I(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[eM,ci],inset:A(),margin:A(),opacity:H(),padding:R(),saturate:H(),scale:H(),sepia:I(),skew:H(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[di]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),He]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cc,He]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",cc,He]}],"grid-cols":[{"grid-cols":[dc]}],"col-start-end":[{col:["auto",{span:["full",cc,He]},He]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[dc]}],"row-start-end":[{row:["auto",{span:[cc,He]},He]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[di]},di]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",di,ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dm]}],"font-family":[{font:[dc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",Ho,dm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",As,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",As,ci]}],"underline-offset":[{"underline-offset":["auto",As,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),rM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},iM]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[As,He]}],"outline-w":[{outline:[As,ci]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[As,ci]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",di,aM]}],"shadow-color":[{shadow:[dc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",di,He]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[cc,He]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[As,ci,dm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},uM=GO(dM);function Q(...e){return uM(GS(e))}function bi(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);try{return JSON.stringify(e,null,2)}catch{return String(e)}}const hM=uO,cC=p.forwardRef(({className:e,...t},n)=>s.jsx(FS,{ref:n,className:Q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cC.displayName=FS.displayName;const pM=to("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dC=p.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(zS,{ref:r,className:Q(pM({variant:t}),e),...n}));dC.displayName=zS.displayName;const fM=p.forwardRef(({className:e,...t},n)=>s.jsx(qS,{ref:n,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));fM.displayName=qS.displayName;const uC=p.forwardRef(({className:e,...t},n)=>s.jsx(VS,{ref:n,className:Q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Bt,{className:"h-4 w-4"})}));uC.displayName=VS.displayName;const hC=p.forwardRef(({className:e,...t},n)=>s.jsx(US,{ref:n,className:Q("text-sm font-semibold",e),...t}));hC.displayName=US.displayName;const pC=p.forwardRef(({className:e,...t},n)=>s.jsx(BS,{ref:n,className:Q("text-sm opacity-90",e),...t}));pC.displayName=BS.displayName;function mM(){const{toasts:e}=rt();return s.jsxs(hM,{children:[e.map(function({id:t,title:n,description:r,action:i,...a}){return s.jsxs(dC,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(hC,{children:n}),r&&s.jsx(pC,{children:r})]}),i,s.jsx(uC,{})]},t)}),s.jsx(cC,{})]})}var Ib=["light","dark"],gM="(prefers-color-scheme: dark)",xM=p.createContext(void 0),vM={setTheme:e=>{},themes:[]},yM=()=>{var e;return(e=p.useContext(xM))!=null?e:vM};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let d=a==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?Ib.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,g=!1,b=!0)=>{let v=o?o[x]:x,y=g?x+"|| ''":`'${v}'`,w="";return i&&b&&!g&&Ib.includes(x)&&(w+=`d.style.colorScheme = '${x}';`),n==="class"?g||v?w+=`c.add(${y})`:w+="null":v&&(w+=`d[s](n,${y})`),w},m=e?`!function(){${u}${f(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${gM}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${d?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var wM=e=>{switch(e){case"success":return NM;case"info":return SM;case"warning":return _M;case"error":return CM;default:return null}},bM=Array(12).fill(0),jM=({visible:e})=>he.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},he.createElement("div",{className:"sonner-spinner"},bM.map((t,n)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),NM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_M=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),CM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kM=()=>{let[e,t]=he.useState(document.hidden);return he.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},nx=1,EM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:nx++,a=this.toasts.find(l=>l.id===i),o=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0;return r.then(async a=>{if(TM(a)&&!a.ok){i=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${a.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${a.status}`):t.description;this.create({id:n,type:"error",message:o,description:l})}else if(t.success!==void 0){i=!1;let o=typeof t.success=="function"?await t.success(a):t.success,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async a=>{if(t.error!==void 0){i=!1;let o=typeof t.error=="function"?await t.error(a):t.error,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var a;i&&(this.dismiss(n),n=void 0),(a=t.finally)==null||a.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||nx++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},ir=new EM,PM=(e,t)=>{let n=(t==null?void 0:t.id)||nx++;return ir.addToast({title:e,...t,id:n}),n},TM=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",AM=PM,RM=()=>ir.toasts,ha=Object.assign(AM,{success:ir.success,info:ir.info,warning:ir.warning,error:ir.error,custom:ir.custom,message:ir.message,promise:ir.promise,dismiss:ir.dismiss,loading:ir.loading},{getHistory:RM});function IM(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}IM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Tu(e){return e.label!==void 0}var DM=3,OM="32px",MM=4e3,LM=356,$M=14,FM=20,zM=200;function UM(...e){return e.filter(Boolean).join(" ")}var BM=e=>{var t,n,r,i,a,o,l,c,d,u;let{invert:h,toast:f,unstyled:m,interacting:x,setHeights:g,visibleToasts:b,heights:v,index:y,toasts:w,expanded:k,removeToast:S,defaultRichColors:C,closeButton:N,style:j,cancelButtonStyle:_,actionButtonStyle:E,className:A="",descriptionClassName:R="",duration:$,position:B,gap:F,loadingIcon:z,expandByDefault:q,classNames:D,icons:I,closeButtonAriaLabel:T="Close toast",pauseWhenPageIsHidden:H,cn:O}=e,[P,Z]=he.useState(!1),[ee,W]=he.useState(!1),[X,ne]=he.useState(!1),[se,fe]=he.useState(!1),[de,ge]=he.useState(0),[Ue,Ie]=he.useState(0),De=he.useRef(null),Se=he.useRef(null),Ke=y===0,Be=y+1<=b,Ce=f.type,Ve=f.dismissible!==!1,dn=f.className||"",Mt=f.descriptionClassName||"",Kt=he.useMemo(()=>v.findIndex(_e=>_e.toastId===f.id)||0,[v,f.id]),ie=he.useMemo(()=>{var _e;return(_e=f.closeButton)!=null?_e:N},[f.closeButton,N]),be=he.useMemo(()=>f.duration||$||MM,[f.duration,$]),V=he.useRef(0),Y=he.useRef(0),ye=he.useRef(0),Pe=he.useRef(null),[Fe,G]=B.split("-"),ke=he.useMemo(()=>v.reduce((_e,Qe,st)=>st>=Kt?_e:_e+Qe.height,0),[v,Kt]),Je=kM(),Lt=f.invert||h,$t=Ce==="loading";Y.current=he.useMemo(()=>Kt*F+ke,[Kt,ke]),he.useEffect(()=>{Z(!0)},[]),he.useLayoutEffect(()=>{if(!P)return;let _e=Se.current,Qe=_e.style.height;_e.style.height="auto";let st=_e.getBoundingClientRect().height;_e.style.height=Qe,Ie(st),g(Qt=>Qt.find(is=>is.toastId===f.id)?Qt.map(is=>is.toastId===f.id?{...is,height:st}:is):[{toastId:f.id,height:st,position:f.position},...Qt])},[P,f.title,f.description,g,f.id]);let K=he.useCallback(()=>{W(!0),ge(Y.current),g(_e=>_e.filter(Qe=>Qe.toastId!==f.id)),setTimeout(()=>{S(f)},zM)},[f,S,g,Y]);he.useEffect(()=>{if(f.promise&&Ce==="loading"||f.duration===1/0||f.type==="loading")return;let _e,Qe=be;return k||x||H&&Je?(()=>{if(ye.current<V.current){let st=new Date().getTime()-V.current;Qe=Qe-st}ye.current=new Date().getTime()})():Qe!==1/0&&(V.current=new Date().getTime(),_e=setTimeout(()=>{var st;(st=f.onAutoClose)==null||st.call(f,f),K()},Qe)),()=>clearTimeout(_e)},[k,x,q,f,be,K,f.promise,Ce,H,Je]),he.useEffect(()=>{let _e=Se.current;if(_e){let Qe=_e.getBoundingClientRect().height;return Ie(Qe),g(st=>[{toastId:f.id,height:Qe,position:f.position},...st]),()=>g(st=>st.filter(Qt=>Qt.toastId!==f.id))}},[g,f.id]),he.useEffect(()=>{f.delete&&K()},[K,f.delete]);function Le(){return I!=null&&I.loading?he.createElement("div",{className:"sonner-loader","data-visible":Ce==="loading"},I.loading):z?he.createElement("div",{className:"sonner-loader","data-visible":Ce==="loading"},z):he.createElement(jM,{visible:Ce==="loading"})}return he.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Se,className:O(A,dn,D==null?void 0:D.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[Ce],(n=f==null?void 0:f.classNames)==null?void 0:n[Ce]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:C,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":P,"data-promise":!!f.promise,"data-removed":ee,"data-visible":Be,"data-y-position":Fe,"data-x-position":G,"data-index":y,"data-front":Ke,"data-swiping":X,"data-dismissible":Ve,"data-type":Ce,"data-invert":Lt,"data-swipe-out":se,"data-expanded":!!(k||q&&P),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${ee?de:Y.current}px`,"--initial-height":q?"auto":`${Ue}px`,...j,...f.style},onPointerDown:_e=>{$t||!Ve||(De.current=new Date,ge(Y.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(ne(!0),Pe.current={x:_e.clientX,y:_e.clientY}))},onPointerUp:()=>{var _e,Qe,st,Qt;if(se||!Ve)return;Pe.current=null;let is=Number(((_e=Se.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount").replace("px",""))||0),cu=new Date().getTime()-((Qe=De.current)==null?void 0:Qe.getTime()),qR=Math.abs(is)/cu;if(Math.abs(is)>=FM||qR>.11){ge(Y.current),(st=f.onDismiss)==null||st.call(f,f),K(),fe(!0);return}(Qt=Se.current)==null||Qt.style.setProperty("--swipe-amount","0px"),ne(!1)},onPointerMove:_e=>{var Qe;if(!Pe.current||!Ve)return;let st=_e.clientY-Pe.current.y,Qt=_e.clientX-Pe.current.x,is=(Fe==="top"?Math.min:Math.max)(0,st),cu=_e.pointerType==="touch"?10:2;Math.abs(is)>cu?(Qe=Se.current)==null||Qe.style.setProperty("--swipe-amount",`${st}px`):Math.abs(Qt)>cu&&(Pe.current=null)}},ie&&!f.jsx?he.createElement("button",{"aria-label":T,"data-disabled":$t,"data-close-button":!0,onClick:$t||!Ve?()=>{}:()=>{var _e;K(),(_e=f.onDismiss)==null||_e.call(f,f)},className:O(D==null?void 0:D.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||he.isValidElement(f.title)?f.jsx||f.title:he.createElement(he.Fragment,null,Ce||f.icon||f.promise?he.createElement("div",{"data-icon":"",className:O(D==null?void 0:D.icon,(a=f==null?void 0:f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Le():null,f.type!=="loading"?f.icon||(I==null?void 0:I[Ce])||wM(Ce):null):null,he.createElement("div",{"data-content":"",className:O(D==null?void 0:D.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},he.createElement("div",{"data-title":"",className:O(D==null?void 0:D.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},f.title),f.description?he.createElement("div",{"data-description":"",className:O(R,Mt,D==null?void 0:D.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},f.description):null),he.isValidElement(f.cancel)?f.cancel:f.cancel&&Tu(f.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||_,onClick:_e=>{var Qe,st;Tu(f.cancel)&&Ve&&((st=(Qe=f.cancel).onClick)==null||st.call(Qe,_e),K())},className:O(D==null?void 0:D.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,he.isValidElement(f.action)?f.action:f.action&&Tu(f.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||E,onClick:_e=>{var Qe,st;Tu(f.action)&&(_e.defaultPrevented||((st=(Qe=f.action).onClick)==null||st.call(Qe,_e),K()))},className:O(D==null?void 0:D.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function Db(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var qM=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:h,visibleToasts:f=DM,toastOptions:m,dir:x=Db(),gap:g=$M,loadingIcon:b,icons:v,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w,cn:k=UM}=e,[S,C]=he.useState([]),N=he.useMemo(()=>Array.from(new Set([n].concat(S.filter(H=>H.position).map(H=>H.position)))),[S,n]),[j,_]=he.useState([]),[E,A]=he.useState(!1),[R,$]=he.useState(!1),[B,F]=he.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=he.useRef(null),q=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=he.useRef(null),I=he.useRef(!1),T=he.useCallback(H=>{var O;(O=S.find(P=>P.id===H.id))!=null&&O.delete||ir.dismiss(H.id),C(P=>P.filter(({id:Z})=>Z!==H.id))},[S]);return he.useEffect(()=>ir.subscribe(H=>{if(H.dismiss){C(O=>O.map(P=>P.id===H.id?{...P,delete:!0}:P));return}setTimeout(()=>{gy.flushSync(()=>{C(O=>{let P=O.findIndex(Z=>Z.id===H.id);return P!==-1?[...O.slice(0,P),{...O[P],...H},...O.slice(P+1)]:[H,...O]})})})}),[]),he.useEffect(()=>{if(c!=="system"){F(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:H})=>{F(H?"dark":"light")})},[c]),he.useEffect(()=>{S.length<=1&&A(!1)},[S]),he.useEffect(()=>{let H=O=>{var P,Z;r.every(ee=>O[ee]||O.code===ee)&&(A(!0),(P=z.current)==null||P.focus()),O.code==="Escape"&&(document.activeElement===z.current||(Z=z.current)!=null&&Z.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[r]),he.useEffect(()=>{if(z.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,I.current=!1)}},[z.current]),S.length?he.createElement("section",{"aria-label":`${y} ${q}`,tabIndex:-1},N.map((H,O)=>{var P;let[Z,ee]=H.split("-");return he.createElement("ol",{key:H,dir:x==="auto"?Db():x,tabIndex:-1,ref:z,className:o,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":Z,"data-x-position":ee,style:{"--front-toast-height":`${((P=j[0])==null?void 0:P.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||OM,"--width":`${LM}px`,"--gap":`${g}px`,...h},onBlur:W=>{I.current&&!W.currentTarget.contains(W.relatedTarget)&&(I.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||I.current||(I.current=!0,D.current=W.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{R||A(!1)},onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},S.filter(W=>!W.position&&O===0||W.position===H).map((W,X)=>{var ne,se;return he.createElement(BM,{key:W.id,icons:v,index:X,toast:W,defaultRichColors:d,duration:(ne=m==null?void 0:m.duration)!=null?ne:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:t,visibleToasts:f,closeButton:(se=m==null?void 0:m.closeButton)!=null?se:a,interacting:R,position:H,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:T,toasts:S.filter(fe=>fe.position==W.position),heights:j.filter(fe=>fe.position==W.position),setHeights:_,expandByDefault:i,gap:g,loadingIcon:b,expanded:E,pauseWhenPageIsHidden:w,cn:k})}))})):null};const VM=({...e})=>{const{theme:t="system"}=yM();return s.jsx(qM,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var HM=Sv.useId||(()=>{}),GM=0;function pr(e){const[t,n]=p.useState(HM());return qt(()=>{e||n(r=>r??String(GM++))},[e]),e||(t?`radix-${t}`:"")}const WM=["top","right","bottom","left"],ea=Math.min,or=Math.max,zh=Math.round,Au=Math.floor,ta=e=>({x:e,y:e}),KM={left:"right",right:"left",bottom:"top",top:"bottom"},QM={start:"end",end:"start"};function rx(e,t,n){return or(e,ea(t,n))}function Ks(e,t){return typeof e=="function"?e(t):e}function Qs(e){return e.split("-")[0]}function Bl(e){return e.split("-")[1]}function Ey(e){return e==="x"?"y":"x"}function Py(e){return e==="y"?"height":"width"}function na(e){return["top","bottom"].includes(Qs(e))?"y":"x"}function Ty(e){return Ey(na(e))}function YM(e,t,n){n===void 0&&(n=!1);const r=Bl(e),i=Ty(e),a=Py(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Uh(o)),[o,Uh(o)]}function XM(e){const t=Uh(e);return[sx(e),t,sx(t)]}function sx(e){return e.replace(/start|end/g,t=>QM[t])}function JM(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:o;default:return[]}}function ZM(e,t,n,r){const i=Bl(e);let a=JM(Qs(e),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(sx)))),a}function Uh(e){return e.replace(/left|right|bottom|top/g,t=>KM[t])}function eL(e){return{top:0,right:0,bottom:0,left:0,...e}}function fC(e){return typeof e!="number"?eL(e):{top:e,right:e,bottom:e,left:e}}function Bh(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ob(e,t,n){let{reference:r,floating:i}=e;const a=na(t),o=Ty(t),l=Py(o),c=Qs(t),d=a==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Bl(t)){case"start":m[o]-=f*(n&&d?-1:1);break;case"end":m[o]+=f*(n&&d?-1:1);break}return m}const tL=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=Ob(d,r,c),f=r,m={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:v}=l[g],{x:y,y:w,data:k,reset:S}=await v({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});u=y??u,h=w??h,m={...m,[b]:{...m[b],...k}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:u,y:h}=Ob(d,f,c)),g=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:m}};async function ud(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Ks(t,e),x=fC(m),b=l[f?h==="floating"?"reference":"floating":h],v=Bh(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),k=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Bh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(v.top-S.top+x.top)/k.y,bottom:(S.bottom-v.bottom+x.bottom)/k.y,left:(v.left-S.left+x.left)/k.x,right:(S.right-v.right+x.right)/k.x}}const nL=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Ks(e,t)||{};if(d==null)return{};const h=fC(u),f={x:n,y:r},m=Ty(i),x=Py(m),g=await o.getDimensions(d),b=m==="y",v=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",k=a.reference[x]+a.reference[m]-f[m]-a.floating[x],S=f[m]-a.reference[m],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let N=C?C[w]:0;(!N||!await(o.isElement==null?void 0:o.isElement(C)))&&(N=l.floating[w]||a.floating[x]);const j=k/2-S/2,_=N/2-g[x]/2-1,E=ea(h[v],_),A=ea(h[y],_),R=E,$=N-g[x]-A,B=N/2-g[x]/2+j,F=rx(R,B,$),z=!c.arrow&&Bl(i)!=null&&B!==F&&a.reference[x]/2-(B<R?E:A)-g[x]/2<0,q=z?B<R?B-R:B-$:0;return{[m]:f[m]+q,data:{[m]:F,centerOffset:B-F-q,...z&&{alignmentOffset:q}},reset:z}}}),rL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...b}=Ks(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=Qs(i),y=na(l),w=Qs(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=f||(w||!g?[Uh(l)]:XM(l)),C=x!=="none";!f&&C&&S.push(...ZM(l,g,x,k));const N=[l,...S],j=await ud(t,b),_=[];let E=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&_.push(j[v]),h){const B=YM(i,o,k);_.push(j[B[0]],j[B[1]])}if(E=[...E,{placement:i,overflows:_}],!_.every(B=>B<=0)){var A,R;const B=(((A=a.flip)==null?void 0:A.index)||0)+1,F=N[B];if(F)return{data:{index:B,overflows:E},reset:{placement:F}};let z=(R=E.filter(q=>q.overflows[0]<=0).sort((q,D)=>q.overflows[1]-D.overflows[1])[0])==null?void 0:R.placement;if(!z)switch(m){case"bestFit":{var $;const q=($=E.filter(D=>{if(C){const I=na(D.placement);return I===y||I==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(I=>I>0).reduce((I,T)=>I+T,0)]).sort((D,I)=>D[1]-I[1])[0])==null?void 0:$[0];q&&(z=q);break}case"initialPlacement":z=l;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function Mb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Lb(e){return WM.some(t=>e[t]>=0)}const sL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Ks(e,t);switch(r){case"referenceHidden":{const a=await ud(t,{...i,elementContext:"reference"}),o=Mb(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Lb(o)}}}case"escaped":{const a=await ud(t,{...i,altBoundary:!0}),o=Mb(a,n.floating);return{data:{escapedOffsets:o,escaped:Lb(o)}}}default:return{}}}}};async function iL(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qs(n),l=Bl(n),c=na(n)==="y",d=["left","top"].includes(o)?-1:1,u=a&&c?-1:1,h=Ks(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(m=l==="end"?x*-1:x),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const aL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await iL(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},oL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...c}=Ks(e,t),d={x:n,y:r},u=await ud(t,c),h=na(Qs(i)),f=Ey(h);let m=d[f],x=d[h];if(a){const b=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=m+u[b],w=m-u[v];m=rx(y,m,w)}if(o){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=x+u[b],w=x-u[v];x=rx(y,x,w)}const g=l.fn({...t,[f]:m,[h]:x});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:a,[h]:o}}}}}},lL=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ks(e,t),u={x:n,y:r},h=na(i),f=Ey(h);let m=u[f],x=u[h];const g=Ks(l,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=f==="y"?"height":"width",k=a.reference[f]-a.floating[w]+b.mainAxis,S=a.reference[f]+a.reference[w]-b.mainAxis;m<k?m=k:m>S&&(m=S)}if(d){var v,y;const w=f==="y"?"width":"height",k=["top","left"].includes(Qs(i)),S=a.reference[h]-a.floating[w]+(k&&((v=o.offset)==null?void 0:v[h])||0)+(k?0:b.crossAxis),C=a.reference[h]+a.reference[w]+(k?0:((y=o.offset)==null?void 0:y[h])||0)-(k?b.crossAxis:0);x<S?x=S:x>C&&(x=C)}return{[f]:m,[h]:x}}}},cL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Ks(e,t),u=await ud(t,d),h=Qs(i),f=Bl(i),m=na(i)==="y",{width:x,height:g}=a.floating;let b,v;h==="top"||h==="bottom"?(b=h,v=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,b=f==="end"?"top":"bottom");const y=g-u.top-u.bottom,w=x-u.left-u.right,k=ea(g-u[b],y),S=ea(x-u[v],w),C=!t.middlewareData.shift;let N=k,j=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=y),C&&!f){const E=or(u.left,0),A=or(u.right,0),R=or(u.top,0),$=or(u.bottom,0);m?j=x-2*(E!==0||A!==0?E+A:or(u.left,u.right)):N=g-2*(R!==0||$!==0?R+$:or(u.top,u.bottom))}await c({...t,availableWidth:j,availableHeight:N});const _=await o.getDimensions(l.floating);return x!==_.width||g!==_.height?{reset:{rects:!0}}:{}}}};function $p(){return typeof window<"u"}function ql(e){return mC(e)?(e.nodeName||"").toLowerCase():"#document"}function fr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Es(e){var t;return(t=(mC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function mC(e){return $p()?e instanceof Node||e instanceof fr(e).Node:!1}function ns(e){return $p()?e instanceof Element||e instanceof fr(e).Element:!1}function _s(e){return $p()?e instanceof HTMLElement||e instanceof fr(e).HTMLElement:!1}function $b(e){return!$p()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fr(e).ShadowRoot}function Dd(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=rs(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function dL(e){return["table","td","th"].includes(ql(e))}function Fp(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ay(e){const t=Ry(),n=ns(e)?rs(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function uL(e){let t=ra(e);for(;_s(t)&&!Cl(t);){if(Ay(t))return t;if(Fp(t))return null;t=ra(t)}return null}function Ry(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cl(e){return["html","body","#document"].includes(ql(e))}function rs(e){return fr(e).getComputedStyle(e)}function zp(e){return ns(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ra(e){if(ql(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$b(e)&&e.host||Es(e);return $b(t)?t.host:t}function gC(e){const t=ra(e);return Cl(t)?e.ownerDocument?e.ownerDocument.body:e.body:_s(t)&&Dd(t)?t:gC(t)}function hd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=gC(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=fr(i);if(a){const l=ix(o);return t.concat(o,o.visualViewport||[],Dd(i)?i:[],l&&n?hd(l):[])}return t.concat(i,hd(i,[],n))}function ix(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xC(e){const t=rs(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=_s(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,l=zh(n)!==a||zh(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Iy(e){return ns(e)?e:e.contextElement}function Go(e){const t=Iy(e);if(!_s(t))return ta(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=xC(t);let o=(a?zh(n.width):n.width)/r,l=(a?zh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const hL=ta(0);function vC(e){const t=fr(e);return!Ry()||!t.visualViewport?hL:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function pL(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==fr(e)?!1:t}function Va(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=Iy(e);let o=ta(1);t&&(r?ns(r)&&(o=Go(r)):o=Go(e));const l=pL(a,n,r)?vC(a):ta(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const f=fr(a),m=r&&ns(r)?fr(r):r;let x=f,g=ix(x);for(;g&&r&&m!==x;){const b=Go(g),v=g.getBoundingClientRect(),y=rs(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,k=v.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,h*=b.y,c+=w,d+=k,x=fr(g),g=ix(x)}}return Bh({width:u,height:h,x:c,y:d})}function fL(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=Es(r),l=t?Fp(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=ta(1);const u=ta(0),h=_s(r);if((h||!h&&!a)&&((ql(r)!=="body"||Dd(o))&&(c=zp(r)),_s(r))){const f=Va(r);d=Go(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x,y:n.y*d.y-c.scrollTop*d.y+u.y}}function mL(e){return Array.from(e.getClientRects())}function ax(e,t){const n=zp(e).scrollLeft;return t?t.left+n:Va(Es(e)).left+n}function gL(e){const t=Es(e),n=zp(e),r=e.ownerDocument.body,i=or(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=or(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ax(e);const l=-n.scrollTop;return rs(r).direction==="rtl"&&(o+=or(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function xL(e,t){const n=fr(e),r=Es(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=Ry();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function vL(e,t){const n=Va(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=_s(e)?Go(e):ta(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=r*a.y;return{width:o,height:l,x:c,y:d}}function Fb(e,t,n){let r;if(t==="viewport")r=xL(e,n);else if(t==="document")r=gL(Es(e));else if(ns(t))r=vL(t,n);else{const i=vC(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Bh(r)}function yC(e,t){const n=ra(e);return n===t||!ns(n)||Cl(n)?!1:rs(n).position==="fixed"||yC(n,t)}function yL(e,t){const n=t.get(e);if(n)return n;let r=hd(e,[],!1).filter(l=>ns(l)&&ql(l)!=="body"),i=null;const a=rs(e).position==="fixed";let o=a?ra(e):e;for(;ns(o)&&!Cl(o);){const l=rs(o),c=Ay(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Dd(o)&&!c&&yC(e,o))?r=r.filter(u=>u!==o):i=l,o=ra(o)}return t.set(e,r),r}function wL(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Fp(t)?[]:yL(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,u)=>{const h=Fb(t,u,i);return d.top=or(h.top,d.top),d.right=ea(h.right,d.right),d.bottom=ea(h.bottom,d.bottom),d.left=or(h.left,d.left),d},Fb(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function bL(e){const{width:t,height:n}=xC(e);return{width:t,height:n}}function jL(e,t,n){const r=_s(t),i=Es(t),a=n==="fixed",o=Va(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=ta(0);if(r||!r&&!a)if((ql(t)!=="body"||Dd(i))&&(l=zp(t)),r){const m=Va(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else i&&(c.x=ax(i));let d=0,u=0;if(i&&!r&&!a){const m=i.getBoundingClientRect();u=m.top+l.scrollTop,d=m.left+l.scrollLeft-ax(i,m)}const h=o.left+l.scrollLeft-c.x-d,f=o.top+l.scrollTop-c.y-u;return{x:h,y:f,width:o.width,height:o.height}}function um(e){return rs(e).position==="static"}function zb(e,t){if(!_s(e)||rs(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Es(e)===n&&(n=n.ownerDocument.body),n}function wC(e,t){const n=fr(e);if(Fp(e))return n;if(!_s(e)){let i=ra(e);for(;i&&!Cl(i);){if(ns(i)&&!um(i))return i;i=ra(i)}return n}let r=zb(e,t);for(;r&&dL(r)&&um(r);)r=zb(r,t);return r&&Cl(r)&&um(r)&&!Ay(r)?n:r||uL(e)||n}const NL=async function(e){const t=this.getOffsetParent||wC,n=this.getDimensions,r=await n(e.floating);return{reference:jL(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _L(e){return rs(e).direction==="rtl"}const SL={convertOffsetParentRelativeRectToViewportRelativeRect:fL,getDocumentElement:Es,getClippingRect:wL,getOffsetParent:wC,getElementRects:NL,getClientRects:mL,getDimensions:bL,getScale:Go,isElement:ns,isRTL:_L};function CL(e,t){let n=null,r;const i=Es(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:d,top:u,width:h,height:f}=e.getBoundingClientRect();if(l||t(),!h||!f)return;const m=Au(u),x=Au(i.clientWidth-(d+h)),g=Au(i.clientHeight-(u+f)),b=Au(d),y={rootMargin:-m+"px "+-x+"px "+-g+"px "+-b+"px",threshold:or(0,ea(1,c))||1};let w=!0;function k(S){const C=S[0].intersectionRatio;if(C!==c){if(!w)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(k,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,y)}n.observe(e)}return o(!0),a}function kL(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Iy(e),u=i||a?[...d?hd(d):[],...hd(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const h=d&&l?CL(d,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),d&&!c&&m.observe(d),m.observe(t));let x,g=c?Va(e):null;c&&b();function b(){const v=Va(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,x=requestAnimationFrame(b)}return n(),()=>{var v;u.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),h==null||h(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(x)}}const EL=aL,PL=oL,TL=rL,AL=cL,RL=sL,Ub=nL,IL=lL,DL=(e,t,n)=>{const r=new Map,i={platform:SL,...n},a={...i.platform,_c:r};return tL(e,t,{...i,platform:a})};var ih=typeof document<"u"?p.useLayoutEffect:p.useEffect;function qh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!qh(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!qh(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function bC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Bb(e,t){const n=bC(e);return Math.round(t*n)/n}function hm(e){const t=p.useRef(e);return ih(()=>{t.current=e}),t}function OL(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(r);qh(f,r)||m(r);const[x,g]=p.useState(null),[b,v]=p.useState(null),y=p.useCallback(D=>{D!==C.current&&(C.current=D,g(D))},[]),w=p.useCallback(D=>{D!==N.current&&(N.current=D,v(D))},[]),k=a||x,S=o||b,C=p.useRef(null),N=p.useRef(null),j=p.useRef(u),_=c!=null,E=hm(c),A=hm(i),R=hm(d),$=p.useCallback(()=>{if(!C.current||!N.current)return;const D={placement:t,strategy:n,middleware:f};A.current&&(D.platform=A.current),DL(C.current,N.current,D).then(I=>{const T={...I,isPositioned:R.current!==!1};B.current&&!qh(j.current,T)&&(j.current=T,Xs.flushSync(()=>{h(T)}))})},[f,t,n,A,R]);ih(()=>{d===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[d]);const B=p.useRef(!1);ih(()=>(B.current=!0,()=>{B.current=!1}),[]),ih(()=>{if(k&&(C.current=k),S&&(N.current=S),k&&S){if(E.current)return E.current(k,S,$);$()}},[k,S,$,E,_]);const F=p.useMemo(()=>({reference:C,floating:N,setReference:y,setFloating:w}),[y,w]),z=p.useMemo(()=>({reference:k,floating:S}),[k,S]),q=p.useMemo(()=>{const D={position:n,left:0,top:0};if(!z.floating)return D;const I=Bb(z.floating,u.x),T=Bb(z.floating,u.y);return l?{...D,transform:"translate("+I+"px, "+T+"px)",...bC(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:T}},[n,l,z.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:$,refs:F,elements:z,floatingStyles:q}),[u,$,F,z,q])}const ML=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ub({element:r.current,padding:i}).fn(n):{}:r?Ub({element:r,padding:i}).fn(n):{}}}},LL=(e,t)=>({...EL(e),options:[e,t]}),$L=(e,t)=>({...PL(e),options:[e,t]}),FL=(e,t)=>({...IL(e),options:[e,t]}),zL=(e,t)=>({...TL(e),options:[e,t]}),UL=(e,t)=>({...AL(e),options:[e,t]}),BL=(e,t)=>({...RL(e),options:[e,t]}),qL=(e,t)=>({...ML(e),options:[e,t]});var VL="Arrow",jC=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...a}=e;return s.jsx(je.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});jC.displayName=VL;var HL=jC;function GL(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...x}=h,g=(f==null?void 0:f[e][c])||l,b=p.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:m})}function u(h,f){const m=(f==null?void 0:f[e][c])||l,x=p.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,WL(i,...t)]}function WL(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Up(e){const[t,n]=p.useState(void 0);return qt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Dy="Popper",[NC,oa]=GL(Dy),[KL,_C]=NC(Dy),SC=e=>{const{__scopePopper:t,children:n}=e,[r,i]=p.useState(null);return s.jsx(KL,{scope:t,anchor:r,onAnchorChange:i,children:n})};SC.displayName=Dy;var CC="PopperAnchor",kC=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,a=_C(CC,n),o=p.useRef(null),l=$e(t,o);return p.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(je.div,{...i,ref:l})});kC.displayName=CC;var Oy="PopperContent",[QL,YL]=NC(Oy),EC=p.forwardRef((e,t)=>{var X,ne,se,fe,de,ge;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:x,...g}=e,b=_C(Oy,n),[v,y]=p.useState(null),w=$e(t,Ue=>y(Ue)),[k,S]=p.useState(null),C=Up(k),N=(C==null?void 0:C.width)??0,j=(C==null?void 0:C.height)??0,_=r+(a!=="center"?"-"+a:""),E=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},A=Array.isArray(d)?d:[d],R=A.length>0,$={padding:E,boundary:A.filter(JL),altBoundary:R},{refs:B,floatingStyles:F,placement:z,isPositioned:q,middlewareData:D}=OL({strategy:"fixed",placement:_,whileElementsMounted:(...Ue)=>kL(...Ue,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[LL({mainAxis:i+j,alignmentAxis:o}),c&&$L({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?FL():void 0,...$}),c&&zL({...$}),UL({...$,apply:({elements:Ue,rects:Ie,availableWidth:De,availableHeight:Se})=>{const{width:Ke,height:Be}=Ie.reference,Ce=Ue.floating.style;Ce.setProperty("--radix-popper-available-width",`${De}px`),Ce.setProperty("--radix-popper-available-height",`${Se}px`),Ce.setProperty("--radix-popper-anchor-width",`${Ke}px`),Ce.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),k&&qL({element:k,padding:l}),ZL({arrowWidth:N,arrowHeight:j}),f&&BL({strategy:"referenceHidden",...$})]}),[I,T]=AC(z),H=St(x);qt(()=>{q&&(H==null||H())},[q,H]);const O=(X=D.arrow)==null?void 0:X.x,P=(ne=D.arrow)==null?void 0:ne.y,Z=((se=D.arrow)==null?void 0:se.centerOffset)!==0,[ee,W]=p.useState();return qt(()=>{v&&W(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:q?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(fe=D.transformOrigin)==null?void 0:fe.x,(de=D.transformOrigin)==null?void 0:de.y].join(" "),...((ge=D.hide)==null?void 0:ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(QL,{scope:n,placedSide:I,onArrowChange:S,arrowX:O,arrowY:P,shouldHideArrow:Z,children:s.jsx(je.div,{"data-side":I,"data-align":T,...g,ref:w,style:{...g.style,animation:q?void 0:"none"}})})})});EC.displayName=Oy;var PC="PopperArrow",XL={top:"bottom",right:"left",bottom:"top",left:"right"},TC=p.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,a=YL(PC,r),o=XL[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(HL,{...i,ref:n,style:{...i.style,display:"block"}})})});TC.displayName=PC;function JL(e){return e!==null}var ZL=e=>({name:"transformOrigin",options:e,fn(t){var b,v,y;const{placement:n,rects:r,middlewareData:i}=t,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=AC(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+l/2,m=(((y=i.arrow)==null?void 0:y.y)??0)+c/2;let x="",g="";return d==="bottom"?(x=o?h:`${f}px`,g=`${-c}px`):d==="top"?(x=o?h:`${f}px`,g=`${r.floating.height+c}px`):d==="right"?(x=`${-c}px`,g=o?h:`${m}px`):d==="left"&&(x=`${r.floating.width+c}px`,g=o?h:`${m}px`),{data:{x,y:g}}}});function AC(e){const[t,n="center"]=e.split("-");return[t,n]}var Bp=SC,Od=kC,qp=EC,Vp=TC,[Hp,EY]=wn("Tooltip",[oa]),Gp=oa(),RC="TooltipProvider",e3=700,ox="tooltip.open",[t3,My]=Hp(RC),IC=e=>{const{__scopeTooltip:t,delayDuration:n=e3,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,[o,l]=p.useState(!0),c=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(t3,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(u=>{c.current=u},[]),disableHoverableContent:i,children:a})};IC.displayName=RC;var Wp="Tooltip",[n3,Kp]=Hp(Wp),DC=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=My(Wp,e.__scopeTooltip),d=Gp(t),[u,h]=p.useState(null),f=pr(),m=p.useRef(0),x=o??c.disableHoverableContent,g=l??c.delayDuration,b=p.useRef(!1),[v=!1,y]=xr({prop:r,defaultProp:i,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(ox))):c.onClose(),a==null||a(N)}}),w=p.useMemo(()=>v?b.current?"delayed-open":"instant-open":"closed",[v]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b.current=!1,y(!0)},[y]),S=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y(!1)},[y]),C=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{b.current=!0,y(!0),m.current=0},g)},[g,y]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(Bp,{...d,children:s.jsx(n3,{scope:t,contentId:f,open:v,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?C():k()},[c.isOpenDelayed,C,k]),onTriggerLeave:p.useCallback(()=>{x?S():(window.clearTimeout(m.current),m.current=0)},[S,x]),onOpen:k,onClose:S,disableHoverableContent:x,children:n})})};DC.displayName=Wp;var lx="TooltipTrigger",OC=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Kp(lx,n),a=My(lx,n),o=Gp(n),l=p.useRef(null),c=$e(t,l,i.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),h=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(Od,{asChild:!0,...o,children:s.jsx(je.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:ae(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ae(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ae(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ae(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:ae(e.onBlur,i.onClose),onClick:ae(e.onClick,i.onClose)})})});OC.displayName=lx;var r3="TooltipPortal",[PY,s3]=Hp(r3,{forceMount:void 0}),kl="TooltipContent",MC=p.forwardRef((e,t)=>{const n=s3(kl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,o=Kp(kl,e.__scopeTooltip);return s.jsx(Vt,{present:r||o.open,children:o.disableHoverableContent?s.jsx(LC,{side:i,...a,ref:t}):s.jsx(i3,{side:i,...a,ref:t})})}),i3=p.forwardRef((e,t)=>{const n=Kp(kl,e.__scopeTooltip),r=My(kl,e.__scopeTooltip),i=p.useRef(null),a=$e(t,i),[o,l]=p.useState(null),{trigger:c,onClose:d}=n,u=i.current,{onPointerInTransitChange:h}=r,f=p.useCallback(()=>{l(null),h(!1)},[h]),m=p.useCallback((x,g)=>{const b=x.currentTarget,v={x:x.clientX,y:x.clientY},y=c3(v,b.getBoundingClientRect()),w=d3(v,y),k=u3(g.getBoundingClientRect()),S=p3([...w,...k]);l(S),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&u){const x=b=>m(b,u),g=b=>m(b,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,m,f]),p.useEffect(()=>{if(o){const x=g=>{const b=g.target,v={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(b))||(u==null?void 0:u.contains(b)),w=!h3(v,o);y?f():w&&(f(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,f]),s.jsx(LC,{...e,ref:a})}),[a3,o3]=Hp(Wp,{isInside:!1}),LC=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=Kp(kl,n),d=Gp(n),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(ox,u),()=>document.removeEventListener(ox,u)),[u]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),s.jsx(eo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:s.jsxs(qp,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(xy,{children:r}),s.jsx(a3,{scope:n,isInside:!0,children:s.jsx(WD,{id:c.contentId,role:"tooltip",children:i||r})})]})})});MC.displayName=kl;var $C="TooltipArrow",l3=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Gp(n);return o3($C,n).isInside?null:s.jsx(Vp,{...i,...r,ref:t})});l3.displayName=$C;function c3(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function d3(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function u3(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function h3(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(i=!i)}return i}function p3(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),f3(t)}function f3(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var m3=IC,g3=DC,x3=OC,FC=MC;const zC=m3,v3=g3,y3=x3,UC=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(FC,{ref:r,sideOffset:t,className:Q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));UC.displayName=FC.displayName;var Vl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ha=typeof window>"u"||"Deno"in globalThis;function Nr(){}function w3(e,t){return typeof e=="function"?e(t):e}function cx(e){return typeof e=="number"&&e>=0&&e!==1/0}function BC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Wo(e,t){return typeof e=="function"?e(t):e}function Yr(e,t){return typeof e=="function"?e(t):e}function qb(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Ly(o,t.options))return!1}else if(!pd(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function Vb(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Ga(t.options.mutationKey)!==Ga(a))return!1}else if(!pd(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Ly(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ga)(e)}function Ga(e){return JSON.stringify(e,(t,n)=>dx(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function pd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!pd(e[n],t[n])):!1}function qC(e,t){if(e===t)return e;const n=Hb(e)&&Hb(t);if(n||dx(e)&&dx(t)){const r=n?e:Object.keys(e),i=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=qC(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function Vh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Hb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function dx(e){if(!Gb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Gb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Gb(e){return Object.prototype.toString.call(e)==="[object Object]"}function b3(e){return new Promise(t=>{setTimeout(t,e)})}function ux(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?qC(e,t):t}function j3(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function N3(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var $y=Symbol();function VC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===$y?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Pa,Ni,sl,eN,_3=(eN=class extends Vl{constructor(){super();Ae(this,Pa);Ae(this,Ni);Ae(this,sl);we(this,sl,t=>{if(!Ha&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,Ni)||this.setEventListener(M(this,sl))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Ni))==null||t.call(this),we(this,Ni,void 0))}setEventListener(t){var n;we(this,sl,t),(n=M(this,Ni))==null||n.call(this),we(this,Ni,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){M(this,Pa)!==t&&(we(this,Pa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof M(this,Pa)=="boolean"?M(this,Pa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Pa=new WeakMap,Ni=new WeakMap,sl=new WeakMap,eN),Fy=new _3,il,_i,al,tN,S3=(tN=class extends Vl{constructor(){super();Ae(this,il,!0);Ae(this,_i);Ae(this,al);we(this,al,t=>{if(!Ha&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,_i)||this.setEventListener(M(this,al))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,_i))==null||t.call(this),we(this,_i,void 0))}setEventListener(t){var n;we(this,al,t),(n=M(this,_i))==null||n.call(this),we(this,_i,t(this.setOnline.bind(this)))}setOnline(t){M(this,il)!==t&&(we(this,il,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return M(this,il)}},il=new WeakMap,_i=new WeakMap,al=new WeakMap,tN),Hh=new S3;function hx(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function C3(e){return Math.min(1e3*2**e,3e4)}function HC(e){return(e??"online")==="online"?Hh.isOnline():!0}var GC=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function pm(e){return e instanceof GC}function WC(e){let t=!1,n=0,r=!1,i;const a=hx(),o=g=>{var b;r||(f(new GC(g)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Fy.isFocused()&&(e.networkMode==="always"||Hh.isOnline())&&e.canRun(),u=()=>HC(e.networkMode)&&e.canRun(),h=g=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,g),i==null||i(),a.resolve(g))},f=g=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,g),i==null||i(),a.reject(g))},m=()=>new Promise(g=>{var b;i=v=>{(r||d())&&g(v)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;i=void 0,r||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(r)return;let g;const b=n===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var C;if(r)return;const y=e.retry??(Ha?0:3),w=e.retryDelay??C3,k=typeof w=="function"?w(n,v):w,S=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,v);if(t||!S){f(v);return}n++,(C=e.onFail)==null||C.call(e,n,v),b3(k).then(()=>d()?void 0:m()).then(()=>{t?f(v):x()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():m().then(x),a)}}function k3(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Gt=k3(),Ta,nN,KC=(nN=class{constructor(){Ae(this,Ta)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cx(this.gcTime)&&we(this,Ta,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ha?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ta)&&(clearTimeout(M(this,Ta)),we(this,Ta,void 0))}},Ta=new WeakMap,nN),ol,ll,jr,fn,Nd,Aa,Gr,Is,rN,E3=(rN=class extends KC{constructor(t){super();Ae(this,Gr);Ae(this,ol);Ae(this,ll);Ae(this,jr);Ae(this,fn);Ae(this,Nd);Ae(this,Aa);we(this,Aa,!1),we(this,Nd,t.defaultOptions),this.setOptions(t.options),this.observers=[],we(this,jr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,we(this,ol,P3(this.options)),this.state=t.state??M(this,ol),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=M(this,fn))==null?void 0:t.promise}setOptions(t){this.options={...M(this,Nd),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,jr).remove(this)}setData(t,n){const r=ux(this.state.data,t,this.options);return We(this,Gr,Is).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){We(this,Gr,Is).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=M(this,fn))==null?void 0:r.promise;return(i=M(this,fn))==null||i.cancel(t),n?n.then(Nr).catch(Nr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,ol))}isActive(){return this.observers.some(t=>Yr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$y||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!BC(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,fn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=M(this,fn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),M(this,jr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(M(this,fn)&&(M(this,Aa)?M(this,fn).cancel({revert:!0}):M(this,fn).cancelRetry()),this.scheduleGc()),M(this,jr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||We(this,Gr,Is).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,fn))return M(this,fn).continueRetry(),M(this,fn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(we(this,Aa,!0),r.signal)})},a=()=>{const h=VC(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return i(f),we(this,Aa,!1),this.options.persister?this.options.persister(h,f,this):h(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),we(this,ll,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&We(this,Gr,Is).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var f,m,x,g;pm(h)&&h.silent||We(this,Gr,Is).call(this,{type:"error",error:h}),pm(h)||((m=(f=M(this,jr).config).onError)==null||m.call(f,h,this),(g=(x=M(this,jr).config).onSettled)==null||g.call(x,this.state.data,h,this)),this.scheduleGc()};return we(this,fn,WC({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,m,x,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){l(b);return}(m=(f=M(this,jr).config).onSuccess)==null||m.call(f,h,this),(g=(x=M(this,jr).config).onSettled)==null||g.call(x,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,f)=>{We(this,Gr,Is).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{We(this,Gr,Is).call(this,{type:"pause"})},onContinue:()=>{We(this,Gr,Is).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),M(this,fn).start()}},ol=new WeakMap,ll=new WeakMap,jr=new WeakMap,fn=new WeakMap,Nd=new WeakMap,Aa=new WeakMap,Gr=new WeakSet,Is=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...QC(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return pm(i)&&i.revert&&M(this,ll)?{...M(this,ll),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Gt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),M(this,jr).notify({query:this,type:"updated",action:t})})},rN);function QC(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:HC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function P3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var hs,sN,T3=(sN=class extends Vl{constructor(t={}){super();Ae(this,hs);this.config=t,we(this,hs,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??Ly(i,n);let o=this.get(a);return o||(o=new E3({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){M(this,hs).has(t.queryHash)||(M(this,hs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=M(this,hs).get(t.queryHash);n&&(t.destroy(),n===t&&M(this,hs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return M(this,hs).get(t)}getAll(){return[...M(this,hs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qb(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>qb(t,r)):n}notify(t){Gt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hs=new WeakMap,sN),ps,jn,Ra,fs,pi,iN,A3=(iN=class extends KC{constructor(t){super();Ae(this,fs);Ae(this,ps);Ae(this,jn);Ae(this,Ra);this.mutationId=t.mutationId,we(this,jn,t.mutationCache),we(this,ps,[]),this.state=t.state||YC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){M(this,ps).includes(t)||(M(this,ps).push(t),this.clearGcTimeout(),M(this,jn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){we(this,ps,M(this,ps).filter(n=>n!==t)),this.scheduleGc(),M(this,jn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){M(this,ps).length||(this.state.status==="pending"?this.scheduleGc():M(this,jn).remove(this))}continue(){var t;return((t=M(this,Ra))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,u,h,f,m,x,g,b,v,y,w,k,S,C,N;we(this,Ra,WC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(j,_)=>{We(this,fs,pi).call(this,{type:"failed",failureCount:j,error:_})},onPause:()=>{We(this,fs,pi).call(this,{type:"pause"})},onContinue:()=>{We(this,fs,pi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,jn).canRun(this)}));const n=this.state.status==="pending",r=!M(this,Ra).canStart();try{if(!n){We(this,fs,pi).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(i=M(this,jn).config).onMutate)==null?void 0:a.call(i,t,this));const _=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));_!==this.state.context&&We(this,fs,pi).call(this,{type:"pending",context:_,variables:t,isPaused:r})}const j=await M(this,Ra).start();return await((d=(c=M(this,jn).config).onSuccess)==null?void 0:d.call(c,j,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,j,t,this.state.context)),await((m=(f=M(this,jn).config).onSettled)==null?void 0:m.call(f,j,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,j,null,t,this.state.context)),We(this,fs,pi).call(this,{type:"success",data:j}),j}catch(j){try{throw await((v=(b=M(this,jn).config).onError)==null?void 0:v.call(b,j,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,j,t,this.state.context)),await((S=(k=M(this,jn).config).onSettled)==null?void 0:S.call(k,void 0,j,this.state.variables,this.state.context,this)),await((N=(C=this.options).onSettled)==null?void 0:N.call(C,void 0,j,t,this.state.context)),j}finally{We(this,fs,pi).call(this,{type:"error",error:j})}}finally{M(this,jn).runNext(this)}}},ps=new WeakMap,jn=new WeakMap,Ra=new WeakMap,fs=new WeakSet,pi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Gt.batch(()=>{M(this,ps).forEach(r=>{r.onMutationUpdate(t)}),M(this,jn).notify({mutation:this,type:"updated",action:t})})},iN);function YC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sr,_d,aN,R3=(aN=class extends Vl{constructor(t={}){super();Ae(this,sr);Ae(this,_d);this.config=t,we(this,sr,new Map),we(this,_d,Date.now())}build(t,n,r){const i=new A3({mutationCache:this,mutationId:++du(this,_d)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Ru(t),r=M(this,sr).get(n)??[];r.push(t),M(this,sr).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Ru(t);if(M(this,sr).has(n)){const i=(r=M(this,sr).get(n))==null?void 0:r.filter(a=>a!==t);i&&(i.length===0?M(this,sr).delete(n):M(this,sr).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=M(this,sr).get(Ru(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=M(this,sr).get(Ru(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...M(this,sr).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Vb(n,r))}findAll(t={}){return this.getAll().filter(n=>Vb(t,n))}notify(t){Gt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Gt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Nr))))}},sr=new WeakMap,_d=new WeakMap,aN);function Ru(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Wb(e){return{onFetch:(t,n)=>{var u,h,f,m,x;const r=t.options,i=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=VC(t.options,t.fetchOptions),y=async(w,k,S)=>{if(g)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const C={queryKey:t.queryKey,pageParam:k,direction:S?"backward":"forward",meta:t.options.meta};b(C);const N=await v(C),{maxPages:j}=t.options,_=S?N3:j3;return{pages:_(w.pages,N,j),pageParams:_(w.pageParams,k,j)}};if(i&&a.length){const w=i==="backward",k=w?I3:Kb,S={pages:a,pageParams:o},C=k(r,S);l=await y(S,C,w)}else{const w=e??a.length;do{const k=c===0?o[0]??r.initialPageParam:Kb(r,l);if(c>0&&k==null)break;l=await y(l,k),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function Kb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function I3(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Dt,Si,Ci,cl,dl,ki,ul,hl,oN,D3=(oN=class{constructor(e={}){Ae(this,Dt);Ae(this,Si);Ae(this,Ci);Ae(this,cl);Ae(this,dl);Ae(this,ki);Ae(this,ul);Ae(this,hl);we(this,Dt,e.queryCache||new T3),we(this,Si,e.mutationCache||new R3),we(this,Ci,e.defaultOptions||{}),we(this,cl,new Map),we(this,dl,new Map),we(this,ki,0)}mount(){du(this,ki)._++,M(this,ki)===1&&(we(this,ul,Fy.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Dt).onFocus())})),we(this,hl,Hh.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Dt).onOnline())})))}unmount(){var e,t;du(this,ki)._--,M(this,ki)===0&&((e=M(this,ul))==null||e.call(this),we(this,ul,void 0),(t=M(this,hl))==null||t.call(this),we(this,hl,void 0))}isFetching(e){return M(this,Dt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return M(this,Si).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,Dt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=M(this,Dt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Wo(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return M(this,Dt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=M(this,Dt).get(r.queryHash),a=i==null?void 0:i.state.data,o=w3(t,a);if(o!==void 0)return M(this,Dt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Gt.batch(()=>M(this,Dt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=M(this,Dt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=M(this,Dt);Gt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=M(this,Dt),r={type:"active",...e};return Gt.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Gt.batch(()=>M(this,Dt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Nr).catch(Nr)}invalidateQueries(e={},t={}){return Gt.batch(()=>{if(M(this,Dt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Gt.batch(()=>M(this,Dt).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Nr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Nr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=M(this,Dt).build(this,t);return n.isStaleByTime(Wo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nr).catch(Nr)}fetchInfiniteQuery(e){return e.behavior=Wb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nr).catch(Nr)}ensureInfiniteQueryData(e){return e.behavior=Wb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hh.isOnline()?M(this,Si).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Dt)}getMutationCache(){return M(this,Si)}getDefaultOptions(){return M(this,Ci)}setDefaultOptions(e){we(this,Ci,e)}setQueryDefaults(e,t){M(this,cl).set(Ga(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...M(this,cl).values()];let n={};return t.forEach(r=>{pd(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){M(this,dl).set(Ga(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...M(this,dl).values()];let n={};return t.forEach(r=>{pd(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...M(this,Ci).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ly(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===$y&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...M(this,Ci).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){M(this,Dt).clear(),M(this,Si).clear()}},Dt=new WeakMap,Si=new WeakMap,Ci=new WeakMap,cl=new WeakMap,dl=new WeakMap,ki=new WeakMap,ul=new WeakMap,hl=new WeakMap,oN),$n,Ze,Sd,Nn,Ia,pl,Ei,ms,Cd,fl,ml,Da,Oa,Pi,gl,ct,bc,px,fx,mx,gx,xx,vx,yx,XC,lN,O3=(lN=class extends Vl{constructor(t,n){super();Ae(this,ct);Ae(this,$n);Ae(this,Ze);Ae(this,Sd);Ae(this,Nn);Ae(this,Ia);Ae(this,pl);Ae(this,Ei);Ae(this,ms);Ae(this,Cd);Ae(this,fl);Ae(this,ml);Ae(this,Da);Ae(this,Oa);Ae(this,Pi);Ae(this,gl,new Set);this.options=n,we(this,$n,t),we(this,ms,null),we(this,Ei,hx()),this.options.experimental_prefetchInRender||M(this,Ei).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Ze).addObserver(this),Qb(M(this,Ze),this.options)?We(this,ct,bc).call(this):this.updateResult(),We(this,ct,gx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wx(M(this,Ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wx(M(this,Ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,We(this,ct,xx).call(this),We(this,ct,vx).call(this),M(this,Ze).removeObserver(this)}setOptions(t,n){const r=this.options,i=M(this,Ze);if(this.options=M(this,$n).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yr(this.options.enabled,M(this,Ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");We(this,ct,yx).call(this),M(this,Ze).setOptions(this.options),r._defaulted&&!Vh(this.options,r)&&M(this,$n).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Ze),observer:this});const a=this.hasListeners();a&&Yb(M(this,Ze),i,this.options,r)&&We(this,ct,bc).call(this),this.updateResult(n),a&&(M(this,Ze)!==i||Yr(this.options.enabled,M(this,Ze))!==Yr(r.enabled,M(this,Ze))||Wo(this.options.staleTime,M(this,Ze))!==Wo(r.staleTime,M(this,Ze)))&&We(this,ct,px).call(this);const o=We(this,ct,fx).call(this);a&&(M(this,Ze)!==i||Yr(this.options.enabled,M(this,Ze))!==Yr(r.enabled,M(this,Ze))||o!==M(this,Pi))&&We(this,ct,mx).call(this,o)}getOptimisticResult(t){const n=M(this,$n).getQueryCache().build(M(this,$n),t),r=this.createResult(n,t);return L3(this,r)&&(we(this,Nn,r),we(this,pl,this.options),we(this,Ia,M(this,Ze).state)),r}getCurrentResult(){return M(this,Nn)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){M(this,gl).add(t)}getCurrentQuery(){return M(this,Ze)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=M(this,$n).defaultQueryOptions(t),r=M(this,$n).getQueryCache().build(M(this,$n),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return We(this,ct,bc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,Nn)))}createResult(t,n){var j;const r=M(this,Ze),i=this.options,a=M(this,Nn),o=M(this,Ia),l=M(this,pl),d=t!==r?t.state:M(this,Sd),{state:u}=t;let h={...u},f=!1,m;if(n._optimisticResults){const _=this.hasListeners(),E=!_&&Qb(t,n),A=_&&Yb(t,r,n,i);(E||A)&&(h={...h,...QC(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:b}=h;if(n.select&&h.data!==void 0)if(a&&h.data===(o==null?void 0:o.data)&&n.select===M(this,Cd))m=M(this,fl);else try{we(this,Cd,n.select),m=n.select(h.data),m=ux(a==null?void 0:a.data,m,n),we(this,fl,m),we(this,ms,null)}catch(_){we(this,ms,_)}else m=h.data;if(n.placeholderData!==void 0&&m===void 0&&b==="pending"){let _;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))_=a.data;else if(_=typeof n.placeholderData=="function"?n.placeholderData((j=M(this,ml))==null?void 0:j.state.data,M(this,ml)):n.placeholderData,n.select&&_!==void 0)try{_=n.select(_),we(this,ms,null)}catch(E){we(this,ms,E)}_!==void 0&&(b="success",m=ux(a==null?void 0:a.data,_,n),f=!0)}M(this,ms)&&(x=M(this,ms),m=M(this,fl),g=Date.now(),b="error");const v=h.fetchStatus==="fetching",y=b==="pending",w=b==="error",k=y&&v,S=m!==void 0,N={status:b,fetchStatus:h.fetchStatus,isPending:y,isSuccess:b==="success",isError:w,isInitialLoading:k,isLoading:k,data:m,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:w&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&S,isStale:zy(t,n),refetch:this.refetch,promise:M(this,Ei)};if(this.options.experimental_prefetchInRender){const _=R=>{N.status==="error"?R.reject(N.error):N.data!==void 0&&R.resolve(N.data)},E=()=>{const R=we(this,Ei,N.promise=hx());_(R)},A=M(this,Ei);switch(A.status){case"pending":t.queryHash===r.queryHash&&_(A);break;case"fulfilled":(N.status==="error"||N.data!==A.value)&&E();break;case"rejected":(N.status!=="error"||N.error!==A.reason)&&E();break}}return N}updateResult(t){const n=M(this,Nn),r=this.createResult(M(this,Ze),this.options);if(we(this,Ia,M(this,Ze).state),we(this,pl,this.options),M(this,Ia).data!==void 0&&we(this,ml,M(this,Ze)),Vh(r,n))return;we(this,Nn,r);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!M(this,gl).size)return!0;const c=new Set(l??M(this,gl));return this.options.throwOnError&&c.add("error"),Object.keys(M(this,Nn)).some(d=>{const u=d;return M(this,Nn)[u]!==n[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),We(this,ct,XC).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&We(this,ct,gx).call(this)}},$n=new WeakMap,Ze=new WeakMap,Sd=new WeakMap,Nn=new WeakMap,Ia=new WeakMap,pl=new WeakMap,Ei=new WeakMap,ms=new WeakMap,Cd=new WeakMap,fl=new WeakMap,ml=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Pi=new WeakMap,gl=new WeakMap,ct=new WeakSet,bc=function(t){We(this,ct,yx).call(this);let n=M(this,Ze).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Nr)),n},px=function(){We(this,ct,xx).call(this);const t=Wo(this.options.staleTime,M(this,Ze));if(Ha||M(this,Nn).isStale||!cx(t))return;const r=BC(M(this,Nn).dataUpdatedAt,t)+1;we(this,Da,setTimeout(()=>{M(this,Nn).isStale||this.updateResult()},r))},fx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Ze)):this.options.refetchInterval)??!1},mx=function(t){We(this,ct,vx).call(this),we(this,Pi,t),!(Ha||Yr(this.options.enabled,M(this,Ze))===!1||!cx(M(this,Pi))||M(this,Pi)===0)&&we(this,Oa,setInterval(()=>{(this.options.refetchIntervalInBackground||Fy.isFocused())&&We(this,ct,bc).call(this)},M(this,Pi)))},gx=function(){We(this,ct,px).call(this),We(this,ct,mx).call(this,We(this,ct,fx).call(this))},xx=function(){M(this,Da)&&(clearTimeout(M(this,Da)),we(this,Da,void 0))},vx=function(){M(this,Oa)&&(clearInterval(M(this,Oa)),we(this,Oa,void 0))},yx=function(){const t=M(this,$n).getQueryCache().build(M(this,$n),this.options);if(t===M(this,Ze))return;const n=M(this,Ze);we(this,Ze,t),we(this,Sd,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},XC=function(t){Gt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(M(this,Nn))}),M(this,$n).getQueryCache().notify({query:M(this,Ze),type:"observerResultsUpdated"})})},lN);function M3(e,t){return Yr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Qb(e,t){return M3(e,t)||e.state.data!==void 0&&wx(e,t,t.refetchOnMount)}function wx(e,t,n){if(Yr(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&zy(e,t)}return!1}function Yb(e,t,n,r){return(e!==t||Yr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&zy(e,n)}function zy(e,t){return Yr(t.enabled,e)!==!1&&e.isStaleByTime(Wo(t.staleTime,e))}function L3(e,t){return!Vh(e.getCurrentResult(),t)}var Ti,Ai,Fn,$s,Bs,ah,bx,cN,$3=(cN=class extends Vl{constructor(n,r){super();Ae(this,Bs);Ae(this,Ti);Ae(this,Ai);Ae(this,Fn);Ae(this,$s);we(this,Ti,n),this.setOptions(r),this.bindMethods(),We(this,Bs,ah).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=M(this,Ti).defaultMutationOptions(n),Vh(this.options,r)||M(this,Ti).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Fn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ga(r.mutationKey)!==Ga(this.options.mutationKey)?this.reset():((i=M(this,Fn))==null?void 0:i.state.status)==="pending"&&M(this,Fn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=M(this,Fn))==null||n.removeObserver(this)}onMutationUpdate(n){We(this,Bs,ah).call(this),We(this,Bs,bx).call(this,n)}getCurrentResult(){return M(this,Ai)}reset(){var n;(n=M(this,Fn))==null||n.removeObserver(this),we(this,Fn,void 0),We(this,Bs,ah).call(this),We(this,Bs,bx).call(this)}mutate(n,r){var i;return we(this,$s,r),(i=M(this,Fn))==null||i.removeObserver(this),we(this,Fn,M(this,Ti).getMutationCache().build(M(this,Ti),this.options)),M(this,Fn).addObserver(this),M(this,Fn).execute(n)}},Ti=new WeakMap,Ai=new WeakMap,Fn=new WeakMap,$s=new WeakMap,Bs=new WeakSet,ah=function(){var r;const n=((r=M(this,Fn))==null?void 0:r.state)??YC();we(this,Ai,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},bx=function(n){Gt.batch(()=>{var r,i,a,o,l,c,d,u;if(M(this,$s)&&this.hasListeners()){const h=M(this,Ai).variables,f=M(this,Ai).context;(n==null?void 0:n.type)==="success"?((i=(r=M(this,$s)).onSuccess)==null||i.call(r,n.data,h,f),(o=(a=M(this,$s)).onSettled)==null||o.call(a,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=M(this,$s)).onError)==null||c.call(l,n.error,h,f),(u=(d=M(this,$s)).onSettled)==null||u.call(d,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(M(this,Ai))})})},cN),JC=p.createContext(void 0),In=e=>{const t=p.useContext(JC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},F3=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(JC.Provider,{value:e,children:t})),ZC=p.createContext(!1),z3=()=>p.useContext(ZC);ZC.Provider;function U3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var B3=p.createContext(U3()),q3=()=>p.useContext(B3);function ek(e,t){return typeof e=="function"?e(...t):!!e}function tk(){}var V3=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},H3=e=>{p.useEffect(()=>{e.clearReset()},[e])},G3=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&ek(n,[e.error,r]),W3=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},K3=(e,t)=>e.isLoading&&e.isFetching&&!t,Q3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Xb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Y3(e,t,n){var u,h,f,m,x;const r=In(),i=z3(),a=q3(),o=r.defaultQueryOptions(e);(h=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=i?"isRestoring":"optimistic",W3(o),V3(o,a),H3(a);const l=!r.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new t(r,o)),d=c.getOptimisticResult(o);if(p.useSyncExternalStore(p.useCallback(g=>{const b=i?()=>{}:c.subscribe(Gt.batchCalls(g));return c.updateResult(),b},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),Q3(o,d))throw Xb(o,c,a);if(G3({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;if((m=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,o,d),o.experimental_prefetchInRender&&!Ha&&K3(d,i)){const g=l?Xb(o,c,a):(x=r.getQueryCache().get(o.queryHash))==null?void 0:x.promise;g==null||g.catch(tk).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function mt(e,t){return Y3(e,O3)}function en(e,t){const n=In(),[r]=p.useState(()=>new $3(n,e));p.useEffect(()=>{r.setOptions(e)},[r,e]);const i=p.useSyncExternalStore(p.useCallback(o=>r.subscribe(Gt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=p.useCallback((o,l)=>{r.mutate(o,l).catch(tk)},[r]);if(i.error&&ek(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fd.apply(this,arguments)}var Oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Oi||(Oi={}));const Jb="popstate";function X3(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return jx("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gh(i)}return Z3(t,n,null,e)}function Tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function J3(){return Math.random().toString(36).substr(2,8)}function Zb(e,t){return{usr:e.state,key:e.key,idx:t}}function jx(e,t,n,r){return n===void 0&&(n=null),fd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hl(t):t,{state:n,key:t&&t.key||r||J3()})}function Gh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Hl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Z3(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Oi.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(fd({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Oi.Pop;let b=u(),v=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:v})}function f(b,v){l=Oi.Push;let y=jx(g.location,b,v);d=u()+1;let w=Zb(y,d),k=g.createHref(y);try{o.pushState(w,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}a&&c&&c({action:l,location:g.location,delta:1})}function m(b,v){l=Oi.Replace;let y=jx(g.location,b,v);d=u();let w=Zb(y,d),k=g.createHref(y);o.replaceState(w,"",k),a&&c&&c({action:l,location:g.location,delta:0})}function x(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof b=="string"?b:Gh(b);return y=y.replace(/ $/,"%20"),Tt(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return l},get location(){return e(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Jb,h),c=b,()=>{i.removeEventListener(Jb,h),c=null}},createHref(b){return t(i,b)},createURL:x,encodeLocation(b){let v=x(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(b){return o.go(b)}};return g}var ej;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ej||(ej={}));function e5(e,t,n){return n===void 0&&(n="/"),t5(e,t,n,!1)}function t5(e,t,n,r){let i=typeof t=="string"?Hl(t):t,a=El(i.pathname||"/",n);if(a==null)return null;let o=rk(e);n5(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=p5(a);l=u5(o[c],d,r)}return l}function rk(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Tt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Hi([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&(Tt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),rk(a.children,t,u,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:c5(d,a.index),routesMeta:u})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of sk(a.path))i(a,o,c)}),t}function sk(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=sk(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function n5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:d5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const r5=/^:[\w-]+$/,s5=3,i5=2,a5=1,o5=10,l5=-2,tj=e=>e==="*";function c5(e,t){let n=e.split("/"),r=n.length;return n.some(tj)&&(r+=l5),t&&(r+=i5),n.filter(i=>!tj(i)).reduce((i,a)=>i+(r5.test(a)?s5:a===""?a5:o5),r)}function d5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function u5(e,t,n){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=Wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=Wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Hi([a,h.pathname]),pathnameBase:x5(Hi([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Hi([a,h.pathnameBase]))}return o}function Wh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=h5(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let g=l[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[h];return m&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function h5(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),nk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function p5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function El(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function f5(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Hl(e):e;return{pathname:n?n.startsWith("/")?n:m5(n,t):t,search:v5(r),hash:y5(i)}}function m5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Uy(e,t){let n=g5(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function By(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Hl(e):(i=fd({},e),Tt(!i.pathname||!i.pathname.includes("?"),fm("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),fm("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),fm("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=f5(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Hi=e=>e.join("/").replace(/\/\/+/g,"/"),x5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),v5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,y5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function w5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ik=["post","put","patch","delete"];new Set(ik);const b5=["get",...ik];new Set(b5);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},md.apply(this,arguments)}const Qp=p.createContext(null),ak=p.createContext(null),Zs=p.createContext(null),Yp=p.createContext(null),ei=p.createContext({outlet:null,matches:[],isDataRoute:!1}),ok=p.createContext(null);function j5(e,t){let{relative:n}=t===void 0?{}:t;Gl()||Tt(!1);let{basename:r,navigator:i}=p.useContext(Zs),{hash:a,pathname:o,search:l}=Xp(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Hi([r,o])),i.createHref({pathname:c,search:l,hash:a})}function Gl(){return p.useContext(Yp)!=null}function Ir(){return Gl()||Tt(!1),p.useContext(Yp).location}function lk(e){p.useContext(Zs).static||p.useLayoutEffect(e)}function Rt(){let{isDataRoute:e}=p.useContext(ei);return e?O5():N5()}function N5(){Gl()||Tt(!1);let e=p.useContext(Qp),{basename:t,future:n,navigator:r}=p.useContext(Zs),{matches:i}=p.useContext(ei),{pathname:a}=Ir(),o=JSON.stringify(Uy(i,n.v7_relativeSplatPath)),l=p.useRef(!1);return lk(()=>{l.current=!0}),p.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let h=By(d,JSON.parse(o),a,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Hi([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,o,a,e])}function ti(){let{matches:e}=p.useContext(ei),t=e[e.length-1];return t?t.params:{}}function Xp(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Zs),{matches:i}=p.useContext(ei),{pathname:a}=Ir(),o=JSON.stringify(Uy(i,r.v7_relativeSplatPath));return p.useMemo(()=>By(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function _5(e,t){return S5(e,t)}function S5(e,t,n,r){Gl()||Tt(!1);let{navigator:i}=p.useContext(Zs),{matches:a}=p.useContext(ei),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ir(),u;if(t){var h;let b=typeof t=="string"?Hl(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Tt(!1),u=b}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=e5(e,{pathname:m}),g=T5(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Hi([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Hi([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return t&&g?p.createElement(Yp.Provider,{value:{location:md({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Oi.Pop}},g):g}function C5(){let e=D5(),t=w5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:i},n):null,null)}const k5=p.createElement(C5,null);class E5 extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(ei.Provider,{value:this.props.routeContext},p.createElement(ok.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P5(e){let{routeContext:t,match:n,children:r}=e,i=p.useContext(Qp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(ei.Provider,{value:t},r)}function T5(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Tt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=n,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let m,x=!1,g=null,b=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||k5,c&&(d<0&&f===0?(x=!0,b=null):d===f&&(x=!0,b=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,f+1)),y=()=>{let w;return m?w=g:x?w=b:h.route.Component?w=p.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,p.createElement(P5,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(E5,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var ck=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ck||{}),Kh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kh||{});function A5(e){let t=p.useContext(Qp);return t||Tt(!1),t}function R5(e){let t=p.useContext(ak);return t||Tt(!1),t}function I5(e){let t=p.useContext(ei);return t||Tt(!1),t}function dk(e){let t=I5(),n=t.matches[t.matches.length-1];return n.route.id||Tt(!1),n.route.id}function D5(){var e;let t=p.useContext(ok),n=R5(Kh.UseRouteError),r=dk(Kh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function O5(){let{router:e}=A5(ck.UseNavigateStable),t=dk(Kh.UseNavigateStable),n=p.useRef(!1);return lk(()=>{n.current=!0}),p.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,md({fromRouteId:t},a)))},[e,t])}function gd(e){let{to:t,replace:n,state:r,relative:i}=e;Gl()||Tt(!1);let{future:a,static:o}=p.useContext(Zs),{matches:l}=p.useContext(ei),{pathname:c}=Ir(),d=Rt(),u=By(t,Uy(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return p.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:i}),[d,h,i,n,r]),null}function ze(e){Tt(!1)}function M5(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Oi.Pop,navigator:a,static:o=!1,future:l}=e;Gl()&&Tt(!1);let c=t.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:a,static:o,future:md({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Hl(r));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:x="default"}=r,g=p.useMemo(()=>{let b=El(u,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:x},navigationType:i}},[c,u,h,f,m,x,i]);return g==null?null:p.createElement(Zs.Provider,{value:d},p.createElement(Yp.Provider,{children:n,value:g}))}function oh(e){let{children:t,location:n}=e;return _5(Nx(t),n)}new Promise(()=>{});function Nx(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,i)=>{if(!p.isValidElement(r))return;let a=[...t,i];if(r.type===p.Fragment){n.push.apply(n,Nx(r.props.children,a));return}r.type!==ze&&Tt(!1),!r.props.index||!r.props.children||Tt(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Nx(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qh(){return Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qh.apply(this,arguments)}function uk(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function L5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $5(e,t){return e.button===0&&(!t||t==="_self")&&!L5(e)}function _x(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function F5(e,t){let n=_x(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(a=>{n.append(i,a)})}),n}const z5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],U5=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],B5="6";try{window.__reactRouterVersion=B5}catch{}const q5=p.createContext({isTransitioning:!1}),V5="startTransition",nj=Sv[V5];function H5(e){let{basename:t,children:n,future:r,window:i}=e,a=p.useRef();a.current==null&&(a.current=X3({window:i,v5Compat:!0}));let o=a.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=p.useCallback(h=>{d&&nj?nj(()=>c(h)):c(h)},[c,d]);return p.useLayoutEffect(()=>o.listen(u),[o,u]),p.createElement(M5,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const G5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dr=p.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,f=uk(t,z5),{basename:m}=p.useContext(Zs),x,g=!1;if(typeof d=="string"&&W5.test(d)&&(x=d,G5))try{let w=new URL(window.location.href),k=d.startsWith("//")?new URL(w.protocol+d):new URL(d),S=El(k.pathname,m);k.origin===w.origin&&S!=null?d=S+k.search+k.hash:g=!0}catch{}let b=j5(d,{relative:i}),v=Q5(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function y(w){r&&r(w),w.defaultPrevented||v(w)}return p.createElement("a",Qh({},f,{href:x||b,onClick:g||a?r:y,ref:n,target:c}))}),$r=p.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,h=uk(t,U5),f=Xp(c,{relative:h.relative}),m=Ir(),x=p.useContext(ak),{navigator:g,basename:b}=p.useContext(Zs),v=x!=null&&Y5(f)&&d===!0,y=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=m.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(w=w.toLowerCase(),k=k?k.toLowerCase():null,y=y.toLowerCase()),k&&b&&(k=El(k,b)||k);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=w===y||!o&&w.startsWith(y)&&w.charAt(S)==="/",N=k!=null&&(k===y||!o&&k.startsWith(y)&&k.charAt(y.length)==="/"),j={isActive:C,isPending:N,isTransitioning:v},_=C?r:void 0,E;typeof a=="function"?E=a(j):E=[a,C?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(j):l;return p.createElement(dr,Qh({},h,{"aria-current":_,className:E,ref:n,style:A,to:c,viewTransition:d}),typeof u=="function"?u(j):u)});var Sx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Sx||(Sx={}));var rj;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rj||(rj={}));function K5(e){let t=p.useContext(Qp);return t||Tt(!1),t}function Q5(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Rt(),d=Ir(),u=Xp(e,{relative:o});return p.useCallback(h=>{if($5(h,n)){h.preventDefault();let f=r!==void 0?r:Gh(d)===Gh(u);c(e,{replace:f,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,r,i,n,e,a,o,l])}function hk(e){let t=p.useRef(_x(e)),n=p.useRef(!1),r=Ir(),i=p.useMemo(()=>F5(r.search,n.current?null:t.current),[r.search]),a=Rt(),o=p.useCallback((l,c)=>{const d=_x(typeof l=="function"?l(i):l);n.current=!0,a("?"+d,c)},[a,i]);return[i,o]}function Y5(e,t){t===void 0&&(t={});let n=p.useContext(q5);n==null&&Tt(!1);let{basename:r}=K5(Sx.useViewTransitionState),i=Xp(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=El(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=El(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wh(i.pathname,o)!=null||Wh(i.pathname,a)!=null}const X5="modulepreload",J5=function(e){return"/"+e},sj={},Wl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=J5(c),c in sj)return;sj[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":X5,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},Z5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Kl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Jp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class pk extends Jp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cx extends Jp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kx extends Jp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yh||(Yh={}));var e$=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class t${constructor(t,{headers:n={},customFetch:r,region:i=Yh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Z5(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return e$(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:u}).catch(g=>{throw new pk(g)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Cx(h);if(!h.ok)throw new kx(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield h.json():m==="application/octet-stream"?x=yield h.blob():m==="text/event-stream"?x=h:m==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof kx||i instanceof Cx?i.context:void 0}}})}}var Un={},qy={},Zp={},Md={},ef={},tf={},n$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pl=n$();const r$=Pl.fetch,fk=Pl.fetch.bind(Pl),mk=Pl.Headers,s$=Pl.Request,i$=Pl.Response,Kl=Object.freeze(Object.defineProperty({__proto__:null,Headers:mk,Request:s$,Response:i$,default:fk,fetch:r$},Symbol.toStringTag,{value:"Module"})),a$=WR(Kl);var nf={};Object.defineProperty(nf,"__esModule",{value:!0});let o$=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};nf.default=o$;var gk=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tf,"__esModule",{value:!0});const l$=gk(a$),c$=gk(nf);let d$=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=l$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let d=null,u=null,h=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const v=await a.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await a.text();try{d=JSON.parse(g),Array.isArray(d)&&a.status===404&&(u=[],d=null,f=200,m="OK")}catch{a.status===404&&g===""?(f=204,m="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new c$.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};tf.default=d$;var u$=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ef,"__esModule",{value:!0});const h$=u$(tf);let p$=class extends h$.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ef.default=p$;var f$=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Md,"__esModule",{value:!0});const m$=f$(ef);let g$=class extends m$.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Md.default=g$;var x$=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zp,"__esModule",{value:!0});const uc=x$(Md);let v$=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new uc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new uc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new uc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new uc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new uc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Zp.default=v$;var rf={},sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.version=void 0;sf.version="0.0.0-automated";Object.defineProperty(rf,"__esModule",{value:!0});rf.DEFAULT_HEADERS=void 0;const y$=sf;rf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${y$.version}`};var xk=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qy,"__esModule",{value:!0});const w$=xk(Zp),b$=xk(Md),j$=rf;let N$=class vk{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},j$.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new w$.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new vk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=n);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new b$.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};qy.default=N$;var Ql=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Un,"__esModule",{value:!0});Un.PostgrestError=Un.PostgrestBuilder=Un.PostgrestTransformBuilder=Un.PostgrestFilterBuilder=Un.PostgrestQueryBuilder=Un.PostgrestClient=void 0;const yk=Ql(qy);Un.PostgrestClient=yk.default;const wk=Ql(Zp);Un.PostgrestQueryBuilder=wk.default;const bk=Ql(Md);Un.PostgrestFilterBuilder=bk.default;const jk=Ql(ef);Un.PostgrestTransformBuilder=jk.default;const Nk=Ql(tf);Un.PostgrestBuilder=Nk.default;const _k=Ql(nf);Un.PostgrestError=_k.default;var _$=Un.default={PostgrestClient:yk.default,PostgrestQueryBuilder:wk.default,PostgrestFilterBuilder:bk.default,PostgrestTransformBuilder:jk.default,PostgrestBuilder:Nk.default,PostgrestError:_k.default};const{PostgrestClient:S$,PostgrestQueryBuilder:MY,PostgrestFilterBuilder:LY,PostgrestTransformBuilder:$Y,PostgrestBuilder:FY,PostgrestError:C$}=_$;function k$(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const E$=k$(),P$="2.11.15",T$=`realtime-js/${P$}`,A$="1.0.0",Sk=1e4,R$=1e3;var $c;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($c||($c={}));var pn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pn||(pn={}));var Kr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Kr||(Kr={}));var Ex;(function(e){e.websocket="websocket"})(Ex||(Ex={}));var ya;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ya||(ya={}));class I${constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+i));o=o+i;const c=r.decode(t.slice(o,o+a));o=o+a;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Ck{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(gt||(gt={}));const ij=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((a,o)=>(a[o]=D$(o,e,t,i),a),{})},D$=(e,t,n,r)=>{const i=t.find(l=>l.name===e),a=i==null?void 0:i.type,o=n[e];return a&&!r.includes(a)?kk(a,o):Px(o)},kk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return $$(t,n)}switch(e){case gt.bool:return O$(t);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return M$(t);case gt.json:case gt.jsonb:return L$(t);case gt.timestamp:return F$(t);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return Px(t);default:return Px(t)}},Px=e=>e,O$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},M$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},$$=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>kk(t,l))}return e},F$=e=>typeof e=="string"?e.replace(" ","T"):e,Ek=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class mm{constructor(t,n,r={},i=Sk){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Tx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Tx||(Tx={}));class Ko{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ko.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=Ko.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ko.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(a,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=a[d];if(h){const f=u.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),x=u.filter(b=>m.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);x.length>0&&(l[d]=x),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}r(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,i(l,d,c),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ax;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ax||(Ax={}));var Rx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Rx||(Rx={}));var us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class af{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mm(this,Kr.join,this.params,this.timeout),this.rejoinTimer=new Ck(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kr.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Ko(this),this.broadcastEndpointURL=Ek(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(us.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(us.CLOSED));const c={},d={broadcast:a,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(us.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,x=[];for(let g=0;g<m;g++){const b=f[g],{filter:{event:v,schema:y,table:w,filter:k}}=b,S=u&&u[g];if(S&&S.event===v&&S.schema===y&&S.table===w&&S.filter===k)x.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=pn.errored,t==null||t(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(us.SUBSCRIBED);return}}).receive("error",u=>{this.state=pn.errored,t==null||t(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new mm(this,Kr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new mm(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Kr;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var x,g,b;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(g=m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,r)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var x,g,b,v,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,S=(x=m.filter)===null||x===void 0?void 0:x.event;return k&&((g=n.ids)===null||g===void 0?void 0:g.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(y=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return k==="*"||k===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:b,commit_timestamp:v,type:y,errors:w}=x;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:v,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(x))}m.callback(f,r)})}_isClosed(){return this.state===pn.closed}_isJoined(){return this.state===pn.joined}_isJoining(){return this.state===pn.joining}_isLeaving(){return this.state===pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&af.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Kr.close,{},t)}_onError(t){this._on(Kr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ij(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ij(t.columns,t.old_record)),n}}const aj=()=>{},z$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pk{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sk,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aj,this.ref=0,this.logger=aj,this.conn=null,this.sendBuffer=[],this.serializer=new I$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Wl(async()=>{const{default:c}=await Promise.resolve().then(()=>Kl);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Ex.websocket}`,this.httpEndpoint=Ek(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,o)=>o(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ck(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=E$),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:A$}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $c.connecting:return ya.Connecting;case $c.open:return ya.Open;case $c.closing:return ya.Closing;default:return ya.Closed}}isConnected(){return this.connectionState()===ya.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new af(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:T$};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Kr.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(R$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:a,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Kr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([z$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Vy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Yt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class U$ extends Vy{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ix extends Vy{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var B$=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Tk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Kl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},q$=()=>B$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wl(()=>Promise.resolve().then(()=>Kl),void 0)).Response:Response}),Dx=e=>{if(Array.isArray(e))return e.map(n=>Dx(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Dx(r)}),t};var ro=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const gm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),V$=(e,t,n)=>ro(void 0,void 0,void 0,function*(){const r=yield q$();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new U$(gm(i),e.status||500))}).catch(i=>{t(new Ix(gm(i),i))}):t(new Ix(gm(e),e))}),H$=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Ld(e,t,n,r,i,a){return ro(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,H$(t,r,i,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>V$(c,l,r))})})}function Xh(e,t,n,r){return ro(this,void 0,void 0,function*(){return Ld(e,"GET",t,n,r)})}function vi(e,t,n,r,i){return ro(this,void 0,void 0,function*(){return Ld(e,"POST",t,r,i,n)})}function G$(e,t,n,r,i){return ro(this,void 0,void 0,function*(){return Ld(e,"PUT",t,r,i,n)})}function W$(e,t,n,r){return ro(this,void 0,void 0,function*(){return Ld(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ak(e,t,n,r,i){return ro(this,void 0,void 0,function*(){return Ld(e,"DELETE",t,r,i,n)})}var Mn=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const K$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Q${constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Tk(i)}uploadOrUpdate(t,n,r,i){return Mn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},oj),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(Yt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Mn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:oj.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(Yt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Mn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield vi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Vy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Mn(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Mn(this,void 0,void 0,function*(){try{return{data:{path:(yield vi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Mn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield vi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Mn(this,void 0,void 0,function*(){try{const i=yield vi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}download(t,n){return Mn(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Xh(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}info(t){return Mn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Xh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Dx(r),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}exists(t){return Mn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield W$(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Yt(r)&&r instanceof Ix){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return Mn(this,void 0,void 0,function*(){try{return{data:yield Ak(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Mn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},K$),n),{prefix:t||""});return{data:yield vi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Y$="2.7.1",X$={"X-Client-Info":`storage-js/${Y$}`};var uo=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class J${constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},X$),n),this.fetch=Tk(r)}listBuckets(){return uo(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}})}getBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return uo(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return uo(this,void 0,void 0,function*(){try{return{data:yield G$(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield Ak(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}}class Z$ extends J${constructor(t,n={},r){super(t,n,r)}from(t){return new Q$(this.url,this.headers,t,this.fetch)}}const eF="2.52.1";let jc="";typeof Deno<"u"?jc="deno":typeof document<"u"?jc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jc="react-native":jc="node";const tF={"X-Client-Info":`supabase-js-${jc}/${eF}`},nF={headers:tF},rF={schema:"public"},sF={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iF={};var aF=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const oF=e=>{let t;return e?t=e:typeof fetch>"u"?t=fk:t=fetch,(...n)=>t(...n)},lF=()=>typeof Headers>"u"?mk:Headers,cF=(e,t,n)=>{const r=oF(n),i=lF();return(a,o)=>aF(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},o),{headers:d}))})};var dF=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};function uF(e){return e.endsWith("/")?e:e+"/"}function hF(e,t){var n,r;const{db:i,auth:a,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>dF(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Rk="2.71.1",jo=30*1e3,Ox=3,xm=Ox*jo,pF="http://localhost:9999",fF="supabase.auth.token",mF={"X-Client-Info":`gotrue-js/${Rk}`},Mx="X-Supabase-Api-Version",Ik={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xF=10*60*1e3;class of extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Dk extends of{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Ok(e){return qe(e)&&e.name==="AuthApiError"}class Hy extends of{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ni extends of{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ms extends ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mk(e){return qe(e)&&e.name==="AuthSessionMissingError"}class Nc extends ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _c extends ni{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sc extends ni{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Lk(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lx extends ni{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jh extends ni{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function lh(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class $x extends ni{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Zh extends ni{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ep="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lj=` 	
\r=`.split(""),vF=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<lj.length;t+=1)e[lj[t].charCodeAt(0)]=-2;for(let t=0;t<ep.length;t+=1)e[ep[t].charCodeAt(0)]=t;return e})();function cj(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ep[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ep[r]),t.queuedBits-=6}}function $k(e,t,n){const r=vF[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function dj(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{bF(o,r,n)};for(let o=0;o<e.length;o+=1)$k(e.charCodeAt(o),i,a);return t.join("")}function yF(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function wF(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}yF(r,t)}}function bF(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function jF(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)$k(e.charCodeAt(i),n,r);return new Uint8Array(t)}function NF(e){const t=[];return wF(e,n=>t.push(n)),new Uint8Array(t)}function _F(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>cj(i,n,r)),cj(null,n,r),t.join("")}function SF(e){return Math.round(Date.now()/1e3)+e}function CF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fr=()=>typeof window<"u"&&typeof document<"u",pa={tested:!1,writable:!1},Fk=()=>{if(!Fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pa.tested)return pa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),pa.tested=!0,pa.writable=!0}catch{pa.tested=!0,pa.writable=!1}return pa.writable};function kF(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const zk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Kl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},EF=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",No=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},fa=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ui=async(e,t)=>{await e.removeItem(t)};class lf{constructor(){this.promise=new lf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}lf.promiseConstructor=Promise;function vm(e){const t=e.split(".");if(t.length!==3)throw new Zh("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!gF.test(t[r]))throw new Zh("JWT not in base64url format");return{header:JSON.parse(dj(t[0])),payload:JSON.parse(dj(t[1])),signature:jF(t[2]),raw:{header:t[0],payload:t[1]}}}async function PF(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function TF(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function AF(e){return("0"+e.toString(16)).substr(-2)}function RF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,AF).join("")}async function IF(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function DF(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await IF(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ho(e,t,n=!1){const r=RF();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await No(e,`${t}-code-verifier`,i);const a=await DF(r);return[a,r===a?"plain":"s256"]}const OF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MF(e){const t=e.headers.get(Mx);if(!t||!t.match(OF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function LF(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $F(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function po(e){if(!FF.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ym(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uj(e){return JSON.parse(JSON.stringify(e))}var zF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),UF=[502,503,504];async function hj(e){var t;if(!EF(e))throw new Jh(xa(e),0);if(UF.includes(e.status))throw new Jh(xa(e),e.status);let n;try{n=await e.json()}catch(a){throw new Hy(xa(a),a)}let r;const i=MF(e);if(i&&i.getTime()>=Ik["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $x(xa(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ms}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new $x(xa(n),e.status,n.weak_password.reasons);throw new Dk(xa(n),e.status||500,r)}const BF=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ye(e,t,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Mx]||(a[Mx]=Ik["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await qF(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function qF(e,t,n,r,i,a){const o=BF(t,r,i,a);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Jh(xa(c),0)}if(l.ok||await hj(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await hj(c)}}function Ds(e){var t;let n=null;WF(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=SF(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function pj(e){const t=Ds(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ji(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function VF(e){return{data:e,error:null}}function HF(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=zF(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function GF(e){return e}function WF(e){return e.access_token&&e.refresh_token&&e.expires_in}const ch=["global","local","others"];var KF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Uk{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=zk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=ch[0]){if(ch.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ch.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ji})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=KF(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:HF,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ji})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:GF});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(qe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){po(t);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ji})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){po(t);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ji})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){po(t);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ji})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){po(t.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){po(t.userId),po(t.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}}function fj(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function QF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const va={debug:!!(globalThis&&Fk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class qk extends Bk{}async function Vk(e,t,n){va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),va.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{va.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw va.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new qk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(va.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}QF();const YF={url:pF,storageKey:fF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mj(e,t,n){return await n()}const fo={};class Tl{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tl.nextInstanceID,Tl.nextInstanceID+=1,this.instanceID>0&&Fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},YF),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Uk({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=zk(i.fetch),this.lock=i.lock||mj,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Fr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Vk:this.lock=mj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Fk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fj(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=fj(this.memoryStorage)),Fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=fo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){fo[this.storageKey]=Object.assign(Object.assign({},fo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=fo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){fo[this.storageKey]=Object.assign(Object.assign({},fo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=kF(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Lk(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return qe(n)?{error:n}:{error:new Hy("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ds}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:u,password:h,options:f}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await ho(this.storage,this.storageKey)),a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:Ds})}else if("phone"in t){const{phone:u,password:h,options:f}=t;a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ds})}else throw new _c("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pj})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pj})}else throw new _c("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Nc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,a,o,l,c,d,u,h,f,m;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:b,wallet:v,statement:y,options:w}=t;let k;if(Fr())if(typeof v=="object")k=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const S=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${S.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:b,error:v}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:_F(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ds});if(v)throw v;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Nc}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:v})}catch(b){if(qe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await fa(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ds});if(await ui(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Nc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(qe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,l=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ds}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Nc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ho(this.storage,this.storageKey));const{error:h}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new _c("You must provide either an email or phone number.")}catch(l){if(qe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ds});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await ho(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:VF})}catch(a){if(qe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ms;const{error:i}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:l}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new _c("You must provide either an email or phone number and a type")}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await fa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<xm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await fa(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ym()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ji}):await this._useSession(async n=>{var r,i,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ms}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ji})})}catch(n){if(qe(n))return Mk(n)&&(await this._removeSession(),await ui(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Ms;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ho(this.storage,this.storageKey));const{data:d,error:u}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ji});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ms;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=vm(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ms;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fr())throw new Sc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Lx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lx("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!o||!d)throw new Sc("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=jo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,u);const{data:g,error:b}=await this._getUser(a);if(b)throw b;const v={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(r){if(qe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await fa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Ok(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ui(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=CF(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ho(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(qe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,l,c,d,u;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Fr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(qe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await TF(async i=>(i>0&&await PF(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ds})),(i,a)=>{const o=200*Math.pow(2,i);return a&&lh(a)&&Date.now()+o-r<jo})}catch(r){if(this._debug(n,"error",r),qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await fa(this.storage,this.storageKey);if(i&&this.userStorage){let o=await fa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await No(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ym()}else if(i&&!i.user&&!i.user){const o=await fa(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ui(this.storage,this.storageKey+"-user"),await No(this.storage,this.storageKey,i)):i.user=ym()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xm;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${xm}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),lh(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ms;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new lf;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Ms;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),qe(a)){const o={session:null,error:a};return lh(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await No(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=uj(i);await No(this.storage,this.storageKey,a)}else{const i=uj(n);await No(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ui(this.storage,this.storageKey),await ui(this.storage,this.storageKey+"-code-verifier"),await ui(this.storage,this.storageKey+"-user"),this.userStorage&&await ui(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),jo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${jo}ms, refresh threshold is ${Ox} ticks`),i<=Ox&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await ho(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vm(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+xF>i)return r;const{data:a,error:o}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};r=m.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=vm(r);n!=null&&n.allowExpired||LF(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:a,header:i,signature:o},error:null}}const u=$F(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,NF(`${l}.${c}`)))throw new Zh("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}}Tl.nextInstanceID=0;const Hk=Tl;class XF extends Hk{constructor(t){super(t)}}var JF=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class Gk{constructor(t,n,r){var i,a,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=uF(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:rF,realtime:iF,auth:Object.assign(Object.assign({},sF),{storageKey:d}),global:nF},h=hF(r??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=cF(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new S$(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new t$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Z$(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return JF(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:a,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XF({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Pk(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wk=(e,t,n)=>new Gk(e,t,n);function ZF(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ZF()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const e6=Object.freeze(Object.defineProperty({__proto__:null,AuthApiError:Dk,AuthClient:Hk,AuthError:of,AuthImplicitGrantRedirectError:Sc,AuthInvalidCredentialsError:_c,AuthInvalidJwtError:Zh,AuthInvalidTokenResponseError:Nc,AuthPKCEGrantCodeExchangeError:Lx,AuthRetryableFetchError:Jh,AuthSessionMissingError:Ms,AuthUnknownError:Hy,AuthWeakPasswordError:$x,CustomAuthError:ni,get FunctionRegion(){return Yh},FunctionsError:Jp,FunctionsFetchError:pk,FunctionsHttpError:kx,FunctionsRelayError:Cx,GoTrueAdminApi:Uk,GoTrueClient:Tl,NavigatorLockAcquireTimeoutError:qk,PostgrestError:C$,get REALTIME_LISTEN_TYPES(){return Rx},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Ax},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Tx},get REALTIME_SUBSCRIBE_STATES(){return us},RealtimeChannel:af,RealtimeClient:Pk,RealtimePresence:Ko,SIGN_OUT_SCOPES:ch,SupabaseClient:Gk,createClient:Wk,isAuthApiError:Ok,isAuthError:qe,isAuthImplicitGrantRedirectError:Lk,isAuthRetryableFetchError:lh,isAuthSessionMissingError:Mk,lockInternals:va,navigatorLock:Vk},Symbol.toStringTag,{value:"Module"})),t6="https://jfolpnyipoocflcrachg.supabase.co",n6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg",L=Wk(t6,n6,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Na=class Na{constructor(){as(this,"currentTenantId",null);as(this,"cachedPermissions",new Map)}static getInstance(){return Na.instance||(Na.instance=new Na),Na.instance}async getCurrentSession(){console.log("🔍 getCurrentSession: Starting...");try{console.log("🔍 getCurrentSession: Getting session...");const t=L.auth.getSession(),n=new Promise((l,c)=>setTimeout(()=>c(new Error("Session timeout")),2e3)),r=await Promise.race([t,n]);console.log("🔍 getCurrentSession: Session call completed");const{data:{session:i},error:a}=r;if(a)return console.error("🔍 getCurrentSession: Session error:",a),null;if(!(i!=null&&i.user))return console.log("🔍 getCurrentSession: No session found, returning null"),null;const o=i.user;return console.log("🔍 getCurrentSession: User received:",o==null?void 0:o.email),console.log("🔍 getCurrentSession: Returning simplified session for login"),{user_id:o.id,email:o.email,tenants:[],current_tenant:null,is_platform_admin:!0}}catch(t){return console.error("🔍 getCurrentSession: Error:",t),null}}async switchTenant(t){const n=await this.getCurrentSession();if(!n)return!1;if(!n.tenants.some(i=>i.tenant_id===t))throw new AuthorizationError("You do not have access to this tenant");return this.currentTenantId=t,this.cachedPermissions.clear(),localStorage.setItem("current_tenant_id",t),!0}getCurrentTenantId(){return this.currentTenantId||localStorage.getItem("current_tenant_id")}async createTenant(t){const{data:n,error:r}=await L.from("tenants").insert(t).select().single();if(r)throw r;return n}async getTenant(t){const{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).single();return r?(console.error("Error fetching tenant:",r),null):n}async updateTenant(t,n){const{data:r,error:i}=await L.from("tenants").update(n).eq("id",t).select().single();if(i)throw i;return r}async inviteUser(t){const{data:n}=await L.from("profiles").select("user_id").eq("email",t.email).single();if(n)await this.assignRoleToUser({user_id:n.user_id,tenant_id:t.tenant_id,role:t.role});else{const{error:r}=await L.auth.admin.inviteUserByEmail(t.email,{data:{tenant_id:t.tenant_id,role:t.role}});if(r)throw r}}async assignRoleToUser(t){const{data:n}=await L.from("roles").select("id").eq("name",t.role).single();if(!n)throw new Error(`Role ${t.role} not found`);const{error:r}=await L.from("user_tenants").upsert({user_id:t.user_id,tenant_id:t.tenant_id,role_id:n.id,status:"active",joined_at:new Date().toISOString()});if(r)throw r}async removeUserFromTenant(t,n){const{error:r}=await L.from("user_tenants").update({status:"inactive"}).eq("user_id",t).eq("tenant_id",n);if(r)throw r}async hasPermission(t,n){const r=await this.getCurrentSession();if(!r)return!1;if(r.is_platform_admin)return!0;const i=this.getCurrentTenantId();if(!i)return!1;const{data:a,error:o}=await L.rpc("user_has_permission",{p_user_id:r.user_id,p_tenant_id:i,p_resource:t,p_action:n});return o?(console.error("Error checking permission:",o),!1):a||!1}async getUserPermissions(){var l;const t=await this.getCurrentSession();if(!t)return[];const n=this.getCurrentTenantId();if(!n)return[];const r=`${t.user_id}:${n}`;if(this.cachedPermissions.has(r))return this.cachedPermissions.get(r);const{data:i,error:a}=await L.from("role_permissions").select(`
        permissions (
          id,
          resource,
          action,
          description
        )
      `).eq("role_id",(l=t.current_tenant)==null?void 0:l.role_id).or(`tenant_id.eq.${n},tenant_id.is.null`);if(a)return console.error("Error fetching permissions:",a),[];const o=(i==null?void 0:i.flatMap(c=>c.permissions).filter(Boolean))||[];return this.cachedPermissions.set(r,o),o}async getTenantContext(){const t=await this.getCurrentSession();if(!t||!t.current_tenant)return null;const n=await this.getUserPermissions();return{tenant:t.current_tenant.tenant,user_role:t.current_tenant.role,permissions:n,can:(r,i)=>n.some(a=>a.resource===r&&a.action===i)}}async createAuditLog(t,n,r,i){const a=this.getCurrentTenantId(),{error:o}=await L.rpc("create_audit_log",{p_tenant_id:a,p_action:t,p_resource_type:n,p_resource_id:r,p_changes:i});o&&console.error("Error creating audit log:",o)}async getAuditLogs(t){const n=this.getCurrentTenantId();if(!n)return[];let r=L.from("audit_logs").select("*").eq("tenant_id",n).order("created_at",{ascending:!1});t!=null&&t.resource_type&&(r=r.eq("resource_type",t.resource_type)),t!=null&&t.user_id&&(r=r.eq("user_id",t.user_id)),t!=null&&t.start_date&&(r=r.gte("created_at",t.start_date.toISOString())),t!=null&&t.end_date&&(r=r.lte("created_at",t.end_date.toISOString()));const{data:i,error:a}=await r.limit(100);return a?(console.error("Error fetching audit logs:",a),[]):i||[]}clearCache(){this.cachedPermissions.clear()}async isPlatformAdmin(){const t=await this.getCurrentSession();return(t==null?void 0:t.is_platform_admin)||!1}async isTenantAdmin(){var n;const t=await this.getCurrentSession();return((n=t==null?void 0:t.current_tenant)==null?void 0:n.role.name)===SystemRole.TENANT_ADMIN}async isTeacher(){var n;const t=await this.getCurrentSession();return((n=t==null?void 0:t.current_tenant)==null?void 0:n.role.name)===SystemRole.TEACHER}async isStudent(){var n;const t=await this.getCurrentSession();return((n=t==null?void 0:t.current_tenant)==null?void 0:n.role.name)===SystemRole.STUDENT}};as(Na,"instance");let Fx=Na;const It=Fx.getInstance(),Kk=p.createContext(void 0);function r6({children:e}){var f,m,x;const[t,n]=p.useState(null),[r,i]=p.useState(null),[a,o]=p.useState(!0),[l,c]=p.useState(null),d=p.useCallback(async g=>{try{o(!0),await It.switchTenant(g);const{data:{user:b}}=await L.auth.getUser();if(b){const v={user_id:b.id,email:b.email,tenants:[],current_tenant:null,is_platform_admin:!0};n(v)}}catch(b){throw c(b),b}finally{o(!1)}},[]),u=p.useCallback((g,b)=>t!=null&&t.is_platform_admin?!0:(r==null?void 0:r.can(g,b))||!1,[t,r]);p.useEffect(()=>{console.log("🔄 Setting up auth state listener...");const{data:{subscription:g}}=L.auth.onAuthStateChange((v,y)=>{var w;if(console.log("🔄 Auth state changed:",v,((w=y==null?void 0:y.user)==null?void 0:w.email)||"no user"),v==="SIGNED_OUT"||!(y!=null&&y.user))console.log("🔄 User signed out or no session, clearing state"),n(null),i(null),o(!1);else if(v==="SIGNED_IN"||v==="TOKEN_REFRESHED"){console.log("🔄 User signed in or token refreshed, creating session");const k={user_id:y.user.id,email:y.user.email,tenants:[],current_tenant:null,is_platform_admin:!0};n(k),i(null),o(!1),console.log("🔄 Session set:",k.email)}else if(v==="INITIAL_SESSION"){if(console.log("🔄 Initial session event"),y!=null&&y.user){console.log("🔄 Initial session has user, creating session");const k={user_id:y.user.id,email:y.user.email,tenants:[],current_tenant:null,is_platform_admin:!0};n(k),console.log("🔄 Initial session set:",k.email)}else console.log("🔄 Initial session has no user");o(!1)}}),b=setTimeout(()=>{console.log("⚠️ Auth state timeout, setting loading to false"),o(!1)},2e3);return()=>{g.unsubscribe(),clearTimeout(b)}},[]);const h={session:t,tenantContext:r,loading:a,error:l,switchTenant:d,refresh:()=>{L.auth.getSession()},hasPermission:u,isPlatformAdmin:(t==null?void 0:t.is_platform_admin)||!1,isTenantAdmin:((f=t==null?void 0:t.current_tenant)==null?void 0:f.role.name)==="tenant_admin"||!1,isTeacher:((m=t==null?void 0:t.current_tenant)==null?void 0:m.role.name)==="teacher"||!1,isStudent:((x=t==null?void 0:t.current_tenant)==null?void 0:x.role.name)==="student"||!1};return s.jsx(Kk.Provider,{value:h,children:e})}function Dr(){const e=p.useContext(Kk);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function s6(e={}){const{session:t,tenantContext:n,loading:r}=Dr(),[i,a]=p.useState(null);return p.useEffect(()=>{var l;if(r)return;let o=!0;t||(o=!1),e.requiredRole&&t&&(t.is_platform_admin||((l=t.current_tenant)==null?void 0:l.role.name)===e.requiredRole||(o=!1)),e.requiredPermission&&n&&(t!=null&&t.is_platform_admin||n.can(e.requiredPermission.resource,e.requiredPermission.action)||(o=!1)),a(o),!o&&e.redirectTo&&(window.location.href=e.redirectTo)},[t,n,r,e]),{authorized:i,loading:r,session:t}}const Gy=to("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const o=r?Cn:"button";return s.jsx(o,{className:Q(Gy({variant:t,size:n,className:e})),ref:a,...i})});U.displayName="Button";const te=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));te.displayName="Card";const le=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));le.displayName="CardHeader";const ue=p.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t}));ue.displayName="CardTitle";const Me=p.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Me.displayName="CardDescription";const re=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t}));re.displayName="CardContent";const i6=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t}));i6.displayName="CardFooter";var wm="focusScope.autoFocusOnMount",bm="focusScope.autoFocusOnUnmount",gj={bubbles:!1,cancelable:!0},a6="FocusScope",$d=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=p.useState(null),d=St(i),u=St(a),h=p.useRef(null),f=$e(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let g=function(w){if(m.paused||!l)return;const k=w.target;l.contains(k)?h.current=k:fi(h.current,{select:!0})},b=function(w){if(m.paused||!l)return;const k=w.relatedTarget;k!==null&&(l.contains(k)||fi(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&fi(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),y.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){vj.add(m);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(wm,gj);l.addEventListener(wm,d),l.dispatchEvent(v),v.defaultPrevented||(o6(h6(Qk(l)),{select:!0}),document.activeElement===g&&fi(l))}return()=>{l.removeEventListener(wm,d),setTimeout(()=>{const v=new CustomEvent(bm,gj);l.addEventListener(bm,u),l.dispatchEvent(v),v.defaultPrevented||fi(g??document.body,{select:!0}),l.removeEventListener(bm,u),vj.remove(m)},0)}}},[l,d,u,m]);const x=p.useCallback(g=>{if(!n&&!r||m.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const y=g.currentTarget,[w,k]=l6(y);w&&k?!g.shiftKey&&v===k?(g.preventDefault(),n&&fi(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&fi(k,{select:!0})):v===y&&g.preventDefault()}},[n,r,m.paused]);return s.jsx(je.div,{tabIndex:-1,...o,ref:f,onKeyDown:x})});$d.displayName=a6;function o6(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(fi(r,{select:t}),document.activeElement!==n)return}function l6(e){const t=Qk(e),n=xj(t,e),r=xj(t.reverse(),e);return[n,r]}function Qk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xj(e,t){for(const n of e)if(!c6(n,{upTo:t}))return n}function c6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function d6(e){return e instanceof HTMLInputElement&&"select"in e}function fi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&d6(e)&&t&&e.select()}}var vj=u6();function u6(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=yj(e,t),e.unshift(t)},remove(t){var n;e=yj(e,t),(n=e[0])==null||n.resume()}}}function yj(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function h6(e){return e.filter(t=>t.tagName!=="A")}var jm=0;function cf(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??wj()),document.body.insertAdjacentElement("beforeend",e[1]??wj()),jm++,()=>{jm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),jm--}},[])}function wj(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var gn=function(){return gn=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gn.apply(this,arguments)};function Wy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function so(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})}function Yk(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Fc="right-scroll-bar-position",zc="width-before-scroll-bar",p6="with-scroll-bars-hidden",f6="--removed-body-scroll-bar-size";function Nm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function m6(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var g6=typeof window<"u"?p.useLayoutEffect:p.useEffect,bj=new WeakMap;function Xk(e,t){var n=m6(null,function(r){return e.forEach(function(i){return Nm(i,r)})});return g6(function(){var r=bj.get(n);if(r){var i=new Set(r),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||Nm(l,null)}),a.forEach(function(l){i.has(l)||Nm(l,o)})}bj.set(n,e)},[e]),n}function x6(e){return e}function v6(e,t){t===void 0&&(t=x6);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return i}function Jk(e){e===void 0&&(e={});var t=v6(null);return t.options=gn({async:!0,ssr:!1},e),t}var Zk=function(e){var t=e.sideCar,n=Wy(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,gn({},n))};Zk.isSideCarExport=!0;function eE(e,t){return e.useMedium(t),Zk}var tE=Jk(),_m=function(){},df=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:_m,onWheelCapture:_m,onTouchMoveCapture:_m}),i=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noIsolation,x=e.inert,g=e.allowPinchZoom,b=e.as,v=b===void 0?"div":b,y=e.gapMode,w=Wy(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=Xk([n,t]),C=gn(gn({},w),i);return p.createElement(p.Fragment,null,u&&p.createElement(k,{sideCar:tE,removeScrollBar:d,shards:h,noIsolation:m,inert:x,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:y}),o?p.cloneElement(p.Children.only(l),gn(gn({},C),{ref:S})):p.createElement(v,gn({},C,{className:c,ref:S}),l))});df.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};df.classNames={fullWidth:zc,zeroRight:Fc};var y6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function w6(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=y6();return t&&e.setAttribute("nonce",t),e}function b6(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function j6(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var N6=function(){var e=0,t=null;return{add:function(n){e==0&&(t=w6())&&(b6(t,n),j6(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},_6=function(){var e=N6();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Ky=function(){var e=_6(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},S6={left:0,top:0,right:0,gap:0},Sm=function(e){return parseInt(e||"",10)||0},C6=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Sm(n),Sm(r),Sm(i)]},k6=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return S6;var t=C6(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},E6=Ky(),Qo="data-scroll-locked",P6=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(p6,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Qo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(zc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Fc," .").concat(Fc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zc," .").concat(zc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Qo,`] {
    `).concat(f6,": ").concat(l,`px;
  }
`)},jj=function(){var e=parseInt(document.body.getAttribute(Qo)||"0",10);return isFinite(e)?e:0},T6=function(){p.useEffect(function(){return document.body.setAttribute(Qo,(jj()+1).toString()),function(){var e=jj()-1;e<=0?document.body.removeAttribute(Qo):document.body.setAttribute(Qo,e.toString())}},[])},nE=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;T6();var a=p.useMemo(function(){return k6(i)},[i]);return p.createElement(E6,{styles:P6(a,!t,i,n?"":"!important")})},zx=!1;if(typeof window<"u")try{var Iu=Object.defineProperty({},"passive",{get:function(){return zx=!0,!0}});window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{zx=!1}var mo=zx?{passive:!1}:!1,A6=function(e){return e.tagName==="TEXTAREA"},rE=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!A6(e)&&n[t]==="visible")},R6=function(e){return rE(e,"overflowY")},I6=function(e){return rE(e,"overflowX")},Nj=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=sE(e,r);if(i){var a=iE(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},D6=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},O6=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},sE=function(e,t){return e==="v"?R6(t):I6(t)},iE=function(e,t){return e==="v"?D6(t):O6(t)},M6=function(e,t){return e==="h"&&t==="rtl"?-1:1},L6=function(e,t,n,r,i){var a=M6(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,f=0;do{var m=iE(e,l),x=m[0],g=m[1],b=m[2],v=g-b-a*x;(x||v)&&sE(e,l)&&(h+=v,f+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(h)<1||!i)||!u&&(Math.abs(f)<1||!i))&&(d=!0),d},Du=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_j=function(e){return[e.deltaX,e.deltaY]},Sj=function(e){return e&&"current"in e?e.current:e},$6=function(e,t){return e[0]===t[0]&&e[1]===t[1]},F6=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},z6=0,go=[];function U6(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),i=p.useState(z6++)[0],a=p.useState(Ky)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Yk([e.lockRef.current],(e.shards||[]).map(Sj),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=Du(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-v[0],k="deltaY"in g?g.deltaY:y[1]-v[1],S,C=g.target,N=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in g&&N==="h"&&C.type==="range")return!1;var j=Nj(N,C);if(!j)return!0;if(j?S=N:(S=N==="v"?"h":"v",j=Nj(N,C)),!j)return!1;if(!r.current&&"changedTouches"in g&&(w||k)&&(r.current=S),!S)return!0;var _=r.current||S;return L6(_,b,g,_==="h"?w:k,!0)},[]),c=p.useCallback(function(g){var b=g;if(!(!go.length||go[go.length-1]!==a)){var v="deltaY"in b?_j(b):Du(b),y=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&$6(S.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(Sj).filter(Boolean).filter(function(S){return S.contains(b.target)}),k=w.length>0?l(b,w[0]):!o.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),d=p.useCallback(function(g,b,v,y){var w={name:g,delta:b,target:v,should:y,shadowParent:B6(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(k){return k!==w})},1)},[]),u=p.useCallback(function(g){n.current=Du(g),r.current=void 0},[]),h=p.useCallback(function(g){d(g.type,_j(g),g.target,l(g,e.lockRef.current))},[]),f=p.useCallback(function(g){d(g.type,Du(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return go.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,mo),document.addEventListener("touchmove",c,mo),document.addEventListener("touchstart",u,mo),function(){go=go.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,mo),document.removeEventListener("touchmove",c,mo),document.removeEventListener("touchstart",u,mo)}},[]);var m=e.removeScrollBar,x=e.inert;return p.createElement(p.Fragment,null,x?p.createElement(a,{styles:F6(i)}):null,m?p.createElement(nE,{gapMode:e.gapMode}):null)}function B6(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const q6=eE(tE,U6);var Fd=p.forwardRef(function(e,t){return p.createElement(df,gn({},e,{ref:t,sideCar:q6}))});Fd.classNames=df.classNames;var V6=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},xo=new WeakMap,Ou=new WeakMap,Mu={},Cm=0,aE=function(e){return e&&(e.host||aE(e.parentNode))},H6=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=aE(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},G6=function(e,t,n,r){var i=H6(t,Array.isArray(e)?e:[e]);Mu[n]||(Mu[n]=new WeakMap);var a=Mu[n],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var m=f.getAttribute(r),x=m!==null&&m!=="false",g=(xo.get(f)||0)+1,b=(a.get(f)||0)+1;xo.set(f,g),a.set(f,b),o.push(f),g===1&&x&&Ou.set(f,!0),b===1&&f.setAttribute(n,"true"),x||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(t),l.clear(),Cm++,function(){o.forEach(function(h){var f=xo.get(h)-1,m=a.get(h)-1;xo.set(h,f),a.set(h,m),f||(Ou.has(h)||h.removeAttribute(r),Ou.delete(h)),m||h.removeAttribute(n)}),Cm--,Cm||(xo=new WeakMap,xo=new WeakMap,Ou=new WeakMap,Mu={})}},zd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=V6(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),G6(r,i,n,"aria-hidden")):function(){return null}},Qy="Dialog",[oE,lE]=wn(Qy),[W6,ss]=oE(Qy),cE=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[d=!1,u]=xr({prop:r,defaultProp:i,onChange:a});return s.jsx(W6,{scope:t,triggerRef:l,contentRef:c,contentId:pr(),titleId:pr(),descriptionId:pr(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};cE.displayName=Qy;var dE="DialogTrigger",uE=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ss(dE,n),a=$e(t,i.triggerRef);return s.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Jy(i.open),...r,ref:a,onClick:ae(e.onClick,i.onOpenToggle)})});uE.displayName=dE;var Yy="DialogPortal",[K6,hE]=oE(Yy,{forceMount:void 0}),pE=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=ss(Yy,t);return s.jsx(K6,{scope:t,forceMount:n,children:p.Children.map(r,o=>s.jsx(Vt,{present:n||a.open,children:s.jsx($l,{asChild:!0,container:i,children:o})}))})};pE.displayName=Yy;var tp="DialogOverlay",fE=p.forwardRef((e,t)=>{const n=hE(tp,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=ss(tp,e.__scopeDialog);return a.modal?s.jsx(Vt,{present:r||a.open,children:s.jsx(Q6,{...i,ref:t})}):null});fE.displayName=tp;var Q6=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ss(tp,n);return s.jsx(Fd,{as:Cn,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(je.div,{"data-state":Jy(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Wa="DialogContent",mE=p.forwardRef((e,t)=>{const n=hE(Wa,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=ss(Wa,e.__scopeDialog);return s.jsx(Vt,{present:r||a.open,children:a.modal?s.jsx(Y6,{...i,ref:t}):s.jsx(X6,{...i,ref:t})})});mE.displayName=Wa;var Y6=p.forwardRef((e,t)=>{const n=ss(Wa,e.__scopeDialog),r=p.useRef(null),i=$e(t,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return zd(a)},[]),s.jsx(gE,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:ae(e.onFocusOutside,a=>a.preventDefault())})}),X6=p.forwardRef((e,t)=>{const n=ss(Wa,e.__scopeDialog),r=p.useRef(!1),i=p.useRef(!1);return s.jsx(gE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),gE=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=ss(Wa,n),c=p.useRef(null),d=$e(t,c);return cf(),s.jsxs(s.Fragment,{children:[s.jsx($d,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(eo,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Jy(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Z6,{titleId:l.titleId}),s.jsx(tz,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Xy="DialogTitle",xE=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ss(Xy,n);return s.jsx(je.h2,{id:i.titleId,...r,ref:t})});xE.displayName=Xy;var vE="DialogDescription",yE=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ss(vE,n);return s.jsx(je.p,{id:i.descriptionId,...r,ref:t})});yE.displayName=vE;var wE="DialogClose",bE=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ss(wE,n);return s.jsx(je.button,{type:"button",...r,ref:t,onClick:ae(e.onClick,()=>i.onOpenChange(!1))})});bE.displayName=wE;function Jy(e){return e?"open":"closed"}var jE="DialogTitleWarning",[J6,NE]=PD(jE,{contentName:Wa,titleName:Xy,docsSlug:"dialog"}),Z6=({titleId:e})=>{const t=NE(jE),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ez="DialogDescriptionWarning",tz=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NE(ez).contentName}}.`;return p.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Zy=cE,_E=uE,e0=pE,Ud=fE,Bd=mE,qd=xE,Vd=yE,uf=bE;const on=Zy,nz=_E,rz=e0,SE=p.forwardRef(({className:e,...t},n)=>s.jsx(Ud,{ref:n,className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));SE.displayName=Ud.displayName;const tn=p.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(rz,{children:[s.jsx(SE,{}),s.jsxs(Bd,{ref:r,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(uf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Bt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tn.displayName=Bd.displayName;const nn=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nn.displayName="DialogHeader";const Gi=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Gi.displayName="DialogFooter";const rn=p.forwardRef(({className:e,...t},n)=>s.jsx(qd,{ref:n,className:Q("text-lg font-semibold leading-none tracking-tight",e),...t}));rn.displayName=qd.displayName;const Qn=p.forwardRef(({className:e,...t},n)=>s.jsx(Vd,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Qn.displayName=Vd.displayName;const Te=p.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:Q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Te.displayName="Input";var sz="Label",CE=p.forwardRef((e,t)=>s.jsx(je.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));CE.displayName=sz;var kE=CE;const iz=to("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=p.forwardRef(({className:e,...t},n)=>s.jsx(kE,{ref:n,className:Q(iz(),e),...t}));xe.displayName=kE.displayName;function hf(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var t0="Checkbox",[az,zY]=wn(t0),[oz,lz]=az(t0),EE=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=p.useState(null),x=$e(t,k=>m(k)),g=p.useRef(!1),b=f?u||!!f.closest("form"):!0,[v=!1,y]=xr({prop:i,defaultProp:a,onChange:d}),w=p.useRef(v);return p.useEffect(()=>{const k=f==null?void 0:f.form;if(k){const S=()=>y(w.current);return k.addEventListener("reset",S),()=>k.removeEventListener("reset",S)}},[f,y]),s.jsxs(oz,{scope:n,state:v,disabled:l,children:[s.jsx(je.button,{type:"button",role:"checkbox","aria-checked":Wi(v)?"mixed":v,"aria-required":o,"data-state":AE(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:ae(e.onKeyDown,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:ae(e.onClick,k=>{y(S=>Wi(S)?!0:!S),b&&(g.current=k.isPropagationStopped(),g.current||k.stopPropagation())})}),b&&s.jsx(cz,{control:f,bubbles:!g.current,name:r,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Wi(a)?!1:a})]})});EE.displayName=t0;var PE="CheckboxIndicator",TE=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,a=lz(PE,n);return s.jsx(Vt,{present:r||Wi(a.state)||a.state===!0,children:s.jsx(je.span,{"data-state":AE(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});TE.displayName=PE;var cz=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:i,...a}=e,o=p.useRef(null),l=hf(n),c=Up(t);p.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&m){const x=new Event("click",{bubbles:r});u.indeterminate=Wi(n),m.call(u,Wi(n)?!1:n),u.dispatchEvent(x)}},[l,n,r]);const d=p.useRef(Wi(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wi(e){return e==="indeterminate"}function AE(e){return Wi(e)?"indeterminate":e?"checked":"unchecked"}var RE=EE,dz=TE;const Ss=p.forwardRef(({className:e,...t},n)=>s.jsx(RE,{ref:n,className:Q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(dz,{className:Q("flex items-center justify-center text-current"),children:s.jsx(Js,{className:"h-4 w-4"})})}));Ss.displayName=RE.displayName;const J={primaryDeepPurple:"#110D59",secondaryBlue:"#0E77D9",primaryBlue:"#0B5FAE",darkGray:"#030213",mediumGray:"#717182",lightGray:"#F7F8FA",white:"#FFFFFF",success:"#10B981",warning:"#F59E0B"},uz=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(!1),{toast:u}=rt(),h=Rt(),f=()=>s.jsx("header",{role:"banner",className:"fixed top-0 w-full bg-white/95 backdrop-blur-md border-b border-gray-200 z-50 shadow-sm",children:s.jsx("nav",{role:"navigation",className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{"data-testid":"brand-color-logo",className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${J.primaryDeepPurple} 0%, ${J.secondaryBlue} 100%)`},children:s.jsx(ex,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-2xl font-bold",style:{color:J.darkGray},children:"Gemeos"})]}),s.jsx(U,{onClick:()=>r(!0),className:"h-[51px] px-8 rounded-lg font-semibold text-base transition-all duration-200 hover:shadow-lg",style:{backgroundColor:"transparent",color:J.primaryDeepPurple,border:`2px solid ${J.primaryDeepPurple}`},onMouseEnter:S=>{S.currentTarget.style.backgroundColor=J.primaryDeepPurple,S.currentTarget.style.color=J.white},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="transparent",S.currentTarget.style.color=J.primaryDeepPurple},children:"Login"})]})})}),m=()=>s.jsxs("section",{"data-testid":"hero-section",className:"relative min-h-[800px] flex items-center justify-center overflow-hidden pt-16",style:{background:`linear-gradient(135deg, ${J.primaryDeepPurple} 0%, ${J.secondaryBlue} 100%)`},children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23FFFFFF' fill-opacity='0.3'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-20 relative z-10",children:s.jsxs("div",{className:"max-w-6xl mx-auto text-center space-y-8",children:[s.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-bold text-white leading-tight",children:["The Future of Learning",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-yellow-100",children:"is Personal"})]}),s.jsx("p",{className:"text-xl md:text-2xl text-white/90 leading-relaxed max-w-4xl mx-auto","data-testid":"body-text",children:"Transform your content into personalized, adaptive learning experiences with AI that understands each student's unique journey."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-8",children:[s.jsxs(U,{onClick:()=>t(!0),className:"h-[60px] px-12 text-xl font-semibold rounded-xl shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-300",style:{backgroundColor:J.white,color:J.primaryDeepPurple},onMouseEnter:S=>{S.currentTarget.style.backgroundColor=J.lightGray},onMouseLeave:S=>{S.currentTarget.style.backgroundColor=J.white},children:["Book an Appointment",s.jsx(Mh,{className:"ml-3 h-6 w-6"})]}),s.jsxs(U,{className:"h-[60px] px-12 text-xl font-semibold rounded-xl border-2 transition-all duration-300",style:{backgroundColor:"transparent",color:J.white,borderColor:J.white},onMouseEnter:S=>{S.currentTarget.style.backgroundColor=J.white,S.currentTarget.style.color=J.primaryDeepPurple},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="transparent",S.currentTarget.style.color=J.white},children:[s.jsx(Tb,{className:"mr-3 h-6 w-6"}),"Watch Demo"]})]})]})})]}),x=()=>s.jsx("section",{"data-testid":"section-how-it-works",className:"py-24 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-20",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",style:{color:J.darkGray},children:"How It Works"}),s.jsx("p",{className:"text-xl max-w-3xl mx-auto leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Transform your content into personalized learning experiences in three simple steps"})]}),s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 relative",children:[s.jsx("div",{className:"hidden md:block absolute top-24 left-1/3 right-1/3 h-0.5",style:{backgroundColor:J.mediumGray+"40"}}),s.jsxs("div",{"data-testid":"process-step",className:"relative text-center space-y-6",children:[s.jsx("div",{className:"w-32 h-32 mx-auto rounded-2xl flex items-center justify-center text-white shadow-2xl relative z-10",style:{background:`linear-gradient(135deg, ${J.primaryDeepPurple} 0%, ${J.secondaryBlue} 100%)`},children:s.jsx(En,{className:"w-16 h-16"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-2xl font-bold",style:{color:J.darkGray},children:"Upload Content"}),s.jsx("p",{className:"text-lg leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Simply upload your existing educational materials, videos, documents, or create new content directly in our platform."})]})]}),s.jsxs("div",{"data-testid":"process-step",className:"relative text-center space-y-6",children:[s.jsx("div",{className:"w-32 h-32 mx-auto rounded-2xl flex items-center justify-center text-white shadow-2xl relative z-10",style:{background:`linear-gradient(135deg, ${J.secondaryBlue} 0%, ${J.primaryBlue} 100%)`},children:s.jsx(vO,{className:"w-16 h-16"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-2xl font-bold",style:{color:J.darkGray},children:"AI Generates Curriculum"}),s.jsx("p",{className:"text-lg leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Our AI analyzes your content and automatically creates personalized learning paths, assessments, and interactive elements."})]})]}),s.jsxs("div",{"data-testid":"process-step",className:"relative text-center space-y-6",children:[s.jsx("div",{className:"w-32 h-32 mx-auto rounded-2xl flex items-center justify-center text-white shadow-2xl relative z-10",style:{background:`linear-gradient(135deg, ${J.primaryBlue} 0%, ${J.primaryDeepPurple} 100%)`},children:s.jsx(kn,{className:"w-16 h-16"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-2xl font-bold",style:{color:J.darkGray},children:"Manage and Personalize"}),s.jsx("p",{className:"text-lg leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Review, customize, and deploy your personalized learning experience. Monitor student progress and let AI adapt in real-time."})]})]})]})})]})}),g=()=>s.jsx("section",{"data-testid":"section-student-experience",className:"py-24 bg-gray-50",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold leading-tight",style:{color:J.darkGray},children:["Experience Learning",s.jsx("br",{}),s.jsx("span",{style:{color:J.secondaryBlue},children:"Through Play"})]}),s.jsx("p",{className:"text-xl leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"See how our AI transforms complex concepts into engaging, interactive experiences that adapt to each student's learning style and pace."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:J.success}}),s.jsx("span",{className:"text-lg",style:{color:J.darkGray},children:"Real-time feedback and adaptation"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:J.success}}),s.jsx("span",{className:"text-lg",style:{color:J.darkGray},children:"Interactive exercises and challenges"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:J.success}}),s.jsx("span",{className:"text-lg",style:{color:J.darkGray},children:"Progress tracking and achievements"})]})]})]}),s.jsx("div",{className:"relative",children:s.jsx(te,{className:"bg-white shadow-2xl border-0 overflow-hidden",children:s.jsxs(re,{className:"p-0",children:[s.jsx("div",{className:"p-6 border-b",style:{backgroundColor:J.lightGray},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:J.secondaryBlue},children:s.jsx(Mp,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",style:{color:J.darkGray},children:"Music Theory: Chord Progressions"}),s.jsx("p",{className:"text-sm",style:{color:J.mediumGray},children:"Interactive lesson"})]})]})}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h4",{className:"text-xl font-semibold",style:{color:J.darkGray},children:"Listen and Identify the Chord"}),s.jsx("p",{className:"text-sm",style:{color:J.mediumGray},children:"Click play to hear the chord, then select the correct answer"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{className:"w-20 h-20 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",style:{backgroundColor:J.secondaryBlue},children:s.jsx(IO,{className:"w-10 h-10 text-white ml-1"})})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["C Major","A Minor","F Major","G Major"].map((S,C)=>s.jsxs("button",{className:`p-4 rounded-lg border-2 transition-all duration-300 hover:shadow-md ${C===1?"border-green-500 bg-green-50":"border-gray-200"}`,style:{borderColor:C===1?J.success:J.mediumGray+"40",backgroundColor:C===1?J.success+"10":"white"},children:[s.jsx("span",{className:"font-medium",style:{color:C===1?J.success:J.darkGray},children:S}),C===1&&s.jsx(Zn,{className:"w-5 h-5 ml-2 inline",style:{color:J.success}})]},S))}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",style:{color:J.mediumGray},children:[s.jsx("span",{children:"Progress"}),s.jsx("span",{children:"7/10"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{backgroundColor:J.secondaryBlue,width:"70%"}})})]})]})]})})})]})})})}),b=()=>s.jsx("section",{"data-testid":"section-platform-pillars",className:"py-24 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-20",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",style:{color:J.darkGray},children:"Platform Pillars"}),s.jsx("p",{className:"text-xl max-w-3xl mx-auto leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Four foundational elements that make personalized learning possible at scale"})]}),s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsx(te,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 h-full bg-white group",children:s.jsxs(re,{className:"p-8 text-center space-y-6 h-full flex flex-col",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center transition-all duration-300 group-hover:scale-110",style:{background:`linear-gradient(135deg, ${J.primaryDeepPurple} 0%, ${J.secondaryBlue} 100%)`},children:s.jsx(vn,{className:"w-10 h-10 text-white"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:J.darkGray},children:"Adaptive Learning Paths"}),s.jsx("p",{className:"leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Dynamic curriculum that adjusts to each student's pace, learning style, and progress in real-time."})]})]})}),s.jsx(te,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 h-full bg-white group",children:s.jsxs(re,{className:"p-8 text-center space-y-6 h-full flex flex-col",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center transition-all duration-300 group-hover:scale-110",style:{background:`linear-gradient(135deg, ${J.secondaryBlue} 0%, ${J.primaryBlue} 100%)`},children:s.jsx(Op,{className:"w-10 h-10 text-white"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:J.darkGray},children:"Intelligent Content Creation"}),s.jsx("p",{className:"leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"AI-powered tools that transform your materials into engaging, interactive learning experiences."})]})]})}),s.jsx(te,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 h-full bg-white group",children:s.jsxs(re,{className:"p-8 text-center space-y-6 h-full flex flex-col",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center transition-all duration-300 group-hover:scale-110",style:{background:`linear-gradient(135deg, ${J.primaryBlue} 0%, ${J.primaryDeepPurple} 100%)`},children:s.jsx(ZS,{className:"w-10 h-10 text-white"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:J.darkGray},children:"Engaging Gamification"}),s.jsx("p",{className:"leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Achievement systems, progress tracking, and interactive challenges that keep students motivated."})]})]})}),s.jsx(te,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 h-full bg-white group",children:s.jsxs(re,{className:"p-8 text-center space-y-6 h-full flex flex-col",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center transition-all duration-300 group-hover:scale-110",style:{background:`linear-gradient(135deg, ${J.primaryDeepPurple} 0%, ${J.secondaryBlue} 100%)`},children:s.jsx($h,{className:"w-10 h-10 text-white"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:J.darkGray},children:"Advanced Analytics"}),s.jsx("p",{className:"leading-relaxed",style:{color:J.mediumGray},"data-testid":"body-text",children:"Deep insights into learning patterns, progress metrics, and performance optimization."})]})]})})]})})]})}),v=()=>s.jsxs("section",{"data-testid":"section-cta",className:"py-24 text-white relative overflow-hidden",style:{background:`linear-gradient(135deg, ${J.primaryDeepPurple} 0%, ${J.secondaryBlue} 100%)`},children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23FFFFFF' fill-opacity='0.3'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-10",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold leading-tight text-white",children:["Ready to Build the",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-yellow-100",children:"Future of Learning?"})]}),s.jsx("p",{className:"text-xl md:text-2xl leading-relaxed max-w-3xl mx-auto text-white/90","data-testid":"body-text",children:"Transform your educational content into personalized, AI-powered learning experiences that adapt to every student."})]}),s.jsxs("div",{"data-testid":"cta-container",className:"flex flex-col sm:flex-row gap-6 justify-center items-center pt-8",children:[s.jsxs(U,{onClick:()=>t(!0),className:"h-[60px] px-12 text-xl font-semibold rounded-xl shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-300",style:{backgroundColor:J.white,color:J.primaryDeepPurple},onMouseEnter:S=>{S.currentTarget.style.backgroundColor=J.lightGray},onMouseLeave:S=>{S.currentTarget.style.backgroundColor=J.white},children:["Book an Appointment",s.jsx(Mh,{className:"ml-3 h-6 w-6"})]}),s.jsxs(U,{className:"h-[60px] px-12 text-xl font-semibold rounded-xl border-2 transition-all duration-300",style:{backgroundColor:"transparent",color:J.white,borderColor:J.white},onMouseEnter:S=>{S.currentTarget.style.backgroundColor=J.white,S.currentTarget.style.color=J.primaryDeepPurple},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="transparent",S.currentTarget.style.color=J.white},children:[s.jsx(Tb,{className:"mr-3 h-6 w-6"}),"Watch Demo"]})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-8 pt-12 text-white/80",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(js,{className:"w-6 h-6"}),s.jsx("span",{className:"text-lg font-medium",children:"Enterprise Security"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(_l,{className:"w-6 h-6"}),s.jsx("span",{className:"text-lg font-medium",children:"Global Scale"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mO,{className:"w-6 h-6"}),s.jsx("span",{className:"text-lg font-medium",children:"AI-Certified"})]})]})]})})]}),y=()=>s.jsx("footer",{role:"contentinfo",className:"py-12 text-white bg-footer-dark",style:{backgroundColor:J.darkGray},children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${J.white} 0%, ${J.lightGray} 100%)`},children:s.jsx(ex,{className:"w-5 h-5",style:{color:J.primaryDeepPurple}})}),s.jsx("span",{className:"text-xl font-bold",children:"Gemeos"})]}),s.jsx("p",{className:"text-white/70 text-sm",children:"Empowering music educators with AI-powered teaching solutions."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-4",children:"Product"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Features"}),s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Pricing"}),s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Resources"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-4",children:"Support"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Documentation"}),s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Contact Us"}),s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"FAQ"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-4",children:"Legal"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Privacy Policy"}),s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Terms of Service"}),s.jsx("a",{href:"#",className:"block text-white/70 hover:text-white text-sm transition-colors",children:"Cookie Policy"})]})]})]}),s.jsx("div",{className:"border-t border-white/10 mt-8 pt-8 text-center text-white/50 text-sm",children:"© 2024 Gemeos. All rights reserved."})]})}),w=()=>{const S=async C=>{C.preventDefault(),d(!0);const N=new FormData(C.currentTarget),j=N.get("firstName"),_=N.get("lastName"),E=N.get("email"),A=N.get("password"),R=N.get("confirmPassword"),$=N.get("terms")==="on";if(!j||!_||!E||!A||!R){u({title:"Error",description:"Please fill in all fields.",variant:"destructive"}),d(!1);return}if(A!==R){u({title:"Error",description:"Passwords do not match.",variant:"destructive"}),d(!1);return}if(A.length<8){u({title:"Error",description:"Password must be at least 8 characters long.",variant:"destructive"}),d(!1);return}if(!$){u({title:"Error",description:"Please accept the Terms of Service and Privacy Policy.",variant:"destructive"}),d(!1);return}try{const{data:B,error:F}=await L.auth.signUp({email:E,password:A,options:{emailRedirectTo:`${window.location.origin}/`,data:{first_name:j,last_name:_,user_type:"teacher"}}});if(F){u({title:"Registration Failed",description:F.message,variant:"destructive"}),d(!1);return}u({title:"Registration successful!",description:"Welcome to Gemeos!"}),t(!1),h("/admin/dashboard")}catch{u({title:"Registration Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{d(!1)}};return s.jsx(on,{open:e,onOpenChange:t,children:s.jsxs(tn,{className:"sm:max-w-md",children:[s.jsx(nn,{children:s.jsx(rn,{className:"text-2xl text-center",style:{color:J.darkGray},children:"Create Your Free Account"})}),s.jsxs("form",{className:"space-y-4 mt-4",onSubmit:S,role:"alert",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"firstName",children:"First Name"}),s.jsx(Te,{id:"firstName",name:"firstName",placeholder:"John",required:!0,className:"h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"lastName",children:"Last Name"}),s.jsx(Te,{id:"lastName",name:"lastName",placeholder:"Doe",required:!0,className:"h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue}})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(xn,{className:"absolute left-3 top-3.5 h-4 w-4",style:{color:J.mediumGray}}),s.jsx(Te,{id:"email",name:"email",type:"email",placeholder:"john@example.com",className:"pl-10 h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue},required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-3.5 h-4 w-4",style:{color:J.mediumGray}}),s.jsx(Te,{id:"password",name:"password",type:i?"text":"password",placeholder:"Min. 8 characters",className:"pl-10 pr-10 h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue},required:!0,minLength:8}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-3.5 hover:opacity-70","data-testid":"toggle-password-visibility",children:i?s.jsx(qo,{className:"h-4 w-4",style:{color:J.mediumGray}}):s.jsx(ws,{className:"h-4 w-4",style:{color:J.mediumGray}})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-3.5 h-4 w-4",style:{color:J.mediumGray}}),s.jsx(Te,{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",placeholder:"Confirm your password",className:"pl-10 pr-10 h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue},required:!0}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-3.5 hover:opacity-70","data-testid":"toggle-password-visibility",children:o?s.jsx(qo,{className:"h-4 w-4",style:{color:J.mediumGray}}):s.jsx(ws,{className:"h-4 w-4",style:{color:J.mediumGray}})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ss,{id:"terms",name:"terms",required:!0}),s.jsxs("label",{htmlFor:"terms",className:"text-sm",style:{color:J.mediumGray},children:["I accept the"," ",s.jsx("a",{href:"#",className:"hover:underline text-link",style:{color:J.primaryBlue},children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"#",className:"hover:underline text-link",style:{color:J.primaryBlue},children:"Privacy Policy"})]})]}),s.jsx(U,{type:"submit",className:"w-full h-[51px] font-semibold text-base rounded-lg transition-all duration-200",style:{backgroundColor:J.primaryBlue,color:J.white},disabled:c,children:c?"Creating Account...":"Create Free Account"}),s.jsxs("p",{className:"text-center text-sm",style:{color:J.mediumGray},children:["Already have an account?"," ",s.jsx("button",{type:"button",onClick:()=>{t(!1),r(!0)},className:"font-medium hover:underline",style:{color:J.primaryBlue},children:"Login here"})]})]})]})})},k=()=>{const S=async C=>{C.preventDefault(),d(!0);const N=new FormData(C.currentTarget),j=N.get("loginEmail"),_=N.get("loginPassword");try{const{data:E,error:A}=await L.auth.signInWithPassword({email:j,password:_});if(A){u({title:"Login Failed",description:A.message,variant:"destructive"}),d(!1);return}u({title:"Login successful!",description:"Welcome back to Gemeos!"}),r(!1),h("/admin/dashboard")}catch{u({title:"Login Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{d(!1)}};return s.jsx(on,{open:n,onOpenChange:r,children:s.jsxs(tn,{className:"sm:max-w-md",children:[s.jsx(nn,{children:s.jsx(rn,{className:"text-2xl text-center",style:{color:J.darkGray},children:"Welcome Back"})}),s.jsxs("form",{className:"space-y-4 mt-4",onSubmit:S,children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"loginEmail",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(xn,{className:"absolute left-3 top-3.5 h-4 w-4",style:{color:J.mediumGray}}),s.jsx(Te,{id:"loginEmail",name:"loginEmail",type:"email",placeholder:"john@example.com",className:"pl-10 h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue},required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"loginPassword",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-3.5 h-4 w-4",style:{color:J.mediumGray}}),s.jsx(Te,{id:"loginPassword",name:"loginPassword",type:i?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10 h-11 focus:ring-2 focus:ring-offset-2",style:{borderColor:J.primaryBlue},required:!0}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-3.5 hover:opacity-70","data-testid":"toggle-password-visibility",children:i?s.jsx(qo,{className:"h-4 w-4",style:{color:J.mediumGray}}):s.jsx(ws,{className:"h-4 w-4",style:{color:J.mediumGray}})})]})]}),s.jsx(U,{type:"submit",className:"w-full h-[51px] font-semibold text-base rounded-lg transition-all duration-200",style:{backgroundColor:J.primaryBlue,color:J.white},disabled:c,children:c?"Logging in...":"Login"}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("a",{href:"#",className:"text-sm hover:underline",style:{color:J.primaryBlue},children:"Forgot password?"}),s.jsxs("p",{className:"text-sm",style:{color:J.mediumGray},children:["Don't have an account?"," ",s.jsx("button",{type:"button",onClick:()=>{r(!1),t(!0)},className:"font-medium hover:underline",style:{color:J.primaryBlue},children:"Sign up here"})]})]})]})]})})};return s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsx(f,{}),s.jsxs("main",{role:"main",children:[s.jsx(m,{}),s.jsx(x,{}),s.jsx(g,{}),s.jsx(b,{}),s.jsx(v,{})]}),s.jsx(y,{}),s.jsx(w,{}),s.jsx(k,{})]})};function hz(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...x}=h,g=(f==null?void 0:f[e][c])||l,b=p.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:m})}function u(h,f){const m=(f==null?void 0:f[e][c])||l,x=p.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,pz(i,...t)]}function pz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var fz=p.createContext(void 0);function Yl(e){const t=p.useContext(fz);return e||t||"ltr"}var km="rovingFocusGroup.onEntryFocus",mz={bubbles:!1,cancelable:!0},pf="RovingFocusGroup",[Ux,IE,gz]=Rp(pf),[xz,Xl]=hz(pf,[gz]),[vz,yz]=xz(pf),DE=p.forwardRef((e,t)=>s.jsx(Ux.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Ux.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(wz,{...e,ref:t})})}));DE.displayName=pf;var wz=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,f=p.useRef(null),m=$e(t,f),x=Yl(a),[g=null,b]=xr({prop:o,defaultProp:l,onChange:c}),[v,y]=p.useState(!1),w=St(d),k=IE(n),S=p.useRef(!1),[C,N]=p.useState(0);return p.useEffect(()=>{const j=f.current;if(j)return j.addEventListener(km,w),()=>j.removeEventListener(km,w)},[w]),s.jsx(vz,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:g,onItemFocus:p.useCallback(j=>b(j),[b]),onItemShiftTab:p.useCallback(()=>y(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(j=>j+1),[]),onFocusableItemRemove:p.useCallback(()=>N(j=>j-1),[]),children:s.jsx(je.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:ae(e.onMouseDown,()=>{S.current=!0}),onFocus:ae(e.onFocus,j=>{const _=!S.current;if(j.target===j.currentTarget&&_&&!v){const E=new CustomEvent(km,mz);if(j.currentTarget.dispatchEvent(E),!E.defaultPrevented){const A=k().filter(z=>z.focusable),R=A.find(z=>z.active),$=A.find(z=>z.id===g),F=[R,$,...A].filter(Boolean).map(z=>z.ref.current);LE(F,u)}}S.current=!1}),onBlur:ae(e.onBlur,()=>y(!1))})})}),OE="RovingFocusGroupItem",ME=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,...o}=e,l=pr(),c=a||l,d=yz(OE,n),u=d.currentTabStopId===c,h=IE(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=d;return p.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),s.jsx(Ux.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:s.jsx(je.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:ae(e.onMouseDown,x=>{r?d.onItemFocus(c):x.preventDefault()}),onFocus:ae(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:ae(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const g=Nz(x,d.orientation,d.dir);if(g!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let v=h().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const y=v.indexOf(x.currentTarget);v=d.loop?_z(v,y+1):v.slice(y+1)}setTimeout(()=>LE(v))}})})})});ME.displayName=OE;var bz={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jz(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Nz(e,t,n){const r=jz(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return bz[r]}function LE(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function _z(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var n0=DE,r0=ME,s0="Radio",[Sz,$E]=wn(s0),[Cz,kz]=Sz(s0),FE=p.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[h,f]=p.useState(null),m=$e(t,b=>f(b)),x=p.useRef(!1),g=h?d||!!h.closest("form"):!0;return s.jsxs(Cz,{scope:n,checked:i,disabled:o,children:[s.jsx(je.button,{type:"button",role:"radio","aria-checked":i,"data-state":BE(i),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:ae(e.onClick,b=>{i||c==null||c(),g&&(x.current=b.isPropagationStopped(),x.current||b.stopPropagation())})}),g&&s.jsx(Ez,{control:h,bubbles:!x.current,name:r,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});FE.displayName=s0;var zE="RadioIndicator",UE=p.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,a=kz(zE,n);return s.jsx(Vt,{present:r||a.checked,children:s.jsx(je.span,{"data-state":BE(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});UE.displayName=zE;var Ez=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,a=p.useRef(null),o=hf(n),l=Up(t);return p.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(f)}},[o,n,r]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BE(e){return e?"checked":"unchecked"}var Pz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],i0="RadioGroup",[Tz,UY]=wn(i0,[Xl,$E]),qE=Xl(),VE=$E(),[Az,Rz]=Tz(i0),HE=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...f}=e,m=qE(n),x=Yl(d),[g,b]=xr({prop:a,defaultProp:i,onChange:h});return s.jsx(Az,{scope:n,name:r,required:o,disabled:l,value:g,onValueChange:b,children:s.jsx(n0,{asChild:!0,...m,orientation:c,dir:x,loop:u,children:s.jsx(je.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...f,ref:t})})})});HE.displayName=i0;var GE="RadioGroupItem",WE=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,a=Rz(GE,n),o=a.disabled||r,l=qE(n),c=VE(n),d=p.useRef(null),u=$e(t,d),h=a.value===i.value,f=p.useRef(!1);return p.useEffect(()=>{const m=g=>{Pz.includes(g.key)&&(f.current=!0)},x=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",x)}},[]),s.jsx(r0,{asChild:!0,...l,focusable:!o,active:h,children:s.jsx(FE,{disabled:o,required:a.required,checked:h,...c,...i,name:a.name,ref:u,onCheck:()=>a.onValueChange(i.value),onKeyDown:ae(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:ae(i.onFocus,()=>{var m;f.current&&((m=d.current)==null||m.click())})})})});WE.displayName=GE;var Iz="RadioGroupIndicator",KE=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=VE(n);return s.jsx(UE,{...i,...r,ref:t})});KE.displayName=Iz;var QE=HE,YE=WE,Dz=KE;const a0=p.forwardRef(({className:e,...t},n)=>s.jsx(QE,{className:Q("grid gap-2",e),...t,ref:n}));a0.displayName=QE.displayName;const o0=p.forwardRef(({className:e,...t},n)=>s.jsx(YE,{ref:n,className:Q("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Dz,{className:"flex items-center justify-center",children:s.jsx(QS,{className:"h-2.5 w-2.5 fill-current text-current"})})}));o0.displayName=YE.displayName;const Oz=()=>{var h,f;const[e,t]=p.useState(""),n=Rt(),{logout:r,getUserName:i,getUserEmail:a}=Dr(),o=((h=i())==null?void 0:h.split(" ")[0])||((f=a())==null?void 0:f.split("@")[0])||"Teacher",l=[{id:"jazz",title:"Jazz Music",description:"Focuses on jazz theory, improvisation, and ensemble playing.",icon:Mp},{id:"classical",title:"Classical Music",description:"Covers classical theory, repertoire, and performance techniques.",icon:eC},{id:"pop",title:"Pop Music",description:"Explores contemporary popular music theory, songwriting, and performance.",icon:kO},{id:"gmat",title:"GMAT",description:"Prepares students for the Graduate Management Admission Test, focusing on analytical, quantitative, verbal, and integrated reasoning skills.",icon:Pt},{id:"ielts",title:"IELTS",description:"Prepares students for the International English Language Testing System, focusing on listening, reading, writing, and speaking skills.",icon:Pt}],c=()=>{n("/teacher/dashboard")},d=()=>{n("/teacher/dashboard")},u=()=>{r()};return s.jsxs("div",{className:"min-h-screen bg-card",children:[s.jsx("header",{className:"bg-primary shadow-lg",children:s.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[s.jsx("div",{className:"text-primary-foreground text-2xl font-bold",children:"Gemeos"}),s.jsx(U,{variant:"outline",className:"border-primary-foreground text-primary-foreground bg-transparent hover:bg-primary-foreground hover:text-primary",onClick:u,children:"Logout"})]})}),s.jsxs("main",{className:"container mx-auto px-4 py-12 max-w-4xl",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("h1",{className:"text-4xl font-bold text-foreground mb-4",children:["Welcome, ",o,"! Let's Get Started."]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"To personalize your Gemeos experience, please choose your primary teaching domain. You can always add or manage additional domains later in Settings."})]}),s.jsx("div",{className:"mb-8",children:s.jsx(a0,{value:e,onValueChange:t,children:s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:l.map(m=>s.jsxs("div",{children:[s.jsx(o0,{value:m.id,id:m.id,className:"sr-only"}),s.jsx(xe,{htmlFor:m.id,className:"cursor-pointer",children:s.jsx(te,{className:`transition-all duration-200 hover:shadow-lg border-2 ${e===m.id?"border-accent bg-accent/5 shadow-md":"border-border hover:border-accent/50"}`,children:s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`p-3 rounded-full ${e===m.id?"bg-accent/20":"bg-muted"}`,children:s.jsx(m.icon,{className:`h-6 w-6 ${e===m.id?"text-accent":"text-muted-foreground"}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:m.title}),s.jsx("p",{className:"text-muted-foreground",children:m.description})]}),s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${e===m.id?"border-accent bg-accent":"border-muted-foreground"}`,children:e===m.id&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})})})})]},m.id))})})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[s.jsx(U,{onClick:c,disabled:!e,className:"bg-accent hover:bg-accent/90 text-accent-foreground px-8 py-3 text-lg font-semibold",size:"lg",children:"Continue"}),s.jsx(U,{variant:"ghost",onClick:d,className:"text-muted-foreground hover:text-foreground",children:"Skip for Now"})]})]})]})};var l0="Tabs",[Mz,BY]=wn(l0,[Xl]),XE=Xl(),[Lz,c0]=Mz(l0),JE=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Yl(l),[h,f]=xr({prop:r,onChange:i,defaultProp:a});return s.jsx(Lz,{scope:n,baseId:pr(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:s.jsx(je.div,{dir:u,"data-orientation":o,...d,ref:t})})});JE.displayName=l0;var ZE="TabsList",e2=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=c0(ZE,n),o=XE(n);return s.jsx(n0,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(je.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});e2.displayName=ZE;var t2="TabsTrigger",n2=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,o=c0(t2,n),l=XE(n),c=i2(o.baseId,r),d=a2(o.baseId,r),u=r===o.value;return s.jsx(r0,{asChild:!0,...l,focusable:!i,active:u,children:s.jsx(je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:ae(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ae(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ae(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});n2.displayName=t2;var r2="TabsContent",s2=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=e,l=c0(r2,n),c=i2(l.baseId,r),d=a2(l.baseId,r),u=r===l.value,h=p.useRef(u);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(Vt,{present:i||u,children:({present:f})=>s.jsx(je.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});s2.displayName=r2;function i2(e,t){return`${e}-trigger-${t}`}function a2(e,t){return`${e}-content-${t}`}var $z=JE,o2=e2,l2=n2,c2=s2;const ri=$z,Ps=p.forwardRef(({className:e,...t},n)=>s.jsx(o2,{ref:n,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ps.displayName=o2.displayName;const et=p.forwardRef(({className:e,...t},n)=>s.jsx(l2,{ref:n,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));et.displayName=l2.displayName;const tt=p.forwardRef(({className:e,...t},n)=>s.jsx(c2,{ref:n,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));tt.displayName=c2.displayName;const Fz=to("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ve({className:e,variant:t,...n}){return s.jsx("div",{className:Q(Fz({variant:t}),e),...n})}function Bx(e,[t,n]){return Math.min(n,Math.max(t,e))}var zz=[" ","Enter","ArrowUp","ArrowDown"],Uz=[" ","Enter"],Hd="Select",[ff,mf,Bz]=Rp(Hd),[Jl,qY]=wn(Hd,[Bz,oa]),gf=oa(),[qz,la]=Jl(Hd),[Vz,Hz]=Jl(Hd),d2=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m,form:x}=e,g=gf(t),[b,v]=p.useState(null),[y,w]=p.useState(null),[k,S]=p.useState(!1),C=Yl(d),[N=!1,j]=xr({prop:r,defaultProp:i,onChange:a}),[_,E]=xr({prop:o,defaultProp:l,onChange:c}),A=p.useRef(null),R=b?x||!!b.closest("form"):!0,[$,B]=p.useState(new Set),F=Array.from($).map(z=>z.props.value).join(";");return s.jsx(Bp,{...g,children:s.jsxs(qz,{required:m,scope:t,trigger:b,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:pr(),value:_,onValueChange:E,open:N,onOpenChange:j,dir:C,triggerPointerDownPosRef:A,disabled:f,children:[s.jsx(ff.Provider,{scope:t,children:s.jsx(Vz,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(z=>{B(q=>new Set(q).add(z))},[]),onNativeOptionRemove:p.useCallback(z=>{B(q=>{const D=new Set(q);return D.delete(z),D})},[]),children:n})}),R?s.jsxs(O2,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:_,onChange:z=>E(z.target.value),disabled:f,form:x,children:[_===void 0?s.jsx("option",{value:""}):null,Array.from($)]},F):null]})})};d2.displayName=Hd;var u2="SelectTrigger",h2=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=gf(n),o=la(u2,n),l=o.disabled||r,c=$e(t,o.onTriggerChange),d=mf(n),u=p.useRef("touch"),[h,f,m]=M2(g=>{const b=d().filter(w=>!w.disabled),v=b.find(w=>w.value===o.value),y=L2(b,g,v);y!==void 0&&o.onValueChange(y.value)}),x=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Od,{asChild:!0,...a,children:s.jsx(je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":D2(o.value)?"":void 0,...i,ref:c,onClick:ae(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&x(g)}),onPointerDown:ae(i.onPointerDown,g=>{u.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:ae(i.onKeyDown,g=>{const b=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===" ")&&zz.includes(g.key)&&(x(),g.preventDefault())})})})});h2.displayName=u2;var p2="SelectValue",f2=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=e,c=la(p2,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=$e(t,c.onValueNodeChange);return qt(()=>{d(u)},[d,u]),s.jsx(je.span,{...l,ref:h,style:{pointerEvents:"none"},children:D2(c.value)?s.jsx(s.Fragment,{children:o}):a})});f2.displayName=p2;var Gz="SelectIcon",m2=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return s.jsx(je.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});m2.displayName=Gz;var Wz="SelectPortal",g2=e=>s.jsx($l,{asChild:!0,...e});g2.displayName=Wz;var Ka="SelectContent",x2=p.forwardRef((e,t)=>{const n=la(Ka,e.__scopeSelect),[r,i]=p.useState();if(qt(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Xs.createPortal(s.jsx(v2,{scope:e.__scopeSelect,children:s.jsx(ff.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(y2,{...e,ref:t})});x2.displayName=Ka;var Vr=10,[v2,ca]=Jl(Ka),Kz="SelectContentImpl",y2=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:b,...v}=e,y=la(Ka,n),[w,k]=p.useState(null),[S,C]=p.useState(null),N=$e(t,X=>k(X)),[j,_]=p.useState(null),[E,A]=p.useState(null),R=mf(n),[$,B]=p.useState(!1),F=p.useRef(!1);p.useEffect(()=>{if(w)return zd(w)},[w]),cf();const z=p.useCallback(X=>{const[ne,...se]=R().map(ge=>ge.ref.current),[fe]=se.slice(-1),de=document.activeElement;for(const ge of X)if(ge===de||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===ne&&S&&(S.scrollTop=0),ge===fe&&S&&(S.scrollTop=S.scrollHeight),ge==null||ge.focus(),document.activeElement!==de))return},[R,S]),q=p.useCallback(()=>z([j,w]),[z,j,w]);p.useEffect(()=>{$&&q()},[$,q]);const{onOpenChange:D,triggerPointerDownPosRef:I}=y;p.useEffect(()=>{if(w){let X={x:0,y:0};const ne=fe=>{var de,ge;X={x:Math.abs(Math.round(fe.pageX)-(((de=I.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((ge=I.current)==null?void 0:ge.y)??0))}},se=fe=>{X.x<=10&&X.y<=10?fe.preventDefault():w.contains(fe.target)||D(!1),document.removeEventListener("pointermove",ne),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",se,{capture:!0})}}},[w,D,I]),p.useEffect(()=>{const X=()=>D(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[D]);const[T,H]=M2(X=>{const ne=R().filter(de=>!de.disabled),se=ne.find(de=>de.ref.current===document.activeElement),fe=L2(ne,X,se);fe&&setTimeout(()=>fe.ref.current.focus())}),O=p.useCallback((X,ne,se)=>{const fe=!F.current&&!se;(y.value!==void 0&&y.value===ne||fe)&&(_(X),fe&&(F.current=!0))},[y.value]),P=p.useCallback(()=>w==null?void 0:w.focus(),[w]),Z=p.useCallback((X,ne,se)=>{const fe=!F.current&&!se;(y.value!==void 0&&y.value===ne||fe)&&A(X)},[y.value]),ee=r==="popper"?qx:w2,W=ee===qx?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:b}:{};return s.jsx(v2,{scope:n,content:w,viewport:S,onViewportChange:C,itemRefCallback:O,selectedItem:j,onItemLeave:P,itemTextRefCallback:Z,focusSelectedItem:q,selectedItemText:E,position:r,isPositioned:$,searchRef:T,children:s.jsx(Fd,{as:Cn,allowPinchZoom:!0,children:s.jsx($d,{asChild:!0,trapped:y.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:ae(i,X=>{var ne;(ne=y.trigger)==null||ne.focus({preventScroll:!0}),X.preventDefault()}),children:s.jsx(eo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(ee,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:X=>X.preventDefault(),...v,...W,onPlaced:()=>B(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ae(v.onKeyDown,X=>{const ne=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!ne&&X.key.length===1&&H(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let fe=R().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(X.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const de=X.target,ge=fe.indexOf(de);fe=fe.slice(ge+1)}setTimeout(()=>z(fe)),X.preventDefault()}})})})})})})});y2.displayName=Kz;var Qz="SelectItemAlignedPosition",w2=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=la(Ka,n),o=ca(Ka,n),[l,c]=p.useState(null),[d,u]=p.useState(null),h=$e(t,N=>u(N)),f=mf(n),m=p.useRef(!1),x=p.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:v,focusSelectedItem:y}=o,w=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&b&&v){const N=a.trigger.getBoundingClientRect(),j=d.getBoundingClientRect(),_=a.valueNode.getBoundingClientRect(),E=v.getBoundingClientRect();if(a.dir!=="rtl"){const de=E.left-j.left,ge=_.left-de,Ue=N.left-ge,Ie=N.width+Ue,De=Math.max(Ie,j.width),Se=window.innerWidth-Vr,Ke=Bx(ge,[Vr,Math.max(Vr,Se-De)]);l.style.minWidth=Ie+"px",l.style.left=Ke+"px"}else{const de=j.right-E.right,ge=window.innerWidth-_.right-de,Ue=window.innerWidth-N.right-ge,Ie=N.width+Ue,De=Math.max(Ie,j.width),Se=window.innerWidth-Vr,Ke=Bx(ge,[Vr,Math.max(Vr,Se-De)]);l.style.minWidth=Ie+"px",l.style.right=Ke+"px"}const A=f(),R=window.innerHeight-Vr*2,$=g.scrollHeight,B=window.getComputedStyle(d),F=parseInt(B.borderTopWidth,10),z=parseInt(B.paddingTop,10),q=parseInt(B.borderBottomWidth,10),D=parseInt(B.paddingBottom,10),I=F+z+$+D+q,T=Math.min(b.offsetHeight*5,I),H=window.getComputedStyle(g),O=parseInt(H.paddingTop,10),P=parseInt(H.paddingBottom,10),Z=N.top+N.height/2-Vr,ee=R-Z,W=b.offsetHeight/2,X=b.offsetTop+W,ne=F+z+X,se=I-ne;if(ne<=Z){const de=A.length>0&&b===A[A.length-1].ref.current;l.style.bottom="0px";const ge=d.clientHeight-g.offsetTop-g.offsetHeight,Ue=Math.max(ee,W+(de?P:0)+ge+q),Ie=ne+Ue;l.style.height=Ie+"px"}else{const de=A.length>0&&b===A[0].ref.current;l.style.top="0px";const Ue=Math.max(Z,F+g.offsetTop+(de?O:0)+W)+se;l.style.height=Ue+"px",g.scrollTop=ne-Z+g.offsetTop}l.style.margin=`${Vr}px 0`,l.style.minHeight=T+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,d,g,b,v,a.dir,r]);qt(()=>w(),[w]);const[k,S]=p.useState();qt(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const C=p.useCallback(N=>{N&&x.current===!0&&(w(),y==null||y(),x.current=!1)},[w,y]);return s.jsx(Xz,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:s.jsx(je.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});w2.displayName=Qz;var Yz="SelectPopperPosition",qx=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Vr,...a}=e,o=gf(n);return s.jsx(qp,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qx.displayName=Yz;var[Xz,d0]=Jl(Ka,{}),Vx="SelectViewport",b2=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=ca(Vx,n),o=d0(Vx,n),l=$e(t,a.onViewportChange),c=p.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(ff.Slot,{scope:n,children:s.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ae(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-u.scrollTop);if(m>0){const x=window.innerHeight-Vr*2,g=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),v=Math.max(g,b);if(v<x){const y=v+m,w=Math.min(x,y),k=y-w;h.style.height=w+"px",h.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});b2.displayName=Vx;var j2="SelectGroup",[Jz,Zz]=Jl(j2),e8=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=pr();return s.jsx(Jz,{scope:n,id:i,children:s.jsx(je.div,{role:"group","aria-labelledby":i,...r,ref:t})})});e8.displayName=j2;var N2="SelectLabel",_2=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Zz(N2,n);return s.jsx(je.div,{id:i.id,...r,ref:t})});_2.displayName=N2;var np="SelectItem",[t8,S2]=Jl(np),C2=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,l=la(np,n),c=ca(np,n),d=l.value===r,[u,h]=p.useState(a??""),[f,m]=p.useState(!1),x=$e(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,r,i)}),g=pr(),b=p.useRef("touch"),v=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(t8,{scope:n,value:r,disabled:i,textId:g,isSelected:d,onItemTextChange:p.useCallback(y=>{h(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(ff.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:s.jsx(je.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:ae(o.onFocus,()=>m(!0)),onBlur:ae(o.onBlur,()=>m(!1)),onClick:ae(o.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:ae(o.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:ae(o.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:ae(o.onPointerMove,y=>{var w;b.current=y.pointerType,i?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ae(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:ae(o.onKeyDown,y=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&y.key===" "||(Uz.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});C2.displayName=np;var Cc="SelectItemText",k2=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,o=la(Cc,n),l=ca(Cc,n),c=S2(Cc,n),d=Hz(Cc,n),[u,h]=p.useState(null),f=$e(t,v=>h(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),m=u==null?void 0:u.textContent,x=p.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=d;return qt(()=>(g(x),()=>b(x)),[g,b,x]),s.jsxs(s.Fragment,{children:[s.jsx(je.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Xs.createPortal(a.children,o.valueNode):null]})});k2.displayName=Cc;var E2="SelectItemIndicator",P2=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return S2(E2,n).isSelected?s.jsx(je.span,{"aria-hidden":!0,...r,ref:t}):null});P2.displayName=E2;var Hx="SelectScrollUpButton",T2=p.forwardRef((e,t)=>{const n=ca(Hx,e.__scopeSelect),r=d0(Hx,e.__scopeSelect),[i,a]=p.useState(!1),o=$e(t,r.onScrollButtonChange);return qt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(R2,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});T2.displayName=Hx;var Gx="SelectScrollDownButton",A2=p.forwardRef((e,t)=>{const n=ca(Gx,e.__scopeSelect),r=d0(Gx,e.__scopeSelect),[i,a]=p.useState(!1),o=$e(t,r.onScrollButtonChange);return qt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(R2,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});A2.displayName=Gx;var R2=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=ca("SelectScrollButton",n),o=p.useRef(null),l=mf(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),qt(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(je.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:ae(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ae(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ae(i.onPointerLeave,()=>{c()})})}),n8="SelectSeparator",I2=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(je.div,{"aria-hidden":!0,...r,ref:t})});I2.displayName=n8;var Wx="SelectArrow",r8=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=gf(n),a=la(Wx,n),o=ca(Wx,n);return a.open&&o.position==="popper"?s.jsx(Vp,{...i,...r,ref:t}):null});r8.displayName=Wx;function D2(e){return e===""||e===void 0}var O2=p.forwardRef((e,t)=>{const{value:n,...r}=e,i=p.useRef(null),a=$e(t,i),o=hf(n);return p.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[o,n]),s.jsx(Rd,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});O2.displayName="BubbleSelect";function M2(e){const t=St(e),n=p.useRef(""),r=p.useRef(0),i=p.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function L2(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=s8(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function s8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var i8=d2,$2=h2,a8=f2,o8=m2,l8=g2,F2=x2,c8=b2,z2=_2,U2=C2,d8=k2,u8=P2,B2=T2,q2=A2,V2=I2;const dt=i8,ut=a8,ot=p.forwardRef(({className:e,children:t,...n},r)=>s.jsxs($2,{ref:r,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(o8,{asChild:!0,children:s.jsx(Id,{className:"h-4 w-4 opacity-50"})})]}));ot.displayName=$2.displayName;const H2=p.forwardRef(({className:e,...t},n)=>s.jsx(B2,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(xO,{className:"h-4 w-4"})}));H2.displayName=B2.displayName;const G2=p.forwardRef(({className:e,...t},n)=>s.jsx(q2,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Id,{className:"h-4 w-4"})}));G2.displayName=q2.displayName;const lt=p.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>s.jsx(l8,{children:s.jsxs(F2,{ref:i,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(H2,{}),s.jsx(c8,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(G2,{})]})}));lt.displayName=F2.displayName;const h8=p.forwardRef(({className:e,...t},n)=>s.jsx(z2,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));h8.displayName=z2.displayName;const me=p.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(U2,{ref:r,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(u8,{children:s.jsx(Js,{className:"h-4 w-4"})})}),s.jsx(d8,{children:t})]}));me.displayName=U2.displayName;const p8=p.forwardRef(({className:e,...t},n)=>s.jsx(V2,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));p8.displayName=V2.displayName;const si=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:Q("w-full caption-bottom text-sm",e),...t})}));si.displayName="Table";const ii=p.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:Q("[&_tr]:border-b",e),...t}));ii.displayName="TableHeader";const ai=p.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:Q("[&_tr:last-child]:border-0",e),...t}));ai.displayName="TableBody";const f8=p.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));f8.displayName="TableFooter";const wt=p.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:Q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));wt.displayName="TableRow";const Re=p.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Re.displayName="TableHead";const Ee=p.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:Q("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ee.displayName="TableCell";const m8=p.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:Q("mt-4 text-sm text-muted-foreground",e),...t}));m8.displayName="TableCaption";function W2({concepts:e,onConceptClick:t,onConceptDelete:n,onConceptUpdate:r,onAddChild:i,onStartLinking:a,onStartHierarchyChange:o,onManageRelationships:l,showApprovalActions:c=!1,onApproveConcept:d,onRejectConcept:u}){const h=new Map(e.map(g=>[g.id,g])),f=g=>{if(!g)return"–";const b=h.get(g);return b?b.name:"–"},m=g=>{const b=["bg-green-100 text-green-800 border-green-300","bg-green-100 text-green-800 border-green-300","bg-yellow-100 text-yellow-800 border-yellow-300","bg-orange-100 text-orange-800 border-orange-300","bg-red-100 text-red-800 border-red-300"];return b[Math.min(g,b.length-1)]},x=[...e].sort((g,b)=>g.name.localeCompare(b.name));return e.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No concepts found matching your search criteria."})}):s.jsx("div",{className:"overflow-hidden bg-white",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{className:"border-b bg-gray-50",children:[s.jsx(Re,{className:"font-medium text-gray-600 w-12"}),s.jsx(Re,{className:"font-medium text-gray-600",children:"Concept Name"}),s.jsx(Re,{className:"font-medium text-gray-600",children:"Status"}),s.jsx(Re,{className:"font-medium text-gray-600",children:"Level"}),s.jsx(Re,{className:"font-medium text-gray-600",children:"Parent"}),s.jsx(Re,{className:"font-medium text-gray-600 w-32",children:"Actions"})]})}),s.jsx(ai,{children:x.map(g=>s.jsxs(wt,{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",onClick:()=>t==null?void 0:t(g),children:[s.jsx(Ee,{onClick:b=>b.stopPropagation(),children:s.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded-full bg-white"})}),s.jsx(Ee,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:g.name}),g.description&&s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:g.description})]})}),s.jsx(Ee,{children:s.jsx(ve,{variant:g.status==="approved"||g.status==="confirmed"?"default":"secondary",className:g.status==="approved"||g.status==="confirmed"?"bg-green-100 text-green-800 hover:bg-green-100 border-green-300":g.status==="suggested"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100 border-yellow-300":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-300",children:g.status==="approved"||g.status==="confirmed"?"Approved":g.status==="suggested"?"Suggested":g.status})}),s.jsx(Ee,{children:s.jsxs(ve,{variant:"outline",className:`${m(g.difficulty_level??0)} border`,children:["L",g.difficulty_level??0]})}),s.jsx(Ee,{className:"text-muted-foreground",children:f(g.parent_concept_id)}),s.jsx(Ee,{onClick:b=>b.stopPropagation(),children:s.jsx("div",{className:"flex items-center gap-1",children:c&&g.status==="suggested"?s.jsxs(s.Fragment,{children:[s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),d==null||d(g.id)},className:"h-7 w-7 p-0 hover:bg-green-50 text-green-600 hover:text-green-700 transition-colors",title:"Approve concept",children:s.jsx(Js,{className:"h-3.5 w-3.5"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),u==null||u(g.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Reject concept",children:s.jsx(Bt,{className:"h-3.5 w-3.5"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),t==null||t(g)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Edit concept",children:s.jsx(Lp,{className:"h-3.5 w-3.5 text-gray-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),i==null||i(g.id)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Add child concept",children:s.jsx(er,{className:"h-3.5 w-3.5 text-green-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),o==null||o(g)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Hierarchy management",children:s.jsx(cd,{className:"h-3.5 w-3.5 text-purple-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),l==null||l(g)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Manage relationships",children:s.jsx(Sy,{className:"h-3.5 w-3.5 text-blue-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),n==null||n(g.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Delete concept",children:s.jsx(Ns,{className:"h-3.5 w-3.5"})})]})})})]},g.id))})]})})}const Rr=p.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:Q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Rr.displayName="Textarea";var g8="Separator",Cj="horizontal",x8=["horizontal","vertical"],K2=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=Cj,...i}=e,a=v8(r)?r:Cj,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(je.div,{"data-orientation":a,...l,...i,ref:t})});K2.displayName=g8;function v8(e){return x8.includes(e)}var Q2=K2;const mr=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>s.jsx(Q2,{ref:i,decorative:n,orientation:t,className:Q("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));mr.displayName=Q2.displayName;const y8=({concept:e,concepts:t,prerequisites:n,onClose:r,onSave:i,onDelete:a})=>{const[o,l]=p.useState(e),[c,d]=p.useState(!1);p.useEffect(()=>{l(e),d(!1)},[e]);const u=(w,k)=>{l(S=>({...S,[w]:k})),d(!0)},h=(w,k)=>{l(S=>({...S,metadata:{...S.metadata,[w]:k}})),d(!0)},f=()=>{i(o)},m=()=>{const w={...o,status:"confirmed"};l(w),i(w)},x=()=>{a(o.id)},g=w=>{switch(w){case"confirmed":return"default";case"ai_suggested":return"secondary";case"pending_review":return"outline";default:return"outline"}},b=t.filter(w=>w.id!==e.id&&w.parent_concept_id!==e.id),y=n.filter(w=>w.concept_id===e.id).map(w=>t.find(k=>k.id===w.prerequisite_concept_id)).filter(Boolean);return s.jsx("div",{className:"fixed inset-y-0 right-0 w-96 bg-background border-l shadow-lg z-50 overflow-y-auto",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Edit Concept"}),s.jsx(U,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(Bt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{variant:g(o.status),children:o.status.replace("_"," ")}),o.status==="ai_suggested"&&s.jsx("span",{className:"text-sm text-muted-foreground",children:"AI Suggested"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"name",children:"Concept Name"}),s.jsx(Te,{id:"name",value:o.name,onChange:w=>u("name",w.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"description",children:"Description"}),s.jsx(Rr,{id:"description",value:o.description||"",onChange:w=>u("description",w.target.value),className:"mt-1",rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"parent",children:"Parent Concept"}),s.jsxs(dt,{value:o.parent_concept_id||"none",onValueChange:w=>u("parent_concept_id",w==="none"?void 0:w),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ut,{})}),s.jsxs(lt,{children:[s.jsx(me,{value:"none",children:"No Parent (Root Concept)"}),b.map(w=>s.jsx(me,{value:w.id,children:w.name},w.id))]})]})]})]}),s.jsx(mr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Metadata"}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"type",children:"Type"}),s.jsxs(dt,{value:o.metadata.type||"theoretical",onValueChange:w=>h("type",w),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ut,{})}),s.jsxs(lt,{children:[s.jsx(me,{value:"theoretical",children:"Theoretical"}),s.jsx(me,{value:"practical",children:"Practical"}),s.jsx(me,{value:"stylistic",children:"Stylistic"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"difficulty",children:"Difficulty"}),s.jsxs(dt,{value:o.metadata.difficulty||"beginner",onValueChange:w=>h("difficulty",w),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ut,{})}),s.jsxs(lt,{children:[s.jsx(me,{value:"beginner",children:"Beginner"}),s.jsx(me,{value:"intermediate",children:"Intermediate"}),s.jsx(me,{value:"advanced",children:"Advanced"})]})]})]})]}),s.jsx(mr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Prerequisites"}),s.jsxs(U,{variant:"outline",size:"sm",children:[s.jsx(er,{className:"h-4 w-4 mr-1"}),"Add"]})]}),y.length>0?s.jsx("div",{className:"space-y-2",children:y.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[s.jsx("span",{className:"text-sm",children:w.name}),s.jsx(U,{variant:"ghost",size:"sm",children:s.jsx(Bt,{className:"h-3 w-3"})})]},w.id))}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"No prerequisites set"})]}),s.jsx(mr,{}),s.jsxs("div",{className:"space-y-3",children:[o.status==="ai_suggested"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(U,{onClick:m,className:"flex-1",variant:"default",children:[s.jsx(Js,{className:"h-4 w-4 mr-2"}),"Approve"]}),s.jsx(U,{onClick:x,variant:"destructive",className:"flex-1",children:"Reject"})]}),s.jsxs(U,{onClick:f,disabled:!c,className:"w-full",variant:c?"default":"secondary",children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(U,{onClick:()=>{const w={...o,id:"",name:"",description:"",parent_concept_id:o.id,status:"confirmed"};console.log("Add sub-concept:",w)},variant:"outline",className:"flex-1",children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Sub-Concept"]}),s.jsx(U,{onClick:()=>a(o.id),variant:"outline",size:"default",className:"text-destructive hover:text-destructive",children:s.jsx(Ns,{className:"h-4 w-4"})})]})]})]})})};function w8(e){return mt({queryKey:["difficulty-level-labels",e||"global"],queryFn:async()=>{console.log("🔍 Fetching difficulty labels for domainId:",e);const{data:t,error:n}=await L.from("difficulty_level_labels").select("*");if(n)throw console.error("Error fetching difficulty level labels:",n),n;return console.log("🔍 Difficulty labels fetched:",t),(t??[]).sort((i,a)=>i.display_order!==a.display_order?i.display_order-a.display_order:i.level_value-a.level_value)},meta:{onError:t=>{console.error("useDifficultyLabels query error",t)}},staleTime:6e4})}const Y2=({concepts:e,parentConceptId:t,domainId:n,onClose:r,onSave:i})=>{console.log("🔍 AddConceptModal props:",{parentConceptId:t,domainId:n,conceptsCount:e.length});const{data:a=[]}=w8(n),o=[{level_value:1,label:"Introductory"},{level_value:2,label:"Beginner"},{level_value:3,label:"Intermediate"},{level_value:4,label:"Advanced"},{level_value:5,label:"Expert"},{level_value:6,label:"Mastery"}],l=a.length>0?a:o,[c,d]=p.useState({name:"",description:"",parent_concept_id:t||"",difficulty_level:1,metadata:{}});p.useEffect(()=>{l.length>0&&d(v=>({...v,difficulty_level:l[0].level_value}))},[l]),p.useEffect(()=>{console.log("🔍 parentConceptId prop changed:",t),d(v=>{const y={...v,parent_concept_id:t||""};return console.log("🔍 Updated form data:",y),y})},[t]);const[u,h]=p.useState({}),f=(v,y)=>{d(w=>({...w,[v]:y})),u[v]&&h(w=>({...w,[v]:""}))},m=v=>{d(y=>({...y,difficulty_level:v}))},x=()=>{const v={};return c.name.trim()||(v.name="Concept name is required"),c.name.trim().length<3&&(v.name="Concept name must be at least 3 characters"),e.find(w=>w.name.toLowerCase()===c.name.toLowerCase().trim())&&(v.name="A concept with this name already exists"),h(v),Object.keys(v).length===0},g=v=>{if(v.preventDefault(),!x())return;if(!n){h({domain_id:"Domain ID is required"});return}const y={name:c.name.trim(),description:c.description.trim()||null,domain_id:n||"",parent_concept_id:c.parent_concept_id||null,status:"approved",generation_source:"human",source:"human",source_file_id:null,difficulty_level:c.difficulty_level,metadata:c.metadata||{}};i(y)},b=e;return s.jsx(on,{open:!0,onOpenChange:r,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Create New Learning Concept"}),s.jsx(Qn,{children:"Add a new concept to your curriculum. You can organize it under a parent concept or create it as a root concept."})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"concept-name",children:"Concept Name *"}),s.jsx(Te,{id:"concept-name",value:c.name,onChange:v=>f("name",v.target.value),className:`mt-1 ${u.name?"border-destructive":""}`,placeholder:"e.g., Major Scales, Chord Progressions"}),u.name&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:u.name})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"concept-description",children:"Description"}),s.jsx(Rr,{id:"concept-description",value:c.description,onChange:v=>f("description",v.target.value),className:"mt-1",placeholder:"Describe what this concept covers...",rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"parent-concept",children:"Parent Concept"}),s.jsxs(dt,{value:c.parent_concept_id,onValueChange:v=>f("parent_concept_id",v==="none"?"":v),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ut,{placeholder:"Select parent concept (optional)"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"none",children:"No Parent (Root Concept)"}),b.map(v=>s.jsx(me,{value:v.id,children:v.name},v.id))]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"concept-difficulty",children:"Difficulty"}),s.jsxs(dt,{value:c.difficulty_level.toString(),onValueChange:v=>m(parseInt(v)),children:[s.jsx(ot,{className:"mt-1",children:s.jsx(ut,{})}),s.jsx(lt,{children:l.map(v=>s.jsx(me,{value:v.level_value.toString(),children:v.label},v.level_value))})]})]}),s.jsxs(Gi,{children:[s.jsx(U,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),s.jsx(U,{type:"submit",children:"Create Concept"})]})]})]})})},b8=to("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Yn=p.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Q(b8({variant:t}),e),...n}));Yn.displayName="Alert";const Yo=p.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:Q("mb-1 font-medium leading-none tracking-tight",e),...t}));Yo.displayName="AlertTitle";const Xn=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Q("text-sm [&_p]:leading-relaxed",e),...t}));Xn.displayName="AlertDescription";function j8(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...x}=h,g=(f==null?void 0:f[e][c])||l,b=p.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:m})}function u(h,f){const m=(f==null?void 0:f[e][c])||l,x=p.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,N8(i,...t)]}function N8(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var u0="Progress",h0=100,[_8,VY]=j8(u0),[S8,C8]=_8(u0),X2=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=k8,...o}=e;(i||i===0)&&!kj(i)&&console.error(E8(`${i}`,"Progress"));const l=kj(i)?i:h0;r!==null&&!Ej(r,l)&&console.error(P8(`${r}`,"Progress"));const c=Ej(r,l)?r:null,d=rp(c)?a(c,l):void 0;return s.jsx(S8,{scope:n,value:c,max:l,children:s.jsx(je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":rp(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":eP(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});X2.displayName=u0;var J2="ProgressIndicator",Z2=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=C8(J2,n);return s.jsx(je.div,{"data-state":eP(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});Z2.displayName=J2;function k8(e,t){return`${Math.round(e/t*100)}%`}function eP(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function rp(e){return typeof e=="number"}function kj(e){return rp(e)&&!isNaN(e)&&e>0}function Ej(e,t){return rp(e)&&!isNaN(e)&&e<=t&&e>=0}function E8(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${h0}\`.`}function P8(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${h0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var tP=X2,T8=Z2;const $a=p.forwardRef(({className:e,value:t,...n},r)=>s.jsx(tP,{ref:r,className:Q("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:s.jsx(T8,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));$a.displayName=tP.displayName;var nP={exports:{}},A8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",R8=A8,I8=R8;function rP(){}function sP(){}sP.resetWarningCache=rP;var D8=function(){function e(r,i,a,o,l,c){if(c!==I8){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:sP,resetWarningCache:rP};return n.PropTypes=n,n};nP.exports=D8();var O8=nP.exports;const pt=Dl(O8),M8=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Al(e,t,n){const r=L8(e),{webkitRelativePath:i}=e,a=typeof t=="string"?t:typeof i=="string"&&i.length>0?i:`./${e.name}`;return typeof r.path!="string"&&Pj(r,"path",a),Pj(r,"relativePath",a),r}function L8(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const r=t.split(".").pop().toLowerCase(),i=M8.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}function Pj(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const $8=[".DS_Store","Thumbs.db"];function F8(e){return so(this,void 0,void 0,function*(){return sp(e)&&z8(e.dataTransfer)?V8(e.dataTransfer,e.type):U8(e)?B8(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?q8(e):[]})}function z8(e){return sp(e)}function U8(e){return sp(e)&&sp(e.target)}function sp(e){return typeof e=="object"&&e!==null}function B8(e){return Kx(e.target.files).map(t=>Al(t))}function q8(e){return so(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>Al(n))})}function V8(e,t){return so(this,void 0,void 0,function*(){if(e.items){const n=Kx(e.items).filter(i=>i.kind==="file");if(t!=="drop")return n;const r=yield Promise.all(n.map(H8));return Tj(iP(r))}return Tj(Kx(e.files).map(n=>Al(n)))})}function Tj(e){return e.filter(t=>$8.indexOf(t.name)===-1)}function Kx(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function H8(e){if(typeof e.webkitGetAsEntry!="function")return Aj(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?aP(t):Aj(e,t)}function iP(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?iP(n):[n]],[])}function Aj(e,t){return so(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const a=yield e.getAsFileSystemHandle();if(a===null)throw new Error(`${e} is not a File`);if(a!==void 0){const o=yield a.getFile();return o.handle=a,Al(o)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return Al(r,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function G8(e){return so(this,void 0,void 0,function*(){return e.isDirectory?aP(e):W8(e)})}function aP(e){const t=e.createReader();return new Promise((n,r)=>{const i=[];function a(){t.readEntries(o=>so(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(G8));i.push(l),a()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}a()})}function W8(e){return so(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(r=>{const i=Al(r,e.fullPath);t(i)},r=>{n(r)})})})}var Em=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):i===l})}return!0};function Rj(e){return Y8(e)||Q8(e)||lP(e)||K8()}function K8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q8(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Y8(e){if(Array.isArray(e))return Qx(e)}function Ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ij(Object(n),!0).forEach(function(r){oP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ij(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xd(e,t){return Z8(e)||J8(e,t)||lP(e,t)||X8()}function X8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lP(e,t){if(e){if(typeof e=="string")return Qx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qx(e,t)}}function Qx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,l;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function Z8(e){if(Array.isArray(e))return e}var eU=typeof Em=="function"?Em:Em.default,tU="file-invalid-type",nU="file-too-large",rU="file-too-small",sU="too-many-files",iU=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:tU,message:"File type must be ".concat(r)}},Oj=function(t){return{code:nU,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Mj=function(t){return{code:rU,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},aU={code:sU,message:"Too many files"};function cP(e,t){var n=e.type==="application/x-moz-file"||eU(e,t);return[n,n?null:iU(t)]}function dP(e,t,n){if(wa(e.size))if(wa(t)&&wa(n)){if(e.size>n)return[!1,Oj(n)];if(e.size<t)return[!1,Mj(t)]}else{if(wa(t)&&e.size<t)return[!1,Mj(t)];if(wa(n)&&e.size>n)return[!1,Oj(n)]}return[!0,null]}function wa(e){return e!=null}function oU(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,a=e.multiple,o=e.maxFiles,l=e.validator;return!a&&t.length>1||a&&o>=1&&t.length>o?!1:t.every(function(c){var d=cP(c,n),u=xd(d,1),h=u[0],f=dP(c,r,i),m=xd(f,1),x=m[0],g=l?l(c):null;return h&&x&&!g})}function ip(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Lu(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Lj(e){e.preventDefault()}function lU(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function cU(e){return e.indexOf("Edge/")!==-1}function dU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return lU(e)||cU(e)}function ls(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return t.some(function(l){return!ip(r)&&l&&l.apply(void 0,[r].concat(a)),ip(r)})}}function uU(){return"showOpenFilePicker"in window}function hU(e){if(wa(e)){var t=Object.entries(e).filter(function(n){var r=xd(n,2),i=r[0],a=r[1],o=!0;return uP(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(hP))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=xd(r,2),a=i[0],o=i[1];return Dj(Dj({},n),{},oP({},a,o))},{});return[{description:"Files",accept:t}]}return e}function pU(e){if(wa(e))return Object.entries(e).reduce(function(t,n){var r=xd(n,2),i=r[0],a=r[1];return[].concat(Rj(t),[i],Rj(a))},[]).filter(function(t){return uP(t)||hP(t)}).join(",")}function fU(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function mU(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function uP(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function hP(e){return/^.*\.[\w]+$/.test(e)}var gU=["children"],xU=["open"],vU=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],yU=["refKey","onChange","onClick"];function wU(e){return NU(e)||jU(e)||pP(e)||bU()}function bU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NU(e){if(Array.isArray(e))return Yx(e)}function Pm(e,t){return CU(e)||SU(e,t)||pP(e,t)||_U()}function _U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pP(e,t){if(e){if(typeof e=="string")return Yx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yx(e,t)}}function Yx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SU(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,l;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function CU(e){if(Array.isArray(e))return e}function $j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$j(Object(n),!0).forEach(function(r){Xx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$j(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ap(e,t){if(e==null)return{};var n=kU(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kU(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var p0=p.forwardRef(function(e,t){var n=e.children,r=ap(e,gU),i=xf(r),a=i.open,o=ap(i,xU);return p.useImperativeHandle(t,function(){return{open:a}},[a]),he.createElement(p.Fragment,null,n(Ct(Ct({},o),{},{open:a})))});p0.displayName="Dropzone";var fP={disabled:!1,getFilesFromEvent:F8,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};p0.defaultProps=fP;p0.propTypes={children:pt.func,accept:pt.objectOf(pt.arrayOf(pt.string)),multiple:pt.bool,preventDropOnDocument:pt.bool,noClick:pt.bool,noKeyboard:pt.bool,noDrag:pt.bool,noDragEventsBubbling:pt.bool,minSize:pt.number,maxSize:pt.number,maxFiles:pt.number,disabled:pt.bool,getFilesFromEvent:pt.func,onFileDialogCancel:pt.func,onFileDialogOpen:pt.func,useFsAccessApi:pt.bool,autoFocus:pt.bool,onDragEnter:pt.func,onDragLeave:pt.func,onDragOver:pt.func,onDrop:pt.func,onDropAccepted:pt.func,onDropRejected:pt.func,onError:pt.func,validator:pt.func};var Jx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function xf(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ct(Ct({},fP),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,a=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,u=t.onDragLeave,h=t.onDragOver,f=t.onDrop,m=t.onDropAccepted,x=t.onDropRejected,g=t.onFileDialogCancel,b=t.onFileDialogOpen,v=t.useFsAccessApi,y=t.autoFocus,w=t.preventDropOnDocument,k=t.noClick,S=t.noKeyboard,C=t.noDrag,N=t.noDragEventsBubbling,j=t.onError,_=t.validator,E=p.useMemo(function(){return pU(n)},[n]),A=p.useMemo(function(){return hU(n)},[n]),R=p.useMemo(function(){return typeof b=="function"?b:Fj},[b]),$=p.useMemo(function(){return typeof g=="function"?g:Fj},[g]),B=p.useRef(null),F=p.useRef(null),z=p.useReducer(EU,Jx),q=Pm(z,2),D=q[0],I=q[1],T=D.isFocused,H=D.isFileDialogActive,O=p.useRef(typeof window<"u"&&window.isSecureContext&&v&&uU()),P=function(){!O.current&&H&&setTimeout(function(){if(F.current){var be=F.current.files;be.length||(I({type:"closeDialog"}),$())}},300)};p.useEffect(function(){return window.addEventListener("focus",P,!1),function(){window.removeEventListener("focus",P,!1)}},[F,H,$,O]);var Z=p.useRef([]),ee=function(be){B.current&&B.current.contains(be.target)||(be.preventDefault(),Z.current=[])};p.useEffect(function(){return w&&(document.addEventListener("dragover",Lj,!1),document.addEventListener("drop",ee,!1)),function(){w&&(document.removeEventListener("dragover",Lj),document.removeEventListener("drop",ee))}},[B,w]),p.useEffect(function(){return!r&&y&&B.current&&B.current.focus(),function(){}},[B,y,r]);var W=p.useCallback(function(ie){j?j(ie):console.error(ie)},[j]),X=p.useCallback(function(ie){ie.preventDefault(),ie.persist(),Ve(ie),Z.current=[].concat(wU(Z.current),[ie.target]),Lu(ie)&&Promise.resolve(i(ie)).then(function(be){if(!(ip(ie)&&!N)){var V=be.length,Y=V>0&&oU({files:be,accept:E,minSize:o,maxSize:a,multiple:l,maxFiles:c,validator:_}),ye=V>0&&!Y;I({isDragAccept:Y,isDragReject:ye,isDragActive:!0,type:"setDraggedFiles"}),d&&d(ie)}}).catch(function(be){return W(be)})},[i,d,W,N,E,o,a,l,c,_]),ne=p.useCallback(function(ie){ie.preventDefault(),ie.persist(),Ve(ie);var be=Lu(ie);if(be&&ie.dataTransfer)try{ie.dataTransfer.dropEffect="copy"}catch{}return be&&h&&h(ie),!1},[h,N]),se=p.useCallback(function(ie){ie.preventDefault(),ie.persist(),Ve(ie);var be=Z.current.filter(function(Y){return B.current&&B.current.contains(Y)}),V=be.indexOf(ie.target);V!==-1&&be.splice(V,1),Z.current=be,!(be.length>0)&&(I({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Lu(ie)&&u&&u(ie))},[B,u,N]),fe=p.useCallback(function(ie,be){var V=[],Y=[];ie.forEach(function(ye){var Pe=cP(ye,E),Fe=Pm(Pe,2),G=Fe[0],ke=Fe[1],Je=dP(ye,o,a),Lt=Pm(Je,2),$t=Lt[0],K=Lt[1],Le=_?_(ye):null;if(G&&$t&&!Le)V.push(ye);else{var _e=[ke,K];Le&&(_e=_e.concat(Le)),Y.push({file:ye,errors:_e.filter(function(Qe){return Qe})})}}),(!l&&V.length>1||l&&c>=1&&V.length>c)&&(V.forEach(function(ye){Y.push({file:ye,errors:[aU]})}),V.splice(0)),I({acceptedFiles:V,fileRejections:Y,isDragReject:Y.length>0,type:"setFiles"}),f&&f(V,Y,be),Y.length>0&&x&&x(Y,be),V.length>0&&m&&m(V,be)},[I,l,E,o,a,c,f,m,x,_]),de=p.useCallback(function(ie){ie.preventDefault(),ie.persist(),Ve(ie),Z.current=[],Lu(ie)&&Promise.resolve(i(ie)).then(function(be){ip(ie)&&!N||fe(be,ie)}).catch(function(be){return W(be)}),I({type:"reset"})},[i,fe,W,N]),ge=p.useCallback(function(){if(O.current){I({type:"openDialog"}),R();var ie={multiple:l,types:A};window.showOpenFilePicker(ie).then(function(be){return i(be)}).then(function(be){fe(be,null),I({type:"closeDialog"})}).catch(function(be){fU(be)?($(be),I({type:"closeDialog"})):mU(be)?(O.current=!1,F.current?(F.current.value=null,F.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):W(be)});return}F.current&&(I({type:"openDialog"}),R(),F.current.value=null,F.current.click())},[I,R,$,v,fe,W,A,l]),Ue=p.useCallback(function(ie){!B.current||!B.current.isEqualNode(ie.target)||(ie.key===" "||ie.key==="Enter"||ie.keyCode===32||ie.keyCode===13)&&(ie.preventDefault(),ge())},[B,ge]),Ie=p.useCallback(function(){I({type:"focus"})},[]),De=p.useCallback(function(){I({type:"blur"})},[]),Se=p.useCallback(function(){k||(dU()?setTimeout(ge,0):ge())},[k,ge]),Ke=function(be){return r?null:be},Be=function(be){return S?null:Ke(be)},Ce=function(be){return C?null:Ke(be)},Ve=function(be){N&&be.stopPropagation()},dn=p.useMemo(function(){return function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=ie.refKey,V=be===void 0?"ref":be,Y=ie.role,ye=ie.onKeyDown,Pe=ie.onFocus,Fe=ie.onBlur,G=ie.onClick,ke=ie.onDragEnter,Je=ie.onDragOver,Lt=ie.onDragLeave,$t=ie.onDrop,K=ap(ie,vU);return Ct(Ct(Xx({onKeyDown:Be(ls(ye,Ue)),onFocus:Be(ls(Pe,Ie)),onBlur:Be(ls(Fe,De)),onClick:Ke(ls(G,Se)),onDragEnter:Ce(ls(ke,X)),onDragOver:Ce(ls(Je,ne)),onDragLeave:Ce(ls(Lt,se)),onDrop:Ce(ls($t,de)),role:typeof Y=="string"&&Y!==""?Y:"presentation"},V,B),!r&&!S?{tabIndex:0}:{}),K)}},[B,Ue,Ie,De,Se,X,ne,se,de,S,C,r]),Mt=p.useCallback(function(ie){ie.stopPropagation()},[]),Kt=p.useMemo(function(){return function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=ie.refKey,V=be===void 0?"ref":be,Y=ie.onChange,ye=ie.onClick,Pe=ap(ie,yU),Fe=Xx({accept:E,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ke(ls(Y,de)),onClick:Ke(ls(ye,Mt)),tabIndex:-1},V,F);return Ct(Ct({},Fe),Pe)}},[F,n,l,de,r]);return Ct(Ct({},D),{},{isFocused:T&&!r,getRootProps:dn,getInputProps:Kt,rootRef:B,inputRef:F,open:Ke(ge)})}function EU(e,t){switch(t.type){case"focus":return Ct(Ct({},e),{},{isFocused:!0});case"blur":return Ct(Ct({},e),{},{isFocused:!1});case"openDialog":return Ct(Ct({},Jx),{},{isFileDialogActive:!0});case"closeDialog":return Ct(Ct({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ct(Ct({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Ct(Ct({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Ct({},Jx);default:return e}}function Fj(){}const PU=e=>e.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),mP=(e,t=50)=>{const n=t*1024*1024;return e.size>n?{isValid:!1,error:`File size exceeds ${t}MB limit`}:e.name?["application/pdf","text/plain","text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","image/jpeg","image/png","image/gif","audio/mpeg","audio/wav","video/mp4","video/avi"].includes(e.type)?{isValid:!0}:{isValid:!1,error:"File type not supported"}:{isValid:!1,error:"File must have a name"}},op=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]},gP=e=>mt({queryKey:["file-uploads",e],queryFn:async()=>{let t=L.from("file_uploads").select("*").order("uploaded_at",{ascending:!1});e&&(t=t.eq("domain_id",e));const{data:n,error:r}=await t;if(r)throw r;return n},enabled:!!e}),vf=()=>{const[e,t]=p.useState({}),{toast:n}=rt(),r=In(),i=en({mutationFn:async({files:a,domainId:o,domainName:l})=>{const c=[],d=PU(l);for(const u of a){const h=`${u.name}-${Date.now()}`;try{const f=mP(u);if(!f.isValid)throw new Error(f.error);t(y=>({...y,[h]:{file:u,progress:0,status:"uploading"}}));const{data:{session:m}}=await L.auth.getSession();if(!m)throw new Error("No authentication session found");console.log("🔍 useFileUpload - About to upload:",{fileName:u.name,domainSlug:d});const x=new FormData;x.append("file",u),x.append("domainId",o),x.append("domainSlug",d);const{data:g,error:b}=await L.functions.invoke("generic-upload",{body:x,headers:{Authorization:`Bearer ${m.access_token}`}});if(b)throw b;if(!g.success)throw new Error(g.error||"Upload failed");console.log("File uploaded successfully:",{fileName:u.name,gcsPath:g.gcsPath,responsePath:g.storagePath});const v=g;t(y=>({...y,[h]:{file:u,progress:100,status:"completed"}})),c.push(v.upload)}catch(f){throw console.error(`Error uploading ${u.name}:`,f),t(m=>({...m,[h]:{file:u,progress:0,status:"error",error:f.message}})),f}}return c},onSuccess:a=>{n({title:"Upload Successful",description:`${a.length} file(s) uploaded successfully`}),r.invalidateQueries({queryKey:["file-uploads"]}),setTimeout(()=>{t({})},3e3)},onError:a=>{n({title:"Upload Failed",description:a.message,variant:"destructive"})}});return{uploadFiles:i.mutate,isUploading:i.isPending,uploadProgress:e,clearProgress:()=>t({})}},TU=()=>{const{toast:e}=rt(),t=In();return en({mutationFn:async n=>{const{error:r}=await L.from("file_uploads").delete().eq("id",n);if(r)throw r},onSuccess:()=>{e({title:"File Deleted",description:"File upload record has been deleted"}),t.invalidateQueries({queryKey:["file-uploads"]})},onError:n=>{e({title:"Delete Failed",description:n.message,variant:"destructive"})}})},AU=({domainId:e,domainName:t,onUploadComplete:n})=>{const[r,i]=p.useState([]),{uploadFiles:a,isUploading:o,uploadProgress:l}=vf(),c=he.useCallback(v=>{const y=[],w=[];v.forEach(k=>{const S=mP(k);S.isValid?y.push(k):w.push(`${k.name}: ${S.error}`)}),w.length>0&&console.error("File validation errors:",w),i(y)},[]),{getRootProps:d,getInputProps:u,isDragActive:h,fileRejections:f}=xf({onDrop:c,disabled:o,maxSize:50*1024*1024,accept:{"application/pdf":[".pdf"],"text/plain":[".txt"],"text/csv":[".csv"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"audio/mpeg":[".mp3"],"audio/wav":[".wav"],"video/mp4":[".mp4"]}}),m=async()=>{if(r.length!==0)try{await a({files:r,domainId:e,domainName:t}),i([]),n==null||n()}catch(v){console.error("Upload failed:",v)}},x=v=>{i(y=>y.filter((w,k)=>k!==v))},g=Object.entries(l),b=g.length>0;return s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center space-x-2",children:[s.jsx(En,{className:"h-5 w-5"}),s.jsx("span",{children:"Upload Training Materials"})]}),s.jsxs(Me,{children:["Upload files to enhance AI training for the ",s.jsx("strong",{children:t})," domain. Files will be automatically processed and integrated into the learning system."]})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{...d(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-200 ${h?"border-primary bg-primary/5":o?"border-muted bg-muted/20 pointer-events-none opacity-50":"border-border hover:border-primary/50 hover:bg-muted/20"}`,children:[s.jsx("input",{...u()}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(En,{className:`mx-auto h-8 w-8 ${h?"text-primary":"text-muted-foreground"}`}),h?s.jsx("p",{className:"text-primary font-medium",children:"Drop your files here..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium",children:"Drag & drop files here, or click to select"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"PDF, Word, Excel, images, audio, and video files accepted (max 50MB)"})]})]})]}),f.length>0&&s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Xn,{children:s.jsx("div",{className:"space-y-1",children:f.map(({file:v,errors:y})=>{var w;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("strong",{children:[v.name,":"]})," ",(w=y[0])==null?void 0:w.message]},v.name)})})})]}),r.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-medium",children:["Selected Files (",r.length,")"]}),s.jsx("div",{className:"space-y-2",children:r.map((v,y)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(Ws,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium truncate",children:v.name}),s.jsx(ve,{variant:"outline",className:"text-xs",children:op(v.size)})]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>x(y),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:s.jsx(Bt,{className:"h-3 w-3"})})]},y))}),s.jsx(U,{onClick:m,disabled:o||r.length===0,className:"w-full",children:o?"Uploading...":`Upload ${r.length} File${r.length!==1?"s":""}`})]}),b&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Upload Progress"}),g.map(([v,y])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx("span",{className:"text-sm truncate",children:y.file.name}),s.jsxs(ve,{variant:y.status==="completed"?"default":y.status==="error"?"destructive":"secondary",children:[y.status==="completed"&&s.jsx(Lh,{className:"h-3 w-3 mr-1"}),y.status]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:op(y.file.size)})]}),y.status==="uploading"&&s.jsx($a,{value:y.progress,className:"h-2"}),y.error&&s.jsx("p",{className:"text-xs text-destructive",children:y.error})]},v))]}),s.jsxs(Yn,{children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsxs(Xn,{className:"text-sm",children:[s.jsx("strong",{children:"How it works:"})," Your uploaded files will be processed by our AI system to enhance teaching recommendations and generate domain-specific content for the ",t," subject area."]})]})]})]})},RU=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),{toast:i}=rt(),a=async()=>{try{r(!0);const{data:o,error:l}=await L.from("teacher_domains").select(`
          *,
          domain:domains(*)
        `).order("selected_at",{ascending:!1});if(l)throw l;t(o||[])}catch(o){console.error("Error fetching teacher domains:",o),i({title:"Error",description:"Failed to fetch your domain selections",variant:"destructive"})}finally{r(!1)}};return p.useEffect(()=>{a()},[]),{teacherDomains:e,loading:n,refetch:a}},IU=()=>{var N;const[e,t]=p.useState("learning-concepts"),[n,r]=p.useState(null),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,h]=p.useState("all"),{teacherDomains:f,loading:m}=RU(),x=(N=f[0])==null?void 0:N.domain,{data:g=[],isLoading:b,refetch:v}=gP(x==null?void 0:x.id),y=[{id:"1",name:"Basic Music Theory",description:"Fundamental concepts of music including notes, scales, and intervals",domain_id:"music",status:"confirmed",metadata:{type:"theoretical",difficulty:"beginner"},teacher_id:"teacher-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",name:"Major Scales",description:"Understanding major scale patterns and construction",domain_id:"music",parent_concept_id:"1",status:"confirmed",metadata:{type:"theoretical",difficulty:"beginner"},teacher_id:"teacher-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",name:"Chord Progressions",description:"Common chord progressions and their applications",domain_id:"music",parent_concept_id:"2",status:"ai_suggested",metadata:{type:"practical",difficulty:"intermediate"},teacher_id:"teacher-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],w=y.filter(j=>j.status==="ai_suggested").length,k=j=>{r(j),a(!0)},S=()=>{a(!1),r(null)},C=()=>{l(!0)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b bg-card",children:s.jsx("div",{className:"container mx-auto px-6 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Set Up Your Curriculum"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Design and organize your teaching concepts and learning paths"})]}),s.jsx(ve,{variant:"outline",className:"text-sm",children:x?x.name:m?"Loading...":"No Domain Selected"})]})})}),s.jsx("div",{className:"container mx-auto px-6 py-6",children:s.jsxs(ri,{value:e,onValueChange:t,className:"w-full",children:[s.jsxs(Ps,{className:"grid w-full grid-cols-4",children:[s.jsx(et,{value:"training-data",children:"Training Data"}),s.jsx(et,{value:"learning-concepts",children:"Learning Concepts"}),s.jsx(et,{value:"learning-paths",children:"Learning Paths"}),s.jsx(et,{value:"assessments",children:"Assessments"})]}),s.jsx(tt,{value:"training-data",className:"mt-6",children:s.jsx("div",{className:"space-y-6",children:x?s.jsxs(s.Fragment,{children:[s.jsx(AU,{domainId:x.id,domainName:x.name,onUploadComplete:v}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center space-x-2",children:[s.jsx(En,{className:"h-5 w-5"}),s.jsx("span",{children:"Your Training Materials"})]}),s.jsxs(Me,{children:["Files you've uploaded for the ",x.name," domain"]})]}),s.jsx(re,{children:b?s.jsx("p",{className:"text-muted-foreground",children:"Loading your files..."}):g.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(En,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No files uploaded yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload your first training materials to get started"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm font-medium",children:[g.length," file",g.length!==1?"s":""," uploaded"]}),s.jsxs(ve,{variant:"secondary",children:["Total: ",g.reduce((j,_)=>j+_.file_size,0)>0&&Math.round(g.reduce((j,_)=>j+_.file_size,0)/1024/1024*100)/100," MB"]})]}),s.jsxs("div",{className:"grid gap-2",children:[g.slice(0,5).map(j=>{var _,E,A,R;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-lg",children:(_=j.mime_type)!=null&&_.includes("pdf")?"📄":(E=j.mime_type)!=null&&E.includes("image")?"🖼️":(A=j.mime_type)!=null&&A.includes("audio")?"🎵":(R=j.mime_type)!=null&&R.includes("video")?"🎥":"📎"}),s.jsx("span",{className:"text-sm font-medium truncate max-w-[200px]",children:j.file_name})]}),s.jsxs(ve,{variant:"outline",className:"text-xs",children:[Math.round(j.file_size/1024)," KB"]})]},j.id)}),g.length>5&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-2",children:["...and ",g.length-5," more files"]})]})]})})]})]}):s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center space-x-2",children:[s.jsx(jO,{className:"h-5 w-5"}),s.jsx("span",{children:"Select a Domain First"})]}),s.jsx(Me,{children:"You need to select a teaching domain before you can upload training materials."})]}),s.jsx(re,{children:s.jsx(U,{onClick:()=>window.open("/teacher/domain-selection","_self"),className:"w-full sm:w-auto",children:"Go to Domain Selection"})})]})})}),s.jsx(tt,{value:"learning-concepts",className:"mt-6",children:s.jsxs("div",{className:"space-y-6",children:[w>0&&s.jsx(te,{className:"border-accent bg-accent/10",children:s.jsxs(re,{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{variant:"secondary",children:w}),s.jsx("span",{className:"text-sm text-foreground",children:"new AI-suggested concepts to review"})]}),s.jsx(U,{variant:"outline",size:"sm",onClick:()=>h("ai_suggested"),children:"Review Now"})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(Te,{placeholder:"Search concepts...",value:c,onChange:j=>d(j.target.value),className:"pl-10 w-64"})]}),s.jsxs(dt,{value:u,onValueChange:h,children:[s.jsxs(ot,{className:"w-48",children:[s.jsx(Ny,{className:"h-4 w-4 mr-2"}),s.jsx(ut,{})]}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Concepts"}),s.jsx(me,{value:"confirmed",children:"Confirmed Concepts"}),s.jsx(me,{value:"ai_suggested",children:"AI Suggested (Pending)"})]})]})]}),s.jsxs(U,{onClick:C,children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Custom Concept"]})]}),s.jsxs(te,{className:"min-h-[600px]",children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Learning Concepts"}),s.jsx(Me,{children:"Manage and organize your concepts hierarchy. Click on concepts to edit, use actions to approve or reject AI suggestions."})]}),s.jsx(re,{className:"p-6",children:s.jsx(W2,{concepts:y,onConceptClick:k,adminMode:!1})})]})]})}),s.jsx(tt,{value:"learning-paths",className:"mt-6",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Learning Paths"}),s.jsx(Me,{children:"Create structured learning sequences and progression paths"})]}),s.jsx(re,{children:s.jsx("p",{className:"text-muted-foreground",children:"Learning Paths feature coming soon..."})})]})}),s.jsx(tt,{value:"assessments",className:"mt-6",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Assessments"}),s.jsx(Me,{children:"Design quizzes, exercises, and evaluation criteria"})]}),s.jsx(re,{children:s.jsx("p",{className:"text-muted-foreground",children:"Assessments feature coming soon..."})})]})})]})}),i&&n&&s.jsx(y8,{concept:n,concepts:y,prerequisites:[],onClose:S,onSave:j=>{console.log("Save concept:",j),S()},onDelete:j=>{console.log("Delete concept:",j),S()}}),o&&s.jsx(Y2,{concepts:y,domainId:x==null?void 0:x.id,onClose:()=>l(!1),onSave:j=>{console.log("Create concept:",j),l(!1)}})]})},DU=()=>{const e=Rt(),t={totalStudents:24,activeCourses:3,upcomingLessons:5,completedLessons:42},n=[{type:"lesson",title:"Piano Fundamentals - Lesson 3",time:"2 hours ago"},{type:"assessment",title:"Music Theory Quiz completed",time:"1 day ago"},{type:"concept",title:"Added new concept: Chord Progressions",time:"2 days ago"}],r=[{title:"Set Up Curriculum",description:"Create and organize your teaching concepts",action:()=>e("/teacher/settings/curriculum-setup"),icon:Pt},{title:"Select Domains",description:"Choose your teaching specializations",action:()=>e("/teacher/domain-selection"),icon:$h}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Welcome back!"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Here's an overview of your teaching activities"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Total Students"}),s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.totalStudents}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Active Courses"}),s.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.activeCourses}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Across 2 domains"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Upcoming Lessons"}),s.jsx(Fl,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.upcomingLessons}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Completed Lessons"}),s.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.completedLessons}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12 from last month"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Quick Actions"}),s.jsx(Me,{children:"Get started with setting up your teaching environment"})]}),s.jsx(re,{className:"space-y-3",children:r.map((i,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(i.icon,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:i.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]}),s.jsx(U,{onClick:i.action,variant:"outline",size:"sm",children:"Go"})]},a))})]}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Recent Activity"}),s.jsx(Me,{children:"Your latest teaching activities and updates"})]}),s.jsx(re,{className:"space-y-3",children:n.map((i,a)=>s.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{variant:"outline",className:"text-xs",children:i.type}),s.jsx("h4",{className:"font-medium text-sm",children:i.title})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.time})]})},a))})]})]})]})},OU=()=>{const e=[{title:"User Management",description:"Manage student accounts and teacher profiles",icon:Pn,status:"Active",items:["View all users","Manage permissions","Account settings"]},{title:"Content Management",description:"Oversee curricula, concepts, and learning materials",icon:Ws,status:"Active",items:["Review curricula","Manage domains","Content approval"]},{title:"Analytics & Reports",description:"View system metrics and generate reports",icon:jy,status:"Coming Soon",items:["Usage statistics","Performance reports","Export data"]},{title:"System Security",description:"Monitor security settings and access controls",icon:js,status:"Active",items:["Security logs","Access controls","Audit trail"]}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Administration"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage system settings, users, and monitor platform health"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,n)=>s.jsxs(te,{className:"hover:shadow-md transition-shadow",children:[s.jsxs(le,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(t.icon,{className:"h-6 w-6 text-primary"}),s.jsx(ue,{className:"text-lg",children:t.title})]}),s.jsx(ve,{variant:t.status==="Active"?"default":"secondary",children:t.status})]}),s.jsx(Me,{children:t.description})]}),s.jsxs(re,{children:[s.jsx("div",{className:"space-y-2 mb-4",children:t.items.map((r,i)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:r})]},i))}),s.jsx(U,{variant:t.status==="Active"?"default":"secondary",className:"w-full",disabled:t.status!=="Active",children:t.status==="Active"?"Manage":"Coming Soon"})]})]},n))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-5 w-5"}),"Page Permissions"]}),s.jsx(Me,{children:"Manage role-based access control for application pages"})]}),s.jsx(re,{children:s.jsx(U,{asChild:!0,children:s.jsx(dr,{to:"/admin/page-permissions",children:"Manage Permissions"})})})]}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center gap-2",children:[s.jsx(Xi,{className:"h-5 w-5"}),"AI Feedback Settings"]}),s.jsx(Me,{children:"Configure AI training feedback loops for each domain and learning aspect"})]}),s.jsx(re,{children:s.jsx(U,{asChild:!0,children:s.jsx(dr,{to:"/admin/settings/feedback",children:"Manage AI Feedback"})})})]})]}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-5 w-5"}),s.jsx("span",{children:"System Overview"})]}),s.jsx(Me,{children:"Quick overview of platform status and key metrics"})]}),s.jsx(re,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:"156"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:"23"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Teachers"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:"4"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Learning Domains"})]})]})})]})]})};var xP="AlertDialog",[MU,HY]=wn(xP,[lE]),oi=lE(),vP=e=>{const{__scopeAlertDialog:t,...n}=e,r=oi(t);return s.jsx(Zy,{...r,...n,modal:!0})};vP.displayName=xP;var LU="AlertDialogTrigger",yP=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=oi(n);return s.jsx(_E,{...i,...r,ref:t})});yP.displayName=LU;var $U="AlertDialogPortal",wP=e=>{const{__scopeAlertDialog:t,...n}=e,r=oi(t);return s.jsx(e0,{...r,...n})};wP.displayName=$U;var FU="AlertDialogOverlay",bP=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=oi(n);return s.jsx(Ud,{...i,...r,ref:t})});bP.displayName=FU;var Xo="AlertDialogContent",[zU,UU]=MU(Xo),jP=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,a=oi(n),o=p.useRef(null),l=$e(t,o),c=p.useRef(null);return s.jsx(J6,{contentName:Xo,titleName:NP,docsSlug:"alert-dialog",children:s.jsx(zU,{scope:n,cancelRef:c,children:s.jsxs(Bd,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:ae(i.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(xy,{children:r}),s.jsx(qU,{contentRef:o})]})})})});jP.displayName=Xo;var NP="AlertDialogTitle",_P=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=oi(n);return s.jsx(qd,{...i,...r,ref:t})});_P.displayName=NP;var SP="AlertDialogDescription",CP=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=oi(n);return s.jsx(Vd,{...i,...r,ref:t})});CP.displayName=SP;var BU="AlertDialogAction",kP=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=oi(n);return s.jsx(uf,{...i,...r,ref:t})});kP.displayName=BU;var EP="AlertDialogCancel",PP=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=UU(EP,n),a=oi(n),o=$e(t,i);return s.jsx(uf,{...a,...r,ref:o})});PP.displayName=EP;var qU=({contentRef:e})=>{const t=`\`${Xo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Xo}\` by passing a \`${SP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Xo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},VU=vP,HU=yP,GU=wP,TP=bP,AP=jP,RP=kP,IP=PP,DP=_P,OP=CP;const yf=VU,MP=HU,WU=GU,LP=p.forwardRef(({className:e,...t},n)=>s.jsx(TP,{className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));LP.displayName=TP.displayName;const Gd=p.forwardRef(({className:e,...t},n)=>s.jsxs(WU,{children:[s.jsx(LP,{}),s.jsx(AP,{ref:n,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Gd.displayName=AP.displayName;const Wd=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",e),...t});Wd.displayName="AlertDialogHeader";const Kd=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Kd.displayName="AlertDialogFooter";const Qd=p.forwardRef(({className:e,...t},n)=>s.jsx(DP,{ref:n,className:Q("text-lg font-semibold",e),...t}));Qd.displayName=DP.displayName;const Yd=p.forwardRef(({className:e,...t},n)=>s.jsx(OP,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Yd.displayName=OP.displayName;const Xd=p.forwardRef(({className:e,...t},n)=>s.jsx(RP,{ref:n,className:Q(Gy(),e),...t}));Xd.displayName=RP.displayName;const Jd=p.forwardRef(({className:e,...t},n)=>s.jsx(IP,{ref:n,className:Q(Gy({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Jd.displayName=IP.displayName;const Dn=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),{toast:i}=rt(),a=async()=>{try{r(!0);const{data:d,error:u}=await L.from("domains").select("*").order("name");if(u)throw u;t(d||[])}catch(d){console.error("Error fetching domains:",d),i({title:"Error",description:"Failed to fetch domains",variant:"destructive"})}finally{r(!1)}},o=async d=>{try{const{data:u,error:h}=await L.from("domains").insert(d).select().single();if(h)throw h;return t(f=>[...f,u]),i({title:"Success",description:"Domain created successfully"}),u}catch(u){throw console.error("Error creating domain:",u),i({title:"Error",description:"Failed to create domain",variant:"destructive"}),u}},l=async(d,u)=>{try{const{data:h,error:f}=await L.from("domains").update(u).eq("id",d).select().single();if(f)throw f;return t(m=>m.map(x=>x.id===d?h:x)),i({title:"Success",description:"Domain updated successfully"}),h}catch(h){throw console.error("Error updating domain:",h),i({title:"Error",description:"Failed to update domain",variant:"destructive"}),h}},c=async d=>{try{const{error:u}=await L.from("domains").delete().eq("id",d);if(u)throw u;t(h=>h.filter(f=>f.id!==d)),i({title:"Success",description:"Domain deleted successfully"})}catch(u){throw console.error("Error deleting domain:",u),i({title:"Error",description:"Failed to delete domain",variant:"destructive"}),u}};return p.useEffect(()=>{a()},[]),{domains:e,loading:n,createDomain:o,updateDomain:l,deleteDomain:c,refetch:a}},KU=[{value:"Music",label:"Music"},{value:"BookOpen",label:"Book Open"},{value:"Languages",label:"Languages"},{value:"Calculator",label:"Calculator"},{value:"Mic",label:"Microphone"},{value:"Palette",label:"Palette"},{value:"Code",label:"Code"},{value:"Globe",label:"Globe"}],zj=({domain:e,open:t,onClose:n,onSubmit:r})=>{const[i,a]=p.useState({id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",icon_name:(e==null?void 0:e.icon_name)||"BookOpen"}),[o,l]=p.useState(!1),[c,d]=p.useState({}),u=()=>{const m={};return i.name.trim()?i.name.trim().length<2&&(m.name="Domain name must be at least 2 characters"):m.name="Domain name is required",i.description.trim()?i.description.trim().length<10&&(m.description="Description must be at least 10 characters"):m.description="Description is required",e||(i.id.trim()?/^[a-z0-9_-]+$/.test(i.id)||(m.id="Domain ID can only contain lowercase letters, numbers, hyphens, and underscores"):m.id="Domain ID is required"),d(m),Object.keys(m).length===0},h=async m=>{if(m.preventDefault(),!!u()){l(!0);try{await r({id:i.id.trim(),name:i.name.trim(),description:i.description.trim(),icon_name:i.icon_name}),n(),a({id:"",name:"",description:"",icon_name:"BookOpen"})}catch{}finally{l(!1)}}},f=(m,x)=>{a(g=>({...g,[m]:x})),c[m]&&d(g=>({...g,[m]:""}))};return s.jsx(on,{open:t,onOpenChange:n,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:e?"Edit Domain":"Create New Domain"}),s.jsx(Qn,{children:e?"Update the domain information below.":"Add a new learning domain to the platform."})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"domain-id",children:"Domain ID *"}),s.jsx(Te,{id:"domain-id",value:i.id,onChange:m=>f("id",m.target.value),className:c.id?"border-destructive":"",placeholder:"e.g., music, languages, mathematics",disabled:!!e}),c.id&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:c.id}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used internally. Cannot be changed after creation."})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"domain-name",children:"Domain Name *"}),s.jsx(Te,{id:"domain-name",value:i.name,onChange:m=>f("name",m.target.value),className:c.name?"border-destructive":"",placeholder:"e.g., Music Theory, English Language"}),c.name&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:c.name})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"domain-description",children:"Description *"}),s.jsx(Rr,{id:"domain-description",value:i.description,onChange:m=>f("description",m.target.value),className:c.description?"border-destructive":"",placeholder:"Describe what this domain covers...",rows:3}),c.description&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:c.description})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"domain-icon",children:"Icon"}),s.jsxs(dt,{value:i.icon_name,onValueChange:m=>f("icon_name",m),children:[s.jsx(ot,{children:s.jsx(ut,{})}),s.jsx(lt,{children:KU.map(m=>s.jsx(me,{value:m.value,children:m.label},m.value))})]})]}),s.jsxs(Gi,{children:[s.jsx(U,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),s.jsx(U,{type:"submit",disabled:o,children:o?"Saving...":e?"Update Domain":"Create Domain"})]})]})]})})};function it({className:e,...t}){return s.jsx("div",{className:Q("animate-pulse rounded-md bg-muted",e),...t})}const QU=()=>{const{domains:e,loading:t,createDomain:n,updateDomain:r,deleteDomain:i}=Dn(),[a,o]=p.useState(""),[l,c]=p.useState(!1),[d,u]=p.useState(),[h,f]=p.useState(),m=e.filter(v=>v.name.toLowerCase().includes(a.toLowerCase())||bi(v.description).toLowerCase().includes(a.toLowerCase())||v.id.toLowerCase().includes(a.toLowerCase())),x=async v=>{await n(v),c(!1)},g=async v=>{d&&(await r(d.id,v),u(void 0))},b=async()=>{h&&(await i(h.id),f(void 0))};return t?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(it,{className:"h-8 w-64"}),s.jsx(it,{className:"h-4 w-96"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{className:"h-10 w-full"}),s.jsx(it,{className:"h-64 w-full"})]})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Domain Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Create and manage learning domains for the platform"})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{className:"text-lg",children:"Overview"})}),s.jsx(re,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:e.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Domains"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:e.filter(v=>v.name.toLowerCase().includes("test")).length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Domains"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:new Set(e.map(v=>v.icon_name)).size}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Unique Icons"})]})]})})]}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Manage Domains"}),s.jsx(Me,{children:"Add, edit, or remove learning domains from the platform"})]}),s.jsxs(re,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(Te,{placeholder:"Search domains...",value:a,onChange:v=>o(v.target.value),className:"pl-10"})]}),s.jsxs(U,{onClick:()=>c(!0),children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Domain"]})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{children:"ID"}),s.jsx(Re,{children:"Name"}),s.jsx(Re,{children:"Description"}),s.jsx(Re,{children:"Icon"}),s.jsx(Re,{children:"Created"}),s.jsx(Re,{className:"text-right",children:"Actions"})]})}),s.jsx(ai,{children:m.length===0?s.jsx(wt,{children:s.jsx(Ee,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:a?"No domains found matching your search.":"No domains found."})}):m.map(v=>s.jsxs(wt,{children:[s.jsx(Ee,{children:s.jsx(ve,{variant:"outline",className:"font-mono text-xs",children:v.id})}),s.jsx(Ee,{className:"font-medium",children:v.name}),s.jsx(Ee,{className:"max-w-xs",children:s.jsx("div",{className:"truncate",children:bi(v.description)})}),s.jsx(Ee,{children:s.jsx(ve,{variant:"secondary",children:v.icon_name})}),s.jsx(Ee,{className:"text-sm text-muted-foreground",children:new Date(v.created_at).toLocaleDateString()}),s.jsx(Ee,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:()=>u(v),children:s.jsx(Lp,{className:"h-3 w-3"})}),s.jsxs(yf,{children:[s.jsx(MP,{asChild:!0,children:s.jsx(U,{variant:"outline",size:"sm",onClick:()=>f(v),children:s.jsx(Ns,{className:"h-3 w-3 text-destructive"})})}),s.jsxs(Gd,{children:[s.jsxs(Wd,{children:[s.jsx(Qd,{children:"Delete Domain"}),s.jsxs(Yd,{children:['Are you sure you want to delete the "',v.name,'" domain? This action cannot be undone and may affect existing curricula.']})]}),s.jsxs(Kd,{children:[s.jsx(Jd,{children:"Cancel"}),s.jsx(Xd,{onClick:b,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},v.id))})]})})]})]}),s.jsx(zj,{open:l,onClose:()=>c(!1),onSubmit:x}),s.jsx(zj,{domain:d,open:!!d,onClose:()=>u(void 0),onSubmit:g})]})},YU=e=>{const[t,n]=p.useState({learningGoalsCount:0,conceptsCount:0,exercisesCount:0}),[r,i]=p.useState(!0),{toast:a}=rt(),o=async()=>{try{i(!0);const{count:l,error:c}=await L.from("concepts").select("*",{count:"exact",head:!0}).eq("domain_id",e).in("status",["approved","suggested","confirmed"]);if(c)throw c;const{data:d,error:u}=await L.from("concepts").select("id").eq("domain_id",e);if(u)throw u;const h=(d||[]).map(x=>x.id);let f=0;if(h.length>0){const{count:x,error:g}=await L.from("learning_goals").select("*",{count:"exact",head:!0}).in("concept_id",h);if(g)throw g;f=x||0}n({learningGoalsCount:f,conceptsCount:l||0,exercisesCount:0})}catch(l){console.error("Error fetching domain stats:",l),a({title:"Error",description:"Failed to fetch domain statistics",variant:"destructive"})}finally{i(!1)}};return p.useEffect(()=>{e&&o()},[e]),{stats:t,loading:r,refetch:o}},XU=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!0),{toast:i}=rt(),a=async()=>{try{r(!0);const{data:o,error:l}=await L.from("domains").select("id");if(l)throw l;const c=(o==null?void 0:o.map(async h=>{const{count:f,error:m}=await L.from("concepts").select("*",{count:"exact",head:!0}).eq("domain_id",h.id).in("status",["approved","suggested","confirmed"]);if(m)throw m;const{data:x,error:g}=await L.from("concepts").select("id").eq("domain_id",h.id);if(g)throw g;const b=(x||[]).map(y=>y.id);let v=0;if(b.length>0){const{count:y,error:w}=await L.from("learning_goals").select("*",{count:"exact",head:!0}).in("concept_id",b);if(w)throw w;v=y||0}return{domainId:h.id,stats:{learningGoalsCount:v,conceptsCount:f||0,exercisesCount:0}}}))||[],u=(await Promise.all(c)).reduce((h,f)=>(h[f.domainId]=f.stats,h),{});t(u)}catch(o){console.error("Error fetching all domains stats:",o),i({title:"Error",description:"Failed to fetch domains statistics",variant:"destructive"})}finally{r(!1)}};return p.useEffect(()=>{a()},[]),{domainsStats:e,loading:n,refetch:a}},JU=({title:e,description:t,count:n,icon:r,onClick:i,badge:a})=>s.jsxs(te,{className:"cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50 group h-full",onClick:i,children:[s.jsx(le,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:s.jsx(r,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ue,{className:"text-lg group-hover:text-primary transition-colors",children:e}),n!==void 0&&s.jsx("div",{className:"text-2xl font-bold text-muted-foreground mt-1",children:n})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[a&&s.jsx(ve,{variant:"secondary",className:"text-xs",children:a}),s.jsx(no,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})]})]})}),s.jsx(re,{children:s.jsx(Me,{className:"line-clamp-2",children:t})})]}),f0=p.forwardRef(({...e},t)=>s.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));f0.displayName="Breadcrumb";const m0=p.forwardRef(({className:e,...t},n)=>s.jsx("ol",{ref:n,className:Q("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));m0.displayName="BreadcrumbList";const lp=p.forwardRef(({className:e,...t},n)=>s.jsx("li",{ref:n,className:Q("inline-flex items-center gap-1.5",e),...t}));lp.displayName="BreadcrumbItem";const g0=p.forwardRef(({asChild:e,className:t,...n},r)=>{const i=e?Cn:"a";return s.jsx(i,{ref:r,className:Q("transition-colors hover:text-foreground",t),...n})});g0.displayName="BreadcrumbLink";const x0=p.forwardRef(({className:e,...t},n)=>s.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:Q("font-normal text-foreground",e),...t}));x0.displayName="BreadcrumbPage";const v0=({children:e,className:t,...n})=>s.jsx("li",{role:"presentation","aria-hidden":"true",className:Q("[&>svg]:size-3.5",t),...n,children:e??s.jsx(no,{})});v0.displayName="BreadcrumbSeparator";const $P=p.createContext(void 0);function FP({children:e}){const[t,n]=p.useState([]),r=p.useCallback(l=>{n(l)},[]),i=p.useCallback(l=>{n(c=>[...c,l])},[]),a=p.useCallback(l=>{n(c=>c.filter((d,u)=>u!==l))},[]),o=p.useCallback(()=>{n([])},[]);return s.jsx($P.Provider,{value:{breadcrumbs:t,setBreadcrumbs:r,addBreadcrumb:i,removeBreadcrumb:a,clearBreadcrumbs:o},children:e})}function ZU(){const e=p.useContext($P);if(e===void 0)throw new Error("useBreadcrumb must be used within a BreadcrumbProvider");return e}const wf=e=>{const[t,n]=p.useState([]),[r,i]=p.useState(!1),[a,o]=p.useState(null),{toast:l}=rt(),c=(N,j)=>{var $,B;const _=N.display_order??Number.MAX_SAFE_INTEGER,E=j.display_order??Number.MAX_SAFE_INTEGER;if(_!==E)return _-E;const A=parseInt((($=N.name.match(/^(\d+)/))==null?void 0:$[1])||"0",10),R=parseInt(((B=j.name.match(/^(\d+)/))==null?void 0:B[1])||"0",10);return A!==R?A-R:N.name.localeCompare(j.name)},d=async()=>{if(e){console.log("🔍 fetchConcepts called for domain:",e),i(!0),o(null),n([]);try{console.log("🔍 Fetching concepts for domain:",e),console.log("🔍 Current user auth info:",await L.auth.getUser());const{data:N,error:j}=await L.from("concepts").select("*").eq("domain_id",e).order("parent_concept_id",{ascending:!0,nullsFirst:!0}).order("display_order",{ascending:!0,nullsFirst:!1}).order("name",{ascending:!0});if(console.log("🔍 Raw Supabase response - data:",N),console.log("🔍 Raw Supabase response - error:",j),console.log("🔍 Data count:",(N==null?void 0:N.length)||0),j)throw console.error("🔍 Database fetch error:",j),j;console.log("🔍 === COMPLETE DATABASE RESPONSE ==="),console.log("🔍 Total concepts returned:",N==null?void 0:N.length),console.log("🔍 Suggested concepts returned:",N==null?void 0:N.filter(_=>_.status==="suggested").length),console.log("🔍 All unique statuses:",[...new Set((N==null?void 0:N.map(_=>_.status))||[])]),console.log("🔍 ALL suggested concepts details:",N==null?void 0:N.filter(_=>_.status==="suggested").map(_=>({id:_.id.slice(0,8),name:_.name,status:_.status,teacher_id:_.teacher_id}))),n(N||[]),console.log("🔍 React state updated with",N==null?void 0:N.length,"concepts")}catch(N){console.error("Error fetching concepts:",N),o(N instanceof Error?N.message:"Failed to fetch concepts"),l({title:"Error",description:"Failed to fetch concepts",variant:"destructive"})}finally{i(!1)}}},u=async(N,j,_)=>{try{let E=_;if(!E){const{data:{user:R},error:$}=await L.auth.getUser();if($)throw $;if(!R)throw new Error("No authenticated user found");E=R.id}const{error:A}=await L.from("concepts").update({status:j,reviewed_by:E,reviewed_at:new Date().toISOString(),updated_by:E}).eq("id",N);if(A)throw A;return n(R=>R.map($=>$.id===N?{...$,status:j,reviewed_by:E,reviewed_at:new Date().toISOString(),updated_by:E,updated_at:new Date().toISOString()}:$)),l({title:"Success",description:`Concept ${j==="approved"?"approved":"rejected"}`}),!0}catch(E){return console.error("Error updating concept status:",E),l({title:"Error",description:"Failed to update concept status",variant:"destructive"}),!1}},h=async(N,j)=>{try{const{error:_}=await L.from("concepts").update({parent_concept_id:j||null,updated_at:new Date().toISOString()}).eq("id",N);if(_)throw _;return n(E=>E.map(A=>A.id===N?{...A,parent_concept_id:j,updated_at:new Date().toISOString()}:A)),l({title:"Success",description:"Concept hierarchy updated"}),!0}catch(_){return console.error("Error updating concept parent:",_),l({title:"Error",description:"Failed to update concept hierarchy",variant:"destructive"}),!1}},f=async N=>{try{const j=t.find(D=>D.id===N);if(!j)return!1;const E=[...t.filter(D=>D.parent_concept_id===j.parent_concept_id)].sort(c),A=E.findIndex(D=>D.id===N);if(A<=0)return!1;const R=E[A-1],$=j.display_order??A,B=R.display_order??A-1,{error:F}=await L.from("concepts").update({display_order:B,updated_at:new Date().toISOString()}).eq("id",N);if(F)throw F;const{error:z}=await L.from("concepts").update({display_order:$,updated_at:new Date().toISOString()}).eq("id",R.id);if(z)throw z;const q=[...E].map(D=>D.id);return[q[A-1],q[A]]=[q[A],q[A-1]],await x(j.parent_concept_id??null,q),!0}catch(j){return console.error("Error moving concept up:",j),l({title:"Error",description:"Failed to move concept",variant:"destructive"}),!1}},m=async N=>{try{const j=t.find(D=>D.id===N);if(!j)return!1;const E=[...t.filter(D=>D.parent_concept_id===j.parent_concept_id)].sort(c),A=E.findIndex(D=>D.id===N);if(A>=E.length-1)return!1;const R=E[A+1],$=j.display_order??A,B=R.display_order??A+1,{error:F}=await L.from("concepts").update({display_order:B,updated_at:new Date().toISOString()}).eq("id",N);if(F)throw F;const{error:z}=await L.from("concepts").update({display_order:$,updated_at:new Date().toISOString()}).eq("id",R.id);if(z)throw z;const q=[...E].map(D=>D.id);return[q[A],q[A+1]]=[q[A+1],q[A]],await x(j.parent_concept_id??null,q),!0}catch(j){return console.error("Error moving concept down:",j),l({title:"Error",description:"Failed to move concept",variant:"destructive"}),!1}},x=async(N,j)=>{try{const _=new Date().toISOString(),A=t.filter($=>($.parent_concept_id??null)===N).filter($=>!j.includes($.id)).sort(c),R=[...j,...A.map($=>$.id)];return await Promise.all(R.map(($,B)=>L.from("concepts").update({display_order:B,parent_concept_id:N,updated_at:_}).eq("id",$))),d(),!0}catch(_){return console.error("Error reordering concepts:",_),l({title:"Error",description:"Failed to reorder concepts",variant:"destructive"}),!1}},g=async(N,j,_)=>{try{let E=_;if(!E){const{data:{user:R},error:$}=await L.auth.getUser();if($)throw $;if(!R)throw new Error("No authenticated user found");E=R.id}const{error:A}=await L.from("concepts").update({status:j,reviewed_by:E,reviewed_at:new Date().toISOString(),updated_by:E}).in("id",N);if(A)throw A;return n(R=>R.map($=>N.includes($.id)?{...$,status:j,reviewed_by:E,reviewed_at:new Date().toISOString(),updated_by:E,updated_at:new Date().toISOString()}:$)),l({title:"Success",description:`${N.length} concepts ${j==="approved"?"approved":"rejected"}`}),!0}catch(E){return console.error("Error bulk updating concepts:",E),l({title:"Error",description:"Failed to update concepts",variant:"destructive"}),!1}},b=async(N,j)=>{try{const{error:_}=await L.from("concepts").update({...j,updated_at:new Date().toISOString()}).eq("id",N);if(_)throw _;return n(E=>E.map(A=>A.id===N?{...A,...j,updated_at:new Date().toISOString()}:A)),l({title:"Success",description:"Concept updated successfully"}),!0}catch(_){return console.error("Error updating concept:",_),l({title:"Error",description:"Failed to update concept",variant:"destructive"}),!1}},v=async N=>{try{const{data:{user:j},error:_}=await L.auth.getUser();if(_)throw _;if(!j)throw new Error("No authenticated user found");console.log("🔍 Adding concept with data:",N),console.log("🔍 User ID:",j.id);const E={...N,created_by:j.id};console.log("🔍 Final insert data:",E);const{data:A,error:R}=await L.from("concepts").insert(E).select().single();if(console.log("🔍 Insert response:",{data:A,error:R}),R)throw console.error("🔍 Insert error details:",R),console.error("🔍 Full error object:",JSON.stringify(R,null,2)),console.error("🔍 Error message:",R.message),console.error("🔍 Error code:",R.code),console.error("🔍 Error details:",R.details),console.error("🔍 Error hint:",R.hint),R;return console.log("🔍 Successfully created concept:",A),console.log("🔍 New concept parent_concept_id:",A.parent_concept_id),console.log("🔍 New concept status:",A.status),console.log("🔍 Adding to concepts list. Current count:",t.length),n($=>{const B=[...$,A];return console.log("🔍 Updated concepts list count:",B.length),B}),l({title:"Success",description:"Concept created successfully"}),A}catch(j){return console.error("Error adding concept:",j),l({title:"Error",description:"Failed to create concept",variant:"destructive"}),!1}},y=async N=>{try{if(t.some(E=>E.parent_concept_id===N))return l({title:"Error",description:"Cannot delete concept with child concepts. Please reassign or delete children first.",variant:"destructive"}),!1;const{error:_}=await L.from("concepts").delete().eq("id",N);if(_)throw _;return n(E=>E.filter(A=>A.id!==N)),l({title:"Success",description:"Concept deleted successfully"}),!0}catch(j){return console.error("Error deleting concept:",j),l({title:"Error",description:"Failed to delete concept",variant:"destructive"}),!1}},w=async(N,j,_)=>{var E,A,R,$,B,F,z,q,D;try{console.log("🎯 Saving mindmap position for concept:",N,"at position:",{x:j,y:_});const{data:I}=await L.auth.getSession();console.log("🎯 Current Supabase session:",(A=(E=I==null?void 0:I.session)==null?void 0:E.user)==null?void 0:A.id,($=(R=I==null?void 0:I.session)==null?void 0:R.user)==null?void 0:$.email),console.log("🎯 Session access token exists:",!!((B=I==null?void 0:I.session)!=null&&B.access_token)),console.log("🎯 User role from JWT:",(q=(z=(F=I==null?void 0:I.session)==null?void 0:F.user)==null?void 0:z.app_metadata)==null?void 0:q.role);const{data:{user:T}}=await L.auth.getUser();if(!T)return console.error("🎯 No authenticated user - cannot save mindmap position"),l({title:"Authentication Required",description:"Please log in to save mindmap positions.",variant:"destructive"}),!1;if(!(I!=null&&I.session))return console.error("🎯 No valid Supabase session found"),l({title:"Session Expired",description:"Your session has expired. Please refresh the page and try again.",variant:"destructive"}),!1;const H=t.find(ne=>ne.id===N);if(!H)return console.error("🎯 Concept not found:",N),!1;const P={...H.metadata||{},mindmap_position:{x:j,y:_}};console.log("🎯 Current metadata:",H.metadata),console.log("🎯 Updated metadata:",P),console.log("🎯 User ID:",T.id,"Concept created_by:",H.created_by);const{data:Z,error:ee}=await L.rpc("debug_current_user_jwt");console.log("🎯 Debug auth function result:",Z,ee);const{data:W,error:X}=await L.from("concepts").update({metadata:P}).eq("id",N).select("id, metadata");if(console.log("🎯 Database update response:",{data:W,error:X}),X){if(console.error("🎯 Database update error:",X),X.code==="PGRST116"||(D=X.message)!=null&&D.includes("new row violates row-level security")){console.error("🎯 RLS policy violation - checking auth state");const{data:ne,error:se}=await L.rpc("test_user_is_admin");console.log("🎯 Admin test result:",ne,se),l({title:"Permission Denied",description:`You don't have permission to update this concept's position. Your ID: ${T.id}, Concept created by: ${H.created_by}`,variant:"destructive"})}else X.code==="PGRST301"?l({title:"Authentication Error",description:"Your session is invalid. Please refresh the page and log in again.",variant:"destructive"}):l({title:"Save Failed",description:`Could not save mindmap position: ${X.message}`,variant:"destructive"});return!1}return!W||W.length===0?(console.error("🎯 No data returned from update - possibly RLS policy blocked the update"),l({title:"Save Failed",description:"No data returned from server. Update may have been blocked by security policies.",variant:"destructive"}),!1):(console.log("🎯 Successfully saved position to database"),l({title:"Position Saved",description:"Mindmap position has been saved successfully."}),n(ne=>ne.map(se=>se.id===N?{...se,metadata:P}:se)),!0)}catch(I){return console.error("🎯 Error saving mindmap position:",I),l({title:"Save Error",description:"An unexpected error occurred while saving.",variant:"destructive"}),!1}},k=N=>{var E;const j=t.find(A=>A.id===N),_=((E=j==null?void 0:j.metadata)==null?void 0:E.mindmap_position)||null;return console.log("🎯 Getting mindmap position for concept:",N,"concept metadata:",JSON.stringify(j==null?void 0:j.metadata),"found position:",JSON.stringify(_)),_},S=async N=>{var j;try{const _=t.filter(E=>E.domain_id===N);for(const E of _)if((j=E.metadata)!=null&&j.mindmap_position){const A={...E.metadata};delete A.mindmap_position,await L.from("concepts").update({metadata:A,updated_at:new Date().toISOString()}).eq("id",E.id)}return d(),l({title:"Success",description:"Mindmap layout reset successfully"}),!0}catch(_){return console.error("Error clearing mindmap positions:",_),l({title:"Error",description:"Failed to reset mindmap layout",variant:"destructive"}),!1}};return p.useEffect(()=>{d()},[e]),{concepts:t,loading:r,error:a,refetch:d,updateConceptStatus:u,updateConceptParent:h,updateConcept:b,bulkUpdateStatus:g,addConcept:v,deleteConcept:y,moveConceptUp:f,moveConceptDown:m,reorderSiblings:x,saveMindmapPosition:w,getMindmapPosition:k,clearMindmapPositions:S,stats:(()=>{const N=t.reduce((j,_)=>(j[_.status]=(j[_.status]||0)+1,j),{});return{total:t.length,ai_suggested:N.suggested||0,approved:N.approved||N.confirmed||0,rejected:N.rejected||0}})()}};function Cs(){const e=Ir(),{breadcrumbs:t,setBreadcrumbs:n}=ZU(),{domains:r}=Dn(),i=e.pathname.split("/").filter(Boolean),a=i[0]==="admin"&&i[1]==="domain"?i[2]:"",{concepts:o}=wf(a);return p.useEffect(()=>{const l=e.pathname.split("/").filter(Boolean),c=[];if(c.push({label:"Dashboard",href:"/admin/dashboard"}),l[0]==="admin")if(l[1]==="learning-domains")c.push({label:"Learning Domains",href:"/admin/learning-domains"});else if(l[1]==="domain"&&l[2]){const d=l[2],u=r.find(f=>f.id===d),h=(u==null?void 0:u.name)||"Domain";if(c.push({label:h,href:`/admin/domain/${d}`}),l[3]){const m={concepts:"concepts",goals:"goals",exercises:"exercises",upload:"upload","ai-guidance":"ai-guidance",tasks:"tasks",strategies:"strategies"}[l[3]]||l[3];if(c.push({label:m,href:`/admin/domain/${d}/${l[3]}`}),l[3]==="concepts"&&l[4]){const x=l[4],g=o.find(v=>v.id===x),b=(g==null?void 0:g.name)||"Concept";c.push({label:b,href:`/admin/domain/${d}/concepts/${x}`})}else if(l[3]==="ai-guidance"&&l[4]){const x=l[4],g=x.charAt(0).toUpperCase()+x.slice(1).replace(/-/g," ");c.push({label:g,href:`/admin/domain/${d}/ai-guidance/${x}`}),l[5]==="examples"&&l[6]==="new"&&c.push({label:"Add Examples",href:`/admin/domain/${d}/ai-guidance/${x}/examples/new`})}}}else if(l[1]==="upload"){c.push({label:"Learning Domains",href:"/admin/learning-domains"});const u=new URLSearchParams(e.search).get("domain");if(u&&r.length>0){const h=r.find(f=>f.id===u);h&&c.push({label:h.name,href:`/admin/domain/${u}`})}c.push({label:"File Upload",href:"/admin/upload"})}else l[1]==="clients"?c.push({label:"Clients",href:"/admin/clients"}):l[1]==="permissions"&&c.push({label:"Permissions",href:"/admin/permissions"});c.length>0&&(c[c.length-1].isActive=!0),n(c)},[e.pathname,e.search,r,o,n]),t.length<=1?null:s.jsx(f0,{children:s.jsx(m0,{children:t.map((l,c)=>s.jsxs("div",{className:"flex items-center",children:[c>0&&s.jsx(v0,{}),s.jsx(lp,{children:l.isActive?s.jsx(x0,{children:l.label}):s.jsx(g0,{asChild:!0,children:s.jsx(dr,{to:l.href||"#",children:l.label})})})]},c))})})}function Ki({children:e,className:t=""}){return s.jsx("div",{className:`p-6 space-y-8 ${t}`,children:s.jsx("div",{className:"mx-auto max-w-7xl",children:e})})}const y0=({onFilesSelected:e,uploadProgress:t,isUploading:n,disabled:r=!1})=>{const i=p.useCallback(u=>{e(u)},[e]),{getRootProps:a,getInputProps:o,isDragActive:l,fileRejections:c}=xf({onDrop:i,disabled:r||n,maxSize:50*1024*1024,accept:{"application/pdf":[".pdf"],"text/plain":[".txt"],"text/csv":[".csv"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"audio/mpeg":[".mp3"],"audio/wav":[".wav"],"video/mp4":[".mp4"],"video/avi":[".avi"]}}),d=Object.entries(t);return s.jsxs("div",{className:"space-y-4",children:[s.jsx(te,{className:`border-2 border-dashed transition-all duration-200 ${l?"border-primary bg-primary/5":r||n?"border-muted bg-muted/20":"border-border hover:border-primary/50"}`,children:s.jsx(re,{className:"p-8",children:s.jsxs("div",{...a(),className:`text-center cursor-pointer ${r||n?"pointer-events-none opacity-50":""}`,children:[s.jsx("input",{...o()}),s.jsx("div",{className:"mx-auto w-12 h-12 mb-4",children:s.jsx(En,{className:`w-full h-full ${l?"text-primary":"text-muted-foreground"}`})}),s.jsx("div",{className:"space-y-2",children:l?s.jsx("p",{className:"text-lg font-medium text-primary",children:"Drop the files here..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-lg font-medium",children:"Drag & drop files here, or click to select"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Supports PDF, Word, Excel, PowerPoint, images, audio, and video files"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum file size: 50MB"})]})})]})})}),c.length>0&&s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Xn,{children:s.jsx("div",{className:"space-y-1",children:c.map(({file:u,errors:h})=>{var f;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("strong",{children:[u.name,":"]})," ",(f=h[0])==null?void 0:f.message]},u.name)})})})]}),d.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Upload Progress"}),d.map(([u,h])=>s.jsxs(te,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(bO,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium truncate",children:h.file.name}),s.jsx(ve,{variant:h.status==="completed"?"default":h.status==="error"?"destructive":"secondary",children:h.status})]}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:op(h.file.size)})]}),h.status==="uploading"&&s.jsx($a,{value:h.progress,className:"mb-2"}),h.error&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:h.error})]},u))]})]})},eB=()=>{var S;const{domainId:e}=ti(),t=Rt(),[n,r]=p.useState(!1),[i,a]=p.useState(null),{domains:o,loading:l}=Dn(),{stats:c,loading:d}=YU(e||""),{uploadFiles:u,isUploading:h,uploadProgress:f}=vf(),m=o.find(C=>C.id===e),x=l||d,g=C=>{C==="upload"?r(!0):C==="ai-guidance"?t(`/admin/domain/${e}/ai-guidance`):C==="concepts"?t(`/admin/domain/${e}/concepts`):C==="goals"?t(`/admin/domain/${e}/goals`):console.log(`Navigate to ${C} for domain ${e}`)},b=C=>{a(C)},v=C=>{!e||!m||!i||u({files:C,domainId:e,domainName:m.name,contentType:i})},y=()=>{r(!1),a(null)},w=[{title:"Learning Concepts",description:"Manage learning concepts and their relationships",count:c==null?void 0:c.conceptsCount,icon:Pt,section:"concepts"},{title:"Learning Goals",description:"Define and organize learning objectives",count:c==null?void 0:c.learningGoalsCount,icon:vn,section:"goals"},{title:"Exercises",description:"Create and manage practice exercises",count:c==null?void 0:c.exercisesCount,icon:Zi,section:"exercises",badge:"Coming Soon"},{title:"Upload Data",description:"Upload and manage learning materials",icon:En,section:"upload"},{title:"AI Guidance",description:"AI-powered learning recommendations",icon:Xi,section:"ai-guidance",badge:"Coming Soon"},{title:"Tasks",description:"Manage learning tasks and assignments",icon:dd,section:"tasks",badge:"Coming Soon"},{title:"Strategies",description:"Define learning strategies and methodologies",icon:Op,section:"strategies",badge:"Coming Soon"},{title:"Gamification",description:"Add game elements to enhance learning motivation",icon:nC,section:"gamification",badge:"Coming Soon"},{title:"Motivation",description:"Track and boost learner motivation and engagement",icon:_y,section:"motivation",badge:"Coming Soon"}];if(x)return s.jsxs(Ki,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(it,{className:"h-8 w-64"}),s.jsx(it,{className:"h-4 w-96"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{className:"h-32 w-full"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((C,N)=>s.jsx(it,{className:"h-32 w-full"},N))})]})]});if(!m)return s.jsx(Ki,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Domain Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested domain could not be found."}),s.jsxs(U,{onClick:()=>t("/admin/learning-domains"),children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Back to Learning Domains"]})]})});const k=[{type:"concept",title:"Learning Concepts",description:"Upload documents related to learning concepts and knowledge areas",icon:Pt,color:"bg-blue-50 hover:bg-blue-100 border-blue-200",iconColor:"text-blue-600"},{type:"learning_goal",title:"Learning Goals",description:"Upload materials defining learning objectives and outcomes",icon:vn,color:"bg-green-50 hover:bg-green-100 border-green-200",iconColor:"text-green-600"},{type:"exercise",title:"Exercises",description:"Upload practice exercises and assessment materials",icon:Zi,color:"bg-purple-50 hover:bg-purple-100 border-purple-200",iconColor:"text-purple-600"}];return s.jsxs(Ki,{children:[s.jsx(Cs,{}),n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),s.jsxs("p",{className:"text-muted-foreground mt-2",children:["Choose the type of content you want to upload for ",m.name,"."]})]}),s.jsxs(U,{variant:"ghost",onClick:y,children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}),i?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ve,{variant:"outline",className:"px-3 py-1",children:(S=k.find(C=>C.type===i))==null?void 0:S.title}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>a(null),children:"Change Type"})]})}),s.jsx(te,{children:s.jsx(re,{className:"pt-6",children:s.jsx(y0,{onFilesSelected:v,uploadProgress:f,isUploading:h,disabled:!e})})})]}):s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:k.map(C=>{const N=C.icon;return s.jsx(te,{className:`cursor-pointer transition-all duration-200 ${C.color}`,onClick:()=>b(C.type),children:s.jsxs(le,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-white",children:s.jsx(N,{className:`h-8 w-8 ${C.iconColor}`})}),s.jsx(ue,{className:"text-lg",children:C.title}),s.jsx(Me,{className:"text-sm",children:C.description})]})},C.type)})})]}):s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{children:[m.name," Management"]}),s.jsx(Me,{children:"Manage different aspects of this learning domain"})]}),s.jsx(re,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(C=>s.jsx(JU,{title:C.title,description:C.description,count:C.count,icon:C.icon,onClick:()=>g(C.section),badge:C.badge},C.section))})})]})]})},zP=(e,t)=>{const[n,r]=p.useState(null),[i,a]=p.useState(!1),[o,l]=p.useState(null),c=p.useCallback(async()=>{if(e){a(!0),l(null);try{const d=t||e,{data:u,error:h}=await L.functions.invoke("check-guidance-status",{body:{domainId:d}});if(h)throw h;r(u)}catch(d){console.error("Error fetching guidance status:",d),l(d instanceof Error?d.message:"Failed to fetch guidance status")}finally{a(!1)}}},[e,t]);return p.useEffect(()=>{c()},[c]),{guidanceStatus:n,loading:i,error:o,refetch:c}};function tB(e){return{concepts:Pt,"concept-structuring":cd,"learning-strategies":vn,"evaluation-methods":dd,"content-formats":Ws,"task-types":Zi,exercises:Zi,strategies:Op,"learning-goals":vn,"Learning-goals":vn}[e]||kn}function nB(e){return{concepts:'Rules for extracting "what to learn" from uploaded materials.',"concept-structuring":"How to build hierarchies and dependencies among concepts.","learning-strategies":"Guidelines for turning concepts into measurable objectives.","evaluation-methods":"Methods for assessing learning progress and outcomes.","content-formats":"Guidelines for content presentation and formatting.","task-types":"Different types of learning tasks and activities.",exercises:"Guidelines for creating exercises and practice activities.",strategies:"General learning and teaching strategies.","learning-goals":"Guidelines for defining and structuring learning objectives.","Learning-goals":"Guidelines for defining and structuring learning objectives."}[e]||"AI guidance configuration for this area."}const rB=()=>{const{domainId:e}=ti(),t=Rt(),{domains:n,loading:r}=Dn(),i=n.find(b=>b.id===e),{guidanceStatus:a,loading:o,error:l,refetch:c}=zP(e||"",i==null?void 0:i.name),{toast:d}=rt(),u=r||o,h=(a==null?void 0:a.areas.map(b=>({key:b.key,title:b.title,description:nB(b.key),icon:tB(b.key)})))||[],f=b=>{t(`/admin/domain/${e}/ai-guidance/${b}`)},m=b=>{console.log(`View guidance file for ${b}`),d({title:"Coming Soon",description:"File viewer will be available in the next update."})},x=b=>{if(!a)return null;const v=a.areas.find(y=>y.key===b);return v?v.exists?s.jsx(ve,{variant:"default",children:"Configured"}):s.jsx(ve,{variant:"secondary",children:"Not configured"}):s.jsx(ve,{variant:"secondary",children:"Not configured"})},g=b=>{if(!a)return!1;const v=a.areas.find(y=>y.key===b);return(v==null?void 0:v.exists)||!1};return u?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(it,{className:"h-8 w-64"}),s.jsx(it,{className:"h-4 w-96"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(5)].map((b,v)=>s.jsx(it,{className:"h-48 w-full"},v))})]}):i?l?s.jsxs("div",{className:"p-6",children:[s.jsx(Cs,{}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Error Loading Guidance"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"There was an error loading the guidance status. Please try again."}),s.jsx(U,{onClick:()=>c(),children:"Retry"})]})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(Cs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"AI Guidance"}),s.jsx(ve,{variant:"outline",children:i.name})]}),s.jsx("p",{className:"text-muted-foreground",children:"Configure AI guidance for different aspects of your learning domain"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length>0?h.map(b=>{const v=b.icon,y=g(b.key);return s.jsxs(te,{className:"h-full",children:[s.jsx(le,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:s.jsx(v,{className:"h-5 w-5 text-primary"})}),s.jsx("div",{className:"flex-1",children:s.jsx(ue,{className:"text-lg",children:b.title})})]}),s.jsx("div",{className:"flex items-center",children:x(b.key)})]})}),s.jsxs(re,{className:"space-y-4",children:[s.jsx(Me,{className:"line-clamp-2",children:y?b.description:"No guidance file yet."}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs(U,{onClick:()=>f(b.key),className:"w-full",children:[s.jsx(wO,{className:"h-4 w-4 mr-2"}),"Open"]}),s.jsxs(U,{variant:"outline",onClick:()=>m(b.key),disabled:!y,className:"w-full",children:[s.jsx(ws,{className:"h-4 w-4 mr-2"}),"View file"]})]})]})]},b.key)}):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"No guidance folders found for this domain yet."}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload some files to the domain first, then guidance folders will appear here automatically."})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Domain Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested domain could not be found."}),s.jsxs(U,{onClick:()=>t("/admin/learning-domains"),children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Back to Learning Domains"]})]})})},sB=(e,t,n)=>{const[r,i]=p.useState(null),[a,o]=p.useState(!1),[l,c]=p.useState(null),d=p.useCallback(async()=>{if(!e||!t||!n){console.log("Missing parameters:",{domainId:e,domainName:t,area:n});return}o(!0),c(null);try{const{data:h,error:f}=await L.functions.invoke("get-guidance-content",{body:{domainName:t,area:n}});if(f)throw f;i(h)}catch(h){console.error("Error fetching guidance content:",h),c(h instanceof Error?h.message:"Failed to fetch guidance content")}finally{o(!1)}},[e,t,n]);return p.useEffect(()=>{d()},[d]),{guidanceContent:r,loading:a,error:l,refetch:d,saveContent:async h=>{try{const{data:f,error:m}=await L.functions.invoke("save-guidance-content",{body:{domainName:t,area:n,content:h}});if(m)throw m;if(!f.success)throw new Error(f.error||"Failed to save guidance content");return i({content:h,exists:!0}),!0}catch(f){return console.error("Error saving guidance content:",f),!1}}}};function iB(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const aB=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oB=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lB={};function Uj(e,t){return(lB.jsx?oB:aB).test(e)}const cB=/[ \t\n\f\r]/g;function dB(e){return typeof e=="object"?e.type==="text"?Bj(e.value):!1:Bj(e)}function Bj(e){return e.replace(cB,"")===""}class Zd{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Zd.prototype.normal={};Zd.prototype.property={};Zd.prototype.space=void 0;function UP(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Zd(n,r,t)}function Zx(e){return e.toLowerCase()}class tr{constructor(t,n){this.attribute=n,this.property=t}}tr.prototype.attribute="";tr.prototype.booleanish=!1;tr.prototype.boolean=!1;tr.prototype.commaOrSpaceSeparated=!1;tr.prototype.commaSeparated=!1;tr.prototype.defined=!1;tr.prototype.mustUseProperty=!1;tr.prototype.number=!1;tr.prototype.overloadedBoolean=!1;tr.prototype.property="";tr.prototype.spaceSeparated=!1;tr.prototype.space=void 0;let uB=0;const Ge=io(),zt=io(),ev=io(),ce=io(),xt=io(),Jo=io(),rr=io();function io(){return 2**++uB}const tv=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:zt,commaOrSpaceSeparated:rr,commaSeparated:Jo,number:ce,overloadedBoolean:ev,spaceSeparated:xt},Symbol.toStringTag,{value:"Module"})),Tm=Object.keys(tv);class w0 extends tr{constructor(t,n,r,i){let a=-1;if(super(t,n),qj(this,"space",i),typeof r=="number")for(;++a<Tm.length;){const o=Tm[a];qj(this,Tm[a],(r&tv[o])===tv[o])}}}w0.prototype.defined=!0;function qj(e,t,n){n&&(e[t]=n)}function Zl(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const a=new w0(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[Zx(r)]=r,n[Zx(a.attribute)]=r}return new Zd(t,n,e.space)}const BP=Zl({properties:{ariaActiveDescendant:null,ariaAtomic:zt,ariaAutoComplete:null,ariaBusy:zt,ariaChecked:zt,ariaColCount:ce,ariaColIndex:ce,ariaColSpan:ce,ariaControls:xt,ariaCurrent:null,ariaDescribedBy:xt,ariaDetails:null,ariaDisabled:zt,ariaDropEffect:xt,ariaErrorMessage:null,ariaExpanded:zt,ariaFlowTo:xt,ariaGrabbed:zt,ariaHasPopup:null,ariaHidden:zt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:xt,ariaLevel:ce,ariaLive:null,ariaModal:zt,ariaMultiLine:zt,ariaMultiSelectable:zt,ariaOrientation:null,ariaOwns:xt,ariaPlaceholder:null,ariaPosInSet:ce,ariaPressed:zt,ariaReadOnly:zt,ariaRelevant:null,ariaRequired:zt,ariaRoleDescription:xt,ariaRowCount:ce,ariaRowIndex:ce,ariaRowSpan:ce,ariaSelected:zt,ariaSetSize:ce,ariaSort:null,ariaValueMax:ce,ariaValueMin:ce,ariaValueNow:ce,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function qP(e,t){return t in e?e[t]:t}function VP(e,t){return qP(e,t.toLowerCase())}const hB=Zl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Jo,acceptCharset:xt,accessKey:xt,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:xt,autoFocus:Ge,autoPlay:Ge,blocking:xt,capture:null,charSet:null,checked:Ge,cite:null,className:xt,cols:ce,colSpan:null,content:null,contentEditable:zt,controls:Ge,controlsList:xt,coords:ce|Jo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:ev,draggable:zt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:xt,height:ce,hidden:ev,high:ce,href:null,hrefLang:null,htmlFor:xt,httpEquiv:xt,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:xt,itemRef:xt,itemScope:Ge,itemType:xt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:ce,manifest:null,max:null,maxLength:ce,media:null,method:null,min:null,minLength:ce,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:ce,pattern:null,ping:xt,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:xt,required:Ge,reversed:Ge,rows:ce,rowSpan:ce,sandbox:xt,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:ce,sizes:null,slot:null,span:ce,spellCheck:zt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ce,step:null,style:null,tabIndex:ce,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:zt,width:ce,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:xt,axis:null,background:null,bgColor:null,border:ce,borderColor:null,bottomMargin:ce,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:ce,leftMargin:ce,link:null,longDesc:null,lowSrc:null,marginHeight:ce,marginWidth:ce,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:ce,rules:null,scheme:null,scrolling:zt,standby:null,summary:null,text:null,topMargin:ce,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ce,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:ce,security:null,unselectable:null},space:"html",transform:VP}),pB=Zl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:rr,accentHeight:ce,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ce,amplitude:ce,arabicForm:null,ascent:ce,attributeName:null,attributeType:null,azimuth:ce,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ce,by:null,calcMode:null,capHeight:ce,className:xt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ce,diffuseConstant:ce,direction:null,display:null,dur:null,divisor:ce,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:ce,enableBackground:null,end:null,event:null,exponent:ce,externalResourcesRequired:null,fill:null,fillOpacity:ce,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Jo,g2:Jo,glyphName:Jo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ce,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ce,horizOriginX:ce,horizOriginY:ce,id:null,ideographic:ce,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ce,k:ce,k1:ce,k2:ce,k3:ce,k4:ce,kernelMatrix:rr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ce,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ce,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ce,overlineThickness:ce,paintOrder:null,panose1:null,path:null,pathLength:ce,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:xt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ce,pointsAtY:ce,pointsAtZ:ce,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:rr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:rr,rev:rr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:rr,requiredFeatures:rr,requiredFonts:rr,requiredFormats:rr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ce,specularExponent:ce,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ce,strikethroughThickness:ce,string:null,stroke:null,strokeDashArray:rr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ce,strokeOpacity:ce,strokeWidth:null,style:null,surfaceScale:ce,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:rr,tabIndex:ce,tableValues:null,target:null,targetX:ce,targetY:ce,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:rr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ce,underlineThickness:ce,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ce,values:null,vAlphabetic:ce,vMathematical:ce,vectorEffect:null,vHanging:ce,vIdeographic:ce,version:null,vertAdvY:ce,vertOriginX:ce,vertOriginY:ce,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ce,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:qP}),HP=Zl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),GP=Zl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:VP}),WP=Zl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),fB={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},mB=/[A-Z]/g,Vj=/-[a-z]/g,gB=/^data[-\w.:]+$/i;function xB(e,t){const n=Zx(t);let r=t,i=tr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&gB.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Vj,yB);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Vj.test(a)){let o=a.replace(mB,vB);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=w0}return new i(r,t)}function vB(e){return"-"+e.toLowerCase()}function yB(e){return e.charAt(1).toUpperCase()}const wB=UP([BP,hB,HP,GP,WP],"html"),b0=UP([BP,pB,HP,GP,WP],"svg");function bB(e){return e.join(" ").trim()}var j0={},Hj=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,jB=/\n/g,NB=/^\s*/,_B=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,SB=/^:\s*/,CB=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,kB=/^[;\s]*/,EB=/^\s+|\s+$/g,PB=`
`,Gj="/",Wj="*",ba="",TB="comment",AB="declaration",RB=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(x){var g=x.match(jB);g&&(n+=g.length);var b=x.lastIndexOf(PB);r=~b?x.length-b:r+x.length}function a(){var x={line:n,column:r};return function(g){return g.position=new o(x),d(),g}}function o(x){this.start=x,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(x){var g=new Error(t.source+":"+n+":"+r+": "+x);if(g.reason=x,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(x){var g=x.exec(e);if(g){var b=g[0];return i(b),e=e.slice(b.length),g}}function d(){c(NB)}function u(x){var g;for(x=x||[];g=h();)g!==!1&&x.push(g);return x}function h(){var x=a();if(!(Gj!=e.charAt(0)||Wj!=e.charAt(1))){for(var g=2;ba!=e.charAt(g)&&(Wj!=e.charAt(g)||Gj!=e.charAt(g+1));)++g;if(g+=2,ba===e.charAt(g-1))return l("End of comment missing");var b=e.slice(2,g-2);return r+=2,i(b),e=e.slice(g),r+=2,x({type:TB,comment:b})}}function f(){var x=a(),g=c(_B);if(g){if(h(),!c(SB))return l("property missing ':'");var b=c(CB),v=x({type:AB,property:Kj(g[0].replace(Hj,ba)),value:b?Kj(b[0].replace(Hj,ba)):ba});return c(kB),v}}function m(){var x=[];u(x);for(var g;g=f();)g!==!1&&(x.push(g),u(x));return x}return d(),m()};function Kj(e){return e?e.replace(EB,ba):ba}var IB=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j0,"__esModule",{value:!0});j0.default=OB;var DB=IB(RB);function OB(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,DB.default)(e),i=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;i?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.camelCase=void 0;var MB=/^--[a-zA-Z0-9_-]+$/,LB=/-([a-z])/g,$B=/^[^-]+$/,FB=/^-(webkit|moz|ms|o|khtml)-/,zB=/^-(ms)-/,UB=function(e){return!e||$B.test(e)||MB.test(e)},BB=function(e,t){return t.toUpperCase()},Qj=function(e,t){return"".concat(t,"-")},qB=function(e,t){return t===void 0&&(t={}),UB(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(zB,Qj):e=e.replace(FB,Qj),e.replace(LB,BB))};bf.camelCase=qB;var VB=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},HB=VB(j0),GB=bf;function nv(e,t){var n={};return!e||typeof e!="string"||(0,HB.default)(e,function(r,i){r&&i&&(n[(0,GB.camelCase)(r,t)]=i)}),n}nv.default=nv;var WB=nv;const KB=Dl(WB),KP=QP("end"),N0=QP("start");function QP(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function QB(e){const t=N0(e),n=KP(e);if(t&&n)return{start:t,end:n}}function Uc(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Yj(e.position):"start"in e||"end"in e?Yj(e):"line"in e||"column"in e?rv(e):""}function rv(e){return Xj(e&&e.line)+":"+Xj(e&&e.column)}function Yj(e){return rv(e&&e.start)+"-"+rv(e&&e.end)}function Xj(e){return e&&typeof e=="number"?e:1}class bn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=Uc(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}bn.prototype.file="";bn.prototype.name="";bn.prototype.reason="";bn.prototype.message="";bn.prototype.stack="";bn.prototype.column=void 0;bn.prototype.line=void 0;bn.prototype.ancestors=void 0;bn.prototype.cause=void 0;bn.prototype.fatal=void 0;bn.prototype.place=void 0;bn.prototype.ruleId=void 0;bn.prototype.source=void 0;const _0={}.hasOwnProperty,YB=new Map,XB=/[A-Z]/g,JB=new Set(["table","tbody","thead","tfoot","tr"]),ZB=new Set(["td","th"]),YP="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function e7(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=l7(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=o7(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?b0:wB,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=XP(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function XP(e,t,n){if(t.type==="element")return t7(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return n7(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return s7(e,t,n);if(t.type==="mdxjsEsm")return r7(e,t);if(t.type==="root")return i7(e,t,n);if(t.type==="text")return a7(e,t)}function t7(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=b0,e.schema=i),e.ancestors.push(t);const a=ZP(e,t.tagName,!1),o=c7(e,t);let l=C0(e,t);return JB.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!dB(c):!0})),JP(e,o,a,t),S0(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function n7(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}vd(e,t.position)}function r7(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);vd(e,t.position)}function s7(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=b0,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:ZP(e,t.name,!0),o=d7(e,t),l=C0(e,t);return JP(e,o,a,t),S0(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function i7(e,t,n){const r={};return S0(r,C0(e,t)),e.create(t,e.Fragment,r,n)}function a7(e,t){return t.value}function JP(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function S0(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function o7(e,t,n){return r;function r(i,a,o,l){const d=Array.isArray(o.children)?n:t;return l?d(a,o,l):d(a,o)}}function l7(e,t){return n;function n(r,i,a,o){const l=Array.isArray(a.children),c=N0(r);return t(i,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function c7(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&_0.call(t.properties,i)){const a=u7(e,i,t.properties[i]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&ZB.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function d7(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else vd(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else vd(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function C0(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:YB;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=i.get(c)||0;o=c+"-"+d,i.set(c,d+1)}}const l=XP(e,a,o);l!==void 0&&n.push(l)}return n}function u7(e,t,n){const r=xB(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?iB(n):bB(n)),r.property==="style"){let i=typeof n=="object"?n:h7(e,String(n));return e.stylePropertyNameCase==="css"&&(i=p7(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?fB[r.property]||r.property:r.attribute,n]}}function h7(e,t){try{return KB(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new bn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=YP+"#cannot-parse-style-attribute",i}}function ZP(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const l=Uj(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=Uj(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return _0.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);vd(e)}function vd(e,t){const n=new bn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=YP+"#cannot-handle-mdx-estrees-without-createevaluater",n}function p7(e){const t={};let n;for(n in e)_0.call(e,n)&&(t[f7(n)]=e[n]);return t}function f7(e){let t=e.replace(XB,m7);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function m7(e){return"-"+e.toLowerCase()}const Am={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},g7={};function x7(e,t){const n=g7,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return eT(e,r,i)}function eT(e,t,n){if(v7(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Jj(e.children,t,n)}return Array.isArray(e)?Jj(e,t,n):""}function Jj(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=eT(e[i],t,n);return r.join("")}function v7(e){return!!(e&&typeof e=="object")}const Zj=document.createElement("i");function k0(e){const t="&"+e+";";Zj.innerHTML=t;const n=Zj.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ks(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Cr(e,t){return e.length>0?(ks(e,e.length,0,t),e):t}const e1={}.hasOwnProperty;function y7(e){const t={};let n=-1;for(;++n<e.length;)w7(t,e[n]);return t}function w7(e,t){let n;for(n in t){const i=(e1.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){e1.call(i,o)||(i[o]=[]);const l=a[o];b7(i[o],Array.isArray(l)?l:l?[l]:[])}}}function b7(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ks(e,0,0,r)}function tT(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Zo(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xs=da(/[A-Za-z]/),ur=da(/[\dA-Za-z]/),j7=da(/[#-'*+\--9=?A-Z^-~]/);function sv(e){return e!==null&&(e<32||e===127)}const iv=da(/\d/),N7=da(/[\dA-Fa-f]/),_7=da(/[!-/:-@[-`{-~]/);function Oe(e){return e!==null&&e<-2}function Jn(e){return e!==null&&(e<0||e===32)}function at(e){return e===-2||e===-1||e===32}const S7=da(new RegExp("\\p{P}|\\p{S}","u")),C7=da(/\s/);function da(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ec(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&ur(e.charCodeAt(n+1))&&ur(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),i=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function yt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return at(c)?(e.enter(n),l(c)):t(c)}function l(c){return at(c)&&a++<i?(e.consume(c),l):(e.exit(n),t(c))}}const k7={tokenize:E7};function E7(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),yt(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Oe(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const P7={tokenize:T7},t1={tokenize:A7};function T7(e){const t=this,n=[];let r=0,i,a,o;return l;function l(w){if(r<n.length){const k=n[r];return t.containerState=k[1],e.attempt(k[0].continuation,c,d)(w)}return d(w)}function c(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();const k=t.events.length;let S=k,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){C=t.events[S][1].end;break}v(r);let N=k;for(;N<t.events.length;)t.events[N][1].end={...C},N++;return ks(t.events,S+1,0,t.events.slice(k)),t.events.length=N,d(w)}return l(w)}function d(w){if(r===n.length){if(!i)return f(w);if(i.currentConstruct&&i.currentConstruct.concrete)return x(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(t1,u,h)(w)}function u(w){return i&&y(),v(r),f(w)}function h(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(w)}function f(w){return t.containerState={},e.attempt(t1,m,x)(w)}function m(w){return r++,n.push([t.currentConstruct,t.containerState]),f(w)}function x(w){if(w===null){i&&y(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),g(w)}function g(w){if(w===null){b(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return Oe(w)?(e.consume(w),b(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),g)}function b(w,k){const S=t.sliceStream(w);if(k&&S.push(null),w.previous=a,a&&(a.next=w),a=w,i.defineSkip(w.start),i.write(S),t.parser.lazy[w.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const N=t.events.length;let j=N,_,E;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){if(_){E=t.events[j][1].end;break}_=!0}for(v(r),C=N;C<t.events.length;)t.events[C][1].end={...E},C++;ks(t.events,j+1,0,t.events.slice(N)),t.events.length=C}}function v(w){let k=n.length;for(;k-- >w;){const S=n[k];t.containerState=S[1],S[0].exit.call(t,e)}n.length=w}function y(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function A7(e,t,n){return yt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function n1(e){if(e===null||Jn(e)||C7(e))return 1;if(S7(e))return 2}function E0(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const av={name:"attention",resolveAll:R7,tokenize:I7};function R7(e,t){let n=-1,r,i,a,o,l,c,d,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};r1(h,-c),r1(f,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=Cr(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=Cr(d,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=Cr(d,E0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=Cr(d,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,d=Cr(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ks(e,r-1,n-r+3,d),n=r+d.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function I7(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=n1(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const d=e.exit("attentionSequence"),u=n1(c),h=!u||u===2&&i||n.includes(c),f=!i||i===2&&u||n.includes(r);return d._open=!!(a===42?h:h&&(i||!f)),d._close=!!(a===42?f:f&&(u||!h)),t(c)}}function r1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const D7={name:"autolink",tokenize:O7};function O7(e,t,n){let r=0;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(m){return xs(m)?(e.consume(m),o):m===64?n(m):d(m)}function o(m){return m===43||m===45||m===46||ur(m)?(r=1,l(m)):d(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||ur(m))&&r++<32?(e.consume(m),l):(r=0,d(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||sv(m)?n(m):(e.consume(m),c)}function d(m){return m===64?(e.consume(m),u):j7(m)?(e.consume(m),d):n(m)}function u(m){return ur(m)?h(m):n(m)}function h(m){return m===46?(e.consume(m),r=0,u):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):f(m)}function f(m){if((m===45||ur(m))&&r++<63){const x=m===45?f:h;return e.consume(m),x}return n(m)}}const jf={partial:!0,tokenize:M7};function M7(e,t,n){return r;function r(a){return at(a)?yt(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||Oe(a)?t(a):n(a)}}const nT={continuation:{tokenize:$7},exit:F7,name:"blockQuote",tokenize:L7};function L7(e,t,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return at(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function $7(e,t,n){const r=this;return i;function i(o){return at(o)?yt(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(nT,t,n)(o)}}function F7(e){e.exit("blockQuote")}const rT={name:"characterEscape",tokenize:z7};function z7(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return _7(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const sT={name:"characterReference",tokenize:U7};function U7(e,t,n){const r=this;let i=0,a,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=ur,u(h))}function d(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=N7,u):(e.enter("characterReferenceValue"),a=7,o=iv,u(h))}function u(h){if(h===59&&i){const f=e.exit("characterReferenceValue");return o===ur&&!k0(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&i++<a?(e.consume(h),u):n(h)}}const s1={partial:!0,tokenize:q7},i1={concrete:!0,name:"codeFenced",tokenize:B7};function B7(e,t,n){const r=this,i={partial:!0,tokenize:S};let a=0,o=0,l;return c;function c(C){return d(C)}function d(C){const N=r.events[r.events.length-1];return a=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,l=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===l?(o++,e.consume(C),u):o<3?n(C):(e.exit("codeFencedFenceSequence"),at(C)?yt(e,h,"whitespace")(C):h(C))}function h(C){return C===null||Oe(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(s1,g,k)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||Oe(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(C)):at(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),yt(e,m,"whitespace")(C)):C===96&&C===l?n(C):(e.consume(C),f)}function m(C){return C===null||Oe(C)?h(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===null||Oe(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(C)):C===96&&C===l?n(C):(e.consume(C),x)}function g(C){return e.attempt(i,k,b)(C)}function b(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),v}function v(C){return a>0&&at(C)?yt(e,y,"linePrefix",a+1)(C):y(C)}function y(C){return C===null||Oe(C)?e.check(s1,g,k)(C):(e.enter("codeFlowValue"),w(C))}function w(C){return C===null||Oe(C)?(e.exit("codeFlowValue"),y(C)):(e.consume(C),w)}function k(C){return e.exit("codeFenced"),t(C)}function S(C,N,j){let _=0;return E;function E(F){return C.enter("lineEnding"),C.consume(F),C.exit("lineEnding"),A}function A(F){return C.enter("codeFencedFence"),at(F)?yt(C,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):R(F)}function R(F){return F===l?(C.enter("codeFencedFenceSequence"),$(F)):j(F)}function $(F){return F===l?(_++,C.consume(F),$):_>=o?(C.exit("codeFencedFenceSequence"),at(F)?yt(C,B,"whitespace")(F):B(F)):j(F)}function B(F){return F===null||Oe(F)?(C.exit("codeFencedFence"),N(F)):j(F)}}}function q7(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Rm={name:"codeIndented",tokenize:H7},V7={partial:!0,tokenize:G7};function H7(e,t,n){const r=this;return i;function i(d){return e.enter("codeIndented"),yt(e,a,"linePrefix",5)(d)}function a(d){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):Oe(d)?e.attempt(V7,o,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||Oe(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function G7(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Oe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):yt(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):Oe(o)?i(o):n(o)}}const W7={name:"codeText",previous:Q7,resolve:K7,tokenize:Y7};function K7(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Q7(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Y7(e,t,n){let r=0,i,a;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(a=e.enter("codeTextSequence"),i=0,u(h)):Oe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||Oe(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),d)}function u(h){return h===96?(e.consume(h),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(a.type="codeTextData",d(h))}}class X7{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&hc(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),hc(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),hc(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);hc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);hc(this.left,n.reverse())}}}function hc(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function iT(e){const t={};let n=-1,r,i,a,o,l,c,d;const u=new X7(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,J7(u,n)),n=t[n],d=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(r),u.splice(i,n-i+1,l))}}return ks(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function J7(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,h,f=-1,m=n,x=0,g=0;const b=[g];for(;m;){for(;e.get(++i)[1]!==m;);a.push(i),m._tokenizer||(u=r.sliceStream(m),m.next||u.push(null),h&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(g=f+1,b.push(g),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):b.pop(),f=b.length;f--;){const v=l.slice(b[f],b[f+1]),y=a.pop();c.push([y,y+v.length-1]),e.splice(y,2,v)}for(c.reverse(),f=-1;++f<c.length;)d[x+c[f][0]]=x+c[f][1],x+=c[f][1]-c[f][0]-1;return d}const Z7={resolve:tq,tokenize:nq},eq={partial:!0,tokenize:rq};function tq(e){return iT(e),e}function nq(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):Oe(l)?e.check(eq,o,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function rq(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),yt(e,a,"linePrefix")}function a(o){if(o===null||Oe(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function aT(e,t,n,r,i,a,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(v),e.exit(a),f):v===null||v===32||v===41||sv(v)?n(v):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(v))}function f(v){return v===62?(e.enter(a),e.consume(v),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===62?(e.exit("chunkString"),e.exit(l),f(v)):v===null||v===60||Oe(v)?n(v):(e.consume(v),v===92?x:m)}function x(v){return v===60||v===62||v===92?(e.consume(v),m):m(v)}function g(v){return!u&&(v===null||v===41||Jn(v))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(v)):u<d&&v===40?(e.consume(v),u++,g):v===41?(e.consume(v),u--,g):v===null||v===32||v===40||sv(v)?n(v):(e.consume(v),v===92?b:g)}function b(v){return v===40||v===41||v===92?(e.consume(v),g):g(v)}}function oT(e,t,n,r,i,a){const o=this;let l=0,c;return d;function d(m){return e.enter(r),e.enter(i),e.consume(m),e.exit(i),e.enter(a),u}function u(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(a),e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):Oe(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||Oe(m)||l++>999?(e.exit("chunkString"),u(m)):(e.consume(m),c||(c=!at(m)),m===92?f:h)}function f(m){return m===91||m===92||m===93?(e.consume(m),l++,h):h(m)}}function lT(e,t,n,r,i,a){let o;return l;function l(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,c):n(f)}function c(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(a),d(f))}function d(f){return f===o?(e.exit(a),c(o)):f===null?n(f):Oe(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),yt(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||Oe(f)?(e.exit("chunkString"),d(f)):(e.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(e.consume(f),u):u(f)}}function Bc(e,t){let n;return r;function r(i){return Oe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):at(i)?yt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const sq={name:"definition",tokenize:aq},iq={partial:!0,tokenize:oq};function aq(e,t,n){const r=this;let i;return a;function a(m){return e.enter("definition"),o(m)}function o(m){return oT.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return i=Zo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return Jn(m)?Bc(e,d)(m):d(m)}function d(m){return aT(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function u(m){return e.attempt(iq,h,h)(m)}function h(m){return at(m)?yt(e,f,"whitespace")(m):f(m)}function f(m){return m===null||Oe(m)?(e.exit("definition"),r.parser.defined.push(i),t(m)):n(m)}}function oq(e,t,n){return r;function r(l){return Jn(l)?Bc(e,i)(l):n(l)}function i(l){return lT(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return at(l)?yt(e,o,"whitespace")(l):o(l)}function o(l){return l===null||Oe(l)?t(l):n(l)}}const lq={name:"hardBreakEscape",tokenize:cq};function cq(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return Oe(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const dq={name:"headingAtx",resolve:uq,tokenize:hq};function uq(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ks(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function hq(e,t,n){let r=0;return i;function i(u){return e.enter("atxHeading"),a(u)}function a(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||Jn(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||Oe(u)?(e.exit("atxHeading"),t(u)):at(u)?yt(e,l,"whitespace")(u):(e.enter("atxHeadingText"),d(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||Jn(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),d)}}const pq=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],a1=["pre","script","style","textarea"],fq={concrete:!0,name:"htmlFlow",resolveTo:xq,tokenize:vq},mq={partial:!0,tokenize:wq},gq={partial:!0,tokenize:yq};function xq(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function vq(e,t,n){const r=this;let i,a,o,l,c;return d;function d(P){return u(P)}function u(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),h}function h(P){return P===33?(e.consume(P),f):P===47?(e.consume(P),a=!0,g):P===63?(e.consume(P),i=3,r.interrupt?t:T):xs(P)?(e.consume(P),o=String.fromCharCode(P),b):n(P)}function f(P){return P===45?(e.consume(P),i=2,m):P===91?(e.consume(P),i=5,l=0,x):xs(P)?(e.consume(P),i=4,r.interrupt?t:T):n(P)}function m(P){return P===45?(e.consume(P),r.interrupt?t:T):n(P)}function x(P){const Z="CDATA[";return P===Z.charCodeAt(l++)?(e.consume(P),l===Z.length?r.interrupt?t:R:x):n(P)}function g(P){return xs(P)?(e.consume(P),o=String.fromCharCode(P),b):n(P)}function b(P){if(P===null||P===47||P===62||Jn(P)){const Z=P===47,ee=o.toLowerCase();return!Z&&!a&&a1.includes(ee)?(i=1,r.interrupt?t(P):R(P)):pq.includes(o.toLowerCase())?(i=6,Z?(e.consume(P),v):r.interrupt?t(P):R(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):a?y(P):w(P))}return P===45||ur(P)?(e.consume(P),o+=String.fromCharCode(P),b):n(P)}function v(P){return P===62?(e.consume(P),r.interrupt?t:R):n(P)}function y(P){return at(P)?(e.consume(P),y):E(P)}function w(P){return P===47?(e.consume(P),E):P===58||P===95||xs(P)?(e.consume(P),k):at(P)?(e.consume(P),w):E(P)}function k(P){return P===45||P===46||P===58||P===95||ur(P)?(e.consume(P),k):S(P)}function S(P){return P===61?(e.consume(P),C):at(P)?(e.consume(P),S):w(P)}function C(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,N):at(P)?(e.consume(P),C):j(P)}function N(P){return P===c?(e.consume(P),c=null,_):P===null||Oe(P)?n(P):(e.consume(P),N)}function j(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||Jn(P)?S(P):(e.consume(P),j)}function _(P){return P===47||P===62||at(P)?w(P):n(P)}function E(P){return P===62?(e.consume(P),A):n(P)}function A(P){return P===null||Oe(P)?R(P):at(P)?(e.consume(P),A):n(P)}function R(P){return P===45&&i===2?(e.consume(P),z):P===60&&i===1?(e.consume(P),q):P===62&&i===4?(e.consume(P),H):P===63&&i===3?(e.consume(P),T):P===93&&i===5?(e.consume(P),I):Oe(P)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(mq,O,$)(P)):P===null||Oe(P)?(e.exit("htmlFlowData"),$(P)):(e.consume(P),R)}function $(P){return e.check(gq,B,O)(P)}function B(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),F}function F(P){return P===null||Oe(P)?$(P):(e.enter("htmlFlowData"),R(P))}function z(P){return P===45?(e.consume(P),T):R(P)}function q(P){return P===47?(e.consume(P),o="",D):R(P)}function D(P){if(P===62){const Z=o.toLowerCase();return a1.includes(Z)?(e.consume(P),H):R(P)}return xs(P)&&o.length<8?(e.consume(P),o+=String.fromCharCode(P),D):R(P)}function I(P){return P===93?(e.consume(P),T):R(P)}function T(P){return P===62?(e.consume(P),H):P===45&&i===2?(e.consume(P),T):R(P)}function H(P){return P===null||Oe(P)?(e.exit("htmlFlowData"),O(P)):(e.consume(P),H)}function O(P){return e.exit("htmlFlow"),t(P)}}function yq(e,t,n){const r=this;return i;function i(o){return Oe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function wq(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(jf,t,n)}}const bq={name:"htmlText",tokenize:jq};function jq(e,t,n){const r=this;let i,a,o;return l;function l(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),d):T===47?(e.consume(T),S):T===63?(e.consume(T),w):xs(T)?(e.consume(T),j):n(T)}function d(T){return T===45?(e.consume(T),u):T===91?(e.consume(T),a=0,x):xs(T)?(e.consume(T),y):n(T)}function u(T){return T===45?(e.consume(T),m):n(T)}function h(T){return T===null?n(T):T===45?(e.consume(T),f):Oe(T)?(o=h,q(T)):(e.consume(T),h)}function f(T){return T===45?(e.consume(T),m):h(T)}function m(T){return T===62?z(T):T===45?f(T):h(T)}function x(T){const H="CDATA[";return T===H.charCodeAt(a++)?(e.consume(T),a===H.length?g:x):n(T)}function g(T){return T===null?n(T):T===93?(e.consume(T),b):Oe(T)?(o=g,q(T)):(e.consume(T),g)}function b(T){return T===93?(e.consume(T),v):g(T)}function v(T){return T===62?z(T):T===93?(e.consume(T),v):g(T)}function y(T){return T===null||T===62?z(T):Oe(T)?(o=y,q(T)):(e.consume(T),y)}function w(T){return T===null?n(T):T===63?(e.consume(T),k):Oe(T)?(o=w,q(T)):(e.consume(T),w)}function k(T){return T===62?z(T):w(T)}function S(T){return xs(T)?(e.consume(T),C):n(T)}function C(T){return T===45||ur(T)?(e.consume(T),C):N(T)}function N(T){return Oe(T)?(o=N,q(T)):at(T)?(e.consume(T),N):z(T)}function j(T){return T===45||ur(T)?(e.consume(T),j):T===47||T===62||Jn(T)?_(T):n(T)}function _(T){return T===47?(e.consume(T),z):T===58||T===95||xs(T)?(e.consume(T),E):Oe(T)?(o=_,q(T)):at(T)?(e.consume(T),_):z(T)}function E(T){return T===45||T===46||T===58||T===95||ur(T)?(e.consume(T),E):A(T)}function A(T){return T===61?(e.consume(T),R):Oe(T)?(o=A,q(T)):at(T)?(e.consume(T),A):_(T)}function R(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,$):Oe(T)?(o=R,q(T)):at(T)?(e.consume(T),R):(e.consume(T),B)}function $(T){return T===i?(e.consume(T),i=void 0,F):T===null?n(T):Oe(T)?(o=$,q(T)):(e.consume(T),$)}function B(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||Jn(T)?_(T):(e.consume(T),B)}function F(T){return T===47||T===62||Jn(T)?_(T):n(T)}function z(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function q(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),D}function D(T){return at(T)?yt(e,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):I(T)}function I(T){return e.enter("htmlTextData"),o(T)}}const P0={name:"labelEnd",resolveAll:Cq,resolveTo:kq,tokenize:Eq},Nq={tokenize:Pq},_q={tokenize:Tq},Sq={tokenize:Aq};function Cq(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&ks(e,0,e.length,n),e}function kq(e,t){let n=e.length,r=0,i,a,o,l;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=Cr(l,e.slice(a+1,a+r+3)),l=Cr(l,[["enter",u,t]]),l=Cr(l,E0(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=Cr(l,[["exit",u,t],e[o-2],e[o-1],["exit",d,t]]),l=Cr(l,e.slice(o+1)),l=Cr(l,[["exit",c,t]]),ks(e,a,e.length,l),e}function Eq(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(f){return a?a._inactive?h(f):(o=r.parser.defined.includes(Zo(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(Nq,u,o?u:h)(f):f===91?e.attempt(_q,u,o?d:h)(f):o?u(f):h(f)}function d(f){return e.attempt(Sq,u,h)(f)}function u(f){return t(f)}function h(f){return a._balanced=!0,n(f)}}function Pq(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return Jn(h)?Bc(e,a)(h):a(h)}function a(h){return h===41?u(h):aT(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Jn(h)?Bc(e,c)(h):u(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?lT(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function d(h){return Jn(h)?Bc(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Tq(e,t,n){const r=this;return i;function i(l){return oT.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Zo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function Aq(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const Rq={name:"labelStartImage",resolveAll:P0.resolveAll,tokenize:Iq};function Iq(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Dq={name:"labelStartLink",resolveAll:P0.resolveAll,tokenize:Oq};function Oq(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Im={name:"lineEnding",tokenize:Mq};function Mq(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),yt(e,t,"linePrefix")}}const dh={name:"thematicBreak",tokenize:Lq};function Lq(e,t,n){let r=0,i;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(e.enter("thematicBreakSequence"),c(d)):r>=3&&(d===null||Oe(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===i?(e.consume(d),r++,c):(e.exit("thematicBreakSequence"),at(d)?yt(e,l,"whitespace")(d):l(d))}}const Ln={continuation:{tokenize:Uq},exit:qq,name:"list",tokenize:zq},$q={partial:!0,tokenize:Vq},Fq={partial:!0,tokenize:Bq};function zq(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(m){const x=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:iv(m)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(dh,n,d)(m):d(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return iv(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),d(m)):n(m)}function d(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(jf,r.interrupt?n:u,e.attempt($q,f,h))}function u(m){return r.containerState.initialBlankLine=!0,a++,f(m)}function h(m){return at(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),f):n(m)}function f(m){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function Uq(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(jf,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,yt(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!at(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Fq,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,yt(e,e.attempt(Ln,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Bq(e,t,n){const r=this;return yt(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function qq(e){e.exit(this.containerState.type)}function Vq(e,t,n){const r=this;return yt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!at(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const o1={name:"setextUnderline",resolveTo:Hq,tokenize:Gq};function Hq(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Gq(e,t,n){const r=this;let i;return a;function a(d){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),at(d)?yt(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Oe(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const Wq={tokenize:Kq};function Kq(e){const t=this,n=e.attempt(jf,r,e.attempt(this.parser.constructs.flowInitial,i,yt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Z7,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Qq={resolveAll:dT()},Yq=cT("string"),Xq=cT("text");function cT(e){return{resolveAll:dT(e==="text"?Jq:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,l);return o;function o(u){return d(u)?a(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return d(u)?(n.exit("data"),a(u)):(n.consume(u),c)}function d(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const m=h[f];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function dT(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function Jq(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,l=0,c;for(;a--;){const d=i[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const Zq={42:Ln,43:Ln,45:Ln,48:Ln,49:Ln,50:Ln,51:Ln,52:Ln,53:Ln,54:Ln,55:Ln,56:Ln,57:Ln,62:nT},e9={91:sq},t9={[-2]:Rm,[-1]:Rm,32:Rm},n9={35:dq,42:dh,45:[o1,dh],60:fq,61:o1,95:dh,96:i1,126:i1},r9={38:sT,92:rT},s9={[-5]:Im,[-4]:Im,[-3]:Im,33:Rq,38:sT,42:av,60:[D7,bq],91:Dq,92:[lq,rT],93:P0,95:av,96:W7},i9={null:[av,Qq]},a9={null:[42,95]},o9={null:[]},l9=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:a9,contentInitial:e9,disable:o9,document:Zq,flow:n9,flowInitial:t9,insideSpan:i9,string:r9,text:s9},Symbol.toStringTag,{value:"Module"}));function c9(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],l=[];const c={attempt:N(S),check:N(C),consume:y,enter:w,exit:k,interrupt:N(C,{interrupt:!0})},d={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:f,sliceStream:m,write:h};let u=t.tokenize.call(d,c);return t.resolveAll&&a.push(t),d;function h(A){return o=Cr(o,A),b(),o[o.length-1]!==null?[]:(j(t,0),d.events=E0(a,d.events,d),d.events)}function f(A,R){return u9(m(A),R)}function m(A){return d9(o,A)}function x(){const{_bufferIndex:A,_index:R,line:$,column:B,offset:F}=r;return{_bufferIndex:A,_index:R,line:$,column:B,offset:F}}function g(A){i[A.line]=A.column,E()}function b(){let A;for(;r._index<o.length;){const R=o[r._index];if(typeof R=="string")for(A=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===A&&r._bufferIndex<R.length;)v(R.charCodeAt(r._bufferIndex));else v(R)}}function v(A){u=u(A)}function y(A){Oe(A)?(r.line++,r.column=1,r.offset+=A===-3?2:1,E()):A!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=A}function w(A,R){const $=R||{};return $.type=A,$.start=x(),d.events.push(["enter",$,d]),l.push($),$}function k(A){const R=l.pop();return R.end=x(),d.events.push(["exit",R,d]),R}function S(A,R){j(A,R.from)}function C(A,R){R.restore()}function N(A,R){return $;function $(B,F,z){let q,D,I,T;return Array.isArray(B)?O(B):"tokenize"in B?O([B]):H(B);function H(W){return X;function X(ne){const se=ne!==null&&W[ne],fe=ne!==null&&W.null,de=[...Array.isArray(se)?se:se?[se]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return O(de)(ne)}}function O(W){return q=W,D=0,W.length===0?z:P(W[D])}function P(W){return X;function X(ne){return T=_(),I=W,W.partial||(d.currentConstruct=W),W.name&&d.parser.constructs.disable.null.includes(W.name)?ee():W.tokenize.call(R?Object.assign(Object.create(d),R):d,c,Z,ee)(ne)}}function Z(W){return A(I,T),F}function ee(W){return T.restore(),++D<q.length?P(q[D]):z}}}function j(A,R){A.resolveAll&&!a.includes(A)&&a.push(A),A.resolve&&ks(d.events,R,d.events.length-R,A.resolve(d.events.slice(R),d)),A.resolveTo&&(d.events=A.resolveTo(d.events,d))}function _(){const A=x(),R=d.previous,$=d.currentConstruct,B=d.events.length,F=Array.from(l);return{from:B,restore:z};function z(){r=A,d.previous=R,d.currentConstruct=$,d.events.length=B,l=F,E()}}function E(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function d9(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function u9(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function h9(e){const r={constructs:y7([l9,...(e||{}).extensions||[]]),content:i(k7),defined:[],document:i(P7),flow:i(Wq),lazy:{},string:i(Yq),text:i(Xq)};return r;function i(a){return o;function o(l){return c9(r,a,l)}}}function p9(e){for(;!iT(e););return e}const l1=/[\0\t\n\r]/g;function f9(){let e=1,t="",n=!0,r;return i;function i(a,o,l){const c=[];let d,u,h,f,m;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,t="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if(l1.lastIndex=h,d=l1.exec(a),f=d&&d.index!==void 0?d.index:a.length,m=a.charCodeAt(f),!d){t=a.slice(h);break}if(m===10&&h===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<f&&(c.push(a.slice(h,f)),e+=f-h),m){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const m9=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function g9(e){return e.replace(m9,x9)}function x9(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return tT(n.slice(a?2:1),a?16:10)}return k0(n)||e}const uT={}.hasOwnProperty;function v9(e,t,n){return typeof t!="string"&&(n=t,t=void 0),y9(n)(p9(h9(n).document().write(f9()(e,t,!0))))}function y9(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ce),autolinkProtocol:_,autolinkEmail:_,atxHeading:a(De),blockQuote:a(fe),characterEscape:_,characterReference:_,codeFenced:a(de),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(de,o),codeText:a(ge,o),codeTextData:_,data:_,codeFlowValue:_,definition:a(Ue),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Ie),hardBreakEscape:a(Se),hardBreakTrailing:a(Se),htmlFlow:a(Ke,o),htmlFlowData:_,htmlText:a(Ke,o),htmlTextData:_,image:a(Be),label:o,link:a(Ce),listItem:a(dn),listItemValue:f,listOrdered:a(Ve,h),listUnordered:a(Ve),paragraph:a(Mt),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(De),strong:a(Kt),thematicBreak:a(be)},exit:{atxHeading:c(),atxHeadingSequence:S,autolink:c(),autolinkEmail:se,autolinkProtocol:ne,blockQuote:c(),characterEscapeValue:E,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:W,characterReference:X,codeFenced:c(b),codeFencedFence:g,codeFencedFenceInfo:m,codeFencedFenceMeta:x,codeFlowValue:E,codeIndented:c(v),codeText:c(F),codeTextData:E,data:E,definition:c(),definitionDestinationString:k,definitionLabelString:y,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(R),hardBreakTrailing:c(R),htmlFlow:c($),htmlFlowData:E,htmlText:c(B),htmlTextData:E,image:c(q),label:I,labelText:D,lineEnding:A,link:c(z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Z,resourceDestinationString:T,resourceTitleString:H,resource:O,setextHeading:c(j),setextHeadingLineSequence:N,setextHeadingText:C,strong:c(),thematicBreak:c()}};hT(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(V){let Y={type:"root",children:[]};const ye={stack:[Y],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:u,data:n},Pe=[];let Fe=-1;for(;++Fe<V.length;)if(V[Fe][1].type==="listOrdered"||V[Fe][1].type==="listUnordered")if(V[Fe][0]==="enter")Pe.push(Fe);else{const G=Pe.pop();Fe=i(V,G,Fe)}for(Fe=-1;++Fe<V.length;){const G=t[V[Fe][0]];uT.call(G,V[Fe][1].type)&&G[V[Fe][1].type].call(Object.assign({sliceSerialize:V[Fe][2].sliceSerialize},ye),V[Fe][1])}if(ye.tokenStack.length>0){const G=ye.tokenStack[ye.tokenStack.length-1];(G[1]||c1).call(ye,void 0,G[0])}for(Y.position={start:hi(V.length>0?V[0][1].start:{line:1,column:1,offset:0}),end:hi(V.length>0?V[V.length-2][1].end:{line:1,column:1,offset:0})},Fe=-1;++Fe<t.transforms.length;)Y=t.transforms[Fe](Y)||Y;return Y}function i(V,Y,ye){let Pe=Y-1,Fe=-1,G=!1,ke,Je,Lt,$t;for(;++Pe<=ye;){const K=V[Pe];switch(K[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{K[0]==="enter"?Fe++:Fe--,$t=void 0;break}case"lineEndingBlank":{K[0]==="enter"&&(ke&&!$t&&!Fe&&!Lt&&(Lt=Pe),$t=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:$t=void 0}if(!Fe&&K[0]==="enter"&&K[1].type==="listItemPrefix"||Fe===-1&&K[0]==="exit"&&(K[1].type==="listUnordered"||K[1].type==="listOrdered")){if(ke){let Le=Pe;for(Je=void 0;Le--;){const _e=V[Le];if(_e[1].type==="lineEnding"||_e[1].type==="lineEndingBlank"){if(_e[0]==="exit")continue;Je&&(V[Je][1].type="lineEndingBlank",G=!0),_e[1].type="lineEnding",Je=Le}else if(!(_e[1].type==="linePrefix"||_e[1].type==="blockQuotePrefix"||_e[1].type==="blockQuotePrefixWhitespace"||_e[1].type==="blockQuoteMarker"||_e[1].type==="listItemIndent"))break}Lt&&(!Je||Lt<Je)&&(ke._spread=!0),ke.end=Object.assign({},Je?V[Je][1].start:K[1].end),V.splice(Je||Pe,0,["exit",ke,K[2]]),Pe++,ye++}if(K[1].type==="listItemPrefix"){const Le={type:"listItem",_spread:!1,start:Object.assign({},K[1].start),end:void 0};ke=Le,V.splice(Pe,0,["enter",Le,K[2]]),Pe++,ye++,Lt=void 0,$t=!0}}}return V[Y][1]._spread=G,ye}function a(V,Y){return ye;function ye(Pe){l.call(this,V(Pe),Pe),Y&&Y.call(this,Pe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(V,Y,ye){this.stack[this.stack.length-1].children.push(V),this.stack.push(V),this.tokenStack.push([Y,ye||void 0]),V.position={start:hi(Y.start),end:void 0}}function c(V){return Y;function Y(ye){V&&V.call(this,ye),d.call(this,ye)}}function d(V,Y){const ye=this.stack.pop(),Pe=this.tokenStack.pop();if(Pe)Pe[0].type!==V.type&&(Y?Y.call(this,V,Pe[0]):(Pe[1]||c1).call(this,V,Pe[0]));else throw new Error("Cannot close `"+V.type+"` ("+Uc({start:V.start,end:V.end})+"): it’s not open");ye.position.end=hi(V.end)}function u(){return x7(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(V){if(this.data.expectingFirstListItemValue){const Y=this.stack[this.stack.length-2];Y.start=Number.parseInt(this.sliceSerialize(V),10),this.data.expectingFirstListItemValue=void 0}}function m(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.lang=V}function x(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.meta=V}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.value=V.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.value=V.replace(/(\r?\n|\r)$/g,"")}function y(V){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.label=Y,ye.identifier=Zo(this.sliceSerialize(V)).toLowerCase()}function w(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.title=V}function k(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.url=V}function S(V){const Y=this.stack[this.stack.length-1];if(!Y.depth){const ye=this.sliceSerialize(V).length;Y.depth=ye}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function N(V){const Y=this.stack[this.stack.length-1];Y.depth=this.sliceSerialize(V).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function _(V){const ye=this.stack[this.stack.length-1].children;let Pe=ye[ye.length-1];(!Pe||Pe.type!=="text")&&(Pe=ie(),Pe.position={start:hi(V.start),end:void 0},ye.push(Pe)),this.stack.push(Pe)}function E(V){const Y=this.stack.pop();Y.value+=this.sliceSerialize(V),Y.position.end=hi(V.end)}function A(V){const Y=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=Y.children[Y.children.length-1];ye.position.end=hi(V.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Y.type)&&(_.call(this,V),E.call(this,V))}function R(){this.data.atHardBreak=!0}function $(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.value=V}function B(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.value=V}function F(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.value=V}function z(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=Y,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function q(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=Y,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function D(V){const Y=this.sliceSerialize(V),ye=this.stack[this.stack.length-2];ye.label=g9(Y),ye.identifier=Zo(Y).toLowerCase()}function I(){const V=this.stack[this.stack.length-1],Y=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const Pe=V.children;ye.children=Pe}else ye.alt=Y}function T(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.url=V}function H(){const V=this.resume(),Y=this.stack[this.stack.length-1];Y.title=V}function O(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Z(V){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.label=Y,ye.identifier=Zo(this.sliceSerialize(V)).toLowerCase(),this.data.referenceType="full"}function ee(V){this.data.characterReferenceType=V.type}function W(V){const Y=this.sliceSerialize(V),ye=this.data.characterReferenceType;let Pe;ye?(Pe=tT(Y,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Pe=k0(Y);const Fe=this.stack[this.stack.length-1];Fe.value+=Pe}function X(V){const Y=this.stack.pop();Y.position.end=hi(V.end)}function ne(V){E.call(this,V);const Y=this.stack[this.stack.length-1];Y.url=this.sliceSerialize(V)}function se(V){E.call(this,V);const Y=this.stack[this.stack.length-1];Y.url="mailto:"+this.sliceSerialize(V)}function fe(){return{type:"blockquote",children:[]}}function de(){return{type:"code",lang:null,meta:null,value:""}}function ge(){return{type:"inlineCode",value:""}}function Ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ie(){return{type:"emphasis",children:[]}}function De(){return{type:"heading",depth:0,children:[]}}function Se(){return{type:"break"}}function Ke(){return{type:"html",value:""}}function Be(){return{type:"image",title:null,url:"",alt:null}}function Ce(){return{type:"link",title:null,url:"",children:[]}}function Ve(V){return{type:"list",ordered:V.type==="listOrdered",start:null,spread:V._spread,children:[]}}function dn(V){return{type:"listItem",spread:V._spread,checked:null,children:[]}}function Mt(){return{type:"paragraph",children:[]}}function Kt(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function be(){return{type:"thematicBreak"}}}function hi(e){return{line:e.line,column:e.column,offset:e.offset}}function hT(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?hT(e,r):w9(e,r)}}function w9(e,t){let n;for(n in t)if(uT.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function c1(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Uc({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Uc({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Uc({start:t.start,end:t.end})+") is still open")}function b9(e){const t=this;t.parser=n;function n(r){return v9(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function j9(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function N9(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function _9(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function S9(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function C9(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function k9(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=ec(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function E9(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function P9(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function pT(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function T9(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return pT(e,t);const i={src:ec(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function A9(e,t){const n={src:ec(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function R9(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function I9(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return pT(e,t);const i={href:ec(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function D9(e,t){const n={href:ec(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function O9(e,t,n){const r=e.all(t),i=n?M9(n):fT(t),a={},o=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(i||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function M9(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=fT(n[r])}return t}function fT(e){const t=e.spread;return t??e.children.length>1}function L9(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function $9(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function F9(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function z9(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function U9(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=N0(t.children[1]),c=KP(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function B9(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const h=t.children[c],f={},m=o?o[c]:void 0;m&&(f.align=m);let x={type:"element",tagName:a,properties:f,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),d.push(x)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,u),e.applyData(t,u)}function q9(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const d1=9,u1=32;function V9(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(h1(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(h1(t.slice(i),i>0,!1)),a.join("")}function h1(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===d1||a===u1;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===d1||a===u1;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function H9(e,t){const n={type:"text",value:V9(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function G9(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const W9={blockquote:j9,break:N9,code:_9,delete:S9,emphasis:C9,footnoteReference:k9,heading:E9,html:P9,imageReference:T9,image:A9,inlineCode:R9,linkReference:I9,link:D9,listItem:O9,list:L9,paragraph:$9,root:F9,strong:z9,table:U9,tableCell:q9,tableRow:B9,text:H9,thematicBreak:G9,toml:$u,yaml:$u,definition:$u,footnoteDefinition:$u};function $u(){}const mT=-1,Nf=0,qc=1,cp=2,T0=3,A0=4,R0=5,I0=6,gT=7,xT=8,p1=typeof self=="object"?self:globalThis,K9=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case Nf:case mT:return n(o,i);case qc:{const l=n([],i);for(const c of o)l.push(r(c));return l}case cp:{const l=n({},i);for(const[c,d]of o)l[r(c)]=r(d);return l}case T0:return n(new Date(o),i);case A0:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case R0:{const l=n(new Map,i);for(const[c,d]of o)l.set(r(c),r(d));return l}case I0:{const l=n(new Set,i);for(const c of o)l.add(r(c));return l}case gT:{const{name:l,message:c}=o;return n(new p1[l](c),i)}case xT:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new p1[a](o),i)};return r},f1=e=>K9(new Map,e)(0),vo="",{toString:Q9}={},{keys:Y9}=Object,pc=e=>{const t=typeof e;if(t!=="object"||!e)return[Nf,t];const n=Q9.call(e).slice(8,-1);switch(n){case"Array":return[qc,vo];case"Object":return[cp,vo];case"Date":return[T0,vo];case"RegExp":return[A0,vo];case"Map":return[R0,vo];case"Set":return[I0,vo];case"DataView":return[qc,n]}return n.includes("Array")?[qc,n]:n.includes("Error")?[gT,n]:[cp,n]},Fu=([e,t])=>e===Nf&&(t==="function"||t==="symbol"),X9=(e,t,n,r)=>{const i=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=pc(o);switch(l){case Nf:{let u=o;switch(c){case"bigint":l=xT,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([mT],o)}return i([l,u],o)}case qc:{if(c){let f=o;return c==="DataView"?f=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(o)),i([c,[...f]],o)}const u=[],h=i([l,u],o);for(const f of o)u.push(a(f));return h}case cp:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const u=[],h=i([l,u],o);for(const f of Y9(o))(e||!Fu(pc(o[f])))&&u.push([a(f),a(o[f])]);return h}case T0:return i([l,o.toISOString()],o);case A0:{const{source:u,flags:h}=o;return i([l,{source:u,flags:h}],o)}case R0:{const u=[],h=i([l,u],o);for(const[f,m]of o)(e||!(Fu(pc(f))||Fu(pc(m))))&&u.push([a(f),a(m)]);return h}case I0:{const u=[],h=i([l,u],o);for(const f of o)(e||!Fu(pc(f)))&&u.push(a(f));return h}}const{message:d}=o;return i([l,{name:c,message:d}],o)};return a},m1=(e,{json:t,lossy:n}={})=>{const r=[];return X9(!(t||n),!!t,new Map,r)(e),r},dp=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?f1(m1(e,t)):structuredClone(e):(e,t)=>f1(m1(e,t));function J9(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Z9(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function eV(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||J9,r=e.options.footnoteBackLabel||Z9,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const u=e.all(d),h=String(d.identifier).toUpperCase(),f=ec(h.toLowerCase());let m=0;const x=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++m<=g;){x.length>0&&x.push({type:"text",value:" "});let y=typeof n=="string"?n:n(c,m);typeof y=="string"&&(y={type:"text",value:y}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const y=b.children[b.children.length-1];y&&y.type==="text"?y.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...x)}else u.push(...x);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(d,v),l.push(v)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...dp(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const vT=function(e){if(e==null)return sV;if(typeof e=="function")return _f(e);if(typeof e=="object")return Array.isArray(e)?tV(e):nV(e);if(typeof e=="string")return rV(e);throw new Error("Expected function, string, or object as test")};function tV(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=vT(e[n]);return _f(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function nV(e){const t=e;return _f(n);function n(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function rV(e){return _f(t);function t(n){return n&&n.type===e}}function _f(e){return t;function t(n,r,i){return!!(iV(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function sV(){return!0}function iV(e){return e!==null&&typeof e=="object"&&"type"in e}const yT=[],aV=!0,g1=!1,oV="skip";function lV(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const a=vT(i),o=r?-1:1;l(e,void 0,[])();function l(c,d,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return f;function f(){let m=yT,x,g,b;if((!t||a(c,d,u[u.length-1]||void 0))&&(m=cV(n(c,u)),m[0]===g1))return m;if("children"in c&&c.children){const v=c;if(v.children&&m[0]!==oV)for(g=(r?v.children.length:-1)+o,b=u.concat(v);g>-1&&g<v.children.length;){const y=v.children[g];if(x=l(y,g,b)(),x[0]===g1)return x;g=typeof x[1]=="number"?x[1]:g+o}}return m}}}function cV(e){return Array.isArray(e)?e:typeof e=="number"?[aV,e]:e==null?yT:[e]}function wT(e,t,n,r){let i,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,i=n):(a=t,o=n,i=r),lV(e,a,l,i);function l(c,d){const u=d[d.length-1],h=u?u.children.indexOf(c):void 0;return o(c,h,u)}}const ov={}.hasOwnProperty,dV={};function uV(e,t){const n=t||dV,r=new Map,i=new Map,a=new Map,o={...W9,...n.handlers},l={all:d,applyData:pV,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:hV,wrap:mV};return wT(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),l;function c(u,h){const f=u.type,m=l.handlers[f];if(ov.call(l.handlers,f)&&m)return m(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in u){const{children:g,...b}=u,v=dp(b);return v.children=l.all(u),v}return dp(u)}return(l.options.unknownHandler||fV)(l,u,h)}function d(u){const h=[];if("children"in u){const f=u.children;let m=-1;for(;++m<f.length;){const x=l.one(f[m],u);if(x){if(m&&f[m-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=x1(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=x1(g.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function hV(e,t){e.position&&(t.position=QB(e))}function pV(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,dp(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function fV(e,t){const n=t.data||{},r="value"in t&&!(ov.call(n,"hProperties")||ov.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function mV(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function x1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function v1(e,t){const n=uV(e,t),r=n.one(e,void 0),i=eV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function gV(e,t){return e&&"run"in e?async function(n,r){const i=v1(n,{file:r,...t});await e.run(i,r)}:function(n,r){return v1(n,{file:r,...e||t})}}function y1(e){if(e)throw e}var uh=Object.prototype.hasOwnProperty,bT=Object.prototype.toString,w1=Object.defineProperty,b1=Object.getOwnPropertyDescriptor,j1=function(t){return typeof Array.isArray=="function"?Array.isArray(t):bT.call(t)==="[object Array]"},N1=function(t){if(!t||bT.call(t)!=="[object Object]")return!1;var n=uh.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&uh.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||uh.call(t,i)},_1=function(t,n){w1&&n.name==="__proto__"?w1(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},S1=function(t,n){if(n==="__proto__")if(uh.call(t,n)){if(b1)return b1(t,n).value}else return;return t[n]},xV=function e(){var t,n,r,i,a,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)r=S1(l,n),i=S1(t,n),l!==i&&(u&&i&&(N1(i)||(a=j1(i)))?(a?(a=!1,o=r&&j1(r)?r:[]):o=r&&N1(r)?r:{},_1(l,{name:n,newValue:e(u,o,i)})):typeof i<"u"&&_1(l,{name:n,newValue:i}));return l};const Dm=Dl(xV);function lv(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vV(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...d){const u=e[++a];let h=-1;if(c){o(c);return}for(;++h<i.length;)(d[h]===null||d[h]===void 0)&&(d[h]=i[h]);i=d,u?yV(u,l)(...d):o(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function yV(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(i);try{c=e.apply(this,o)}catch(d){const u=d;if(l&&n)throw u;return i(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,i):c instanceof Error?i(c):a(c))}function i(o,...l){n||(n=!0,t(o,...l))}function a(o){i(null,o)}}const ds={basename:wV,dirname:bV,extname:jV,join:NV,sep:"/"};function wV(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');eu(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function bV(e){if(eu(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function jV(e){eu(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function NV(...e){let t=-1,n;for(;++t<e.length;)eu(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":_V(n)}function _V(e){eu(e);const t=e.codePointAt(0)===47;let n=SV(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function SV(e,t){let n="",r=0,i=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function eu(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const CV={cwd:kV};function kV(){return"/"}function cv(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function EV(e){if(typeof e=="string")e=new URL(e);else if(!cv(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return PV(e)}function PV(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Om=["history","path","basename","stem","extname","dirname"];class jT{constructor(t){let n;t?cv(t)?n={path:t}:typeof t=="string"||TV(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":CV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Om.length;){const a=Om[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)Om.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ds.basename(this.path):void 0}set basename(t){Lm(t,"basename"),Mm(t,"basename"),this.path=ds.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ds.dirname(this.path):void 0}set dirname(t){C1(this.basename,"dirname"),this.path=ds.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ds.extname(this.path):void 0}set extname(t){if(Mm(t,"extname"),C1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ds.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){cv(t)&&(t=EV(t)),Lm(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ds.basename(this.path,this.extname):void 0}set stem(t){Lm(t,"stem"),Mm(t,"stem"),this.path=ds.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new bn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Mm(e,t){if(e&&e.includes(ds.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ds.sep+"`")}function Lm(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function C1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function TV(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const AV=function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},RV={}.hasOwnProperty;class D0 extends AV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=vV()}copy(){const t=new D0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Dm(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(zm("data",this.frozen),this.namespace[t]=n,this):RV.call(this.namespace,t)&&this.namespace[t]||void 0:t?(zm("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=zu(t),r=this.parser||this.Parser;return $m("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),$m("process",this.parser||this.Parser),Fm("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const l=zu(t),c=r.parse(l);r.run(c,l,function(u,h,f){if(u||!h||!f)return d(u);const m=h,x=r.stringify(m,f);OV(x)?f.value=x:f.result=x,d(u,f)});function d(u,h){u||!h?o(u):a?a(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),$m("processSync",this.parser||this.Parser),Fm("processSync",this.compiler||this.Compiler),this.process(t,i),E1("processSync","process",n),r;function i(a,o){n=!0,y1(a),r=o}}run(t,n,r){k1(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=zu(n);i.run(t,c,d);function d(u,h,f){const m=h||t;u?l(u):o?o(m):r(void 0,m,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),E1("runSync","run",r),i;function a(o,l){y1(o),i=l,r=!0}}stringify(t,n){this.freeze();const r=zu(n),i=this.compiler||this.Compiler;return Fm("stringify",i),k1(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(zm("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...h]=d;c(u,h)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=Dm(!0,i.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const h=d[u];a(h)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===d){f=h;break}if(f===-1)r.push([d,...u]);else if(u.length>0){let[m,...x]=u;const g=r[f][1];lv(g)&&lv(m)&&(m=Dm(!0,g,m)),r[f]=[d,m,...x]}}}}const IV=new D0().freeze();function $m(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Fm(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function zm(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function k1(e){if(!lv(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function E1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function zu(e){return DV(e)?e:new jT(e)}function DV(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function OV(e){return typeof e=="string"||MV(e)}function MV(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const LV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",P1=[],T1={allowDangerousHtml:!0},$V=/^(https?|ircs?|mailto|xmpp)$/i,FV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function zV(e){const t=UV(e),n=BV(e);return qV(t.runSync(t.parse(n),n),e)}function UV(e){const t=e.rehypePlugins||P1,n=e.remarkPlugins||P1,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...T1}:T1;return IV().use(b9).use(n).use(gV,r).use(t)}function BV(e){const t=e.children||"",n=new jT;return typeof t=="string"&&(n.value=t),n}function qV(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||VV;for(const u of FV)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+LV+u.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),wT(e,d),e7(e,{Fragment:s.Fragment,components:i,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function d(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let m;for(m in Am)if(Object.hasOwn(Am,m)&&Object.hasOwn(u.properties,m)){const x=u.properties[m],g=Am[m];(g===null||g.includes(u.tagName))&&(u.properties[m]=c(String(x||""),m,u))}}if(u.type==="element"){let m=n?!n.includes(u.tagName):a?a.includes(u.tagName):!1;if(!m&&r&&typeof h=="number"&&(m=!r(u,h,f)),m&&f&&typeof h=="number")return l&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function VV(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||$V.test(e.slice(0,t))?e:""}const HV=({content:e,isEmpty:t,areaTitle:n,onEdit:r})=>t?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ws,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsxs("h3",{className:"text-lg font-medium mb-2",children:["No ",n," Guidance Found"]}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Create guidance content for this area to help configure AI assistance."}),s.jsxs(U,{onClick:r,children:[s.jsx(Di,{className:"h-4 w-4 mr-2"}),"Create Guidance Content"]})]}):s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx(zV,{children:typeof e=="string"?e:"```json\n"+JSON.stringify(e,null,2)+"\n```"})})});function GV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var O0="ScrollArea",[NT,GY]=wn(O0),[WV,Or]=NT(O0),_T=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=p.useState(null),[d,u]=p.useState(null),[h,f]=p.useState(null),[m,x]=p.useState(null),[g,b]=p.useState(null),[v,y]=p.useState(0),[w,k]=p.useState(0),[S,C]=p.useState(!1),[N,j]=p.useState(!1),_=$e(t,A=>c(A)),E=Yl(i);return s.jsx(WV,{scope:n,type:r,dir:E,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:N,onScrollbarYEnabledChange:j,onCornerWidthChange:y,onCornerHeightChange:k,children:s.jsx(je.div,{dir:E,...o,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});_T.displayName=O0;var ST="ScrollAreaViewport",CT=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:a,...o}=e,l=Or(ST,n),c=p.useRef(null),d=$e(t,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),s.jsx(je.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:rH({asChild:i,children:r},u=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});CT.displayName=ST;var Ts="ScrollAreaScrollbar",M0=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Or(Ts,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(KV,{...r,ref:t,forceMount:n}):i.type==="scroll"?s.jsx(QV,{...r,ref:t,forceMount:n}):i.type==="auto"?s.jsx(kT,{...r,ref:t,forceMount:n}):i.type==="always"?s.jsx(L0,{...r,ref:t}):null});M0.displayName=Ts;var KV=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Or(Ts,e.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Vt,{present:n||a,children:s.jsx(kT,{"data-state":a?"visible":"hidden",...r,ref:t})})}),QV=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Or(Ts,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Cf(()=>c("SCROLL_END"),100),[l,c]=GV("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),p.useEffect(()=>{const d=i.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const m=d[u];h!==m&&(c("SCROLL"),o()),h=m};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[i.viewport,a,c,o]),s.jsx(Vt,{present:n||l!=="hidden",children:s.jsx(L0,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ae(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ae(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),kT=p.forwardRef((e,t)=>{const n=Or(Ts,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,o]=p.useState(!1),l=e.orientation==="horizontal",c=Cf(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return Rl(n.viewport,c),Rl(n.content,c),s.jsx(Vt,{present:r||a,children:s.jsx(L0,{"data-state":a?"visible":"hidden",...i,ref:t})})}),L0=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Or(Ts,e.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=RT(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return tH(f,o.current,l,m)}return n==="horizontal"?s.jsx(YV,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,m=A1(f,l,i.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=h(f,i.dir))}}):n==="vertical"?s.jsx(XV,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,m=A1(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=h(f))}}):null}),YV=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Or(Ts,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=$e(t,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(PT,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sf(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),DT(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:hp(o.paddingLeft),paddingEnd:hp(o.paddingRight)}})}})}),XV=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Or(Ts,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=$e(t,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(PT,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sf(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const f=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),DT(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:hp(o.paddingTop),paddingEnd:hp(o.paddingBottom)}})}})}),[JV,ET]=NT(Ts),PT=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,m=Or(Ts,n),[x,g]=p.useState(null),b=$e(t,_=>g(_)),v=p.useRef(null),y=p.useRef(""),w=m.viewport,k=r.content-r.viewport,S=St(u),C=St(c),N=Cf(h,10);function j(_){if(v.current){const E=_.clientX-v.current.left,A=_.clientY-v.current.top;d({x:E,y:A})}}return p.useEffect(()=>{const _=E=>{const A=E.target;(x==null?void 0:x.contains(A))&&S(E,k)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[w,x,k,S]),p.useEffect(C,[r,C]),Rl(x,N),Rl(m.content,N),s.jsx(JV,{scope:n,scrollbar:x,hasThumb:i,onThumbChange:St(a),onThumbPointerUp:St(o),onThumbPositionChange:C,onThumbPointerDown:St(l),children:s.jsx(je.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:ae(e.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),v.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),j(_))}),onPointerMove:ae(e.onPointerMove,j),onPointerUp:ae(e.onPointerUp,_=>{const E=_.target;E.hasPointerCapture(_.pointerId)&&E.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),up="ScrollAreaThumb",TT=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ET(up,e.__scopeScrollArea);return s.jsx(Vt,{present:n||i.hasThumb,children:s.jsx(ZV,{ref:t,...r})})}),ZV=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=Or(up,n),o=ET(up,n),{onThumbPositionChange:l}=o,c=$e(t,h=>o.onThumbChange(h)),d=p.useRef(),u=Cf(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(u(),!d.current){const m=nH(h,l);d.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,u,l]),s.jsx(je.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ae(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),x=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:ae(e.onPointerUp,o.onThumbPointerUp)})});TT.displayName=up;var $0="ScrollAreaCorner",AT=p.forwardRef((e,t)=>{const n=Or($0,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(eH,{...e,ref:t}):null});AT.displayName=$0;var eH=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Or($0,n),[a,o]=p.useState(0),[l,c]=p.useState(0),d=!!(a&&l);return Rl(i.scrollbarX,()=>{var h;const u=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Rl(i.scrollbarY,()=>{var h;const u=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),d?s.jsx(je.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function hp(e){return e?parseInt(e,10):0}function RT(e,t){const n=e/t;return isNaN(n)?0:n}function Sf(e){const t=RT(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function tH(e,t,n,r="ltr"){const i=Sf(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return IT([c,d],h)(e)}function A1(e,t,n="ltr"){const r=Sf(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],d=Bx(e,c);return IT([0,o],[0,l])(d)}function IT(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function DT(e,t){return e>0&&e<t}var nH=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Cf(e,t){const n=St(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Rl(e,t){const n=St(t);qt(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}function rH(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const i=p.Children.only(r);return p.cloneElement(i,{children:typeof t=="function"?t(i.props.children):t})}var OT=_T,sH=CT,iH=AT;const tu=p.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(OT,{ref:r,className:Q("relative overflow-hidden",e),...n,children:[s.jsx(sH,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(MT,{}),s.jsx(iH,{})]}));tu.displayName=OT.displayName;const MT=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(M0,{ref:r,orientation:t,className:Q("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(TT,{className:"relative flex-1 rounded-full bg-border"})}));MT.displayName=M0.displayName;const aH=({currentContent:e,onContentUpdate:t,areaTitle:n,onClose:r})=>{const[i,a]=p.useState([]),[o,l]=p.useState(""),[c,d]=p.useState(!1),[u,h]=p.useState(null);p.useEffect(()=>{const g={id:"welcome",role:"assistant",content:`Hi! I'm here to help you refine your ${n} guidance content. I can see your current content and help you improve it. What would you like to work on?`,timestamp:new Date};a([g])},[n]);const f=async()=>{if(!o.trim()||c)return;const g={id:Date.now().toString(),role:"user",content:o,timestamp:new Date};a(b=>[...b,g]),l(""),d(!0);try{const{data:b,error:v}=await L.functions.invoke("ai-guidance-chat",{body:{messages:[...i,g],currentContent:e,areaTitle:n}});if(v)throw v;const y={id:(Date.now()+1).toString(),role:"assistant",content:typeof b.response=="string"?b.response:JSON.stringify(b.response,null,2),timestamp:new Date};if(a(w=>[...w,y]),b.suggestedContent){const w=typeof b.suggestedContent=="string"?b.suggestedContent:JSON.stringify(b.suggestedContent,null,2);h(w)}}catch(b){console.error("Error sending message:",b);const v={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};a(y=>[...y,v])}finally{d(!1)}},m=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),f())},x=()=>{u&&(t(u),h(null))};return s.jsxs(te,{className:"w-full",children:[s.jsx(le,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ue,{className:"flex items-center gap-2 text-lg",children:[s.jsx(sh,{className:"h-5 w-5"}),"AI Assistant"]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(Bt,{className:"h-4 w-4"})})]})}),s.jsxs(re,{className:"space-y-4 p-4",children:[s.jsx(tu,{className:"h-80 pr-4",children:s.jsxs("div",{className:"space-y-4",children:[i.map(g=>s.jsxs("div",{className:`flex items-start gap-3 ${g.role==="user"?"justify-end":"justify-start"}`,children:[g.role==="assistant"&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(sh,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm ${g.role==="user"?"bg-primary text-primary-foreground ml-auto":"bg-muted"}`,children:[s.jsx("p",{className:"whitespace-pre-wrap",children:g.content}),s.jsx("p",{className:"text-xs opacity-70 mt-1",children:g.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),g.role==="user"&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0",children:s.jsx(Fh,{className:"h-4 w-4"})})]},g.id)),c&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(sh,{className:"h-4 w-4 text-primary animate-pulse"})}),s.jsx("div",{className:"bg-muted rounded-lg px-3 py-2 text-sm",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),u&&s.jsxs(s.Fragment,{children:[s.jsx(mr,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(ex,{className:"h-4 w-4 text-primary"}),"Suggested Content"]}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-sm overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:u})}),s.jsx(U,{onClick:x,size:"sm",className:"w-full",children:"Apply to Editor"})]})]}),s.jsx(mr,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Te,{value:o,onChange:g=>l(g.target.value),onKeyPress:m,placeholder:"Ask me anything about your content...",disabled:c,className:"flex-1"}),s.jsx(U,{onClick:f,disabled:c||!o.trim(),size:"sm",children:s.jsx(Sl,{className:"h-4 w-4"})})]})]})]})},oH=({content:e,onChange:t,placeholder:n,areaTitle:r})=>{const[i,a]=p.useState(0),[o,l]=p.useState(!1),c=u=>{t(u),a(u.trim().split(/\s+/).filter(h=>h.length>0).length)},d=()=>{l(!o)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ws,{className:"h-4 w-4"}),s.jsxs("span",{children:[i," words"]})]}),s.jsx(U,{variant:"outline",size:"sm",onClick:d,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Close Assistant"]}):s.jsxs(s.Fragment,{children:[s.jsx(CO,{className:"h-4 w-4 mr-2"}),"AI Assist"]})})]}),s.jsx(Rr,{value:e,onChange:u=>c(u.target.value),placeholder:n,className:"min-h-[400px] resize-none"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:s.jsxs("p",{children:["💡 Tip: Use Markdown formatting for headers, lists, and links. ",o?"The AI assistant is helping you refine your content below.":'Click "AI Assist" to get help editing specific sections.']})}),o&&s.jsx("div",{className:"border-t pt-6",children:s.jsx(aH,{currentContent:e,onContentUpdate:t,areaTitle:r||"Guidance",onClose:()=>l(!1)})})]})},lH=({domainId:e,domainName:t,area:n,onSuccess:r})=>{const[i,a]=p.useState(null),[o,l]=p.useState(!1),[c,d]=p.useState([]),[u,h]=p.useState([]),{toast:f}=rt(),m=(b,v)=>{const y=[];if(!b.snippet||typeof b.snippet!="string")y.push(`Line ${v}: Missing or invalid 'snippet' field`);else{const w=b.snippet.trim().split(/\s+/).filter(k=>k.length>0).length;(w<100||w>800)&&y.push(`Line ${v}: Snippet must be 100-800 words (found ${w})`)}return(!b.concepts||!Array.isArray(b.concepts)||b.concepts.length===0)&&y.push(`Line ${v}: Missing or empty 'concepts' array`),b.difficulty&&!["basic","intermediate","advanced"].includes(b.difficulty)&&y.push(`Line ${v}: Invalid difficulty level`),{valid:y.length===0,errors:y}},x=p.useCallback(async b=>{var y;const v=(y=b.target.files)==null?void 0:y[0];if(v){if(!v.name.endsWith(".jsonl")){h(["File must have .jsonl extension"]);return}a(v),l(!0),h([]),d([]);try{const k=(await v.text()).split(`
`).filter(N=>N.trim()),S=[],C=[];for(let N=0;N<k.length;N++)try{const j=JSON.parse(k[N]),{valid:_,errors:E}=m(j,N+1);if(!_){C.push(...E);continue}S.push({id:`imported_${Date.now()}_${N}`,snippet:j.snippet,concepts:j.concepts,notes:j.notes,difficulty:j.difficulty,created_at:new Date().toISOString()})}catch{C.push(`Line ${N+1}: Invalid JSON format`)}d(S),h(C)}catch{h(["Failed to read file"])}finally{l(!1)}}},[]),g=async()=>{if(c.length!==0)try{const b=c.map(k=>JSON.stringify(k)).join(`
`),{createClient:v}=await Wl(async()=>{const{createClient:k}=await Promise.resolve().then(()=>e6);return{createClient:k}},void 0),y=v("https://jfolpnyipoocflcrachg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg"),{error:w}=await y.functions.invoke("save-guidance-content",{body:{domainName:t,area:n,content:b,type:"examples"}});if(w)throw w;f({title:"Import Successful",description:`Imported ${c.length} examples`}),r()}catch{f({title:"Import Failed",description:"Failed to import examples",variant:"destructive"})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"jsonl-file",children:"Select JSONL File"}),s.jsx(Te,{id:"jsonl-file",type:"file",accept:".jsonl",onChange:x,className:"mt-1"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload a JSONL file with examples. Each line should contain a JSON object with: snippet, concepts, notes (optional), difficulty (optional)"})]}),o&&s.jsxs(Yn,{children:[s.jsx(Ws,{className:"h-4 w-4"}),s.jsx(Xn,{children:"Parsing file..."})]}),u.length>0&&s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Xn,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:"Validation Errors:"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[u.slice(0,10).map((b,v)=>s.jsxs("li",{children:["• ",b]},v)),u.length>10&&s.jsxs("li",{children:["... and ",u.length-10," more errors"]})]})]})})]}),c.length>0&&s.jsxs(Yn,{children:[s.jsx(Zn,{className:"h-4 w-4"}),s.jsx(Xn,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"font-medium",children:["Ready to import ",c.length," valid examples"]}),s.jsxs("div",{className:"text-xs space-y-1",children:[c.slice(0,3).map((b,v)=>s.jsxs("div",{className:"border-l-2 pl-2",children:[s.jsxs("p",{className:"font-medium",children:["Concepts: ",b.concepts.join(", ")]}),s.jsxs("p",{className:"text-muted-foreground",children:[b.snippet.substring(0,100),"..."]})]},v)),c.length>3&&s.jsxs("p",{className:"text-muted-foreground",children:["... and ",c.length-3," more"]})]})]})})]}),s.jsx("div",{className:"flex justify-end gap-2 pt-4",children:s.jsxs(U,{onClick:g,disabled:c.length===0||u.length>0,className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-4 w-4"}),"Import ",c.length," Examples"]})})]})},LT=(e,t,n)=>{const[r,i]=p.useState([]),[a,o]=p.useState(!1),[l,c]=p.useState(null),{toast:d}=rt(),u=p.useCallback(async()=>{if(!(!e||!t||!n)){o(!0),c(null);try{const{data:m,error:x}=await L.functions.invoke("get-guidance-content",{body:{domainName:t,area:n,type:"examples"}});if(x)throw x;if(m!=null&&m.content){const g=m.content.split(`
`).filter(v=>v.trim()),b=[];for(const v of g)try{const y=JSON.parse(v);if(y.input&&y.output){const w=typeof y.input=="string"?y.input:JSON.stringify(y.input,null,2);b.push({id:crypto.randomUUID(),snippet:w,concepts:y.output.concepts||[],notes:y.output.notes,difficulty:y.output.difficulty,bloom_level:y.output.bloom_level,sequence_order:y.output.sequence_order,created_at:new Date().toISOString()})}else y.snippet&&b.push(y)}catch{console.warn("Failed to parse example line:",v)}i(b)}else i([])}catch(m){console.error("Error fetching examples:",m),c(m instanceof Error?m.message:"Failed to fetch examples"),i([])}finally{o(!1)}}},[e,t,n]),h=p.useCallback(async m=>{try{const x=m.map(b=>JSON.stringify({input:b.snippet,output:{concepts:b.concepts,notes:b.notes,difficulty:b.difficulty,bloom_level:b.bloom_level,sequence_order:b.sequence_order}})).join(`
`),{error:g}=await L.functions.invoke("save-guidance-content",{body:{domainName:t,area:n,content:x,type:"examples"}});if(g)throw g;return i(m),d({title:"Success",description:"Examples saved successfully"}),!0}catch(x){return console.error("Error saving examples:",x),d({title:"Error",description:"Failed to save examples",variant:"destructive"}),!1}},[t,n,d]),f=p.useCallback(async m=>{try{const x=r.filter(g=>g.id!==m);await h(x)}catch(x){console.error("Error deleting example:",x),d({title:"Error",description:"Failed to delete example",variant:"destructive"})}},[r,h,d]);return p.useEffect(()=>{u()},[u]),{examples:r,loading:a,error:l,saveExamples:h,deleteExample:f,refetch:u}},cH=({domainId:e,domainName:t,area:n})=>{const[r,i]=p.useState("");p.useState(!1);const[a,o]=p.useState(!1);p.useState(null);const{examples:l,loading:c,saveExamples:d,deleteExample:u}=LT(e,t,n),h=(n||"").toLowerCase()==="learning-goals",f=l.filter(g=>{const b=r.toLowerCase(),v=bi(g.snippet).toLowerCase(),y=bi(g.notes).toLowerCase(),w=(g.concepts||[]).some(k=>bi(k).toLowerCase().includes(b));return v.includes(b)||w||y.includes(b)}),m=async g=>{await u(g)},x=g=>{switch(g){case"basic":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return c?s.jsx("div",{className:"p-4",children:"Loading examples..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("div",{className:"flex-1 max-w-sm",children:s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(Te,{placeholder:"Search examples...",value:r,onChange:g=>i(g.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(on,{open:a,onOpenChange:o,children:[s.jsx(nz,{asChild:!0,children:s.jsxs(U,{variant:"outline",children:[s.jsx(En,{className:"h-4 w-4 mr-2"}),"Import JSONL"]})}),s.jsxs(tn,{className:"max-w-2xl",children:[s.jsx(nn,{children:s.jsx(rn,{children:"Import Examples from JSONL"})}),s.jsx(lH,{domainId:e,domainName:t,area:n,onSuccess:()=>{o(!1),window.location.reload()}})]})]}),s.jsx(U,{variant:"default",onClick:async()=>{try{(await fetch("https://jfolpnyipoocflcrachg.supabase.co/functions/v1/publish-guidance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domainName:t,area:n,type:"examples"})})).ok&&console.log("Published successfully")}catch(g){console.error("Publish failed:",g)}},children:"Publish Examples"}),s.jsxs(U,{onClick:()=>{window.location.href=`/admin/domain/${e}/ai-guidance/${n}/examples/new`},children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Example"]})]})]}),s.jsx("div",{className:h?"space-y-2":"space-y-4",children:f.length===0?s.jsx(te,{children:s.jsx(re,{className:"pt-6",children:s.jsx("p",{className:"text-muted-foreground text-center",children:r?"No examples match your search.":"No examples yet. Add your first example to get started."})})}):f.map(g=>s.jsx(te,{children:h?s.jsx(re,{className:"py-2",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("p",{className:"text-sm truncate flex-1",children:bi(g.snippet)}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0 text-xs text-muted-foreground",children:[g.bloom_level?s.jsx(ve,{variant:"outline",children:g.bloom_level}):null,g.sequence_order!=null?s.jsxs(ve,{variant:"outline",children:["#",g.sequence_order]}):null]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>m(g.id),children:s.jsx(Ns,{className:"h-4 w-4"})})]})}):s.jsxs(s.Fragment,{children:[s.jsx(le,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[g.difficulty&&s.jsx(ve,{className:x(g.difficulty),children:g.difficulty}),s.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(g.created_at).toLocaleDateString()})]}),s.jsx("div",{className:"flex gap-1",children:s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>m(g.id),children:s.jsx(Ns,{className:"h-4 w-4"})})})]})}),s.jsxs(re,{className:"space-y-3",children:[s.jsx("div",{children:typeof g.snippet=="string"?s.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:g.snippet}):s.jsx("pre",{className:"text-xs bg-muted/50 rounded p-3 overflow-auto",children:JSON.stringify(g.snippet,null,2)})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Concepts:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:g.concepts.map((b,v)=>s.jsx(ve,{variant:"secondary",className:"text-xs",children:bi(b)},v))})]}),g.notes!==void 0&&g.notes!==null&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Notes:"}),typeof g.notes=="string"?s.jsx("p",{className:"text-xs text-muted-foreground",children:g.notes}):s.jsx("pre",{className:"text-xs bg-muted/50 rounded p-3 overflow-auto",children:JSON.stringify(g.notes,null,2)})]})]})]})},g.id))})]})},dH=()=>{const{domainId:e,area:t}=ti(),n=Rt(),{toast:r}=rt(),{domains:i,loading:a}=Dn(),[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,h]=p.useState(!1),f=i==null?void 0:i.find(N=>N.id===e),{guidanceStatus:m,loading:x}=zP(e||"",f==null?void 0:f.name);console.log("DomainGuidanceEditor Debug:",{domainId:e,area:t,domain:f==null?void 0:f.name,domainsLoading:a,domainsCount:i==null?void 0:i.length});const{guidanceContent:g,loading:b,saveContent:v}=sB(e||"",(f==null?void 0:f.name)||"",t||"");p.useEffect(()=>{if(g){const N=g.content,j=typeof N=="string"?N:JSON.stringify(N,null,2);d(j)}},[g]);const y=(m==null?void 0:m.areas.find(N=>N.key===t))||{key:t||"",title:(t==null?void 0:t.split("-").map(N=>N.charAt(0).toUpperCase()+N.slice(1)).join(" "))||"Unknown",gcsPath:"",exists:!1,lastModified:null};if(a||x||b)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{className:"h-8 w-64"}),s.jsx(it,{className:"h-4 w-96"}),s.jsx(it,{className:"h-96 w-full"})]})});if(!f)return s.jsx("div",{className:"p-6",children:s.jsx(te,{children:s.jsx(re,{className:"pt-6",children:s.jsx("p",{className:"text-muted-foreground",children:"Domain not found"})})})});const w=()=>{n(`/admin/domain/${e}/ai-guidance`)},k=async()=>{h(!0);try{if(await v(c))r({title:"Success",description:"Guidance file saved successfully"}),l(!1);else throw new Error("Save failed")}catch{r({title:"Error",description:"Failed to save guidance file",variant:"destructive"})}finally{h(!1)}},S=()=>{if(l(!1),g){const N=g.content,j=typeof N=="string"?N:JSON.stringify(N,null,2);d(j)}},C=(g==null?void 0:g.exists)||!1;return s.jsxs("div",{className:"p-6",children:[s.jsx(Cs,{}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(U,{variant:"ghost",onClick:w,children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Back to AI Guidance"]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:[y.title," Guidance"]}),s.jsxs("p",{className:"text-muted-foreground",children:[f.name," • AI Guidance Configuration"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[C&&!o&&s.jsxs(U,{variant:"outline",onClick:()=>l(!0),children:[s.jsx(Di,{className:"h-4 w-4 mr-2"}),"Edit"]}),(o||!C&&c.trim().length>0)&&s.jsxs(U,{onClick:k,disabled:u,children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),u?"Saving...":"Save"]}),o&&C&&s.jsx(U,{variant:"outline",onClick:S,children:"Cancel"})]})]}),s.jsxs(ri,{defaultValue:"guidance",className:"w-full",children:[s.jsxs(Ps,{className:"grid w-full grid-cols-2",children:[s.jsx(et,{value:"guidance",children:"Guidance"}),s.jsx(et,{value:"examples",children:"Examples"})]}),s.jsx(tt,{value:"guidance",className:"mt-6",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{className:"flex items-center gap-2",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Di,{className:"h-5 w-5"}),"Editing ",y.title," Guidance"]}):s.jsxs(s.Fragment,{children:[s.jsx(ws,{className:"h-5 w-5"}),C?"Viewing":"Create"," ",y.title," Guidance"]})})}),s.jsx(re,{children:o||!C?s.jsx(oH,{content:c,onChange:d,placeholder:`Enter your ${y.title.toLowerCase()} guidance content here...`,areaTitle:y.title}):s.jsx(HV,{content:c,isEmpty:!C,areaTitle:y.title,onEdit:()=>l(!0)})})]})}),s.jsx(tt,{value:"examples",className:"mt-6",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsxs(ue,{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"h-5 w-5"}),y.title," Examples"]})}),s.jsx(re,{children:s.jsx(cH,{domainId:e||"",domainName:f.name,area:t||""})})]})})]})]})};function Um(){return s.jsx("div",{className:"space-y-4",children:s.jsx(Cs,{})})}function uH({concepts:e,onConceptClick:t,onConceptDelete:n,onConceptUpdate:r,onAddChild:i,onStartLinking:a,onStartHierarchyChange:o,onManageRelationships:l,showApprovalActions:c=!1,onApproveConcept:d,onRejectConcept:u}){const[h,f]=p.useState(()=>{const w=e.map(k=>k.id);return new Set(w)}),m=p.useMemo(()=>new Map(e.map(w=>[w.id,w])),[e]),x=p.useMemo(()=>e.filter(w=>!w.parent_concept_id||!m.has(w.parent_concept_id)).sort((w,k)=>w.name.localeCompare(k.name)),[e,m]),g=w=>e.filter(k=>k.parent_concept_id===w).sort((k,S)=>k.name.localeCompare(S.name)),b=w=>{f(k=>{const S=new Set(k);return S.has(w)?S.delete(w):S.add(w),S})},v=w=>{const k=["bg-green-100 text-green-800 border-green-300","bg-green-100 text-green-800 border-green-300","bg-yellow-100 text-yellow-800 border-yellow-300","bg-orange-100 text-orange-800 border-orange-300","bg-red-100 text-red-800 border-red-300"];return k[Math.min(w,k.length-1)]},y=(w,k=0)=>{const S=g(w.id),C=S.length>0,N=h.has(w.id),j=w.difficulty_level??k;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center py-2 px-4 hover:bg-gray-50 group text-sm border-b border-gray-100 cursor-pointer",onClick:()=>{C?b(w.id):t==null||t(w)},children:[s.jsxs("div",{className:"flex-1 flex items-center gap-2",style:{paddingLeft:`${k*20}px`},children:[s.jsx("div",{className:"flex items-center justify-center w-4 h-4",children:C?s.jsx("button",{onClick:_=>{_.stopPropagation(),b(w.id)},className:"hover:bg-gray-100 rounded p-0.5 flex items-center justify-center w-4 h-4 transition-colors",children:N?s.jsx(Id,{className:"h-3 w-3"}):s.jsx(no,{className:"h-3 w-3"})}):s.jsx("div",{className:"w-4 h-4"})}),s.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded-full bg-white"}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"font-medium text-gray-900",children:w.name}),C&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["– ",S.length," child",S.length!==1?"ren":""]}),s.jsxs(ve,{variant:"outline",className:`text-xs px-1.5 py-0.5 border ${v(j)}`,children:["L",j]})]})]}),s.jsx("div",{className:"w-32 flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:c&&w.status==="suggested"?s.jsxs(s.Fragment,{children:[s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),d==null||d(w.id)},className:"h-7 w-7 p-0 hover:bg-green-50 text-green-600 hover:text-green-700 transition-colors",title:"Approve concept",children:s.jsx(Js,{className:"h-3.5 w-3.5"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),u==null||u(w.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Reject concept",children:s.jsx(Bt,{className:"h-3.5 w-3.5"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),t==null||t(w)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Edit concept",children:s.jsx(Lp,{className:"h-3.5 w-3.5 text-gray-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),i==null||i(w.id)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Add child concept",children:s.jsx(er,{className:"h-3.5 w-3.5 text-green-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),o==null||o(w)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Hierarchy management",children:s.jsx(cd,{className:"h-3.5 w-3.5 text-purple-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),l==null||l(w)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Manage relationships",children:s.jsx(Sy,{className:"h-3.5 w-3.5 text-blue-600"})}),s.jsx(U,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),n==null||n(w.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Delete concept",children:s.jsx(Ns,{className:"h-3.5 w-3.5"})})]})})]}),C&&N&&s.jsx(s.Fragment,{children:S.map(_=>y(_,k+1))})]},w.id)};return x.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No concepts found matching your search criteria."})}):s.jsxs("div",{className:"overflow-hidden bg-white",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b bg-gray-50 font-medium text-gray-600",children:[s.jsx("div",{className:"flex-1",children:s.jsx("span",{children:"Concept Name"})}),s.jsx("div",{className:"w-32 text-right",children:s.jsx("span",{children:"Actions"})})]}),s.jsx("div",{children:x.map(w=>y(w))})]})}const hH=({domainId:e,domainSlug:t,domainName:n,onUploadComplete:r,onImportComplete:i})=>{var N,j;const[a,o]=p.useState(null),[l,c]=p.useState(0),[d,u]=p.useState(!1),[h,f]=p.useState(!1),[m,x]=p.useState(!1),{toast:g}=rt();p.useEffect(()=>{(async()=>{try{const{data:E,error:A}=await L.from("file_uploads").select("*").eq("domain_id",e).eq("file_name","master_concept_list.md").order("created_at",{ascending:!1}).limit(1);if(A){console.error("Error checking existing file:",A);return}E&&E.length>0&&(console.log("🔍 Found existing upload:",E[0]),x(!0))}catch(E){console.error("Error checking existing file:",E)}})()},[e]),p.useEffect(()=>{console.log("🔍 MasterConceptUpload state:",{uploadComplete:m,isUploading:d,isImporting:h,hasFile:!!a})},[m,d,h,a]);const b=he.useCallback(_=>{const E=_[0];E&&E.name.endsWith(".md")?o(E):g({title:"Invalid file type",description:"Please upload a .md (Markdown) file.",variant:"destructive"})},[g]),{getRootProps:v,getInputProps:y,isDragActive:w,fileRejections:k}=xf({onDrop:b,disabled:d||m,maxSize:10*1024*1024,accept:{"text/markdown":[".md"],"text/plain":[".md"]},multiple:!1}),S=async()=>{if(a){u(!0),c(0);try{const _=setInterval(()=>{c(B=>B>=90?(clearInterval(_),90):B+10)},200),E=new FormData,A=new File([a],"master_concept_list.md",{type:a.type});E.append("file",A),E.append("domainId",e),E.append("domainSlug",t||e),E.append("targetPath",`${e}/guidance/concepts/master_concept_list.md`);const{data:R,error:$}=await L.functions.invoke("upload-to-gcs",{body:E});if(clearInterval(_),c(100),$)throw $;x(!0),console.log("🎯 Upload completed, uploadComplete state set to true"),g({title:"Upload successful",description:"Master concept list uploaded successfully."}),r()}catch(_){console.error("Upload error:",_),g({title:"Upload failed",description:"Failed to upload the master concept list.",variant:"destructive"})}finally{u(!1)}}},C=async()=>{f(!0);try{const{data:_,error:E}=await L.functions.invoke("clear-and-reimport-concepts",{body:{domainId:e}});if(E)throw E;g({title:"Import successful",description:`Imported ${(_==null?void 0:_.conceptCount)||0} concepts successfully.`}),i()}catch(_){console.error("Import error:",_),g({title:"Import failed",description:"Failed to import concepts from the master list.",variant:"destructive"})}finally{f(!1)}};return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs(te,{className:"w-full max-w-2xl",children:[s.jsxs(le,{className:"text-center",children:[s.jsxs(ue,{className:"flex items-center justify-center space-x-2",children:[s.jsx(Ws,{className:"h-6 w-6"}),s.jsx("span",{children:"Initialize Concept Map"})]}),s.jsxs(Me,{children:["Upload the master_concept_list.md file for the ",s.jsx("strong",{children:n})," domain to create the foundational concept hierarchy."]})]}),s.jsxs(re,{className:"space-y-6",children:[m?s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[s.jsx(Lh,{className:"h-6 w-6"}),s.jsx("span",{className:"font-medium",children:"Upload Complete!"})]}),s.jsx("p",{className:"text-muted-foreground",children:"Your master concept list has been uploaded successfully. Click the button below to import and structure the concepts."}),s.jsx(U,{onClick:C,disabled:h,className:"w-full",size:"lg",children:h?"Importing Concepts...":"Import Concepts from Master List"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{...v(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200 ${w?"border-primary bg-primary/5":d?"border-muted bg-muted/20 pointer-events-none opacity-50":"border-border hover:border-primary/50 hover:bg-muted/20"}`,children:[s.jsx("input",{...y()}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(En,{className:`mx-auto h-12 w-12 ${w?"text-primary":"text-muted-foreground"}`}),w?s.jsx("p",{className:"text-primary font-medium text-lg",children:"Drop your master_concept_list.md file here..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium text-lg",children:"Drag & drop master_concept_list.md here, or click to select"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Only .md (Markdown) files accepted (max 10MB)"})]})]})]}),k.length>0&&s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Xn,{children:(j=(N=k[0])==null?void 0:N.errors[0])==null?void 0:j.message})]}),a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ws,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:a.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),s.jsx(Lh,{className:"h-5 w-5 text-green-600"})]}),d&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Uploading..."}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[l,"%"]})]}),s.jsx($a,{value:l,className:"h-2"})]}),s.jsx(U,{onClick:S,disabled:d,className:"w-full",size:"lg",children:d?"Uploading...":"Upload Master Concept List"})]})]}),s.jsxs(Yn,{children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsxs(Xn,{className:"text-sm",children:[s.jsx("strong",{children:"File Format:"})," The master concept list should be a Markdown file with hierarchical structure using indentation (2 spaces per level) to define parent-child relationships."]})]})]})]})})},pH=()=>{const[e,t]=p.useState(!1),{toast:n}=rt();return{triggerStructuring:async(i,a)=>{t(!0);try{console.log("Triggering concept structuring for domain:",a);const{data:o,error:l}=await L.functions.invoke("trigger-concept-structuring",{body:{domain_id:i,domain_slug:a}});if(l)throw console.error("Error triggering concept structuring:",l),l;return console.log("Concept structuring triggered successfully:",o),n({title:"AI Analysis Started",description:"The AI is analyzing your concepts to suggest better hierarchical structures. Check back in a few minutes for results."}),o}catch(o){throw console.error("Failed to trigger concept structuring:",o),n({title:"Failed to Start AI Analysis",description:o.message||"There was an error starting the AI concept analysis. Please try again.",variant:"destructive"}),o}finally{t(!1)}},isLoading:e}};var R1=1,fH=.9,mH=.8,gH=.17,Bm=.1,qm=.999,xH=.9999,vH=.99,yH=/[\\\/_+.#"@\[\(\{&]/,wH=/[\\\/_+.#"@\[\(\{&]/g,bH=/[\s-]/,$T=/[\s-]/g;function dv(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?R1:vH;var l=`${i},${a}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(a),d=n.indexOf(c,i),u=0,h,f,m,x;d>=0;)h=dv(e,t,n,r,d+1,a+1,o),h>u&&(d===i?h*=R1:yH.test(e.charAt(d-1))?(h*=mH,m=e.slice(i,d-1).match(wH),m&&i>0&&(h*=Math.pow(qm,m.length))):bH.test(e.charAt(d-1))?(h*=fH,x=e.slice(i,d-1).match($T),x&&i>0&&(h*=Math.pow(qm,x.length))):(h*=gH,i>0&&(h*=Math.pow(qm,d-i))),e.charAt(d)!==t.charAt(a)&&(h*=xH)),(h<Bm&&n.charAt(d-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(d-1)!==r.charAt(a))&&(f=dv(e,t,n,r,d+1,a+2,o),f*Bm>h&&(h=f*Bm)),h>u&&(u=h),d=n.indexOf(c,d+1);return o[l]=u,u}function I1(e){return e.toLowerCase().replace($T," ")}function jH(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,dv(e,t,I1(e),I1(t),0,0,{})}function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tn.apply(null,arguments)}function el(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function NH(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function FT(...e){return t=>e.forEach(n=>NH(n,t))}function nu(...e){return p.useCallback(FT(...e),e)}function _H(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...x}=h,g=(f==null?void 0:f[e][c])||l,b=p.useMemo(()=>x,Object.values(x));return p.createElement(g.Provider,{value:b},m)}function u(h,f){const m=(f==null?void 0:f[e][c])||l,x=p.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,SH(i,...t)]}function SH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const uv=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},CH=Sv.useId||(()=>{});let kH=0;function Vm(e){const[t,n]=p.useState(CH());return uv(()=>{e||n(r=>r??String(kH++))},[e]),e||(t?`radix-${t}`:"")}function Qa(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function EH({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=PH({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:r,l=Qa(n),c=p.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else i(d)},[a,e,i,l]);return[o,c]}function PH({defaultProp:e,onChange:t}){const n=p.useState(e),[r]=n,i=p.useRef(r),a=Qa(t);return p.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}const F0=p.forwardRef((e,t)=>{const{children:n,...r}=e,i=p.Children.toArray(n),a=i.find(AH);if(a){const o=a.props.children,l=i.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return p.createElement(hv,Tn({},r,{ref:t}),p.isValidElement(o)?p.cloneElement(o,void 0,l):null)}return p.createElement(hv,Tn({},r,{ref:t}),n)});F0.displayName="Slot";const hv=p.forwardRef((e,t)=>{const{children:n,...r}=e;return p.isValidElement(n)?p.cloneElement(n,{...RH(r,n.props),ref:t?FT(t,n.ref):n.ref}):p.Children.count(n)>1?p.Children.only(null):null});hv.displayName="SlotClone";const TH=({children:e})=>p.createElement(p.Fragment,null,e);function AH(e){return p.isValidElement(e)&&e.type===TH}function RH(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}const IH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Mr=IH.reduce((e,t)=>{const n=p.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?F0:t;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(l,Tn({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function DH(e,t){e&&Xs.flushSync(()=>e.dispatchEvent(t))}function OH(e,t=globalThis==null?void 0:globalThis.document){const n=Qa(e);p.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const pv="dismissableLayer.update",MH="dismissableLayer.pointerDownOutside",LH="dismissableLayer.focusOutside";let D1;const $H=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),FH=p.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,u=p.useContext($H),[h,f]=p.useState(null),m=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,x]=p.useState({}),g=nu(t,j=>f(j)),b=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=b.indexOf(v),w=h?b.indexOf(h):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=zH(j=>{const _=j.target,E=[...u.branches].some(A=>A.contains(_));!S||E||(a==null||a(j),l==null||l(j),j.defaultPrevented||c==null||c())},m),N=UH(j=>{const _=j.target;[...u.branches].some(A=>A.contains(_))||(o==null||o(j),l==null||l(j),j.defaultPrevented||c==null||c())},m);return OH(j=>{w===u.layers.size-1&&(i==null||i(j),!j.defaultPrevented&&c&&(j.preventDefault(),c()))},m),p.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(D1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),O1(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=D1)}},[h,m,r,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),O1())},[h,u]),p.useEffect(()=>{const j=()=>x({});return document.addEventListener(pv,j),()=>document.removeEventListener(pv,j)},[]),p.createElement(Mr.div,Tn({},d,{ref:g,style:{pointerEvents:k?S?"auto":"none":void 0,...e.style},onFocusCapture:el(e.onFocusCapture,N.onFocusCapture),onBlurCapture:el(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:el(e.onPointerDownCapture,C.onPointerDownCapture)}))});function zH(e,t=globalThis==null?void 0:globalThis.document){const n=Qa(e),r=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let u=function(){zT(MH,n,d,{discrete:!0})};var c=u;const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function UH(e,t=globalThis==null?void 0:globalThis.document){const n=Qa(e),r=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!r.current&&zT(LH,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function O1(){const e=new CustomEvent(pv);document.dispatchEvent(e)}function zT(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?DH(i,a):i.dispatchEvent(a)}const Hm="focusScope.autoFocusOnMount",Gm="focusScope.autoFocusOnUnmount",M1={bubbles:!1,cancelable:!0},BH=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=p.useState(null),d=Qa(i),u=Qa(a),h=p.useRef(null),f=nu(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(C){if(m.paused||!l)return;const N=C.target;l.contains(N)?h.current=N:mi(h.current,{select:!0})},w=function(C){if(m.paused||!l)return;const N=C.relatedTarget;N!==null&&(l.contains(N)||mi(h.current,{select:!0}))},k=function(C){if(document.activeElement===document.body)for(const j of C)j.removedNodes.length>0&&mi(l)};var g=y,b=w,v=k;document.addEventListener("focusin",y),document.addEventListener("focusout",w);const S=new MutationObserver(k);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),S.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){$1.add(m);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Hm,M1);l.addEventListener(Hm,d),l.dispatchEvent(v),v.defaultPrevented||(qH(KH(UT(l)),{select:!0}),document.activeElement===g&&mi(l))}return()=>{l.removeEventListener(Hm,d),setTimeout(()=>{const v=new CustomEvent(Gm,M1);l.addEventListener(Gm,u),l.dispatchEvent(v),v.defaultPrevented||mi(g??document.body,{select:!0}),l.removeEventListener(Gm,u),$1.remove(m)},0)}}},[l,d,u,m]);const x=p.useCallback(g=>{if(!n&&!r||m.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const y=g.currentTarget,[w,k]=VH(y);w&&k?!g.shiftKey&&v===k?(g.preventDefault(),n&&mi(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&mi(k,{select:!0})):v===y&&g.preventDefault()}},[n,r,m.paused]);return p.createElement(Mr.div,Tn({tabIndex:-1},o,{ref:f,onKeyDown:x}))});function qH(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(mi(r,{select:t}),document.activeElement!==n)return}function VH(e){const t=UT(e),n=L1(t,e),r=L1(t.reverse(),e);return[n,r]}function UT(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function L1(e,t){for(const n of e)if(!HH(n,{upTo:t}))return n}function HH(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function GH(e){return e instanceof HTMLInputElement&&"select"in e}function mi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&GH(e)&&t&&e.select()}}const $1=WH();function WH(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=F1(e,t),e.unshift(t)},remove(t){var n;e=F1(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function F1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function KH(e){return e.filter(t=>t.tagName!=="A")}const QH=p.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?gy.createPortal(p.createElement(Mr.div,Tn({},i,{ref:t})),r):null});function YH(e,t){return p.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const kf=e=>{const{present:t,children:n}=e,r=XH(t),i=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=nu(r.ref,i.ref);return typeof n=="function"||r.isPresent?p.cloneElement(i,{ref:a}):null};kf.displayName="Presence";function XH(e){const[t,n]=p.useState(),r=p.useRef({}),i=p.useRef(e),a=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=YH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Uu(r.current);a.current=l==="mounted"?d:"none"},[l]),uv(()=>{const d=r.current,u=i.current;if(u!==e){const f=a.current,m=Uu(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),uv(()=>{if(t){const d=h=>{const m=Uu(r.current).includes(h.animationName);h.target===t&&m&&Xs.flushSync(()=>c("ANIMATION_END"))},u=h=>{h.target===t&&(a.current=Uu(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Uu(e){return(e==null?void 0:e.animationName)||"none"}let Wm=0;function JH(){p.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:z1()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:z1()),Wm++,()=>{Wm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Wm--}},[])}function z1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var BT=Jk(),Km=function(){},Ef=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Km,onWheelCapture:Km,onTouchMoveCapture:Km}),i=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noIsolation,x=e.inert,g=e.allowPinchZoom,b=e.as,v=b===void 0?"div":b,y=Wy(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,k=Xk([n,t]),S=gn(gn({},y),i);return p.createElement(p.Fragment,null,u&&p.createElement(w,{sideCar:BT,removeScrollBar:d,shards:h,noIsolation:m,inert:x,setCallbacks:a,allowPinchZoom:!!g,lockRef:n}),o?p.cloneElement(p.Children.only(l),gn(gn({},S),{ref:k})):p.createElement(v,gn({},S,{className:c,ref:k}),l))});Ef.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ef.classNames={fullWidth:zc,zeroRight:Fc};var fv=!1;if(typeof window<"u")try{var Bu=Object.defineProperty({},"passive",{get:function(){return fv=!0,!0}});window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{fv=!1}var yo=fv?{passive:!1}:!1,ZH=function(e){return e.tagName==="TEXTAREA"},qT=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZH(e)&&n[t]==="visible")},eG=function(e){return qT(e,"overflowY")},tG=function(e){return qT(e,"overflowX")},U1=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=VT(e,n);if(r){var i=HT(e,n),a=i[1],o=i[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},nG=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},rG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},VT=function(e,t){return e==="v"?eG(t):tG(t)},HT=function(e,t){return e==="v"?nG(t):rG(t)},sG=function(e,t){return e==="h"&&t==="rtl"?-1:1},iG=function(e,t,n,r,i){var a=sG(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,f=0;do{var m=HT(e,l),x=m[0],g=m[1],b=m[2],v=g-b-a*x;(x||v)&&VT(e,l)&&(h+=v,f+=x),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(h===0||!i)||!u&&(f===0||!i))&&(d=!0),d},qu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},B1=function(e){return[e.deltaX,e.deltaY]},q1=function(e){return e&&"current"in e?e.current:e},aG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},oG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lG=0,wo=[];function cG(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),i=p.useState(lG++)[0],a=p.useState(function(){return Ky()})[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Yk([e.lockRef.current],(e.shards||[]).map(q1),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var v=qu(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-v[0],k="deltaY"in g?g.deltaY:y[1]-v[1],S,C=g.target,N=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in g&&N==="h"&&C.type==="range")return!1;var j=U1(N,C);if(!j)return!0;if(j?S=N:(S=N==="v"?"h":"v",j=U1(N,C)),!j)return!1;if(!r.current&&"changedTouches"in g&&(w||k)&&(r.current=S),!S)return!0;var _=r.current||S;return iG(_,b,g,_==="h"?w:k,!0)},[]),c=p.useCallback(function(g){var b=g;if(!(!wo.length||wo[wo.length-1]!==a)){var v="deltaY"in b?B1(b):qu(b),y=t.current.filter(function(S){return S.name===b.type&&S.target===b.target&&aG(S.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(q1).filter(Boolean).filter(function(S){return S.contains(b.target)}),k=w.length>0?l(b,w[0]):!o.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),d=p.useCallback(function(g,b,v,y){var w={name:g,delta:b,target:v,should:y};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(k){return k!==w})},1)},[]),u=p.useCallback(function(g){n.current=qu(g),r.current=void 0},[]),h=p.useCallback(function(g){d(g.type,B1(g),g.target,l(g,e.lockRef.current))},[]),f=p.useCallback(function(g){d(g.type,qu(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return wo.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,yo),document.addEventListener("touchmove",c,yo),document.addEventListener("touchstart",u,yo),function(){wo=wo.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,yo),document.removeEventListener("touchmove",c,yo),document.removeEventListener("touchstart",u,yo)}},[]);var m=e.removeScrollBar,x=e.inert;return p.createElement(p.Fragment,null,x?p.createElement(a,{styles:oG(i)}):null,m?p.createElement(nE,{gapMode:"margin"}):null)}const dG=eE(BT,cG);var GT=p.forwardRef(function(e,t){return p.createElement(Ef,gn({},e,{ref:t,sideCar:dG}))});GT.classNames=Ef.classNames;const WT="Dialog",[KT,WY]=_H(WT),[uG,ao]=KT(WT),hG=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[d=!1,u]=EH({prop:r,defaultProp:i,onChange:a});return p.createElement(uG,{scope:t,triggerRef:l,contentRef:c,contentId:Vm(),titleId:Vm(),descriptionId:Vm(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(h=>!h),[u]),modal:o},n)},QT="DialogPortal",[pG,YT]=KT(QT,{forceMount:void 0}),fG=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=ao(QT,t);return p.createElement(pG,{scope:t,forceMount:n},p.Children.map(r,o=>p.createElement(kf,{present:n||a.open},p.createElement(QH,{asChild:!0,container:i},o))))},mv="DialogOverlay",mG=p.forwardRef((e,t)=>{const n=YT(mv,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=ao(mv,e.__scopeDialog);return a.modal?p.createElement(kf,{present:r||a.open},p.createElement(gG,Tn({},i,{ref:t}))):null}),gG=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ao(mv,n);return p.createElement(GT,{as:F0,allowPinchZoom:!0,shards:[i.contentRef]},p.createElement(Mr.div,Tn({"data-state":JT(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),yd="DialogContent",xG=p.forwardRef((e,t)=>{const n=YT(yd,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=ao(yd,e.__scopeDialog);return p.createElement(kf,{present:r||a.open},a.modal?p.createElement(vG,Tn({},i,{ref:t})):p.createElement(yG,Tn({},i,{ref:t})))}),vG=p.forwardRef((e,t)=>{const n=ao(yd,e.__scopeDialog),r=p.useRef(null),i=nu(t,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return zd(a)},[]),p.createElement(XT,Tn({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:el(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:el(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:el(e.onFocusOutside,a=>a.preventDefault())}))}),yG=p.forwardRef((e,t)=>{const n=ao(yd,e.__scopeDialog),r=p.useRef(!1),i=p.useRef(!1);return p.createElement(XT,Tn({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,a),!a.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),a.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:a=>{var o,l;(o=e.onInteractOutside)===null||o===void 0||o.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=a.target;((l=n.triggerRef.current)===null||l===void 0?void 0:l.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}}))}),XT=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=ao(yd,n),c=p.useRef(null),d=nu(t,c);return JH(),p.createElement(p.Fragment,null,p.createElement(BH,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a},p.createElement(FH,Tn({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":JT(l.open)},o,{ref:d,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function JT(e){return e?"open":"closed"}const wG=hG,bG=fG,jG=mG,NG=xG;var fc='[cmdk-group=""]',Qm='[cmdk-group-items=""]',_G='[cmdk-group-heading=""]',z0='[cmdk-item=""]',V1=`${z0}:not([aria-disabled="true"])`,gv="cmdk-item-select",ja="data-value",SG=(e,t,n)=>jH(e,t,n),ZT=p.createContext(void 0),ru=()=>p.useContext(ZT),eA=p.createContext(void 0),U0=()=>p.useContext(eA),tA=p.createContext(void 0),nA=p.forwardRef((e,t)=>{let n=_o(()=>{var O,P;return{search:"",value:(P=(O=e.value)!=null?O:e.defaultValue)!=null?P:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=_o(()=>new Set),i=_o(()=>new Map),a=_o(()=>new Map),o=_o(()=>new Set),l=rA(e),{label:c,children:d,value:u,onValueChange:h,filter:f,shouldFilter:m,loop:x,disablePointerSelection:g=!1,vimBindings:b=!0,...v}=e,y=p.useId(),w=p.useId(),k=p.useId(),S=p.useRef(null),C=MG();Ya(()=>{if(u!==void 0){let O=u.trim();n.current.value=O,N.emit()}},[u]),Ya(()=>{C(6,$)},[]);let N=p.useMemo(()=>({subscribe:O=>(o.current.add(O),()=>o.current.delete(O)),snapshot:()=>n.current,setState:(O,P,Z)=>{var ee,W,X;if(!Object.is(n.current[O],P)){if(n.current[O]=P,O==="search")R(),E(),C(1,A);else if(O==="value"&&(Z||C(5,$),((ee=l.current)==null?void 0:ee.value)!==void 0)){let ne=P??"";(X=(W=l.current).onValueChange)==null||X.call(W,ne);return}N.emit()}},emit:()=>{o.current.forEach(O=>O())}}),[]),j=p.useMemo(()=>({value:(O,P,Z)=>{var ee;P!==((ee=a.current.get(O))==null?void 0:ee.value)&&(a.current.set(O,{value:P,keywords:Z}),n.current.filtered.items.set(O,_(P,Z)),C(2,()=>{E(),N.emit()}))},item:(O,P)=>(r.current.add(O),P&&(i.current.has(P)?i.current.get(P).add(O):i.current.set(P,new Set([O]))),C(3,()=>{R(),E(),n.current.value||A(),N.emit()}),()=>{a.current.delete(O),r.current.delete(O),n.current.filtered.items.delete(O);let Z=B();C(4,()=>{R(),(Z==null?void 0:Z.getAttribute("id"))===O&&A(),N.emit()})}),group:O=>(i.current.has(O)||i.current.set(O,new Set),()=>{a.current.delete(O),i.current.delete(O)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:g,listId:y,inputId:k,labelId:w,listInnerRef:S}),[]);function _(O,P){var Z,ee;let W=(ee=(Z=l.current)==null?void 0:Z.filter)!=null?ee:SG;return O?W(O,n.current.search,P):0}function E(){if(!n.current.search||l.current.shouldFilter===!1)return;let O=n.current.filtered.items,P=[];n.current.filtered.groups.forEach(ee=>{let W=i.current.get(ee),X=0;W.forEach(ne=>{let se=O.get(ne);X=Math.max(se,X)}),P.push([ee,X])});let Z=S.current;F().sort((ee,W)=>{var X,ne;let se=ee.getAttribute("id"),fe=W.getAttribute("id");return((X=O.get(fe))!=null?X:0)-((ne=O.get(se))!=null?ne:0)}).forEach(ee=>{let W=ee.closest(Qm);W?W.appendChild(ee.parentElement===W?ee:ee.closest(`${Qm} > *`)):Z.appendChild(ee.parentElement===Z?ee:ee.closest(`${Qm} > *`))}),P.sort((ee,W)=>W[1]-ee[1]).forEach(ee=>{let W=S.current.querySelector(`${fc}[${ja}="${encodeURIComponent(ee[0])}"]`);W==null||W.parentElement.appendChild(W)})}function A(){let O=F().find(Z=>Z.getAttribute("aria-disabled")!=="true"),P=O==null?void 0:O.getAttribute(ja);N.setState("value",P||void 0)}function R(){var O,P,Z,ee;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let W=0;for(let X of r.current){let ne=(P=(O=a.current.get(X))==null?void 0:O.value)!=null?P:"",se=(ee=(Z=a.current.get(X))==null?void 0:Z.keywords)!=null?ee:[],fe=_(ne,se);n.current.filtered.items.set(X,fe),fe>0&&W++}for(let[X,ne]of i.current)for(let se of ne)if(n.current.filtered.items.get(se)>0){n.current.filtered.groups.add(X);break}n.current.filtered.count=W}function $(){var O,P,Z;let ee=B();ee&&(((O=ee.parentElement)==null?void 0:O.firstChild)===ee&&((Z=(P=ee.closest(fc))==null?void 0:P.querySelector(_G))==null||Z.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function B(){var O;return(O=S.current)==null?void 0:O.querySelector(`${z0}[aria-selected="true"]`)}function F(){var O;return Array.from((O=S.current)==null?void 0:O.querySelectorAll(V1))}function z(O){let P=F()[O];P&&N.setState("value",P.getAttribute(ja))}function q(O){var P;let Z=B(),ee=F(),W=ee.findIndex(ne=>ne===Z),X=ee[W+O];(P=l.current)!=null&&P.loop&&(X=W+O<0?ee[ee.length-1]:W+O===ee.length?ee[0]:ee[W+O]),X&&N.setState("value",X.getAttribute(ja))}function D(O){let P=B(),Z=P==null?void 0:P.closest(fc),ee;for(;Z&&!ee;)Z=O>0?DG(Z,fc):OG(Z,fc),ee=Z==null?void 0:Z.querySelector(V1);ee?N.setState("value",ee.getAttribute(ja)):q(O)}let I=()=>z(F().length-1),T=O=>{O.preventDefault(),O.metaKey?I():O.altKey?D(1):q(1)},H=O=>{O.preventDefault(),O.metaKey?z(0):O.altKey?D(-1):q(-1)};return p.createElement(Mr.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:O=>{var P;if((P=v.onKeyDown)==null||P.call(v,O),!O.defaultPrevented)switch(O.key){case"n":case"j":{b&&O.ctrlKey&&T(O);break}case"ArrowDown":{T(O);break}case"p":case"k":{b&&O.ctrlKey&&H(O);break}case"ArrowUp":{H(O);break}case"Home":{O.preventDefault(),z(0);break}case"End":{O.preventDefault(),I();break}case"Enter":if(!O.nativeEvent.isComposing&&O.keyCode!==229){O.preventDefault();let Z=B();if(Z){let ee=new Event(gv);Z.dispatchEvent(ee)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:$G},c),Pf(e,O=>p.createElement(eA.Provider,{value:N},p.createElement(ZT.Provider,{value:j},O))))}),CG=p.forwardRef((e,t)=>{var n,r;let i=p.useId(),a=p.useRef(null),o=p.useContext(tA),l=ru(),c=rA(e),d=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Ya(()=>{if(!d)return l.item(i,o==null?void 0:o.id)},[d]);let u=sA(i,a,[e.value,e.children,a],e.keywords),h=U0(),f=Xa(C=>C.value&&C.value===u.current),m=Xa(C=>d||l.filter()===!1?!0:C.search?C.filtered.items.get(i)>0:!0);p.useEffect(()=>{let C=a.current;if(!(!C||e.disabled))return C.addEventListener(gv,x),()=>C.removeEventListener(gv,x)},[m,e.onSelect,e.disabled]);function x(){var C,N;g(),(N=(C=c.current).onSelect)==null||N.call(C,u.current)}function g(){h.setState("value",u.current,!0)}if(!m)return null;let{disabled:b,value:v,onSelect:y,forceMount:w,keywords:k,...S}=e;return p.createElement(Mr.div,{ref:wd([a,t]),...S,id:i,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!f,"data-disabled":!!b,"data-selected":!!f,onPointerMove:b||l.disablePointerSelection?void 0:g,onClick:b?void 0:x},e.children)}),kG=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=p.useId(),l=p.useRef(null),c=p.useRef(null),d=p.useId(),u=ru(),h=Xa(m=>i||u.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Ya(()=>u.group(o),[]),sA(o,l,[e.value,e.heading,c]);let f=p.useMemo(()=>({id:o,forceMount:i}),[i]);return p.createElement(Mr.div,{ref:wd([l,t]),...a,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),Pf(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},p.createElement(tA.Provider,{value:f},m))))}),EG=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=p.useRef(null),a=Xa(o=>!o.search);return!n&&!a?null:p.createElement(Mr.div,{ref:wd([i,t]),...r,"cmdk-separator":"",role:"separator"})}),PG=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=U0(),o=Xa(u=>u.search),l=Xa(u=>u.value),c=ru(),d=p.useMemo(()=>{var u;let h=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${z0}[${ja}="${encodeURIComponent(l)}"]`);return h==null?void 0:h.getAttribute("id")},[]);return p.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),p.createElement(Mr.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:i?e.value:o,onChange:u=>{i||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),TG=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,a=p.useRef(null),o=p.useRef(null),l=ru();return p.useEffect(()=>{if(o.current&&a.current){let c=o.current,d=a.current,u,h=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;d.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(u),h.unobserve(c)}}},[]),p.createElement(Mr.div,{ref:wd([a,t]),...i,"cmdk-list":"",role:"listbox","aria-label":r,id:l.listId},Pf(e,c=>p.createElement("div",{ref:wd([o,l.listInnerRef]),"cmdk-list-sizer":""},c)))}),AG=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...l}=e;return p.createElement(wG,{open:n,onOpenChange:r},p.createElement(bG,{container:o},p.createElement(jG,{"cmdk-overlay":"",className:i}),p.createElement(NG,{"aria-label":e.label,"cmdk-dialog":"",className:a},p.createElement(nA,{ref:t,...l}))))}),RG=p.forwardRef((e,t)=>Xa(n=>n.filtered.count===0)?p.createElement(Mr.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),IG=p.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...a}=e;return p.createElement(Mr.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Pf(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),nr=Object.assign(nA,{List:TG,Item:CG,Input:PG,Group:kG,Separator:EG,Dialog:AG,Empty:RG,Loading:IG});function DG(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function OG(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function rA(e){let t=p.useRef(e);return Ya(()=>{t.current=e}),t}var Ya=typeof window>"u"?p.useEffect:p.useLayoutEffect;function _o(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function wd(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Xa(e){let t=U0(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function sA(e,t,n,r=[]){let i=p.useRef(),a=ru();return Ya(()=>{var o;let l=(()=>{var d;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():i.current}})(),c=r.map(d=>d.trim());a.value(e,l,c),(o=t.current)==null||o.setAttribute(ja,l),i.current=l}),i}var MG=()=>{let[e,t]=p.useState(),n=_o(()=>new Map);return Ya(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}};function LG(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Pf({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(LG(t),{ref:t.ref},n(t.props.children)):n(t)}var $G={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const B0=p.forwardRef(({className:e,...t},n)=>s.jsx(nr,{ref:n,className:Q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));B0.displayName=nr.displayName;const q0=p.forwardRef(({className:e,...t},n)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Kn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(nr.Input,{ref:n,className:Q("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));q0.displayName=nr.Input.displayName;const V0=p.forwardRef(({className:e,...t},n)=>s.jsx(nr.List,{ref:n,className:Q("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));V0.displayName=nr.List.displayName;const H0=p.forwardRef((e,t)=>s.jsx(nr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));H0.displayName=nr.Empty.displayName;const G0=p.forwardRef(({className:e,...t},n)=>s.jsx(nr.Group,{ref:n,className:Q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));G0.displayName=nr.Group.displayName;const FG=p.forwardRef(({className:e,...t},n)=>s.jsx(nr.Separator,{ref:n,className:Q("-mx-1 h-px bg-border",e),...t}));FG.displayName=nr.Separator.displayName;const W0=p.forwardRef(({className:e,...t},n)=>s.jsx(nr.Item,{ref:n,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));W0.displayName=nr.Item.displayName;function zG(){var $t;const{domainSlug:e}=ti(),t=Rt(),{domains:n}=Dn(),r=n.find(K=>K.id===e),i=e||"",{concepts:a,loading:o,refetch:l,updateConceptStatus:c,updateConceptParent:d,updateConcept:u,bulkUpdateStatus:h,addConcept:f,deleteConcept:m,saveMindmapPosition:x,getMindmapPosition:g,clearMindmapPositions:b,moveConceptUp:v,moveConceptDown:y,stats:w}=wf(i);pH();const[k,S]=p.useState(""),[C,N]=p.useState("approved");p.useState(null);const[j,_]=p.useState(!1),[E,A]=p.useState(void 0),[R,$]=p.useState(null);p.useState(!1);const[B,F]=p.useState("tree"),[z,q]=p.useState(!1);p.useState(!1);const[D,I]=p.useState(!1),[T,H]=p.useState(!1),[O,P]=p.useState(null),[Z,ee]=p.useState(""),[W,X]=p.useState(""),[ne,se]=p.useState("is_related_to"),[fe,de]=p.useState(!1),[ge,Ue]=p.useState(null),[Ie,De]=p.useState(""),{user:Se,isAuthenticated:Ke,loading:Be}=Dr(),{toast:Ce}=rt();p.useEffect(()=>{console.log("🔍 Current concepts in React state:",a.length),console.log("🔍 Suggested concepts in state:",a.filter(K=>K.status==="suggested").length)},[a]);const Ve=p.useMemo(()=>{const K=k.trim().toLowerCase();return console.log("🔍 Filtering concepts:",a.length,"with filter:",C,"query:",K),a.filter(Le=>{const _e=typeof Le.difficulty_level=="number"?` (L${Le.difficulty_level})`:"",Qe=(Le.name+_e+" "+(Le.description||"")).toLowerCase(),st=K?Qe.includes(K):!0;let Qt=!1;return C==="all"?Qt=!0:C==="approved"?Qt=Le.status==="approved":C==="pending"?Qt=Le.status==="suggested":C==="rejected"?Qt=Le.status==="rejected":C==="ai_suggested"?Qt=Le.status==="suggested"&&Le.generation_source==="ai":Qt=Le.status===C,st&&Qt})},[a,k,C]);p.useMemo(()=>a.filter(K=>K.status==="approved"),[a]),p.useMemo(()=>a.filter(K=>K.status==="suggested"),[a]);const dn=a.length===0,Mt=K=>{t(`/admin/domain/${e}/concepts/${K.id}`)},Kt=async()=>{R&&(await d(R.childId,R.parentId),$(null))};w.ai_suggested>0||w.approved>0;const ie=async()=>{I(!0);try{const{data:K,error:Le}=await L.functions.invoke("clear-and-reimport-concepts",{body:{domainId:i}});if(console.log("Import response:",{data:K,error:Le}),Le)throw Le;Ce({title:"Import successful!",description:"Concepts have been cleared and re-imported with proper hierarchy."}),window.location.reload()}catch(K){console.error("Import error:",K),Ce({title:"Import failed",description:K.message||"Failed to import concepts. Please try again.",variant:"destructive"})}finally{I(!1),q(!1)}};($t=Se==null?void 0:Se.app_metadata)==null||$t.role;const be=async K=>{console.log("🔍 handleAddConcept called with:",K);const Le=await f({...K,domain_id:K.domain_id||i});console.log("🔍 addConcept result:",Le),Le&&(console.log("🔍 Concept added successfully, closing modal and refetching..."),_(!1),A(void 0),console.log("🔍 Waiting 500ms before refetch to allow database propagation..."),setTimeout(()=>{console.log("🔍 Now calling refetch..."),l()},500))},V=async K=>{window.confirm("Are you sure you want to delete this concept? This action cannot be undone.")&&await m(K)},Y=async K=>{await c(K,"approved")&&Ce({title:"Concept Approved",description:"The concept has been approved successfully."})},ye=async K=>{await c(K,"rejected")&&Ce({title:"Concept Rejected",description:"The concept has been rejected.",variant:"destructive"})},Pe=[{value:"is_prerequisite_for",label:"Is a prerequisite for"},{value:"is_related_to",label:"Is related to"},{value:"contrasts_with",label:"Contrasts with"},{value:"is_a_practical_application_of",label:"Is a practical application of"}],Fe=K=>{P(K),X(""),ee(""),se("is_related_to"),H(!0)},G=K=>{t(`/admin/domain/${e}/concepts/${K.id}?tab=relationships`)},ke=K=>{console.log("Hierarchy change for:",K.name),Ue(K),De(K.parent_concept_id||""),de(!0)},Je=async()=>{if(ge)try{const K=Ie===""?null:Ie;await u(ge.id,{parent_concept_id:K}),de(!1),Ue(null),De("")}catch(K){console.error("Failed to update parent concept:",K)}},Lt=async()=>{if(!O||!W){Ce({title:"Missing information",description:"Please select a target concept and relationship type.",variant:"destructive"});return}if(W===O.id){Ce({title:"Invalid selection",description:"Source and target concepts must be different.",variant:"destructive"});return}try{const{error:K}=await L.from("concept_relationships").insert([{concept_a_id:O.id,concept_b_id:W,relationship_type:ne}]);if(K)throw K;Ce({title:"Relationship created",description:"The concepts have been linked successfully."}),H(!1),P(null),X(""),ee("")}catch(K){console.error("Create link error:",K),Ce({title:"Failed to create link",description:K.message||"Please try again.",variant:"destructive"})}};return Be||o?s.jsxs(Ki,{children:[s.jsx(Um,{}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):Ke?dn&&!o?s.jsxs(Ki,{children:[s.jsx(Um,{}),s.jsx(hH,{domainId:i,domainSlug:e||i,domainName:(r==null?void 0:r.name)||e||"Unknown Domain",onUploadComplete:()=>{},onImportComplete:()=>{window.location.reload()}})]}):s.jsxs(Ki,{children:[s.jsx(Um,{}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h1",{className:"text-2xl font-medium text-gray-900",children:[(r==null?void 0:r.name)||"Domain"," Management"]}),s.jsxs(U,{onClick:()=>{A(void 0),_(!0)},className:"bg-black text-white hover:bg-black/90",children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Concept"]})]}),s.jsx("div",{className:"flex items-center justify-end gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ny,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(dt,{value:C,onValueChange:N,children:[s.jsx(ot,{className:"w-[140px] bg-white",children:s.jsx(ut,{})}),s.jsxs(lt,{children:[s.jsx(me,{value:"approved",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Approved"]})}),s.jsx(me,{value:"suggested",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"Suggested"]})}),s.jsx(me,{value:"pending",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Pending"]})}),s.jsx(me,{value:"rejected",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),"Rejected"]})}),s.jsx(me,{value:"ai_suggested",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"AI Suggested"]})}),s.jsx(me,{value:"confirmed",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Confirmed"]})}),s.jsx(me,{value:"active",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),"Active (All except Rejected)"]})}),s.jsx(me,{value:"all",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),"All Statuses"]})})]})]})]}),s.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md overflow-hidden",children:[s.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>F("tree"),className:`flex items-center gap-2 rounded-none border-0 px-3 ${B==="tree"?"bg-black text-white hover:bg-black/90":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(cd,{className:"h-4 w-4"}),"Tree"]}),s.jsx("div",{className:"w-px bg-gray-300 h-6"}),s.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>F("list"),className:`flex items-center gap-2 rounded-none border-0 px-3 ${B==="list"?"bg-black text-white hover:bg-black/90":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(_O,{className:"h-4 w-4"}),"List"]})]})]})}),s.jsx("div",{className:"bg-white border-b",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex space-x-0",children:[s.jsxs("button",{onClick:()=>N("all"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${C==="all"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All (",a.length,")"]}),s.jsxs("button",{onClick:()=>N("approved"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${C==="approved"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Approved (",a.filter(K=>K.status==="approved").length,")"]}),s.jsxs("button",{onClick:()=>N("pending"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${C==="pending"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending (",a.filter(K=>K.status==="suggested").length,")"]}),s.jsxs("button",{onClick:()=>N("rejected"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${C==="rejected"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Rejected (",a.filter(K=>K.status==="rejected").length,")"]}),s.jsxs("button",{onClick:()=>N("ai_suggested"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${C==="ai_suggested"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["AI Suggested (",a.filter(K=>K.status==="suggested"&&K.generation_source==="ai").length,")"]})]}),s.jsxs("div",{className:"relative mr-4",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Te,{placeholder:"Search concepts...",value:k,onChange:K=>S(K.target.value),className:"pl-10 bg-gray-50 w-64"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border",children:B==="tree"?s.jsx("div",{className:"overflow-hidden",children:s.jsx(uH,{concepts:Ve,onConceptClick:Mt,onConceptDelete:V,onConceptUpdate:u,onAddChild:K=>{console.log("🔍 Add child clicked for parentId:",K);const Le=a.find(_e=>_e.id===K);console.log("🔍 Parent concept found:",Le==null?void 0:Le.name,Le),A(K),_(!0),console.log("🔍 Modal will open with selectedParentId:",K)},onStartLinking:Fe,onStartHierarchyChange:ke,onManageRelationships:G,showApprovalActions:C==="pending",onApproveConcept:Y,onRejectConcept:ye})}):s.jsx("div",{className:"overflow-hidden",children:s.jsx(W2,{concepts:Ve,onConceptClick:Mt,onConceptDelete:V,onConceptUpdate:u,onAddChild:K=>{console.log("🔍 Add child clicked for parentId:",K);const Le=a.find(_e=>_e.id===K);console.log("🔍 Parent concept found:",Le==null?void 0:Le.name,Le),A(K),_(!0),console.log("🔍 Modal will open with selectedParentId:",K)},onStartLinking:Fe,onStartHierarchyChange:ke,onManageRelationships:G,showApprovalActions:C==="pending",onApproveConcept:Y,onRejectConcept:ye})})})]}),s.jsx(yf,{open:(R==null?void 0:R.open)||!1,onOpenChange:K=>!K&&$(null),children:s.jsxs(Gd,{children:[s.jsxs(Wd,{children:[s.jsx(Qd,{children:"Confirm Hierarchy Change"}),s.jsxs(Yd,{children:["Do you want to make ",s.jsxs("strong",{children:['"',R==null?void 0:R.parentName,'"']})," the parent of"," ",s.jsxs("strong",{children:['"',R==null?void 0:R.childName,'"']}),"?"]})]}),s.jsxs(Kd,{children:[s.jsx(Jd,{children:"Cancel"}),s.jsx(Xd,{onClick:Kt,children:"Confirm"})]})]})}),j&&s.jsx(Y2,{concepts:a,parentConceptId:E,domainId:i,onClose:()=>{_(!1),A(void 0)},onSave:be}),s.jsx(on,{open:z,onOpenChange:q,children:s.jsxs(tn,{children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Re-import Master Concepts"}),s.jsx(Qn,{children:"This will clear all existing concepts for this domain and re-import them from the master concept list file. This action cannot be undone."})]}),s.jsxs(Gi,{children:[s.jsx(U,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),s.jsx(U,{onClick:ie,disabled:D,className:"flex items-center gap-2",children:D?s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(En,{className:"h-4 w-4"}),"Re-import Concepts"]})})]})]})}),s.jsx(on,{open:T,onOpenChange:H,children:s.jsxs(tn,{className:"sm:max-w-lg",children:[s.jsxs(nn,{children:[s.jsxs(rn,{className:"flex items-center gap-2",children:[s.jsx(Jg,{className:"h-4 w-4"})," Create Relationship"]}),s.jsx(Qn,{children:O?s.jsxs("span",{children:["Linking from: ",s.jsx("strong",{children:O.name})]}):"Choose a source concept to start linking."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Target concept"}),s.jsx("div",{className:"border rounded-md",children:s.jsxs(B0,{children:[s.jsx(q0,{placeholder:"Search concepts...",value:Z,onValueChange:ee}),s.jsxs(V0,{children:[s.jsx(H0,{children:"No concepts found."}),s.jsx(G0,{children:a.filter(K=>K.id!==(O==null?void 0:O.id)).filter(K=>Z?(K.name+" "+(K.description||"")).toLowerCase().includes(Z.toLowerCase()):!0).map(K=>s.jsx(W0,{value:K.name,onSelect:()=>X(K.id),children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{className:"truncate mr-3",children:K.name}),W===K.id&&s.jsx(ve,{variant:"secondary",className:"text-xs",children:"Selected"})]})},K.id))})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Relationship type"}),s.jsxs(dt,{value:ne,onValueChange:se,children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Select relationship type"})}),s.jsx(lt,{children:Pe.map(K=>s.jsx(me,{value:K.value,children:K.label},K.value))})]})]}),s.jsxs(Gi,{children:[s.jsx(U,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),s.jsx(U,{onClick:Lt,disabled:!W||!O,children:"Create Link"})]})]})}),s.jsx(on,{open:fe,onOpenChange:de,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsxs(rn,{className:"flex items-center gap-2",children:[s.jsx(cd,{className:"h-4 w-4"})," Change Parent Concept"]}),s.jsx(Qn,{children:ge&&s.jsxs("span",{children:["Change parent for: ",s.jsx("strong",{children:ge.name})]})})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Parent Concept"}),s.jsxs(dt,{value:Ie||"none",onValueChange:K=>De(K==="none"?"":K),children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Select parent concept or none"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"none",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{children:"None (Root level concept)"})})}),a.filter(K=>K.id!==(ge==null?void 0:ge.id)).sort((K,Le)=>K.name.localeCompare(Le.name)).map(K=>s.jsx(me,{value:K.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:K.name}),s.jsxs(ve,{variant:"outline",className:"text-xs",children:["L",K.difficulty_level??0]})]})},K.id))]})]})]})}),s.jsxs(Gi,{children:[s.jsx(U,{variant:"outline",onClick:()=>de(!1),children:"Cancel"}),s.jsx(U,{onClick:Je,className:"bg-black text-white hover:bg-black/90",children:"Save Changes"})]})]})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs(te,{className:"w-full max-w-md",children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Authentication Required"}),s.jsx(Me,{children:"You need to be logged in to access concepts. Please login to continue."})]}),s.jsx(re,{children:s.jsx(U,{onClick:()=>window.location.href="/",className:"w-full",children:"Go to Login"})})]})})}const UG=e=>{const[t,n]=p.useState([]),[r,i]=p.useState(!1),{toast:a}=rt(),o=p.useCallback(async()=>{if(!e)return;i(!0);const{data:h,error:f}=await L.from("concepts").select("id").eq("domain_id",e);if(f)throw console.error("Failed to load concepts for domain:",f),i(!1),f;const m=(h||[]).map(b=>b.id);if(m.length===0){n([]),i(!1);return}const{data:x,error:g}=await L.from("learning_goals").select("id, concept_id, goal_description, bloom_level, goal_type, sequence_order, status, created_at, metadata_json").in("concept_id",m).in("status",["suggested","approved","rejected"]).order("created_at",{ascending:!1});if(g)throw console.error("Failed to load learning goals:",g),i(!1),g;n(x||[]),i(!1)},[e]);p.useEffect(()=>{o().catch(()=>{})},[o]);const l=p.useMemo(()=>{const h=new Map;for(const f of t){const m=f.concept_id||"unlinked";h.has(m)||h.set(m,[]),h.get(m).push(f)}return h},[t]);return{goals:t,groupedByConcept:l,loading:r,refresh:o,approveGoal:async h=>{const{error:f}=await L.from("learning_goals").update({status:"approved"}).eq("id",h);if(f)throw console.error("Approve goal failed:",f),f;a({title:"Goal approved"}),await o()},rejectGoal:async h=>{const{error:f}=await L.from("learning_goals").update({status:"rejected"}).eq("id",h);if(f)throw console.error("Reject goal failed:",f),f;a({title:"Goal rejected"}),await o()},editGoal:async(h,f)=>{const{error:m}=await L.from("learning_goals").update({goal_description:f}).eq("id",h);if(m)throw console.error("Edit goal failed:",m),m;a({title:"Goal updated"}),await o()}}};var K0="Popover",[iA,KY]=wn(K0,[oa]),su=oa(),[BG,ua]=iA(K0),aA=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,l=su(t),c=p.useRef(null),[d,u]=p.useState(!1),[h=!1,f]=xr({prop:r,defaultProp:i,onChange:a});return s.jsx(Bp,{...l,children:s.jsx(BG,{scope:t,contentId:pr(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:o,children:n})})};aA.displayName=K0;var oA="PopoverAnchor",qG=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ua(oA,n),a=su(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Od,{...a,...r,ref:t})});qG.displayName=oA;var lA="PopoverTrigger",cA=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ua(lA,n),a=su(n),o=$e(t,i.triggerRef),l=s.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":fA(i.open),...r,ref:o,onClick:ae(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Od,{asChild:!0,...a,children:l})});cA.displayName=lA;var Q0="PopoverPortal",[VG,HG]=iA(Q0,{forceMount:void 0}),dA=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=ua(Q0,t);return s.jsx(VG,{scope:t,forceMount:n,children:s.jsx(Vt,{present:n||a.open,children:s.jsx($l,{asChild:!0,container:i,children:r})})})};dA.displayName=Q0;var Il="PopoverContent",uA=p.forwardRef((e,t)=>{const n=HG(Il,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=ua(Il,e.__scopePopover);return s.jsx(Vt,{present:r||a.open,children:a.modal?s.jsx(GG,{...i,ref:t}):s.jsx(WG,{...i,ref:t})})});uA.displayName=Il;var GG=p.forwardRef((e,t)=>{const n=ua(Il,e.__scopePopover),r=p.useRef(null),i=$e(t,r),a=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return zd(o)},[]),s.jsx(Fd,{as:Cn,allowPinchZoom:!0,children:s.jsx(hA,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ae(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),WG=p.forwardRef((e,t)=>{const n=ua(Il,e.__scopePopover),r=p.useRef(!1),i=p.useRef(!1);return s.jsx(hA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),hA=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,f=ua(Il,n),m=su(n);return cf(),s.jsx($d,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(eo,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:s.jsx(qp,{"data-state":fA(f.open),role:"dialog",id:f.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),pA="PopoverClose",KG=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ua(pA,n);return s.jsx(je.button,{type:"button",...r,ref:t,onClick:ae(e.onClick,()=>i.onOpenChange(!1))})});KG.displayName=pA;var QG="PopoverArrow",YG=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=su(n);return s.jsx(Vp,{...i,...r,ref:t})});YG.displayName=QG;function fA(e){return e?"open":"closed"}var XG=aA,JG=cA,ZG=dA,mA=uA;const eW=XG,tW=JG,gA=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>s.jsx(ZG,{children:s.jsx(mA,{ref:i,align:t,sideOffset:n,className:Q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));gA.displayName=mA.displayName;const nW=["Remember","Understand","Apply","Analyze","Evaluate","Create"],rW={suggested:{color:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Pending Review"},approved:{color:"bg-green-50 text-green-700 border-green-200",label:"Approved"},rejected:{color:"bg-red-50 text-red-700 border-red-200",label:"Rejected"},edited:{color:"bg-blue-50 text-blue-700 border-blue-200",label:"Edited"}};function sW({goal:e,onStatusChange:t,onEdit:n}){const[r,i]=p.useState(!1),[a,o]=p.useState(e.title||"Untitled Goal"),[l,c]=p.useState(e.goal_description),[d,u]=p.useState(e.bloomsLevel||e.bloom_level||"Apply"),h=()=>{n(e.id,{goal_description:l,bloom_level:d}),i(!1)},f=()=>{o(e.title||"Untitled Goal"),c(e.goal_description),u(e.bloomsLevel||e.bloom_level||"Apply"),i(!1)},m=rW[e.status];return s.jsxs(te,{className:"relative",children:[s.jsx(le,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[r?s.jsx(Te,{value:a,onChange:x=>o(x.target.value),className:"mb-2",placeholder:"Goal title..."}):s.jsx("h3",{className:"pr-4",children:e.title||e.goal_description.split(".")[0]||"Untitled Goal"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(ve,{variant:"outline",className:m.color,children:m.label}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Pt,{className:"h-3 w-3"}),r?s.jsxs(dt,{value:d,onValueChange:u,children:[s.jsx(ot,{className:"w-32 h-6 text-xs",children:s.jsx(ut,{})}),s.jsx(lt,{children:nW.map(x=>s.jsx(me,{value:x,children:x},x))})]}):s.jsx("span",{children:e.bloomsLevel||e.bloom_level||"Apply"})]})]})]}),s.jsx("div",{className:"flex items-center gap-1",children:r?s.jsxs(s.Fragment,{children:[s.jsx(U,{size:"sm",variant:"ghost",onClick:h,className:"h-8 w-8 p-0",children:s.jsx(Vi,{className:"h-4 w-4"})}),s.jsx(U,{size:"sm",variant:"ghost",onClick:f,className:"h-8 w-8 p-0",children:s.jsx(Bt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(U,{size:"sm",variant:"ghost",onClick:()=>i(!0),className:"h-8 w-8 p-0",children:s.jsx(Di,{className:"h-4 w-4"})}),e.status!=="approved"&&s.jsx(U,{size:"sm",variant:"ghost",onClick:()=>t(e.id,"approved"),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700 hover:bg-green-50",children:s.jsx(Js,{className:"h-4 w-4"})}),e.status!=="rejected"&&s.jsx(U,{size:"sm",variant:"ghost",onClick:()=>t(e.id,"rejected"),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Bt,{className:"h-4 w-4"})})]})})]})}),s.jsxs(re,{className:"pt-0",children:[r?s.jsx(Rr,{value:l,onChange:x=>c(x.target.value),placeholder:"Goal description...",className:"min-h-[80px]"}):s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.goal_description}),e.concepts&&e.concepts.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-4",children:e.concepts.map(x=>s.jsx(ve,{variant:"secondary",className:"text-xs",children:x.replace("-"," ")},x))})]})]})}function iW({selectedConcept:e,onConceptSelect:t,concepts:n}){const[r,i]=p.useState(!1),[a,o]=p.useState(""),l=p.useMemo(()=>n.find(u=>u.id===e),[n,e]),c=u=>{u.stopPropagation(),t("")},d=p.useMemo(()=>{if(!a)return n;const u=a.toLowerCase();return n.filter(h=>{var f;return h.name.toLowerCase().includes(u)||((f=h.description)==null?void 0:f.toLowerCase().includes(u))})},[a,n]);return s.jsxs(eW,{open:r,onOpenChange:i,children:[s.jsx(tW,{asChild:!0,children:s.jsxs(U,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between h-auto min-h-[44px] p-3",children:[l?s.jsxs("div",{className:"flex items-center gap-2 text-left w-full",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"truncate",children:l.name}),l.description&&s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:l.description})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-auto",children:[s.jsx("button",{onClick:c,className:"h-4 w-4 flex items-center justify-center opacity-70 hover:opacity-100 transition-opacity",children:s.jsx(Bt,{className:"h-4 w-4"})}),s.jsx(Kn,{className:"h-4 w-4 opacity-70"})]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Kn,{className:"h-4 w-4"}),s.jsx("span",{children:"Type to search a concept..."})]}),!l&&s.jsx(Id,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(gA,{className:"w-[600px] p-0",align:"start",children:s.jsxs(B0,{shouldFilter:!1,children:[s.jsx(q0,{placeholder:"Type to search concepts...",value:a,onValueChange:o}),s.jsxs(V0,{children:[s.jsx(H0,{children:s.jsxs("div",{className:"py-6 text-center text-sm",children:[s.jsx(Kn,{className:"mx-auto h-4 w-4 opacity-50 mb-2"}),'No concepts found matching "',a,'"']})}),s.jsx(tu,{className:"h-[400px]",children:s.jsx(G0,{children:d.sort((u,h)=>u.name.localeCompare(h.name)).map(u=>s.jsx(W0,{value:u.id,onSelect:h=>{t(h===e?"":h),i(!1),o("")},className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-3 w-full",children:[s.jsx(Js,{className:Q("h-4 w-4 flex-shrink-0",e===u.id?"opacity-100":"opacity-0")}),s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:u.name}),u.difficulty_level!==void 0&&s.jsxs(ve,{variant:"outline",className:"text-xs",children:["L",u.difficulty_level]})]}),u.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-1",children:u.description})]})]})},u.id))})})]})]})})]})}function aW({goals:e,onGoalStatusChange:t,onEdit:n}){const[r,i]=p.useState("all"),a=c=>c?e.filter(d=>d.status===c):e,o=c=>e.filter(d=>d.status===c).length,l=(c,d)=>{n(c,d)};return s.jsxs(te,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(vn,{className:"h-5 w-5"}),s.jsx("h2",{children:"Generated Learning Goals"}),s.jsxs(ve,{variant:"secondary",children:[e.length," goals"]})]}),s.jsxs(ri,{value:r,onValueChange:i,className:"w-full",children:[s.jsxs(Ps,{className:"grid w-full grid-cols-5",children:[s.jsxs(et,{value:"all",className:"relative",children:["All",s.jsx(ve,{variant:"outline",className:"ml-2 text-xs",children:e.length})]}),s.jsxs(et,{value:"suggested",className:"relative",children:["Pending",s.jsx(ve,{variant:"outline",className:"ml-2 text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:o("suggested")})]}),s.jsxs(et,{value:"approved",className:"relative",children:["Approved",s.jsx(ve,{variant:"outline",className:"ml-2 text-xs bg-green-50 text-green-700 border-green-200",children:o("approved")})]}),s.jsxs(et,{value:"rejected",className:"relative",children:["Rejected",s.jsx(ve,{variant:"outline",className:"ml-2 text-xs bg-red-50 text-red-700 border-red-200",children:o("rejected")})]}),s.jsxs(et,{value:"edited",className:"relative",children:["Edited",s.jsx(ve,{variant:"outline",className:"ml-2 text-xs bg-blue-50 text-blue-700 border-blue-200",children:o("edited")})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx(tt,{value:"all",className:"mt-0",children:s.jsx(mc,{goals:a(),onStatusChange:t,onEdit:l})}),s.jsx(tt,{value:"suggested",className:"mt-0",children:s.jsx(mc,{goals:a("suggested"),onStatusChange:t,onEdit:l})}),s.jsx(tt,{value:"approved",className:"mt-0",children:s.jsx(mc,{goals:a("approved"),onStatusChange:t,onEdit:l})}),s.jsx(tt,{value:"rejected",className:"mt-0",children:s.jsx(mc,{goals:a("rejected"),onStatusChange:t,onEdit:l})}),s.jsx(tt,{value:"edited",className:"mt-0",children:s.jsx(mc,{goals:a("edited"),onStatusChange:t,onEdit:l})})]})]})]})}function mc({goals:e,onStatusChange:t,onEdit:n}){return e.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(vn,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{children:"No learning goals in this category."})]}):s.jsx("div",{className:"space-y-4",children:e.map(r=>s.jsx(sW,{goal:r,onStatusChange:t,onEdit:n},r.id))})}function H1(){const{domainId:e}=ti(),[t]=hk(),n=t.get("conceptId"),{domains:r}=Dn(),i=p.useMemo(()=>e?r.find(_=>_.id===e||_.slug===e):r[0],[r,e]),[a,o]=p.useState(n),[l,c]=p.useState([]),[d,u]=p.useState([]),[h,f]=p.useState(!1),[m,x]=p.useState(!1),{goals:g,approveGoal:b,rejectGoal:v,editGoal:y}=UG((i==null?void 0:i.id)??e),{toast:w}=rt();p.useEffect(()=>{if(!(i!=null&&i.id)&&!e)return;(async()=>{x(!0);try{const E=(i==null?void 0:i.id)??e,{data:A,error:R}=await L.from("concepts").select("id, name, description, difficulty_level, domain_id").eq("domain_id",E).eq("status","approved").order("name");if(R)throw R;c(A||[])}catch(E){console.error("Failed to load concepts:",E),w({title:"Failed to load concepts",description:"Please try refreshing the page.",variant:"destructive"})}finally{x(!1)}})()},[i==null?void 0:i.id,e,w]),p.useEffect(()=>{const _=g.map(E=>({...E,status:E.status||"suggested",title:E.goal_description.split(".")[0]+".",bloomsLevel:E.bloom_level,concepts:[a].filter(Boolean)}));u(_)},[g,a]);const k=async _=>{const E=l.find($=>$.id===_);if(!E)return[];const A=E.name,R=[];return R.push({id:`goal-${_}-understanding`,concept_id:_,title:`Understand ${A} fundamentals`,goal_description:`Students will explain the basic principles and characteristics of ${A}, including its role in the domain and practical applications.`,bloom_level:"Understand",bloomsLevel:"Understand",goal_type:"learning_objective",sequence_order:1,status:"suggested",created_at:new Date().toISOString(),concepts:[_],metadata_json:null},{id:`goal-${_}-application`,concept_id:_,title:`Apply ${A} in practice`,goal_description:`Students will demonstrate practical application of ${A} in real-world scenarios and problem-solving contexts.`,bloom_level:"Apply",bloomsLevel:"Apply",goal_type:"learning_objective",sequence_order:2,status:"suggested",created_at:new Date().toISOString(),concepts:[_],metadata_json:null},{id:`goal-${_}-analysis`,concept_id:_,title:`Analyze ${A} in context`,goal_description:`Students will analyze examples of ${A} in various contexts, identifying key patterns and relationships with other concepts.`,bloom_level:"Analyze",bloomsLevel:"Analyze",goal_type:"learning_objective",sequence_order:3,status:"suggested",created_at:new Date().toISOString(),concepts:[_],metadata_json:null}),R},S=async()=>{if(a){f(!0);try{await new Promise(E=>setTimeout(E,2e3));const _=await k(a);u(_),w({title:"Goals Generated",description:`Generated ${_.length} learning goals for the selected concept.`})}catch{w({title:"Generation Failed",description:"Failed to generate learning goals. Please try again.",variant:"destructive"})}finally{f(!1)}}},C=async(_,E)=>{try{E==="approved"?await b(_):E==="rejected"&&await v(_),u(A=>A.map(R=>R.id===_?{...R,status:E}:R))}catch{w({title:"Status Update Failed",description:"Failed to update goal status. Please try again.",variant:"destructive"})}},N=async(_,E)=>{try{await y(_,E.goal_description||""),u(A=>A.map(R=>R.id===_?{...R,...E,status:"edited"}:R))}catch{w({title:"Edit Failed",description:"Failed to edit goal. Please try again.",variant:"destructive"})}},j=_=>{const E=l.find(A=>A.id===_);return(E==null?void 0:E.name)||_.replace(/-/g," ").replace(/\b\w/g,A=>A.toUpperCase())};return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsx(Cs,{}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Mp,{className:"h-8 w-8 text-primary"}),s.jsx("h1",{className:"text-3xl",children:"Learning Goals Management"})]}),s.jsx("p",{className:"text-muted-foreground",children:e?`Search and select a concept below to generate AI-suggested learning goals for ${(i==null?void 0:i.name)||"this domain"}.`:"Search and select a concept below to generate AI-suggested learning goals for your curriculum."}),!e&&r.length>0&&s.jsx("div",{className:"mt-4",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Pt,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium",children:"Domain:"}),s.jsxs(dt,{value:(i==null?void 0:i.id)||"",onValueChange:_=>{window.location.reload()},children:[s.jsx(ot,{className:"w-full mt-1",children:s.jsx(ut,{placeholder:"Select a domain"})}),s.jsx(lt,{children:r.map(_=>s.jsx(me,{value:_.id,children:_.name},_.id))})]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-stretch",children:[s.jsx("div",{className:"lg:col-span-2 flex",children:s.jsxs(te,{className:"p-6 flex-1",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"h-5 w-5"}),s.jsx("h2",{children:a?`Selected concept: ${j(a)}`:"Select concept or show the name of the selected concept"})]})}),m?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(bs,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading concepts..."})]}):s.jsx(iW,{selectedConcept:a,onConceptSelect:_=>{o(_===a?null:_),u([])},concepts:l})]})}),s.jsx("div",{className:"flex flex-col",children:s.jsx(te,{className:"p-6 flex-1",children:s.jsx("div",{className:"space-y-1",children:s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs(U,{onClick:S,disabled:!a||h,className:"flex items-center gap-2",variant:"default",children:[s.jsx(Xi,{className:"h-4 w-4"}),h?"Generating...":"AI Generate Goals"]}),s.jsxs(U,{onClick:()=>{console.log("Manual goal creation clicked"),w({title:"Coming Soon",description:"Manual goal creation will be available soon."})},disabled:!a,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(er,{className:"h-4 w-4"}),"Create Goal Manually"]}),s.jsxs(U,{onClick:()=>{console.log("View exercises clicked"),w({title:"Coming Soon",description:"Exercise management will be available soon."})},disabled:!a,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Zi,{className:"h-4 w-4"}),"View Exercises"]})]})})})})]}),s.jsx("div",{className:"mt-12",children:s.jsx(aW,{goals:d,onGoalStatusChange:C,onEdit:N})})]})})}var xA={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(ln,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,d={};function u(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var E=S(_);E.chunkSize=parseInt(E.chunkSize),_.step||_.chunk||(E.chunkSize=null),this._handle=new g(E),(this._handle.streamer=this)._config=E}).call(this,j),this.parseChunk=function(_,E){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let $=this._config.newline;$||(R=this._config.quoteChar||'"',$=this._handle.guessLineEndings(_,R)),_=[..._.split($).slice(A)].join($)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(R=this._config.beforeFirstChunk(_))!==void 0&&(_=R),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+_,R=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=R.meta.cursor,A=(this._finished||(this._partialLine=A.substring(_-this._baseIndex),this._baseIndex=_),R&&R.data&&(this._rowCount+=R.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:R,workerId:d.WORKER_ID,finished:A});else if(N(this._config.chunk)&&!E){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=R=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!A||!N(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(_){N(this._config.error)?this._config.error(_):o&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:_,finished:!1})}}function h(j){var _;(j=j||{}).chunkSize||(j.chunkSize=d.RemoteChunkSize),u.call(this,j),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),a||(_.onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var E,A=this._config.downloadRequestHeaders;for(E in A)_.setRequestHeader(E,A[E])}var R;this._config.chunkSize&&(R=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+R));try{_.send(this._config.downloadRequestBody)}catch($){this._chunkError($.message)}a&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(E){E=_.statusText||E,this._sendError(new Error(E))}}function f(j){(j=j||{}).chunkSize||(j.chunkSize=d.LocalChunkSize),u.call(this,j);var _,E,A=typeof FileReader<"u";this.stream=function(R){this._input=R,E=R.slice||R.webkitSlice||R.mozSlice,A?((_=new FileReader).onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input,$=(this._config.chunkSize&&($=Math.min(this._start+this._config.chunkSize,this._input.size),R=E.call(R,this._start,$)),_.readAsText(R,this._config.encoding));A||this._chunkLoaded({target:{result:$}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(_.error)}}function m(j){var _;u.call(this,j=j||{}),this.stream=function(E){return _=E,this._nextChunk()},this._nextChunk=function(){var E,A;if(!this._finished)return E=this._config.chunkSize,_=E?(A=_.substring(0,E),_.substring(E)):(A=_,""),this._finished=!_,this.parseChunk(A)}}function x(j){u.call(this,j=j||{});var _=[],E=!0,A=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):E=!0},this._streamData=C(function(R){try{_.push(typeof R=="string"?R:R.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch($){this._streamError($)}},this),this._streamError=C(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=C(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(j){var _,E,A,R,$=Math.pow(2,53),B=-$,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,z=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,q=this,D=0,I=0,T=!1,H=!1,O=[],P={data:[],errors:[],meta:{}};function Z(ne){return j.skipEmptyLines==="greedy"?ne.join("").trim()==="":ne.length===1&&ne[0].length===0}function ee(){if(P&&A&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),A=!1),j.skipEmptyLines&&(P.data=P.data.filter(function(ge){return!Z(ge)})),W()){let ge=function(Ue,Ie){N(j.transformHeader)&&(Ue=j.transformHeader(Ue,Ie)),O.push(Ue)};var de=ge;if(P)if(Array.isArray(P.data[0])){for(var ne=0;W()&&ne<P.data.length;ne++)P.data[ne].forEach(ge);P.data.splice(0,1)}else P.data.forEach(ge)}function se(ge,Ue){for(var Ie=j.header?{}:[],De=0;De<ge.length;De++){var Se=De,Ke=ge[De],Ke=((Be,Ce)=>(Ve=>(j.dynamicTypingFunction&&j.dynamicTyping[Ve]===void 0&&(j.dynamicTyping[Ve]=j.dynamicTypingFunction(Ve)),(j.dynamicTyping[Ve]||j.dynamicTyping)===!0))(Be)?Ce==="true"||Ce==="TRUE"||Ce!=="false"&&Ce!=="FALSE"&&((Ve=>{if(F.test(Ve)&&(Ve=parseFloat(Ve),B<Ve&&Ve<$))return 1})(Ce)?parseFloat(Ce):z.test(Ce)?new Date(Ce):Ce===""?null:Ce):Ce)(Se=j.header?De>=O.length?"__parsed_extra":O[De]:Se,Ke=j.transform?j.transform(Ke,Se):Ke);Se==="__parsed_extra"?(Ie[Se]=Ie[Se]||[],Ie[Se].push(Ke)):Ie[Se]=Ke}return j.header&&(De>O.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+De,I+Ue):De<O.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+De,I+Ue)),Ie}var fe;P&&(j.header||j.dynamicTyping||j.transform)&&(fe=1,!P.data.length||Array.isArray(P.data[0])?(P.data=P.data.map(se),fe=P.data.length):P.data=se(P.data,0),j.header&&P.meta&&(P.meta.fields=O),I+=fe)}function W(){return j.header&&O.length===0}function X(ne,se,fe,de){ne={type:ne,code:se,message:fe},de!==void 0&&(ne.row=de),P.errors.push(ne)}N(j.step)&&(R=j.step,j.step=function(ne){P=ne,W()?ee():(ee(),P.data.length!==0&&(D+=ne.data.length,j.preview&&D>j.preview?E.abort():(P.data=P.data[0],R(P,q))))}),this.parse=function(ne,se,fe){var de=j.quoteChar||'"',de=(j.newline||(j.newline=this.guessLineEndings(ne,de)),A=!1,j.delimiter?N(j.delimiter)&&(j.delimiter=j.delimiter(ne),P.meta.delimiter=j.delimiter):((de=((ge,Ue,Ie,De,Se)=>{var Ke,Be,Ce,Ve;Se=Se||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var dn=0;dn<Se.length;dn++){for(var Mt,Kt=Se[dn],ie=0,be=0,V=0,Y=(Ce=void 0,new v({comments:De,delimiter:Kt,newline:Ue,preview:10}).parse(ge)),ye=0;ye<Y.data.length;ye++)Ie&&Z(Y.data[ye])?V++:(Mt=Y.data[ye].length,be+=Mt,Ce===void 0?Ce=Mt:0<Mt&&(ie+=Math.abs(Mt-Ce),Ce=Mt));0<Y.data.length&&(be/=Y.data.length-V),(Be===void 0||ie<=Be)&&(Ve===void 0||Ve<be)&&1.99<be&&(Be=ie,Ke=Kt,Ve=be)}return{successful:!!(j.delimiter=Ke),bestDelimiter:Ke}})(ne,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=de.bestDelimiter:(A=!0,j.delimiter=d.DefaultDelimiter),P.meta.delimiter=j.delimiter),S(j));return j.preview&&j.header&&de.preview++,_=ne,E=new v(de),P=E.parse(_,se,fe),ee(),T?{meta:{paused:!0}}:P||{meta:{paused:!1}}},this.paused=function(){return T},this.pause=function(){T=!0,E.abort(),_=N(j.chunk)?"":_.substring(E.getCharIndex())},this.resume=function(){q.streamer._halted?(T=!1,q.streamer.parseChunk(_,!0)):setTimeout(q.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,E.abort(),P.meta.aborted=!0,N(j.complete)&&j.complete(P),_=""},this.guessLineEndings=function(ge,de){ge=ge.substring(0,1048576);var de=new RegExp(b(de)+"([^]*?)"+b(de),"gm"),fe=(ge=ge.replace(de,"")).split("\r"),de=ge.split(`
`),ge=1<de.length&&de[0].length<fe[0].length;if(fe.length===1||ge)return`
`;for(var Ue=0,Ie=0;Ie<fe.length;Ie++)fe[Ie][0]===`
`&&Ue++;return Ue>=fe.length/2?`\r
`:"\r"}}function b(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(j){var _=(j=j||{}).delimiter,E=j.newline,A=j.comments,R=j.step,$=j.preview,B=j.fastMode,F=null,z=!1,q=j.quoteChar==null?'"':j.quoteChar,D=q;if(j.escapeChar!==void 0&&(D=j.escapeChar),(typeof _!="string"||-1<d.BAD_DELIMITERS.indexOf(_))&&(_=","),A===_)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<d.BAD_DELIMITERS.indexOf(A))&&(A=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var I=0,T=!1;this.parse=function(H,O,P){if(typeof H!="string")throw new Error("Input must be a string");var Z=H.length,ee=_.length,W=E.length,X=A.length,ne=N(R),se=[],fe=[],de=[],ge=I=0;if(!H)return ie();if(B||B!==!1&&H.indexOf(q)===-1){for(var Ue=H.split(E),Ie=0;Ie<Ue.length;Ie++){if(de=Ue[Ie],I+=de.length,Ie!==Ue.length-1)I+=E.length;else if(P)return ie();if(!A||de.substring(0,X)!==A){if(ne){if(se=[],Ve(de.split(_)),be(),T)return ie()}else Ve(de.split(_));if($&&$<=Ie)return se=se.slice(0,$),ie(!0)}}return ie()}for(var De=H.indexOf(_,I),Se=H.indexOf(E,I),Ke=new RegExp(b(D)+b(q),"g"),Be=H.indexOf(q,I);;)if(H[I]===q)for(Be=I,I++;;){if((Be=H.indexOf(q,Be+1))===-1)return P||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:se.length,index:I}),Mt();if(Be===Z-1)return Mt(H.substring(I,Be).replace(Ke,q));if(q===D&&H[Be+1]===D)Be++;else if(q===D||Be===0||H[Be-1]!==D){De!==-1&&De<Be+1&&(De=H.indexOf(_,Be+1));var Ce=dn((Se=Se!==-1&&Se<Be+1?H.indexOf(E,Be+1):Se)===-1?De:Math.min(De,Se));if(H.substr(Be+1+Ce,ee)===_){de.push(H.substring(I,Be).replace(Ke,q)),H[I=Be+1+Ce+ee]!==q&&(Be=H.indexOf(q,I)),De=H.indexOf(_,I),Se=H.indexOf(E,I);break}if(Ce=dn(Se),H.substring(Be+1+Ce,Be+1+Ce+W)===E){if(de.push(H.substring(I,Be).replace(Ke,q)),Kt(Be+1+Ce+W),De=H.indexOf(_,I),Be=H.indexOf(q,I),ne&&(be(),T))return ie();if($&&se.length>=$)return ie(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:se.length,index:I}),Be++}}else if(A&&de.length===0&&H.substring(I,I+X)===A){if(Se===-1)return ie();I=Se+W,Se=H.indexOf(E,I),De=H.indexOf(_,I)}else if(De!==-1&&(De<Se||Se===-1))de.push(H.substring(I,De)),I=De+ee,De=H.indexOf(_,I);else{if(Se===-1)break;if(de.push(H.substring(I,Se)),Kt(Se+W),ne&&(be(),T))return ie();if($&&se.length>=$)return ie(!0)}return Mt();function Ve(V){se.push(V),ge=I}function dn(V){var Y=0;return Y=V!==-1&&(V=H.substring(Be+1,V))&&V.trim()===""?V.length:Y}function Mt(V){return P||(V===void 0&&(V=H.substring(I)),de.push(V),I=Z,Ve(de),ne&&be()),ie()}function Kt(V){I=V,Ve(de),de=[],Se=H.indexOf(E,I)}function ie(V){if(j.header&&!O&&se.length&&!z){var Y=se[0],ye=Object.create(null),Pe=new Set(Y);let Fe=!1;for(let G=0;G<Y.length;G++){let ke=Y[G];if(ye[ke=N(j.transformHeader)?j.transformHeader(ke,G):ke]){let Je,Lt=ye[ke];for(;Je=ke+"_"+Lt,Lt++,Pe.has(Je););Pe.add(Je),Y[G]=Je,ye[ke]++,Fe=!0,(F=F===null?{}:F)[Je]=ke}else ye[ke]=1,Y[G]=ke;Pe.add(ke)}Fe&&console.warn("Duplicate headers found and renamed."),z=!0}return{data:se,errors:fe,meta:{delimiter:_,linebreak:E,aborted:T,truncated:!!V,cursor:ge+(O||0),renamedHeaders:F}}}function be(){R(ie()),se=[],fe=[]}},this.abort=function(){T=!0},this.getCharIndex=function(){return I}}function y(j){var _=j.data,E=l[_.workerId],A=!1;if(_.error)E.userError(_.error,_.file);else if(_.results&&_.results.data){var R={abort:function(){A=!0,w(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(N(E.userStep)){for(var $=0;$<_.results.data.length&&(E.userStep({data:_.results.data[$],errors:_.results.errors,meta:_.results.meta},R),!A);$++);delete _.results}else N(E.userChunk)&&(E.userChunk(_.results,R,_.file),delete _.results)}_.finished&&!A&&w(_.workerId,_.results)}function w(j,_){var E=l[j];N(E.userComplete)&&E.userComplete(_),E.terminate(),delete l[j]}function k(){throw new Error("Not implemented.")}function S(j){if(typeof j!="object"||j===null)return j;var _,E=Array.isArray(j)?[]:{};for(_ in j)E[_]=S(j[_]);return E}function C(j,_){return function(){j.apply(_,arguments)}}function N(j){return typeof j=="function"}return d.parse=function(j,_){var E=(_=_||{}).dynamicTyping||!1;if(N(E)&&(_.dynamicTypingFunction=E,E={}),_.dynamicTyping=E,_.transform=!!N(_.transform)&&_.transform,!_.worker||!d.WORKERS_SUPPORTED)return E=null,d.NODE_STREAM_INPUT,typeof j=="string"?(j=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(j),E=new(_.download?h:m)(_)):j.readable===!0&&N(j.read)&&N(j.on)?E=new x(_):(r.File&&j instanceof File||j instanceof Object)&&(E=new f(_)),E.stream(j);(E=(()=>{var A;return!!d.WORKERS_SUPPORTED&&(A=(()=>{var R=r.URL||r.webkitURL||null,$=n.toString();return d.BLOB_URL||(d.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",$,")();"],{type:"text/javascript"})))})(),(A=new r.Worker(A)).onmessage=y,A.id=c++,l[A.id]=A)})()).userStep=_.step,E.userChunk=_.chunk,E.userComplete=_.complete,E.userError=_.error,_.step=N(_.step),_.chunk=N(_.chunk),_.complete=N(_.complete),_.error=N(_.error),delete _.worker,E.postMessage({input:j,config:_,workerId:E.id})},d.unparse=function(j,_){var E=!1,A=!0,R=",",$=`\r
`,B='"',F=B+B,z=!1,q=null,D=!1,I=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||d.BAD_DELIMITERS.filter(function(O){return _.delimiter.indexOf(O)!==-1}).length||(R=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(E=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(z=_.skipEmptyLines),typeof _.newline=="string"&&($=_.newline),typeof _.quoteChar=="string"&&(B=_.quoteChar),typeof _.header=="boolean"&&(A=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");q=_.columns}_.escapeChar!==void 0&&(F=_.escapeChar+B),_.escapeFormulae instanceof RegExp?D=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(D=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(B),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return T(null,j,z);if(typeof j[0]=="object")return T(q||Object.keys(j[0]),j,z)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||q),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),T(j.fields||[],j.data||[],z);throw new Error("Unable to serialize unrecognized input");function T(O,P,Z){var ee="",W=(typeof O=="string"&&(O=JSON.parse(O)),typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(O)&&0<O.length),X=!Array.isArray(P[0]);if(W&&A){for(var ne=0;ne<O.length;ne++)0<ne&&(ee+=R),ee+=H(O[ne],ne);0<P.length&&(ee+=$)}for(var se=0;se<P.length;se++){var fe=(W?O:P[se]).length,de=!1,ge=W?Object.keys(P[se]).length===0:P[se].length===0;if(Z&&!W&&(de=Z==="greedy"?P[se].join("").trim()==="":P[se].length===1&&P[se][0].length===0),Z==="greedy"&&W){for(var Ue=[],Ie=0;Ie<fe;Ie++){var De=X?O[Ie]:Ie;Ue.push(P[se][De])}de=Ue.join("").trim()===""}if(!de){for(var Se=0;Se<fe;Se++){0<Se&&!ge&&(ee+=R);var Ke=W&&X?O[Se]:Se;ee+=H(P[se][Ke],Se)}se<P.length-1&&(!Z||0<fe&&!ge)&&(ee+=$)}}return ee}function H(O,P){var Z,ee;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(ee=!1,D&&typeof O=="string"&&D.test(O)&&(O="'"+O,ee=!0),Z=O.toString().replace(I,F),(ee=ee||E===!0||typeof E=="function"&&E(O,P)||Array.isArray(E)&&E[P]||((W,X)=>{for(var ne=0;ne<X.length;ne++)if(-1<W.indexOf(X[ne]))return!0;return!1})(Z,d.BAD_DELIMITERS)||-1<Z.indexOf(R)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?B+Z+B:Z)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=v,d.ParserHandle=g,d.NetworkStreamer=h,d.FileStreamer=f,d.StringStreamer=m,d.ReadableStreamStreamer=x,r.jQuery&&((i=r.jQuery).fn.parse=function(j){var _=j.config||{},E=[];return this.each(function($){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)E.push({file:this.files[B],inputElem:this,instanceConfig:i.extend({},_)})}),A(),this;function A(){if(E.length===0)N(j.complete)&&j.complete();else{var $,B,F,z,q=E[0];if(N(j.before)){var D=j.before(q.file,q.inputElem);if(typeof D=="object"){if(D.action==="abort")return $="AbortError",B=q.file,F=q.inputElem,z=D.reason,void(N(j.error)&&j.error({name:$},B,F,z));if(D.action==="skip")return void R();typeof D.config=="object"&&(q.instanceConfig=i.extend(q.instanceConfig,D.config))}else if(D==="skip")return void R()}var I=q.instanceConfig.complete;q.instanceConfig.complete=function(T){N(I)&&I(T,q.file,q.inputElem),R()},d.parse(q.file,q.instanceConfig)}}function R(){E.splice(0,1),A()}}),o&&(r.onmessage=function(j){j=j.data,d.WORKER_ID===void 0&&j&&(d.WORKER_ID=j.workerId),typeof j.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(j.input,j.config),finished:!0}):(r.File&&j.input instanceof File||j.input instanceof Object)&&(j=d.parse(j.input,j.config))&&r.postMessage({workerId:d.WORKER_ID,results:j,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(x.prototype=Object.create(u.prototype)).constructor=x,d})})(xA);var oW=xA.exports;const G1=Dl(oW),lW=()=>{const e=Rt(),{domainId:t,area:n}=ti(),{domains:r}=Dn(),i=p.useMemo(()=>r==null?void 0:r.find(F=>F.id===t),[r,t]),a=(i==null?void 0:i.name)||"",{toast:o}=rt(),{examples:l,saveExamples:c}=LT(t||"",a,n||""),[d,u]=p.useState([]),[h,f]=p.useState(""),[m,x]=p.useState(null),[g,b]=p.useState("manual"),[v,y]=p.useState([{snippet:""}]),[w,k]=p.useState(!0),[S,C]=p.useState([]),N=p.useMemo(()=>d.find(F=>F.id===m)||null,[d,m]);p.useEffect(()=>{const F=`Add Examples — ${(i==null?void 0:i.name)||"Domain"}`;document.title=F;const z=`Add learning goal examples for ${(i==null?void 0:i.name)||"your domain"} in ${n||""}.`;let q=document.querySelector('meta[name="description"]');q||(q=document.createElement("meta"),q.setAttribute("name","description"),document.head.appendChild(q)),q.setAttribute("content",z)},[i==null?void 0:i.name,n]),p.useEffect(()=>{(async()=>{if(!t)return;const{data:z,error:q}=await L.from("concepts").select("id, name").eq("domain_id",t).eq("status","approved").order("name",{ascending:!0});q||u((z==null?void 0:z.map(D=>({id:D.id,name:D.name})))||[])})()},[t]);const j=p.useMemo(()=>{const F=h.trim().toLowerCase();return F?d.filter(z=>z.name.toLowerCase().includes(F)):d},[d,h]),_=()=>y(F=>[...F,{snippet:""}]),E=F=>y(z=>z.filter((q,D)=>D!==F)),A=()=>{if(!N){o({title:"Select a concept first"});return}const F=[{concept_id:N.id,concept_name:N.name,goal_description:"",bloom_level:"",goal_type:"",sequence_order:"",approved:"yes"}],z=G1.unparse(F,{header:!0}),q=new Blob([z],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(q),I=document.createElement("a");I.href=D,I.download=`${a||"domain"}_${n||"area"}_learning_goals_template.csv`,I.click(),URL.revokeObjectURL(D)},R=F=>{G1.parse(F,{header:!0,skipEmptyLines:!0,complete:z=>{const q=z.data||[],D=[];for(const I of q){const T=(I.goal_description||"").toString().trim(),H=(I.snippet||"").toString().trim(),O=T||H,P=(I.concept_name||"").toString().trim(),Z=(I.concept_id||"").toString().trim(),ee=(I.difficulty||"").toString().trim().toLowerCase(),W=(I.notes||"").toString(),X=(I.approved??"yes").toString().trim().toLowerCase(),ne=["yes","true","1","y"].includes(X),se=(I.bloom_level||"").toString().trim()||null,fe=(I.goal_type||"").toString().trim()||null,de=(I.sequence_order??"").toString().trim(),ge=de===""?null:Number(de);!O||!P&&!Z||D.push({id:crypto.randomUUID(),snippet:O,concepts:[P||""],notes:W||void 0,difficulty:ee==="basic"||ee==="intermediate"||ee==="advanced"?ee:void 0,created_at:new Date().toISOString(),concept_id:Z||void 0,approved:ne,bloom_level:se,goal_type:fe,sequence_order:ge})}C(D),o({title:"CSV parsed",description:`${D.length} examples ready`})},error:()=>{o({title:"CSV error",description:"Failed to parse CSV",variant:"destructive"})}})},$=p.useCallback(async()=>{if(!N){o({title:"Please select a concept",variant:"destructive"});return}const F=[N.name],z=v.filter(D=>D.snippet.trim().length>0).map(D=>({id:crypto.randomUUID(),snippet:D.snippet.trim(),concepts:F,created_at:new Date().toISOString()}));if(z.length===0){o({title:"Nothing to save",description:"Add at least one valid example"});return}if(await c([...l||[],...z])){try{const D=z.map(H=>({concept_id:N.id,goal_description:H.snippet,approved:w})),{data:I,error:T}=await L.functions.invoke("enrich-and-save-learning-goals",{body:{goals:D}});if(T)throw T;o({title:"Learning goals updated",description:`${(I==null?void 0:I.inserted)??0} approved, ${(I==null?void 0:I.skipped_duplicates)??0} skipped as duplicates`})}catch(D){o({title:"Learning goals insert failed",description:(D==null?void 0:D.message)||"See logs",variant:"destructive"})}e(`/admin/domain/${t}/ai-guidance/${n}`)}},[N,v,l,c,e,t,n,o,w]),B=p.useCallback(async()=>{if(S.length===0){o({title:"No examples parsed",variant:"destructive"});return}if(await c([...l||[],...S])){try{const z=S.map(q=>{var I;const D=q.concept_id||((I=d.find(T=>{var H;return T.name===(((H=q.concepts)==null?void 0:H[0])||"")}))==null?void 0:I.id);return D?{concept_id:D,goal_description:q.snippet,bloom_level:q.bloom_level??null,goal_type:q.goal_type??null,sequence_order:q.sequence_order??null,approved:q.approved??!0}:null}).filter(Boolean);if(z.length>0){const{data:q,error:D}=await L.functions.invoke("enrich-and-save-learning-goals",{body:{goals:z}});if(D)throw D;o({title:"Learning goals updated",description:`${(q==null?void 0:q.inserted)??0} approved, ${(q==null?void 0:q.skipped_duplicates)??0} skipped as duplicates`})}}catch(z){o({title:"Learning goals insert failed",description:(z==null?void 0:z.message)||"See logs",variant:"destructive"})}e(`/admin/domain/${t}/ai-guidance/${n}`)}},[S,l,c,e,t,n,o,d]);return s.jsxs("div",{className:"p-6",children:[s.jsx(Cs,{}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs(U,{variant:"ghost",onClick:()=>e(`/admin/domain/${t}/ai-guidance/${n}`),children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Back to Examples"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Add Examples"}),s.jsxs("p",{className:"text-muted-foreground",children:[a," • ",n]})]}),s.jsx("div",{})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_320px]",children:[s.jsxs("div",{children:[s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Select concepts"})}),s.jsx(re,{children:s.jsx(Te,{placeholder:"Search concepts...",value:h,onChange:F=>f(F.target.value)})})]}),s.jsx(mr,{className:"my-6"}),s.jsxs(ri,{value:g,onValueChange:F=>b(F),children:[s.jsxs(Ps,{children:[s.jsx(et,{value:"manual",children:"Add manually"}),s.jsx(et,{value:"bulk",children:"Bulk upload"})]}),s.jsx(tt,{value:"manual",className:"mt-6",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Examples"})}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-4",children:[v.map((F,z)=>s.jsxs("div",{className:"border rounded p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Example #",z+1]}),v.length>1&&s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>E(z),children:s.jsx(Ns,{className:"h-4 w-4"})})]}),s.jsx(Rr,{placeholder:"Enter example snippet (text or code)",value:F.snippet,onChange:q=>y(D=>D.map((I,T)=>T===z?{...I,snippet:q.target.value}:I))})]},z)),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs(U,{variant:"outline",onClick:_,children:[s.jsx(er,{className:"h-4 w-4 mr-2"})," Add another"]}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[s.jsx(Ss,{id:"manual-approved",checked:w,onCheckedChange:F=>k(!!F)}),s.jsx(xe,{htmlFor:"manual-approved",className:"text-sm",children:"Mark as approved in learning goals"})]}),s.jsxs(U,{onClick:$,children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"})," Save examples"]})]})]})})]})}),s.jsx(tt,{value:"bulk",className:"mt-6",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Bulk upload via CSV"})}),s.jsx(re,{children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(U,{variant:"outline",onClick:A,children:[s.jsx(XS,{className:"h-4 w-4 mr-2"})," Download template"]}),s.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:F=>F.target.files&&R(F.target.files[0])}),s.jsxs("span",{className:"inline-flex items-center gap-2 border rounded px-3 py-2",children:[s.jsx(En,{className:"h-4 w-4"})," Upload filled CSV"]})]})]}),S.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[S.length," examples parsed"]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(U,{onClick:B,disabled:S.length===0,children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"})," Save examples"]})})]})})]})})]})]}),s.jsx("aside",{className:"lg:sticky top-20 h-fit",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Concepts"})}),s.jsx(re,{children:s.jsxs("div",{className:"max-h-[420px] overflow-auto",children:[s.jsx(a0,{value:m??"",onValueChange:F=>x(F),children:j.map(F=>s.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[s.jsx(o0,{value:F.id,id:`concept-${F.id}`}),s.jsx("label",{htmlFor:`concept-${F.id}`,className:"text-sm leading-none cursor-pointer",children:F.name})]},F.id))}),j.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No concepts found"}),N&&s.jsx("div",{className:"mt-3",children:s.jsx(ve,{variant:"secondary",children:N.name})})]})})]})})]})]})},cW=()=>s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(f0,{children:s.jsxs(m0,{children:[s.jsx(lp,{children:s.jsx(g0,{href:"/admin/dashboard",children:"Dashboard"})}),s.jsx(v0,{}),s.jsx(lp,{children:s.jsx(x0,{children:"Clients"})})]})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Clients"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage client organizations and their users"})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-primary/10",children:s.jsx(Ji,{className:"h-8 w-8 text-primary"})})}),s.jsx(ue,{className:"text-2xl",children:"Client Management"}),s.jsx(Me,{className:"text-lg",children:"This feature is coming soon"})]}),s.jsxs(re,{className:"text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-6",children:"The client management system will allow you to:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[s.jsx(Pn,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),s.jsx("div",{className:"font-medium",children:"Manage Organizations"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Create and configure client organizations"})]}),s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[s.jsx(zl,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),s.jsx("div",{className:"font-medium",children:"User Access"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Control user permissions and access levels"})]}),s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[s.jsx(Ji,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),s.jsx("div",{className:"font-medium",children:"Domain Assignment"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Assign learning domains to client organizations"})]})]})]})]})]});var Y0="Collapsible",[dW,QY]=wn(Y0),[uW,X0]=dW(Y0),vA=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c=!1,d]=xr({prop:r,defaultProp:i,onChange:o});return s.jsx(uW,{scope:n,disabled:a,contentId:pr(),open:c,onOpenToggle:p.useCallback(()=>d(u=>!u),[d]),children:s.jsx(je.div,{"data-state":Z0(c),"data-disabled":a?"":void 0,...l,ref:t})})});vA.displayName=Y0;var yA="CollapsibleTrigger",wA=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=X0(yA,n);return s.jsx(je.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Z0(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:ae(e.onClick,i.onOpenToggle)})});wA.displayName=yA;var J0="CollapsibleContent",bA=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=X0(J0,e.__scopeCollapsible);return s.jsx(Vt,{present:n||i.open,children:({present:a})=>s.jsx(hW,{...r,ref:t,present:a})})});bA.displayName=J0;var hW=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=e,o=X0(J0,n),[l,c]=p.useState(r),d=p.useRef(null),u=$e(t,d),h=p.useRef(0),f=h.current,m=p.useRef(0),x=m.current,g=o.open||l,b=p.useRef(g),v=p.useRef();return p.useEffect(()=>{const y=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(y)},[]),qt(()=>{const y=d.current;if(y){v.current=v.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const w=y.getBoundingClientRect();h.current=w.height,m.current=w.width,b.current||(y.style.transitionDuration=v.current.transitionDuration,y.style.animationName=v.current.animationName),c(r)}},[o.open,r]),s.jsx(je.div,{"data-state":Z0(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:g&&i})});function Z0(e){return e?"open":"closed"}var pW=vA;const fW=pW,mW=wA,gW=bA,xW=({files:e,loading:t,onDelete:n,isDeleting:r})=>{const i=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=o=>o.startsWith("image/")?"🖼️":o.startsWith("video/")?"🎥":o.startsWith("audio/")?"🎵":o.includes("pdf")?"📄":o.includes("word")||o.includes("document")?"📝":o.includes("sheet")||o.includes("excel")?"📊":o.includes("presentation")||o.includes("powerpoint")?"📈":"📎";return t?s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Uploaded Files"}),s.jsx(Me,{children:"Loading files..."})]}),s.jsx(re,{children:s.jsx("div",{className:"space-y-3",children:[...Array(3)].map((o,l)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(it,{className:"h-4 w-4"}),s.jsx(it,{className:"h-4 flex-1"}),s.jsx(it,{className:"h-4 w-20"}),s.jsx(it,{className:"h-8 w-8"})]},l))})})]}):!e||e.length===0?s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Uploaded Files"}),s.jsx(Me,{children:"No files uploaded yet"})]}),s.jsx(re,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(NO,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Upload your first file to get started"})]})})]}):s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Uploaded Files"}),s.jsxs(Me,{children:[e.length," file",e.length!==1?"s":""," uploaded"]})]}),s.jsx(re,{children:s.jsx("div",{className:"rounded-md border",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{children:"File"}),s.jsx(Re,{children:"Size"}),s.jsx(Re,{children:"Type"}),s.jsx(Re,{children:"Uploaded"}),s.jsx(Re,{children:"By"}),s.jsx(Re,{className:"w-[50px]"})]})}),s.jsx(ai,{children:e.map(o=>{var l,c;return s.jsxs(wt,{children:[s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:a(o.mime_type||"")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-sm",children:o.file_name}),s.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:o.storage_path})]})]})}),s.jsx(Ee,{className:"text-sm",children:op(o.file_size)}),s.jsx(Ee,{children:s.jsx(ve,{variant:"outline",className:"text-xs",children:((c=(l=o.mime_type)==null?void 0:l.split("/")[1])==null?void 0:c.toUpperCase())||"Unknown"})}),s.jsx(Ee,{className:"text-sm",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Fl,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:i(o.uploaded_at)})]})}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Fh,{className:"h-3 w-3 text-muted-foreground"}),s.jsx(ve,{variant:o.uploaded_by_type==="admin"?"default":"secondary",children:o.uploaded_by_type})]})}),s.jsx(Ee,{children:s.jsxs(yf,{children:[s.jsx(MP,{asChild:!0,children:s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",disabled:r,children:s.jsx(Ns,{className:"h-4 w-4"})})}),s.jsxs(Gd,{children:[s.jsxs(Wd,{children:[s.jsx(Qd,{children:"Delete File"}),s.jsxs(Yd,{children:['Are you sure you want to delete "',o.file_name,'"? This action cannot be undone and will only remove the database record. The file will remain in Google Cloud Storage.']})]}),s.jsxs(Kd,{children:[s.jsx(Jd,{children:"Cancel"}),s.jsx(Xd,{onClick:()=>n(o.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})})]},o.id)})})]})})})]})},vW=()=>{var S;const[e,t]=p.useState(""),[n,r]=p.useState(null),[i,a]=p.useState(!1),[o]=hk(),{domains:l,loading:c}=Dn(),{data:d=[],isLoading:u}=gP(e),{uploadFiles:h,isUploading:f,uploadProgress:m,clearProgress:x}=vf(),g=TU();p.useEffect(()=>{const C=o.get("domain");C&&l&&l.length>0&&!e&&t(C)},[o,l,e]);const b=l==null?void 0:l.find(C=>C.id===e),v=C=>{!e||!b||!n||h({files:C,domainId:e,domainName:b.name,contentType:n})},y=C=>{g.mutate(C)},w=d.length;d.reduce((C,N)=>C+N.file_size,0);const k=[{type:"concept",title:"Learning Concepts",description:"Upload documents related to learning concepts and knowledge areas",icon:Pt,color:"bg-blue-50 hover:bg-blue-100 border-blue-200",iconColor:"text-blue-600"},{type:"learning_goal",title:"Learning Goals",description:"Upload materials defining learning objectives and outcomes",icon:vn,color:"bg-green-50 hover:bg-green-100 border-green-200",iconColor:"text-green-600"},{type:"exercise",title:"Exercises",description:"Upload practice exercises and assessment materials",icon:Zi,color:"bg-purple-50 hover:bg-purple-100 border-purple-200",iconColor:"text-purple-600"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Cs,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),s.jsxs("p",{className:"text-muted-foreground mt-2",children:["Choose the type of content you want to upload for ",(b==null?void 0:b.name)||"the selected learning domain","."]})]}),n?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ve,{variant:"outline",className:"px-3 py-1",children:(S=k.find(C=>C.type===n))==null?void 0:S.title}),s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>r(null),children:"Change Type"})]})}),s.jsx(te,{children:s.jsx(re,{className:"pt-6",children:s.jsx(y0,{onFilesSelected:v,uploadProgress:m,isUploading:f,disabled:!e})})})]}):s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:k.map(C=>{const N=C.icon;return s.jsx(te,{className:`cursor-pointer transition-all duration-200 ${C.color}`,onClick:()=>r(C.type),children:s.jsxs(le,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-white",children:s.jsx(N,{className:`h-8 w-8 ${C.iconColor}`})}),s.jsx(ue,{className:"text-lg",children:C.title}),s.jsx(Me,{className:"text-sm",children:C.description})]})},C.type)})}),e&&s.jsxs(s.Fragment,{children:[s.jsx(mr,{}),s.jsxs(fW,{open:i,onOpenChange:a,children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Uploaded Files (",w,")"]}),s.jsx(mW,{asChild:!0,children:s.jsxs(U,{variant:"ghost",size:"sm",className:"p-2",children:[i?s.jsx(Id,{className:"h-4 w-4"}):s.jsx(no,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Toggle uploaded files"})]})})]}),s.jsx(gW,{className:"space-y-2",children:s.jsx(xW,{files:d,loading:u,onDelete:y,isDeleting:g.isPending})})]})]})]})},yW=()=>mt({queryKey:["user-accessible-paths"],queryFn:async()=>{var a;const{data:{session:e}}=await L.auth.getSession();if(!(e!=null&&e.user))return[];if(e.user.email==="admin@gemeos.ai"){console.log("🔐 Platform admin detected, granting universal access");const{data:o,error:l}=await L.from("pages").select("path");if(l)throw console.error("Error fetching all pages for admin:",l),l;return(o==null?void 0:o.map(c=>c.path))||[]}const n=(a=e.user.app_metadata)==null?void 0:a.role;if(!n)return[];const{data:r,error:i}=await L.from("page_permissions").select(`
          page:pages!inner(path)
        `).eq("role",n).eq("is_active",!0);if(i)throw i;return(r==null?void 0:r.map(o=>o.page.path))||[]}}),wW=()=>mt({queryKey:["all-page-permissions"],queryFn:async()=>{const{data:e,error:t}=await L.from("pages").select("*").order("path");if(t)throw t;const{data:n,error:r}=await L.from("page_permissions").select("*");if(r)throw r;return(e==null?void 0:e.map(i=>({...i,permissions:(n==null?void 0:n.filter(a=>a.page_id===i.id))||[]})))||[]}}),bW=()=>{const[e,t]=p.useState(!1);return{updatePermission:async(r,i,a)=>{t(!0);try{const{error:o}=await L.from("page_permissions").upsert({page_id:r,role:i,is_active:a,updated_at:new Date().toISOString()},{onConflict:"page_id,role"});if(o)throw o;return!0}catch(o){throw console.error("Error updating page permission:",o),o}finally{t(!1)}},isLoading:e}},W1=["admin","teacher","student"];function K1(){const{data:e,isLoading:t}=wW(),{updatePermission:n,isLoading:r}=bW(),{toast:i}=rt(),a=In(),o=async(c,d,u)=>{try{await n(c,d,u),a.invalidateQueries({queryKey:["all-page-permissions"]}),i({title:"Permission Updated",description:`Successfully ${u?"enabled":"disabled"} ${d} access.`})}catch{i({title:"Error",description:"Failed to update permission. Please try again.",variant:"destructive"})}},l=(c,d)=>{const u=c.find(h=>h.role===d);return(u==null?void 0:u.is_active)||!1};return t?s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(it,{className:"h-8 w-64 mb-2"}),s.jsx(it,{className:"h-4 w-96"})]}),Array.from({length:3}).map((c,d)=>s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(it,{className:"h-6 w-48"}),s.jsx(it,{className:"h-4 w-32"})]}),s.jsx(re,{children:s.jsx("div",{className:"flex space-x-8",children:W1.map(u=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{className:"h-4 w-4"}),s.jsx(it,{className:"h-4 w-16"})]},u))})})]},d))]}):s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Page Permissions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage which user roles can access different pages in the application."})]}),s.jsx("div",{className:"space-y-4",children:e==null?void 0:e.map(c=>s.jsxs(te,{children:[s.jsx(le,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx(ue,{className:"text-lg",children:c.description}),s.jsx(Me,{children:s.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:c.path})})]})})}),s.jsx(re,{children:s.jsx("div",{className:"flex space-x-8",children:W1.map(d=>{const u=l(c.permissions,d);return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ss,{id:`${c.id}-${d}`,checked:u,disabled:r,onCheckedChange:h=>o(c.id,d,!!h)}),s.jsx("label",{htmlFor:`${c.id}-${d}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.jsxs(ve,{variant:u?"default":"secondary",className:"capitalize",children:[u?s.jsx(Js,{className:"h-3 w-3 mr-1"}):s.jsx(Bt,{className:"h-3 w-3 mr-1"}),d]})})]},d)})})})]},c.id))})]})}var ew="Switch",[jW,YY]=wn(ew),[NW,_W]=jW(ew),jA=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=p.useState(null),x=$e(t,w=>m(w)),g=p.useRef(!1),b=f?u||!!f.closest("form"):!0,[v=!1,y]=xr({prop:i,defaultProp:a,onChange:d});return s.jsxs(NW,{scope:n,checked:v,disabled:l,children:[s.jsx(je.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":SA(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:ae(e.onClick,w=>{y(k=>!k),b&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),b&&s.jsx(SW,{control:f,bubbles:!g.current,name:r,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});jA.displayName=ew;var NA="SwitchThumb",_A=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=_W(NA,n);return s.jsx(je.span,{"data-state":SA(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});_A.displayName=NA;var SW=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,a=p.useRef(null),o=hf(n),l=Up(t);return p.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(f)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function SA(e){return e?"checked":"unchecked"}var CA=jA,CW=_A;const tl=p.forwardRef(({className:e,...t},n)=>s.jsx(CA,{className:Q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(CW,{className:Q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));tl.displayName=CA.displayName;const kW=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!1),[i,a]=p.useState(null),o=async()=>{r(!0),a(null);try{const{data:d,error:u}=await L.from("domain_feedback_config").select("*").order("domain_id",{ascending:!0}).order("aspect",{ascending:!0});if(u)throw u;t(d||[])}catch(d){console.error("Error fetching feedback configs:",d),a(d instanceof Error?d.message:"Failed to fetch feedback configs")}finally{r(!1)}},l=async(d,u)=>{try{const{error:h}=await L.from("domain_feedback_config").update({is_enabled:u}).eq("id",d);if(h)throw h;t(f=>f.map(m=>m.id===d?{...m,is_enabled:u}:m))}catch(h){console.error("Error updating feedback config:",h),a(h instanceof Error?h.message:"Failed to update feedback config")}},c=async(d,u)=>{var x,g,b,v;const{data:h}=await L.from("domain_feedback_config").select("is_enabled").eq("domain_id",d).eq("aspect",u).maybeSingle();if(!(h!=null&&h.is_enabled))return{approved_items:[],rejected_items:[]};let f=[],m=[];try{if(u==="concepts"){const[y,w]=await Promise.all([L.from("concepts").select("name").eq("domain_id",d).eq("status","approved"),L.from("concepts").select("name").eq("domain_id",d).eq("status","rejected")]);f=((x=y.data)==null?void 0:x.map(k=>k.name))||[],m=((g=w.data)==null?void 0:g.map(k=>k.name))||[]}else if(u==="learning_goals"){const{data:y,error:w}=await L.from("concepts").select("id").eq("domain_id",d);if(w)return console.error("Error fetching concepts for learning goals feedback:",w),{approved_items:[],rejected_items:[]};const k=(y||[]).map(N=>N.id);if(k.length===0)return{approved_items:[],rejected_items:[]};const[S,C]=await Promise.all([L.from("learning_goals").select("goal_description, concept_id, status").in("concept_id",k).eq("status","approved"),L.from("learning_goals").select("goal_description, concept_id, status").in("concept_id",k).eq("status","rejected")]);f=((b=S.data)==null?void 0:b.map(N=>N.goal_description))||[],m=((v=C.data)==null?void 0:v.map(N=>N.goal_description))||[]}}catch(y){console.error("Error fetching feedback data:",y)}return{approved_items:f,rejected_items:m}};return p.useEffect(()=>{o()},[]),{configs:e,loading:n,error:i,refetch:o,updateConfig:l,getFeedbackData:c}},EW=()=>{const{configs:e,loading:t,updateConfig:n}=kW(),{domains:r,loading:i}=Dn(),[a,o]=p.useState(null),l=async(f,m)=>{o(f);try{await n(f,!m),Vg({title:"Settings updated",description:`Feedback loop ${m?"disabled":"enabled"} successfully.`})}catch{Vg({title:"Error",description:"Failed to update feedback settings.",variant:"destructive"})}finally{o(null)}},c=f=>{switch(f){case"concepts":return s.jsx(Xi,{className:"h-4 w-4"});case"learning_goals":return s.jsx(vn,{className:"h-4 w-4"});case"exercises":return s.jsx(dd,{className:"h-4 w-4"});case"strategies":return s.jsx(kn,{className:"h-4 w-4"});case"gamification":return s.jsx(ZS,{className:"h-4 w-4"});case"tasks":return s.jsx(dd,{className:"h-4 w-4"});case"motivation":return s.jsx(_y,{className:"h-4 w-4"});default:return s.jsx(kn,{className:"h-4 w-4"})}},d=f=>{switch(f){case"concepts":return"Concepts";case"learning_goals":return"Learning Goals";case"exercises":return"Exercises";case"strategies":return"Learning Strategies";case"gamification":return"Gamification";case"tasks":return"Tasks";case"motivation":return"Motivation";default:return f.charAt(0).toUpperCase()+f.slice(1)}},u=f=>{switch(f){case"concepts":return"AI will learn from approved/rejected concepts to improve future suggestions";case"learning_goals":return"AI will learn from approved/rejected learning goals to improve future suggestions";case"exercises":return"AI will learn from approved/rejected exercises to improve future suggestions";case"strategies":return"AI will learn from approved/rejected learning strategies to improve future suggestions";case"gamification":return"AI will learn from approved/rejected gamification elements to improve future suggestions";case"tasks":return"AI will learn from approved/rejected tasks to improve future suggestions";case"motivation":return"AI will learn from approved/rejected motivation techniques to improve future suggestions";default:return`AI feedback learning for ${f}`}};if(t||i)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(bs,{className:"h-8 w-8 animate-spin"})});const h=e.reduce((f,m)=>(f[m.domain_id]||(f[m.domain_id]=[]),f[m.domain_id].push(m),f),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Feedback Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Configure AI training feedback loops for each domain and learning aspect."})]}),s.jsx("div",{className:"grid gap-6",children:r.map(f=>{const m=h[f.id]||[];return s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center gap-2",children:[f.icon_name&&s.jsx("span",{className:"text-xl",children:f.icon_name}),f.name]}),s.jsx(Me,{children:bi(f.description)})]}),s.jsx(re,{children:s.jsx("div",{className:"space-y-4",children:m.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No feedback configurations found for this domain."}):m.map(x=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[c(x.aspect),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:d(x.aspect)}),s.jsx(ve,{variant:x.is_enabled?"default":"secondary",children:x.is_enabled?"Enabled":"Disabled"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:u(x.aspect)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[a===x.id&&s.jsx(bs,{className:"h-4 w-4 animate-spin"}),s.jsx(tl,{checked:x.is_enabled,onCheckedChange:()=>l(x.id,x.is_enabled),disabled:a===x.id})]})]},x.id))})})]},f.id)})})]})};function PW(){const e=Rt();return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs(te,{className:"w-full max-w-md",children:[s.jsxs(le,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:s.jsx(TO,{className:"h-6 w-6 text-destructive"})}),s.jsx(ue,{className:"text-2xl",children:"Access Denied"}),s.jsx(Me,{children:"You don't have permission to access this page."})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please contact your administrator if you believe this is an error."}),s.jsxs("div",{className:"flex justify-center space-x-2",children:[s.jsx(U,{variant:"outline",onClick:()=>e(-1),children:"Go Back"}),s.jsx(U,{onClick:()=>e("/teacher/dashboard"),children:"Dashboard"})]})]})]})})}const TW=()=>{const e=Ir();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Ym=768;function AW(){const[e,t]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ym-1}px)`),r=()=>{t(window.innerWidth<Ym)};return n.addEventListener("change",r),t(window.innerWidth<Ym),()=>n.removeEventListener("change",r)},[]),!!e}const RW=Zy,IW=e0,kA=p.forwardRef(({className:e,...t},n)=>s.jsx(Ud,{className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));kA.displayName=Ud.displayName;const DW=to("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),EA=p.forwardRef(({side:e="right",className:t,children:n,...r},i)=>s.jsxs(IW,{children:[s.jsx(kA,{}),s.jsxs(Bd,{ref:i,className:Q(DW({side:e}),t),...r,children:[n,s.jsxs(uf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Bt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));EA.displayName=Bd.displayName;const OW=p.forwardRef(({className:e,...t},n)=>s.jsx(qd,{ref:n,className:Q("text-lg font-semibold text-foreground",e),...t}));OW.displayName=qd.displayName;const MW=p.forwardRef(({className:e,...t},n)=>s.jsx(Vd,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));MW.displayName=Vd.displayName;const LW="sidebar:state",$W=60*60*24*7,FW="16rem",zW="18rem",UW="3rem",BW="b",PA=p.createContext(null);function iu(){const e=p.useContext(PA);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const TA=p.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:i,children:a,...o},l)=>{const c=AW(),[d,u]=p.useState(!1),[h,f]=p.useState(e),m=t??h,x=p.useCallback(y=>{const w=typeof y=="function"?y(m):y;n?n(w):f(w),document.cookie=`${LW}=${w}; path=/; max-age=${$W}`},[n,m]),g=p.useCallback(()=>c?u(y=>!y):x(y=>!y),[c,x,u]);p.useEffect(()=>{const y=w=>{w.key===BW&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),g())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[g]);const b=m?"expanded":"collapsed",v=p.useMemo(()=>({state:b,open:m,setOpen:x,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:g}),[b,m,x,c,d,u,g]);return s.jsx(PA.Provider,{value:v,children:s.jsx(zC,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":FW,"--sidebar-width-icon":UW,...i},className:Q("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});TA.displayName="SidebarProvider";const AA=p.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:i,...a},o)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u}=iu();return n==="none"?s.jsx("div",{className:Q("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:i}):l?s.jsx(RW,{open:d,onOpenChange:u,...a,children:s.jsx(EA,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":zW},side:e,children:s.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):s.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[s.jsx("div",{className:Q("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),s.jsx("div",{className:Q("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:s.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});AA.displayName="Sidebar";const RA=p.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:i}=iu();return s.jsxs(U,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Q("h-7 w-7",e),onClick:a=>{t==null||t(a),i()},...n,children:[s.jsx(PO,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});RA.displayName="SidebarTrigger";const qW=p.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=iu();return s.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:Q("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});qW.displayName="SidebarRail";const VW=p.forwardRef(({className:e,...t},n)=>s.jsx("main",{ref:n,className:Q("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));VW.displayName="SidebarInset";const HW=p.forwardRef(({className:e,...t},n)=>s.jsx(Te,{ref:n,"data-sidebar":"input",className:Q("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));HW.displayName="SidebarInput";const GW=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"header",className:Q("flex flex-col gap-2 p-2",e),...t}));GW.displayName="SidebarHeader";const WW=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"footer",className:Q("flex flex-col gap-2 p-2",e),...t}));WW.displayName="SidebarFooter";const KW=p.forwardRef(({className:e,...t},n)=>s.jsx(mr,{ref:n,"data-sidebar":"separator",className:Q("mx-2 w-auto bg-sidebar-border",e),...t}));KW.displayName="SidebarSeparator";const IA=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"content",className:Q("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));IA.displayName="SidebarContent";const zr=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group",className:Q("relative flex w-full min-w-0 flex-col p-2",e),...t}));zr.displayName="SidebarGroup";const Ur=p.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const i=t?Cn:"div";return s.jsx(i,{ref:r,"data-sidebar":"group-label",className:Q("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Ur.displayName="SidebarGroupLabel";const QW=p.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const i=t?Cn:"button";return s.jsx(i,{ref:r,"data-sidebar":"group-action",className:Q("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});QW.displayName="SidebarGroupAction";const Br=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group-content",className:Q("w-full text-sm",e),...t}));Br.displayName="SidebarGroupContent";const qr=p.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu",className:Q("flex w-full min-w-0 flex-col gap-1",e),...t}));qr.displayName="SidebarMenu";const wr=p.forwardRef(({className:e,...t},n)=>s.jsx("li",{ref:n,"data-sidebar":"menu-item",className:Q("group/menu-item relative",e),...t}));wr.displayName="SidebarMenuItem";const YW=to("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),br=p.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:i,className:a,...o},l)=>{const c=e?Cn:"button",{isMobile:d,state:u}=iu(),h=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:Q(YW({variant:n,size:r}),a),...o});return i?(typeof i=="string"&&(i={children:i}),s.jsxs(v3,{children:[s.jsx(y3,{asChild:!0,children:h}),s.jsx(UC,{side:"right",align:"center",hidden:u!=="collapsed"||d,...i})]})):h});br.displayName="SidebarMenuButton";const XW=p.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},i)=>{const a=t?Cn:"button";return s.jsx(a,{ref:i,"data-sidebar":"menu-action",className:Q("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});XW.displayName="SidebarMenuAction";const JW=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:Q("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));JW.displayName="SidebarMenuBadge";const ZW=p.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const i=p.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:Q("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&s.jsx(it,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(it,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});ZW.displayName="SidebarMenuSkeleton";const DA=p.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:Q("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));DA.displayName="SidebarMenuSub";const OA=p.forwardRef(({...e},t)=>s.jsx("li",{ref:t,...e}));OA.displayName="SidebarMenuSubItem";const MA=p.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...i},a)=>{const o=e?Cn:"a";return s.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:Q("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})});MA.displayName="SidebarMenuSubButton";const eK=[{title:"Dashboard",url:"/teacher/dashboard",icon:Fl},{title:"Domain Selection",url:"/teacher/domain-selection",icon:Pt},{title:"Curriculum Setup",url:"/teacher/settings/curriculum-setup",icon:eC}],tK=[{title:"Overview",url:"/teacher/administration",icon:kn},{title:"Domain Management",url:"/teacher/administration/domains",icon:Pt},{title:"Learning Goals",url:"/teacher/administration/learning-goals",icon:vn}],nK=[{title:"Dashboard",url:"/admin/dashboard",icon:Fl},{title:"Learning Domains",url:"/admin/learning-domains",icon:Pt},{title:"Clients",url:"/admin/clients",icon:Ji},{title:"AI Training",url:"/admin/ai-training",icon:Xi},{title:"Design System",url:"/admin/design-system",icon:Cy}],rK=[{title:"Admin Dashboard",url:"/admin/dashboard",icon:Cy}],sK=[{title:"Domain Concepts",url:"/admin/domain/472a6e02-8733-431a-bb76-5d517767cab7/concepts",icon:Xi},{title:"Domain Administration",url:"/admin/domain/472a6e02-8733-431a-bb76-5d517767cab7",icon:kn}],iK=[{title:"Teachers",url:"/admin/teachers",icon:Pn},{title:"Invitations",url:"/admin/invitations",icon:rC},{title:"Clients",url:"/admin/clients",icon:Ji}],aK=[{title:"Access Management",url:"/admin/access-management",icon:js},{title:"AI Training",url:"/admin/ai-training",icon:Xi},{title:"Settings",url:"/admin/settings",icon:kn},{title:"Feedback Settings",url:"/admin/settings/feedback",icon:Xi},{title:"File Upload",url:"/admin/upload",icon:En}],oK=[{title:"Login",url:"/login",icon:Pn},{title:"Register",url:"/register",icon:rC},{title:"Forgot Password",url:"/forgot-password",icon:js}],lK=[{title:"Domain Card Demo",url:"/admin/domain-admin-demo",icon:Cy},{title:"Welcome Page",url:"/welcome",icon:tC},{title:"Auth Page",url:"/auth",icon:Pn},{title:"Unauthorized",url:"/unauthorized",icon:js}],cK=[{title:"Welcome Page",url:"/welcome",icon:tC},{title:"Auth Page",url:"/auth",icon:Pn},{title:"Unauthorized",url:"/unauthorized",icon:js}];function dK(){iu();const t=Ir().pathname,[n,r]=p.useState(t.startsWith("/teacher/administration"));p.useState(!1);const{data:i=[]}=yW(),{isPlatformAdmin:a}=Dr(),o=a,l=x=>t===x,c=x=>o?!0:i.includes(x),d=x=>l(x)?"bg-accent text-accent-foreground font-medium":"hover:bg-accent/50 hover:text-accent-foreground",u=o?[]:eK.filter(x=>c(x.url)),h=o?[]:tK.filter(x=>c(x.url));o&&nK.filter(x=>c(x.url));const f=x=>{if(o)return!0;if(x.includes(":")&&!x.includes("472a6e02-8733-431a-bb76-5d517767cab7"))return!1;const g=["/welcome","/unauthorized","/auth","/login","/register","/forgot-password"];return c(x)||g.includes(x)},m=x=>{if(o)return!0;const g=["/welcome","/unauthorized","/auth"];return c(x)||g.includes(x)};return s.jsx(AA,{collapsible:"icon",children:s.jsxs(IA,{children:[o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Dashboard"}),s.jsx(Br,{children:s.jsx(qr,{children:rK.map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Content Management"}),s.jsx(Br,{children:s.jsx(qr,{children:sK.filter(x=>f(x.url)).map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"User Management"}),s.jsx(Br,{children:s.jsx(qr,{children:iK.filter(x=>f(x.url)).map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"System"}),s.jsx(Br,{children:s.jsx(qr,{children:aK.filter(x=>f(x.url)).map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),!o&&u.length>0&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Teaching Tools"}),s.jsx(Br,{children:s.jsx(qr,{children:u.map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),!o&&h.length>0&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Management"}),s.jsx(Br,{children:s.jsx(qr,{children:s.jsxs(wr,{children:[s.jsxs(br,{onClick:()=>r(!n),className:"w-full justify-between",tooltip:"Administration",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsx("span",{children:"Administration"})]}),s.jsx(no,{className:`h-4 w-4 transition-transform ${n?"rotate-90":""}`})]}),n&&s.jsx(DA,{children:h.map(x=>s.jsx(OA,{children:s.jsx(MA,{asChild:!0,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})]})})})]}),!o&&(c("/admin/page-permissions")||c("/admin/upload"))&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Admin"}),s.jsx(Br,{children:s.jsxs(qr,{children:[c("/admin/upload")&&s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:"File Upload",children:s.jsxs($r,{to:"/admin/upload",className:d("/admin/upload"),children:[s.jsx(En,{className:"h-4 w-4"}),s.jsx("span",{children:"File Upload"})]})})}),c("/admin/page-permissions")&&s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:"Page Permissions",children:s.jsxs($r,{to:"/admin/page-permissions",className:d("/admin/page-permissions"),children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsx("span",{children:"Page Permissions"})]})})})]})})]}),o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Authentication"}),s.jsx(Br,{children:s.jsx(qr,{children:oK.filter(x=>f(x.url)).map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Development"}),s.jsx(Br,{children:s.jsx(qr,{children:lK.filter(x=>f(x.url)).map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]}),!o&&s.jsxs(zr,{children:[s.jsx(Ur,{children:"Quick Access"}),s.jsx(Br,{children:s.jsx(qr,{children:cK.filter(x=>m(x.url)).map(x=>s.jsx(wr,{children:s.jsx(br,{asChild:!0,tooltip:x.title,children:s.jsxs($r,{to:x.url,className:d(x.url),children:[s.jsx(x.icon,{className:"h-4 w-4"}),s.jsx("span",{children:x.title})]})})},x.title))})})]})]})})}var xv=["Enter"," "],uK=["ArrowDown","PageUp","Home"],LA=["ArrowUp","PageDown","End"],hK=[...uK,...LA],pK={ltr:[...xv,"ArrowRight"],rtl:[...xv,"ArrowLeft"]},fK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},au="Menu",[bd,mK,gK]=Rp(au),[oo,$A]=wn(au,[gK,oa,Xl]),Tf=oa(),FA=Xl(),[xK,lo]=oo(au),[vK,ou]=oo(au),zA=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,l=Tf(t),[c,d]=p.useState(null),u=p.useRef(!1),h=St(a),f=Yl(i);return p.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(Bp,{...l,children:s.jsx(xK,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:s.jsx(vK,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};zA.displayName=au;var yK="MenuAnchor",tw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Tf(n);return s.jsx(Od,{...i,...r,ref:t})});tw.displayName=yK;var nw="MenuPortal",[wK,UA]=oo(nw,{forceMount:void 0}),BA=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=lo(nw,t);return s.jsx(wK,{scope:t,forceMount:n,children:s.jsx(Vt,{present:n||a.open,children:s.jsx($l,{asChild:!0,container:i,children:r})})})};BA.displayName=nw;var Pr="MenuContent",[bK,rw]=oo(Pr),qA=p.forwardRef((e,t)=>{const n=UA(Pr,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=lo(Pr,e.__scopeMenu),o=ou(Pr,e.__scopeMenu);return s.jsx(bd.Provider,{scope:e.__scopeMenu,children:s.jsx(Vt,{present:r||a.open,children:s.jsx(bd.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(jK,{...i,ref:t}):s.jsx(NK,{...i,ref:t})})})})}),jK=p.forwardRef((e,t)=>{const n=lo(Pr,e.__scopeMenu),r=p.useRef(null),i=$e(t,r);return p.useEffect(()=>{const a=r.current;if(a)return zd(a)},[]),s.jsx(sw,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ae(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),NK=p.forwardRef((e,t)=>{const n=lo(Pr,e.__scopeMenu);return s.jsx(sw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),sw=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:x,...g}=e,b=lo(Pr,n),v=ou(Pr,n),y=Tf(n),w=FA(n),k=mK(n),[S,C]=p.useState(null),N=p.useRef(null),j=$e(t,N,b.onContentChange),_=p.useRef(0),E=p.useRef(""),A=p.useRef(0),R=p.useRef(null),$=p.useRef("right"),B=p.useRef(0),F=x?Fd:p.Fragment,z=x?{as:Cn,allowPinchZoom:!0}:void 0,q=I=>{var X,ne;const T=E.current+I,H=k().filter(se=>!se.disabled),O=document.activeElement,P=(X=H.find(se=>se.ref.current===O))==null?void 0:X.textValue,Z=H.map(se=>se.textValue),ee=OK(Z,T,P),W=(ne=H.find(se=>se.textValue===ee))==null?void 0:ne.ref.current;(function se(fe){E.current=fe,window.clearTimeout(_.current),fe!==""&&(_.current=window.setTimeout(()=>se(""),1e3))})(T),W&&setTimeout(()=>W.focus())};p.useEffect(()=>()=>window.clearTimeout(_.current),[]),cf();const D=p.useCallback(I=>{var H,O;return $.current===((H=R.current)==null?void 0:H.side)&&LK(I,(O=R.current)==null?void 0:O.area)},[]);return s.jsx(bK,{scope:n,searchRef:E,onItemEnter:p.useCallback(I=>{D(I)&&I.preventDefault()},[D]),onItemLeave:p.useCallback(I=>{var T;D(I)||((T=N.current)==null||T.focus(),C(null))},[D]),onTriggerLeave:p.useCallback(I=>{D(I)&&I.preventDefault()},[D]),pointerGraceTimerRef:A,onPointerGraceIntentChange:p.useCallback(I=>{R.current=I},[]),children:s.jsx(F,{...z,children:s.jsx($d,{asChild:!0,trapped:i,onMountAutoFocus:ae(a,I=>{var T;I.preventDefault(),(T=N.current)==null||T.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(eo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:s.jsx(n0,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:ae(c,I=>{v.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(qp,{role:"menu","aria-orientation":"vertical","data-state":iR(b.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:j,style:{outline:"none",...g.style},onKeyDown:ae(g.onKeyDown,I=>{const H=I.target.closest("[data-radix-menu-content]")===I.currentTarget,O=I.ctrlKey||I.altKey||I.metaKey,P=I.key.length===1;H&&(I.key==="Tab"&&I.preventDefault(),!O&&P&&q(I.key));const Z=N.current;if(I.target!==Z||!hK.includes(I.key))return;I.preventDefault();const W=k().filter(X=>!X.disabled).map(X=>X.ref.current);LA.includes(I.key)&&W.reverse(),IK(W)}),onBlur:ae(e.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(_.current),E.current="")}),onPointerMove:ae(e.onPointerMove,jd(I=>{const T=I.target,H=B.current!==I.clientX;if(I.currentTarget.contains(T)&&H){const O=I.clientX>B.current?"right":"left";$.current=O,B.current=I.clientX}}))})})})})})})});qA.displayName=Pr;var _K="MenuGroup",iw=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(je.div,{role:"group",...r,ref:t})});iw.displayName=_K;var SK="MenuLabel",VA=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(je.div,{...r,ref:t})});VA.displayName=SK;var pp="MenuItem",Q1="menu.itemSelect",Af=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,a=p.useRef(null),o=ou(pp,e.__scopeMenu),l=rw(pp,e.__scopeMenu),c=$e(t,a),d=p.useRef(!1),u=()=>{const h=a.current;if(!n&&h){const f=new CustomEvent(Q1,{bubbles:!0,cancelable:!0});h.addEventListener(Q1,m=>r==null?void 0:r(m),{once:!0}),vy(h,f),f.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(HA,{...i,ref:c,disabled:n,onClick:ae(e.onClick,u),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),d.current=!0},onPointerUp:ae(e.onPointerUp,h=>{var f;d.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:ae(e.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||xv.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Af.displayName=pp;var HA=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=rw(pp,n),l=FA(n),c=p.useRef(null),d=$e(t,c),[u,h]=p.useState(!1),[f,m]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&m((x.textContent??"").trim())},[a.children]),s.jsx(bd.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:s.jsx(r0,{asChild:!0,...l,focusable:!r,children:s.jsx(je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:ae(e.onPointerMove,jd(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ae(e.onPointerLeave,jd(x=>o.onItemLeave(x))),onFocus:ae(e.onFocus,()=>h(!0)),onBlur:ae(e.onBlur,()=>h(!1))})})})}),CK="MenuCheckboxItem",GA=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return s.jsx(XA,{scope:e.__scopeMenu,checked:n,children:s.jsx(Af,{role:"menuitemcheckbox","aria-checked":fp(n)?"mixed":n,...i,ref:t,"data-state":ow(n),onSelect:ae(i.onSelect,()=>r==null?void 0:r(fp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});GA.displayName=CK;var WA="MenuRadioGroup",[kK,EK]=oo(WA,{value:void 0,onValueChange:()=>{}}),KA=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,a=St(r);return s.jsx(kK,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(iw,{...i,ref:t})})});KA.displayName=WA;var QA="MenuRadioItem",YA=p.forwardRef((e,t)=>{const{value:n,...r}=e,i=EK(QA,e.__scopeMenu),a=n===i.value;return s.jsx(XA,{scope:e.__scopeMenu,checked:a,children:s.jsx(Af,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":ow(a),onSelect:ae(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});YA.displayName=QA;var aw="MenuItemIndicator",[XA,PK]=oo(aw,{checked:!1}),JA=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,a=PK(aw,n);return s.jsx(Vt,{present:r||fp(a.checked)||a.checked===!0,children:s.jsx(je.span,{...i,ref:t,"data-state":ow(a.checked)})})});JA.displayName=aw;var TK="MenuSeparator",ZA=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});ZA.displayName=TK;var AK="MenuArrow",eR=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Tf(n);return s.jsx(Vp,{...i,...r,ref:t})});eR.displayName=AK;var RK="MenuSub",[XY,tR]=oo(RK),kc="MenuSubTrigger",nR=p.forwardRef((e,t)=>{const n=lo(kc,e.__scopeMenu),r=ou(kc,e.__scopeMenu),i=tR(kc,e.__scopeMenu),a=rw(kc,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(tw,{asChild:!0,...d,children:s.jsx(HA,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":iR(n.open),...e,ref:Ap(t,i.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ae(e.onPointerMove,jd(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ae(e.onPointerLeave,jd(h=>{var m,x;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(x=n.content)==null?void 0:x.dataset.side,b=g==="right",v=b?-5:5,y=f[b?"left":"right"],w=f[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:y,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:y,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ae(e.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";e.disabled||f&&h.key===" "||pK[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});nR.displayName=kc;var rR="MenuSubContent",sR=p.forwardRef((e,t)=>{const n=UA(Pr,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=lo(Pr,e.__scopeMenu),o=ou(Pr,e.__scopeMenu),l=tR(rR,e.__scopeMenu),c=p.useRef(null),d=$e(t,c);return s.jsx(bd.Provider,{scope:e.__scopeMenu,children:s.jsx(Vt,{present:r||a.open,children:s.jsx(bd.Slot,{scope:e.__scopeMenu,children:s.jsx(sw,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ae(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ae(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ae(e.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),f=fK[o.dir].includes(u.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),u.preventDefault())})})})})})});sR.displayName=rR;function iR(e){return e?"open":"closed"}function fp(e){return e==="indeterminate"}function ow(e){return fp(e)?"indeterminate":e?"checked":"unchecked"}function IK(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function DK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function OK(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=DK(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function MK(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(i=!i)}return i}function LK(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return MK(n,t)}function jd(e){return t=>t.pointerType==="mouse"?e(t):void 0}var $K=zA,FK=tw,zK=BA,UK=qA,BK=iw,qK=VA,VK=Af,HK=GA,GK=KA,WK=YA,KK=JA,QK=ZA,YK=eR,XK=nR,JK=sR,lw="DropdownMenu",[ZK,JY]=wn(lw,[$A]),On=$A(),[eQ,aR]=ZK(lw),oR=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=On(t),d=p.useRef(null),[u=!1,h]=xr({prop:i,defaultProp:a,onChange:o});return s.jsx(eQ,{scope:t,triggerId:pr(),triggerRef:d,contentId:pr(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:l,children:s.jsx($K,{...c,open:u,onOpenChange:h,dir:r,modal:l,children:n})})};oR.displayName=lw;var lR="DropdownMenuTrigger",cR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=aR(lR,n),o=On(n);return s.jsx(FK,{asChild:!0,...o,children:s.jsx(je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Ap(t,a.triggerRef),onPointerDown:ae(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ae(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});cR.displayName=lR;var tQ="DropdownMenuPortal",dR=e=>{const{__scopeDropdownMenu:t,...n}=e,r=On(t);return s.jsx(zK,{...r,...n})};dR.displayName=tQ;var uR="DropdownMenuContent",hR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=aR(uR,n),a=On(n),o=p.useRef(!1);return s.jsx(UK,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:ae(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ae(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!i.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hR.displayName=uR;var nQ="DropdownMenuGroup",rQ=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(BK,{...i,...r,ref:t})});rQ.displayName=nQ;var sQ="DropdownMenuLabel",pR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(qK,{...i,...r,ref:t})});pR.displayName=sQ;var iQ="DropdownMenuItem",fR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(VK,{...i,...r,ref:t})});fR.displayName=iQ;var aQ="DropdownMenuCheckboxItem",mR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(HK,{...i,...r,ref:t})});mR.displayName=aQ;var oQ="DropdownMenuRadioGroup",lQ=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(GK,{...i,...r,ref:t})});lQ.displayName=oQ;var cQ="DropdownMenuRadioItem",gR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(WK,{...i,...r,ref:t})});gR.displayName=cQ;var dQ="DropdownMenuItemIndicator",xR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(KK,{...i,...r,ref:t})});xR.displayName=dQ;var uQ="DropdownMenuSeparator",vR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(QK,{...i,...r,ref:t})});vR.displayName=uQ;var hQ="DropdownMenuArrow",pQ=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(YK,{...i,...r,ref:t})});pQ.displayName=hQ;var fQ="DropdownMenuSubTrigger",yR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(XK,{...i,...r,ref:t})});yR.displayName=fQ;var mQ="DropdownMenuSubContent",wR=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=On(n);return s.jsx(JK,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wR.displayName=mQ;var gQ=oR,xQ=cR,vQ=dR,bR=hR,jR=pR,NR=fR,_R=mR,SR=gR,CR=xR,kR=vR,ER=yR,PR=wR;const Rf=gQ,If=xQ,yQ=p.forwardRef(({className:e,inset:t,children:n,...r},i)=>s.jsxs(ER,{ref:i,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(no,{className:"ml-auto h-4 w-4"})]}));yQ.displayName=ER.displayName;const wQ=p.forwardRef(({className:e,...t},n)=>s.jsx(PR,{ref:n,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));wQ.displayName=PR.displayName;const lu=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(vQ,{children:s.jsx(bR,{ref:r,sideOffset:t,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));lu.displayName=bR.displayName;const lr=p.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(NR,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));lr.displayName=NR.displayName;const bQ=p.forwardRef(({className:e,children:t,checked:n,...r},i)=>s.jsxs(_R,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CR,{children:s.jsx(Js,{className:"h-4 w-4"})})}),t]}));bQ.displayName=_R.displayName;const jQ=p.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(SR,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CR,{children:s.jsx(QS,{className:"h-2 w-2 fill-current"})})}),t]}));jQ.displayName=SR.displayName;const cw=p.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(jR,{ref:r,className:Q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));cw.displayName=jR.displayName;const dw=p.forwardRef(({className:e,...t},n)=>s.jsx(kR,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));dw.displayName=kR.displayName;var uw="Avatar",[NQ,ZY]=wn(uw),[_Q,TR]=NQ(uw),AR=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=p.useState("idle");return s.jsx(_Q,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(je.span,{...r,ref:t})})});AR.displayName=uw;var RR="AvatarImage",IR=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=TR(RR,n),l=SQ(r,a.referrerPolicy),c=St(d=>{i(d),o.onImageLoadingStatusChange(d)});return qt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(je.img,{...a,ref:t,src:r}):null});IR.displayName=RR;var DR="AvatarFallback",OR=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=TR(DR,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(je.span,{...i,ref:t}):null});OR.displayName=DR;function SQ(e,t){const[n,r]=p.useState("idle");return qt(()=>{if(!e){r("error");return}let i=!0;const a=new window.Image,o=l=>()=>{i&&r(l)};return r("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{i=!1}},[e,t]),n}var MR=AR,LR=IR,$R=OR;const FR=p.forwardRef(({className:e,...t},n)=>s.jsx(MR,{ref:n,className:Q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));FR.displayName=MR.displayName;const CQ=p.forwardRef(({className:e,...t},n)=>s.jsx(LR,{ref:n,className:Q("aspect-square h-full w-full",e),...t}));CQ.displayName=LR.displayName;const zR=p.forwardRef(({className:e,...t},n)=>s.jsx($R,{ref:n,className:Q("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));zR.displayName=$R.displayName;const kQ=()=>{var c,d,u,h,f,m;const{session:e,loading:t}=Dr();if(t)return s.jsx("div",{className:"h-8 w-8 rounded-full bg-muted animate-pulse"});const n=e==null?void 0:e.email,r=((d=(c=e==null?void 0:e.current_tenant)==null?void 0:c.tenant)==null?void 0:d.name)||"User",i=((h=(u=e==null?void 0:e.current_tenant)==null?void 0:u.role)==null?void 0:h.display_name)||((m=(f=e==null?void 0:e.current_tenant)==null?void 0:f.role)==null?void 0:m.name),a=async()=>{await L.auth.signOut()},o=()=>r?r.split(" ").map(x=>x[0]).join("").toUpperCase():n?n[0].toUpperCase():"U",l=r||n||"User";return s.jsxs(Rf,{children:[s.jsx(If,{asChild:!0,children:s.jsx(U,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsx(FR,{className:"h-8 w-8",children:s.jsx(zR,{className:"bg-primary text-primary-foreground text-xs",children:o()})})})}),s.jsxs(lu,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(cw,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:l}),n&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:n})]}),i&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(Zg,{className:"h-3 w-3 text-muted-foreground"}),s.jsx(ve,{variant:"secondary",className:"text-xs px-1 py-0",children:i})]})]})}),s.jsx(dw,{}),s.jsxs(lr,{onClick:a,className:"cursor-pointer",children:[s.jsx(SO,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Log out"})]})]})]})};function vv({children:e}){const t=Rt(),n=()=>{t("/admin/dashboard")};return s.jsx(FP,{children:s.jsx(TA,{defaultOpen:!0,children:s.jsxs("div",{className:"min-h-screen flex w-full",children:[s.jsx(dK,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("header",{className:"h-14 border-b bg-background flex items-center px-4",children:[s.jsx(RA,{}),s.jsx("div",{className:"ml-4 flex-1",children:s.jsx("h1",{className:"text-lg font-semibold cursor-pointer hover:text-primary transition-colors",onClick:n,children:"Gemeos"})}),s.jsx(kQ,{})]}),s.jsx("main",{className:"flex-1",children:e})]})]})})})}function Y1({label:e="Domain",value:t,onChange:n,placeholder:r="Select a domain"}){const{domains:i}=Dn(),a=p.useMemo(()=>(i||[]).map(o=>({id:o.id,name:o.name,slug:o.slug})),[i]);return s.jsxs("div",{className:"space-y-2",children:[e&&s.jsx(xe,{className:"text-foreground",children:e}),s.jsxs(dt,{value:t||"",onValueChange:o=>n(o||null),children:[s.jsx(ot,{className:"w-full",children:s.jsx(ut,{placeholder:r})}),s.jsx(lt,{children:(a||[]).map(o=>s.jsx(me,{value:o.id,children:o.name},o.id))})]})]})}function EQ({domainId:e,label:t="Concept",value:n,onChange:r,placeholder:i="Select a concept"}){const{concepts:a}=wf(e||""),o=p.useMemo(()=>(a||[]).map(l=>({id:l.id,name:l.name})),[a]);return s.jsxs("div",{className:"space-y-2",children:[t&&s.jsx(xe,{className:"text-foreground",children:t}),s.jsxs(dt,{value:n||"",onValueChange:l=>r(l||null),disabled:!e,children:[s.jsx(ot,{className:"w-full",children:s.jsx(ut,{placeholder:i})}),s.jsx(lt,{children:(o||[]).map(l=>s.jsx(me,{value:l.id,children:l.name},l.id))})]})]})}const Xr={all:["ai-training-settings"],global:()=>[...Xr.all,"global"],domain:e=>[...Xr.all,"domain",e||"none"],concept:e=>[...Xr.all,"concept",e||"none"],effective:e=>[...Xr.all,"effective",e.domainId||"none",e.conceptId||"none"]};async function nl(e){let n=L.from("ai_training_settings").select("*").limit(1);e.scope&&(n=n.eq("scope",e.scope)),e.domain_id!==void 0&&(n=n.eq("domain_id",e.domain_id)),e.concept_id!==void 0&&(n=n.eq("concept_id",e.concept_id));const{data:r,error:i}=await n.maybeSingle();if(i&&i.code!=="PGRST116")throw i;return r??null}function PQ(){return mt({queryKey:Xr.global(),queryFn:()=>nl({scope:"global"})})}function TQ(e){return mt({queryKey:Xr.domain(e),queryFn:()=>e?nl({scope:"domain",domain_id:e}):Promise.resolve(null),enabled:!!e})}function AQ(e){return mt({queryKey:Xr.concept(e),queryFn:()=>e?nl({scope:"concept",concept_id:e}):Promise.resolve(null),enabled:!!e})}function RQ(e){const{conceptId:t,domainId:n}=e;return mt({queryKey:Xr.effective({conceptId:t||null,domainId:n||null}),queryFn:async()=>{if(t){const i=await nl({scope:"concept",concept_id:t});if(i)return i}if(n){const i=await nl({scope:"domain",domain_id:n});if(i)return i}return await nl({scope:"global"})},enabled:!!(t||n)})}function IQ(){const e=In();return en({mutationFn:async t=>{const n={model_name:t.model_name??"gemini-2.5-flash",region:t.region??"europe-west4",temperature:t.temperature??.2,top_p:t.top_p??.95,max_output_tokens:t.max_output_tokens??512,candidate_count:t.candidate_count??5,style_similarity_min:t.style_similarity_min??.8,duplicate_similarity_max:t.duplicate_similarity_max??.92,apply_strict_filter:t.apply_strict_filter??!0,fallback_to_bootstrap:t.fallback_to_bootstrap??!0,enabled:t.enabled??!0},r=L;if(t.scope==="global"){const l={...n,scope:"global",domain_id:null,concept_id:null},{data:c,error:d}=await r.from("ai_training_settings").upsert(l,{onConflict:"scope"}).select().maybeSingle();if(d)throw d;return c}if(t.scope==="domain"){const l={...n,scope:"domain",domain_id:t.domain_id,concept_id:null},{data:c,error:d}=await r.from("ai_training_settings").upsert(l,{onConflict:"scope,domain_id"}).select().maybeSingle();if(d)throw d;return c}const i={...n,scope:"concept",concept_id:t.concept_id,domain_id:null},{data:a,error:o}=await r.from("ai_training_settings").upsert(i,{onConflict:"scope,concept_id"}).select().maybeSingle();if(o)throw o;return a},meta:{onError:t=>{console.error("Failed to upsert AI training settings:",t)}},onSettled:async(t,n,r)=>{await e.invalidateQueries({queryKey:Xr.all}),(r==null?void 0:r.scope)==="global"&&await e.invalidateQueries({queryKey:Xr.global()})}})}function DQ(){const e=In();return en({mutationFn:async t=>{const n=L;if(t.scope==="domain"){const{error:i}=await n.from("ai_training_settings").delete().eq("scope","domain").eq("domain_id",t.domain_id);if(i)throw i;return}const{error:r}=await n.from("ai_training_settings").delete().eq("scope","concept").eq("concept_id",t.concept_id);if(r)throw r},meta:{onError:t=>{console.error("Failed to delete AI training settings override:",t)}},onSettled:async()=>{await e.invalidateQueries({queryKey:Xr.all})}})}const OQ=["gemini-2.5-flash","gemini-1.5-flash-002","gemini-1.5-flash-8b"],MQ=["europe-west4","us-central1"];function Xm({initial:e,scope:t,targetIds:n,showDelete:r}){const{toast:i}=rt(),a=IQ(),o=DQ(),[l,c]=p.useState((e==null?void 0:e.model_name)??"gemini-2.5-flash"),[d,u]=p.useState((e==null?void 0:e.region)??"europe-west4"),[h,f]=p.useState((e==null?void 0:e.temperature)??.2),[m,x]=p.useState((e==null?void 0:e.top_p)??.95),[g,b]=p.useState((e==null?void 0:e.max_output_tokens)??512),[v,y]=p.useState((e==null?void 0:e.candidate_count)??5),[w,k]=p.useState((e==null?void 0:e.style_similarity_min)??.8),[S,C]=p.useState((e==null?void 0:e.duplicate_similarity_max)??.92),[N,j]=p.useState((e==null?void 0:e.apply_strict_filter)??!0),[_,E]=p.useState((e==null?void 0:e.fallback_to_bootstrap)??!0),[A,R]=p.useState((e==null?void 0:e.enabled)??!0);p.useEffect(()=>{e&&(c(e.model_name),u(e.region),f(e.temperature),x(e.top_p),b(e.max_output_tokens),y(e.candidate_count),k(e.style_similarity_min),C(e.duplicate_similarity_max),j(e.apply_strict_filter),E(e.fallback_to_bootstrap),R(e.enabled))},[e==null?void 0:e.id]);const $=async()=>{const z={scope:t,model_name:l,region:d,temperature:Number(h),top_p:Number(m),max_output_tokens:Number(g),candidate_count:Number(v),style_similarity_min:Number(w),duplicate_similarity_max:Number(S),apply_strict_filter:!!N,fallback_to_bootstrap:!!_,enabled:!!A};t==="domain"&&(z.domain_id=n==null?void 0:n.domain_id),t==="concept"&&(z.concept_id=n==null?void 0:n.concept_id),console.log("Saving AI settings",z);const q=await a.mutateAsync(z);return i({title:"Saved",description:"AI Training settings updated."}),q},B=async()=>{t!=="global"&&(t==="domain"&&(n!=null&&n.domain_id)?(await o.mutateAsync({scope:"domain",domain_id:n.domain_id}),i({title:"Override removed",description:"Domain override deleted. Global settings now apply."})):t==="concept"&&(n!=null&&n.concept_id)&&(await o.mutateAsync({scope:"concept",concept_id:n.concept_id}),i({title:"Override removed",description:"Concept override deleted. Domain/global settings now apply."})))},F=(z,q,D)=>{const I=[`${z}`];return I.push(`min ${q}`),I.push(`max ${D}`),I.join(" • ")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"rounded-lg border divide-y divide-border",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Model"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose the Gemini model. Bigger models improve quality; smaller are faster and cheaper."})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs(dt,{value:l,onValueChange:c,children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Select model"})}),s.jsx(lt,{children:OQ.map(z=>s.jsx(me,{value:z,children:z},z))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Region"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vertex AI region. Pick the closest for lower latency and data residency needs."})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs(dt,{value:d,onValueChange:u,children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Select region"})}),s.jsx(lt,{children:MQ.map(z=>s.jsx(me,{value:z,children:z},z))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Temperature"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls randomness. Lower is more deterministic; higher is more creative."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{type:"number",step:"0.05",min:"0",max:"1",value:h,onChange:z=>f(Number(z.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:F(h,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Top P"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Nucleus sampling. Lower values consider fewer tokens; 1 uses full distribution."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{type:"number",step:"0.01",min:"0",max:"1",value:m,onChange:z=>x(Number(z.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:F(m,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Max Output Tokens"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hard cap on response length. Higher allows longer answers but costs more."})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(Te,{type:"number",min:"1",value:g,onChange:z=>b(Number(z.target.value))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Candidate Count"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate multiple candidates. Improves choice at the cost of latency and tokens."})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(Te,{type:"number",min:"1",value:v,onChange:z=>y(Number(z.target.value))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Style Similarity Min"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accept only when cosine similarity to the desired style meets this threshold."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{type:"number",step:"0.01",min:"0",max:"1",value:w,onChange:z=>k(Number(z.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:F(w,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Duplicate Similarity Max"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Treat as duplicate when similarity to existing content is above this threshold."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{type:"number",step:"0.01",min:"0",max:"1",value:S,onChange:z=>C(Number(z.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:F(S,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Apply strict filter"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enforce the similarity thresholds strictly. May drop low‑quality outputs."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(tl,{checked:N,onCheckedChange:j,id:"apply_strict"}),s.jsx(xe,{htmlFor:"apply_strict",className:"text-foreground",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Fallback to bootstrap"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"If strict filtering rejects all results, fall back to a simple baseline."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(tl,{checked:_,onCheckedChange:E,id:"fallback_bootstrap"}),s.jsx(xe,{htmlFor:"fallback_bootstrap",className:"text-foreground",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-foreground",children:"Enabled"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Master switch for this scope. Turn off to disable AI generation here."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(tl,{checked:A,onCheckedChange:R,id:"enabled"}),s.jsx(xe,{htmlFor:"enabled",className:"text-foreground",children:"Enabled"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(U,{onClick:$,className:"shrink-0",children:"Save settings"}),r&&t!=="global"&&s.jsx(U,{variant:"destructive",onClick:B,className:"shrink-0",children:"Remove override"})]})]})}function LQ(){const{search:e}=Ir();return p.useMemo(()=>new URLSearchParams(e),[e])}function $Q(){rt();const e=LQ(),t=Rt(),n=e.get("domain"),r=e.get("conceptId"),{domains:i}=Dn(),a=p.useMemo(()=>!n||!i?null:i.find(b=>b.slug===n||b.id===n)||null,[i,n]),[o,l]=p.useState((a==null?void 0:a.id)||null),[c,d]=p.useState(r||null);p.useEffect(()=>{a!=null&&a.id&&l(a.id)},[a==null?void 0:a.id]);const{data:u}=PQ(),{data:h}=TQ(o||void 0),{data:f}=AQ(c||void 0),{concepts:m}=wf(o||""),{data:x}=RQ({domainId:o,conceptId:c}),g=b=>{if(!b){d(null);return}c&&m&&!m.some(v=>v.id===c)&&d(null)};return p.useEffect(()=>{document.title="Admin AI Training Settings";const b=document.querySelector('meta[name="description"]');b&&b.setAttribute("content","Configure AI training settings: model, region, temperature, tokens, filters.")},[]),s.jsx(vv,{children:s.jsxs("div",{className:"w-full px-4 md:px-6 py-4 md:py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-foreground",children:"AI Training Settings"}),s.jsx(U,{variant:"secondary",onClick:()=>t(-1),children:"Back"})]}),s.jsxs(ri,{defaultValue:"global",className:"w-full",children:[s.jsxs(Ps,{className:"grid grid-cols-3 w-full md:w-auto",children:[s.jsx(et,{value:"global",children:"Global"}),s.jsx(et,{value:"domain",children:"Domain"}),s.jsx(et,{value:"concept",children:"Concept"})]}),s.jsx(tt,{value:"global",className:"mt-4",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Global defaults"})}),s.jsx(re,{className:"space-y-6",children:s.jsx(Xm,{scope:"global",initial:u||null})})]})}),s.jsx(tt,{value:"domain",className:"mt-4",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Domain override"})}),s.jsxs(re,{className:"space-y-6",children:[s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:s.jsx(Y1,{value:o,onChange:b=>{l(b),g(b)}})}),s.jsx(Xm,{scope:"domain",initial:h||null,targetIds:{domain_id:o||void 0},showDelete:!0})]})]})}),s.jsx(tt,{value:"concept",className:"mt-4",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Concept override"})}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(Y1,{value:o,onChange:b=>{l(b),g(b)}}),s.jsx(EQ,{domainId:o||void 0,value:c,onChange:d})]}),s.jsx(Xm,{scope:"concept",initial:f||null,targetIds:{concept_id:c||void 0},showDelete:!0})]})]})})]}),s.jsx("div",{className:"mt-6",children:s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Effective settings preview"})}),s.jsx(re,{children:x?s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Scope"}),s.jsx("div",{className:"text-foreground font-medium",children:x.scope})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Model"}),s.jsxs("div",{className:"text-foreground",children:[x.model_name," (",x.region,")"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Temperature / TopP"}),s.jsxs("div",{className:"text-foreground",children:[x.temperature," / ",x.top_p]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Max Tokens / Candidates"}),s.jsxs("div",{className:"text-foreground",children:[x.max_output_tokens," / ",x.candidate_count]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Style min"}),s.jsx("div",{className:"text-foreground",children:x.style_similarity_min})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Duplicate max"}),s.jsx("div",{className:"text-foreground",children:x.duplicate_similarity_max})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Flags"}),s.jsxs("div",{className:"text-foreground",children:["strict=",String(x.apply_strict_filter)," • fallback=",String(x.fallback_to_bootstrap)," • enabled=",String(x.enabled)]})]})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a domain and/or concept to preview the effective settings."})})]})})]})})}function FQ({open:e,onOpenChange:t,currentConcept:n,concepts:r,onAddChild:i}){const[a,o]=p.useState(""),l=(m,x=new Set)=>{if(x.has(m))return x;x.add(m);const g=r.find(b=>b.id===m);return g!=null&&g.parent_concept_id&&l(g.parent_concept_id,x),x},c=p.useMemo(()=>{const m=l(n.id);return r.filter(x=>!(x.id===n.id||x.parent_concept_id===n.id||m.has(x.id)||a&&!x.name.toLowerCase().includes(a.toLowerCase())))},[r,n,a]),d=m=>{i(m),t(!1),o("")},u=()=>{t(!1),o("")},h=m=>{switch(m){case"approved":case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"suggested":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=m=>{switch(m){case"approved":case"confirmed":return"Approved";case"suggested":return"AI Suggested";case"pending":return"Pending";default:return m}};return s.jsx(on,{open:e,onOpenChange:u,children:s.jsxs(tn,{className:"max-w-4xl max-h-[80vh]",children:[s.jsxs(nn,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(rn,{className:"text-2xl font-semibold",children:"Add Child Concept"}),s.jsxs("p",{className:"text-muted-foreground mt-1",children:['Select a concept to add as a child of "',n.name,'"']})]}),s.jsx(U,{variant:"ghost",size:"sm",onClick:u,className:"h-8 w-8 p-0",children:s.jsx(Bt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Te,{placeholder:"Search concepts...",value:a,onChange:m=>o(m.target.value),className:"pl-10 bg-gray-50"})]}),s.jsx(tu,{className:"h-[500px] pr-4",children:c.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:a?s.jsxs("div",{children:[s.jsxs("p",{children:['No concepts found matching "',a,'"']}),s.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search terms"})]}):s.jsxs("div",{children:[s.jsx("p",{children:"No available concepts to add as children"}),s.jsx("p",{className:"text-sm mt-1",children:"All suitable concepts are either already children or ancestors of this concept"})]})}):s.jsx("div",{className:"space-y-3",children:c.map(m=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-lg",children:m.name}),s.jsxs(ve,{variant:"outline",className:"text-xs bg-gray-50",children:["L",m.difficulty_level??0]}),s.jsx(ve,{className:`text-xs ${h(m.status)}`,children:f(m.status)})]}),m.description&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:m.description})]}),s.jsxs(U,{size:"sm",onClick:()=>d(m.id),className:"ml-4 bg-black text-white hover:bg-black/90 flex-shrink-0",children:[s.jsx(er,{className:"h-4 w-4 mr-1"}),"Add"]})]},m.id))})})]})]})})}function zQ({concept:e,concepts:t,onBack:n,onUpdateConcept:r,onChangeParent:i,onNavigateToConcept:a}){const o=Rt(),[l,c]=p.useState(()=>new URLSearchParams(window.location.search).get("tab")||"overview"),[d,u]=p.useState(!1),[h,f]=p.useState(!1),[m,x]=p.useState(e.description||""),[g,b]=p.useState(e.name),[v,y]=p.useState(!1),[w,k]=p.useState(!1),[S,C]=p.useState([]),[N,j]=p.useState(""),[_,E]=p.useState(""),[A,R]=p.useState(""),[$,B]=p.useState(!1),[F,z]=p.useState(!1);p.useState(null);const[q,D]=p.useState(""),[I,T]=p.useState(!1),[H,O]=p.useState(!1),[P,Z]=p.useState([]),[ee,W]=p.useState(e.difficulty_level??0),X=e.parent_concept_id?t.find(G=>G.id===e.parent_concept_id):null,ne=t.filter(G=>G.parent_concept_id===e.id),se=G=>G===0?{label:"Foundational",color:"bg-blue-100 text-blue-800"}:G===1?{label:"Beginner",color:"bg-green-100 text-green-800"}:G===2?{label:"Intermediate",color:"bg-yellow-100 text-yellow-800"}:G===3?{label:"Advanced",color:"bg-orange-100 text-orange-800"}:{label:"Expert",color:"bg-red-100 text-red-800"},fe=se(e.difficulty_level??0),de=()=>{r(e.id,{description:m}),u(!1)},ge=()=>{x(e.description||""),u(!1)},Ue=()=>{r(e.id,{name:g}),f(!1)},Ie=()=>{b(e.name),f(!1)},De=G=>{a&&a(G)},Se=G=>{a&&a(G)},Ke=G=>{a&&a(G)},Be=G=>{i(G,void 0)},Ce=G=>{i(G,e.id)},Ve=async()=>{B(!0);try{const{data:G,error:ke}=await L.from("concept_relationships").select("*").or(`concept_a_id.eq.${e.id},concept_b_id.eq.${e.id}`).eq("status","approved");!ke&&G&&C(G)}catch(G){console.error("Failed to load relationships:",G)}B(!1)},dn=()=>{j(""),E(""),R(""),k(!0)},Mt=async()=>{if(console.log("Save relationship clicked",{relationshipType:N,targetConceptId:_}),!N||!_){console.log("Missing required fields");return}z(!0);const G={domain_id:e.domain_id,concept_a_id:e.id,concept_b_id:_,relationship_kind:Kt(N),status:"approved",metadata:{label:ie(N),description:A||null}};console.log("Saving relationship data:",G);try{const{data:ke,error:Je}=await L.from("concept_relationships").insert([G]);console.log("Supabase response:",{data:ke,error:Je}),Je?(console.error("Supabase error:",Je),alert(`Failed to save relationship: ${Je.message}`)):(k(!1),Ve(),console.log("Relationship saved successfully"),j(""),E(""),R(""))}catch(ke){console.error("Failed to save relationship:",ke),alert("Failed to save relationship. Please try again.")}finally{z(!1)}},Kt=G=>G==="is_prerequisite_for"?"prerequisite_of":G==="is_built_upon_by"?"builds_on":"related_to",ie=G=>G==="is_prerequisite_for"?"Is a prerequisite of":G==="is_built_upon_by"?"Builds on":G==="is_related_to"?"Is related to":G==="contains"?"Contains":G.replace(/_/g," ").replace(/\b\w/g,ke=>ke.toUpperCase()),be=async G=>{try{const{error:ke}=await L.from("concept_relationships").delete().eq("id",G);ke||Ve()}catch(ke){console.error("Failed to delete relationship:",ke)}},V=G=>{var $t;const ke=G.concept_a_id===e.id,Je=ke?G.concept_b_id:G.concept_a_id;return{otherConcept:t.find(K=>K.id===Je),direction:ke?"outgoing":"incoming",displayType:G.relationship_kind,label:(($t=G.metadata)==null?void 0:$t.label)||G.relationship_kind.replace(/_/g," ")}},Y=async()=>{try{const{data:G,error:ke}=await L.from("difficulty_level_labels").select("level_label").eq("level",e.difficulty_level??0).single();D(!ke&&G?G.level_label:se(e.difficulty_level??0).label)}catch(G){console.error("Failed to load difficulty label:",G),D(se(e.difficulty_level??0).label)}},ye=async()=>{try{const{data:G,error:ke}=await L.from("difficulty_level_labels").select("level, level_label").order("level");if(console.log("Difficulty levels response:",{data:G,error:ke}),!ke&&G)Z(G),console.log("Loaded difficulty levels:",G);else{console.error("Error loading difficulty levels:",ke);const Je=[{level:0,level_label:"Foundational"},{level:1,level_label:"Beginner"},{level:2,level_label:"Intermediate"},{level:3,level_label:"Advanced"},{level:4,level_label:"Expert"}];Z(Je),console.log("Using fallback difficulty levels:",Je)}}catch(G){console.error("Failed to load difficulty levels:",G),Z([{level:0,level_label:"Foundational"},{level:1,level_label:"Beginner"},{level:2,level_label:"Intermediate"},{level:3,level_label:"Advanced"},{level:4,level_label:"Expert"}])}},Pe=()=>{r(e.id,{difficulty_level:ee}),O(!1),Y()},Fe=()=>{W(e.difficulty_level??0),O(!1)};return p.useEffect(()=>{Ve(),Y(),ye()},[e.id]),s.jsxs("div",{className:"flex flex-col h-full bg-background",children:[s.jsx("div",{className:"bg-card border-b shadow-sm",children:s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-3 mb-4",children:h?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Te,{value:g,onChange:G=>b(G.target.value),className:"text-3xl font-medium h-12 border-gray-300"}),s.jsx(U,{size:"sm",onClick:Ue,children:s.jsx(Vi,{className:"h-4 w-4"})}),s.jsx(U,{size:"sm",variant:"outline",onClick:Ie,children:s.jsx(Bt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"text-3xl font-medium text-gray-900",children:e.name}),s.jsxs(ve,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 font-medium",children:["Level ",e.difficulty_level??0]}),s.jsx(ve,{className:e.status==="approved"||e.status==="confirmed"?"bg-green-100 text-green-800 hover:bg-green-100 border-green-200 font-medium":e.status==="suggested"?"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-200 font-medium":e.status==="pending"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100 border-yellow-200 font-medium":"bg-red-100 text-red-800 hover:bg-red-100 border-red-200 font-medium",children:e.status==="approved"||e.status==="confirmed"?"Approved":e.status==="suggested"?"AI Suggested":e.status==="pending"?"Pending":e.status})]})}),s.jsx("div",{className:"max-w-4xl",children:d?s.jsxs("div",{className:"space-y-3",children:[s.jsx(Rr,{value:m,onChange:G=>x(G.target.value),placeholder:"Enter concept description...",rows:3,className:"resize-none border-gray-200 bg-white"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{size:"sm",onClick:de,children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Save"]}),s.jsxs(U,{size:"sm",variant:"outline",onClick:ge,children:[s.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):s.jsx("p",{className:"text-muted-foreground leading-relaxed text-lg",children:e.description||"No description available. Click the edit button to add one."})})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.status==="approved"&&s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{o(`/admin/domain/${e.domain_id}/goals?conceptId=${e.id}`)},className:"h-9 w-9 p-0 hover:bg-blue-50 rounded-md",title:"Learning goals",children:s.jsx(vn,{className:"h-4 w-4 text-blue-600"})}),!d&&s.jsx(U,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"h-9 w-9 p-0 hover:bg-gray-100 rounded-md",title:"Edit description",children:s.jsx(Di,{className:"h-4 w-4"})})]})]})})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs(ri,{value:l,onValueChange:c,className:"flex flex-col h-full",children:[s.jsx("div",{className:"border-b bg-card py-4",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsxs(Ps,{className:"grid w-full grid-cols-3 h-11",children:[s.jsx(et,{value:"overview",className:"text-sm font-medium",children:"Overview"}),s.jsx(et,{value:"relationships",className:"text-sm font-medium",children:"Relationships"}),s.jsx(et,{value:"settings",className:"text-sm font-medium",children:"Settings"})]})})}),s.jsx("div",{className:"flex-1 overflow-auto py-8",children:s.jsxs("div",{className:"container mx-auto px-6 max-w-6xl",children:[s.jsxs(tt,{value:"overview",className:"space-y-6 mt-0",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(te,{children:s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Pn,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Parent & Children"}),s.jsxs("div",{className:"space-y-1",children:[X?s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx("span",{children:"↗"}),s.jsx("span",{children:X.name})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Root level concept"}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx("span",{children:"↘"}),s.jsxs("span",{children:[ne.length," child concept",ne.length!==1?"s":""]})]})]})]})]})})}),s.jsx(te,{children:s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Pb,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Relationships"}),s.jsx("p",{className:"text-2xl font-semibold",children:S.length})]})]})})}),s.jsx(te,{children:s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(jy,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Difficulty Level"}),s.jsx(ve,{variant:"outline",className:`mt-1 ${fe.color} border-0`,children:q||fe.label})]})]})})})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ue,{className:"text-lg",children:"Child Concepts"}),s.jsxs(U,{size:"sm",onClick:()=>y(!0),className:"bg-black text-white hover:bg-black/90",children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Child"]})]})}),ne.length>0&&s.jsx(re,{children:s.jsx("div",{className:"space-y-3",children:ne.map((G,ke)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"w-2 h-2 bg-muted rounded-full flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-foreground",children:G.name}),G.description&&s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:G.description})]}),s.jsxs(ve,{variant:"outline",className:"flex-shrink-0",children:["L",G.difficulty_level??0]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>De(G.id),title:"Edit concept",children:s.jsx(Di,{className:"h-4 w-4 text-gray-600"})}),s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>Se(G.id),title:"Manage relationships",children:s.jsx(Pb,{className:"h-4 w-4 text-blue-600"})}),s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>Ke(G.id),title:"Settings",children:s.jsx(kn,{className:"h-4 w-4 text-gray-600"})}),s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-red-50",onClick:()=>Be(G.id),title:"Remove child relationship",children:s.jsx(AO,{className:"h-4 w-4 text-gray-600 hover:text-red-600"})})]})]}),ke<ne.length-1&&s.jsx(mr,{className:"mt-3"})]},G.id))})}),ne.length===0&&s.jsx(re,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No child concepts yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add a child concept to build the knowledge hierarchy"})]})})]})]}),s.jsxs(tt,{value:"relationships",className:"space-y-8 mt-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Relationships"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage connections between this concept and others in the knowledge graph."})]}),s.jsxs(U,{className:"bg-black text-white hover:bg-black/90",onClick:dn,children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Add Relationship"]})]}),$?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):S.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx("p",{children:"No relationships configured yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add relationships to connect this concept with others"})]}):s.jsx("div",{className:"space-y-4",children:S.map(G=>{var _e;const{otherConcept:ke,direction:Je,displayType:Lt,label:$t}=V(G);if(!ke)return null;const K=(Qe,st)=>Qe==="prerequisite_of"?st==="outgoing"?s.jsx(Mh,{className:"h-4 w-4"}):s.jsx(ts,{className:"h-4 w-4"}):Qe==="builds_on"?st==="incoming"?s.jsx(Mh,{className:"h-4 w-4"}):s.jsx(ts,{className:"h-4 w-4"}):Qe==="related_to"?s.jsx(Jg,{className:"h-4 w-4"}):s.jsx(Jg,{className:"h-4 w-4"}),Le=Qe=>Qe==="prerequisite_of"?"bg-red-100 text-red-800":Qe==="builds_on"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800";return s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[K(Lt,Je),s.jsx(ve,{className:`${Le(Lt)} border-0`,children:$t}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:ke.name}),((_e=G.metadata)==null?void 0:_e.description)&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:G.metadata.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Edit relationship",children:s.jsx(Di,{className:"h-4 w-4"})}),s.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>be(G.id),title:"Delete relationship",children:s.jsx(Ns,{className:"h-4 w-4"})})]})]})},G.id)})})]}),s.jsxs(tt,{value:"settings",className:"space-y-8 mt-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Concept Settings"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Administrative settings and actions for this concept."})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{className:"text-lg",children:"Hierarchy Management"})}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Current Parent"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:X?X.name:"None (Root level concept)"}),s.jsxs(U,{variant:"outline",onClick:()=>T(!0),children:[s.jsx(kn,{className:"h-4 w-4 mr-2"}),"Change Parent Concept"]})]})})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{className:"text-lg",children:"Difficulty Level"})}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Current Level"}),H?s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs(dt,{value:ee.toString(),onValueChange:G=>W(parseInt(G)),children:[s.jsx(ot,{className:"w-full",children:s.jsx(ut,{placeholder:"Select difficulty level"})}),s.jsx(lt,{children:P.length>0?P.map(G=>s.jsxs(me,{value:G.level.toString(),children:["Level ",G.level,": ",G.level_label]},G.level)):s.jsx(me,{value:"0",disabled:!0,children:"Loading levels..."})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(U,{size:"sm",onClick:Pe,children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Save"]}),s.jsxs(U,{size:"sm",variant:"outline",onClick:Fe,children:[s.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):s.jsxs("div",{className:"mt-2",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Level ",e.difficulty_level??0,": ",q||"Loading..."]}),s.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{console.log("Change Level clicked. Available levels:",P),O(!0)},children:[s.jsx(Di,{className:"h-4 w-4 mr-2"}),"Change Level"]})]})]})})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{className:"text-lg",children:"Concept Information"})}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Current Level"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Level ",e.difficulty_level??0]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Status"}),s.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:e.status})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Child Concepts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ne.length})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Relationships"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:S.length})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Created By"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(ve,{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200",children:"📝 Manual"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Created At"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"})]})]})})]})]})]})})]})}),s.jsx(FQ,{open:v,onOpenChange:y,currentConcept:e,concepts:t,onAddChild:Ce}),s.jsx(on,{open:w,onOpenChange:k,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Add Relationship"}),s.jsxs(Qn,{children:['Create a new relationship between "',e.name,'" and another concept.']})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Relationship Type"}),s.jsxs(dt,{value:N,onValueChange:j,children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Select relationship type"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"is_prerequisite_for",children:"Prerequisite: Must be learned before"}),s.jsx(me,{value:"is_built_upon_by",children:"Builds Upon: Extends this concept"}),s.jsx(me,{value:"is_related_to",children:"Related: Similar or connected concept"}),s.jsx(me,{value:"contains",children:"Contains: Includes as sub-concept"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Target Concept"}),s.jsxs(dt,{value:_,onValueChange:E,children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Search and select concept"})}),s.jsx(lt,{children:t.filter(G=>G.id!==e.id).sort((G,ke)=>G.name.localeCompare(ke.name)).map(G=>s.jsx(me,{value:G.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:G.name}),s.jsxs(ve,{variant:"outline",className:"text-xs",children:["L",G.difficulty_level??0]})]})},G.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),s.jsx(Rr,{value:A,onChange:G=>R(G.target.value),placeholder:"Add additional context about this relationship...",rows:3,className:"resize-none"})]})]}),s.jsxs(Gi,{children:[s.jsx(U,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),s.jsx(U,{onClick:Mt,disabled:!N||!_||F,className:"bg-black text-white hover:bg-black/90",children:F?"Saving...":"Save Relationship"})]})]})}),s.jsx(on,{open:I,onOpenChange:T,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Change Parent Concept"}),s.jsxs(Qn,{children:['Select a new parent concept for "',e.name,'" or make it a root-level concept.']})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Parent Concept"}),s.jsxs(dt,{value:(X==null?void 0:X.id)||"none",onValueChange:G=>{G==="none"?i(e.id,void 0):i(e.id,G),T(!1)},children:[s.jsx(ot,{children:s.jsx(ut,{placeholder:"Select parent concept or none"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"none",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{children:"None (Root level concept)"})})}),t.filter(G=>G.id!==e.id).sort((G,ke)=>G.name.localeCompare(ke.name)).map(G=>s.jsx(me,{value:G.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:G.name}),s.jsxs(ve,{variant:"outline",className:"text-xs",children:["L",G.difficulty_level??0]})]})},G.id))]})]})]})}),s.jsx(Gi,{children:s.jsx(U,{variant:"outline",onClick:()=>T(!1),children:"Cancel"})})]})})]})}function UQ(){const{domainSlug:e,conceptId:t}=ti(),n=Rt(),r=e||"",{toast:i}=rt(),[a,o]=p.useState(null),[l,c]=p.useState("");p.useState(!1);const[d,u]=p.useState([]),[h,f]=p.useState([]),[m,x]=p.useState([]);p.useState(!1),p.useState(""),p.useState(""),p.useState("is_related_to"),p.useState(!1);const[g,b]=p.useState(""),[v,y]=p.useState("");p.useEffect(()=>{(async()=>{if(!t){console.error("No conceptId provided");return}console.log("Fetching concept with ID:",t),console.log("Domain ID:",r);const{data:j,error:_}=await L.from("concepts").select("id,name,description,parent_concept_id,domain_id,status,difficulty_level,generation_source,source,source_file_id,created_at,updated_at,display_order,metadata,created_by,updated_by,reviewed_by,reviewed_at").eq("id",t).single();if(_){console.error("Concept fetch error:",_),console.error("Error details:",{code:_.code,message:_.message,details:_.details,hint:_.hint}),i({title:"Failed to load concept",description:_.message||"Unknown error occurred",variant:"destructive"});return}console.log("Successfully fetched concept:",j),o(j),c((j==null?void 0:j.description)||""),b((j==null?void 0:j.description)||""),document.title=`${j==null?void 0:j.name} – Concept Details`;const E=j!=null&&j.description?String(j.description).slice(0,150):"Concept detail workspace";let A=document.querySelector('meta[name="description"]');A||(A=document.createElement("meta"),A.name="description",document.head.appendChild(A)),A.content=`${j==null?void 0:j.name} – ${E}`;let R=document.querySelector('link[rel="canonical"]');if(R||(R=document.createElement("link"),R.rel="canonical",document.head.appendChild(R)),R.href=window.location.href,r){const{data:q,error:D}=await L.from("concepts").select("id,name,description,parent_concept_id,domain_id,status,difficulty_level,generation_source,source,source_file_id,created_at,updated_at,display_order,metadata,created_by,updated_by,reviewed_by,reviewed_at").eq("domain_id",r);D||u(q||[])}const{data:$,error:B}=await L.from("learning_goals").select("id, concept_id, goal_description, bloom_level, goal_type, sequence_order, status, created_at, metadata_json, created_by, updated_by, updated_at, review_status, reviewed_by, reviewed_at").eq("concept_id",t).order("created_at",{ascending:!1});B||f($||[]);const{data:F,error:z}=await L.from("concept_relationships").select("id, domain_id, concept_a_id, concept_b_id, relationship_type, relationship_kind, metadata, created_at, status, source, created_by, updated_at").or(`concept_a_id.eq.${t},concept_b_id.eq.${t}`);z||x(F||[])})()},[t,r,i]),p.useMemo(()=>d.filter(N=>N.id!==t),[d,t]);const w=N=>{var _;const j=N.concept_a_id===t?N.concept_b_id:N.concept_a_id;return((_=d.find(E=>E.id===j))==null?void 0:_.name)||j},k=async(N,j)=>{const{error:_}=await L.from("concepts").update(j).eq("id",N);if(_){i({title:"Failed to update concept",description:_.message,variant:"destructive"});return}o(E=>E&&{...E,...j}),i({title:"Concept updated successfully"})},S=async(N,j)=>{const{error:_}=await L.from("concepts").update({parent_concept_id:j||null}).eq("id",N);if(_){i({title:"Failed to change parent",description:_.message,variant:"destructive"});return}if(r){const{data:E,error:A}=await L.from("concepts").select("id,name,description,parent_concept_id,domain_id,status,difficulty_level,generation_source,source,source_file_id,created_at,updated_at,display_order,metadata,created_by,updated_by,reviewed_by,reviewed_at").eq("domain_id",r);A||u(E||[])}i({title:"Parent relationship updated"})},C=N=>{n(`/admin/domain/${e}/concepts/${N}`)};return a?(h.filter(N=>N.status==="approved"),h.filter(N=>N.status==="suggested"),m.filter(N=>{const j=w(N).toLowerCase(),_=N.relationship_type.toLowerCase(),E=v.toLowerCase();return!E||j.includes(E)||_.includes(E)}),s.jsxs(Ki,{children:[s.jsx(Cs,{}),s.jsx(zQ,{concept:a,concepts:d,onBack:()=>n(-1),onUpdateConcept:k,onChangeParent:S,onNavigateToConcept:C})]})):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h1",{className:"text-xl font-semibold",children:"Loading…"})})})}const ft=({children:e})=>{const t=Ir(),{session:n,loading:r}=Dr();return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[s.jsx(it,{className:"h-8 w-full"}),s.jsx(it,{className:"h-4 w-3/4"}),s.jsx(it,{className:"h-4 w-1/2"})]})}):n?s.jsx(s.Fragment,{children:e}):s.jsx(gd,{to:"/login",replace:!0,state:{from:t}})},BQ=()=>{const e=Rt();return p.useEffect(()=>{e("/login",{replace:!0})},[e]),null},qQ=()=>{const[e,t]=p.useState(""),[n,r]=p.useState(""),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(""),u=Rt(),{session:h,loading:f}=Dr();p.useEffect(()=>{if(!f&&h){const x=setTimeout(()=>{u("/admin/dashboard",{replace:!0})},100);return()=>clearTimeout(x)}},[f,h,u]);const m=async x=>{x.preventDefault(),l(!0),d("");try{const{data:g,error:b}=await L.auth.signInWithPassword({email:e.trim(),password:n});if(b)throw b;g.user&&(console.log("Login successful:",g.user.email),setTimeout(()=>{u("/admin/dashboard",{replace:!0})},1e3))}catch(g){console.error("Login error:",g),d((g==null?void 0:g.message)||"Invalid email or password. Please try again.")}finally{l(!1)}};return!f&&h?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Redirecting to dashboard..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(dr,{to:"/welcome",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[s.jsx(ts,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),s.jsxs(te,{className:"shadow-xl border-0",children:[s.jsxs(le,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(xn,{className:"w-6 h-6 text-blue-600"})}),s.jsx(ue,{className:"text-2xl font-bold text-gray-900",children:"Welcome back"}),s.jsx(Me,{className:"text-gray-600",children:"Sign in to your account to continue"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:x=>t(x.target.value),className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(qo,{className:"w-4 h-4"}):s.jsx(ws,{className:"w-4 h-4"})})]})]}),c&&s.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:c}),s.jsx("div",{className:"text-right",children:s.jsx(dr,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:"Forgot your password?"})}),s.jsx(U,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:o||f,children:o?"Signing in...":"Sign in"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),s.jsx("div",{className:"text-center",children:s.jsx(dr,{to:"/register",children:s.jsx(U,{variant:"outline",className:"w-full h-11 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Create new account"})})})]})]})]})})},VQ=()=>{const[e,t]=p.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,r]=p.useState(!1),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,h]=p.useState(!1),f=Rt(),m=b=>{t({...e,[b.target.name]:b.target.value}),d("")},x=()=>e.password!==e.confirmPassword?(d("Passwords do not match"),!1):e.password.length<8?(d("Password must be at least 8 characters long"),!1):!e.firstName.trim()||!e.lastName.trim()?(d("First name and last name are required"),!1):!0,g=async b=>{if(b.preventDefault(),!!x()){l(!0),d("");try{console.log("Registration attempt:",e),await new Promise(v=>setTimeout(v,1500)),h(!0),setTimeout(()=>{f("/login")},2e3)}catch{d("Registration failed. Please try again.")}finally{l(!1)}}};return u?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(Zn,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account created successfully!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You can now sign in with your new account."}),s.jsx("div",{className:"animate-pulse text-sm text-gray-500",children:"Redirecting to login page..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(dr,{to:"/welcome",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[s.jsx(ts,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),s.jsxs(te,{className:"shadow-xl border-0",children:[s.jsxs(le,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Fh,{className:"w-6 h-6 text-blue-600"})}),s.jsx(ue,{className:"text-2xl font-bold text-gray-900",children:"Create your account"}),s.jsx(Me,{className:"text-gray-600",children:"Join us and start your learning journey"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700",children:"First name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"firstName",name:"firstName",type:"text",placeholder:"First name",value:e.firstName,onChange:m,className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700",children:"Last name"}),s.jsx(Te,{id:"lastName",name:"lastName",type:"text",placeholder:"Last name",value:e.lastName,onChange:m,className:"h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:m,className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"password",name:"password",type:n?"text":"password",placeholder:"Create a password",value:e.password,onChange:m,className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?s.jsx(qo,{className:"w-4 h-4"}):s.jsx(ws,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirm password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",placeholder:"Confirm your password",value:e.confirmPassword,onChange:m,className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(qo,{className:"w-4 h-4"}):s.jsx(ws,{className:"w-4 h-4"})})]})]}),c&&s.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:c}),s.jsx(U,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:o,children:o?"Creating account...":"Create account"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),s.jsx("div",{className:"text-center",children:s.jsx(dr,{to:"/login",children:s.jsx(U,{variant:"outline",className:"w-full h-11 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Sign in instead"})})})]})]})]})})},HQ=()=>{const[e,t]=p.useState(""),[n,r]=p.useState(!1),[i,a]=p.useState(""),[o,l]=p.useState(!1),c=async d=>{d.preventDefault(),r(!0),a("");try{console.log("Password reset requested for:",e),await new Promise(u=>setTimeout(u,1500)),l(!0)}catch{a("Failed to send reset email. Please try again.")}finally{r(!1)}};return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(Zn,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check your email"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",s.jsx("strong",{children:e})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or try again."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(U,{onClick:()=>l(!1),variant:"outline",className:"flex-1",children:"Try another email"}),s.jsx(dr,{to:"/login",children:s.jsx(U,{className:"flex-1",children:"Back to login"})})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(dr,{to:"/login",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[s.jsx(ts,{className:"w-4 h-4 mr-2"}),"Back to login"]}),s.jsxs(te,{className:"shadow-xl border-0",children:[s.jsxs(le,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(xn,{className:"w-6 h-6 text-blue-600"})}),s.jsx(ue,{className:"text-2xl font-bold text-gray-900",children:"Forgot your password?"}),s.jsx(Me,{className:"text-gray-600",children:"No worries! Enter your email and we'll send you reset instructions."})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(Te,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:d=>t(d.target.value),className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),i&&s.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:i}),s.jsx(U,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:n,children:n?"Sending...":"Send reset instructions"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Remember your password?"})})]}),s.jsx("div",{className:"text-center",children:s.jsx(dr,{to:"/login",children:s.jsx(U,{variant:"outline",className:"w-full h-11 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Back to login"})})}),s.jsxs("div",{className:"text-center text-sm text-gray-500",children:[s.jsx("p",{children:"Need help? Contact our support team"}),s.jsx(dr,{to:"/support",className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Get support"})]})]})]})]})})};function GQ({stats:e}){const t=[{title:"Total Domains",value:e.totalDomains,icon:YS,description:"Active learning domains"},{title:"Total Concepts",value:e.totalConcepts,icon:Pt,description:"Concepts across all domains"},{title:"Learning Goals",value:e.totalLearningGoals,icon:vn,description:"Defined learning objectives"},{title:"Total Exercises",value:e.totalExercises,icon:Ws,description:"Practice exercises available"}];return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(n=>s.jsxs(te,{className:"min-h-[var(--admin-stat-card-min-h)] bg-surface-card border-0 shadow-sm hover:shadow-md transition-shadow duration-200 rounded-lg",children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium text-dashboard-primary",children:n.title}),s.jsx(n.icon,{className:"h-5 w-5 text-dashboard-secondary"})]}),s.jsxs(re,{className:"pt-2 pb-4",children:[s.jsx("div",{className:"mt-2 text-2xl font-bold text-dashboard-primary",children:n.value.toLocaleString()}),s.jsx("p",{className:"text-xs text-dashboard-text-muted mt-1",children:n.description})]})]},n.title))})}function WQ({domain:e,onManage:t,onViewAnalytics:n}){const i=(a=>{switch(a==null?void 0:a.toLowerCase()){case"active":return{badge:"bg-[#22C55E] text-white border-0 font-medium",indicator:"bg-[#22C55E]"};case"draft":return{badge:"bg-[#F59E0B] text-white border-0 font-medium",indicator:"bg-[#F59E0B]"};case"archived":return{badge:"bg-[#7E7BB3] text-white border-0 font-medium",indicator:"bg-[#7E7BB3]"};default:return{badge:"bg-[#7E7BB3] text-white border-0 font-medium",indicator:"bg-[#7E7BB3]"}}})(e.status);return s.jsxs(te,{className:Q("relative overflow-hidden","bg-white rounded-lg","border border-[#E5E7EB]","shadow-sm hover:shadow-lg","transition-all duration-200","hover:scale-[1.01]","cursor-default"),children:[s.jsx("div",{className:Q("absolute top-0 left-0 right-0 h-1",i.indicator)}),s.jsxs(le,{className:"p-6 pb-4 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(ue,{className:"text-xl font-semibold text-[#110D59] truncate",children:e.name})}),s.jsx(ve,{className:Q("px-3 py-1 text-xs uppercase tracking-wider","rounded-full",i.badge),children:e.status})]}),s.jsx(Me,{className:"text-sm text-[#7E7BB3] leading-relaxed line-clamp-2 min-h-[2.5rem]",children:e.description})]}),s.jsxs(re,{className:"p-6 pt-0 space-y-6",children:[s.jsx("div",{className:"bg-[#F1F2F4] rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#110D59]/10 mx-auto",children:s.jsx(Pt,{className:"h-5 w-5 text-[#110D59]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-[#110D59]",children:e.concepts}),s.jsx("div",{className:"text-xs text-[#7E7BB3] font-medium mt-0.5",children:"Concepts"})]})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#28246F]/10 mx-auto",children:s.jsx(vn,{className:"h-5 w-5 text-[#28246F]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-[#28246F]",children:e.learningGoals}),s.jsx("div",{className:"text-xs text-[#7E7BB3] font-medium mt-0.5",children:"Goals"})]})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#A3D1FC]/20 mx-auto",children:s.jsx(Zi,{className:"h-5 w-5 text-[#0B5FAE]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-[#0B5FAE]",children:e.exercises}),s.jsx("div",{className:"text-xs text-[#7E7BB3] font-medium mt-0.5",children:"Exercises"})]})]})]})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#7E7BB3]",children:[s.jsx(Fl,{className:"h-4 w-4"}),s.jsxs("span",{children:["Last updated: ",new Date(e.lastUpdated).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>t(e.id),className:Q("flex-1 h-[51px] rounded-lg","bg-[#0E77D9] text-white","font-medium text-sm","flex items-center justify-center gap-2","transition-all duration-200","hover:bg-[#0E77D9]/90","active:bg-[#0E77D9]/85","focus:outline-none focus:ring-2 focus:ring-[#0E77D9] focus:ring-offset-2"),children:[s.jsx(kn,{className:"h-4 w-4"}),"Manage"]}),s.jsxs("button",{onClick:()=>n(e.id),className:Q("flex-1 h-[51px] rounded-lg","bg-[#0B5FAE] text-white","font-medium text-sm","flex items-center justify-center gap-2","transition-all duration-200","hover:bg-[#0B5FAE]/90","active:bg-[#0B5FAE]/85","focus:outline-none focus:ring-2 focus:ring-[#0B5FAE] focus:ring-offset-2"),children:[s.jsx(jy,{className:"h-4 w-4"}),"Analytics"]})]})]})]})}function KQ({domains:e,onCreateNew:t,onManageDomain:n,onViewAnalytics:r}){const[i,a]=p.useState(""),[o,l]=p.useState("all"),c=[{id:"sample-1",name:"IELTS",description:"Prepares students for the International English Language Testing System, focusing on listening, reading, writing, and speaking skills.",status:"active",concepts:0,learningGoals:0,exercises:0,lastUpdated:"31.8.2025"},{id:"sample-2",name:"GMAT",description:"Prepares students for the Graduate Management Admission Test, focusing on analytical, quantitative, verbal, and integrated reasoning skills.",status:"active",concepts:0,learningGoals:0,exercises:0,lastUpdated:"31.8.2025"},{id:"sample-3",name:"Jazz music",description:"This domain focuses on mastering jazz, exploring its rich harmony, fluid rhythm, and improvisation techniques. It offers a comprehensive path to developing instrumental technique, ear training, and an understanding of the vast repertoire and styles of jazz",status:"active",concepts:62,learningGoals:0,exercises:0,lastUpdated:"31.8.2025"}],d=e.length===0?c:e,u=p.useMemo(()=>{let h=d.filter(f=>{const m=f.name.toLowerCase().includes(i.toLowerCase())||f.description.toLowerCase().includes(i.toLowerCase()),x=o==="all"||f.status===o;return m&&x});return h.sort((f,m)=>new Date(m.lastUpdated).getTime()-new Date(f.lastUpdated).getTime()),h},[d,i,o]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dashboard-text-muted h-4 w-4"}),s.jsx(Te,{placeholder:"Search domains...",value:i,onChange:h=>a(h.target.value),className:"pl-10 bg-surface-card border-dashboard-bg focus:border-dashboard-accent focus:ring-dashboard-accent/20 text-dashboard-primary placeholder:text-dashboard-text-muted"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(dt,{value:o,onValueChange:l,children:[s.jsxs(ot,{className:"w-36 bg-surface-card border-dashboard-bg text-dashboard-primary",children:[s.jsx(Ny,{className:"h-4 w-4 mr-2 text-dashboard-secondary"}),s.jsx(ut,{placeholder:"Status"})]}),s.jsxs(lt,{className:"bg-surface-card border-dashboard-bg",children:[s.jsx(me,{value:"all",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"All Status"}),s.jsx(me,{value:"active",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"Active"}),s.jsx(me,{value:"draft",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"Draft"}),s.jsx(me,{value:"archived",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"Archived"})]})]})})]}),s.jsxs(U,{onClick:t,className:"whitespace-nowrap bg-dashboard-primary hover:bg-dashboard-secondary text-white border-0 shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(er,{className:"h-4 w-4 mr-2"}),"Create New Domain"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(h=>s.jsx(WQ,{domain:h,onManage:n,onViewAnalytics:r},h.id))}),u.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-dashboard-text-muted text-sm",children:i||o!=="all"?"No domains match your search criteria.":"No domains found."})})]})}function QQ(){const e=Rt(),{domains:t}=Dn(),{domainsStats:n}=XU(),r=p.useMemo(()=>{const c=t.length,d=t.reduce((u,h)=>{const f=n[h.id]||{conceptsCount:0,learningGoalsCount:0,exercisesCount:0};return u.totalConcepts+=f.conceptsCount||0,u.totalLearningGoals+=f.learningGoalsCount||0,u.totalExercises+=f.exercisesCount||0,u},{totalConcepts:0,totalLearningGoals:0,totalExercises:0});return{totalDomains:c,totalConcepts:d.totalConcepts,totalLearningGoals:d.totalLearningGoals,totalExercises:d.totalExercises}},[t,n]),i=p.useMemo(()=>t.map(c=>{const d=n[c.id]||{conceptsCount:0,learningGoalsCount:0,exercisesCount:0};return{id:c.id,name:c.name,description:c.description,status:"active",concepts:d.conceptsCount||0,learningGoals:d.learningGoalsCount||0,exercises:d.exercisesCount||0,lastUpdated:c.updated_at||c.created_at}}),[t,n]);if(typeof document<"u"){document.title="Admin Dashboard | Gemeos";const c=document.querySelector('meta[name="description"]');if(c)c.setAttribute("content","Admin dashboard for managing learning domains and platform insights.");else{const u=document.createElement("meta");u.name="description",u.content="Admin dashboard for managing learning domains and platform insights.",document.head.appendChild(u)}const d=document.querySelector('link[rel="canonical"]');if(d)d.setAttribute("href",window.location.origin+"/admin/dashboard");else{const u=document.createElement("link");u.setAttribute("rel","canonical"),u.setAttribute("href",window.location.origin+"/admin/dashboard"),document.head.appendChild(u)}}const a=()=>{e("/admin/learning-domains")},o=c=>{e(`/admin/domain/${c}`)},l=c=>{e(`/admin/domain/${c}`)};return s.jsx(Ki,{className:"bg-dashboard-bg min-h-screen",children:s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-dashboard-primary mb-3",children:"Admin Dashboard"}),s.jsx("h2",{className:"text-xl font-semibold text-dashboard-secondary mb-4",children:"Platform Overview"}),s.jsx("p",{className:"text-dashboard-text-muted text-base leading-relaxed",children:"Get a high-level view of your educational platform's content and performance metrics."})]}),s.jsx(GQ,{stats:r})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-dashboard-secondary mb-4",children:"Learning Domains"}),s.jsx("p",{className:"text-dashboard-text-muted text-base leading-relaxed",children:"Manage your learning domains, view their statistics, and access detailed management tools."})]}),s.jsx(KQ,{domains:i,onCreateNew:a,onManageDomain:o,onViewAnalytics:l})]})]})})}function Rs({title:e,description:t,icon:n,count:r,comingSoon:i,highlighted:a=!1,onClick:o,colorScheme:l="purple"}){const d=(()=>{switch(l){case"blue":return{bg:"bg-[#A3D1FC]/20",icon:"text-[#0B5FAE]",stat:"text-[#0B5FAE]"};case"green":return{bg:"bg-[#22C55E]/10",icon:"text-[#22C55E]",stat:"text-[#22C55E]"};default:return{bg:"bg-[#110D59]/10",icon:"text-[#110D59]",stat:"text-[#110D59]"}}})();return s.jsxs(te,{className:Q("relative overflow-hidden h-full","bg-white rounded-lg","border border-[#E5E7EB]","shadow-sm hover:shadow-lg","transition-all duration-200","cursor-pointer group"),onClick:o,children:[a&&s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-[#110D59]"}),s.jsxs(le,{className:"p-6 pb-4 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("div",{className:Q("flex items-center justify-center w-10 h-10 rounded-full",d.bg),children:s.jsx(n,{className:Q("h-5 w-5",d.icon)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[i?s.jsx(ve,{className:"px-3 py-1 text-xs uppercase tracking-wider rounded-full bg-[#7E7BB3] text-white border-0",children:"Coming Soon"}):r!==void 0?s.jsx("div",{className:Q("text-2xl font-bold",d.stat),children:r}):null,s.jsx(no,{className:"h-5 w-5 text-[#7E7BB3] group-hover:text-[#110D59] transition-colors"})]})]}),s.jsx("div",{children:s.jsx(ue,{className:"text-lg font-semibold text-[#110D59] group-hover:text-[#0B5FAE] transition-colors",children:e})})]}),s.jsxs(re,{className:"p-6 pt-0 flex flex-col flex-1",children:[s.jsx(Me,{className:"text-sm text-[#55555F] leading-relaxed line-clamp-2 min-h-[2.5rem] flex-1",children:t}),!i&&s.jsx("div",{className:"mt-4",children:s.jsxs("button",{className:Q("w-full h-[51px] rounded-lg","bg-[#0E77D9] text-white","font-medium text-sm","flex items-center justify-center gap-2","transition-all duration-200","hover:bg-[#0E77D9]/90","active:bg-[#0E77D9]/85","focus:outline-none focus:ring-2 focus:ring-[#0E77D9] focus:ring-offset-2"),onClick:u=>{u.stopPropagation(),o==null||o()},children:[s.jsx(kn,{className:"h-4 w-4"}),"Manage"]})})]})]})}function YQ({domainName:e}){const t=Rt(),{domainId:n}=ti(),[r,i]=p.useState(!1),{domains:a}=Dn(),{uploadFiles:o,isUploading:l,uploadProgress:c}=vf(),d=a.find(m=>m.id===n),u={conceptsCount:74,goalsCount:28,tasksCount:15,strategiesCount:8},h=m=>{!n||!d||(console.log("AdminDomainPage - handleFilesSelected called with:",{domainId:n,domainName:d.name,filesCount:m.length}),o({files:m,domainId:n,domainName:d.name}))},f=()=>{i(!1)};return s.jsx("div",{className:"p-6 space-y-8",children:s.jsxs("div",{className:"mx-auto max-w-7xl",children:[s.jsx(Cs,{}),r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),s.jsxs("p",{className:"text-[#55555F] mt-2",children:["Choose the type of content you want to upload for ",e,"."]})]}),s.jsxs(U,{variant:"ghost",onClick:f,children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}),s.jsx(te,{children:s.jsx(re,{className:"pt-6",children:s.jsx(y0,{onFilesSelected:h,uploadProgress:c,isUploading:l,disabled:!n})})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-semibold mb-2 text-[#110D59]",children:e}),s.jsx("p",{className:"text-[#55555F]",children:"Manage all aspects of your learning domain from this control center"})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-[#110D59]",children:"Learning Setup & Content Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx(Rs,{title:"Learning Concepts",description:"Number of concepts in the domain; manage concepts and relationships.",icon:Pt,count:u.conceptsCount,colorScheme:"purple",onClick:()=>t(`/admin/domain/${n}/concepts`)}),s.jsx(Rs,{title:"Learning Goals",description:"Number of learning objectives; define and organize them.",icon:vn,count:u.goalsCount,colorScheme:"blue",onClick:()=>t(`/admin/domain/${n}/goals`)}),s.jsx(Rs,{title:"Exercises",description:"Create and manage practice activities.",icon:Zi,colorScheme:"blue",comingSoon:!0,onClick:()=>console.log("Exercises coming soon")}),s.jsx(Rs,{title:"Tasks",description:"Manage types of tasks used in this domain.",icon:dd,count:u.tasksCount,onClick:()=>console.log("Navigate to Tasks")}),s.jsx(Rs,{title:"Strategies",description:"Define learning strategies and methodologies for this domain.",icon:Op,count:u.strategiesCount,onClick:()=>console.log("Navigate to Strategies")})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-[#110D59]",children:"Intelligent Assistance & Teacher Tools"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx(Rs,{title:"Train the AI",description:"Train the AI (your digital twin) to support teaching and content creation.",icon:sh,onClick:()=>t(`/admin/domain/${n}/ai-guidance`)}),s.jsx(Rs,{title:"Upload Data",description:"Upload and manage learning materials, datasets, and resources for AI training and content delivery.",icon:En,onClick:()=>i(!0)})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-[#110D59]",children:"Motivation & Engagement"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(Rs,{title:"Gamification",description:"Add game elements to boost learning motivation.",icon:nC,comingSoon:!0,onClick:()=>console.log("Gamification coming soon")}),s.jsx(Rs,{title:"Motivation",description:"Tools to track and boost learner engagement.",icon:_y,comingSoon:!0,onClick:()=>console.log("Motivation tools coming soon")})]})]})]})]})})}function XQ(){const{domainId:e}=ti(),{domains:t}=Dn(),n=t.find(i=>i.id===(e||"")),r=(n==null?void 0:n.name)??e??"Domain";return s.jsx(YQ,{domainName:r})}const X1={free:{tier:"free",max_users:10,max_domains:1,max_storage_gb:1,features:["basic_features"]},basic:{tier:"basic",max_users:50,max_domains:5,max_storage_gb:10,features:["basic_features","email_support"]},premium:{tier:"premium",max_users:500,max_domains:20,max_storage_gb:100,features:["advanced_analytics","custom_branding","api_access","priority_support"]},enterprise:{tier:"enterprise",max_users:-1,max_domains:-1,max_storage_gb:-1,features:["all_features","dedicated_support","sla","custom_integrations"]}},_a=class _a{constructor(){}static getInstance(){return _a.instance||(_a.instance=new _a),_a.instance}async ensureTenantAdmin(){const t=await It.isTenantAdmin(),n=await It.hasPermission("tenants","update");if(!t&&!n)throw new Error("Not authorized to perform this operation")}async ensureCanManageUsers(){const t=await It.isTenantAdmin(),n=await It.hasPermission("users","create");if(!t&&!n)throw new Error("Not authorized to manage users")}async ensureCanManageDomains(){const t=await It.isTenantAdmin(),n=await It.hasPermission("domains","assign");if(!t&&!n)throw new Error("Not authorized to manage domains")}getCurrentTenantId(){const t=It.getCurrentTenantId();if(!t)throw new Error("No tenant context available");return t}async createTeacher(t){var r;if(await this.ensureCanManageUsers(),!t.email||!t.email.includes("@"))throw new Error("Invalid teacher data");if(!t.firstName||!t.lastName)throw new Error("Invalid teacher data");const n=this.getCurrentTenantId();try{const{data:i,error:a}=await L.from("profiles").insert({email:t.email,first_name:t.firstName,last_name:t.lastName}).select().single();if(a)throw a;const{data:o,error:l}=await L.from("roles").select("id").eq("name","teacher").single();if(l)throw new Error("Teacher role not found");const{error:c}=await L.from("user_tenants").upsert({user_id:i.user_id,tenant_id:n,role_id:o.id,status:"active",joined_at:new Date().toISOString()});if(c)throw c;return t.domains&&t.domains.length>0&&await this.assignTeacherToDomains(i.user_id,t.domains),await It.createAuditLog("teacher.create","users",i.user_id,{email:t.email,domains:t.domains}),{user_id:i.user_id,email:t.email,first_name:t.firstName,last_name:t.lastName,status:"active",domains:t.domains||[]}}catch(i){throw(r=i.message)!=null&&r.includes("Duplicate")?new Error("Duplicate email"):i}}async assignTeacherToDomains(t,n){await this.ensureCanManageDomains();const r=this.getCurrentTenantId(),{data:i,error:a}=await L.from("user_domains").select("domain_id").eq("user_id",t).eq("tenant_id",r);if(a)throw a;const o=(i==null?void 0:i.map(d=>d.domain_id))||[],l=n.filter(d=>!o.includes(d)),c=o.filter(d=>!n.includes(d));if(c.length>0){const{error:d}=await L.from("user_domains").delete().eq("user_id",t).in("domain_id",c);if(d)throw d}if(l.length>0){const d=l.map(h=>({user_id:t,domain_id:h,tenant_id:r})),{error:u}=await L.from("user_domains").insert(d);if(u)throw u}return await It.createAuditLog("teacher.assign_domains","users",t,{domains:n}),!0}async suspendTeacher(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{error:r}=await L.from("user_tenants").update({status:"suspended",updated_at:new Date().toISOString()}).eq("user_id",t).eq("tenant_id",n);if(r)throw r;return await It.createAuditLog("teacher.suspend","users",t,{status:"suspended"}),!0}async reactivateTeacher(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{error:r}=await L.from("user_tenants").update({status:"active",updated_at:new Date().toISOString()}).eq("user_id",t).eq("tenant_id",n);if(r)throw r;return await It.createAuditLog("teacher.reactivate","users",t,{status:"active"}),!0}async getTeachers(t){if(!await It.hasPermission("users","read"))throw new Error("Not authorized to view teachers");const i={p_tenant_id:this.getCurrentTenantId()};t!=null&&t.status&&(i.p_status=t.status),t!=null&&t.domainId&&(i.p_domain_id=t.domainId);const{data:a,error:o}=await L.rpc("get_tenant_teachers",i);if(o)throw o;return a||[]}async getTeacherStatistics(t){const n=this.getCurrentTenantId(),{data:r,error:i}=await L.rpc("get_teacher_statistics",{p_teacher_id:t,p_tenant_id:n});if(i)throw i;return r}async updateTenantSettings(t){if(!await It.isTenantAdmin())throw new Error("Not authorized to update tenant settings");const r=this.getCurrentTenantId();if(t.max_users||t.max_domains){const{data:o}=await L.from("tenants").select("subscription_tier").eq("id",r).single();if(o){const l=X1[o.subscription_tier];if(t.max_users&&l.max_users!==-1&&t.max_users>l.max_users)throw new Error("Exceeds subscription tier limits");if(t.max_domains&&l.max_domains!==-1&&t.max_domains>l.max_domains)throw new Error("Exceeds subscription tier limits")}}const{data:i,error:a}=await L.from("tenants").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(a)throw a;return await It.createAuditLog("tenant.update_settings","tenants",r,t),i}async getTenantSettings(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).single();if(r)throw r;return n}async getTenantUsageStatistics(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.rpc("get_tenant_usage_statistics",{p_tenant_id:t});if(r)throw r;return n}async getSubscriptionLimits(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.from("tenants").select("subscription_tier").eq("id",t).single();if(r)throw r;return X1[n.subscription_tier]}async enableDomainForTenant(t){await this.ensureCanManageDomains();const n=this.getCurrentTenantId(),r=await this.getTenantUsageStatistics();if(r.max_domains!==-1&&r.total_domains>=r.max_domains)throw new Error("Domain limit reached for tenant");const{data:i}=await L.from("tenant_domains").select("is_active").eq("tenant_id",n).eq("domain_id",t).single();if(i){if(!i.is_active){const{error:a}=await L.from("tenant_domains").update({is_active:!0,updated_at:new Date().toISOString()}).eq("tenant_id",n).eq("domain_id",t).select().single();if(a)throw a}}else{const{error:a}=await L.from("tenant_domains").insert({tenant_id:n,domain_id:t,is_active:!0,max_teachers:10,max_students:100}).select().single();if(a)throw a}return await It.createAuditLog("domain.enable","domains",t,{tenant_id:n,is_active:!0}),!0}async disableDomainForTenant(t){await this.ensureCanManageDomains();const n=this.getCurrentTenantId(),{error:r}=await L.from("tenant_domains").update({is_active:!1,updated_at:new Date().toISOString()}).eq("tenant_id",n).eq("domain_id",t).select().single();if(r)throw r;return await It.createAuditLog("domain.disable","domains",t,{tenant_id:n,is_active:!1}),!0}async getTenantDomains(t){const r={p_tenant_id:this.getCurrentTenantId()};t!=null&&t.activeOnly&&(r.p_active_only=!0);const{data:i,error:a}=await L.rpc("get_tenant_domains",r);if(a)throw a;return i||[]}async getDomainUsageStatistics(t){const n=this.getCurrentTenantId(),{data:r,error:i}=await L.rpc("get_domain_usage_statistics",{p_domain_id:t,p_tenant_id:n});if(i)throw i;return r}async sendTeacherInvitation(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{data:r}=await L.from("invitations").select("status").eq("email",t.email).eq("tenant_id",n).eq("status","pending").single();if(r)throw new Error("User already has a pending invitation");const i=new Date;i.setDate(i.getDate()+7);const{data:a,error:o}=await L.from("invitations").insert({email:t.email,tenant_id:n,role:"teacher",status:"pending",token:crypto.randomUUID(),expires_at:i.toISOString(),metadata:{first_name:t.firstName,last_name:t.lastName,domains:t.domains,message:t.message}}).select().single();if(o)throw o;const{error:l}=await L.rpc("send_invitation_email",{p_invitation_id:a.id});return l&&console.error("Failed to send invitation email:",l),await It.createAuditLog("invitation.send","invitations",a.id,{email:t.email,role:"teacher"}),a}async resendInvitation(t){await this.ensureCanManageUsers();const{data:n}=await L.from("invitations").select("status").eq("id",t).single();if(!n)throw new Error("Invitation not found");if(n.status==="accepted")throw new Error("Invitation has already been accepted");const r=new Date;r.setDate(r.getDate()+7);const{error:i}=await L.from("invitations").update({expires_at:r.toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;const{error:a}=await L.rpc("send_invitation_email",{p_invitation_id:t});return a&&console.error("Failed to resend invitation email:",a),await It.createAuditLog("invitation.resend","invitations",t,null),!0}async cancelInvitation(t){await this.ensureCanManageUsers();const{error:n}=await L.from("invitations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return await It.createAuditLog("invitation.cancel","invitations",t,{status:"cancelled"}),!0}async getPendingInvitations(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.from("invitations").select("*").eq("tenant_id",t).eq("status","pending").order("created_at",{ascending:!1});if(r)throw r;return n||[]}async getInvitationStatistics(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.rpc("get_invitation_statistics",{p_tenant_id:t});if(r)throw r;return n}async bulkSuspendTeachers(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{error:r}=await L.from("user_tenants").update({status:"suspended",updated_at:new Date().toISOString()}).eq("tenant_id",n).in("user_id",t);if(r)throw r;return await It.createAuditLog("teacher.bulk_suspend","users",null,{teacher_ids:t}),!0}async bulkAssignDomains(t){await this.ensureCanManageDomains();for(const n of t)await this.assignTeacherToDomains(n.teacherId,n.domains);return await It.createAuditLog("teacher.bulk_assign_domains","users",null,{assignments:t}),!0}};as(_a,"instance");let yv=_a;const qn=yv.getInstance();function UR({onClose:e,onSuccess:t}){const{toast:n}=rt(),[r,i]=p.useState({email:"",firstName:"",lastName:"",domains:[]}),[a,o]=p.useState({}),{data:l=[]}=mt({queryKey:["tenant-domains-active"],queryFn:()=>qn.getTenantDomains({activeOnly:!0})}),c=en({mutationFn:f=>qn.createTeacher(f),onSuccess:()=>{n({title:"Teacher Created",description:"The teacher account has been created successfully."}),t()},onError:f=>{n({title:"Error",description:f.message||"Failed to create teacher account.",variant:"destructive"})}}),d=()=>{const f={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(f.email="Invalid email address"):f.email="Email is required",r.firstName||(f.firstName="First name is required"),r.lastName||(f.lastName="Last name is required"),o(f),Object.keys(f).length===0},u=f=>{f.preventDefault(),d()&&c.mutate(r)},h=f=>{i(m=>({...m,domains:m.domains.includes(f)?m.domains.filter(x=>x!==f):[...m.domains,f]}))};return s.jsx(on,{open:!0,onOpenChange:e,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Create New Teacher"}),s.jsx(Qn,{children:"Add a new teacher to your organization. They will receive an invitation email."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"email",children:"Email Address"}),s.jsx(Te,{id:"email",type:"email",value:r.email,onChange:f=>i({...r,email:f.target.value}),placeholder:"teacher@example.com"}),a.email&&s.jsx("p",{className:"text-sm text-destructive",children:a.email})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"firstName",children:"First Name"}),s.jsx(Te,{id:"firstName",value:r.firstName,onChange:f=>i({...r,firstName:f.target.value}),placeholder:"John"}),a.firstName&&s.jsx("p",{className:"text-sm text-destructive",children:a.firstName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"lastName",children:"Last Name"}),s.jsx(Te,{id:"lastName",value:r.lastName,onChange:f=>i({...r,lastName:f.target.value}),placeholder:"Doe"}),a.lastName&&s.jsx("p",{className:"text-sm text-destructive",children:a.lastName})]})]}),l.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{children:"Assign to Domains"}),s.jsx("div",{className:"border rounded-md p-4 space-y-2 max-h-40 overflow-y-auto",children:l.map(f=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ss,{id:f.domain_id,checked:r.domains.includes(f.domain_id),onCheckedChange:()=>h(f.domain_id)}),s.jsx(xe,{htmlFor:f.domain_id,className:"text-sm font-normal cursor-pointer",children:f.domain_name})]},f.domain_id))})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(U,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),s.jsx(U,{type:"submit",disabled:c.isPending,children:c.isPending?"Creating...":"Create Teacher"})]})]})]})})}function JQ({onClose:e,onSuccess:t}){const{toast:n}=rt(),[r,i]=p.useState({email:"",firstName:"",lastName:"",domains:[],message:""}),[a,o]=p.useState({}),{data:l=[]}=mt({queryKey:["tenant-domains-active"],queryFn:()=>qn.getTenantDomains({activeOnly:!0})}),c=en({mutationFn:f=>qn.sendTeacherInvitation(f),onSuccess:()=>{n({title:"Invitation Sent",description:"The invitation has been sent successfully."}),t()},onError:f=>{n({title:"Error",description:f.message||"Failed to send invitation.",variant:"destructive"})}}),d=()=>{const f={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(f.email="Invalid email address"):f.email="Email is required",r.firstName||(f.firstName="First name is required"),r.lastName||(f.lastName="Last name is required"),o(f),Object.keys(f).length===0},u=f=>{f.preventDefault(),d()&&c.mutate(r)},h=f=>{i(m=>({...m,domains:m.domains.includes(f)?m.domains.filter(x=>x!==f):[...m.domains,f]}))};return s.jsx(on,{open:!0,onOpenChange:e,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Send Teacher Invitation"}),s.jsx(Qn,{children:"Invite a new teacher to join your organization. They will receive an email with instructions."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"email",children:"Email Address"}),s.jsx(Te,{id:"email",type:"email",value:r.email,onChange:f=>i({...r,email:f.target.value}),placeholder:"teacher@example.com"}),a.email&&s.jsx("p",{className:"text-sm text-destructive",children:a.email})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"firstName",children:"First Name"}),s.jsx(Te,{id:"firstName",value:r.firstName,onChange:f=>i({...r,firstName:f.target.value}),placeholder:"John"}),a.firstName&&s.jsx("p",{className:"text-sm text-destructive",children:a.firstName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"lastName",children:"Last Name"}),s.jsx(Te,{id:"lastName",value:r.lastName,onChange:f=>i({...r,lastName:f.target.value}),placeholder:"Doe"}),a.lastName&&s.jsx("p",{className:"text-sm text-destructive",children:a.lastName})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"message",children:"Personal Message (Optional)"}),s.jsx(Rr,{id:"message",value:r.message,onChange:f=>i({...r,message:f.target.value}),placeholder:"Welcome to our school! We're excited to have you join our team...",rows:3})]}),l.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{children:"Pre-assign Domains"}),s.jsx("div",{className:"border rounded-md p-4 space-y-2 max-h-40 overflow-y-auto",children:l.map(f=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ss,{id:`invite-${f.domain_id}`,checked:r.domains.includes(f.domain_id),onCheckedChange:()=>h(f.domain_id)}),s.jsx(xe,{htmlFor:`invite-${f.domain_id}`,className:"text-sm font-normal cursor-pointer",children:f.domain_name})]},f.domain_id))})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(U,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),s.jsx(U,{type:"submit",disabled:c.isPending,children:c.isPending?"Sending...":"Send Invitation"})]})]})]})})}function ZQ(){const{session:e,isTenantAdmin:t,hasPermission:n,loading:r}=Dr(),i=Rt(),a=In(),[o,l]=p.useState(!1),[c,d]=p.useState(!1),u=n("users","create"),h=n("domains","assign"),f=n("tenants","update"),{data:m,isLoading:x}=mt({queryKey:["tenant-settings"],queryFn:()=>qn.getTenantSettings(),enabled:!!e}),{data:g,isLoading:b,error:v,refetch:y}=mt({queryKey:["tenant-usage"],queryFn:()=>qn.getTenantUsageStatistics(),enabled:!!e}),{data:w=[],isLoading:k}=mt({queryKey:["tenant-teachers"],queryFn:()=>qn.getTeachers(),enabled:!!e&&u}),{data:S=[],isLoading:C}=mt({queryKey:["tenant-domains"],queryFn:()=>qn.getTenantDomains(),enabled:!!e&&h}),N=w.filter($=>$.status==="active").length,j=w.filter($=>$.status==="suspended").length,_=S.filter($=>$.is_active).length;S.filter($=>!$.is_active).length;const E=g&&g.max_users>0&&g.total_users/g.max_users>.9,A=g&&g.max_domains>0&&g.total_domains/g.max_domains>.9,R=()=>{a.invalidateQueries({queryKey:["tenant-usage"]}),a.invalidateQueries({queryKey:["tenant-teachers"]}),a.invalidateQueries({queryKey:["tenant-domains"]})};return r||x?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{"data-testid":"loading-spinner",className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):!t&&!u&&!h&&!f?s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Yo,{children:"Access Denied"}),s.jsx(Xn,{children:"You don't have permission to access the tenant administration dashboard."})]})}):v?s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Yo,{children:"Error"}),s.jsxs(Xn,{children:["Failed to load dashboard data. Please try again.",s.jsx(U,{onClick:()=>y(),variant:"outline",size:"sm",className:"ml-2",children:"Retry"})]})]})}):s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:(m==null?void 0:m.name)||"Tenant Administration"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's teachers, domains, and settings"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{variant:"secondary",className:"text-sm",children:m!=null&&m.subscription_tier?m.subscription_tier.charAt(0).toUpperCase()+m.subscription_tier.slice(1):"Free"}),s.jsx(U,{onClick:R,variant:"outline",size:"icon",children:s.jsx(Wn,{className:"h-4 w-4"})})]})]}),(E||A)&&s.jsxs(Yn,{children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Yo,{children:"Approaching Limits"}),s.jsxs(Xn,{children:[E&&s.jsxs("p",{children:["Approaching user limit (",g==null?void 0:g.total_users," / ",g==null?void 0:g.max_users,")"]}),A&&s.jsxs("p",{children:["Approaching domain limit (",g==null?void 0:g.total_domains," / ",g==null?void 0:g.max_domains,")"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(g==null?void 0:g.total_users)||0," / ",(g==null?void 0:g.max_users)||"∞"]}),(g==null?void 0:g.max_users)>0&&s.jsx($a,{value:g.total_users/g.max_users*100,className:"mt-2"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Domains"}),s.jsx(_l,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(g==null?void 0:g.total_domains)||0," / ",(g==null?void 0:g.max_domains)||"∞"]}),(g==null?void 0:g.max_domains)>0&&s.jsx($a,{value:g.total_domains/g.max_domains*100,className:"mt-2"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Storage"}),s.jsx(YS,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(g==null?void 0:g.storage_used_gb)||0," GB / ",(g==null?void 0:g.storage_limit_gb)||"∞"," GB"]}),(g==null?void 0:g.storage_limit_gb)>0&&s.jsx($a,{value:g.storage_used_gb/g.storage_limit_gb*100,className:"mt-2"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Active Teachers"}),s.jsx(KS,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:N}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j>0&&`${j} Suspended`})]})]})]}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Quick Actions"}),s.jsx(Me,{children:"Common administrative tasks"})]}),s.jsxs(re,{className:"flex flex-wrap gap-2",children:[u&&s.jsxs(U,{onClick:()=>l(!0),children:[s.jsx(zl,{className:"mr-2 h-4 w-4"}),"Add Teacher"]}),h&&s.jsxs(U,{variant:"outline",onClick:()=>i("/admin/domains"),children:[s.jsx(_l,{className:"mr-2 h-4 w-4"}),"Manage Domains"]}),u&&s.jsxs(U,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(Sl,{className:"mr-2 h-4 w-4"}),"Send Invitation"]}),f&&s.jsxs(U,{variant:"outline",onClick:()=>i("/admin/settings"),children:[s.jsx(kn,{className:"mr-2 h-4 w-4"}),"Settings"]})]})]}),s.jsxs(ri,{defaultValue:"teachers",className:"space-y-4",children:[s.jsxs(Ps,{className:"grid grid-cols-4 w-full",children:[s.jsx(et,{value:"teachers",children:"Teachers"}),s.jsx(et,{value:"domains",children:"Domains"}),f&&s.jsx(et,{value:"settings",children:"Settings"}),s.jsx(et,{value:"invitations",children:"Invitations"})]}),s.jsx(tt,{value:"teachers",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Teachers Overview"}),s.jsxs(Me,{children:[w.length," Total • ",N," Active • ",j," Suspended"]})]}),s.jsx(re,{children:k?s.jsxs("div",{className:"space-y-2",children:[s.jsx(it,{className:"h-12 w-full"}),s.jsx(it,{className:"h-12 w-full"})]}):w.length>0?s.jsxs("div",{className:"space-y-2",children:[w.slice(0,5).map($=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[$.first_name," ",$.last_name]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:$.email})]}),s.jsx(ve,{variant:$.status==="active"?"default":"secondary",children:$.status})]},$.user_id)),w.length>5&&s.jsx(U,{variant:"link",className:"w-full",onClick:()=>i("/admin/teachers"),children:"View All Teachers →"})]}):s.jsx("p",{className:"text-muted-foreground",children:"No teachers found"})})]})}),s.jsx(tt,{value:"domains",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Domain Overview"}),s.jsxs(Me,{children:[S.length," Total Domains • ",_," Active"]})]}),s.jsx(re,{children:s.jsx("div",{"data-testid":"domain-usage-chart",className:"h-64 flex items-center justify-center border rounded",children:s.jsx("p",{className:"text-muted-foreground",children:"Domain Usage Chart"})})})]})}),f&&s.jsx(tt,{value:"settings",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Tenant Settings"}),s.jsx(Me,{children:"Configure your organization settings"})]}),s.jsx(re,{children:s.jsx(U,{onClick:()=>i("/admin/settings"),children:"Open Settings →"})})]})}),s.jsx(tt,{value:"invitations",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Invitations"}),s.jsx(Me,{children:"Manage pending invitations"})]}),s.jsx(re,{children:s.jsx(U,{onClick:()=>i("/admin/invitations"),children:"Manage Invitations →"})})]})})]}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Recent Activity"}),s.jsx(Me,{children:"Latest actions in your organization"})]}),s.jsx(re,{children:s.jsx("div",{className:"space-y-2",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Activity feed will be displayed here"})})})]}),o&&s.jsx(UR,{onClose:()=>l(!1),onSuccess:()=>{l(!1),a.invalidateQueries({queryKey:["tenant-teachers"]})}}),c&&s.jsx(JQ,{onClose:()=>d(!1),onSuccess:()=>{d(!1)}})]})}function eY({teacher:e,onClose:t,onSuccess:n}){const{toast:r}=rt(),[i,a]=p.useState([]);p.useEffect(()=>{a(e.domains||[])},[e]);const{data:o=[],isLoading:l}=mt({queryKey:["tenant-domains-active"],queryFn:()=>qn.getTenantDomains({activeOnly:!0})}),c=en({mutationFn:()=>qn.assignTeacherToDomains(e.user_id,i),onSuccess:()=>{r({title:"Domains Updated",description:"Teacher domain assignments have been updated."}),n()},onError:h=>{r({title:"Error",description:h.message||"Failed to update domain assignments.",variant:"destructive"})}}),d=h=>{a(f=>f.includes(h)?f.filter(m=>m!==h):[...f,h])},u=()=>{c.mutate()};return s.jsx(on,{open:!0,onOpenChange:t,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Manage Domain Assignments"}),s.jsxs(Qn,{children:["Assign domains to ",e.first_name," ",e.last_name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{variant:"outline",children:e.email}),s.jsx(ve,{variant:e.status==="active"?"default":"secondary",children:e.status})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(bs,{className:"h-6 w-6 animate-spin"})}):o.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"No active domains available for assignment."}):s.jsx("div",{className:"border rounded-md p-4 space-y-2 max-h-60 overflow-y-auto",children:o.map(h=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ss,{id:`assign-${h.domain_id}`,checked:i.includes(h.domain_id),onCheckedChange:()=>d(h.domain_id)}),s.jsx(xe,{htmlFor:`assign-${h.domain_id}`,className:"text-sm font-normal cursor-pointer",children:h.domain_name})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[h.teacher_count," teachers"]}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:[h.student_count," students"]})]})]},h.domain_id))}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," domain(s) selected"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(U,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(U,{onClick:u,disabled:c.isPending||l,children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Assignments"})]})]})]})]})})}function tY(){const{toast:e}=rt(),t=In(),[n,r]=p.useState(""),[i,a]=p.useState("all"),[o,l]=p.useState([]),[c,d]=p.useState(!1),[u,h]=p.useState(null),{data:f=[],isLoading:m,error:x}=mt({queryKey:["teachers",i],queryFn:()=>qn.getTeachers(i!=="all"?{status:i}:void 0)}),g=en({mutationFn:C=>qn.suspendTeacher(C),onSuccess:()=>{e({title:"Teacher Suspended",description:"The teacher account has been suspended."}),t.invalidateQueries({queryKey:["teachers"]})},onError:C=>{e({title:"Error",description:C.message||"Failed to suspend teacher.",variant:"destructive"})}}),b=en({mutationFn:C=>qn.reactivateTeacher(C),onSuccess:()=>{e({title:"Teacher Reactivated",description:"The teacher account has been reactivated."}),t.invalidateQueries({queryKey:["teachers"]})},onError:C=>{e({title:"Error",description:C.message||"Failed to reactivate teacher.",variant:"destructive"})}}),v=en({mutationFn:C=>qn.bulkSuspendTeachers(C),onSuccess:()=>{e({title:"Teachers Suspended",description:`${o.length} teacher(s) have been suspended.`}),l([]),t.invalidateQueries({queryKey:["teachers"]})},onError:C=>{e({title:"Error",description:C.message||"Failed to suspend teachers.",variant:"destructive"})}}),y=f.filter(C=>{const N=n.toLowerCase();return C.email.toLowerCase().includes(N)||C.first_name.toLowerCase().includes(N)||C.last_name.toLowerCase().includes(N)}),w=C=>{l(C?y.map(N=>N.user_id):[])},k=(C,N)=>{l(N?[...o,C]:o.filter(j=>j!==C))},S=()=>{o.length>0&&v.mutate(o)};return x?s.jsx("div",{className:"p-6",children:s.jsx(te,{children:s.jsx(re,{className:"p-6",children:s.jsx("p",{className:"text-destructive",children:"Failed to load teachers. Please try again."})})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Teacher Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage teacher accounts and permissions"})]}),s.jsxs(U,{onClick:()=>d(!0),children:[s.jsx(zl,{className:"mr-2 h-4 w-4"}),"Add Teacher"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Total Teachers"}),s.jsx(KS,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(re,{children:s.jsx("div",{className:"text-2xl font-bold",children:f.length})})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Active"}),s.jsx(Zn,{className:"h-4 w-4 text-green-600"})]}),s.jsx(re,{children:s.jsx("div",{className:"text-2xl font-bold",children:f.filter(C=>C.status==="active").length})})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Suspended"}),s.jsx(Yg,{className:"h-4 w-4 text-red-600"})]}),s.jsx(re,{children:s.jsx("div",{className:"text-2xl font-bold",children:f.filter(C=>C.status==="suspended").length})})]})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Kn,{className:"h-5 w-5 text-muted-foreground"}),s.jsx(Te,{placeholder:"Search teachers...",value:n,onChange:C=>r(C.target.value),className:"w-64"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(dt,{value:i,onValueChange:C=>a(C),children:[s.jsx(ot,{className:"w-40",children:s.jsx(ut,{placeholder:"Filter by status"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Status"}),s.jsx(me,{value:"active",children:"Active"}),s.jsx(me,{value:"suspended",children:"Suspended"}),s.jsx(me,{value:"invited",children:"Invited"})]})]}),o.length>0&&s.jsxs(U,{variant:"destructive",onClick:S,disabled:v.isPending,children:["Suspend Selected (",o.length,")"]})]})]})}),s.jsx(re,{children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{className:"w-12",children:s.jsx(Ss,{checked:o.length===y.length&&y.length>0,onCheckedChange:w})}),s.jsx(Re,{children:"Name"}),s.jsx(Re,{children:"Email"}),s.jsx(Re,{children:"Status"}),s.jsx(Re,{children:"Domains"}),s.jsx(Re,{className:"text-right",children:"Actions"})]})}),s.jsx(ai,{children:m?s.jsx(wt,{children:s.jsx(Ee,{colSpan:6,className:"text-center py-8",children:"Loading teachers..."})}):y.length===0?s.jsx(wt,{children:s.jsx(Ee,{colSpan:6,className:"text-center py-8",children:"No teachers found"})}):y.map(C=>{var N;return s.jsxs(wt,{children:[s.jsx(Ee,{children:s.jsx(Ss,{checked:o.includes(C.user_id),onCheckedChange:j=>k(C.user_id,j)})}),s.jsxs(Ee,{className:"font-medium",children:[C.first_name," ",C.last_name]}),s.jsx(Ee,{children:C.email}),s.jsx(Ee,{children:s.jsx(ve,{variant:C.status==="active"?"default":C.status==="suspended"?"destructive":"secondary",children:C.status})}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(_l,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:((N=C.domains)==null?void 0:N.length)||0})]})}),s.jsx(Ee,{className:"text-right",children:s.jsxs(Rf,{children:[s.jsx(If,{asChild:!0,children:s.jsx(U,{variant:"ghost",size:"sm",children:s.jsx(yO,{className:"h-4 w-4"})})}),s.jsxs(lu,{align:"end",children:[s.jsx(cw,{children:"Actions"}),s.jsx(dw,{}),s.jsxs(lr,{onClick:()=>h(C),children:[s.jsx(_l,{className:"mr-2 h-4 w-4"}),"Manage Domains"]}),C.status==="active"?s.jsxs(lr,{onClick:()=>g.mutate(C.user_id),className:"text-destructive",children:[s.jsx(Yg,{className:"mr-2 h-4 w-4"}),"Suspend"]}):s.jsxs(lr,{onClick:()=>b.mutate(C.user_id),className:"text-green-600",children:[s.jsx(Zn,{className:"mr-2 h-4 w-4"}),"Reactivate"]})]})]})})]},C.user_id)})})]})})]}),c&&s.jsx(UR,{onClose:()=>d(!1),onSuccess:()=>{d(!1),t.invalidateQueries({queryKey:["teachers"]})}}),u&&s.jsx(eY,{teacher:u,onClose:()=>h(null),onSuccess:()=>{h(null),t.invalidateQueries({queryKey:["teachers"]})}})]})}function gc(){Rt();const{authorized:e,loading:t}=s6({requiredRole:"tenant_admin",redirectTo:"/unauthorized"});return t?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(bs,{className:"h-8 w-8 animate-spin"})}):e?s.jsx("div",{className:"container mx-auto py-6",children:s.jsxs(oh,{children:[s.jsx(ze,{index:!0,element:s.jsx(ZQ,{})}),s.jsx(ze,{path:"teachers",element:s.jsx(nY,{})}),s.jsx(ze,{path:"domains",element:s.jsx(rY,{})}),s.jsx(ze,{path:"settings",element:s.jsx(sY,{})}),s.jsx(ze,{path:"invitations",element:s.jsx(iY,{})}),s.jsx(ze,{path:"*",element:s.jsx(gd,{to:"/admin",replace:!0})})]})}):s.jsx(gd,{to:"/unauthorized",replace:!0})}function nY(){return s.jsx("div",{className:"space-y-6",children:s.jsx(tY,{})})}function rY(){const{hasPermission:e}=Dr();return e("domains","assign")?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Domain Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Domain management interface will be implemented here."})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to manage domains."})})}function sY(){const{hasPermission:e}=Dr();return e("tenants","update")?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Tenant Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Tenant settings interface will be implemented here."})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to manage tenant settings."})})}function iY(){const{hasPermission:e}=Dr();return e("users","invite")?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Invitations"}),s.jsx("p",{className:"text-muted-foreground",children:"Invitations management interface will be implemented here."})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to manage invitations."})})}const Sa=class Sa{constructor(){as(this,"cache",new Map);as(this,"CACHE_TTL",5*60*1e3);as(this,"auditLoggingEnabled",!1);as(this,"currentTenantId",null)}static getInstance(){return Sa.instance||(Sa.instance=new Sa),Sa.instance}async checkAccess(t,n){var r,i;try{const{data:{session:a},error:o}=await L.auth.getSession();if(o||!(a!=null&&a.user))return!1;const l=a.user.id,c=a.user.email;if(((r=a.user.app_metadata)==null?void 0:r.is_platform_admin)===!0||c==="admin@gemeos.ai")return this.auditLoggingEnabled&&await this.createAuditLog({action:"permission_check",resource_type:t,resource_action:n,user_id:l,result:!0}),!0;const u=`${l}:${t}:${n}`,h=this.cache.get(u);if(h&&Date.now()-h.timestamp<this.CACHE_TTL)return this.auditLoggingEnabled&&await this.createAuditLog({action:"permission_check",resource_type:t,resource_action:n,user_id:l,result:h.value}),h.value;const f=(i=a.user.app_metadata)==null?void 0:i.role;if(!f)return!1;const{data:m,error:x}=await L.from("role_permissions").select("*, permission:permissions!inner(*)").eq("permission.resource",t).eq("permission.action",n).eq("role_id",f).maybeSingle(),g=!!m&&!x;return this.cache.set(u,{value:g,timestamp:Date.now()}),this.auditLoggingEnabled&&await this.createAuditLog({action:"permission_check",resource_type:t,resource_action:n,user_id:l,result:g}),g}catch(a){return console.error("Error checking access:",a),!1}}async checkAccessWithDetails(t,n){var r,i,a;try{if(await this.checkAccess(t,n))return{hasAccess:!0};const{data:{session:l}}=await L.auth.getSession(),c=((i=(r=l==null?void 0:l.user)==null?void 0:r.app_metadata)==null?void 0:i.role)||"unknown",{data:d}=await L.from("role_permissions").select("role:roles!inner(name)").eq("permission.resource",t).eq("permission.action",n).limit(1).maybeSingle();return{hasAccess:!1,reason:`User with role '${c}' has insufficient permissions for ${n} on ${t}`,requiredRole:(a=d==null?void 0:d.role)==null?void 0:a.name}}catch{return{hasAccess:!1,reason:"Error checking permissions"}}}async canAccessRoute(t){var n,r;try{const{data:{session:i},error:a}=await L.auth.getSession();if(a||!(i!=null&&i.user))return!1;if(((n=i.user.app_metadata)==null?void 0:n.is_platform_admin)===!0||i.user.email==="admin@gemeos.ai")return!0;const l=(r=i.user.app_metadata)==null?void 0:r.role;if(!l)return!1;let{data:c}=await L.from("pages").select("id, path").eq("path",t).maybeSingle();if(!c){const{data:u}=await L.from("pages").select("id, path"),h=u==null?void 0:u.find(f=>{if(!f.path.includes(":"))return!1;const m=f.path.replace(/:[\w-]+/g,"[^/]+");return new RegExp(`^${m}$`).test(t)});h&&(c=h)}if(!c)return!1;const{data:d}=await L.from("page_permissions").select("*").eq("page_id",c.id).eq("role",l).eq("is_active",!0).maybeSingle();return!!d}catch(i){return console.error("Error checking route access:",i),!1}}async checkMultiplePermissions(t){var r,i;const n={};try{const{data:{session:a},error:o}=await L.auth.getSession();if(o||!(a!=null&&a.user))return t.forEach(h=>{n[`${h.resource}:${h.action}`]=!1}),n;if(((r=a.user.app_metadata)==null?void 0:r.is_platform_admin)===!0||a.user.email==="admin@gemeos.ai")return t.forEach(h=>{n[`${h.resource}:${h.action}`]=!0}),n;const c=(i=a.user.app_metadata)==null?void 0:i.role;if(!c)return t.forEach(h=>{n[`${h.resource}:${h.action}`]=!1}),n;const d=t.map(h=>`(resource.eq.${h.resource},action.eq.${h.action})`),{data:u}=await L.from("role_permissions").select("permission:permissions!inner(resource, action)").eq("role_id",c).in("permission.resource",t.map(h=>h.resource));return t.forEach(h=>{const f=u==null?void 0:u.some(m=>{var x,g;return((x=m.permission)==null?void 0:x.resource)===h.resource&&((g=m.permission)==null?void 0:g.action)===h.action});n[`${h.resource}:${h.action}`]=!!f}),n}catch(a){return console.error("Error checking multiple permissions:",a),t.forEach(o=>{n[`${o.resource}:${o.action}`]=!1}),n}}async updatePermission(t,n,r,i){try{await this.createAuditLog({action:"permission_update",resource_type:"permission",changes:{user_id:t,resource:n,action:r,granted:i}}),i?await L.from("user_permissions").upsert({user_id:t,resource:n,action:r,created_at:new Date().toISOString()}):await L.from("user_permissions").delete().eq("user_id",t).eq("resource",n).eq("action",r),this.clearUserCache(t)}catch(a){throw console.error("Error updating permission:",a),a}}async bulkUpdatePermissions(t){try{for(const n of t)await this.updatePermission(n.user_id,n.resource,n.action,n.granted)}catch(n){throw console.error("Error in bulk permission update:",n),n}}async switchTenant(t){this.currentTenantId=t,this.cache.clear(),localStorage.setItem("current_tenant_id",t)}clearUserCache(t){const n=[];this.cache.forEach((r,i)=>{i.startsWith(`${t}:`)&&n.push(i)}),n.forEach(r=>this.cache.delete(r))}clearCache(){this.cache.clear()}getCacheSize(){return this.cache.size}enableAuditLogging(t){this.auditLoggingEnabled=t}async createAuditLog(t){var n;try{const{data:{session:r}}=await L.auth.getSession();await L.from("audit_logs").insert({tenant_id:this.currentTenantId,user_id:t.user_id||((n=r==null?void 0:r.user)==null?void 0:n.id),action:t.action,resource_type:t.resource_type,resource_id:t.resource_id,changes:{...t.changes,resource_action:t.resource_action,result:t.result},created_at:new Date().toISOString()})}catch(r){console.error("Error creating audit log:",r)}}async getUserAccessibleRoutes(){var t,n;try{const{data:{session:r},error:i}=await L.auth.getSession();if(i||!(r!=null&&r.user))return[];if(((t=r.user.app_metadata)==null?void 0:t.is_platform_admin)===!0||r.user.email==="admin@gemeos.ai"){const{data:c}=await L.from("pages").select("path");return(c==null?void 0:c.map(d=>d.path))||[]}const o=(n=r.user.app_metadata)==null?void 0:n.role;if(!o)return[];const{data:l}=await L.from("page_permissions").select("page:pages!inner(path)").eq("role",o).eq("is_active",!0);return(l==null?void 0:l.map(c=>c.page.path))||[]}catch(r){return console.error("Error getting accessible routes:",r),[]}}};as(Sa,"instance");let wv=Sa;const bo=wv.getInstance();class aY{async createTenant(t){if(!/^[a-z0-9-]+$/.test(t.slug))throw new Error("Slug must contain only lowercase letters, numbers, and hyphens");const{data:n}=await L.from("tenants").select("id").eq("slug",t.slug).single();if(n)throw new Error("Tenant slug is already taken");const{data:r,error:i}=await L.from("tenants").insert({name:t.name,slug:t.slug,description:t.description||null,subscription_tier:t.subscription_tier||"free",max_users:t.max_users||10,max_domains:t.max_domains||2,status:t.status||"active",settings:t.settings||{}}).select().single();if(i)throw console.error("Error creating tenant:",i),new Error(`Failed to create tenant: ${i.message}`);return r}async getTenants(t={}){let n=L.from("tenants").select("*").order("created_at",{ascending:!1});t.status&&(n=n.eq("status",t.status)),t.subscription_tier&&(n=n.eq("subscription_tier",t.subscription_tier)),t.search&&(n=n.or(`name.ilike.%${t.search}%, slug.ilike.%${t.search}%`));const{data:r,error:i}=await n;if(i)throw console.error("Error fetching tenants:",i),new Error(`Failed to fetch tenants: ${i.message}`);return r||[]}async getTenant(t){const{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching tenant:",r),new Error(`Failed to fetch tenant: ${r.message}`)}return n}async getTenantBySlug(t){const{data:n,error:r}=await L.from("tenants").select("*").eq("slug",t).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching tenant by slug:",r),new Error(`Failed to fetch tenant: ${r.message}`)}return n}async updateTenant(t,n){const{data:r,error:i}=await L.from("tenants").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw console.error("Error updating tenant:",i),new Error(`Failed to update tenant: ${i.message}`);return r}async deleteTenant(t){const{error:n}=await L.from("tenants").update({status:"inactive",updated_at:new Date().toISOString()}).eq("id",t);if(n)throw console.error("Error deleting tenant:",n),new Error(`Failed to delete tenant: ${n.message}`)}async getTenantStats(t){const{count:n}=await L.from("user_tenants").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","active"),{count:r}=await L.from("tenant_domains").select("*",{count:"exact",head:!0}).eq("tenant_id",t);return{active_users:n||0,assigned_domains:r||0}}async isSlugAvailable(t){const{data:n}=await L.from("tenants").select("id").eq("slug",t).single();return!n}generateSlug(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}}const Vc=new aY;function oY({open:e,onClose:t,onSuccess:n}){const{toast:r}=rt(),i=In(),[a,o]=p.useState({name:"",slug:"",description:"",subscription_tier:"free",max_users:10,max_domains:2,status:"active",settings:{}}),[l,c]=p.useState({checking:!1,available:null}),[d,u]=p.useState({});p.useEffect(()=>{if(a.name&&!a.slug){const g=Vc.generateSlug(a.name);o(b=>({...b,slug:g}))}},[a.name,a.slug]),p.useEffect(()=>{const b=setTimeout(async()=>{if(!a.slug||a.slug.length<3){c({checking:!1,available:null});return}c({checking:!0,available:null});try{const v=await Vc.isSlugAvailable(a.slug);c({checking:!1,available:v})}catch{c({checking:!1,available:null})}},500);return()=>clearTimeout(b)},[a.slug]);const h=en({mutationFn:g=>Vc.createTenant(g),onSuccess:()=>{r({title:"Tenant Created",description:"The tenant has been created successfully."}),i.invalidateQueries({queryKey:["tenants"]}),n(),x()},onError:g=>{r({title:"Error",description:g.message||"Failed to create tenant.",variant:"destructive"})}}),f=()=>{var b,v;const g={};return(b=a.name)!=null&&b.trim()||(g.name="Company name is required"),(v=a.slug)!=null&&v.trim()?/^[a-z0-9-]+$/.test(a.slug)?l.available===!1&&(g.slug="This slug is already taken"):g.slug="Slug must contain only lowercase letters, numbers, and hyphens":g.slug="Slug is required",a.max_users&&a.max_users<1&&(g.max_users="Max users must be at least 1"),a.max_domains&&a.max_domains<1&&(g.max_domains="Max domains must be at least 1"),u(g),Object.keys(g).length===0},m=g=>{g.preventDefault(),f()&&l.available!==!1&&h.mutate(a)},x=()=>{o({name:"",slug:"",description:"",subscription_tier:"free",max_users:10,max_domains:2,status:"active",settings:{}}),u({}),c({checking:!1,available:null}),t()};return s.jsx(on,{open:e,onOpenChange:x,children:s.jsxs(tn,{className:"sm:max-w-[600px]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Create New Tenant"}),s.jsx(Qn,{children:"Create a new company tenant that can have users and learning domains assigned to it."})]}),s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"name",children:"Company Name *"}),s.jsx(Te,{id:"name",value:a.name,onChange:g=>o({...a,name:g.target.value}),placeholder:"e.g., Acme Corporation"}),d.name&&s.jsx("p",{className:"text-sm text-destructive",children:d.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"slug",children:"Slug (URL identifier) *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Te,{id:"slug",value:a.slug,onChange:g=>o({...a,slug:g.target.value.toLowerCase()}),placeholder:"acme-corp",className:"pr-10"}),s.jsxs("div",{className:"absolute right-3 top-3",children:[l.checking&&s.jsx(bs,{className:"h-4 w-4 animate-spin text-muted-foreground"}),!l.checking&&l.available===!0&&s.jsx(Zn,{className:"h-4 w-4 text-green-600"}),!l.checking&&l.available===!1&&s.jsx(Zt,{className:"h-4 w-4 text-destructive"})]})]}),a.slug&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["URL: https://yourdomain.com/",a.slug]}),d.slug&&s.jsx("p",{className:"text-sm text-destructive",children:d.slug}),l.available===!1&&s.jsx("p",{className:"text-sm text-destructive",children:"This slug is already taken"}),l.available===!0&&s.jsx("p",{className:"text-sm text-green-600",children:"Slug is available"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"description",children:"Description"}),s.jsx(Rr,{id:"description",value:a.description,onChange:g=>o({...a,description:g.target.value}),placeholder:"Brief description of the company or organization...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"subscription_tier",children:"Subscription Tier"}),s.jsxs(dt,{value:a.subscription_tier,onValueChange:g=>o({...a,subscription_tier:g}),children:[s.jsx(ot,{children:s.jsx(ut,{})}),s.jsxs(lt,{children:[s.jsx(me,{value:"free",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{variant:"secondary",children:"Free"}),s.jsx("span",{children:"Basic features"})]})}),s.jsx(me,{value:"basic",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{variant:"outline",children:"Basic"}),s.jsx("span",{children:"Standard features"})]})}),s.jsx(me,{value:"premium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{variant:"default",children:"Premium"}),s.jsx("span",{children:"Advanced features"})]})}),s.jsx(me,{value:"enterprise",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"bg-purple-600",children:"Enterprise"}),s.jsx("span",{children:"All features"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"status",children:"Status"}),s.jsxs(dt,{value:a.status,onValueChange:g=>o({...a,status:g}),children:[s.jsx(ot,{children:s.jsx(ut,{})}),s.jsxs(lt,{children:[s.jsx(me,{value:"active",children:"Active"}),s.jsx(me,{value:"trial",children:"Trial"}),s.jsx(me,{value:"suspended",children:"Suspended"}),s.jsx(me,{value:"inactive",children:"Inactive"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"max_users",children:"Max Users"}),s.jsx(Te,{id:"max_users",type:"number",min:"1",value:a.max_users,onChange:g=>o({...a,max_users:parseInt(g.target.value)||10})}),d.max_users&&s.jsx("p",{className:"text-sm text-destructive",children:d.max_users})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"max_domains",children:"Max Learning Domains"}),s.jsx(Te,{id:"max_domains",type:"number",min:"1",value:a.max_domains,onChange:g=>o({...a,max_domains:parseInt(g.target.value)||2})}),d.max_domains&&s.jsx("p",{className:"text-sm text-destructive",children:d.max_domains})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(U,{type:"button",variant:"outline",onClick:x,children:"Cancel"}),s.jsx(U,{type:"submit",disabled:h.isPending||l.checking||l.available===!1,children:h.isPending?"Creating...":"Create Tenant"})]})]})]})})}function lY({onEditTenant:e,onViewTenant:t,onAssignDomains:n,onInviteTenantAdmin:r}){const{toast:i}=rt(),a=In(),[o,l]=p.useState({}),[c,d]=p.useState(""),{data:u=[],isLoading:h,error:f,refetch:m}=mt({queryKey:["tenants",o],queryFn:()=>Vc.getTenants(o)}),x=en({mutationFn:S=>Vc.deleteTenant(S),onSuccess:()=>{i({title:"Tenant Deleted",description:"The tenant has been deactivated successfully."}),a.invalidateQueries({queryKey:["tenants"]})},onError:S=>{i({title:"Error",description:S.message||"Failed to delete tenant.",variant:"destructive"})}}),g=u.filter(S=>!c||S.name.toLowerCase().includes(c.toLowerCase())||S.slug.toLowerCase().includes(c.toLowerCase())),b=S=>{d(S)},v=(S,C)=>{l(N=>({...N,[S]:C==="all"?void 0:C}))},y=S=>{const C={active:"default",trial:"secondary",suspended:"destructive",inactive:"outline"};return s.jsx(ve,{variant:C[S],children:S})},w=S=>{const C={free:"bg-gray-100 text-gray-800",basic:"bg-blue-100 text-blue-800",premium:"bg-purple-100 text-purple-800",enterprise:"bg-gold-100 text-gold-800"};return s.jsx(ve,{className:C[S]||"bg-gray-100 text-gray-800",children:S})},k=S=>{confirm(`Are you sure you want to deactivate "${S.name}"? This action will set the tenant status to inactive.`)&&x.mutate(S.id)};return f?s.jsxs("div",{className:"text-center py-8 text-destructive",children:[s.jsxs("p",{children:["Error loading tenants: ",f.message]}),s.jsxs(U,{onClick:()=>m(),variant:"outline",className:"mt-2",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Kn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Te,{placeholder:"Search tenants...",value:c,onChange:S=>b(S.target.value),className:"pl-10"})]}),s.jsxs(dt,{value:o.status||"all",onValueChange:S=>v("status",S),children:[s.jsx(ot,{className:"w-32",children:s.jsx(ut,{placeholder:"Status"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Status"}),s.jsx(me,{value:"active",children:"Active"}),s.jsx(me,{value:"trial",children:"Trial"}),s.jsx(me,{value:"suspended",children:"Suspended"}),s.jsx(me,{value:"inactive",children:"Inactive"})]})]}),s.jsxs(dt,{value:o.subscription_tier||"all",onValueChange:S=>v("subscription_tier",S),children:[s.jsx(ot,{className:"w-36",children:s.jsx(ut,{placeholder:"Tier"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Tiers"}),s.jsx(me,{value:"free",children:"Free"}),s.jsx(me,{value:"basic",children:"Basic"}),s.jsx(me,{value:"premium",children:"Premium"}),s.jsx(me,{value:"enterprise",children:"Enterprise"})]})]}),s.jsx(U,{onClick:()=>m(),variant:"outline",size:"icon",children:s.jsx(Wn,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{children:"Company"}),s.jsx(Re,{children:"Status"}),s.jsx(Re,{children:"Subscription"}),s.jsx(Re,{children:"Users"}),s.jsx(Re,{children:"Domains"}),s.jsx(Re,{children:"Created"}),s.jsx(Re,{className:"text-right",children:"Actions"})]})}),s.jsx(ai,{children:h?s.jsx(wt,{children:s.jsx(Ee,{colSpan:7,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(Wn,{className:"h-4 w-4 animate-spin mr-2"}),"Loading tenants..."]})})}):g.length===0?s.jsx(wt,{children:s.jsxs(Ee,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ji,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No tenants found"}),c&&s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})}):g.map(S=>s.jsxs(wt,{children:[s.jsx(Ee,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:S.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:S.slug})]})}),s.jsx(Ee,{children:y(S.status)}),s.jsx(Ee,{children:w(S.subscription_tier)}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:["0/",S.max_users]})]})}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:["0/",S.max_domains]})]})}),s.jsx(Ee,{className:"text-sm text-muted-foreground",children:new Date(S.created_at).toLocaleDateString()}),s.jsx(Ee,{className:"text-right",children:s.jsxs(Rf,{children:[s.jsx(If,{asChild:!0,children:s.jsx(U,{variant:"ghost",size:"icon",children:s.jsx(JS,{className:"h-4 w-4"})})}),s.jsxs(lu,{align:"end",children:[t&&s.jsxs(lr,{onClick:()=>t(S),children:[s.jsx(ws,{className:"h-4 w-4 mr-2"}),"View Details"]}),r&&s.jsxs(lr,{onClick:()=>r(S),children:[s.jsx(zl,{className:"h-4 w-4 mr-2"}),"Invite Admin"]}),n&&s.jsxs(lr,{onClick:()=>n(S),children:[s.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Assign Domains"]}),e&&s.jsxs(lr,{onClick:()=>e(S),children:[s.jsx(Lp,{className:"h-4 w-4 mr-2"}),"Edit Tenant"]}),s.jsxs(lr,{onClick:()=>k(S),className:"text-destructive",children:[s.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},S.id))})]})}),g.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",g.length," of ",u.length," tenants"]})]})}class cY{async getAllDomains(){const{data:t,error:n}=await L.from("domains").select("*").order("name");if(n)throw console.error("Error fetching domains:",n),new Error(`Failed to fetch domains: ${n.message}`);return t||[]}async getTenantDomains(t){const{data:n,error:r}=await L.from("tenant_domains").select(`
        *,
        domain:domains(*)
      `).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching tenant domains:",r),new Error(`Failed to fetch tenant domains: ${r.message}`);return n||[]}async getAllTenantDomainAssignments(){const{data:t,error:n}=await L.from("tenant_domains").select(`
        *,
        domain:domains(*),
        tenant:tenants(name)
      `).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching tenant domain assignments:",n),new Error(`Failed to fetch assignments: ${n.message}`);return(t||[]).map(r=>{var i;return{...r,tenant_name:((i=r.tenant)==null?void 0:i.name)||"Unknown Tenant"}})}async assignDomainToTenant(t){const{data:n}=await L.from("tenant_domains").select("id").eq("tenant_id",t.tenant_id).eq("domain_id",t.domain_id).single();if(n)throw new Error("Domain is already assigned to this tenant");const{data:r,error:i}=await L.from("tenant_domains").insert({tenant_id:t.tenant_id,domain_id:t.domain_id,is_active:t.is_active??!0,max_teachers:t.max_teachers??5,max_students:t.max_students??100}).select(`
        *,
        domain:domains(*)
      `).single();if(i)throw console.error("Error assigning domain to tenant:",i),new Error(`Failed to assign domain: ${i.message}`);return r}async updateTenantDomainAssignment(t,n){const{data:r,error:i}=await L.from("tenant_domains").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        domain:domains(*)
      `).single();if(i)throw console.error("Error updating tenant domain assignment:",i),new Error(`Failed to update assignment: ${i.message}`);return r}async removeDomainFromTenant(t){const{error:n}=await L.from("tenant_domains").delete().eq("id",t);if(n)throw console.error("Error removing domain assignment:",n),new Error(`Failed to remove domain assignment: ${n.message}`)}async bulkAssignDomainsToTenant(t,n,r={}){const{data:i}=await L.from("tenant_domains").select("domain_id").eq("tenant_id",t).in("domain_id",n),a=(i==null?void 0:i.map(u=>u.domain_id))||[],o=n.filter(u=>!a.includes(u));if(o.length===0)throw new Error("All selected domains are already assigned to this tenant");const l=o.map(u=>({tenant_id:t,domain_id:u,is_active:!0,max_teachers:r.max_teachers??5,max_students:r.max_students??100})),{data:c,error:d}=await L.from("tenant_domains").insert(l).select(`
        *,
        domain:domains(*)
      `);if(d)throw console.error("Error bulk assigning domains:",d),new Error(`Failed to assign domains: ${d.message}`);return c||[]}async getUnassignedDomainsForTenant(t){const n=await this.getAllDomains(),i=(await this.getTenantDomains(t)).map(a=>a.domain_id);return n.filter(a=>!i.includes(a.id))}async getDomainAssignmentStats(){const{count:t}=await L.from("tenant_domains").select("*",{count:"exact",head:!0}),{count:n}=await L.from("tenant_domains").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:r}=await L.from("domains").select("*",{count:"exact",head:!0}),{data:i}=await L.from("tenant_domains").select("tenant_id").distinct();return{total_assignments:t||0,active_assignments:n||0,total_domains:r||0,tenants_with_assignments:(i==null?void 0:i.length)||0}}}const Hc=new cY,J1=e=>{const n=e&&{music:Mp,calculator:gO,globe:_l,palette:EO,"book-open":Pt}[e]||Pt;return s.jsx(n,{className:"h-5 w-5"})};function dY({tenant:e,open:t,onClose:n,onSuccess:r}){const{toast:i}=rt(),a=In(),[o,l]=p.useState([]),[c,d]=p.useState(""),[u,h]=p.useState({max_teachers:5,max_students:100}),{data:f=[],isLoading:m}=mt({queryKey:["domains"],queryFn:()=>Hc.getAllDomains()}),{data:x=[],isLoading:g}=mt({queryKey:["tenant-domains",e==null?void 0:e.id],queryFn:()=>e!=null&&e.id?Hc.getTenantDomains(e.id):Promise.resolve([]),enabled:!!(e!=null&&e.id)}),b=x.map(N=>N.domain_id),v=f.filter(N=>!b.includes(N.id)&&(N.name.toLowerCase().includes(c.toLowerCase())||N.description.toLowerCase().includes(c.toLowerCase()))),y=en({mutationFn:N=>Hc.bulkAssignDomainsToTenant(N.tenantId,N.domainIds,N.settings),onSuccess:N=>{i({title:"Domains Assigned",description:`Successfully assigned ${N.length} domain(s) to ${e==null?void 0:e.name}.`}),a.invalidateQueries({queryKey:["tenant-domains"]}),a.invalidateQueries({queryKey:["tenants"]}),r(),S()},onError:N=>{i({title:"Assignment Failed",description:N.message||"Failed to assign domains.",variant:"destructive"})}}),w=N=>{l(j=>j.includes(N)?j.filter(_=>_!==N):[...j,N])},k=()=>{!e||o.length===0||y.mutate({tenantId:e.id,domainIds:o,settings:u})},S=()=>{l([]),d(""),h({max_teachers:5,max_students:100}),n()},C=m||g;return s.jsx(on,{open:t,onOpenChange:S,children:s.jsxs(tn,{className:"sm:max-w-[700px] max-h-[90vh]",children:[s.jsxs(nn,{children:[s.jsx(rn,{children:"Assign Learning Domains"}),s.jsxs(Qn,{children:["Assign learning domains to ",s.jsx("strong",{children:e==null?void 0:e.name}),". Tenant admins will only be able to access and manage users within these assigned domains."]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Current Assignments"}),s.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-muted/50 rounded-lg min-h-[60px]",children:C?s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(bs,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{className:"text-sm",children:"Loading current assignments..."})]}):x.length===0?s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"No domains currently assigned"})]}):x.map(N=>{var j;return s.jsxs(ve,{variant:"secondary",className:"flex items-center gap-2",children:[N.domain&&J1(N.domain.icon_name),((j=N.domain)==null?void 0:j.name)||"Unknown Domain"]},N.id)})})]}),s.jsx(mr,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"domain-search",children:"Search Available Domains"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Te,{id:"domain-search",placeholder:"Search domains...",value:c,onChange:N=>d(N.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{children:["Available Domains (",v.length,")"]}),s.jsx(tu,{className:"h-[300px] border rounded-lg p-4",children:C?s.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[s.jsx(bs,{className:"h-4 w-4 animate-spin mr-2"}),"Loading domains..."]}):v.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[s.jsx(Pt,{className:"h-12 w-12 mb-4 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No available domains found"}),s.jsx("p",{className:"text-sm",children:c?"Try adjusting your search terms":"All domains are already assigned"})]}):s.jsx("div",{className:"space-y-3",children:v.map(N=>s.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx(Ss,{checked:o.includes(N.id),onCheckedChange:()=>w(N.id),className:"mt-1"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[J1(N.icon_name),s.jsx("h4",{className:"font-medium",children:N.name})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:N.description})]})]},N.id))})})]}),o.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(mr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Assignment Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"max-teachers",className:"text-sm",children:"Max Teachers per Domain"}),s.jsx(Te,{id:"max-teachers",type:"number",min:"1",value:u.max_teachers,onChange:N=>h(j=>({...j,max_teachers:parseInt(N.target.value)||5}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"max-students",className:"text-sm",children:"Max Students per Domain"}),s.jsx(Te,{id:"max-students",type:"number",min:"1",value:u.max_students,onChange:N=>h(j=>({...j,max_students:parseInt(N.target.value)||100}))})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4 text-green-600"}),o.length," domain(s) selected"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(U,{type:"button",variant:"outline",onClick:S,children:"Cancel"}),s.jsx(U,{onClick:k,disabled:o.length===0||y.isPending,children:y.isPending?"Assigning...":`Assign ${o.length} Domain(s)`})]})]})]})})}function uY(){const{data:e,isLoading:t,refetch:n}=mt({queryKey:["domain-assignment-stats"],queryFn:()=>Hc.getDomainAssignmentStats()}),{data:r=[],isLoading:i,refetch:a}=mt({queryKey:["all-tenant-domain-assignments"],queryFn:()=>Hc.getAllTenantDomainAssignments()}),o=t||i,l=()=>{n(),a()},c=d=>d?s.jsxs(ve,{variant:"default",className:"flex items-center gap-1",children:[s.jsx(Zn,{className:"h-3 w-3"}),"Active"]}):s.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(Zt,{className:"h-3 w-3"}),"Inactive"]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Total Domains"}),s.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:o?"...":(e==null?void 0:e.total_domains)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Available learning domains"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Total Assignments"}),s.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:o?"...":(e==null?void 0:e.total_assignments)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Domain-tenant assignments"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Active Assignments"}),s.jsx(Zn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:o?"...":(e==null?void 0:e.active_assignments)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active assignments"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Tenants with Domains"}),s.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:o?"...":(e==null?void 0:e.tenants_with_assignments)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tenants with assigned domains"})]})]})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ue,{children:"Domain Assignments"}),s.jsx(Me,{children:"Overview of all tenant-domain assignments in the system"})]}),s.jsxs(U,{onClick:l,variant:"outline",size:"sm",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsxs(re,{children:[s.jsx("div",{className:"border rounded-lg",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{children:"Tenant"}),s.jsx(Re,{children:"Domain"}),s.jsx(Re,{children:"Status"}),s.jsx(Re,{children:"Max Teachers"}),s.jsx(Re,{children:"Max Students"}),s.jsx(Re,{children:"Assigned"})]})}),s.jsx(ai,{children:o?s.jsx(wt,{children:s.jsx(Ee,{colSpan:6,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(Wn,{className:"h-4 w-4 animate-spin mr-2"}),"Loading assignments..."]})})}):r.length===0?s.jsx(wt,{children:s.jsx(Ee,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(Zt,{className:"h-12 w-12 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No domain assignments found"}),s.jsx("p",{className:"text-sm",children:"Create tenants and assign domains to get started"})]})})}):r.slice(0,10).map(d=>{var u;return s.jsxs(wt,{children:[s.jsx(Ee,{children:s.jsx("div",{className:"font-medium",children:d.tenant_name})}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"}),((u=d.domain)==null?void 0:u.name)||"Unknown Domain"]})}),s.jsx(Ee,{children:c(d.is_active)}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:d.max_teachers})]})}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:d.max_students})]})}),s.jsx(Ee,{className:"text-sm text-muted-foreground",children:new Date(d.created_at).toLocaleDateString()})]},d.id)})})]})}),r.length>10&&s.jsxs("div",{className:"text-sm text-muted-foreground mt-4 text-center",children:["Showing first 10 of ",r.length," assignments"]})]})]})]})}class hY{async createInvitation(t){const n=await L.auth.getSession();if(!n.data.session)throw new Error("User must be authenticated to send invitations");const{data:r}=await L.from("user_tenants").select("id").eq("tenant_id",t.tenant_id).eq("user_id",n.data.session.user.id).single();if(r)throw new Error("User is already a member of this tenant");const{data:i}=await L.from("invitations").select("id").eq("email",t.email).eq("tenant_id",t.tenant_id).eq("status","pending").single();if(i)throw new Error("An invitation for this email already exists for this tenant");const{data:a,error:o}=await L.from("roles").select("id").eq("name",t.role).single();if(o||!a)throw new Error(`Role ${t.role} not found`);const l=new Date;l.setDate(l.getDate()+(t.expires_in_days||7));const{data:c,error:d}=await L.from("invitations").insert({email:t.email,tenant_id:t.tenant_id,role_id:a.id,role_name:t.role,status:"pending",expires_at:l.toISOString(),invited_by:n.data.session.user.id}).select(`
        *,
        tenant:tenants(id, name, slug),
        invited_by_user:profiles!invitations_invited_by_fkey(id, email),
        role:roles(id, name, display_name)
      `).single();if(d)throw console.error("Error creating invitation:",d),new Error(`Failed to create invitation: ${d.message}`);return c}async getInvitations(t={}){let n=L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        invited_by_user:profiles!invitations_invited_by_fkey(id, email),
        role:roles(id, name, display_name)
      `).order("created_at",{ascending:!1});t.tenant_id&&(n=n.eq("tenant_id",t.tenant_id)),t.status&&(n=n.eq("status",t.status)),t.role&&(n=n.eq("role_name",t.role));const{data:r,error:i}=await n;if(i)throw console.error("Error fetching invitations:",i),new Error(`Failed to fetch invitations: ${i.message}`);return r||[]}async getInvitation(t){const{data:n,error:r}=await L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        invited_by_user:profiles!invitations_invited_by_fkey(id, email),
        role:roles(id, name, display_name)
      `).eq("id",t).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching invitation:",r),new Error(`Failed to fetch invitation: ${r.message}`)}return n}async getInvitationByToken(t){return this.getInvitation(t)}async acceptInvitation(t,n){var o;const r=await this.getInvitation(t);if(!r)throw new Error("Invitation not found");if(r.status!=="pending")throw new Error("Invitation is no longer valid");if(new Date(r.expires_at)<new Date)throw await L.from("invitations").update({status:"expired"}).eq("id",t),new Error("Invitation has expired");const{error:i}=await L.from("user_tenants").insert({user_id:n,tenant_id:r.tenant_id,role_id:(o=r.role)==null?void 0:o.id,status:"active",is_primary:!1,joined_at:new Date().toISOString()});if(i)throw console.error("Error adding user to tenant:",i),new Error(`Failed to accept invitation: ${i.message}`);const{error:a}=await L.from("invitations").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("id",t);a&&console.error("Error updating invitation status:",a)}async cancelInvitation(t){const{error:n}=await L.from("invitations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",t);if(n)throw console.error("Error cancelling invitation:",n),new Error(`Failed to cancel invitation: ${n.message}`)}async resendInvitation(t){const n=new Date;n.setDate(n.getDate()+7);const{data:r,error:i}=await L.from("invitations").update({expires_at:n.toISOString(),status:"pending",updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        tenant:tenants(id, name, slug),
        invited_by_user:profiles!invitations_invited_by_fkey(id, email),
        role:roles(id, name, display_name)
      `).single();if(i)throw console.error("Error resending invitation:",i),new Error(`Failed to resend invitation: ${i.message}`);return r}async getTenantPendingInvitations(t){return this.getInvitations({tenant_id:t,status:"pending"})}async getInvitationsSentByUser(t){const{data:n,error:r}=await L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        invited_by_user:profiles!invitations_invited_by_fkey(id, email),
        role:roles(id, name, display_name)
      `).eq("invited_by",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user invitations:",r),new Error(`Failed to fetch invitations: ${r.message}`);return n||[]}async cleanupExpiredInvitations(){const{data:t,error:n}=await L.from("invitations").update({status:"expired"}).eq("status","pending").lt("expires_at",new Date().toISOString()).select("id");if(n)throw console.error("Error cleaning up expired invitations:",n),new Error(`Failed to cleanup expired invitations: ${n.message}`);return(t==null?void 0:t.length)||0}async getInvitationStats(t){const{count:n}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t),{count:r}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","pending"),{count:i}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","accepted"),{count:a}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","expired");return{total_invitations:n||0,pending_invitations:r||0,accepted_invitations:i||0,expired_invitations:a||0}}}const rl=new hY;var BR=(e=>(e.PLATFORM_ADMIN="platform_admin",e.TENANT_ADMIN="tenant_admin",e.TEACHER="teacher",e.STUDENT="student",e))(BR||{});function pY({tenant:e,open:t,onClose:n,onSuccess:r}){const{toast:i}=rt(),a=In(),[o,l]=p.useState({email:"",message:"",expires_in_days:7}),c=en({mutationFn:f=>rl.createInvitation(f),onSuccess:f=>{i({title:"Invitation Sent",description:`Tenant admin invitation has been sent to ${f.email}.`}),a.invalidateQueries({queryKey:["invitations"]}),a.invalidateQueries({queryKey:["tenant-invitations"]}),r(),u()},onError:f=>{i({title:"Invitation Failed",description:f.message||"Failed to send invitation.",variant:"destructive"})}}),d=()=>{if(!e||!o.email.trim())return;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){i({title:"Invalid Email",description:"Please enter a valid email address.",variant:"destructive"});return}c.mutate({email:o.email.trim(),tenant_id:e.id,role:BR.TENANT_ADMIN,expires_in_days:o.expires_in_days})},u=()=>{l({email:"",message:"",expires_in_days:7}),n()},h=o.email.trim().length>0;return s.jsx(on,{open:t,onOpenChange:u,children:s.jsxs(tn,{className:"sm:max-w-[500px]",children:[s.jsxs(nn,{children:[s.jsxs(rn,{className:"flex items-center gap-2",children:[s.jsx(zl,{className:"h-5 w-5"}),"Invite Tenant Administrator"]}),s.jsxs(Qn,{children:["Send an invitation to a user to become an administrator for ",s.jsx("strong",{children:e==null?void 0:e.name}),". They will be able to manage users and content within this tenant."]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(Ji,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e==null?void 0:e.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.slug})]})]}),s.jsx(mr,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(xn,{className:"h-4 w-4"}),"Email Address"]}),s.jsx(Te,{id:"email",type:"email",placeholder:"admin@example.com",value:o.email,onChange:f=>l(m=>({...m,email:f.target.value})),className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-4 w-4"}),"Role"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-3 w-3"}),"Tenant Administrator"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Full tenant management permissions"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"expiry",className:"flex items-center gap-2",children:[s.jsx(Fl,{className:"h-4 w-4"}),"Invitation Expires In"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Te,{id:"expiry",type:"number",min:"1",max:"30",value:o.expires_in_days,onChange:f=>l(m=>({...m,expires_in_days:parseInt(f.target.value)||7})),className:"w-20"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"message",children:"Personal Message (Optional)"}),s.jsx(Rr,{id:"message",placeholder:"Welcome to the team! This invitation will give you admin access to manage...",value:o.message,onChange:f=>l(m=>({...m,message:f.target.value})),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"flex gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx(Zt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:"What happens next:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"The user will receive an invitation email"}),s.jsx("li",{children:"They can accept the invitation to join as tenant admin"}),s.jsx("li",{children:"They will have full access to manage this tenant"}),s.jsx("li",{children:"You can track invitation status in the invitations list"})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:h&&s.jsxs("span",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Ready to send"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(U,{type:"button",variant:"outline",onClick:u,children:"Cancel"}),s.jsx(U,{onClick:d,disabled:!h||c.isPending,className:"min-w-[120px]",children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xn,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})]})})}function fY({tenantId:e,showTenantColumn:t=!1}){const{toast:n}=rt(),r=In(),[i,a]=p.useState({tenant_id:e}),[o,l]=p.useState(""),{data:c=[],isLoading:d,error:u,refetch:h}=mt({queryKey:["invitations",i],queryFn:()=>rl.getInvitations(i)}),f=en({mutationFn:S=>rl.cancelInvitation(S),onSuccess:()=>{n({title:"Invitation Cancelled",description:"The invitation has been cancelled successfully."}),r.invalidateQueries({queryKey:["invitations"]})},onError:S=>{n({title:"Error",description:S.message||"Failed to cancel invitation.",variant:"destructive"})}}),m=en({mutationFn:S=>rl.resendInvitation(S),onSuccess:()=>{n({title:"Invitation Resent",description:"The invitation has been resent with a new expiration date."}),r.invalidateQueries({queryKey:["invitations"]})},onError:S=>{n({title:"Error",description:S.message||"Failed to resend invitation.",variant:"destructive"})}}),x=c.filter(S=>{var C;return!o||S.email.toLowerCase().includes(o.toLowerCase())||((C=S.tenant)==null?void 0:C.name.toLowerCase().includes(o.toLowerCase()))}),g=S=>{l(S)},b=(S,C)=>{a(N=>({...N,[S]:C==="all"?void 0:C}))},v=S=>{const N={pending:{variant:"default",icon:Xg,color:"text-blue-600"},accepted:{variant:"default",icon:Zn,color:"text-green-600"},expired:{variant:"secondary",icon:Zt,color:"text-orange-600"},cancelled:{variant:"destructive",icon:Bt,color:"text-red-600"}}[S],j=N.icon;return s.jsxs(ve,{variant:N.variant,className:"flex items-center gap-1",children:[s.jsx(j,{className:`h-3 w-3 ${N.color}`}),S]})},y=S=>{const C={platform_admin:"bg-purple-100 text-purple-800",tenant_admin:"bg-blue-100 text-blue-800",teacher:"bg-green-100 text-green-800",student:"bg-gray-100 text-gray-800"};return s.jsxs(ve,{className:`flex items-center gap-1 ${C[S]||"bg-gray-100 text-gray-800"}`,children:[s.jsx(js,{className:"h-3 w-3"}),S.replace("_"," ")]})},w=S=>{confirm(`Are you sure you want to cancel the invitation for "${S.email}"?`)&&f.mutate(S.id)},k=S=>{confirm(`Resend invitation to "${S.email}"? This will extend the expiration date.`)&&m.mutate(S.id)};return u?s.jsxs("div",{className:"text-center py-8 text-destructive",children:[s.jsxs("p",{children:["Error loading invitations: ",u.message]}),s.jsxs(U,{onClick:()=>h(),variant:"outline",className:"mt-2",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Kn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Te,{placeholder:"Search invitations...",value:o,onChange:S=>g(S.target.value),className:"pl-10"})]}),s.jsxs(dt,{value:i.status||"all",onValueChange:S=>b("status",S),children:[s.jsx(ot,{className:"w-32",children:s.jsx(ut,{placeholder:"Status"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Status"}),s.jsx(me,{value:"pending",children:"Pending"}),s.jsx(me,{value:"accepted",children:"Accepted"}),s.jsx(me,{value:"expired",children:"Expired"}),s.jsx(me,{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs(dt,{value:i.role||"all",onValueChange:S=>b("role",S),children:[s.jsx(ot,{className:"w-36",children:s.jsx(ut,{placeholder:"Role"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Roles"}),s.jsx(me,{value:"tenant_admin",children:"Tenant Admin"}),s.jsx(me,{value:"teacher",children:"Teacher"}),s.jsx(me,{value:"student",children:"Student"})]})]}),s.jsx(U,{onClick:()=>h(),variant:"outline",size:"icon",children:s.jsx(Wn,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{children:"Email"}),t&&s.jsx(Re,{children:"Tenant"}),s.jsx(Re,{children:"Role"}),s.jsx(Re,{children:"Status"}),s.jsx(Re,{children:"Invited By"}),s.jsx(Re,{children:"Expires"}),s.jsx(Re,{className:"text-right",children:"Actions"})]})}),s.jsx(ai,{children:d?s.jsx(wt,{children:s.jsx(Ee,{colSpan:t?7:6,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(Wn,{className:"h-4 w-4 animate-spin mr-2"}),"Loading invitations..."]})})}):x.length===0?s.jsx(wt,{children:s.jsx(Ee,{colSpan:t?7:6,className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(xn,{className:"h-12 w-12 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No invitations found"}),o&&s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})}):x.map(S=>{var C,N,j;return s.jsxs(wt,{children:[s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:S.email})]})}),t&&s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(C=S.tenant)==null?void 0:C.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:(N=S.tenant)==null?void 0:N.slug})]})]})}),s.jsx(Ee,{children:y(S.role_name)}),s.jsx(Ee,{children:v(S.status)}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:((j=S.invited_by_user)==null?void 0:j.email)||"Unknown"})]})}),s.jsx(Ee,{className:"text-sm text-muted-foreground",children:new Date(S.expires_at).toLocaleDateString()}),s.jsx(Ee,{className:"text-right",children:s.jsxs(Rf,{children:[s.jsx(If,{asChild:!0,children:s.jsx(U,{variant:"ghost",size:"icon",children:s.jsx(JS,{className:"h-4 w-4"})})}),s.jsxs(lu,{align:"end",children:[S.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(lr,{onClick:()=>k(S),children:[s.jsx(Sl,{className:"h-4 w-4 mr-2"}),"Resend Invitation"]}),s.jsxs(lr,{onClick:()=>w(S),className:"text-destructive",children:[s.jsx(RO,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),S.status==="expired"&&s.jsxs(lr,{onClick:()=>k(S),children:[s.jsx(Sl,{className:"h-4 w-4 mr-2"}),"Send New Invitation"]})]})]})})]},S.id)})})]})}),x.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",x.length," of ",c.length," invitations"]})]})}function mY({tenantId:e}){const{data:t,isLoading:n,refetch:r}=mt({queryKey:["invitation-stats",e],queryFn:()=>e?rl.getInvitationStats(e):Promise.resolve(null),enabled:!!e}),{data:i=[],isLoading:a,refetch:o}=mt({queryKey:["recent-invitations",e],queryFn:()=>rl.getInvitations({tenant_id:e})}),l=n||a,c=()=>{r(),o()},d=h=>{switch(h){case"pending":return s.jsx(Xg,{className:"h-3 w-3 text-blue-600"});case"accepted":return s.jsx(Zn,{className:"h-3 w-3 text-green-600"});case"expired":return s.jsx(Zt,{className:"h-3 w-3 text-orange-600"});case"cancelled":return s.jsx(Bt,{className:"h-3 w-3 text-red-600"});default:return s.jsx(xn,{className:"h-3 w-3"})}},u=h=>{switch(h){case"pending":return"text-blue-600";case"accepted":return"text-green-600";case"expired":return"text-orange-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Total Invitations"}),s.jsx(xn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:l?"...":(t==null?void 0:t.total_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time invitations sent"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Pending"}),s.jsx(Xg,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l?"...":(t==null?void 0:t.pending_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting response"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Accepted"}),s.jsx(Zn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:l?"...":(t==null?void 0:t.accepted_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully joined"})]})]}),s.jsxs(te,{children:[s.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ue,{className:"text-sm font-medium",children:"Expired"}),s.jsx(Zt,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l?"...":(t==null?void 0:t.expired_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Need to be resent"})]})]})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ue,{children:"Recent Invitations"}),s.jsxs(Me,{children:["Latest invitation activity",e?" for this tenant":""]})]}),s.jsxs(U,{onClick:c,variant:"outline",size:"sm",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsx(re,{children:s.jsx("div",{className:"space-y-4",children:l?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(Wn,{className:"h-4 w-4 animate-spin mr-2"}),"Loading invitations..."]}):i.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(xn,{className:"h-12 w-12 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No invitations found"}),s.jsx("p",{className:"text-sm",children:"Send your first invitation to get started"})]})}):s.jsxs("div",{className:"space-y-3",children:[i.slice(0,5).map(h=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[d(h.status),s.jsx("span",{className:"font-medium",children:h.email})]}),s.jsx(ve,{variant:"outline",className:"text-xs",children:h.role_name.replace("_"," ")}),h.tenant&&s.jsx(ve,{variant:"secondary",className:"text-xs",children:h.tenant.name})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[s.jsx("span",{className:u(h.status),children:h.status}),s.jsx("span",{children:new Date(h.created_at).toLocaleDateString()})]})]},h.id)),i.length>5&&s.jsxs("div",{className:"text-sm text-muted-foreground text-center pt-2 border-t",children:["Showing 5 of ",i.length," invitations"]})]})})})]})]})}const gY=["users","domains","concepts","learning_goals","reports"],xY=["create","read","update","delete"],Z1=["platform_admin","tenant_admin","teacher","student"];function vY(){const{isPlatformAdmin:e,session:t}=Dr(),n=In(),[r,i]=p.useState(new Set),[a,o]=p.useState({open:!1,title:"",description:"",action:()=>{}}),[l,c]=p.useState(!1),{data:d}=mt({queryKey:["accessible-routes"],queryFn:()=>bo.getUserAccessibleRoutes()});mt({queryKey:["permission-matrix"],queryFn:async()=>{const v=[];for(const y of gY)for(const w of xY)v.push({resource:y,action:w});return bo.checkMultiplePermissions(v)}});const{data:u}=mt({queryKey:["audit-logs"],queryFn:async()=>{const{data:v,error:y}=await L.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);if(y)throw y;return v||[]}}),h=p.useMemo(()=>bo.getCacheSize(),[l]);en({mutationFn:async({userId:v,resource:y,action:w,granted:k})=>{await bo.updatePermission(v,y,w,k)},onSuccess:()=>{n.invalidateQueries({queryKey:["permission-matrix"]}),ha.success("Permission updated successfully")},onError:()=>{ha.error("Failed to update permission")}});const f=en({mutationFn:async v=>{await bo.bulkUpdatePermissions(v)},onSuccess:()=>{n.invalidateQueries({queryKey:["permission-matrix"]}),ha.success("Permissions updated successfully"),i(new Set)},onError:()=>{ha.error("Failed to update permissions")}}),m=()=>{bo.clearCache(),c(!0),ha.success("Cache cleared successfully"),setTimeout(()=>c(!1),3e3)},x=()=>{const v=Array.from(r).map(y=>{const[w,k,S]=y.split(":");return{user_id:S,resource:w,action:k,granted:!0}});f.mutate(v)},g=()=>{const v=Array.from(r).map(y=>{const[w,k,S]=y.split(":");return{user_id:S,resource:w,action:k,granted:!1}});f.mutate(v)},b=()=>{if(!u)return;const v=[["Timestamp","User","Action","Resource","Details"].join(","),...u.map(S=>[S.created_at,S.user_id,S.action,S.resource_type||"",JSON.stringify(S.changes||{})].join(","))].join(`
`),y=new Blob([v],{type:"text/csv"}),w=URL.createObjectURL(y),k=document.createElement("a");k.href=w,k.download=`audit-logs-${new Date().toISOString()}.csv`,k.click(),ha.success("Audit logs exported")};return e?s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Access Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Centralized permission and role management system"})]}),s.jsx("div",{"data-testid":"platform-admin-badge",className:"flex items-center gap-2",children:s.jsxs(ve,{variant:"default",className:"bg-primary px-4 py-2",children:[s.jsx(Zg,{className:"h-4 w-4 mr-2"}),"Platform Admin"]})})]}),s.jsxs(Yn,{className:"border-primary",children:[s.jsx(Zg,{className:"h-4 w-4 text-primary"}),s.jsx(Yo,{className:"text-primary",children:"Universal Access Enabled"}),s.jsx(Xn,{children:"As a platform administrator, you have complete access to all system resources and features. Your permissions bypass all access controls."})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Quick Actions"})}),s.jsxs(re,{className:"flex gap-3",children:[s.jsxs(U,{"data-testid":"quick-action-grant-all",onClick:()=>o({open:!0,title:"Grant All Permissions",description:"Grant all permissions to selected roles?",action:x}),children:[s.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Grant All"]}),s.jsxs(U,{"data-testid":"quick-action-revoke-all",variant:"destructive",onClick:()=>o({open:!0,title:"Revoke All Permissions",description:"Are you sure you want to revoke all permissions? This action cannot be undone.",action:g}),children:[s.jsx(Yg,{className:"h-4 w-4 mr-2"}),"Revoke All"]}),s.jsxs(U,{"data-testid":"quick-action-reset-defaults",variant:"outline",onClick:()=>o({open:!0,title:"Reset to Defaults",description:"Reset all permissions to system defaults?",action:()=>ha.info("Reset functionality coming soon")}),children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Reset Defaults"]})]})]}),s.jsxs(ri,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Ps,{className:"grid w-full grid-cols-6",children:[s.jsx(et,{value:"overview",children:"Overview"}),s.jsx(et,{value:"roles",children:"Roles"}),s.jsx(et,{value:"tenants",children:"Tenants"}),s.jsx(et,{value:"invitations",children:"Invitations"}),s.jsx(et,{value:"audit","data-testid":"tab-audit-log",children:"Audit Log"}),s.jsx(et,{value:"performance","data-testid":"tab-performance",children:"Performance"})]}),s.jsxs(tt,{value:"overview",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Access Status"})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:"All Routes Accessible"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Full System Control"})]})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Active Sessions"})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"1"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t==null?void 0:t.email})]})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Accessible Routes"})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(d==null?void 0:d.length)||0}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All system routes"})]})]})]}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ue,{children:"Platform Admin Privileges"})}),s.jsx(re,{children:s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Universal Access"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be modified for security reasons"})]}),s.jsx(tl,{checked:!0,disabled:!0,"data-testid":"toggle-platform-admin"})]})})]})]}),s.jsx(tt,{value:"roles",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Role Hierarchy"}),s.jsx(Me,{children:"System roles and their inheritance relationships"})]}),s.jsx(re,{children:s.jsx("div",{"data-testid":"role-hierarchy",className:"space-y-4",children:Z1.map((v,y)=>s.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-muted",children:[s.jsx(ve,{variant:v==="platform_admin"?"default":"secondary",children:v.replace("_"," ").toUpperCase()}),y>0&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["inherits from ",Z1[y-1].replace("_"," ")]})]},v))})})]})}),s.jsx(tt,{value:"audit",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Audit Log"}),s.jsx(Me,{children:"Track all permission changes and access attempts"})]}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(dt,{"data-testid":"audit-filter-action",children:[s.jsx(ot,{className:"w-48",children:s.jsx(ut,{placeholder:"Filter by action"})}),s.jsxs(lt,{children:[s.jsx(me,{value:"all",children:"All Actions"}),s.jsx(me,{value:"permission_grant",children:"Permission Grant"}),s.jsx(me,{value:"permission_revoke",children:"Permission Revoke"}),s.jsx(me,{value:"permission_update",children:"Permission Update"})]})]}),s.jsxs(U,{"data-testid":"export-audit-logs",onClick:b,variant:"outline",children:[s.jsx(XS,{className:"h-4 w-4 mr-2"}),"Export"]})]}),s.jsx("div",{"data-testid":"audit-log-table",className:"overflow-x-auto",children:s.jsxs(si,{children:[s.jsx(ii,{children:s.jsxs(wt,{children:[s.jsx(Re,{children:"Timestamp"}),s.jsx(Re,{children:"User"}),s.jsx(Re,{children:"Action"}),s.jsx(Re,{children:"Resource"}),s.jsx(Re,{children:"Details"})]})}),s.jsx(ai,{children:u==null?void 0:u.map(v=>s.jsxs(wt,{children:[s.jsx(Ee,{children:new Date(v.created_at).toLocaleString()}),s.jsx(Ee,{children:v.user_id}),s.jsx(Ee,{children:v.action}),s.jsx(Ee,{children:v.resource_type}),s.jsx(Ee,{children:s.jsx("code",{className:"text-xs",children:JSON.stringify(v.changes||{},null,2)})})]},v.id))})]})})]})})]})}),s.jsx(tt,{value:"tenants",className:"space-y-4",children:s.jsx(yY,{})}),s.jsx(tt,{value:"invitations",className:"space-y-4",children:s.jsx(wY,{})}),s.jsx(tt,{value:"performance",className:"space-y-4",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsx(ue,{children:"Performance Metrics"}),s.jsx(Me,{children:"Monitor system performance and cache statistics"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Permission Cache"}),s.jsxs("p",{className:"text-2xl font-bold",children:["Cache Size: ",h," entries"]})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cache Management"}),s.jsxs(U,{"data-testid":"clear-cache-button",onClick:m,variant:"outline",className:"mt-2",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Clear Cache"]}),l&&s.jsx("p",{className:"text-sm text-green-600 mt-2",children:"Cache cleared successfully"})]})]})})]})})]}),s.jsx(yf,{open:a.open,onOpenChange:v=>o(y=>({...y,open:v})),children:s.jsxs(Gd,{children:[s.jsxs(Wd,{children:[s.jsx(Qd,{children:a.title}),s.jsx(Yd,{children:a.description})]}),s.jsxs(Kd,{children:[s.jsx(Jd,{"data-testid":"cancel-action",children:"Cancel"}),s.jsx(Xd,{"data-testid":"confirm-action",onClick:a.action,children:"Confirm"})]})]})})]}):s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Yn,{variant:"destructive",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsx(Yo,{children:"Access Denied"}),s.jsx(Xn,{children:"Only platform administrators can access this page."})]})})}function yY(){const[e,t]=p.useState(!1),[n,r]=p.useState(null),[i,a]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState(!1),[u,h]=p.useState(null),f=()=>{},m=w=>{r(w)},x=w=>{r(w)},g=w=>{l(w),a(!0)},b=()=>{l(null)},v=w=>{h(w),d(!0)},y=()=>{h(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(uY,{}),s.jsxs(te,{children:[s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ue,{className:"flex items-center gap-2",children:[s.jsx(Eb,{className:"h-5 w-5"}),"Tenant Management"]}),s.jsx(Me,{children:"Create and manage company tenants and their domain assignments"})]}),s.jsxs(U,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[s.jsx(Eb,{className:"h-4 w-4"}),"Create Tenant"]})]})}),s.jsx(re,{children:s.jsx(lY,{onEditTenant:m,onViewTenant:x,onAssignDomains:g,onInviteTenantAdmin:v})})]}),s.jsx(oY,{open:e,onClose:()=>t(!1),onSuccess:f}),s.jsx(dY,{tenant:o,open:i,onClose:()=>{a(!1),l(null)},onSuccess:b}),s.jsx(pY,{tenant:u,open:c,onClose:()=>{d(!1),h(null)},onSuccess:y})]})}function wY(){const[e,t]=p.useState("tenant-admins");return s.jsx("div",{className:"space-y-6",children:s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center gap-2",children:[s.jsx(zl,{className:"h-5 w-5"}),"User Invitations"]}),s.jsx(Me,{children:"Send invitations to create new user accounts with appropriate roles"})]}),s.jsx(re,{children:s.jsxs(ri,{value:e,onValueChange:t,children:[s.jsxs(Ps,{className:"grid w-full grid-cols-3",children:[s.jsx(et,{value:"tenant-admins",children:"Tenant Admins"}),s.jsx(et,{value:"teachers",children:"Teachers"}),s.jsx(et,{value:"students",children:"Students"})]}),s.jsx(tt,{value:"tenant-admins",className:"space-y-4",children:s.jsx(bY,{})}),s.jsx(tt,{value:"teachers",className:"space-y-4",children:s.jsx(jY,{})}),s.jsx(tt,{value:"students",className:"space-y-4",children:s.jsx(NY,{})})]})})]})})}function bY(){return s.jsxs("div",{className:"space-y-6",children:[s.jsx(mY,{}),s.jsxs(te,{children:[s.jsxs(le,{children:[s.jsxs(ue,{className:"flex items-center gap-2",children:[s.jsx(xn,{className:"h-5 w-5"}),"Tenant Admin Invitations"]}),s.jsx(Me,{children:"Manage tenant administrator invitations across all tenants"})]}),s.jsx(re,{children:s.jsx(fY,{showTenantColumn:!0})})]})]})}function jY(){return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invite Teachers"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform admin can invite teachers to any tenant"})]}),s.jsxs(U,{className:"flex items-center gap-2",children:[s.jsx(Sl,{className:"h-4 w-4"}),"Send Invitation"]})]}),s.jsx("div",{className:"border rounded-lg p-6 bg-muted/50",children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"font-medium",children:"Teacher Invitation Form"}),s.jsx("p",{className:"text-sm",children:"Form fields: First Name, Last Name, Email, Tenant Selection"}),s.jsx("p",{className:"text-sm mt-2",children:"✓ Can assign to any tenant"}),s.jsx("p",{className:"text-sm",children:"✓ Domain assignment happens separately"})]})})]})}function NY(){return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invite Students"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform admin can invite students to any tenant"})]}),s.jsxs(U,{className:"flex items-center gap-2",children:[s.jsx(Sl,{className:"h-4 w-4"}),"Send Invitation"]})]}),s.jsx("div",{className:"border rounded-lg p-6 bg-muted/50",children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"font-medium",children:"Student Invitation Form"}),s.jsx("p",{className:"text-sm",children:"Form fields: First Name, Last Name, Email, Tenant Selection"}),s.jsx("p",{className:"text-sm mt-2",children:"✓ Can assign to any tenant"}),s.jsx("p",{className:"text-sm",children:"✓ Teachers can also invite students within their tenant"})]})})]})}const _Y=new D3,SY=()=>s.jsx(F3,{client:_Y,children:s.jsx(r6,{children:s.jsx(zC,{children:s.jsxs(FP,{children:[s.jsx(mM,{}),s.jsx(VM,{}),s.jsx(H5,{children:s.jsxs(oh,{children:[s.jsx(ze,{path:"/",element:s.jsx(gd,{to:"/welcome",replace:!0})}),s.jsx(ze,{path:"/welcome",element:s.jsx(uz,{})}),s.jsx(ze,{path:"/welcome-figma",element:s.jsx(gd,{to:"/welcome",replace:!0})}),s.jsx(ze,{path:"/auth",element:s.jsx(BQ,{})}),s.jsx(ze,{path:"/login",element:s.jsx(qQ,{})}),s.jsx(ze,{path:"/register",element:s.jsx(VQ,{})}),s.jsx(ze,{path:"/forgot-password",element:s.jsx(HQ,{})}),s.jsx(ze,{path:"/teacher/*",element:s.jsx(vv,{children:s.jsxs(oh,{children:[s.jsx(ze,{path:"dashboard",element:s.jsx(ft,{children:s.jsx(DU,{})})}),s.jsx(ze,{path:"domain-selection",element:s.jsx(ft,{children:s.jsx(Oz,{})})}),s.jsx(ze,{path:"settings/curriculum-setup",element:s.jsx(ft,{children:s.jsx(IU,{})})}),s.jsx(ze,{path:"administration",element:s.jsx(ft,{children:s.jsx(OU,{})})}),s.jsx(ze,{path:"administration/domains",element:s.jsx(ft,{children:s.jsx(QU,{})})}),s.jsx(ze,{path:"administration/learning-goals",element:s.jsx(ft,{children:s.jsx(H1,{})})})]})})}),s.jsx(ze,{path:"/admin/*",element:s.jsx(vv,{children:s.jsxs(oh,{children:[s.jsx(ze,{index:!0,element:s.jsx(ft,{children:s.jsx(gc,{})})}),s.jsx(ze,{path:"teachers",element:s.jsx(ft,{children:s.jsx(gc,{})})}),s.jsx(ze,{path:"domains",element:s.jsx(ft,{children:s.jsx(gc,{})})}),s.jsx(ze,{path:"settings",element:s.jsx(ft,{children:s.jsx(gc,{})})}),s.jsx(ze,{path:"invitations",element:s.jsx(ft,{children:s.jsx(gc,{})})}),s.jsx(ze,{path:"dashboard",element:s.jsx(ft,{children:s.jsx(QQ,{})})}),s.jsx(ze,{path:"domain/domain_old",element:s.jsx(ft,{children:s.jsx(eB,{})})}),s.jsx(ze,{path:"domain/:domainId",element:s.jsx(ft,{children:s.jsx(XQ,{})})}),s.jsx(ze,{path:"domain/:domainSlug/concepts",element:s.jsx(ft,{children:s.jsx(zG,{})})}),s.jsx(ze,{path:"domain/:domainSlug/concepts/:conceptId",element:s.jsx(ft,{children:s.jsx(UQ,{})})}),s.jsx(ze,{path:"domain/:domainId/goals",element:s.jsx(ft,{children:s.jsx(H1,{})})}),s.jsx(ze,{path:"domain/:domainId/ai-guidance",element:s.jsx(ft,{children:s.jsx(rB,{})})}),s.jsx(ze,{path:"domain/:domainId/ai-guidance/:area",element:s.jsx(ft,{children:s.jsx(dH,{})})}),s.jsx(ze,{path:"domain/:domainId/ai-guidance/:area/examples/new",element:s.jsx(ft,{children:s.jsx(lW,{})})}),s.jsx(ze,{path:"clients",element:s.jsx(ft,{children:s.jsx(cW,{})})}),s.jsx(ze,{path:"permissions",element:s.jsx(ft,{children:s.jsx(K1,{})})}),s.jsx(ze,{path:"upload",element:s.jsx(ft,{children:s.jsx(vW,{})})}),s.jsx(ze,{path:"page-permissions",element:s.jsx(ft,{children:s.jsx(K1,{})})}),s.jsx(ze,{path:"ai-training",element:s.jsx(ft,{children:s.jsx($Q,{})})}),s.jsx(ze,{path:"settings/feedback",element:s.jsx(ft,{children:s.jsx(EW,{})})}),s.jsx(ze,{path:"access-management",element:s.jsx(ft,{children:s.jsx(vY,{})})})]})})}),s.jsx(ze,{path:"/unauthorized",element:s.jsx(PW,{})}),s.jsx(ze,{path:"*",element:s.jsx(TW,{})})]})})]})})})});jS(document.getElementById("root")).render(s.jsx(SY,{}));
