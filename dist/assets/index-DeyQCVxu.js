var e3=Object.defineProperty;var ZN=e=>{throw TypeError(e)};var t3=(e,t,n)=>t in e?e3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bt=(e,t,n)=>t3(e,typeof t!="symbol"?t+"":t,n),Ux=(e,t,n)=>t.has(e)||ZN("Cannot "+n);var H=(e,t,n)=>(Ux(e,t,"read from private field"),n?n.call(e):t.get(e)),$e=(e,t,n)=>t.has(e)?ZN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Se=(e,t,n,r)=>(Ux(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),st=(e,t,n)=>(Ux(e,t,"access private method"),n);var Qh=(e,t,n,r)=>({set _(a){Se(e,t,a,n)},get _(){return H(e,t,r)}});function n3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function il(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s3(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var z2={exports:{}},jp={},U2={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=Symbol.for("react.element"),r3=Symbol.for("react.portal"),a3=Symbol.for("react.fragment"),i3=Symbol.for("react.strict_mode"),o3=Symbol.for("react.profiler"),l3=Symbol.for("react.provider"),c3=Symbol.for("react.context"),d3=Symbol.for("react.forward_ref"),u3=Symbol.for("react.suspense"),h3=Symbol.for("react.memo"),m3=Symbol.for("react.lazy"),e1=Symbol.iterator;function f3(e){return e===null||typeof e!="object"?null:(e=e1&&e[e1]||e["@@iterator"],typeof e=="function"?e:null)}var B2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V2=Object.assign,q2={};function Xc(e,t,n){this.props=e,this.context=t,this.refs=q2,this.updater=n||B2}Xc.prototype.isReactComponent={};Xc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function W2(){}W2.prototype=Xc.prototype;function vb(e,t,n){this.props=e,this.context=t,this.refs=q2,this.updater=n||B2}var yb=vb.prototype=new W2;yb.constructor=vb;V2(yb,Xc.prototype);yb.isPureReactComponent=!0;var t1=Array.isArray,H2=Object.prototype.hasOwnProperty,bb={current:null},G2={key:!0,ref:!0,__self:!0,__source:!0};function K2(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)H2.call(t,r)&&!G2.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:lh,type:e,key:i,ref:o,props:a,_owner:bb.current}}function p3(e,t){return{$$typeof:lh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wb(e){return typeof e=="object"&&e!==null&&e.$$typeof===lh}function x3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var n1=/\/+/g;function Bx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?x3(""+e.key):t.toString(36)}function Fm(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case lh:case r3:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Bx(o,0):r,t1(a)?(n="",e!=null&&(n=e.replace(n1,"$&/")+"/"),Fm(a,t,n,"",function(d){return d})):a!=null&&(wb(a)&&(a=p3(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(n1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",t1(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Bx(i,l);o+=Fm(i,t,n,c,a)}else if(c=f3(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Bx(i,l++),o+=Fm(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Yh(e,t,n){if(e==null)return e;var r=[],a=0;return Fm(e,r,"","",function(i){return t.call(n,i,a++)}),r}function g3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var hs={current:null},$m={transition:null},v3={ReactCurrentDispatcher:hs,ReactCurrentBatchConfig:$m,ReactCurrentOwner:bb};function Q2(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:Yh,forEach:function(e,t,n){Yh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yh(e,function(){t++}),t},toArray:function(e){return Yh(e,function(t){return t})||[]},only:function(e){if(!wb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};lt.Component=Xc;lt.Fragment=a3;lt.Profiler=o3;lt.PureComponent=vb;lt.StrictMode=i3;lt.Suspense=u3;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v3;lt.act=Q2;lt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=V2({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=bb.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)H2.call(t,c)&&!G2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:lh,type:e.type,key:a,ref:i,props:r,_owner:o}};lt.createContext=function(e){return e={$$typeof:c3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:l3,_context:e},e.Consumer=e};lt.createElement=K2;lt.createFactory=function(e){var t=K2.bind(null,e);return t.type=e,t};lt.createRef=function(){return{current:null}};lt.forwardRef=function(e){return{$$typeof:d3,render:e}};lt.isValidElement=wb;lt.lazy=function(e){return{$$typeof:m3,_payload:{_status:-1,_result:e},_init:g3}};lt.memo=function(e,t){return{$$typeof:h3,type:e,compare:t===void 0?null:t}};lt.startTransition=function(e){var t=$m.transition;$m.transition={};try{e()}finally{$m.transition=t}};lt.unstable_act=Q2;lt.useCallback=function(e,t){return hs.current.useCallback(e,t)};lt.useContext=function(e){return hs.current.useContext(e)};lt.useDebugValue=function(){};lt.useDeferredValue=function(e){return hs.current.useDeferredValue(e)};lt.useEffect=function(e,t){return hs.current.useEffect(e,t)};lt.useId=function(){return hs.current.useId()};lt.useImperativeHandle=function(e,t,n){return hs.current.useImperativeHandle(e,t,n)};lt.useInsertionEffect=function(e,t){return hs.current.useInsertionEffect(e,t)};lt.useLayoutEffect=function(e,t){return hs.current.useLayoutEffect(e,t)};lt.useMemo=function(e,t){return hs.current.useMemo(e,t)};lt.useReducer=function(e,t,n){return hs.current.useReducer(e,t,n)};lt.useRef=function(e){return hs.current.useRef(e)};lt.useState=function(e){return hs.current.useState(e)};lt.useSyncExternalStore=function(e,t,n){return hs.current.useSyncExternalStore(e,t,n)};lt.useTransition=function(){return hs.current.useTransition()};lt.version="18.3.1";U2.exports=lt;var f=U2.exports;const ge=il(f),jb=n3({__proto__:null,default:ge},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3=f,b3=Symbol.for("react.element"),w3=Symbol.for("react.fragment"),j3=Object.prototype.hasOwnProperty,N3=y3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S3={key:!0,ref:!0,__self:!0,__source:!0};function Y2(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)j3.call(t,r)&&!S3.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:b3,type:e,key:i,ref:o,props:a,_owner:N3.current}}jp.Fragment=w3;jp.jsx=Y2;jp.jsxs=Y2;z2.exports=jp;var s=z2.exports,X2={exports:{}},Zs={},J2={exports:{}},Z2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,E){var I=D.length;D.push(E);e:for(;0<I;){var q=I-1>>>1,$=D[q];if(0<a($,E))D[q]=E,D[I]=$,I=q;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var E=D[0],I=D.pop();if(I!==E){D[0]=I;e:for(var q=0,$=D.length,P=$>>>1;q<P;){var Z=2*(q+1)-1,ee=D[Z],J=Z+1,te=D[J];if(0>a(ee,I))J<$&&0>a(te,ee)?(D[q]=te,D[J]=I,q=J):(D[q]=ee,D[Z]=I,q=Z);else if(J<$&&0>a(te,I))D[q]=te,D[J]=I,q=J;else break e}}return E}function a(D,E){var I=D.sortIndex-E.sortIndex;return I!==0?I:D.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var E=n(d);E!==null;){if(E.callback===null)r(d);else if(E.startTime<=D)r(d),E.sortIndex=E.expirationTime,t(c,E);else break;E=n(d)}}function C(D){if(x=!1,w(D),!v)if(n(c)!==null)v=!0,M(_);else{var E=n(d);E!==null&&B(C,E.startTime-D)}}function _(D,E){v=!1,x&&(x=!1,g(j),j=-1),p=!0;var I=m;try{for(w(E),h=n(c);h!==null&&(!(h.expirationTime>E)||D&&!A());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var $=q(h.expirationTime<=E);E=e.unstable_now(),typeof $=="function"?h.callback=$:h===n(c)&&r(c),w(E)}else r(c);h=n(c)}if(h!==null)var P=!0;else{var Z=n(d);Z!==null&&B(C,Z.startTime-E),P=!1}return P}finally{h=null,m=I,p=!1}}var S=!1,N=null,j=-1,k=5,T=-1;function A(){return!(e.unstable_now()-T<k)}function R(){if(N!==null){var D=e.unstable_now();T=D;var E=!0;try{E=N(!0,D)}finally{E?F():(S=!1,N=null)}}else S=!1}var F;if(typeof b=="function")F=function(){b(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,U=O.port2;O.port1.onmessage=R,F=function(){U.postMessage(null)}}else F=function(){y(R,0)};function M(D){N=D,S||(S=!0,F())}function B(D,E){j=y(function(){D(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,M(_))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(m){case 1:case 2:case 3:var E=3;break;default:E=m}var I=m;m=E;try{return D()}finally{m=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,E){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var I=m;m=D;try{return E()}finally{m=I}},e.unstable_scheduleCallback=function(D,E,I){var q=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?q+I:q):I=q,D){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=I+$,D={id:u++,callback:E,priorityLevel:D,startTime:I,expirationTime:$,sortIndex:-1},I>q?(D.sortIndex=I,t(d,D),n(c)===null&&D===n(d)&&(x?(g(j),j=-1):x=!0,B(C,I-q))):(D.sortIndex=$,t(c,D),v||p||(v=!0,M(_))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var E=m;return function(){var I=m;m=E;try{return D.apply(this,arguments)}finally{m=I}}}})(Z2);J2.exports=Z2;var _3=J2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C3=f,Ys=_3;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eE=new Set,bu={};function ol(e,t){Ic(e,t),Ic(e+"Capture",t)}function Ic(e,t){for(bu[e]=t,e=0;e<t.length;e++)eE.add(t[e])}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kv=Object.prototype.hasOwnProperty,k3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s1={},r1={};function E3(e){return kv.call(r1,e)?!0:kv.call(s1,e)?!1:k3.test(e)?r1[e]=!0:(s1[e]=!0,!1)}function T3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A3(e,t,n,r){if(t===null||typeof t>"u"||T3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ms(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ln[e]=new ms(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ln[t]=new ms(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ln[e]=new ms(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ln[e]=new ms(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ln[e]=new ms(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ln[e]=new ms(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ln[e]=new ms(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ln[e]=new ms(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ln[e]=new ms(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nb=/[\-:]([a-z])/g;function Sb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nb,Sb);Ln[t]=new ms(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nb,Sb);Ln[t]=new ms(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nb,Sb);Ln[t]=new ms(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ln[e]=new ms(e,1,!1,e.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ln[e]=new ms(e,1,!1,e.toLowerCase(),null,!0,!0)});function _b(e,t,n,r){var a=Ln.hasOwnProperty(t)?Ln[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A3(t,n,a,r)&&(n=null),r||a===null?E3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ka=C3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xh=Symbol.for("react.element"),Ol=Symbol.for("react.portal"),Fl=Symbol.for("react.fragment"),Cb=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),tE=Symbol.for("react.provider"),nE=Symbol.for("react.context"),kb=Symbol.for("react.forward_ref"),Tv=Symbol.for("react.suspense"),Av=Symbol.for("react.suspense_list"),Eb=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),sE=Symbol.for("react.offscreen"),a1=Symbol.iterator;function wd(e){return e===null||typeof e!="object"?null:(e=a1&&e[a1]||e["@@iterator"],typeof e=="function"?e:null)}var Xt=Object.assign,Vx;function Fd(e){if(Vx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vx=t&&t[1]||""}return`
`+Vx+e}var qx=!1;function Wx(e,t){if(!e||qx)return"";qx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{qx=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fd(e):""}function P3(e){switch(e.tag){case 5:return Fd(e.type);case 16:return Fd("Lazy");case 13:return Fd("Suspense");case 19:return Fd("SuspenseList");case 0:case 2:case 15:return e=Wx(e.type,!1),e;case 11:return e=Wx(e.type.render,!1),e;case 1:return e=Wx(e.type,!0),e;default:return""}}function Pv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fl:return"Fragment";case Ol:return"Portal";case Ev:return"Profiler";case Cb:return"StrictMode";case Tv:return"Suspense";case Av:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nE:return(e.displayName||"Context")+".Consumer";case tE:return(e._context.displayName||"Context")+".Provider";case kb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Eb:return t=e.displayName||null,t!==null?t:Pv(e.type)||"Memo";case hi:t=e._payload,e=e._init;try{return Pv(e(t))}catch{}}return null}function I3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pv(t);case 8:return t===Cb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function D3(e){var t=rE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jh(e){e._valueTracker||(e._valueTracker=D3(e))}function aE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Iv(e,t){var n=t.checked;return Xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function i1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iE(e,t){t=t.checked,t!=null&&_b(e,"checked",t,!1)}function Dv(e,t){iE(e,t);var n=Vi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rv(e,t.type,Vi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function o1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rv(e,t,n){(t!=="number"||hf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $d=Array.isArray;function ec(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vi(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function l1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(fe(92));if($d(n)){if(1<n.length)throw Error(fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vi(n)}}function oE(e,t){var n=Vi(t.value),r=Vi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function c1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zh,cE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zh=Zh||document.createElement("div"),Zh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R3=["Webkit","ms","Moz","O"];Object.keys(Jd).forEach(function(e){R3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jd[t]=Jd[e]})});function dE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jd.hasOwnProperty(e)&&Jd[e]?(""+t).trim():t+"px"}function uE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=dE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var M3=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ov(e,t){if(t){if(M3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function Fv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $v=null;function Tb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zv=null,tc=null,nc=null;function d1(e){if(e=uh(e)){if(typeof zv!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=kp(t),zv(e.stateNode,e.type,t))}}function hE(e){tc?nc?nc.push(e):nc=[e]:tc=e}function mE(){if(tc){var e=tc,t=nc;if(nc=tc=null,d1(e),t)for(e=0;e<t.length;e++)d1(t[e])}}function fE(e,t){return e(t)}function pE(){}var Hx=!1;function xE(e,t,n){if(Hx)return e(t,n);Hx=!0;try{return fE(e,t,n)}finally{Hx=!1,(tc!==null||nc!==null)&&(pE(),mE())}}function ju(e,t){var n=e.stateNode;if(n===null)return null;var r=kp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(fe(231,t,typeof n));return n}var Uv=!1;if(za)try{var jd={};Object.defineProperty(jd,"passive",{get:function(){Uv=!0}}),window.addEventListener("test",jd,jd),window.removeEventListener("test",jd,jd)}catch{Uv=!1}function L3(e,t,n,r,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Zd=!1,mf=null,ff=!1,Bv=null,O3={onError:function(e){Zd=!0,mf=e}};function F3(e,t,n,r,a,i,o,l,c){Zd=!1,mf=null,L3.apply(O3,arguments)}function $3(e,t,n,r,a,i,o,l,c){if(F3.apply(this,arguments),Zd){if(Zd){var d=mf;Zd=!1,mf=null}else throw Error(fe(198));ff||(ff=!0,Bv=d)}}function ll(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function gE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function u1(e){if(ll(e)!==e)throw Error(fe(188))}function z3(e){var t=e.alternate;if(!t){if(t=ll(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return u1(a),e;if(i===r)return u1(a),t;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?e:t}function vE(e){return e=z3(e),e!==null?yE(e):null}function yE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yE(e);if(t!==null)return t;e=e.sibling}return null}var bE=Ys.unstable_scheduleCallback,h1=Ys.unstable_cancelCallback,U3=Ys.unstable_shouldYield,B3=Ys.unstable_requestPaint,on=Ys.unstable_now,V3=Ys.unstable_getCurrentPriorityLevel,Ab=Ys.unstable_ImmediatePriority,wE=Ys.unstable_UserBlockingPriority,pf=Ys.unstable_NormalPriority,q3=Ys.unstable_LowPriority,jE=Ys.unstable_IdlePriority,Np=null,ca=null;function W3(e){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(Np,e,void 0,(e.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:K3,H3=Math.log,G3=Math.LN2;function K3(e){return e>>>=0,e===0?32:31-(H3(e)/G3|0)|0}var em=64,tm=4194304;function zd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=zd(l):(i&=o,i!==0&&(r=zd(i)))}else o=n&~a,o!==0?r=zd(o):i!==0&&(r=zd(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zr(t),a=1<<n,r|=e[n],t&=~a;return r}function Q3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-zr(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=Q3(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Vv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function NE(){var e=em;return em<<=1,!(em&4194240)&&(em=64),e}function Gx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ch(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zr(t),e[t]=n}function X3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-zr(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function Pb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zr(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function SE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _E,Ib,CE,kE,EE,qv=!1,nm=[],Pi=null,Ii=null,Di=null,Nu=new Map,Su=new Map,fi=[],J3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m1(e,t){switch(e){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Nu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(t.pointerId)}}function Nd(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=uh(t),t!==null&&Ib(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Z3(e,t,n,r,a){switch(t){case"focusin":return Pi=Nd(Pi,e,t,n,r,a),!0;case"dragenter":return Ii=Nd(Ii,e,t,n,r,a),!0;case"mouseover":return Di=Nd(Di,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Nu.set(i,Nd(Nu.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Su.set(i,Nd(Su.get(i)||null,e,t,n,r,a)),!0}return!1}function TE(e){var t=ko(e.target);if(t!==null){var n=ll(t);if(n!==null){if(t=n.tag,t===13){if(t=gE(n),t!==null){e.blockedOn=t,EE(e.priority,function(){CE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$v=r,n.target.dispatchEvent(r),$v=null}else return t=uh(n),t!==null&&Ib(t),e.blockedOn=n,!1;t.shift()}return!0}function f1(e,t,n){zm(e)&&n.delete(t)}function e6(){qv=!1,Pi!==null&&zm(Pi)&&(Pi=null),Ii!==null&&zm(Ii)&&(Ii=null),Di!==null&&zm(Di)&&(Di=null),Nu.forEach(f1),Su.forEach(f1)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,qv||(qv=!0,Ys.unstable_scheduleCallback(Ys.unstable_NormalPriority,e6)))}function _u(e){function t(a){return Sd(a,e)}if(0<nm.length){Sd(nm[0],e);for(var n=1;n<nm.length;n++){var r=nm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pi!==null&&Sd(Pi,e),Ii!==null&&Sd(Ii,e),Di!==null&&Sd(Di,e),Nu.forEach(t),Su.forEach(t),n=0;n<fi.length;n++)r=fi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fi.length&&(n=fi[0],n.blockedOn===null);)TE(n),n.blockedOn===null&&fi.shift()}var sc=Ka.ReactCurrentBatchConfig,gf=!0;function t6(e,t,n,r){var a=bt,i=sc.transition;sc.transition=null;try{bt=1,Db(e,t,n,r)}finally{bt=a,sc.transition=i}}function n6(e,t,n,r){var a=bt,i=sc.transition;sc.transition=null;try{bt=4,Db(e,t,n,r)}finally{bt=a,sc.transition=i}}function Db(e,t,n,r){if(gf){var a=Wv(e,t,n,r);if(a===null)sg(e,t,r,vf,n),m1(e,r);else if(Z3(a,e,t,n,r))r.stopPropagation();else if(m1(e,r),t&4&&-1<J3.indexOf(e)){for(;a!==null;){var i=uh(a);if(i!==null&&_E(i),i=Wv(e,t,n,r),i===null&&sg(e,t,r,vf,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else sg(e,t,r,null,n)}}var vf=null;function Wv(e,t,n,r){if(vf=null,e=Tb(r),e=ko(e),e!==null)if(t=ll(e),t===null)e=null;else if(n=t.tag,n===13){if(e=gE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vf=e,null}function AE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V3()){case Ab:return 1;case wE:return 4;case pf:case q3:return 16;case jE:return 536870912;default:return 16}default:return 16}}var ki=null,Rb=null,Um=null;function PE(){if(Um)return Um;var e,t=Rb,n=t.length,r,a="value"in ki?ki.value:ki.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Um=a.slice(e,1<r?1-r:void 0)}function Bm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sm(){return!0}function p1(){return!1}function er(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sm:p1,this.isPropagationStopped=p1,this}return Xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sm)},persist:function(){},isPersistent:sm}),t}var Jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mb=er(Jc),dh=Xt({},Jc,{view:0,detail:0}),s6=er(dh),Kx,Qx,_d,Sp=Xt({},dh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_d&&(_d&&e.type==="mousemove"?(Kx=e.screenX-_d.screenX,Qx=e.screenY-_d.screenY):Qx=Kx=0,_d=e),Kx)},movementY:function(e){return"movementY"in e?e.movementY:Qx}}),x1=er(Sp),r6=Xt({},Sp,{dataTransfer:0}),a6=er(r6),i6=Xt({},dh,{relatedTarget:0}),Yx=er(i6),o6=Xt({},Jc,{animationName:0,elapsedTime:0,pseudoElement:0}),l6=er(o6),c6=Xt({},Jc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),d6=er(c6),u6=Xt({},Jc,{data:0}),g1=er(u6),h6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=f6[e])?!!t[e]:!1}function Lb(){return p6}var x6=Xt({},dh,{key:function(e){if(e.key){var t=h6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?m6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lb,charCode:function(e){return e.type==="keypress"?Bm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g6=er(x6),v6=Xt({},Sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v1=er(v6),y6=Xt({},dh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lb}),b6=er(y6),w6=Xt({},Jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),j6=er(w6),N6=Xt({},Sp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S6=er(N6),_6=[9,13,27,32],Ob=za&&"CompositionEvent"in window,eu=null;za&&"documentMode"in document&&(eu=document.documentMode);var C6=za&&"TextEvent"in window&&!eu,IE=za&&(!Ob||eu&&8<eu&&11>=eu),y1=" ",b1=!1;function DE(e,t){switch(e){case"keyup":return _6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $l=!1;function k6(e,t){switch(e){case"compositionend":return RE(t);case"keypress":return t.which!==32?null:(b1=!0,y1);case"textInput":return e=t.data,e===y1&&b1?null:e;default:return null}}function E6(e,t){if($l)return e==="compositionend"||!Ob&&DE(e,t)?(e=PE(),Um=Rb=ki=null,$l=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IE&&t.locale!=="ko"?null:t.data;default:return null}}var T6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T6[e.type]:t==="textarea"}function ME(e,t,n,r){hE(r),t=yf(t,"onChange"),0<t.length&&(n=new Mb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tu=null,Cu=null;function A6(e){HE(e,0)}function _p(e){var t=Bl(e);if(aE(t))return e}function P6(e,t){if(e==="change")return t}var LE=!1;if(za){var Xx;if(za){var Jx="oninput"in document;if(!Jx){var j1=document.createElement("div");j1.setAttribute("oninput","return;"),Jx=typeof j1.oninput=="function"}Xx=Jx}else Xx=!1;LE=Xx&&(!document.documentMode||9<document.documentMode)}function N1(){tu&&(tu.detachEvent("onpropertychange",OE),Cu=tu=null)}function OE(e){if(e.propertyName==="value"&&_p(Cu)){var t=[];ME(t,Cu,e,Tb(e)),xE(A6,t)}}function I6(e,t,n){e==="focusin"?(N1(),tu=t,Cu=n,tu.attachEvent("onpropertychange",OE)):e==="focusout"&&N1()}function D6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _p(Cu)}function R6(e,t){if(e==="click")return _p(t)}function M6(e,t){if(e==="input"||e==="change")return _p(t)}function L6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vr=typeof Object.is=="function"?Object.is:L6;function ku(e,t){if(Vr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!kv.call(t,a)||!Vr(e[a],t[a]))return!1}return!0}function S1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _1(e,t){var n=S1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=S1(n)}}function FE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $E(){for(var e=window,t=hf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hf(e.document)}return t}function Fb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function O6(e){var t=$E(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&FE(n.ownerDocument.documentElement,n)){if(r!==null&&Fb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=_1(n,i);var o=_1(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var F6=za&&"documentMode"in document&&11>=document.documentMode,zl=null,Hv=null,nu=null,Gv=!1;function C1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gv||zl==null||zl!==hf(r)||(r=zl,"selectionStart"in r&&Fb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nu&&ku(nu,r)||(nu=r,r=yf(Hv,"onSelect"),0<r.length&&(t=new Mb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zl)))}function rm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ul={animationend:rm("Animation","AnimationEnd"),animationiteration:rm("Animation","AnimationIteration"),animationstart:rm("Animation","AnimationStart"),transitionend:rm("Transition","TransitionEnd")},Zx={},zE={};za&&(zE=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Cp(e){if(Zx[e])return Zx[e];if(!Ul[e])return e;var t=Ul[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zE)return Zx[e]=t[n];return e}var UE=Cp("animationend"),BE=Cp("animationiteration"),VE=Cp("animationstart"),qE=Cp("transitionend"),WE=new Map,k1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(e,t){WE.set(e,t),ol(t,[e])}for(var eg=0;eg<k1.length;eg++){var tg=k1[eg],$6=tg.toLowerCase(),z6=tg[0].toUpperCase()+tg.slice(1);Zi($6,"on"+z6)}Zi(UE,"onAnimationEnd");Zi(BE,"onAnimationIteration");Zi(VE,"onAnimationStart");Zi("dblclick","onDoubleClick");Zi("focusin","onFocus");Zi("focusout","onBlur");Zi(qE,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ud));function E1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$3(r,t,void 0,e),e.currentTarget=null}function HE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;E1(a,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;E1(a,l,d),i=c}}}if(ff)throw e=Bv,ff=!1,Bv=null,e}function Dt(e,t){var n=t[Jv];n===void 0&&(n=t[Jv]=new Set);var r=e+"__bubble";n.has(r)||(GE(t,e,2,!1),n.add(r))}function ng(e,t,n){var r=0;t&&(r|=4),GE(n,e,r,t)}var am="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[am]){e[am]=!0,eE.forEach(function(n){n!=="selectionchange"&&(U6.has(n)||ng(n,!1,e),ng(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[am]||(t[am]=!0,ng("selectionchange",!1,t))}}function GE(e,t,n,r){switch(AE(t)){case 1:var a=t6;break;case 4:a=n6;break;default:a=Db}n=a.bind(null,t,n,e),a=void 0,!Uv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function sg(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ko(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}xE(function(){var d=i,u=Tb(n),h=[];e:{var m=WE.get(e);if(m!==void 0){var p=Mb,v=e;switch(e){case"keypress":if(Bm(n)===0)break e;case"keydown":case"keyup":p=g6;break;case"focusin":v="focus",p=Yx;break;case"focusout":v="blur",p=Yx;break;case"beforeblur":case"afterblur":p=Yx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=x1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=a6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=b6;break;case UE:case BE:case VE:p=l6;break;case qE:p=j6;break;case"scroll":p=s6;break;case"wheel":p=S6;break;case"copy":case"cut":case"paste":p=d6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=v1}var x=(t&4)!==0,y=!x&&e==="scroll",g=x?m!==null?m+"Capture":null:m;x=[];for(var b=d,w;b!==null;){w=b;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,g!==null&&(C=ju(b,g),C!=null&&x.push(Tu(b,C,w)))),y)break;b=b.return}0<x.length&&(m=new p(m,v,null,n,u),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==$v&&(v=n.relatedTarget||n.fromElement)&&(ko(v)||v[Ua]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=d,v=v?ko(v):null,v!==null&&(y=ll(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=d),p!==v)){if(x=x1,C="onMouseLeave",g="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=v1,C="onPointerLeave",g="onPointerEnter",b="pointer"),y=p==null?m:Bl(p),w=v==null?m:Bl(v),m=new x(C,b+"leave",p,n,u),m.target=y,m.relatedTarget=w,C=null,ko(u)===d&&(x=new x(g,b+"enter",v,n,u),x.target=w,x.relatedTarget=y,C=x),y=C,p&&v)t:{for(x=p,g=v,b=0,w=x;w;w=bl(w))b++;for(w=0,C=g;C;C=bl(C))w++;for(;0<b-w;)x=bl(x),b--;for(;0<w-b;)g=bl(g),w--;for(;b--;){if(x===g||g!==null&&x===g.alternate)break t;x=bl(x),g=bl(g)}x=null}else x=null;p!==null&&T1(h,m,p,x,!1),v!==null&&y!==null&&T1(h,y,v,x,!0)}}e:{if(m=d?Bl(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var _=P6;else if(w1(m))if(LE)_=M6;else{_=D6;var S=I6}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=R6);if(_&&(_=_(e,d))){ME(h,_,n,u);break e}S&&S(e,m,d),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Rv(m,"number",m.value)}switch(S=d?Bl(d):window,e){case"focusin":(w1(S)||S.contentEditable==="true")&&(zl=S,Hv=d,nu=null);break;case"focusout":nu=Hv=zl=null;break;case"mousedown":Gv=!0;break;case"contextmenu":case"mouseup":case"dragend":Gv=!1,C1(h,n,u);break;case"selectionchange":if(F6)break;case"keydown":case"keyup":C1(h,n,u)}var N;if(Ob)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else $l?DE(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(IE&&n.locale!=="ko"&&($l||j!=="onCompositionStart"?j==="onCompositionEnd"&&$l&&(N=PE()):(ki=u,Rb="value"in ki?ki.value:ki.textContent,$l=!0)),S=yf(d,j),0<S.length&&(j=new g1(j,e,null,n,u),h.push({event:j,listeners:S}),N?j.data=N:(N=RE(n),N!==null&&(j.data=N)))),(N=C6?k6(e,n):E6(e,n))&&(d=yf(d,"onBeforeInput"),0<d.length&&(u=new g1("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=N))}HE(h,t)})}function Tu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yf(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ju(e,n),i!=null&&r.unshift(Tu(e,i,a)),i=ju(e,t),i!=null&&r.push(Tu(e,i,a))),e=e.return}return r}function bl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function T1(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=ju(n,i),c!=null&&o.unshift(Tu(n,c,l))):a||(c=ju(n,i),c!=null&&o.push(Tu(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var B6=/\r\n?/g,V6=/\u0000|\uFFFD/g;function A1(e){return(typeof e=="string"?e:""+e).replace(B6,`
`).replace(V6,"")}function im(e,t,n){if(t=A1(t),A1(e)!==t&&n)throw Error(fe(425))}function bf(){}var Kv=null,Qv=null;function Yv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xv=typeof setTimeout=="function"?setTimeout:void 0,q6=typeof clearTimeout=="function"?clearTimeout:void 0,P1=typeof Promise=="function"?Promise:void 0,W6=typeof queueMicrotask=="function"?queueMicrotask:typeof P1<"u"?function(e){return P1.resolve(null).then(e).catch(H6)}:Xv;function H6(e){setTimeout(function(){throw e})}function rg(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),_u(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);_u(t)}function Ri(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function I1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zc=Math.random().toString(36).slice(2),oa="__reactFiber$"+Zc,Au="__reactProps$"+Zc,Ua="__reactContainer$"+Zc,Jv="__reactEvents$"+Zc,G6="__reactListeners$"+Zc,K6="__reactHandles$"+Zc;function ko(e){var t=e[oa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ua]||n[oa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=I1(e);e!==null;){if(n=e[oa])return n;e=I1(e)}return t}e=n,n=e.parentNode}return null}function uh(e){return e=e[oa]||e[Ua],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function kp(e){return e[Au]||null}var Zv=[],Vl=-1;function eo(e){return{current:e}}function Rt(e){0>Vl||(e.current=Zv[Vl],Zv[Vl]=null,Vl--)}function Et(e,t){Vl++,Zv[Vl]=e.current,e.current=t}var qi={},Zn=eo(qi),Ss=eo(!1),qo=qi;function Dc(e,t){var n=e.type.contextTypes;if(!n)return qi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _s(e){return e=e.childContextTypes,e!=null}function wf(){Rt(Ss),Rt(Zn)}function D1(e,t,n){if(Zn.current!==qi)throw Error(fe(168));Et(Zn,t),Et(Ss,n)}function KE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(fe(108,I3(e)||"Unknown",a));return Xt({},n,r)}function jf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qi,qo=Zn.current,Et(Zn,e),Et(Ss,Ss.current),!0}function R1(e,t,n){var r=e.stateNode;if(!r)throw Error(fe(169));n?(e=KE(e,t,qo),r.__reactInternalMemoizedMergedChildContext=e,Rt(Ss),Rt(Zn),Et(Zn,e)):Rt(Ss),Et(Ss,n)}var Pa=null,Ep=!1,ag=!1;function QE(e){Pa===null?Pa=[e]:Pa.push(e)}function Q6(e){Ep=!0,QE(e)}function to(){if(!ag&&Pa!==null){ag=!0;var e=0,t=bt;try{var n=Pa;for(bt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Pa=null,Ep=!1}catch(a){throw Pa!==null&&(Pa=Pa.slice(e+1)),bE(Ab,to),a}finally{bt=t,ag=!1}}return null}var ql=[],Wl=0,Nf=null,Sf=0,cr=[],dr=0,Wo=null,Da=1,Ra="";function fo(e,t){ql[Wl++]=Sf,ql[Wl++]=Nf,Nf=e,Sf=t}function YE(e,t,n){cr[dr++]=Da,cr[dr++]=Ra,cr[dr++]=Wo,Wo=e;var r=Da;e=Ra;var a=32-zr(r)-1;r&=~(1<<a),n+=1;var i=32-zr(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Da=1<<32-zr(t)+a|n<<a|r,Ra=i+e}else Da=1<<i|n<<a|r,Ra=e}function $b(e){e.return!==null&&(fo(e,1),YE(e,1,0))}function zb(e){for(;e===Nf;)Nf=ql[--Wl],ql[Wl]=null,Sf=ql[--Wl],ql[Wl]=null;for(;e===Wo;)Wo=cr[--dr],cr[dr]=null,Ra=cr[--dr],cr[dr]=null,Da=cr[--dr],cr[dr]=null}var Vs=null,zs=null,Ft=!1,Or=null;function XE(e,t){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function M1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vs=e,zs=Ri(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vs=e,zs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wo!==null?{id:Da,overflow:Ra}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vs=e,zs=null,!0):!1;default:return!1}}function ey(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ty(e){if(Ft){var t=zs;if(t){var n=t;if(!M1(e,t)){if(ey(e))throw Error(fe(418));t=Ri(n.nextSibling);var r=Vs;t&&M1(e,t)?XE(r,n):(e.flags=e.flags&-4097|2,Ft=!1,Vs=e)}}else{if(ey(e))throw Error(fe(418));e.flags=e.flags&-4097|2,Ft=!1,Vs=e}}}function L1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vs=e}function om(e){if(e!==Vs)return!1;if(!Ft)return L1(e),Ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yv(e.type,e.memoizedProps)),t&&(t=zs)){if(ey(e))throw JE(),Error(fe(418));for(;t;)XE(e,t),t=Ri(t.nextSibling)}if(L1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zs=Ri(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zs=null}}else zs=Vs?Ri(e.stateNode.nextSibling):null;return!0}function JE(){for(var e=zs;e;)e=Ri(e.nextSibling)}function Rc(){zs=Vs=null,Ft=!1}function Ub(e){Or===null?Or=[e]:Or.push(e)}var Y6=Ka.ReactCurrentBatchConfig;function Cd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,e))}return e}function lm(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function O1(e){var t=e._init;return t(e._payload)}function ZE(e){function t(g,b){if(e){var w=g.deletions;w===null?(g.deletions=[b],g.flags|=16):w.push(b)}}function n(g,b){if(!e)return null;for(;b!==null;)t(g,b),b=b.sibling;return null}function r(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function a(g,b){return g=Fi(g,b),g.index=0,g.sibling=null,g}function i(g,b,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<b?(g.flags|=2,b):w):(g.flags|=2,b)):(g.flags|=1048576,b)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,b,w,C){return b===null||b.tag!==6?(b=hg(w,g.mode,C),b.return=g,b):(b=a(b,w),b.return=g,b)}function c(g,b,w,C){var _=w.type;return _===Fl?u(g,b,w.props.children,C,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===hi&&O1(_)===b.type)?(C=a(b,w.props),C.ref=Cd(g,b,w),C.return=g,C):(C=Qm(w.type,w.key,w.props,null,g.mode,C),C.ref=Cd(g,b,w),C.return=g,C)}function d(g,b,w,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=mg(w,g.mode,C),b.return=g,b):(b=a(b,w.children||[]),b.return=g,b)}function u(g,b,w,C,_){return b===null||b.tag!==7?(b=zo(w,g.mode,C,_),b.return=g,b):(b=a(b,w),b.return=g,b)}function h(g,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=hg(""+b,g.mode,w),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xh:return w=Qm(b.type,b.key,b.props,null,g.mode,w),w.ref=Cd(g,null,b),w.return=g,w;case Ol:return b=mg(b,g.mode,w),b.return=g,b;case hi:var C=b._init;return h(g,C(b._payload),w)}if($d(b)||wd(b))return b=zo(b,g.mode,w,null),b.return=g,b;lm(g,b)}return null}function m(g,b,w,C){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(g,b,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xh:return w.key===_?c(g,b,w,C):null;case Ol:return w.key===_?d(g,b,w,C):null;case hi:return _=w._init,m(g,b,_(w._payload),C)}if($d(w)||wd(w))return _!==null?null:u(g,b,w,C,null);lm(g,w)}return null}function p(g,b,w,C,_){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(w)||null,l(b,g,""+C,_);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xh:return g=g.get(C.key===null?w:C.key)||null,c(b,g,C,_);case Ol:return g=g.get(C.key===null?w:C.key)||null,d(b,g,C,_);case hi:var S=C._init;return p(g,b,w,S(C._payload),_)}if($d(C)||wd(C))return g=g.get(w)||null,u(b,g,C,_,null);lm(b,C)}return null}function v(g,b,w,C){for(var _=null,S=null,N=b,j=b=0,k=null;N!==null&&j<w.length;j++){N.index>j?(k=N,N=null):k=N.sibling;var T=m(g,N,w[j],C);if(T===null){N===null&&(N=k);break}e&&N&&T.alternate===null&&t(g,N),b=i(T,b,j),S===null?_=T:S.sibling=T,S=T,N=k}if(j===w.length)return n(g,N),Ft&&fo(g,j),_;if(N===null){for(;j<w.length;j++)N=h(g,w[j],C),N!==null&&(b=i(N,b,j),S===null?_=N:S.sibling=N,S=N);return Ft&&fo(g,j),_}for(N=r(g,N);j<w.length;j++)k=p(N,g,j,w[j],C),k!==null&&(e&&k.alternate!==null&&N.delete(k.key===null?j:k.key),b=i(k,b,j),S===null?_=k:S.sibling=k,S=k);return e&&N.forEach(function(A){return t(g,A)}),Ft&&fo(g,j),_}function x(g,b,w,C){var _=wd(w);if(typeof _!="function")throw Error(fe(150));if(w=_.call(w),w==null)throw Error(fe(151));for(var S=_=null,N=b,j=b=0,k=null,T=w.next();N!==null&&!T.done;j++,T=w.next()){N.index>j?(k=N,N=null):k=N.sibling;var A=m(g,N,T.value,C);if(A===null){N===null&&(N=k);break}e&&N&&A.alternate===null&&t(g,N),b=i(A,b,j),S===null?_=A:S.sibling=A,S=A,N=k}if(T.done)return n(g,N),Ft&&fo(g,j),_;if(N===null){for(;!T.done;j++,T=w.next())T=h(g,T.value,C),T!==null&&(b=i(T,b,j),S===null?_=T:S.sibling=T,S=T);return Ft&&fo(g,j),_}for(N=r(g,N);!T.done;j++,T=w.next())T=p(N,g,j,T.value,C),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?j:T.key),b=i(T,b,j),S===null?_=T:S.sibling=T,S=T);return e&&N.forEach(function(R){return t(g,R)}),Ft&&fo(g,j),_}function y(g,b,w,C){if(typeof w=="object"&&w!==null&&w.type===Fl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xh:e:{for(var _=w.key,S=b;S!==null;){if(S.key===_){if(_=w.type,_===Fl){if(S.tag===7){n(g,S.sibling),b=a(S,w.props.children),b.return=g,g=b;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===hi&&O1(_)===S.type){n(g,S.sibling),b=a(S,w.props),b.ref=Cd(g,S,w),b.return=g,g=b;break e}n(g,S);break}else t(g,S);S=S.sibling}w.type===Fl?(b=zo(w.props.children,g.mode,C,w.key),b.return=g,g=b):(C=Qm(w.type,w.key,w.props,null,g.mode,C),C.ref=Cd(g,b,w),C.return=g,g=C)}return o(g);case Ol:e:{for(S=w.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(g,b.sibling),b=a(b,w.children||[]),b.return=g,g=b;break e}else{n(g,b);break}else t(g,b);b=b.sibling}b=mg(w,g.mode,C),b.return=g,g=b}return o(g);case hi:return S=w._init,y(g,b,S(w._payload),C)}if($d(w))return v(g,b,w,C);if(wd(w))return x(g,b,w,C);lm(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(g,b.sibling),b=a(b,w),b.return=g,g=b):(n(g,b),b=hg(w,g.mode,C),b.return=g,g=b),o(g)):n(g,b)}return y}var Mc=ZE(!0),eT=ZE(!1),_f=eo(null),Cf=null,Hl=null,Bb=null;function Vb(){Bb=Hl=Cf=null}function qb(e){var t=_f.current;Rt(_f),e._currentValue=t}function ny(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rc(e,t){Cf=e,Bb=Hl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ws=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(Bb!==e)if(e={context:e,memoizedValue:t,next:null},Hl===null){if(Cf===null)throw Error(fe(308));Hl=e,Cf.dependencies={lanes:0,firstContext:e}}else Hl=Hl.next=e;return t}var Eo=null;function Wb(e){Eo===null?Eo=[e]:Eo.push(e)}function tT(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Wb(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ba(e,r)}function Ba(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var mi=!1;function Hb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ht&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ba(e,n)}return a=r.interleaved,a===null?(t.next=t,Wb(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ba(e,n)}function Vm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pb(e,n)}}function F1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function kf(e,t,n,r){var a=e.updateQueue;mi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(m=t,p=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=Xt({},h,m);break e;case 2:mi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Go|=o,e.lanes=o,e.memoizedState=h}}function $1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(fe(191,a));a.call(r)}}}var hh={},da=eo(hh),Pu=eo(hh),Iu=eo(hh);function To(e){if(e===hh)throw Error(fe(174));return e}function Gb(e,t){switch(Et(Iu,t),Et(Pu,e),Et(da,hh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lv(t,e)}Rt(da),Et(da,t)}function Lc(){Rt(da),Rt(Pu),Rt(Iu)}function sT(e){To(Iu.current);var t=To(da.current),n=Lv(t,e.type);t!==n&&(Et(Pu,e),Et(da,n))}function Kb(e){Pu.current===e&&(Rt(da),Rt(Pu))}var qt=eo(0);function Ef(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ig=[];function Qb(){for(var e=0;e<ig.length;e++)ig[e]._workInProgressVersionPrimary=null;ig.length=0}var qm=Ka.ReactCurrentDispatcher,og=Ka.ReactCurrentBatchConfig,Ho=0,Ht=null,bn=null,Sn=null,Tf=!1,su=!1,Du=0,X6=0;function Bn(){throw Error(fe(321))}function Yb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vr(e[n],t[n]))return!1;return!0}function Xb(e,t,n,r,a,i){if(Ho=i,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qm.current=e===null||e.memoizedState===null?tF:nF,e=n(r,a),su){i=0;do{if(su=!1,Du=0,25<=i)throw Error(fe(301));i+=1,Sn=bn=null,t.updateQueue=null,qm.current=sF,e=n(r,a)}while(su)}if(qm.current=Af,t=bn!==null&&bn.next!==null,Ho=0,Sn=bn=Ht=null,Tf=!1,t)throw Error(fe(300));return e}function Jb(){var e=Du!==0;return Du=0,e}function Zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Ht.memoizedState=Sn=e:Sn=Sn.next=e,Sn}function vr(){if(bn===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=bn.next;var t=Sn===null?Ht.memoizedState:Sn.next;if(t!==null)Sn=t,bn=e;else{if(e===null)throw Error(fe(310));bn=e,e={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Sn===null?Ht.memoizedState=Sn=e:Sn=Sn.next=e}return Sn}function Ru(e,t){return typeof t=="function"?t(e):t}function lg(e){var t=vr(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=bn,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ho&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Ht.lanes|=u,Go|=u}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Vr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Ht.lanes|=i,Go|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cg(e){var t=vr(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Vr(i,t.memoizedState)||(ws=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function rT(){}function aT(e,t){var n=Ht,r=vr(),a=t(),i=!Vr(r.memoizedState,a);if(i&&(r.memoizedState=a,ws=!0),r=r.queue,Zb(lT.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Sn!==null&&Sn.memoizedState.tag&1){if(n.flags|=2048,Mu(9,oT.bind(null,n,r,a,t),void 0,null),Cn===null)throw Error(fe(349));Ho&30||iT(n,t,a)}return a}function iT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function oT(e,t,n,r){t.value=n,t.getSnapshot=r,cT(t)&&dT(e)}function lT(e,t,n){return n(function(){cT(t)&&dT(e)})}function cT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vr(e,n)}catch{return!0}}function dT(e){var t=Ba(e,1);t!==null&&Ur(t,e,1,-1)}function z1(e){var t=Zr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:e},t.queue=e,e=e.dispatch=eF.bind(null,Ht,e),[t.memoizedState,e]}function Mu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function uT(){return vr().memoizedState}function Wm(e,t,n,r){var a=Zr();Ht.flags|=e,a.memoizedState=Mu(1|t,n,void 0,r===void 0?null:r)}function Tp(e,t,n,r){var a=vr();r=r===void 0?null:r;var i=void 0;if(bn!==null){var o=bn.memoizedState;if(i=o.destroy,r!==null&&Yb(r,o.deps)){a.memoizedState=Mu(t,n,i,r);return}}Ht.flags|=e,a.memoizedState=Mu(1|t,n,i,r)}function U1(e,t){return Wm(8390656,8,e,t)}function Zb(e,t){return Tp(2048,8,e,t)}function hT(e,t){return Tp(4,2,e,t)}function mT(e,t){return Tp(4,4,e,t)}function fT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pT(e,t,n){return n=n!=null?n.concat([e]):null,Tp(4,4,fT.bind(null,t,e),n)}function ew(){}function xT(e,t){var n=vr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function gT(e,t){var n=vr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vT(e,t,n){return Ho&21?(Vr(n,t)||(n=NE(),Ht.lanes|=n,Go|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n)}function J6(e,t){var n=bt;bt=n!==0&&4>n?n:4,e(!0);var r=og.transition;og.transition={};try{e(!1),t()}finally{bt=n,og.transition=r}}function yT(){return vr().memoizedState}function Z6(e,t,n){var r=Oi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bT(e))wT(t,n);else if(n=tT(e,t,n,r),n!==null){var a=ls();Ur(n,e,r,a),jT(n,t,r)}}function eF(e,t,n){var r=Oi(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bT(e))wT(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Vr(l,o)){var c=t.interleaved;c===null?(a.next=a,Wb(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=tT(e,t,a,r),n!==null&&(a=ls(),Ur(n,e,r,a),jT(n,t,r))}}function bT(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function wT(e,t){su=Tf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jT(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pb(e,n)}}var Af={readContext:gr,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},tF={readContext:gr,useCallback:function(e,t){return Zr().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:U1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wm(4194308,4,fT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wm(4,2,e,t)},useMemo:function(e,t){var n=Zr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Z6.bind(null,Ht,e),[r.memoizedState,e]},useRef:function(e){var t=Zr();return e={current:e},t.memoizedState=e},useState:z1,useDebugValue:ew,useDeferredValue:function(e){return Zr().memoizedState=e},useTransition:function(){var e=z1(!1),t=e[0];return e=J6.bind(null,e[1]),Zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ht,a=Zr();if(Ft){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=t(),Cn===null)throw Error(fe(349));Ho&30||iT(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,U1(lT.bind(null,r,i,e),[e]),r.flags|=2048,Mu(9,oT.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Zr(),t=Cn.identifierPrefix;if(Ft){var n=Ra,r=Da;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Du++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=X6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nF={readContext:gr,useCallback:xT,useContext:gr,useEffect:Zb,useImperativeHandle:pT,useInsertionEffect:hT,useLayoutEffect:mT,useMemo:gT,useReducer:lg,useRef:uT,useState:function(){return lg(Ru)},useDebugValue:ew,useDeferredValue:function(e){var t=vr();return vT(t,bn.memoizedState,e)},useTransition:function(){var e=lg(Ru)[0],t=vr().memoizedState;return[e,t]},useMutableSource:rT,useSyncExternalStore:aT,useId:yT,unstable_isNewReconciler:!1},sF={readContext:gr,useCallback:xT,useContext:gr,useEffect:Zb,useImperativeHandle:pT,useInsertionEffect:hT,useLayoutEffect:mT,useMemo:gT,useReducer:cg,useRef:uT,useState:function(){return cg(Ru)},useDebugValue:ew,useDeferredValue:function(e){var t=vr();return bn===null?t.memoizedState=e:vT(t,bn.memoizedState,e)},useTransition:function(){var e=cg(Ru)[0],t=vr().memoizedState;return[e,t]},useMutableSource:rT,useSyncExternalStore:aT,useId:yT,unstable_isNewReconciler:!1};function Dr(e,t){if(e&&e.defaultProps){t=Xt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sy(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ap={isMounted:function(e){return(e=e._reactInternals)?ll(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ls(),a=Oi(e),i=La(r,a);i.payload=t,n!=null&&(i.callback=n),t=Mi(e,i,a),t!==null&&(Ur(t,e,a,r),Vm(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ls(),a=Oi(e),i=La(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Mi(e,i,a),t!==null&&(Ur(t,e,a,r),Vm(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ls(),r=Oi(e),a=La(n,r);a.tag=2,t!=null&&(a.callback=t),t=Mi(e,a,r),t!==null&&(Ur(t,e,r,n),Vm(t,e,r))}};function B1(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ku(n,r)||!ku(a,i):!0}function NT(e,t,n){var r=!1,a=qi,i=t.contextType;return typeof i=="object"&&i!==null?i=gr(i):(a=_s(t)?qo:Zn.current,r=t.contextTypes,i=(r=r!=null)?Dc(e,a):qi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ap,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function V1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ap.enqueueReplaceState(t,t.state,null)}function ry(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Hb(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=gr(i):(i=_s(t)?qo:Zn.current,a.context=Dc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(sy(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ap.enqueueReplaceState(a,a.state,null),kf(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Oc(e,t){try{var n="",r=t;do n+=P3(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function dg(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ay(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rF=typeof WeakMap=="function"?WeakMap:Map;function ST(e,t,n){n=La(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){If||(If=!0,py=r),ay(e,t)},n}function _T(e,t,n){n=La(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ay(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ay(e,t),typeof r!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function q1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rF;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=vF.bind(null,e,t,n),t.then(e,e))}function W1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function H1(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=La(-1,1),t.tag=2,Mi(n,t,1))),n.lanes|=1),e)}var aF=Ka.ReactCurrentOwner,ws=!1;function as(e,t,n,r){t.child=e===null?eT(t,null,n,r):Mc(t,e.child,n,r)}function G1(e,t,n,r,a){n=n.render;var i=t.ref;return rc(t,a),r=Xb(e,t,n,r,i,a),n=Jb(),e!==null&&!ws?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Va(e,t,a)):(Ft&&n&&$b(t),t.flags|=1,as(e,t,r,a),t.child)}function K1(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!lw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,CT(e,t,i,r,a)):(e=Qm(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(o,r)&&e.ref===t.ref)return Va(e,t,a)}return t.flags|=1,e=Fi(i,r),e.ref=t.ref,e.return=t,t.child=e}function CT(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(ku(i,r)&&e.ref===t.ref)if(ws=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(ws=!0);else return t.lanes=e.lanes,Va(e,t,a)}return iy(e,t,n,r,a)}function kT(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Kl,Ls),Ls|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(Kl,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Et(Kl,Ls),Ls|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Et(Kl,Ls),Ls|=r;return as(e,t,a,n),t.child}function ET(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iy(e,t,n,r,a){var i=_s(n)?qo:Zn.current;return i=Dc(t,i),rc(t,a),n=Xb(e,t,n,r,i,a),r=Jb(),e!==null&&!ws?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Va(e,t,a)):(Ft&&r&&$b(t),t.flags|=1,as(e,t,n,a),t.child)}function Q1(e,t,n,r,a){if(_s(n)){var i=!0;jf(t)}else i=!1;if(rc(t,a),t.stateNode===null)Hm(e,t),NT(t,n,r),ry(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=gr(d):(d=_s(n)?qo:Zn.current,d=Dc(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&V1(t,o,r,d),mi=!1;var m=t.memoizedState;o.state=m,kf(t,r,o,a),c=t.memoizedState,l!==r||m!==c||Ss.current||mi?(typeof u=="function"&&(sy(t,n,u,r),c=t.memoizedState),(l=mi||B1(t,n,l,r,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,nT(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Dr(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=gr(c):(c=_s(n)?qo:Zn.current,c=Dc(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&V1(t,o,r,c),mi=!1,m=t.memoizedState,o.state=m,kf(t,r,o,a);var v=t.memoizedState;l!==h||m!==v||Ss.current||mi?(typeof p=="function"&&(sy(t,n,p,r),v=t.memoizedState),(d=mi||B1(t,n,d,r,m,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return oy(e,t,n,r,i,a)}function oy(e,t,n,r,a,i){ET(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&R1(t,n,!1),Va(e,t,i);r=t.stateNode,aF.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Mc(t,e.child,null,i),t.child=Mc(t,null,l,i)):as(e,t,l,i),t.memoizedState=r.state,a&&R1(t,n,!0),t.child}function TT(e){var t=e.stateNode;t.pendingContext?D1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&D1(e,t.context,!1),Gb(e,t.containerInfo)}function Y1(e,t,n,r,a){return Rc(),Ub(a),t.flags|=256,as(e,t,n,r),t.child}var ly={dehydrated:null,treeContext:null,retryLane:0};function cy(e){return{baseLanes:e,cachePool:null,transitions:null}}function AT(e,t,n){var r=t.pendingProps,a=qt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Et(qt,a&1),e===null)return ty(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Dp(o,r,0,null),e=zo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cy(n),t.memoizedState=ly,e):tw(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return iF(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Fi(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Fi(l,i):(i=zo(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?cy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ly,r}return i=e.child,e=i.sibling,r=Fi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function tw(e,t){return t=Dp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cm(e,t,n,r){return r!==null&&Ub(r),Mc(t,e.child,null,n),e=tw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iF(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=dg(Error(fe(422))),cm(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Dp({mode:"visible",children:r.children},a,0,null),i=zo(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Mc(t,e.child,null,o),t.child.memoizedState=cy(o),t.memoizedState=ly,i);if(!(t.mode&1))return cm(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(fe(419)),r=dg(i,r,void 0),cm(e,t,o,r)}if(l=(o&e.childLanes)!==0,ws||l){if(r=Cn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ba(e,a),Ur(r,e,a,-1))}return ow(),r=dg(Error(fe(421))),cm(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=yF.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,zs=Ri(a.nextSibling),Vs=t,Ft=!0,Or=null,e!==null&&(cr[dr++]=Da,cr[dr++]=Ra,cr[dr++]=Wo,Da=e.id,Ra=e.overflow,Wo=t),t=tw(t,r.children),t.flags|=4096,t)}function X1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ny(e.return,t,n)}function ug(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function PT(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(as(e,t,r.children,n),r=qt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&X1(e,n,t);else if(e.tag===19)X1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Et(qt,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ef(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),ug(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ef(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ug(t,!0,n,null,i);break;case"together":ug(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Va(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Go|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,n=Fi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function oF(e,t,n){switch(t.tag){case 3:TT(t),Rc();break;case 5:sT(t);break;case 1:_s(t.type)&&jf(t);break;case 4:Gb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Et(_f,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Et(qt,qt.current&1),t.flags|=128,null):n&t.child.childLanes?AT(e,t,n):(Et(qt,qt.current&1),e=Va(e,t,n),e!==null?e.sibling:null);Et(qt,qt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return PT(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Et(qt,qt.current),r)break;return null;case 22:case 23:return t.lanes=0,kT(e,t,n)}return Va(e,t,n)}var IT,dy,DT,RT;IT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dy=function(){};DT=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,To(da.current);var i=null;switch(n){case"input":a=Iv(e,a),r=Iv(e,r),i=[];break;case"select":a=Xt({},a,{value:void 0}),r=Xt({},r,{value:void 0}),i=[];break;case"textarea":a=Mv(e,a),r=Mv(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bf)}Ov(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bu.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Dt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};RT=function(e,t,n,r){n!==r&&(t.flags|=4)};function kd(e,t){if(!Ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lF(e,t,n){var r=t.pendingProps;switch(zb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(t),null;case 1:return _s(t.type)&&wf(),Vn(t),null;case 3:return r=t.stateNode,Lc(),Rt(Ss),Rt(Zn),Qb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(om(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Or!==null&&(vy(Or),Or=null))),dy(e,t),Vn(t),null;case 5:Kb(t);var a=To(Iu.current);if(n=t.type,e!==null&&t.stateNode!=null)DT(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(fe(166));return Vn(t),null}if(e=To(da.current),om(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[oa]=t,r[Au]=i,e=(t.mode&1)!==0,n){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(a=0;a<Ud.length;a++)Dt(Ud[a],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":i1(r,i),Dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Dt("invalid",r);break;case"textarea":l1(r,i),Dt("invalid",r)}Ov(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&im(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&im(r.textContent,l,e),a=["children",""+l]):bu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dt("scroll",r)}switch(n){case"input":Jh(r),o1(r,i,!0);break;case"textarea":Jh(r),c1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bf)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[oa]=t,e[Au]=r,IT(e,t,!1,!1),t.stateNode=e;e:{switch(o=Fv(n,r),n){case"dialog":Dt("cancel",e),Dt("close",e),a=r;break;case"iframe":case"object":case"embed":Dt("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ud.length;a++)Dt(Ud[a],e);a=r;break;case"source":Dt("error",e),a=r;break;case"img":case"image":case"link":Dt("error",e),Dt("load",e),a=r;break;case"details":Dt("toggle",e),a=r;break;case"input":i1(e,r),a=Iv(e,r),Dt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Xt({},r,{value:void 0}),Dt("invalid",e);break;case"textarea":l1(e,r),a=Mv(e,r),Dt("invalid",e);break;default:a=r}Ov(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?uE(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cE(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wu(e,c):typeof c=="number"&&wu(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Dt("scroll",e):c!=null&&_b(e,i,c,o))}switch(n){case"input":Jh(e),o1(e,r,!1);break;case"textarea":Jh(e),c1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ec(e,!!r.multiple,i,!1):r.defaultValue!=null&&ec(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vn(t),null;case 6:if(e&&t.stateNode!=null)RT(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(fe(166));if(n=To(Iu.current),To(da.current),om(t)){if(r=t.stateNode,n=t.memoizedProps,r[oa]=t,(i=r.nodeValue!==n)&&(e=Vs,e!==null))switch(e.tag){case 3:im(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&im(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oa]=t,t.stateNode=r}return Vn(t),null;case 13:if(Rt(qt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ft&&zs!==null&&t.mode&1&&!(t.flags&128))JE(),Rc(),t.flags|=98560,i=!1;else if(i=om(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(fe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[oa]=t}else Rc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vn(t),i=!1}else Or!==null&&(vy(Or),Or=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||qt.current&1?jn===0&&(jn=3):ow())),t.updateQueue!==null&&(t.flags|=4),Vn(t),null);case 4:return Lc(),dy(e,t),e===null&&Eu(t.stateNode.containerInfo),Vn(t),null;case 10:return qb(t.type._context),Vn(t),null;case 17:return _s(t.type)&&wf(),Vn(t),null;case 19:if(Rt(qt),i=t.memoizedState,i===null)return Vn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)kd(i,!1);else{if(jn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ef(e),o!==null){for(t.flags|=128,kd(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Et(qt,qt.current&1|2),t.child}e=e.sibling}i.tail!==null&&on()>Fc&&(t.flags|=128,r=!0,kd(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ef(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),kd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ft)return Vn(t),null}else 2*on()-i.renderingStartTime>Fc&&n!==1073741824&&(t.flags|=128,r=!0,kd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=on(),t.sibling=null,n=qt.current,Et(qt,r?n&1|2:n&1),t):(Vn(t),null);case 22:case 23:return iw(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ls&1073741824&&(Vn(t),t.subtreeFlags&6&&(t.flags|=8192)):Vn(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function cF(e,t){switch(zb(t),t.tag){case 1:return _s(t.type)&&wf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lc(),Rt(Ss),Rt(Zn),Qb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kb(t),null;case 13:if(Rt(qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));Rc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(qt),null;case 4:return Lc(),null;case 10:return qb(t.type._context),null;case 22:case 23:return iw(),null;case 24:return null;default:return null}}var dm=!1,Wn=!1,dF=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Gl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tn(e,t,r)}else n.current=null}function uy(e,t,n){try{n()}catch(r){tn(e,t,r)}}var J1=!1;function uF(e,t){if(Kv=gf,e=$E(),Fb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===a&&(l=o),m===i&&++u===r&&(c=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qv={focusedElem:e,selectionRange:n},gf=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:Dr(t.type,x),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(C){tn(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return v=J1,J1=!1,v}function ru(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&uy(t,n,i)}a=a.next}while(a!==r)}}function Pp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function MT(e){var t=e.alternate;t!==null&&(e.alternate=null,MT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oa],delete t[Au],delete t[Jv],delete t[G6],delete t[K6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function LT(e){return e.tag===5||e.tag===3||e.tag===4}function Z1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||LT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function my(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bf));else if(r!==4&&(e=e.child,e!==null))for(my(e,t,n),e=e.sibling;e!==null;)my(e,t,n),e=e.sibling}function fy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fy(e,t,n),e=e.sibling;e!==null;)fy(e,t,n),e=e.sibling}var Pn=null,Mr=!1;function ei(e,t,n){for(n=n.child;n!==null;)OT(e,t,n),n=n.sibling}function OT(e,t,n){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(Np,n)}catch{}switch(n.tag){case 5:Wn||Gl(n,t);case 6:var r=Pn,a=Mr;Pn=null,ei(e,t,n),Pn=r,Mr=a,Pn!==null&&(Mr?(e=Pn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pn.removeChild(n.stateNode));break;case 18:Pn!==null&&(Mr?(e=Pn,n=n.stateNode,e.nodeType===8?rg(e.parentNode,n):e.nodeType===1&&rg(e,n),_u(e)):rg(Pn,n.stateNode));break;case 4:r=Pn,a=Mr,Pn=n.stateNode.containerInfo,Mr=!0,ei(e,t,n),Pn=r,Mr=a;break;case 0:case 11:case 14:case 15:if(!Wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uy(n,t,o),a=a.next}while(a!==r)}ei(e,t,n);break;case 1:if(!Wn&&(Gl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tn(n,t,l)}ei(e,t,n);break;case 21:ei(e,t,n);break;case 22:n.mode&1?(Wn=(r=Wn)||n.memoizedState!==null,ei(e,t,n),Wn=r):ei(e,t,n);break;default:ei(e,t,n)}}function eS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dF),t.forEach(function(r){var a=bF.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Sr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pn=l.stateNode,Mr=!1;break e;case 3:Pn=l.stateNode.containerInfo,Mr=!0;break e;case 4:Pn=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(Pn===null)throw Error(fe(160));OT(i,o,a),Pn=null,Mr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){tn(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)FT(t,e),t=t.sibling}function FT(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sr(t,e),Yr(e),r&4){try{ru(3,e,e.return),Pp(3,e)}catch(x){tn(e,e.return,x)}try{ru(5,e,e.return)}catch(x){tn(e,e.return,x)}}break;case 1:Sr(t,e),Yr(e),r&512&&n!==null&&Gl(n,n.return);break;case 5:if(Sr(t,e),Yr(e),r&512&&n!==null&&Gl(n,n.return),e.flags&32){var a=e.stateNode;try{wu(a,"")}catch(x){tn(e,e.return,x)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&iE(a,i),Fv(l,o);var d=Fv(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?uE(a,h):u==="dangerouslySetInnerHTML"?cE(a,h):u==="children"?wu(a,h):_b(a,u,h,d)}switch(l){case"input":Dv(a,i);break;case"textarea":oE(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ec(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ec(a,!!i.multiple,i.defaultValue,!0):ec(a,!!i.multiple,i.multiple?[]:"",!1))}a[Au]=i}catch(x){tn(e,e.return,x)}}break;case 6:if(Sr(t,e),Yr(e),r&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){tn(e,e.return,x)}}break;case 3:if(Sr(t,e),Yr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_u(t.containerInfo)}catch(x){tn(e,e.return,x)}break;case 4:Sr(t,e),Yr(e);break;case 13:Sr(t,e),Yr(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(rw=on())),r&4&&eS(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Wn=(d=Wn)||u,Sr(t,e),Wn=d):Sr(t,e),Yr(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ke=e,u=e.child;u!==null;){for(h=ke=u;ke!==null;){switch(m=ke,p=m.child,m.tag){case 0:case 11:case 14:case 15:ru(4,m,m.return);break;case 1:Gl(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){tn(r,n,x)}}break;case 5:Gl(m,m.return);break;case 22:if(m.memoizedState!==null){nS(h);continue}}p!==null?(p.return=m,ke=p):nS(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dE("display",o))}catch(x){tn(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){tn(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sr(t,e),Yr(e),r&4&&eS(e);break;case 21:break;default:Sr(t,e),Yr(e)}}function Yr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(LT(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(wu(a,""),r.flags&=-33);var i=Z1(e);fy(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Z1(e);my(e,l,o);break;default:throw Error(fe(161))}}catch(c){tn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hF(e,t,n){ke=e,$T(e)}function $T(e,t,n){for(var r=(e.mode&1)!==0;ke!==null;){var a=ke,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||dm;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Wn;l=dm;var d=Wn;if(dm=o,(Wn=c)&&!d)for(ke=a;ke!==null;)o=ke,c=o.child,o.tag===22&&o.memoizedState!==null?sS(a):c!==null?(c.return=o,ke=c):sS(a);for(;i!==null;)ke=i,$T(i),i=i.sibling;ke=a,dm=l,Wn=d}tS(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ke=i):tS(e)}}function tS(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wn||Pp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Wn)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Dr(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$1(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$1(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&_u(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Wn||t.flags&512&&hy(t)}catch(m){tn(t,t.return,m)}}if(t===e){ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,ke=n;break}ke=t.return}}function nS(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ke=n;break}ke=t.return}}function sS(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pp(4,t)}catch(c){tn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){tn(t,a,c)}}var i=t.return;try{hy(t)}catch(c){tn(t,i,c)}break;case 5:var o=t.return;try{hy(t)}catch(c){tn(t,o,c)}}}catch(c){tn(t,t.return,c)}if(t===e){ke=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ke=l;break}ke=t.return}}var mF=Math.ceil,Pf=Ka.ReactCurrentDispatcher,nw=Ka.ReactCurrentOwner,mr=Ka.ReactCurrentBatchConfig,ht=0,Cn=null,mn=null,Dn=0,Ls=0,Kl=eo(0),jn=0,Lu=null,Go=0,Ip=0,sw=0,au=null,ys=null,rw=0,Fc=1/0,Ta=null,If=!1,py=null,Li=null,um=!1,Ei=null,Df=0,iu=0,xy=null,Gm=-1,Km=0;function ls(){return ht&6?on():Gm!==-1?Gm:Gm=on()}function Oi(e){return e.mode&1?ht&2&&Dn!==0?Dn&-Dn:Y6.transition!==null?(Km===0&&(Km=NE()),Km):(e=bt,e!==0||(e=window.event,e=e===void 0?16:AE(e.type)),e):1}function Ur(e,t,n,r){if(50<iu)throw iu=0,xy=null,Error(fe(185));ch(e,n,r),(!(ht&2)||e!==Cn)&&(e===Cn&&(!(ht&2)&&(Ip|=n),jn===4&&pi(e,Dn)),Cs(e,r),n===1&&ht===0&&!(t.mode&1)&&(Fc=on()+500,Ep&&to()))}function Cs(e,t){var n=e.callbackNode;Y3(e,t);var r=xf(e,e===Cn?Dn:0);if(r===0)n!==null&&h1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&h1(n),t===1)e.tag===0?Q6(rS.bind(null,e)):QE(rS.bind(null,e)),W6(function(){!(ht&6)&&to()}),n=null;else{switch(SE(r)){case 1:n=Ab;break;case 4:n=wE;break;case 16:n=pf;break;case 536870912:n=jE;break;default:n=pf}n=GT(n,zT.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zT(e,t){if(Gm=-1,Km=0,ht&6)throw Error(fe(327));var n=e.callbackNode;if(ac()&&e.callbackNode!==n)return null;var r=xf(e,e===Cn?Dn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Rf(e,r);else{t=r;var a=ht;ht|=2;var i=BT();(Cn!==e||Dn!==t)&&(Ta=null,Fc=on()+500,$o(e,t));do try{xF();break}catch(l){UT(e,l)}while(!0);Vb(),Pf.current=i,ht=a,mn!==null?t=0:(Cn=null,Dn=0,t=jn)}if(t!==0){if(t===2&&(a=Vv(e),a!==0&&(r=a,t=gy(e,a))),t===1)throw n=Lu,$o(e,0),pi(e,r),Cs(e,on()),n;if(t===6)pi(e,r);else{if(a=e.current.alternate,!(r&30)&&!fF(a)&&(t=Rf(e,r),t===2&&(i=Vv(e),i!==0&&(r=i,t=gy(e,i))),t===1))throw n=Lu,$o(e,0),pi(e,r),Cs(e,on()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(fe(345));case 2:po(e,ys,Ta);break;case 3:if(pi(e,r),(r&130023424)===r&&(t=rw+500-on(),10<t)){if(xf(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ls(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Xv(po.bind(null,e,ys,Ta),t);break}po(e,ys,Ta);break;case 4:if(pi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-zr(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mF(r/1960))-r,10<r){e.timeoutHandle=Xv(po.bind(null,e,ys,Ta),r);break}po(e,ys,Ta);break;case 5:po(e,ys,Ta);break;default:throw Error(fe(329))}}}return Cs(e,on()),e.callbackNode===n?zT.bind(null,e):null}function gy(e,t){var n=au;return e.current.memoizedState.isDehydrated&&($o(e,t).flags|=256),e=Rf(e,t),e!==2&&(t=ys,ys=n,t!==null&&vy(t)),e}function vy(e){ys===null?ys=e:ys.push.apply(ys,e)}function fF(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Vr(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pi(e,t){for(t&=~sw,t&=~Ip,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zr(t),r=1<<n;e[n]=-1,t&=~r}}function rS(e){if(ht&6)throw Error(fe(327));ac();var t=xf(e,0);if(!(t&1))return Cs(e,on()),null;var n=Rf(e,t);if(e.tag!==0&&n===2){var r=Vv(e);r!==0&&(t=r,n=gy(e,r))}if(n===1)throw n=Lu,$o(e,0),pi(e,t),Cs(e,on()),n;if(n===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,po(e,ys,Ta),Cs(e,on()),null}function aw(e,t){var n=ht;ht|=1;try{return e(t)}finally{ht=n,ht===0&&(Fc=on()+500,Ep&&to())}}function Ko(e){Ei!==null&&Ei.tag===0&&!(ht&6)&&ac();var t=ht;ht|=1;var n=mr.transition,r=bt;try{if(mr.transition=null,bt=1,e)return e()}finally{bt=r,mr.transition=n,ht=t,!(ht&6)&&to()}}function iw(){Ls=Kl.current,Rt(Kl)}function $o(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,q6(n)),mn!==null)for(n=mn.return;n!==null;){var r=n;switch(zb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wf();break;case 3:Lc(),Rt(Ss),Rt(Zn),Qb();break;case 5:Kb(r);break;case 4:Lc();break;case 13:Rt(qt);break;case 19:Rt(qt);break;case 10:qb(r.type._context);break;case 22:case 23:iw()}n=n.return}if(Cn=e,mn=e=Fi(e.current,null),Dn=Ls=t,jn=0,Lu=null,sw=Ip=Go=0,ys=au=null,Eo!==null){for(t=0;t<Eo.length;t++)if(n=Eo[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}Eo=null}return e}function UT(e,t){do{var n=mn;try{if(Vb(),qm.current=Af,Tf){for(var r=Ht.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Tf=!1}if(Ho=0,Sn=bn=Ht=null,su=!1,Du=0,nw.current=null,n===null||n.return===null){jn=1,Lu=t,mn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Dn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=W1(o);if(p!==null){p.flags&=-257,H1(p,o,l,i,t),p.mode&1&&q1(i,d,t),t=p,c=d;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){q1(i,d,t),ow();break e}c=Error(fe(426))}}else if(Ft&&l.mode&1){var y=W1(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),H1(y,o,l,i,t),Ub(Oc(c,l));break e}}i=c=Oc(c,l),jn!==4&&(jn=2),au===null?au=[i]:au.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=ST(i,c,t);F1(i,g);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Li===null||!Li.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=_T(i,l,t);F1(i,C);break e}}i=i.return}while(i!==null)}qT(n)}catch(_){t=_,mn===n&&n!==null&&(mn=n=n.return);continue}break}while(!0)}function BT(){var e=Pf.current;return Pf.current=Af,e===null?Af:e}function ow(){(jn===0||jn===3||jn===2)&&(jn=4),Cn===null||!(Go&268435455)&&!(Ip&268435455)||pi(Cn,Dn)}function Rf(e,t){var n=ht;ht|=2;var r=BT();(Cn!==e||Dn!==t)&&(Ta=null,$o(e,t));do try{pF();break}catch(a){UT(e,a)}while(!0);if(Vb(),ht=n,Pf.current=r,mn!==null)throw Error(fe(261));return Cn=null,Dn=0,jn}function pF(){for(;mn!==null;)VT(mn)}function xF(){for(;mn!==null&&!U3();)VT(mn)}function VT(e){var t=HT(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,t===null?qT(e):mn=t,nw.current=null}function qT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cF(n,t),n!==null){n.flags&=32767,mn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jn=6,mn=null;return}}else if(n=lF(n,t,Ls),n!==null){mn=n;return}if(t=t.sibling,t!==null){mn=t;return}mn=t=e}while(t!==null);jn===0&&(jn=5)}function po(e,t,n){var r=bt,a=mr.transition;try{mr.transition=null,bt=1,gF(e,t,n,r)}finally{mr.transition=a,bt=r}return null}function gF(e,t,n,r){do ac();while(Ei!==null);if(ht&6)throw Error(fe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(X3(e,i),e===Cn&&(mn=Cn=null,Dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||um||(um=!0,GT(pf,function(){return ac(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mr.transition,mr.transition=null;var o=bt;bt=1;var l=ht;ht|=4,nw.current=null,uF(e,n),FT(n,e),O6(Qv),gf=!!Kv,Qv=Kv=null,e.current=n,hF(n),B3(),ht=l,bt=o,mr.transition=i}else e.current=n;if(um&&(um=!1,Ei=e,Df=a),i=e.pendingLanes,i===0&&(Li=null),W3(n.stateNode),Cs(e,on()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(If)throw If=!1,e=py,py=null,e;return Df&1&&e.tag!==0&&ac(),i=e.pendingLanes,i&1?e===xy?iu++:(iu=0,xy=e):iu=0,to(),null}function ac(){if(Ei!==null){var e=SE(Df),t=mr.transition,n=bt;try{if(mr.transition=null,bt=16>e?16:e,Ei===null)var r=!1;else{if(e=Ei,Ei=null,Df=0,ht&6)throw Error(fe(331));var a=ht;for(ht|=4,ke=e.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ke=d;ke!==null;){var u=ke;switch(u.tag){case 0:case 11:case 15:ru(8,u,i)}var h=u.child;if(h!==null)h.return=u,ke=h;else for(;ke!==null;){u=ke;var m=u.sibling,p=u.return;if(MT(u),u===d){ke=null;break}if(m!==null){m.return=p,ke=m;break}ke=p}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ru(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ke=g;break e}ke=i.return}}var b=e.current;for(ke=b;ke!==null;){o=ke;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ke=w;else e:for(o=b;ke!==null;){if(l=ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pp(9,l)}}catch(_){tn(l,l.return,_)}if(l===o){ke=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,ke=C;break e}ke=l.return}}if(ht=a,to(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(Np,e)}catch{}r=!0}return r}finally{bt=n,mr.transition=t}}return!1}function aS(e,t,n){t=Oc(n,t),t=ST(e,t,1),e=Mi(e,t,1),t=ls(),e!==null&&(ch(e,1,t),Cs(e,t))}function tn(e,t,n){if(e.tag===3)aS(e,e,n);else for(;t!==null;){if(t.tag===3){aS(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Li===null||!Li.has(r))){e=Oc(n,e),e=_T(t,e,1),t=Mi(t,e,1),e=ls(),t!==null&&(ch(t,1,e),Cs(t,e));break}}t=t.return}}function vF(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ls(),e.pingedLanes|=e.suspendedLanes&n,Cn===e&&(Dn&n)===n&&(jn===4||jn===3&&(Dn&130023424)===Dn&&500>on()-rw?$o(e,0):sw|=n),Cs(e,t)}function WT(e,t){t===0&&(e.mode&1?(t=tm,tm<<=1,!(tm&130023424)&&(tm=4194304)):t=1);var n=ls();e=Ba(e,t),e!==null&&(ch(e,t,n),Cs(e,n))}function yF(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),WT(e,n)}function bF(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(t),WT(e,n)}var HT;HT=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ss.current)ws=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ws=!1,oF(e,t,n);ws=!!(e.flags&131072)}else ws=!1,Ft&&t.flags&1048576&&YE(t,Sf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hm(e,t),e=t.pendingProps;var a=Dc(t,Zn.current);rc(t,n),a=Xb(null,t,r,e,a,n);var i=Jb();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_s(r)?(i=!0,jf(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Hb(t),a.updater=Ap,t.stateNode=a,a._reactInternals=t,ry(t,r,e,n),t=oy(null,t,r,!0,i,n)):(t.tag=0,Ft&&i&&$b(t),as(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hm(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=jF(r),e=Dr(r,e),a){case 0:t=iy(null,t,r,e,n);break e;case 1:t=Q1(null,t,r,e,n);break e;case 11:t=G1(null,t,r,e,n);break e;case 14:t=K1(null,t,r,Dr(r.type,e),n);break e}throw Error(fe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),iy(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),Q1(e,t,r,a,n);case 3:e:{if(TT(t),e===null)throw Error(fe(387));r=t.pendingProps,i=t.memoizedState,a=i.element,nT(e,t),kf(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Oc(Error(fe(423)),t),t=Y1(e,t,r,n,a);break e}else if(r!==a){a=Oc(Error(fe(424)),t),t=Y1(e,t,r,n,a);break e}else for(zs=Ri(t.stateNode.containerInfo.firstChild),Vs=t,Ft=!0,Or=null,n=eT(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rc(),r===a){t=Va(e,t,n);break e}as(e,t,r,n)}t=t.child}return t;case 5:return sT(t),e===null&&ty(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Yv(r,a)?o=null:i!==null&&Yv(r,i)&&(t.flags|=32),ET(e,t),as(e,t,o,n),t.child;case 6:return e===null&&ty(t),null;case 13:return AT(e,t,n);case 4:return Gb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Mc(t,null,r,n):as(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),G1(e,t,r,a,n);case 7:return as(e,t,t.pendingProps,n),t.child;case 8:return as(e,t,t.pendingProps.children,n),t.child;case 12:return as(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Et(_f,r._currentValue),r._currentValue=o,i!==null)if(Vr(i.value,o)){if(i.children===a.children&&!Ss.current){t=Va(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=La(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ny(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ny(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}as(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,rc(t,n),a=gr(a),r=r(a),t.flags|=1,as(e,t,r,n),t.child;case 14:return r=t.type,a=Dr(r,t.pendingProps),a=Dr(r.type,a),K1(e,t,r,a,n);case 15:return CT(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),Hm(e,t),t.tag=1,_s(r)?(e=!0,jf(t)):e=!1,rc(t,n),NT(t,r,a),ry(t,r,a,n),oy(null,t,r,!0,e,n);case 19:return PT(e,t,n);case 22:return kT(e,t,n)}throw Error(fe(156,t.tag))};function GT(e,t){return bE(e,t)}function wF(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(e,t,n,r){return new wF(e,t,n,r)}function lw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jF(e){if(typeof e=="function")return lw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kb)return 11;if(e===Eb)return 14}return 2}function Fi(e,t){var n=e.alternate;return n===null?(n=hr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qm(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")lw(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Fl:return zo(n.children,a,i,t);case Cb:o=8,a|=8;break;case Ev:return e=hr(12,n,t,a|2),e.elementType=Ev,e.lanes=i,e;case Tv:return e=hr(13,n,t,a),e.elementType=Tv,e.lanes=i,e;case Av:return e=hr(19,n,t,a),e.elementType=Av,e.lanes=i,e;case sE:return Dp(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tE:o=10;break e;case nE:o=9;break e;case kb:o=11;break e;case Eb:o=14;break e;case hi:o=16,r=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=hr(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function zo(e,t,n,r){return e=hr(7,e,r,t),e.lanes=n,e}function Dp(e,t,n,r){return e=hr(22,e,r,t),e.elementType=sE,e.lanes=n,e.stateNode={isHidden:!1},e}function hg(e,t,n){return e=hr(6,e,null,t),e.lanes=n,e}function mg(e,t,n){return t=hr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NF(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gx(0),this.expirationTimes=Gx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gx(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cw(e,t,n,r,a,i,o,l,c){return e=new NF(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=hr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hb(i),e}function SF(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ol,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function KT(e){if(!e)return qi;e=e._reactInternals;e:{if(ll(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_s(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var n=e.type;if(_s(n))return KE(e,n,t)}return t}function QT(e,t,n,r,a,i,o,l,c){return e=cw(n,r,!0,e,a,i,o,l,c),e.context=KT(null),n=e.current,r=ls(),a=Oi(n),i=La(r,a),i.callback=t??null,Mi(n,i,a),e.current.lanes=a,ch(e,a,r),Cs(e,r),e}function Rp(e,t,n,r){var a=t.current,i=ls(),o=Oi(a);return n=KT(n),t.context===null?t.context=n:t.pendingContext=n,t=La(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mi(a,t,o),e!==null&&(Ur(e,a,o,i),Vm(e,a,o)),o}function Mf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function iS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dw(e,t){iS(e,t),(e=e.alternate)&&iS(e,t)}function _F(){return null}var YT=typeof reportError=="function"?reportError:function(e){console.error(e)};function uw(e){this._internalRoot=e}Mp.prototype.render=uw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));Rp(e,t,null,null)};Mp.prototype.unmount=uw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ko(function(){Rp(null,e,null,null)}),t[Ua]=null}};function Mp(e){this._internalRoot=e}Mp.prototype.unstable_scheduleHydration=function(e){if(e){var t=kE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fi.length&&t!==0&&t<fi[n].priority;n++);fi.splice(n,0,e),n===0&&TE(e)}};function hw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function oS(){}function CF(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=Mf(o);i.call(d)}}var o=QT(t,r,e,0,null,!1,!1,"",oS);return e._reactRootContainer=o,e[Ua]=o.current,Eu(e.nodeType===8?e.parentNode:e),Ko(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=Mf(c);l.call(d)}}var c=cw(e,0,!1,null,null,!1,!1,"",oS);return e._reactRootContainer=c,e[Ua]=c.current,Eu(e.nodeType===8?e.parentNode:e),Ko(function(){Rp(t,c,n,r)}),c}function Op(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Mf(o);l.call(c)}}Rp(t,o,e,a)}else o=CF(n,t,e,a,r);return Mf(o)}_E=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=zd(t.pendingLanes);n!==0&&(Pb(t,n|1),Cs(t,on()),!(ht&6)&&(Fc=on()+500,to()))}break;case 13:Ko(function(){var r=Ba(e,1);if(r!==null){var a=ls();Ur(r,e,1,a)}}),dw(e,1)}};Ib=function(e){if(e.tag===13){var t=Ba(e,134217728);if(t!==null){var n=ls();Ur(t,e,134217728,n)}dw(e,134217728)}};CE=function(e){if(e.tag===13){var t=Oi(e),n=Ba(e,t);if(n!==null){var r=ls();Ur(n,e,t,r)}dw(e,t)}};kE=function(){return bt};EE=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}};zv=function(e,t,n){switch(t){case"input":if(Dv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=kp(r);if(!a)throw Error(fe(90));aE(r),Dv(r,a)}}}break;case"textarea":oE(e,n);break;case"select":t=n.value,t!=null&&ec(e,!!n.multiple,t,!1)}};fE=aw;pE=Ko;var kF={usingClientEntryPoint:!1,Events:[uh,Bl,kp,hE,mE,aw]},Ed={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EF={bundleType:Ed.bundleType,version:Ed.version,rendererPackageName:Ed.rendererPackageName,rendererConfig:Ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vE(e),e===null?null:e.stateNode},findFiberByHostInstance:Ed.findFiberByHostInstance||_F,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{Np=hm.inject(EF),ca=hm}catch{}}Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kF;Zs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hw(t))throw Error(fe(200));return SF(e,t,null,n)};Zs.createRoot=function(e,t){if(!hw(e))throw Error(fe(299));var n=!1,r="",a=YT;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=cw(e,1,!1,null,null,n,!1,r,a),e[Ua]=t.current,Eu(e.nodeType===8?e.parentNode:e),new uw(t)};Zs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=vE(t),e=e===null?null:e.stateNode,e};Zs.flushSync=function(e){return Ko(e)};Zs.hydrate=function(e,t,n){if(!Lp(t))throw Error(fe(200));return Op(null,e,t,!0,n)};Zs.hydrateRoot=function(e,t,n){if(!hw(e))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=YT;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=QT(t,null,e,1,n??null,a,!1,i,o),e[Ua]=t.current,Eu(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Mp(t)};Zs.render=function(e,t,n){if(!Lp(t))throw Error(fe(200));return Op(null,e,t,!1,n)};Zs.unmountComponentAtNode=function(e){if(!Lp(e))throw Error(fe(40));return e._reactRootContainer?(Ko(function(){Op(null,null,e,!1,function(){e._reactRootContainer=null,e[Ua]=null})}),!0):!1};Zs.unstable_batchedUpdates=aw;Zs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lp(n))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return Op(e,t,n,!1,r)};Zs.version="18.3.1-next-f1338f8080-20240426";function XT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XT)}catch(e){console.error(e)}}XT(),X2.exports=Zs;var Qa=X2.exports;const mw=il(Qa);var JT,lS=Qa;JT=lS.createRoot,lS.hydrateRoot;const TF=1,AF=1e6;let fg=0;function PF(){return fg=(fg+1)%Number.MAX_SAFE_INTEGER,fg.toString()}const pg=new Map,cS=e=>{if(pg.has(e))return;const t=setTimeout(()=>{pg.delete(e),ou({type:"REMOVE_TOAST",toastId:e})},AF);pg.set(e,t)},IF=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,TF)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?cS(n):e.toasts.forEach(r=>{cS(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ym=[];let Xm={toasts:[]};function ou(e){Xm=IF(Xm,e),Ym.forEach(t=>{t(Xm)})}function yy({...e}){const t=PF(),n=a=>ou({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>ou({type:"DISMISS_TOAST",toastId:t});return ou({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function at(){const[e,t]=ge.useState(Xm);return ge.useEffect(()=>(Ym.push(t),()=>{const n=Ym.indexOf(t);n>-1&&Ym.splice(n,1)}),[e]),{...e,toast:yy,dismiss:n=>ou({type:"DISMISS_TOAST",toastId:n})}}function ue(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function DF(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Fp(...e){return t=>e.forEach(n=>DF(n,t))}function He(...e){return f.useCallback(Fp(...e),e)}function RF(e,t=[]){let n=[];function r(i,o){const l=f.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:p,...v}=h,x=(m==null?void 0:m[e][c])||l,y=f.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:y,children:p})}function u(h,m){const p=(m==null?void 0:m[e][c])||l,v=f.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,MF(a,...t)]}function MF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var ds=f.forwardRef((e,t)=>{const{children:n,...r}=e,a=f.Children.toArray(n),i=a.find(LF);if(i){const o=i.props.children,l=a.map(c=>c===i?f.Children.count(o)>1?f.Children.only(null):f.isValidElement(o)?o.props.children:null:c);return s.jsx(by,{...r,ref:t,children:f.isValidElement(o)?f.cloneElement(o,void 0,l):null})}return s.jsx(by,{...r,ref:t,children:n})});ds.displayName="Slot";var by=f.forwardRef((e,t)=>{const{children:n,...r}=e;if(f.isValidElement(n)){const a=FF(n);return f.cloneElement(n,{...OF(r,n.props),ref:t?Fp(t,a):a})}return f.Children.count(n)>1?f.Children.only(null):null});by.displayName="SlotClone";var fw=({children:e})=>s.jsx(s.Fragment,{children:e});function LF(e){return f.isValidElement(e)&&e.type===fw}function OF(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{i(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function FF(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function $p(e){const t=e+"CollectionProvider",[n,r]=RF(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:x}=p,y=ge.useRef(null),g=ge.useRef(new Map).current;return s.jsx(a,{scope:v,itemMap:g,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=ge.forwardRef((p,v)=>{const{scope:x,children:y}=p,g=i(l,x),b=He(v,g.collectionRef);return s.jsx(ds,{ref:b,children:y})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",h=ge.forwardRef((p,v)=>{const{scope:x,children:y,...g}=p,b=ge.useRef(null),w=He(v,b),C=i(d,x);return ge.useEffect(()=>(C.itemMap.set(b,{ref:b,...g}),()=>void C.itemMap.delete(b))),s.jsx(ds,{[u]:"",ref:w,children:y})});h.displayName=d;function m(p){const v=i(e+"CollectionConsumer",p);return ge.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const g=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((C,_)=>g.indexOf(C.ref.current)-g.indexOf(_.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,r]}function $F(e,t){const n=f.createContext(t),r=i=>{const{children:o,...l}=i,c=f.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=f.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function es(e,t=[]){let n=[];function r(i,o){const l=f.createContext(o),c=n.length;n=[...n,o];const d=h=>{var g;const{scope:m,children:p,...v}=h,x=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,y=f.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:y,children:p})};d.displayName=i+"Provider";function u(h,m){var x;const p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,v=f.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,zF(a,...t)]}function zF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var UF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=UF.reduce((e,t)=>{const n=f.forwardRef((r,a)=>{const{asChild:i,...o}=r,l=i?ds:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function pw(e,t){e&&Qa.flushSync(()=>e.dispatchEvent(t))}function $t(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function BF(e,t=globalThis==null?void 0:globalThis.document){const n=$t(e);f.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var VF="DismissableLayer",wy="dismissableLayer.update",qF="dismissableLayer.pointerDownOutside",WF="dismissableLayer.focusOutside",dS,ZT=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cl=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(ZT),[u,h]=f.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),v=He(t,N=>h(N)),x=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(y),b=u?x.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,C=b>=g,_=GF(N=>{const j=N.target,k=[...d.branches].some(T=>T.contains(j));!C||k||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},m),S=KF(N=>{const j=N.target;[...d.branches].some(T=>T.contains(j))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},m);return BF(N=>{b===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),f.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(dS=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),uS(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=dS)}},[u,m,n,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),uS())},[u,d]),f.useEffect(()=>{const N=()=>p({});return document.addEventListener(wy,N),()=>document.removeEventListener(wy,N)},[]),s.jsx(_e.div,{...c,ref:v,style:{pointerEvents:w?C?"auto":"none":void 0,...e.style},onFocusCapture:ue(e.onFocusCapture,S.onFocusCapture),onBlurCapture:ue(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ue(e.onPointerDownCapture,_.onPointerDownCapture)})});cl.displayName=VF;var HF="DismissableLayerBranch",eA=f.forwardRef((e,t)=>{const n=f.useContext(ZT),r=f.useRef(null),a=He(t,r);return f.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(_e.div,{...e,ref:a})});eA.displayName=HF;function GF(e,t=globalThis==null?void 0:globalThis.document){const n=$t(e),r=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){tA(qF,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function KF(e,t=globalThis==null?void 0:globalThis.document){const n=$t(e),r=f.useRef(!1);return f.useEffect(()=>{const a=i=>{i.target&&!r.current&&tA(WF,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function uS(){const e=new CustomEvent(wy);document.dispatchEvent(e)}function tA(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?pw(a,i):a.dispatchEvent(i)}var QF=cl,YF=eA,fn=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},XF="Portal",ed=f.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=f.useState(!1);fn(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?mw.createPortal(s.jsx(_e.div,{...r,ref:t}),o):null});ed.displayName=XF;function JF(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var xn=e=>{const{present:t,children:n}=e,r=ZF(t),a=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),i=He(r.ref,e$(a));return typeof n=="function"||r.isPresent?f.cloneElement(a,{ref:i}):null};xn.displayName="Presence";function ZF(e){const[t,n]=f.useState(),r=f.useRef({}),a=f.useRef(e),i=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=JF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=mm(r.current);i.current=l==="mounted"?d:"none"},[l]),fn(()=>{const d=r.current,u=a.current;if(u!==e){const m=i.current,p=mm(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),fn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=p=>{const x=mm(r.current).includes(p.animationName);if(p.target===t&&x&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=p=>{p.target===t&&(i.current=mm(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function mm(e){return(e==null?void 0:e.animationName)||"none"}function e$(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Xs({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=t$({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:r,l=$t(n),c=f.useCallback(d=>{if(i){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else a(d)},[i,e,a,l]);return[o,c]}function t$({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,a=f.useRef(r),i=$t(t);return f.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),n}var n$="VisuallyHidden",mh=f.forwardRef((e,t)=>s.jsx(_e.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));mh.displayName=n$;var s$=mh,xw="ToastProvider",[gw,r$,a$]=$p("Toast"),[nA,Uce]=es("Toast",[a$]),[i$,zp]=nA(xw),sA=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=f.useState(null),[d,u]=f.useState(0),h=f.useRef(!1),m=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${xw}\`. Expected non-empty \`string\`.`),s.jsx(gw.Provider,{scope:t,children:s.jsx(i$,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(p=>p+1),[]),onToastRemove:f.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};sA.displayName=xw;var rA="ToastViewport",o$=["F8"],jy="toast.viewportPause",Ny="toast.viewportResume",aA=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=o$,label:a="Notifications ({hotkey})",...i}=e,o=zp(rA,n),l=r$(n),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=He(t,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;f.useEffect(()=>{const y=g=>{var w;r.length!==0&&r.every(C=>g[C]||g.code===C)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),f.useEffect(()=>{const y=c.current,g=h.current;if(v&&y&&g){const b=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(jy);g.dispatchEvent(S),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(Ny);g.dispatchEvent(S),o.isClosePausedRef.current=!1}},C=S=>{!y.contains(S.relatedTarget)&&w()},_=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",b),y.addEventListener("focusout",C),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const x=f.useCallback(({tabbingDirection:y})=>{const b=l().map(w=>{const C=w.ref.current,_=[C,...b$(C)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?b.reverse():b).flat()},[l]);return f.useEffect(()=>{const y=h.current;if(y){const g=b=>{var _,S,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const j=document.activeElement,k=b.shiftKey;if(b.target===y&&k){(_=d.current)==null||_.focus();return}const R=x({tabbingDirection:k?"backwards":"forwards"}),F=R.findIndex(O=>O===j);xg(R.slice(F+1))?b.preventDefault():k?(S=d.current)==null||S.focus():(N=u.current)==null||N.focus()}};return y.addEventListener("keydown",g),()=>y.removeEventListener("keydown",g)}},[l,x]),s.jsxs(YF,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(Sy,{ref:d,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"forwards"});xg(y)}}),s.jsx(gw.Slot,{scope:n,children:s.jsx(_e.ol,{tabIndex:-1,...i,ref:m})}),v&&s.jsx(Sy,{ref:u,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"backwards"});xg(y)}})]})});aA.displayName=rA;var iA="ToastFocusProxy",Sy=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=zp(iA,n);return s.jsx(mh,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});Sy.displayName=iA;var Up="Toast",l$="toast.swipeStart",c$="toast.swipeMove",d$="toast.swipeCancel",u$="toast.swipeEnd",oA=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l=!0,c]=Xs({prop:r,defaultProp:a,onChange:i});return s.jsx(xn,{present:n||l,children:s.jsx(f$,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:$t(e.onPause),onResume:$t(e.onResume),onSwipeStart:ue(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ue(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});oA.displayName=Up;var[h$,m$]=nA(Up,{onClose(){}}),f$=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:p,...v}=e,x=zp(Up,n),[y,g]=f.useState(null),b=He(t,O=>g(O)),w=f.useRef(null),C=f.useRef(null),_=a||x.duration,S=f.useRef(0),N=f.useRef(_),j=f.useRef(0),{onToastAdd:k,onToastRemove:T}=x,A=$t(()=>{var U;(y==null?void 0:y.contains(document.activeElement))&&((U=x.viewport)==null||U.focus()),o()}),R=f.useCallback(O=>{!O||O===1/0||(window.clearTimeout(j.current),S.current=new Date().getTime(),j.current=window.setTimeout(A,O))},[A]);f.useEffect(()=>{const O=x.viewport;if(O){const U=()=>{R(N.current),d==null||d()},M=()=>{const B=new Date().getTime()-S.current;N.current=N.current-B,window.clearTimeout(j.current),c==null||c()};return O.addEventListener(jy,M),O.addEventListener(Ny,U),()=>{O.removeEventListener(jy,M),O.removeEventListener(Ny,U)}}},[x.viewport,_,c,d,R]),f.useEffect(()=>{i&&!x.isClosePausedRef.current&&R(_)},[i,_,x.isClosePausedRef,R]),f.useEffect(()=>(k(),()=>T()),[k,T]);const F=f.useMemo(()=>y?fA(y):null,[y]);return x.viewport?s.jsxs(s.Fragment,{children:[F&&s.jsx(p$,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),s.jsx(h$,{scope:n,onClose:A,children:Qa.createPortal(s.jsx(gw.ItemSlot,{scope:n,children:s.jsx(QF,{asChild:!0,onEscapeKeyDown:ue(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||A(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(_e.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ue(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:ue(e.onPointerDown,O=>{O.button===0&&(w.current={x:O.clientX,y:O.clientY})}),onPointerMove:ue(e.onPointerMove,O=>{if(!w.current)return;const U=O.clientX-w.current.x,M=O.clientY-w.current.y,B=!!C.current,D=["left","right"].includes(x.swipeDirection),E=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,I=D?E(0,U):0,q=D?0:E(0,M),$=O.pointerType==="touch"?10:2,P={x:I,y:q},Z={originalEvent:O,delta:P};B?(C.current=P,fm(c$,h,Z,{discrete:!1})):hS(P,x.swipeDirection,$)?(C.current=P,fm(l$,u,Z,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(U)>$||Math.abs(M)>$)&&(w.current=null)}),onPointerUp:ue(e.onPointerUp,O=>{const U=C.current,M=O.target;if(M.hasPointerCapture(O.pointerId)&&M.releasePointerCapture(O.pointerId),C.current=null,w.current=null,U){const B=O.currentTarget,D={originalEvent:O,delta:U};hS(U,x.swipeDirection,x.swipeThreshold)?fm(u$,p,D,{discrete:!0}):fm(d$,m,D,{discrete:!0}),B.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),p$=e=>{const{__scopeToast:t,children:n,...r}=e,a=zp(Up,t),[i,o]=f.useState(!1),[l,c]=f.useState(!1);return v$(()=>o(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(ed,{asChild:!0,children:s.jsx(mh,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},x$="ToastTitle",lA=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(_e.div,{...r,ref:t})});lA.displayName=x$;var g$="ToastDescription",cA=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(_e.div,{...r,ref:t})});cA.displayName=g$;var dA="ToastAction",uA=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(mA,{altText:n,asChild:!0,children:s.jsx(vw,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${dA}\`. Expected non-empty \`string\`.`),null)});uA.displayName=dA;var hA="ToastClose",vw=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=m$(hA,n);return s.jsx(mA,{asChild:!0,children:s.jsx(_e.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,a.onClose)})})});vw.displayName=hA;var mA=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(_e.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function fA(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),y$(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...fA(r))}}),t}function fm(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?pw(a,i):a.dispatchEvent(i)}var hS=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function v$(e=()=>{}){const t=$t(e);fn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function y$(e){return e.nodeType===e.ELEMENT_NODE}function b$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xg(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var w$=sA,pA=aA,xA=oA,gA=lA,vA=cA,yA=uA,bA=vw;function wA(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=wA(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function jA(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=wA(e))&&(r&&(r+=" "),r+=t);return r}const mS=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fS=jA,dl=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return fS(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],h=i==null?void 0:i[d];if(u===null)return null;const m=mS(u)||mS(h);return a[d][m]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:m,...p}=u;return Object.entries(p).every(v=>{let[x,y]=v;return Array.isArray(y)?y.includes({...i,...l}[x]):{...i,...l}[x]===y})?[...d,h,m]:d},[]);return fS(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NA=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...N$,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:NA("lucide",a),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const n=f.forwardRef(({className:r,...a},i)=>f.createElement(S$,{ref:i,iconNode:t,className:NA(`lucide-${j$(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=oe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=oe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=oe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=oe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=oe("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=oe("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=oe("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=oe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=oe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=oe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=oe("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=oe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=oe("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=oe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=oe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=oe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=oe("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=oe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=oe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=oe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=oe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=oe("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=oe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=oe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=oe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=oe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=oe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=oe("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=oe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=oe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=oe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=oe("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=oe("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=oe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=oe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=oe("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=oe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=oe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=oe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=oe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=oe("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=oe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=oe("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=oe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=oe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ew="-",J$=e=>{const t=e8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(Ew);return l[0]===""&&l.length!==1&&l.shift(),DA(l,t)||Z$(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},DA=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?DA(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Ew);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},NS=/^\[(.+)\]$/,Z$=e=>{if(NS.test(e)){const t=NS.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},e8=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return n8(Object.entries(e.classGroups),n).forEach(([i,o])=>{Ty(o,r,i,t)}),r},Ty=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:SS(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(t8(a)){Ty(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{Ty(o,SS(t,i),n,r)})})},SS=(e,t)=>{let n=e;return t.split(Ew).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},t8=e=>e.isThemeGetter,n8=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,s8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},RA="!",r8=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let y=0;y<l.length;y++){let g=l[y];if(d===0){if(g===a&&(r||l.slice(y,y+i)===t)){c.push(l.slice(u,y)),u=y+i;continue}if(g==="/"){h=y;continue}}g==="["?d++:g==="]"&&d--}const m=c.length===0?l:l.substring(u),p=m.startsWith(RA),v=p?m.substring(1):m,x=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},a8=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},i8=e=>({cache:s8(e.cacheSize),parseClassName:r8(e),...J$(e)}),o8=/\s+/,l8=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(o8);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=n(d);let v=!!p,x=r(v?m.substring(0,p):m);if(!x){if(!v){l=d+(l.length>0?" "+l:l);continue}if(x=r(m),!x){l=d+(l.length>0?" "+l:l);continue}v=!1}const y=a8(u).join(":"),g=h?y+RA:y,b=g+x;if(i.includes(b))continue;i.push(b);const w=a(x,v);for(let C=0;C<w.length;++C){const _=w[C];i.push(g+_)}l=d+(l.length>0?" "+l:l)}return l};function c8(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=MA(t))&&(r&&(r+=" "),r+=n);return r}const MA=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=MA(e[r]))&&(n&&(n+=" "),n+=t);return n};function d8(e,...t){let n,r,a,i=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return n=i8(d),r=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=l8(c,n);return a(c,u),u}return function(){return i(c8.apply(null,arguments))}}const It=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},LA=/^\[(?:([a-z-]+):)?(.+)\]$/i,u8=/^\d+\/\d+$/,h8=new Set(["px","full","screen"]),m8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,f8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,p8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,x8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,g8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sa=e=>ic(e)||h8.has(e)||u8.test(e),ti=e=>nd(e,"length",_8),ic=e=>!!e&&!Number.isNaN(Number(e)),gg=e=>nd(e,"number",ic),Td=e=>!!e&&Number.isInteger(Number(e)),v8=e=>e.endsWith("%")&&ic(e.slice(0,-1)),tt=e=>LA.test(e),ni=e=>m8.test(e),y8=new Set(["length","size","percentage"]),b8=e=>nd(e,y8,OA),w8=e=>nd(e,"position",OA),j8=new Set(["image","url"]),N8=e=>nd(e,j8,k8),S8=e=>nd(e,"",C8),Ad=()=>!0,nd=(e,t,n)=>{const r=LA.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},_8=e=>f8.test(e)&&!p8.test(e),OA=()=>!1,C8=e=>x8.test(e),k8=e=>g8.test(e),E8=()=>{const e=It("colors"),t=It("spacing"),n=It("blur"),r=It("brightness"),a=It("borderColor"),i=It("borderRadius"),o=It("borderSpacing"),l=It("borderWidth"),c=It("contrast"),d=It("grayscale"),u=It("hueRotate"),h=It("invert"),m=It("gap"),p=It("gradientColorStops"),v=It("gradientColorStopPositions"),x=It("inset"),y=It("margin"),g=It("opacity"),b=It("padding"),w=It("saturate"),C=It("scale"),_=It("sepia"),S=It("skew"),N=It("space"),j=It("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",tt,t],R=()=>[tt,t],F=()=>["",Sa,ti],O=()=>["auto",ic,tt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",tt],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[ic,tt];return{cacheSize:500,separator:":",theme:{colors:[Ad],spacing:[Sa,ti],blur:["none","",ni,tt],brightness:q(),borderColor:[e],borderRadius:["none","","full",ni,tt],borderSpacing:R(),borderWidth:F(),contrast:q(),grayscale:E(),hueRotate:q(),invert:E(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[v8,ti],inset:A(),margin:A(),opacity:q(),padding:R(),saturate:q(),scale:q(),sepia:E(),skew:q(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[ni]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),tt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Td,tt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",Td,tt]}],"grid-cols":[{"grid-cols":[Ad]}],"col-start-end":[{col:["auto",{span:["full",Td,tt]},tt]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Ad]}],"row-start-end":[{row:["auto",{span:[Td,tt]},tt]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,t]}],"min-w":[{"min-w":[tt,t,"min","max","fit"]}],"max-w":[{"max-w":[tt,t,"none","full","min","max","fit","prose",{screen:[ni]},ni]}],h:[{h:[tt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ni,ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gg]}],"font-family":[{font:[Ad]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",ic,gg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Sa,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Sa,ti]}],"underline-offset":[{"underline-offset":["auto",Sa,tt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),w8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",b8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},N8]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Sa,tt]}],"outline-w":[{outline:[Sa,ti]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Sa,ti]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ni,S8]}],"shadow-color":[{shadow:[Ad]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ni,tt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Td,tt]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Sa,ti,gg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},T8=d8(E8);function ne(...e){return T8(jA(e))}function xi(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);try{return JSON.stringify(e,null,2)}catch{return String(e)}}const A8=w$,FA=f.forwardRef(({className:e,...t},n)=>s.jsx(pA,{ref:n,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));FA.displayName=pA.displayName;const P8=dl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$A=f.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(xA,{ref:r,className:ne(P8({variant:t}),e),...n}));$A.displayName=xA.displayName;const I8=f.forwardRef(({className:e,...t},n)=>s.jsx(yA,{ref:n,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));I8.displayName=yA.displayName;const zA=f.forwardRef(({className:e,...t},n)=>s.jsx(bA,{ref:n,className:ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Lt,{className:"h-4 w-4"})}));zA.displayName=bA.displayName;const UA=f.forwardRef(({className:e,...t},n)=>s.jsx(gA,{ref:n,className:ne("text-sm font-semibold",e),...t}));UA.displayName=gA.displayName;const BA=f.forwardRef(({className:e,...t},n)=>s.jsx(vA,{ref:n,className:ne("text-sm opacity-90",e),...t}));BA.displayName=vA.displayName;function D8(){const{toasts:e}=at();return s.jsxs(A8,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs($A,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(UA,{children:n}),r&&s.jsx(BA,{children:r})]}),a,s.jsx(zA,{})]},t)}),s.jsx(FA,{})]})}var _S=["light","dark"],R8="(prefers-color-scheme: dark)",M8=f.createContext(void 0),L8={setTheme:e=>{},themes:[]},O8=()=>{var e;return(e=f.useContext(M8))!=null?e:L8};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?_S.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,x=!1,y=!0)=>{let g=o?o[v]:v,b=x?v+"|| ''":`'${g}'`,w="";return a&&y&&!x&&_S.includes(v)&&(w+=`d.style.colorScheme = '${v}';`),n==="class"?x||g?w+=`c.add(${b})`:w+="null":g&&(w+=`d[s](n,${b})`),w},p=e?`!function(){${u}${m(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${R8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var F8=e=>{switch(e){case"success":return U8;case"info":return V8;case"warning":return B8;case"error":return q8;default:return null}},$8=Array(12).fill(0),z8=({visible:e})=>ge.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},ge.createElement("div",{className:"sonner-spinner"},$8.map((t,n)=>ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),U8=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),B8=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),V8=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),q8=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),W8=()=>{let[e,t]=ge.useState(document.hidden);return ge.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Ay=1,H8=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ay++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0;return r.then(async i=>{if(K8(i)&&!i.ok){a=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${i.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:n,type:"error",message:o,description:l})}else if(t.success!==void 0){a=!1;let o=typeof t.success=="function"?await t.success(i):t.success,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async i=>{if(t.error!==void 0){a=!1;let o=typeof t.error=="function"?await t.error(i):t.error,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var i;a&&(this.dismiss(n),n=void 0),(i=t.finally)==null||i.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Ay++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},Ms=new H8,G8=(e,t)=>{let n=(t==null?void 0:t.id)||Ay++;return Ms.addToast({title:e,...t,id:n}),n},K8=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Q8=G8,Y8=()=>Ms.toasts,lo=Object.assign(Q8,{success:Ms.success,info:Ms.info,warning:Ms.warning,error:Ms.error,custom:Ms.custom,message:Ms.message,promise:Ms.promise,dismiss:Ms.dismiss,loading:Ms.loading},{getHistory:Y8});function X8(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}X8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pm(e){return e.label!==void 0}var J8=3,Z8="32px",ez=4e3,tz=356,nz=14,sz=20,rz=200;function az(...e){return e.filter(Boolean).join(" ")}var iz=e=>{var t,n,r,a,i,o,l,c,d,u;let{invert:h,toast:m,unstyled:p,interacting:v,setHeights:x,visibleToasts:y,heights:g,index:b,toasts:w,expanded:C,removeToast:_,defaultRichColors:S,closeButton:N,style:j,cancelButtonStyle:k,actionButtonStyle:T,className:A="",descriptionClassName:R="",duration:F,position:O,gap:U,loadingIcon:M,expandByDefault:B,classNames:D,icons:E,closeButtonAriaLabel:I="Close toast",pauseWhenPageIsHidden:q,cn:$}=e,[P,Z]=ge.useState(!1),[ee,J]=ge.useState(!1),[te,ie]=ge.useState(!1),[ce,ve]=ge.useState(!1),[me,je]=ge.useState(0),[Ye,Oe]=ge.useState(0),Fe=ge.useRef(null),Ie=ge.useRef(null),ct=b===0,Me=b+1<=y,Le=m.type,vt=m.dismissible!==!1,$n=m.className||"",wt=m.descriptionClassName||"",gn=ge.useMemo(()=>g.findIndex(Te=>Te.toastId===m.id)||0,[g,m.id]),de=ge.useMemo(()=>{var Te;return(Te=m.closeButton)!=null?Te:N},[m.closeButton,N]),Ne=ge.useMemo(()=>m.duration||F||ez,[m.duration,F]),K=ge.useRef(0),ae=ge.useRef(0),ye=ge.useRef(0),Re=ge.useRef(null),[Ge,se]=O.split("-"),De=ge.useMemo(()=>g.reduce((Te,re,Ae)=>Ae>=gn?Te:Te+re.height,0),[g,gn]),it=W8(),Jt=m.invert||h,rn=Le==="loading";ae.current=ge.useMemo(()=>gn*U+De,[gn,De]),ge.useEffect(()=>{Z(!0)},[]),ge.useLayoutEffect(()=>{if(!P)return;let Te=Ie.current,re=Te.style.height;Te.style.height="auto";let Ae=Te.getBoundingClientRect().height;Te.style.height=re,Oe(Ae),x(Un=>Un.find(tr=>tr.toastId===m.id)?Un.map(tr=>tr.toastId===m.id?{...tr,height:Ae}:tr):[{toastId:m.id,height:Ae,position:m.position},...Un])},[P,m.title,m.description,x,m.id]);let mt=ge.useCallback(()=>{J(!0),je(ae.current),x(Te=>Te.filter(re=>re.toastId!==m.id)),setTimeout(()=>{_(m)},rz)},[m,_,x,ae]);ge.useEffect(()=>{if(m.promise&&Le==="loading"||m.duration===1/0||m.type==="loading")return;let Te,re=Ne;return C||v||q&&it?(()=>{if(ye.current<K.current){let Ae=new Date().getTime()-K.current;re=re-Ae}ye.current=new Date().getTime()})():re!==1/0&&(K.current=new Date().getTime(),Te=setTimeout(()=>{var Ae;(Ae=m.onAutoClose)==null||Ae.call(m,m),mt()},re)),()=>clearTimeout(Te)},[C,v,B,m,Ne,mt,m.promise,Le,q,it]),ge.useEffect(()=>{let Te=Ie.current;if(Te){let re=Te.getBoundingClientRect().height;return Oe(re),x(Ae=>[{toastId:m.id,height:re,position:m.position},...Ae]),()=>x(Ae=>Ae.filter(Un=>Un.toastId!==m.id))}},[x,m.id]),ge.useEffect(()=>{m.delete&&mt()},[mt,m.delete]);function zn(){return E!=null&&E.loading?ge.createElement("div",{className:"sonner-loader","data-visible":Le==="loading"},E.loading):M?ge.createElement("div",{className:"sonner-loader","data-visible":Le==="loading"},M):ge.createElement(z8,{visible:Le==="loading"})}return ge.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ie,className:$(A,$n,D==null?void 0:D.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[Le],(n=m==null?void 0:m.classNames)==null?void 0:n[Le]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":P,"data-promise":!!m.promise,"data-removed":ee,"data-visible":Me,"data-y-position":Ge,"data-x-position":se,"data-index":b,"data-front":ct,"data-swiping":te,"data-dismissible":vt,"data-type":Le,"data-invert":Jt,"data-swipe-out":ce,"data-expanded":!!(C||B&&P),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${ee?me:ae.current}px`,"--initial-height":B?"auto":`${Ye}px`,...j,...m.style},onPointerDown:Te=>{rn||!vt||(Fe.current=new Date,je(ae.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(ie(!0),Re.current={x:Te.clientX,y:Te.clientY}))},onPointerUp:()=>{var Te,re,Ae,Un;if(ce||!vt)return;Re.current=null;let tr=Number(((Te=Ie.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount").replace("px",""))||0),yl=new Date().getTime()-((re=Fe.current)==null?void 0:re.getTime()),Na=Math.abs(tr)/yl;if(Math.abs(tr)>=sz||Na>.11){je(ae.current),(Ae=m.onDismiss)==null||Ae.call(m,m),mt(),ve(!0);return}(Un=Ie.current)==null||Un.style.setProperty("--swipe-amount","0px"),ie(!1)},onPointerMove:Te=>{var re;if(!Re.current||!vt)return;let Ae=Te.clientY-Re.current.y,Un=Te.clientX-Re.current.x,tr=(Ge==="top"?Math.min:Math.max)(0,Ae),yl=Te.pointerType==="touch"?10:2;Math.abs(tr)>yl?(re=Ie.current)==null||re.style.setProperty("--swipe-amount",`${Ae}px`):Math.abs(Un)>yl&&(Re.current=null)}},de&&!m.jsx?ge.createElement("button",{"aria-label":I,"data-disabled":rn,"data-close-button":!0,onClick:rn||!vt?()=>{}:()=>{var Te;mt(),(Te=m.onDismiss)==null||Te.call(m,m)},className:$(D==null?void 0:D.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||ge.isValidElement(m.title)?m.jsx||m.title:ge.createElement(ge.Fragment,null,Le||m.icon||m.promise?ge.createElement("div",{"data-icon":"",className:$(D==null?void 0:D.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||zn():null,m.type!=="loading"?m.icon||(E==null?void 0:E[Le])||F8(Le):null):null,ge.createElement("div",{"data-content":"",className:$(D==null?void 0:D.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},ge.createElement("div",{"data-title":"",className:$(D==null?void 0:D.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?ge.createElement("div",{"data-description":"",className:$(R,wt,D==null?void 0:D.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),ge.isValidElement(m.cancel)?m.cancel:m.cancel&&pm(m.cancel)?ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||k,onClick:Te=>{var re,Ae;pm(m.cancel)&&vt&&((Ae=(re=m.cancel).onClick)==null||Ae.call(re,Te),mt())},className:$(D==null?void 0:D.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,ge.isValidElement(m.action)?m.action:m.action&&pm(m.action)?ge.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||T,onClick:Te=>{var re,Ae;pm(m.action)&&(Te.defaultPrevented||((Ae=(re=m.action).onClick)==null||Ae.call(re,Te),mt()))},className:$(D==null?void 0:D.actionButton,(u=m==null?void 0:m.classNames)==null?void 0:u.actionButton)},m.action.label):null))};function CS(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var oz=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:a,closeButton:i,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:h,visibleToasts:m=J8,toastOptions:p,dir:v=CS(),gap:x=nz,loadingIcon:y,icons:g,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w,cn:C=az}=e,[_,S]=ge.useState([]),N=ge.useMemo(()=>Array.from(new Set([n].concat(_.filter(q=>q.position).map(q=>q.position)))),[_,n]),[j,k]=ge.useState([]),[T,A]=ge.useState(!1),[R,F]=ge.useState(!1),[O,U]=ge.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=ge.useRef(null),B=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=ge.useRef(null),E=ge.useRef(!1),I=ge.useCallback(q=>{var $;($=_.find(P=>P.id===q.id))!=null&&$.delete||Ms.dismiss(q.id),S(P=>P.filter(({id:Z})=>Z!==q.id))},[_]);return ge.useEffect(()=>Ms.subscribe(q=>{if(q.dismiss){S($=>$.map(P=>P.id===q.id?{...P,delete:!0}:P));return}setTimeout(()=>{mw.flushSync(()=>{S($=>{let P=$.findIndex(Z=>Z.id===q.id);return P!==-1?[...$.slice(0,P),{...$[P],...q},...$.slice(P+1)]:[q,...$]})})})}),[]),ge.useEffect(()=>{if(c!=="system"){U(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:q})=>{U(q?"dark":"light")})},[c]),ge.useEffect(()=>{_.length<=1&&A(!1)},[_]),ge.useEffect(()=>{let q=$=>{var P,Z;r.every(ee=>$[ee]||$.code===ee)&&(A(!0),(P=M.current)==null||P.focus()),$.code==="Escape"&&(document.activeElement===M.current||(Z=M.current)!=null&&Z.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[r]),ge.useEffect(()=>{if(M.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,E.current=!1)}},[M.current]),_.length?ge.createElement("section",{"aria-label":`${b} ${B}`,tabIndex:-1},N.map((q,$)=>{var P;let[Z,ee]=q.split("-");return ge.createElement("ol",{key:q,dir:v==="auto"?CS():v,tabIndex:-1,ref:M,className:o,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":Z,"data-x-position":ee,style:{"--front-toast-height":`${((P=j[0])==null?void 0:P.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||Z8,"--width":`${tz}px`,"--gap":`${x}px`,...h},onBlur:J=>{E.current&&!J.currentTarget.contains(J.relatedTarget)&&(E.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||E.current||(E.current=!0,D.current=J.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{R||A(!1)},onPointerDown:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},_.filter(J=>!J.position&&$===0||J.position===q).map((J,te)=>{var ie,ce;return ge.createElement(iz,{key:J.id,icons:g,index:te,toast:J,defaultRichColors:d,duration:(ie=p==null?void 0:p.duration)!=null?ie:u,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:m,closeButton:(ce=p==null?void 0:p.closeButton)!=null?ce:i,interacting:R,position:q,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:I,toasts:_.filter(ve=>ve.position==J.position),heights:j.filter(ve=>ve.position==J.position),setHeights:k,expandByDefault:a,gap:x,loadingIcon:y,expanded:T,pauseWhenPageIsHidden:w,cn:C})}))})):null};const lz=({...e})=>{const{theme:t="system"}=O8();return s.jsx(oz,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var cz=jb.useId||(()=>{}),dz=0;function Ws(e){const[t,n]=f.useState(cz());return fn(()=>{e||n(r=>r??String(dz++))},[e]),e||(t?`radix-${t}`:"")}const uz=["top","right","bottom","left"],Gi=Math.min,Fs=Math.max,Ff=Math.round,xm=Math.floor,Ki=e=>({x:e,y:e}),hz={left:"right",right:"left",bottom:"top",top:"bottom"},mz={start:"end",end:"start"};function Py(e,t,n){return Fs(e,Gi(t,n))}function qa(e,t){return typeof e=="function"?e(t):e}function Wa(e){return e.split("-")[0]}function sd(e){return e.split("-")[1]}function Tw(e){return e==="x"?"y":"x"}function Aw(e){return e==="y"?"height":"width"}function Qi(e){return["top","bottom"].includes(Wa(e))?"y":"x"}function Pw(e){return Tw(Qi(e))}function fz(e,t,n){n===void 0&&(n=!1);const r=sd(e),a=Pw(e),i=Aw(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=$f(o)),[o,$f(o)]}function pz(e){const t=$f(e);return[Iy(e),t,Iy(t)]}function Iy(e){return e.replace(/start|end/g,t=>mz[t])}function xz(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function gz(e,t,n,r){const a=sd(e);let i=xz(Wa(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Iy)))),i}function $f(e){return e.replace(/left|right|bottom|top/g,t=>hz[t])}function vz(e){return{top:0,right:0,bottom:0,left:0,...e}}function VA(e){return typeof e!="number"?vz(e):{top:e,right:e,bottom:e,left:e}}function zf(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function kS(e,t,n){let{reference:r,floating:a}=e;const i=Qi(t),o=Pw(t),l=Aw(o),c=Wa(t),d=i==="y",u=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:r.y-a.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-a.width,y:h};break;default:p={x:r.x,y:r.y}}switch(sd(t)){case"start":p[o]-=m*(n&&d?-1:1);break;case"end":p[o]+=m*(n&&d?-1:1);break}return p}const yz=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=kS(d,r,c),m=r,p={},v=0;for(let x=0;x<l.length;x++){const{name:y,fn:g}=l[x],{x:b,y:w,data:C,reset:_}=await g({x:u,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=b??u,h=w??h,p={...p,[y]:{...p[y],...C}},_&&v<=50&&(v++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(d=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):_.rects),{x:u,y:h}=kS(d,m,c)),x=-1)}return{x:u,y:h,placement:m,strategy:a,middlewareData:p}};async function zu(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=qa(t,e),v=VA(p),y=l[m?h==="floating"?"reference":"floating":h],g=zf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),b=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},_=zf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(g.top-_.top+v.top)/C.y,bottom:(_.bottom-g.bottom+v.bottom)/C.y,left:(g.left-_.left+v.left)/C.x,right:(_.right-g.right+v.right)/C.x}}const bz=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=qa(e,t)||{};if(d==null)return{};const h=VA(u),m={x:n,y:r},p=Pw(a),v=Aw(p),x=await o.getDimensions(d),y=p==="y",g=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[p]-m[p]-i.floating[v],_=m[p]-i.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let N=S?S[w]:0;(!N||!await(o.isElement==null?void 0:o.isElement(S)))&&(N=l.floating[w]||i.floating[v]);const j=C/2-_/2,k=N/2-x[v]/2-1,T=Gi(h[g],k),A=Gi(h[b],k),R=T,F=N-x[v]-A,O=N/2-x[v]/2+j,U=Py(R,O,F),M=!c.arrow&&sd(a)!=null&&O!==U&&i.reference[v]/2-(O<R?T:A)-x[v]/2<0,B=M?O<R?O-R:O-F:0;return{[p]:m[p]+B,data:{[p]:U,centerOffset:O-U-B,...M&&{alignmentOffset:B}},reset:M}}}),wz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...y}=qa(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const g=Wa(a),b=Qi(l),w=Wa(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),_=m||(w||!x?[$f(l)]:pz(l)),S=v!=="none";!m&&S&&_.push(...gz(l,x,v,C));const N=[l,..._],j=await zu(t,y),k=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&k.push(j[g]),h){const O=fz(a,o,C);k.push(j[O[0]],j[O[1]])}if(T=[...T,{placement:a,overflows:k}],!k.every(O=>O<=0)){var A,R;const O=(((A=i.flip)==null?void 0:A.index)||0)+1,U=N[O];if(U)return{data:{index:O,overflows:T},reset:{placement:U}};let M=(R=T.filter(B=>B.overflows[0]<=0).sort((B,D)=>B.overflows[1]-D.overflows[1])[0])==null?void 0:R.placement;if(!M)switch(p){case"bestFit":{var F;const B=(F=T.filter(D=>{if(S){const E=Qi(D.placement);return E===b||E==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(E=>E>0).reduce((E,I)=>E+I,0)]).sort((D,E)=>D[1]-E[1])[0])==null?void 0:F[0];B&&(M=B);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function ES(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function TS(e){return uz.some(t=>e[t]>=0)}const jz=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=qa(e,t);switch(r){case"referenceHidden":{const i=await zu(t,{...a,elementContext:"reference"}),o=ES(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:TS(o)}}}case"escaped":{const i=await zu(t,{...a,altBoundary:!0}),o=ES(i,n.floating);return{data:{escapedOffsets:o,escaped:TS(o)}}}default:return{}}}}};async function Nz(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Wa(n),l=sd(n),c=Qi(n)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=qa(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const Sz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await Nz(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},_z=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:g,y:b}=y;return{x:g,y:b}}},...c}=qa(e,t),d={x:n,y:r},u=await zu(t,c),h=Qi(Wa(a)),m=Tw(h);let p=d[m],v=d[h];if(i){const y=m==="y"?"top":"left",g=m==="y"?"bottom":"right",b=p+u[y],w=p-u[g];p=Py(b,p,w)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",b=v+u[y],w=v-u[g];v=Py(b,v,w)}const x=l.fn({...t,[m]:p,[h]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:i,[h]:o}}}}}},Cz=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=qa(e,t),u={x:n,y:r},h=Qi(a),m=Tw(h);let p=u[m],v=u[h];const x=qa(l,t),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const w=m==="y"?"height":"width",C=i.reference[m]-i.floating[w]+y.mainAxis,_=i.reference[m]+i.reference[w]-y.mainAxis;p<C?p=C:p>_&&(p=_)}if(d){var g,b;const w=m==="y"?"width":"height",C=["top","left"].includes(Wa(a)),_=i.reference[h]-i.floating[w]+(C&&((g=o.offset)==null?void 0:g[h])||0)+(C?0:y.crossAxis),S=i.reference[h]+i.reference[w]+(C?0:((b=o.offset)==null?void 0:b[h])||0)-(C?y.crossAxis:0);v<_?v=_:v>S&&(v=S)}return{[m]:p,[h]:v}}}},kz=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=qa(e,t),u=await zu(t,d),h=Wa(a),m=sd(a),p=Qi(a)==="y",{width:v,height:x}=i.floating;let y,g;h==="top"||h==="bottom"?(y=h,g=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(g=h,y=m==="end"?"top":"bottom");const b=x-u.top-u.bottom,w=v-u.left-u.right,C=Gi(x-u[y],b),_=Gi(v-u[g],w),S=!t.middlewareData.shift;let N=C,j=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=b),S&&!m){const T=Fs(u.left,0),A=Fs(u.right,0),R=Fs(u.top,0),F=Fs(u.bottom,0);p?j=v-2*(T!==0||A!==0?T+A:Fs(u.left,u.right)):N=x-2*(R!==0||F!==0?R+F:Fs(u.top,u.bottom))}await c({...t,availableWidth:j,availableHeight:N});const k=await o.getDimensions(l.floating);return v!==k.width||x!==k.height?{reset:{rects:!0}}:{}}}};function Vp(){return typeof window<"u"}function rd(e){return qA(e)?(e.nodeName||"").toLowerCase():"#document"}function Hs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ba(e){var t;return(t=(qA(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function qA(e){return Vp()?e instanceof Node||e instanceof Hs(e).Node:!1}function qr(e){return Vp()?e instanceof Element||e instanceof Hs(e).Element:!1}function ga(e){return Vp()?e instanceof HTMLElement||e instanceof Hs(e).HTMLElement:!1}function AS(e){return!Vp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Hs(e).ShadowRoot}function xh(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Wr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function Ez(e){return["table","td","th"].includes(rd(e))}function qp(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Iw(e){const t=Dw(),n=qr(e)?Wr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Tz(e){let t=Yi(e);for(;ga(t)&&!zc(t);){if(Iw(t))return t;if(qp(t))return null;t=Yi(t)}return null}function Dw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zc(e){return["html","body","#document"].includes(rd(e))}function Wr(e){return Hs(e).getComputedStyle(e)}function Wp(e){return qr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Yi(e){if(rd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||AS(e)&&e.host||ba(e);return AS(t)?t.host:t}function WA(e){const t=Yi(e);return zc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ga(t)&&xh(t)?t:WA(t)}function Uu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=WA(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Hs(a);if(i){const l=Dy(o);return t.concat(o,o.visualViewport||[],xh(a)?a:[],l&&n?Uu(l):[])}return t.concat(a,Uu(a,[],n))}function Dy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function HA(e){const t=Wr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=ga(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Ff(n)!==i||Ff(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function Rw(e){return qr(e)?e:e.contextElement}function oc(e){const t=Rw(e);if(!ga(t))return Ki(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=HA(t);let o=(i?Ff(n.width):n.width)/r,l=(i?Ff(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Az=Ki(0);function GA(e){const t=Hs(e);return!Dw()||!t.visualViewport?Az:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Pz(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Hs(e)?!1:t}function Yo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=Rw(e);let o=Ki(1);t&&(r?qr(r)&&(o=oc(r)):o=oc(e));const l=Pz(i,n,r)?GA(i):Ki(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const m=Hs(i),p=r&&qr(r)?Hs(r):r;let v=m,x=Dy(v);for(;x&&r&&p!==v;){const y=oc(x),g=x.getBoundingClientRect(),b=Wr(x),w=g.left+(x.clientLeft+parseFloat(b.paddingLeft))*y.x,C=g.top+(x.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,h*=y.y,c+=w,d+=C,v=Hs(x),x=Dy(v)}}return zf({width:u,height:h,x:c,y:d})}function Iz(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=ba(r),l=t?qp(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Ki(1);const u=Ki(0),h=ga(r);if((h||!h&&!i)&&((rd(r)!=="body"||xh(o))&&(c=Wp(r)),ga(r))){const m=Yo(r);d=oc(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x,y:n.y*d.y-c.scrollTop*d.y+u.y}}function Dz(e){return Array.from(e.getClientRects())}function Ry(e,t){const n=Wp(e).scrollLeft;return t?t.left+n:Yo(ba(e)).left+n}function Rz(e){const t=ba(e),n=Wp(e),r=e.ownerDocument.body,a=Fs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Fs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ry(e);const l=-n.scrollTop;return Wr(r).direction==="rtl"&&(o+=Fs(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function Mz(e,t){const n=Hs(e),r=ba(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Dw();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function Lz(e,t){const n=Yo(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=ga(e)?oc(e):Ki(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=r*i.y;return{width:o,height:l,x:c,y:d}}function PS(e,t,n){let r;if(t==="viewport")r=Mz(e,n);else if(t==="document")r=Rz(ba(e));else if(qr(t))r=Lz(t,n);else{const a=GA(e);r={...t,x:t.x-a.x,y:t.y-a.y}}return zf(r)}function KA(e,t){const n=Yi(e);return n===t||!qr(n)||zc(n)?!1:Wr(n).position==="fixed"||KA(n,t)}function Oz(e,t){const n=t.get(e);if(n)return n;let r=Uu(e,[],!1).filter(l=>qr(l)&&rd(l)!=="body"),a=null;const i=Wr(e).position==="fixed";let o=i?Yi(e):e;for(;qr(o)&&!zc(o);){const l=Wr(o),c=Iw(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||xh(o)&&!c&&KA(e,o))?r=r.filter(u=>u!==o):a=l,o=Yi(o)}return t.set(e,r),r}function Fz(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?qp(t)?[]:Oz(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,u)=>{const h=PS(t,u,a);return d.top=Fs(h.top,d.top),d.right=Gi(h.right,d.right),d.bottom=Gi(h.bottom,d.bottom),d.left=Fs(h.left,d.left),d},PS(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $z(e){const{width:t,height:n}=HA(e);return{width:t,height:n}}function zz(e,t,n){const r=ga(t),a=ba(t),i=n==="fixed",o=Yo(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ki(0);if(r||!r&&!i)if((rd(t)!=="body"||xh(a))&&(l=Wp(t)),r){const p=Yo(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&(c.x=Ry(a));let d=0,u=0;if(a&&!r&&!i){const p=a.getBoundingClientRect();u=p.top+l.scrollTop,d=p.left+l.scrollLeft-Ry(a,p)}const h=o.left+l.scrollLeft-c.x-d,m=o.top+l.scrollTop-c.y-u;return{x:h,y:m,width:o.width,height:o.height}}function vg(e){return Wr(e).position==="static"}function IS(e,t){if(!ga(e)||Wr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ba(e)===n&&(n=n.ownerDocument.body),n}function QA(e,t){const n=Hs(e);if(qp(e))return n;if(!ga(e)){let a=Yi(e);for(;a&&!zc(a);){if(qr(a)&&!vg(a))return a;a=Yi(a)}return n}let r=IS(e,t);for(;r&&Ez(r)&&vg(r);)r=IS(r,t);return r&&zc(r)&&vg(r)&&!Iw(r)?n:r||Tz(e)||n}const Uz=async function(e){const t=this.getOffsetParent||QA,n=this.getDimensions,r=await n(e.floating);return{reference:zz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Bz(e){return Wr(e).direction==="rtl"}const Vz={convertOffsetParentRelativeRectToViewportRelativeRect:Iz,getDocumentElement:ba,getClippingRect:Fz,getOffsetParent:QA,getElementRects:Uz,getClientRects:Dz,getDimensions:$z,getScale:oc,isElement:qr,isRTL:Bz};function qz(e,t){let n=null,r;const a=ba(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:d,top:u,width:h,height:m}=e.getBoundingClientRect();if(l||t(),!h||!m)return;const p=xm(u),v=xm(a.clientWidth-(d+h)),x=xm(a.clientHeight-(u+m)),y=xm(d),b={rootMargin:-p+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Fs(0,Gi(1,c))||1};let w=!0;function C(_){const S=_[0].intersectionRatio;if(S!==c){if(!w)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(C,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(C,b)}n.observe(e)}return o(!0),i}function Wz(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Rw(e),u=a||i?[...d?Uu(d):[],...Uu(t)]:[];u.forEach(g=>{a&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const h=d&&l?qz(d,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(g=>{let[b]=g;b&&b.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),d&&!c&&p.observe(d),p.observe(t));let v,x=c?Yo(e):null;c&&y();function y(){const g=Yo(e);x&&(g.x!==x.x||g.y!==x.y||g.width!==x.width||g.height!==x.height)&&n(),x=g,v=requestAnimationFrame(y)}return n(),()=>{var g;u.forEach(b=>{a&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),h==null||h(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const Hz=Sz,Gz=_z,Kz=wz,Qz=kz,Yz=jz,DS=bz,Xz=Cz,Jz=(e,t,n)=>{const r=new Map,a={platform:Vz,...n},i={...a.platform,_c:r};return yz(e,t,{...a,platform:i})};var Zm=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Uf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Uf(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Uf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function YA(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function RS(e,t){const n=YA(e);return Math.round(t*n)/n}function yg(e){const t=f.useRef(e);return Zm(()=>{t.current=e}),t}function Zz(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);Uf(m,r)||p(r);const[v,x]=f.useState(null),[y,g]=f.useState(null),b=f.useCallback(D=>{D!==S.current&&(S.current=D,x(D))},[]),w=f.useCallback(D=>{D!==N.current&&(N.current=D,g(D))},[]),C=i||v,_=o||y,S=f.useRef(null),N=f.useRef(null),j=f.useRef(u),k=c!=null,T=yg(c),A=yg(a),R=yg(d),F=f.useCallback(()=>{if(!S.current||!N.current)return;const D={placement:t,strategy:n,middleware:m};A.current&&(D.platform=A.current),Jz(S.current,N.current,D).then(E=>{const I={...E,isPositioned:R.current!==!1};O.current&&!Uf(j.current,I)&&(j.current=I,Qa.flushSync(()=>{h(I)}))})},[m,t,n,A,R]);Zm(()=>{d===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[d]);const O=f.useRef(!1);Zm(()=>(O.current=!0,()=>{O.current=!1}),[]),Zm(()=>{if(C&&(S.current=C),_&&(N.current=_),C&&_){if(T.current)return T.current(C,_,F);F()}},[C,_,F,T,k]);const U=f.useMemo(()=>({reference:S,floating:N,setReference:b,setFloating:w}),[b,w]),M=f.useMemo(()=>({reference:C,floating:_}),[C,_]),B=f.useMemo(()=>{const D={position:n,left:0,top:0};if(!M.floating)return D;const E=RS(M.floating,u.x),I=RS(M.floating,u.y);return l?{...D,transform:"translate("+E+"px, "+I+"px)",...YA(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:E,top:I}},[n,l,M.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:F,refs:U,elements:M,floatingStyles:B}),[u,F,U,M,B])}const eU=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?DS({element:r.current,padding:a}).fn(n):{}:r?DS({element:r,padding:a}).fn(n):{}}}},tU=(e,t)=>({...Hz(e),options:[e,t]}),nU=(e,t)=>({...Gz(e),options:[e,t]}),sU=(e,t)=>({...Xz(e),options:[e,t]}),rU=(e,t)=>({...Kz(e),options:[e,t]}),aU=(e,t)=>({...Qz(e),options:[e,t]}),iU=(e,t)=>({...Yz(e),options:[e,t]}),oU=(e,t)=>({...eU(e),options:[e,t]});var lU="Arrow",XA=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(_e.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});XA.displayName=lU;var cU=XA;function dU(e,t=[]){let n=[];function r(i,o){const l=f.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:p,...v}=h,x=(m==null?void 0:m[e][c])||l,y=f.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:y,children:p})}function u(h,m){const p=(m==null?void 0:m[e][c])||l,v=f.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,uU(a,...t)]}function uU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Hp(e){const[t,n]=f.useState(void 0);return fn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Mw="Popper",[JA,no]=dU(Mw),[hU,ZA]=JA(Mw),eP=e=>{const{__scopePopper:t,children:n}=e,[r,a]=f.useState(null);return s.jsx(hU,{scope:t,anchor:r,onAnchorChange:a,children:n})};eP.displayName=Mw;var tP="PopperAnchor",nP=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=ZA(tP,n),o=f.useRef(null),l=He(t,o);return f.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(_e.div,{...a,ref:l})});nP.displayName=tP;var Lw="PopperContent",[mU,fU]=JA(Lw),sP=f.forwardRef((e,t)=>{var te,ie,ce,ve,me,je;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...x}=e,y=ZA(Lw,n),[g,b]=f.useState(null),w=He(t,Ye=>b(Ye)),[C,_]=f.useState(null),S=Hp(C),N=(S==null?void 0:S.width)??0,j=(S==null?void 0:S.height)??0,k=r+(i!=="center"?"-"+i:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},A=Array.isArray(d)?d:[d],R=A.length>0,F={padding:T,boundary:A.filter(xU),altBoundary:R},{refs:O,floatingStyles:U,placement:M,isPositioned:B,middlewareData:D}=Zz({strategy:"fixed",placement:k,whileElementsMounted:(...Ye)=>Wz(...Ye,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[tU({mainAxis:a+j,alignmentAxis:o}),c&&nU({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?sU():void 0,...F}),c&&rU({...F}),aU({...F,apply:({elements:Ye,rects:Oe,availableWidth:Fe,availableHeight:Ie})=>{const{width:ct,height:Me}=Oe.reference,Le=Ye.floating.style;Le.setProperty("--radix-popper-available-width",`${Fe}px`),Le.setProperty("--radix-popper-available-height",`${Ie}px`),Le.setProperty("--radix-popper-anchor-width",`${ct}px`),Le.setProperty("--radix-popper-anchor-height",`${Me}px`)}}),C&&oU({element:C,padding:l}),gU({arrowWidth:N,arrowHeight:j}),m&&iU({strategy:"referenceHidden",...F})]}),[E,I]=iP(M),q=$t(v);fn(()=>{B&&(q==null||q())},[B,q]);const $=(te=D.arrow)==null?void 0:te.x,P=(ie=D.arrow)==null?void 0:ie.y,Z=((ce=D.arrow)==null?void 0:ce.centerOffset)!==0,[ee,J]=f.useState();return fn(()=>{g&&J(window.getComputedStyle(g).zIndex)},[g]),s.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:B?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(ve=D.transformOrigin)==null?void 0:ve.x,(me=D.transformOrigin)==null?void 0:me.y].join(" "),...((je=D.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(mU,{scope:n,placedSide:E,onArrowChange:_,arrowX:$,arrowY:P,shouldHideArrow:Z,children:s.jsx(_e.div,{"data-side":E,"data-align":I,...x,ref:w,style:{...x.style,animation:B?void 0:"none"}})})})});sP.displayName=Lw;var rP="PopperArrow",pU={top:"bottom",right:"left",bottom:"top",left:"right"},aP=f.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=fU(rP,r),o=pU[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(cU,{...a,ref:n,style:{...a.style,display:"block"}})})});aP.displayName=rP;function xU(e){return e!==null}var gU=e=>({name:"transformOrigin",options:e,fn(t){var y,g,b;const{placement:n,rects:r,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=iP(n),h={start:"0%",center:"50%",end:"100%"}[u],m=(((g=a.arrow)==null?void 0:g.x)??0)+l/2,p=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let v="",x="";return d==="bottom"?(v=o?h:`${m}px`,x=`${-c}px`):d==="top"?(v=o?h:`${m}px`,x=`${r.floating.height+c}px`):d==="right"?(v=`${-c}px`,x=o?h:`${p}px`):d==="left"&&(v=`${r.floating.width+c}px`,x=o?h:`${p}px`),{data:{x:v,y:x}}}});function iP(e){const[t,n="center"]=e.split("-");return[t,n]}var Gp=eP,gh=nP,Kp=sP,Qp=aP,[Yp,Bce]=es("Tooltip",[no]),Xp=no(),oP="TooltipProvider",vU=700,My="tooltip.open",[yU,Ow]=Yp(oP),lP=e=>{const{__scopeTooltip:t,delayDuration:n=vU,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,[o,l]=f.useState(!0),c=f.useRef(!1),d=f.useRef(0);return f.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(yU,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:f.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:f.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:i})};lP.displayName=oP;var Jp="Tooltip",[bU,Zp]=Yp(Jp),cP=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=Ow(Jp,e.__scopeTooltip),d=Xp(t),[u,h]=f.useState(null),m=Ws(),p=f.useRef(0),v=o??c.disableHoverableContent,x=l??c.delayDuration,y=f.useRef(!1),[g=!1,b]=Xs({prop:r,defaultProp:a,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(My))):c.onClose(),i==null||i(N)}}),w=f.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),C=f.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,b(!0)},[b]),_=f.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),S=f.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,b(!0),p.current=0},x)},[x,b]);return f.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(Gp,{...d,children:s.jsx(bU,{scope:t,contentId:m,open:g,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayed?S():C()},[c.isOpenDelayed,S,C]),onTriggerLeave:f.useCallback(()=>{v?_():(window.clearTimeout(p.current),p.current=0)},[_,v]),onOpen:C,onClose:_,disableHoverableContent:v,children:n})})};cP.displayName=Jp;var Ly="TooltipTrigger",dP=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Zp(Ly,n),i=Ow(Ly,n),o=Xp(n),l=f.useRef(null),c=He(t,l,a.onTriggerChange),d=f.useRef(!1),u=f.useRef(!1),h=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(gh,{asChild:!0,...o,children:s.jsx(_e.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:ue(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ue(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ue(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ue(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:ue(e.onBlur,a.onClose),onClick:ue(e.onClick,a.onClose)})})});dP.displayName=Ly;var wU="TooltipPortal",[Vce,jU]=Yp(wU,{forceMount:void 0}),Uc="TooltipContent",uP=f.forwardRef((e,t)=>{const n=jU(Uc,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=Zp(Uc,e.__scopeTooltip);return s.jsx(xn,{present:r||o.open,children:o.disableHoverableContent?s.jsx(hP,{side:a,...i,ref:t}):s.jsx(NU,{side:a,...i,ref:t})})}),NU=f.forwardRef((e,t)=>{const n=Zp(Uc,e.__scopeTooltip),r=Ow(Uc,e.__scopeTooltip),a=f.useRef(null),i=He(t,a),[o,l]=f.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:h}=r,m=f.useCallback(()=>{l(null),h(!1)},[h]),p=f.useCallback((v,x)=>{const y=v.currentTarget,g={x:v.clientX,y:v.clientY},b=kU(g,y.getBoundingClientRect()),w=EU(g,b),C=TU(x.getBoundingClientRect()),_=PU([...w,...C]);l(_),h(!0)},[h]);return f.useEffect(()=>()=>m(),[m]),f.useEffect(()=>{if(c&&u){const v=y=>p(y,u),x=y=>p(y,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",x)}}},[c,u,p,m]),f.useEffect(()=>{if(o){const v=x=>{const y=x.target,g={x:x.clientX,y:x.clientY},b=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),w=!AU(g,o);b?m():w&&(m(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,o,d,m]),s.jsx(hP,{...e,ref:i})}),[SU,_U]=Yp(Jp,{isInside:!1}),hP=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Zp(Uc,n),d=Xp(n),{onClose:u}=c;return f.useEffect(()=>(document.addEventListener(My,u),()=>document.removeEventListener(My,u)),[u]),f.useEffect(()=>{if(c.trigger){const h=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),s.jsx(cl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:s.jsxs(Kp,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(fw,{children:r}),s.jsx(SU,{scope:n,isInside:!0,children:s.jsx(s$,{id:c.contentId,role:"tooltip",children:a||r})})]})})});uP.displayName=Uc;var mP="TooltipArrow",CU=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Xp(n);return _U(mP,n).isInside?null:s.jsx(Qp,{...a,...r,ref:t})});CU.displayName=mP;function kU(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function EU(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function TU(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function AU(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i].x,c=t[i].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}function PU(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),IU(t)}function IU(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var DU=lP,RU=cP,MU=dP,fP=uP;const pP=DU,LU=RU,OU=MU,xP=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(fP,{ref:r,sideOffset:t,className:ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));xP.displayName=fP.displayName;var ad=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xo=typeof window>"u"||"Deno"in globalThis;function lr(){}function FU(e,t){return typeof e=="function"?e(t):e}function Oy(e){return typeof e=="number"&&e>=0&&e!==1/0}function gP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function lc(e,t){return typeof e=="function"?e(t):e}function Fr(e,t){return typeof e=="function"?e(t):e}function MS(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Fw(o,t.options))return!1}else if(!Bu(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function LS(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Jo(t.options.mutationKey)!==Jo(i))return!1}else if(!Bu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function Fw(e,t){return((t==null?void 0:t.queryKeyHashFn)||Jo)(e)}function Jo(e){return JSON.stringify(e,(t,n)=>Fy(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function Bu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Bu(e[n],t[n])):!1}function vP(e,t){if(e===t)return e;const n=OS(e)&&OS(t);if(n||Fy(e)&&Fy(t)){const r=n?e:Object.keys(e),a=r.length,i=n?t:Object.keys(t),o=i.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:i[d];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=vP(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function Bf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function OS(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Fy(e){if(!FS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!FS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function FS(e){return Object.prototype.toString.call(e)==="[object Object]"}function $U(e){return new Promise(t=>{setTimeout(t,e)})}function $y(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?vP(e,t):t}function zU(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function UU(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var $w=Symbol();function yP(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===$w?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Io,vi,yc,A2,BU=(A2=class extends ad{constructor(){super();$e(this,Io);$e(this,vi);$e(this,yc);Se(this,yc,t=>{if(!Xo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,vi)||this.setEventListener(H(this,yc))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,vi))==null||t.call(this),Se(this,vi,void 0))}setEventListener(t){var n;Se(this,yc,t),(n=H(this,vi))==null||n.call(this),Se(this,vi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){H(this,Io)!==t&&(Se(this,Io,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof H(this,Io)=="boolean"?H(this,Io):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Io=new WeakMap,vi=new WeakMap,yc=new WeakMap,A2),zw=new BU,bc,yi,wc,P2,VU=(P2=class extends ad{constructor(){super();$e(this,bc,!0);$e(this,yi);$e(this,wc);Se(this,wc,t=>{if(!Xo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,yi)||this.setEventListener(H(this,wc))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,yi))==null||t.call(this),Se(this,yi,void 0))}setEventListener(t){var n;Se(this,wc,t),(n=H(this,yi))==null||n.call(this),Se(this,yi,t(this.setOnline.bind(this)))}setOnline(t){H(this,bc)!==t&&(Se(this,bc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return H(this,bc)}},bc=new WeakMap,yi=new WeakMap,wc=new WeakMap,P2),Vf=new VU;function zy(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function qU(e){return Math.min(1e3*2**e,3e4)}function bP(e){return(e??"online")==="online"?Vf.isOnline():!0}var wP=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function bg(e){return e instanceof wP}function jP(e){let t=!1,n=0,r=!1,a;const i=zy(),o=x=>{var y;r||(m(new wP(x)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>zw.isFocused()&&(e.networkMode==="always"||Vf.isOnline())&&e.canRun(),u=()=>bP(e.networkMode)&&e.canRun(),h=x=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,x),a==null||a(),i.resolve(x))},m=x=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,x),a==null||a(),i.reject(x))},p=()=>new Promise(x=>{var y;a=g=>{(r||d())&&x(g)},(y=e.onPause)==null||y.call(e)}).then(()=>{var x;a=void 0,r||(x=e.onContinue)==null||x.call(e)}),v=()=>{if(r)return;let x;const y=n===0?e.initialPromise:void 0;try{x=y??e.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(h).catch(g=>{var S;if(r)return;const b=e.retry??(Xo?0:3),w=e.retryDelay??qU,C=typeof w=="function"?w(n,g):w,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,g);if(t||!_){m(g);return}n++,(S=e.onFail)==null||S.call(e,n,g),$U(C).then(()=>d()?void 0:p()).then(()=>{t?m(g):v()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():p().then(v),i)}}function WU(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var wn=WU(),Do,I2,NP=(I2=class{constructor(){$e(this,Do)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Oy(this.gcTime)&&Se(this,Do,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Xo?1/0:5*60*1e3))}clearGcTimeout(){H(this,Do)&&(clearTimeout(H(this,Do)),Se(this,Do,void 0))}},Do=new WeakMap,I2),jc,Nc,or,qn,rh,Ro,Rr,ka,D2,HU=(D2=class extends NP{constructor(t){super();$e(this,Rr);$e(this,jc);$e(this,Nc);$e(this,or);$e(this,qn);$e(this,rh);$e(this,Ro);Se(this,Ro,!1),Se(this,rh,t.defaultOptions),this.setOptions(t.options),this.observers=[],Se(this,or,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Se(this,jc,GU(this.options)),this.state=t.state??H(this,jc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,qn))==null?void 0:t.promise}setOptions(t){this.options={...H(this,rh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,or).remove(this)}setData(t,n){const r=$y(this.state.data,t,this.options);return st(this,Rr,ka).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){st(this,Rr,ka).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=H(this,qn))==null?void 0:r.promise;return(a=H(this,qn))==null||a.cancel(t),n?n.then(lr).catch(lr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,jc))}isActive(){return this.observers.some(t=>Fr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$w||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!gP(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,qn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,qn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,or).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(H(this,qn)&&(H(this,Ro)?H(this,qn).cancel({revert:!0}):H(this,qn).cancelRetry()),this.scheduleGc()),H(this,or).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,Rr,ka).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(H(this,qn))return H(this,qn).continueRetry(),H(this,qn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Se(this,Ro,!0),r.signal)})},i=()=>{const h=yP(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return a(m),Se(this,Ro,!1),this.options.persister?this.options.persister(h,m,this):h(m)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Se(this,Nc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&st(this,Rr,ka).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,p,v,x;bg(h)&&h.silent||st(this,Rr,ka).call(this,{type:"error",error:h}),bg(h)||((p=(m=H(this,or).config).onError)==null||p.call(m,h,this),(x=(v=H(this,or).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return Se(this,qn,jP({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,p,v,x;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){l(y);return}(p=(m=H(this,or).config).onSuccess)==null||p.call(m,h,this),(x=(v=H(this,or).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{st(this,Rr,ka).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{st(this,Rr,ka).call(this,{type:"pause"})},onContinue:()=>{st(this,Rr,ka).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),H(this,qn).start()}},jc=new WeakMap,Nc=new WeakMap,or=new WeakMap,qn=new WeakMap,rh=new WeakMap,Ro=new WeakMap,Rr=new WeakSet,ka=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...SP(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return bg(a)&&a.revert&&H(this,Nc)?{...H(this,Nc),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),wn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,or).notify({query:this,type:"updated",action:t})})},D2);function SP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bP(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function GU(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sa,R2,KU=(R2=class extends ad{constructor(t={}){super();$e(this,sa);this.config=t,Se(this,sa,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??Fw(a,n);let o=this.get(i);return o||(o=new HU({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){H(this,sa).has(t.queryHash)||(H(this,sa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=H(this,sa).get(t.queryHash);n&&(t.destroy(),n===t&&H(this,sa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,sa).get(t)}getAll(){return[...H(this,sa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>MS(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>MS(t,r)):n}notify(t){wn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){wn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},sa=new WeakMap,R2),ra,ss,Mo,aa,ai,M2,QU=(M2=class extends NP{constructor(t){super();$e(this,aa);$e(this,ra);$e(this,ss);$e(this,Mo);this.mutationId=t.mutationId,Se(this,ss,t.mutationCache),Se(this,ra,[]),this.state=t.state||_P(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,ra).includes(t)||(H(this,ra).push(t),this.clearGcTimeout(),H(this,ss).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Se(this,ra,H(this,ra).filter(n=>n!==t)),this.scheduleGc(),H(this,ss).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,ra).length||(this.state.status==="pending"?this.scheduleGc():H(this,ss).remove(this))}continue(){var t;return((t=H(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,h,m,p,v,x,y,g,b,w,C,_,S,N;Se(this,Mo,jP({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(j,k)=>{st(this,aa,ai).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{st(this,aa,ai).call(this,{type:"pause"})},onContinue:()=>{st(this,aa,ai).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,ss).canRun(this)}));const n=this.state.status==="pending",r=!H(this,Mo).canStart();try{if(!n){st(this,aa,ai).call(this,{type:"pending",variables:t,isPaused:r}),await((i=(a=H(this,ss).config).onMutate)==null?void 0:i.call(a,t,this));const k=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));k!==this.state.context&&st(this,aa,ai).call(this,{type:"pending",context:k,variables:t,isPaused:r})}const j=await H(this,Mo).start();return await((d=(c=H(this,ss).config).onSuccess)==null?void 0:d.call(c,j,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,j,t,this.state.context)),await((p=(m=H(this,ss).config).onSettled)==null?void 0:p.call(m,j,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,j,null,t,this.state.context)),st(this,aa,ai).call(this,{type:"success",data:j}),j}catch(j){try{throw await((g=(y=H(this,ss).config).onError)==null?void 0:g.call(y,j,t,this.state.context,this)),await((w=(b=this.options).onError)==null?void 0:w.call(b,j,t,this.state.context)),await((_=(C=H(this,ss).config).onSettled)==null?void 0:_.call(C,void 0,j,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,j,t,this.state.context)),j}finally{st(this,aa,ai).call(this,{type:"error",error:j})}}finally{H(this,ss).runNext(this)}}},ra=new WeakMap,ss=new WeakMap,Mo=new WeakMap,aa=new WeakSet,ai=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wn.batch(()=>{H(this,ra).forEach(r=>{r.onMutationUpdate(t)}),H(this,ss).notify({mutation:this,type:"updated",action:t})})},M2);function _P(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rs,ah,L2,YU=(L2=class extends ad{constructor(t={}){super();$e(this,Rs);$e(this,ah);this.config=t,Se(this,Rs,new Map),Se(this,ah,Date.now())}build(t,n,r){const a=new QU({mutationCache:this,mutationId:++Qh(this,ah)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){const n=gm(t),r=H(this,Rs).get(n)??[];r.push(t),H(this,Rs).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=gm(t);if(H(this,Rs).has(n)){const a=(r=H(this,Rs).get(n))==null?void 0:r.filter(i=>i!==t);a&&(a.length===0?H(this,Rs).delete(n):H(this,Rs).set(n,a))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=H(this,Rs).get(gm(t)))==null?void 0:r.find(a=>a.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=H(this,Rs).get(gm(t)))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){wn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...H(this,Rs).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>LS(n,r))}findAll(t={}){return this.getAll().filter(n=>LS(t,n))}notify(t){wn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return wn.batch(()=>Promise.all(t.map(n=>n.continue().catch(lr))))}},Rs=new WeakMap,ah=new WeakMap,L2);function gm(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function $S(e){return{onFetch:(t,n)=>{var u,h,m,p,v;const r=t.options,a=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},g=yP(t.options,t.fetchOptions),b=async(w,C,_)=>{if(x)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const S={queryKey:t.queryKey,pageParam:C,direction:_?"backward":"forward",meta:t.options.meta};y(S);const N=await g(S),{maxPages:j}=t.options,k=_?UU:zU;return{pages:k(w.pages,N,j),pageParams:k(w.pageParams,C,j)}};if(a&&i.length){const w=a==="backward",C=w?XU:zS,_={pages:i,pageParams:o},S=C(r,_);l=await b(_,S,w)}else{const w=e??i.length;do{const C=c===0?o[0]??r.initialPageParam:zS(r,l);if(c>0&&C==null)break;l=await b(l,C),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var x,y;return(y=(x=t.options).persister)==null?void 0:y.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function zS(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function XU(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Zt,bi,wi,Sc,_c,ji,Cc,kc,O2,JU=(O2=class{constructor(e={}){$e(this,Zt);$e(this,bi);$e(this,wi);$e(this,Sc);$e(this,_c);$e(this,ji);$e(this,Cc);$e(this,kc);Se(this,Zt,e.queryCache||new KU),Se(this,bi,e.mutationCache||new YU),Se(this,wi,e.defaultOptions||{}),Se(this,Sc,new Map),Se(this,_c,new Map),Se(this,ji,0)}mount(){Qh(this,ji)._++,H(this,ji)===1&&(Se(this,Cc,zw.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Zt).onFocus())})),Se(this,kc,Vf.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Zt).onOnline())})))}unmount(){var e,t;Qh(this,ji)._--,H(this,ji)===0&&((e=H(this,Cc))==null||e.call(this),Se(this,Cc,void 0),(t=H(this,kc))==null||t.call(this),Se(this,kc,void 0))}isFetching(e){return H(this,Zt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,bi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Zt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=H(this,Zt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(lc(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return H(this,Zt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=H(this,Zt).get(r.queryHash),i=a==null?void 0:a.state.data,o=FU(t,i);if(o!==void 0)return H(this,Zt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return wn.batch(()=>H(this,Zt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Zt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=H(this,Zt);wn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=H(this,Zt),r={type:"active",...e};return wn.batch(()=>(n.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=wn.batch(()=>H(this,Zt).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(lr).catch(lr)}invalidateQueries(e={},t={}){return wn.batch(()=>{if(H(this,Zt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=wn.batch(()=>H(this,Zt).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(lr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(lr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=H(this,Zt).build(this,t);return n.isStaleByTime(lc(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(lr).catch(lr)}fetchInfiniteQuery(e){return e.behavior=$S(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(lr).catch(lr)}ensureInfiniteQueryData(e){return e.behavior=$S(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vf.isOnline()?H(this,bi).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Zt)}getMutationCache(){return H(this,bi)}getDefaultOptions(){return H(this,wi)}setDefaultOptions(e){Se(this,wi,e)}setQueryDefaults(e,t){H(this,Sc).set(Jo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,Sc).values()];let n={};return t.forEach(r=>{Bu(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){H(this,_c).set(Jo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,_c).values()];let n={};return t.forEach(r=>{Bu(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,wi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Fw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===$w&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,wi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Zt).clear(),H(this,bi).clear()}},Zt=new WeakMap,bi=new WeakMap,wi=new WeakMap,Sc=new WeakMap,_c=new WeakMap,ji=new WeakMap,Cc=new WeakMap,kc=new WeakMap,O2),gs,dt,ih,rs,Lo,Ec,Ni,ia,oh,Tc,Ac,Oo,Fo,Si,Pc,gt,Bd,Uy,By,Vy,qy,Wy,Hy,Gy,CP,F2,ZU=(F2=class extends ad{constructor(t,n){super();$e(this,gt);$e(this,gs);$e(this,dt);$e(this,ih);$e(this,rs);$e(this,Lo);$e(this,Ec);$e(this,Ni);$e(this,ia);$e(this,oh);$e(this,Tc);$e(this,Ac);$e(this,Oo);$e(this,Fo);$e(this,Si);$e(this,Pc,new Set);this.options=n,Se(this,gs,t),Se(this,ia,null),Se(this,Ni,zy()),this.options.experimental_prefetchInRender||H(this,Ni).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,dt).addObserver(this),US(H(this,dt),this.options)?st(this,gt,Bd).call(this):this.updateResult(),st(this,gt,qy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ky(H(this,dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ky(H(this,dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,st(this,gt,Wy).call(this),st(this,gt,Hy).call(this),H(this,dt).removeObserver(this)}setOptions(t,n){const r=this.options,a=H(this,dt);if(this.options=H(this,gs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fr(this.options.enabled,H(this,dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");st(this,gt,Gy).call(this),H(this,dt).setOptions(this.options),r._defaulted&&!Bf(this.options,r)&&H(this,gs).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,dt),observer:this});const i=this.hasListeners();i&&BS(H(this,dt),a,this.options,r)&&st(this,gt,Bd).call(this),this.updateResult(n),i&&(H(this,dt)!==a||Fr(this.options.enabled,H(this,dt))!==Fr(r.enabled,H(this,dt))||lc(this.options.staleTime,H(this,dt))!==lc(r.staleTime,H(this,dt)))&&st(this,gt,Uy).call(this);const o=st(this,gt,By).call(this);i&&(H(this,dt)!==a||Fr(this.options.enabled,H(this,dt))!==Fr(r.enabled,H(this,dt))||o!==H(this,Si))&&st(this,gt,Vy).call(this,o)}getOptimisticResult(t){const n=H(this,gs).getQueryCache().build(H(this,gs),t),r=this.createResult(n,t);return tB(this,r)&&(Se(this,rs,r),Se(this,Ec,this.options),Se(this,Lo,H(this,dt).state)),r}getCurrentResult(){return H(this,rs)}trackResult(t,n){const r={};return Object.keys(t).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),n==null||n(a),t[a])})}),r}trackProp(t){H(this,Pc).add(t)}getCurrentQuery(){return H(this,dt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=H(this,gs).defaultQueryOptions(t),r=H(this,gs).getQueryCache().build(H(this,gs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return st(this,gt,Bd).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,rs)))}createResult(t,n){var j;const r=H(this,dt),a=this.options,i=H(this,rs),o=H(this,Lo),l=H(this,Ec),d=t!==r?t.state:H(this,ih),{state:u}=t;let h={...u},m=!1,p;if(n._optimisticResults){const k=this.hasListeners(),T=!k&&US(t,n),A=k&&BS(t,r,n,a);(T||A)&&(h={...h,...SP(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:x,status:y}=h;if(n.select&&h.data!==void 0)if(i&&h.data===(o==null?void 0:o.data)&&n.select===H(this,oh))p=H(this,Tc);else try{Se(this,oh,n.select),p=n.select(h.data),p=$y(i==null?void 0:i.data,p,n),Se(this,Tc,p),Se(this,ia,null)}catch(k){Se(this,ia,k)}else p=h.data;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let k;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))k=i.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData((j=H(this,Ac))==null?void 0:j.state.data,H(this,Ac)):n.placeholderData,n.select&&k!==void 0)try{k=n.select(k),Se(this,ia,null)}catch(T){Se(this,ia,T)}k!==void 0&&(y="success",p=$y(i==null?void 0:i.data,k,n),m=!0)}H(this,ia)&&(v=H(this,ia),p=H(this,Tc),x=Date.now(),y="error");const g=h.fetchStatus==="fetching",b=y==="pending",w=y==="error",C=b&&g,_=p!==void 0,N={status:y,fetchStatus:h.fetchStatus,isPending:b,isSuccess:y==="success",isError:w,isInitialLoading:C,isLoading:C,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!b,isLoadingError:w&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:w&&_,isStale:Uw(t,n),refetch:this.refetch,promise:H(this,Ni)};if(this.options.experimental_prefetchInRender){const k=R=>{N.status==="error"?R.reject(N.error):N.data!==void 0&&R.resolve(N.data)},T=()=>{const R=Se(this,Ni,N.promise=zy());k(R)},A=H(this,Ni);switch(A.status){case"pending":t.queryHash===r.queryHash&&k(A);break;case"fulfilled":(N.status==="error"||N.data!==A.value)&&T();break;case"rejected":(N.status!=="error"||N.error!==A.reason)&&T();break}}return N}updateResult(t){const n=H(this,rs),r=this.createResult(H(this,dt),this.options);if(Se(this,Lo,H(this,dt).state),Se(this,Ec,this.options),H(this,Lo).data!==void 0&&Se(this,Ac,H(this,dt)),Bf(r,n))return;Se(this,rs,r);const a={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!H(this,Pc).size)return!0;const c=new Set(l??H(this,Pc));return this.options.throwOnError&&c.add("error"),Object.keys(H(this,rs)).some(d=>{const u=d;return H(this,rs)[u]!==n[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),st(this,gt,CP).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&st(this,gt,qy).call(this)}},gs=new WeakMap,dt=new WeakMap,ih=new WeakMap,rs=new WeakMap,Lo=new WeakMap,Ec=new WeakMap,Ni=new WeakMap,ia=new WeakMap,oh=new WeakMap,Tc=new WeakMap,Ac=new WeakMap,Oo=new WeakMap,Fo=new WeakMap,Si=new WeakMap,Pc=new WeakMap,gt=new WeakSet,Bd=function(t){st(this,gt,Gy).call(this);let n=H(this,dt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(lr)),n},Uy=function(){st(this,gt,Wy).call(this);const t=lc(this.options.staleTime,H(this,dt));if(Xo||H(this,rs).isStale||!Oy(t))return;const r=gP(H(this,rs).dataUpdatedAt,t)+1;Se(this,Oo,setTimeout(()=>{H(this,rs).isStale||this.updateResult()},r))},By=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,dt)):this.options.refetchInterval)??!1},Vy=function(t){st(this,gt,Hy).call(this),Se(this,Si,t),!(Xo||Fr(this.options.enabled,H(this,dt))===!1||!Oy(H(this,Si))||H(this,Si)===0)&&Se(this,Fo,setInterval(()=>{(this.options.refetchIntervalInBackground||zw.isFocused())&&st(this,gt,Bd).call(this)},H(this,Si)))},qy=function(){st(this,gt,Uy).call(this),st(this,gt,Vy).call(this,st(this,gt,By).call(this))},Wy=function(){H(this,Oo)&&(clearTimeout(H(this,Oo)),Se(this,Oo,void 0))},Hy=function(){H(this,Fo)&&(clearInterval(H(this,Fo)),Se(this,Fo,void 0))},Gy=function(){const t=H(this,gs).getQueryCache().build(H(this,gs),this.options);if(t===H(this,dt))return;const n=H(this,dt);Se(this,dt,t),Se(this,ih,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},CP=function(t){wn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(H(this,rs))}),H(this,gs).getQueryCache().notify({query:H(this,dt),type:"observerResultsUpdated"})})},F2);function eB(e,t){return Fr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function US(e,t){return eB(e,t)||e.state.data!==void 0&&Ky(e,t,t.refetchOnMount)}function Ky(e,t,n){if(Fr(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Uw(e,t)}return!1}function BS(e,t,n,r){return(e!==t||Fr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Uw(e,n)}function Uw(e,t){return Fr(t.enabled,e)!==!1&&e.isStaleByTime(lc(t.staleTime,e))}function tB(e,t){return!Bf(e.getCurrentResult(),t)}var _i,Ci,vs,Ia,$a,ef,Qy,$2,nB=($2=class extends ad{constructor(n,r){super();$e(this,$a);$e(this,_i);$e(this,Ci);$e(this,vs);$e(this,Ia);Se(this,_i,n),this.setOptions(r),this.bindMethods(),st(this,$a,ef).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=H(this,_i).defaultMutationOptions(n),Bf(this.options,r)||H(this,_i).getMutationCache().notify({type:"observerOptionsUpdated",mutation:H(this,vs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Jo(r.mutationKey)!==Jo(this.options.mutationKey)?this.reset():((a=H(this,vs))==null?void 0:a.state.status)==="pending"&&H(this,vs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=H(this,vs))==null||n.removeObserver(this)}onMutationUpdate(n){st(this,$a,ef).call(this),st(this,$a,Qy).call(this,n)}getCurrentResult(){return H(this,Ci)}reset(){var n;(n=H(this,vs))==null||n.removeObserver(this),Se(this,vs,void 0),st(this,$a,ef).call(this),st(this,$a,Qy).call(this)}mutate(n,r){var a;return Se(this,Ia,r),(a=H(this,vs))==null||a.removeObserver(this),Se(this,vs,H(this,_i).getMutationCache().build(H(this,_i),this.options)),H(this,vs).addObserver(this),H(this,vs).execute(n)}},_i=new WeakMap,Ci=new WeakMap,vs=new WeakMap,Ia=new WeakMap,$a=new WeakSet,ef=function(){var r;const n=((r=H(this,vs))==null?void 0:r.state)??_P();Se(this,Ci,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qy=function(n){wn.batch(()=>{var r,a,i,o,l,c,d,u;if(H(this,Ia)&&this.hasListeners()){const h=H(this,Ci).variables,m=H(this,Ci).context;(n==null?void 0:n.type)==="success"?((a=(r=H(this,Ia)).onSuccess)==null||a.call(r,n.data,h,m),(o=(i=H(this,Ia)).onSettled)==null||o.call(i,n.data,null,h,m)):(n==null?void 0:n.type)==="error"&&((c=(l=H(this,Ia)).onError)==null||c.call(l,n.error,h,m),(u=(d=H(this,Ia)).onSettled)==null||u.call(d,void 0,n.error,h,m))}this.listeners.forEach(h=>{h(H(this,Ci))})})},$2),kP=f.createContext(void 0),Nn=e=>{const t=f.useContext(kP);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},sB=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(kP.Provider,{value:e,children:t})),EP=f.createContext(!1),rB=()=>f.useContext(EP);EP.Provider;function aB(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var iB=f.createContext(aB()),oB=()=>f.useContext(iB);function TP(e,t){return typeof e=="function"?e(...t):!!e}function AP(){}var lB=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},cB=e=>{f.useEffect(()=>{e.clearReset()},[e])},dB=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&TP(n,[e.error,r]),uB=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},hB=(e,t)=>e.isLoading&&e.isFetching&&!t,mB=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,VS=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function fB(e,t,n){var u,h,m,p,v;const r=Nn(),a=rB(),i=oB(),o=r.defaultQueryOptions(e);(h=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=a?"isRestoring":"optimistic",uB(o),lB(o,i),cB(i);const l=!r.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(r,o)),d=c.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(x=>{const y=a?()=>{}:c.subscribe(wn.batchCalls(x));return c.updateResult(),y},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),mB(o,d))throw VS(o,c,i);if(dB({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;if((p=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||p.call(m,o,d),o.experimental_prefetchInRender&&!Xo&&hB(d,a)){const x=l?VS(o,c,i):(v=r.getQueryCache().get(o.queryHash))==null?void 0:v.promise;x==null||x.catch(AP).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function yt(e,t){return fB(e,ZU)}function En(e,t){const n=Nn(),[r]=f.useState(()=>new nB(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const a=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(wn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=f.useCallback((o,l)=>{r.mutate(o,l).catch(AP)},[r]);if(a.error&&TP(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vu.apply(this,arguments)}var Ai;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ai||(Ai={}));const qS="popstate";function pB(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return Yy("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:qf(a)}return gB(t,n,null,e)}function Gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xB(){return Math.random().toString(36).substr(2,8)}function WS(e,t){return{usr:e.state,key:e.key,idx:t}}function Yy(e,t,n,r){return n===void 0&&(n=null),Vu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?id(t):t,{state:n,key:t&&t.key||r||xB()})}function qf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function id(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function gB(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=Ai.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Vu({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Ai.Pop;let y=u(),g=y==null?null:y-d;d=y,c&&c({action:l,location:x.location,delta:g})}function m(y,g){l=Ai.Push;let b=Yy(x.location,y,g);d=u()+1;let w=WS(b,d),C=x.createHref(b);try{o.pushState(w,"",C)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(C)}i&&c&&c({action:l,location:x.location,delta:1})}function p(y,g){l=Ai.Replace;let b=Yy(x.location,y,g);d=u();let w=WS(b,d),C=x.createHref(b);o.replaceState(w,"",C),i&&c&&c({action:l,location:x.location,delta:0})}function v(y){let g=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:qf(y);return b=b.replace(/ $/,"%20"),Gt(g,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,g)}let x={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(qS,h),c=y,()=>{a.removeEventListener(qS,h),c=null}},createHref(y){return t(a,y)},createURL:v,encodeLocation(y){let g=v(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(y){return o.go(y)}};return x}var HS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(HS||(HS={}));function vB(e,t,n){return n===void 0&&(n="/"),yB(e,t,n,!1)}function yB(e,t,n,r){let a=typeof t=="string"?id(t):t,i=Bc(a.pathname||"/",n);if(i==null)return null;let o=IP(e);bB(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=PB(i);l=TB(o[c],d,r)}return l}function IP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Gt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=zi([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Gt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),IP(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:kB(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of DP(i.path))a(i,o,c)}),t}function DP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=DP(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function bB(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:EB(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wB=/^:[\w-]+$/,jB=3,NB=2,SB=1,_B=10,CB=-2,GS=e=>e==="*";function kB(e,t){let n=e.split("/"),r=n.length;return n.some(GS)&&(r+=CB),t&&(r+=NB),n.filter(a=>!GS(a)).reduce((a,i)=>a+(wB.test(i)?jB:i===""?SB:_B),r)}function EB(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function TB(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Wf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=Wf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:zi([i,h.pathname]),pathnameBase:MB(zi([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=zi([i,h.pathnameBase]))}return o}function Wf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=AB(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function AB(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),PP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function PB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Bc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function IB(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?id(e):e;return{pathname:n?n.startsWith("/")?n:DB(n,t):t,search:LB(r),hash:OB(a)}}function DB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function wg(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Bw(e,t){let n=RB(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vw(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=id(e):(a=Vu({},e),Gt(!a.pathname||!a.pathname.includes("?"),wg("?","pathname","search",a)),Gt(!a.pathname||!a.pathname.includes("#"),wg("#","pathname","hash",a)),Gt(!a.search||!a.search.includes("#"),wg("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=IB(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const zi=e=>e.join("/").replace(/\/\/+/g,"/"),MB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,OB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const RP=["post","put","patch","delete"];new Set(RP);const $B=["get",...RP];new Set($B);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qu.apply(this,arguments)}const ex=f.createContext(null),MP=f.createContext(null),Ya=f.createContext(null),tx=f.createContext(null),Xa=f.createContext({outlet:null,matches:[],isDataRoute:!1}),LP=f.createContext(null);function zB(e,t){let{relative:n}=t===void 0?{}:t;od()||Gt(!1);let{basename:r,navigator:a}=f.useContext(Ya),{hash:i,pathname:o,search:l}=nx(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:zi([r,o])),a.createHref({pathname:c,search:l,hash:i})}function od(){return f.useContext(tx)!=null}function br(){return od()||Gt(!1),f.useContext(tx).location}function OP(e){f.useContext(Ya).static||f.useLayoutEffect(e)}function pt(){let{isDataRoute:e}=f.useContext(Xa);return e?ZB():UB()}function UB(){od()||Gt(!1);let e=f.useContext(ex),{basename:t,future:n,navigator:r}=f.useContext(Ya),{matches:a}=f.useContext(Xa),{pathname:i}=br(),o=JSON.stringify(Bw(a,n.v7_relativeSplatPath)),l=f.useRef(!1);return OP(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let h=Vw(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:zi([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,o,i,e])}function Gr(){let{matches:e}=f.useContext(Xa),t=e[e.length-1];return t?t.params:{}}function nx(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(Ya),{matches:a}=f.useContext(Xa),{pathname:i}=br(),o=JSON.stringify(Bw(a,r.v7_relativeSplatPath));return f.useMemo(()=>Vw(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function BB(e,t){return VB(e,t)}function VB(e,t,n,r){od()||Gt(!1);let{navigator:a}=f.useContext(Ya),{matches:i}=f.useContext(Xa),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=br(),u;if(t){var h;let y=typeof t=="string"?id(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||Gt(!1),u=y}else u=d;let m=u.pathname||"/",p=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=vB(e,{pathname:p}),x=KB(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:zi([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:zi([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return t&&x?f.createElement(tx.Provider,{value:{location:qu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ai.Pop}},x):x}function qB(){let e=JB(),t=FB(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:a},n):null,null)}const WB=f.createElement(qB,null);class HB extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(Xa.Provider,{value:this.props.routeContext},f.createElement(LP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GB(e){let{routeContext:t,match:n,children:r}=e,a=f.useContext(ex);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Xa.Provider,{value:t},r)}function KB(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Gt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:p}=n,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let p,v=!1,x=null,y=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||WB,c&&(d<0&&m===0?(v=!0,y=null):d===m&&(v=!0,y=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),b=()=>{let w;return p?w=x:v?w=y:h.route.Component?w=f.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,f.createElement(GB,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(HB,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}var FP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(FP||{}),Hf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hf||{});function QB(e){let t=f.useContext(ex);return t||Gt(!1),t}function YB(e){let t=f.useContext(MP);return t||Gt(!1),t}function XB(e){let t=f.useContext(Xa);return t||Gt(!1),t}function $P(e){let t=XB(),n=t.matches[t.matches.length-1];return n.route.id||Gt(!1),n.route.id}function JB(){var e;let t=f.useContext(LP),n=YB(Hf.UseRouteError),r=$P(Hf.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function ZB(){let{router:e}=QB(FP.UseNavigateStable),t=$P(Hf.UseNavigateStable),n=f.useRef(!1);return OP(()=>{n.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,qu({fromRouteId:t},i)))},[e,t])}function Os(e){let{to:t,replace:n,state:r,relative:a}=e;od()||Gt(!1);let{future:i,static:o}=f.useContext(Ya),{matches:l}=f.useContext(Xa),{pathname:c}=br(),d=pt(),u=Vw(t,Bw(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:a}),[d,h,a,n,r]),null}function Ce(e){Gt(!1)}function e7(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Ai.Pop,navigator:i,static:o=!1,future:l}=e;od()&&Gt(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:qu({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=id(r));let{pathname:u="/",search:h="",hash:m="",state:p=null,key:v="default"}=r,x=f.useMemo(()=>{let y=Bc(u,c);return y==null?null:{location:{pathname:y,search:h,hash:m,state:p,key:v},navigationType:a}},[c,u,h,m,p,v,a]);return x==null?null:f.createElement(Ya.Provider,{value:d},f.createElement(tx.Provider,{children:n,value:x}))}function Vd(e){let{children:t,location:n}=e;return BB(Xy(t),n)}new Promise(()=>{});function Xy(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,a)=>{if(!f.isValidElement(r))return;let i=[...t,a];if(r.type===f.Fragment){n.push.apply(n,Xy(r.props.children,i));return}r.type!==Ce&&Gt(!1),!r.props.index||!r.props.children||Gt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gf.apply(this,arguments)}function zP(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function t7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function n7(e,t){return e.button===0&&(!t||t==="_self")&&!t7(e)}function Jy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function s7(e,t){let n=Jy(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const r7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],a7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],i7="6";try{window.__reactRouterVersion=i7}catch{}const o7=f.createContext({isTransitioning:!1}),l7="startTransition",KS=jb[l7];function c7(e){let{basename:t,children:n,future:r,window:a}=e,i=f.useRef();i.current==null&&(i.current=pB({window:a,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=f.useCallback(h=>{d&&KS?KS(()=>c(h)):c(h)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.createElement(e7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const d7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,is=f.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,m=zP(t,r7),{basename:p}=f.useContext(Ya),v,x=!1;if(typeof d=="string"&&u7.test(d)&&(v=d,d7))try{let w=new URL(window.location.href),C=d.startsWith("//")?new URL(w.protocol+d):new URL(d),_=Bc(C.pathname,p);C.origin===w.origin&&_!=null?d=_+C.search+C.hash:x=!0}catch{}let y=zB(d,{relative:a}),g=m7(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function b(w){r&&r(w),w.defaultPrevented||g(w)}return f.createElement("a",Gf({},m,{href:v||y,onClick:x||i?r:b,ref:n,target:c}))}),sr=f.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,h=zP(t,a7),m=nx(c,{relative:h.relative}),p=br(),v=f.useContext(MP),{navigator:x,basename:y}=f.useContext(Ya),g=v!=null&&f7(m)&&d===!0,b=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,w=p.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(w=w.toLowerCase(),C=C?C.toLowerCase():null,b=b.toLowerCase()),C&&y&&(C=Bc(C,y)||C);const _=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let S=w===b||!o&&w.startsWith(b)&&w.charAt(_)==="/",N=C!=null&&(C===b||!o&&C.startsWith(b)&&C.charAt(b.length)==="/"),j={isActive:S,isPending:N,isTransitioning:g},k=S?r:void 0,T;typeof i=="function"?T=i(j):T=[i,S?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(j):l;return f.createElement(is,Gf({},h,{"aria-current":k,className:T,ref:n,style:A,to:c,viewTransition:d}),typeof u=="function"?u(j):u)});var Zy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var QS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(QS||(QS={}));function h7(e){let t=f.useContext(ex);return t||Gt(!1),t}function m7(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=pt(),d=br(),u=nx(e,{relative:o});return f.useCallback(h=>{if(n7(h,n)){h.preventDefault();let m=r!==void 0?r:qf(d)===qf(u);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,r,a,n,e,i,o,l])}function ld(e){let t=f.useRef(Jy(e)),n=f.useRef(!1),r=br(),a=f.useMemo(()=>s7(r.search,n.current?null:t.current),[r.search]),i=pt(),o=f.useCallback((l,c)=>{const d=Jy(typeof l=="function"?l(a):l);n.current=!0,i("?"+d,c)},[i,a]);return[a,o]}function f7(e,t){t===void 0&&(t={});let n=f.useContext(o7);n==null&&Gt(!1);let{basename:r}=h7(Zy.useViewTransitionState),a=nx(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Bc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Bc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wf(a.pathname,o)!=null||Wf(a.pathname,i)!=null}const p7="modulepreload",x7=function(e){return"/"+e},YS={},wa=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=x7(c),c in YS)return;YS[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":p7,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},g7=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wa(async()=>{const{default:r}=await Promise.resolve().then(()=>cd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class sx extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class UP extends sx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class e0 extends sx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class t0 extends sx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Kf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Kf||(Kf={}));var v7=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class y7{constructor(t,{headers:n={},customFetch:r,region:a=Kf.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=g7(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return v7(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(x=>{throw new UP(x)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new e0(h);if(!h.ok)throw new t0(h);let p=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof t0||a instanceof e0?a.context:void 0}}})}}var bs={},qw={},rx={},vh={},ax={},ix={},b7=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vc=b7();const w7=Vc.fetch,BP=Vc.fetch.bind(Vc),VP=Vc.Headers,j7=Vc.Request,N7=Vc.Response,cd=Object.freeze(Object.defineProperty({__proto__:null,Headers:VP,Request:j7,Response:N7,default:BP,fetch:w7},Symbol.toStringTag,{value:"Module"})),S7=s3(cd);var ox={};Object.defineProperty(ox,"__esModule",{value:!0});let _7=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ox.default=_7;var qP=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ix,"__esModule",{value:!0});const C7=qP(S7),k7=qP(ox);let E7=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=C7.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,h=null,m=null,p=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=b:h=JSON.parse(b))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&g&&g.length>1&&(m=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(h=[],u=null,p=200,v="OK")}catch{i.status===404&&y===""?(p=204,v="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,v="OK"),u&&this.shouldThrowOnError)throw new k7.default(u)}return{error:u,data:h,count:m,status:p,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};ix.default=E7;var T7=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ax,"__esModule",{value:!0});const A7=T7(ix);let P7=class extends A7.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ax.default=P7;var I7=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vh,"__esModule",{value:!0});const D7=I7(ax);let R7=class extends D7.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};vh.default=R7;var M7=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rx,"__esModule",{value:!0});const Pd=M7(vh);let L7=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Pd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Pd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Pd.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Pd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Pd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};rx.default=L7;var WP=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qw,"__esModule",{value:!0});const O7=WP(rx),F7=WP(vh);let $7=class HP{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new O7.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new HP(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",d=n);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new F7.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};qw.default=$7;var dd=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bs,"__esModule",{value:!0});bs.PostgrestError=bs.PostgrestBuilder=bs.PostgrestTransformBuilder=bs.PostgrestFilterBuilder=bs.PostgrestQueryBuilder=bs.PostgrestClient=void 0;const GP=dd(qw);bs.PostgrestClient=GP.default;const KP=dd(rx);bs.PostgrestQueryBuilder=KP.default;const QP=dd(vh);bs.PostgrestFilterBuilder=QP.default;const YP=dd(ax);bs.PostgrestTransformBuilder=YP.default;const XP=dd(ix);bs.PostgrestBuilder=XP.default;const JP=dd(ox);bs.PostgrestError=JP.default;var z7=bs.default={PostgrestClient:GP.default,PostgrestQueryBuilder:KP.default,PostgrestFilterBuilder:QP.default,PostgrestTransformBuilder:YP.default,PostgrestBuilder:XP.default,PostgrestError:JP.default};const{PostgrestClient:U7,PostgrestQueryBuilder:Yce,PostgrestFilterBuilder:Xce,PostgrestTransformBuilder:Jce,PostgrestBuilder:Zce,PostgrestError:B7}=z7;class ZP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const V7="2.15.5",q7=`realtime-js/${V7}`,W7="1.0.0",n0=1e4,H7=1e3,G7=100;var lu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lu||(lu={}));var vn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(vn||(vn={}));var Lr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Lr||(Lr={}));var s0;(function(e){e.websocket="websocket"})(s0||(s0={}));var yo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yo||(yo={}));class K7{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class e4{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const XS=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Q7(o,e,t,a),i),{})},Q7=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?t4(i,o):r0(o)},t4=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Z7(t,n)}switch(e){case _t.bool:return Y7(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return X7(t);case _t.json:case _t.jsonb:return J7(t);case _t.timestamp:return eV(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return r0(t);default:return r0(t)}},r0=e=>e,Y7=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},X7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},J7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Z7=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>t4(t,l))}return e},eV=e=>typeof e=="string"?e.replace(" ","T"):e,n4=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class jg{constructor(t,n,r={},a=n0){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var a0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(a0||(a0={}));class cc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cc.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=cc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=cc.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),v=u.filter(y=>p.indexOf(y.presence_ref)<0),x=h.filter(y=>m.indexOf(y.presence_ref)<0);v.length>0&&(l[d]=v),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(p=>p.presence_ref),m=u.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var i0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(i0||(i0={}));var dc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(dc||(dc={}));var na;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(na||(na={}));class lx{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new jg(this,Lr.join,this.params,this.timeout),this.rejoinTimer=new e4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lr.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new cc(this),this.broadcastEndpointURL=n4(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==vn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[dc.PRESENCE]&&this.bindings[dc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(na.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(na.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){t==null||t(na.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,g=[];for(let b=0;b<y;b++){const w=x[b],{filter:{event:C,schema:_,table:S,filter:N}}=w,j=p&&p[b];if(j&&j.event===C&&j.schema===_&&j.table===S&&j.filter===N)g.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),this.state=vn.errored,t==null||t(na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(na.SUBSCRIBED);return}}).receive("error",p=>{this.state=vn.errored,t==null||t(na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===vn.joined&&t===dc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new jg(this,Lr.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new jg(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>G7){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Lr;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,x,y;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(x=p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,x,y,g,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const C=p.id,_=(v=p.filter)===null||v===void 0?void 0:v.event;return C&&((x=n.ids)===null||x===void 0?void 0:x.includes(C))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(b=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:y,commit_timestamp:g,type:b,errors:w}=v;m=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:g,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(v))}p.callback(m,r)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&lx.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Lr.close,{},t)}_onError(t){this._on(Lr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=XS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=XS(t.columns,t.old_record)),n}}const Ng=()=>{},vm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tV=[1e3,2e3,5e3,1e4],nV=1e4,sV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class s4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=n0,this.transport=null,this.heartbeatIntervalMs=vm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ng,this.ref=0,this.reconnectTimer=null,this.logger=Ng,this.conn=null,this.sendBuffer=[],this.serializer=new K7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>wa(async()=>{const{default:l}=await Promise.resolve().then(()=>cd);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${s0.websocket}`,this.httpEndpoint=n4(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:W7}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lu.connecting:return yo.Connecting;case lu.open:return yo.Open;case lu.closing:return yo.Closing;default:return yo.Closed}}isConnected(){return this.connectionState()===yo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new lx(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(H7,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},vm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Lr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([sV],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:q7};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Lr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new e4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,l,c,d,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:n0,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:vm.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ng,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>tV[h-1]||nV,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(h,m)=>m(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ww extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function yn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class rV extends Ww{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class o0 extends Ww{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var aV=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const r4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wa(async()=>{const{default:r}=await Promise.resolve().then(()=>cd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},iV=()=>aV(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wa(()=>Promise.resolve().then(()=>cd),void 0)).Response:Response}),l0=e=>{if(Array.isArray(e))return e.map(n=>l0(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=l0(r)}),t},oV=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var hl=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Sg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lV=(e,t,n)=>hl(void 0,void 0,void 0,function*(){const r=yield iV();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new rV(Sg(a),i,o))}).catch(a=>{t(new o0(Sg(a),a))}):t(new o0(Sg(e),e))}),cV=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(oV(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function yh(e,t,n,r,a,i){return hl(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,cV(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>lV(c,l,r))})})}function Qf(e,t,n,r){return hl(this,void 0,void 0,function*(){return yh(e,"GET",t,n,r)})}function ea(e,t,n,r,a){return hl(this,void 0,void 0,function*(){return yh(e,"POST",t,r,a,n)})}function c0(e,t,n,r,a){return hl(this,void 0,void 0,function*(){return yh(e,"PUT",t,r,a,n)})}function dV(e,t,n,r){return hl(this,void 0,void 0,function*(){return yh(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function a4(e,t,n,r,a){return hl(this,void 0,void 0,function*(){return yh(e,"DELETE",t,r,a,n)})}var ns=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const uV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},JS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hV{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=r4(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return ns(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},JS),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),h=yield(t=="PUT"?c0:ea)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yn(i))return{data:null,error:i};throw i}})}upload(t,n,r){return ns(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return ns(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:JS.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield c0(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return ns(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield ea(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ww("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}update(t,n,r){return ns(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ns(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yn(a))return{data:null,error:a};throw a}})}copy(t,n,r){return ns(this,void 0,void 0,function*(){try{return{data:{path:(yield ea(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return ns(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ea(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return ns(this,void 0,void 0,function*(){try{const a=yield ea(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yn(a))return{data:null,error:a};throw a}})}download(t,n){return ns(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Qf(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yn(l))return{data:null,error:l};throw l}})}info(t){return ns(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Qf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:l0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}exists(t){return ns(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield dV(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r)&&r instanceof o0){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return ns(this,void 0,void 0,function*(){try{return{data:yield a4(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}})}list(t,n,r){return ns(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},uV),n),{prefix:t||""});return{data:yield ea(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yn(a))return{data:null,error:a};throw a}})}listV2(t,n){return ns(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ea(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const mV="2.12.0",fV={"X-Client-Info":`storage-js/${mV}`};var wl=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class pV{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},fV),n),this.fetch=r4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return wl(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}getBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return wl(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return wl(this,void 0,void 0,function*(){try{return{data:yield c0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield a4(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}})}}class xV extends pV{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new hV(this.url,this.headers,t,this.fetch)}}const gV="2.57.2";let qd="";typeof Deno<"u"?qd="deno":typeof document<"u"?qd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qd="react-native":qd="node";const vV={"X-Client-Info":`supabase-js-${qd}/${gV}`},yV={headers:vV},bV={schema:"public"},wV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jV={};var NV=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const SV=e=>{let t;return e?t=e:typeof fetch>"u"?t=BP:t=fetch,(...n)=>t(...n)},_V=()=>typeof Headers>"u"?VP:Headers,CV=(e,t,n)=>{const r=SV(n),a=_V();return(i,o)=>NV(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var kV=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};function EV(e){return e.endsWith("/")?e:e+"/"}function TV(e,t){var n,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>kV(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const i4="2.71.1",Rl=30*1e3,d0=3,_g=d0*Rl,AV="http://localhost:9999",PV="supabase.auth.token",IV={"X-Client-Info":`gotrue-js/${i4}`},u0="X-Supabase-Api-Version",o4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RV=10*60*1e3;class cx extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class l4 extends cx{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function c4(e){return Xe(e)&&e.name==="AuthApiError"}class Hw extends cx{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ja extends cx{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Aa extends Ja{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d4(e){return Xe(e)&&e.name==="AuthSessionMissingError"}class Wd extends Ja{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hd extends Ja{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Gd extends Ja{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u4(e){return Xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class h0 extends Ja{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yf extends Ja{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function tf(e){return Xe(e)&&e.name==="AuthRetryableFetchError"}class m0 extends Ja{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Xf extends Ja{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ZS=` 	
\r=`.split(""),MV=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ZS.length;t+=1)e[ZS[t].charCodeAt(0)]=-2;for(let t=0;t<Jf.length;t+=1)e[Jf[t].charCodeAt(0)]=t;return e})();function e_(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jf[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jf[r]),t.queuedBits-=6}}function h4(e,t,n){const r=MV[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function t_(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{FV(o,r,n)};for(let o=0;o<e.length;o+=1)h4(e.charCodeAt(o),a,i);return t.join("")}function LV(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function OV(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}LV(r,t)}}function FV(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function $V(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)h4(e.charCodeAt(a),n,r);return new Uint8Array(t)}function zV(e){const t=[];return OV(e,n=>t.push(n)),new Uint8Array(t)}function UV(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>e_(a,n,r)),e_(null,n,r),t.join("")}function BV(e){return Math.round(Date.now()/1e3)+e}function VV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const kr=()=>typeof window<"u"&&typeof document<"u",co={tested:!1,writable:!1},m4=()=>{if(!kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(co.tested)return co.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),co.tested=!0,co.writable=!0}catch{co.tested=!0,co.writable=!1}return co.writable};function qV(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const f4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wa(async()=>{const{default:r}=await Promise.resolve().then(()=>cd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},WV=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ml=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},uo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},si=async(e,t)=>{await e.removeItem(t)};class dx{constructor(){this.promise=new dx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}dx.promiseConstructor=Promise;function Cg(e){const t=e.split(".");if(t.length!==3)throw new Xf("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!DV.test(t[r]))throw new Xf("JWT not in base64url format");return{header:JSON.parse(t_(t[0])),payload:JSON.parse(t_(t[1])),signature:$V(t[2]),raw:{header:t[0],payload:t[1]}}}async function HV(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function GV(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function KV(e){return("0"+e.toString(16)).substr(-2)}function QV(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,KV).join("")}async function YV(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function XV(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await YV(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jl(e,t,n=!1){const r=QV();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Ml(e,`${t}-code-verifier`,a);const i=await XV(r);return[i,r===i?"plain":"s256"]}const JV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ZV(e){const t=e.headers.get(u0);if(!t||!t.match(JV))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function e9(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function t9(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nl(e){if(!n9.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kg(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function n_(e){return JSON.parse(JSON.stringify(e))}var s9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),r9=[502,503,504];async function s_(e){var t;if(!WV(e))throw new Yf(xo(e),0);if(r9.includes(e.status))throw new Yf(xo(e),e.status);let n;try{n=await e.json()}catch(i){throw new Hw(xo(i),i)}let r;const a=ZV(e);if(a&&a.getTime()>=o4["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new m0(xo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Aa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new m0(xo(n),e.status,n.weak_password.reasons);throw new l4(xo(n),e.status||500,r)}const a9=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function ot(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[u0]||(i[u0]=o4["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await i9(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function i9(e,t,n,r,a,i){const o=a9(t,r,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Yf(xo(c),0)}if(l.ok||await s_(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await s_(c)}}function Ea(e){var t;let n=null;d9(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=BV(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function r_(e){const t=Ea(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function gi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function o9(e){return{data:e,error:null}}function l9(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=s9(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function c9(e){return e}function d9(e){return e.access_token&&e.refresh_token&&e.expires_in}const nf=["global","local","others"];var u9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class p4{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=f4(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=nf[0]){if(nf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nf.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=u9(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:l9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gi})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:c9});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);d[`${y}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Nl(t);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gi})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Nl(t);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:gi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Nl(t);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:gi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Nl(t.userId);try{const{data:n,error:r}=await ot(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Nl(t.userId),Nl(t.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}}function a_(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function h9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const go={debug:!!(globalThis&&m4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class x4 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class g4 extends x4{}async function v4(e,t,n){go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),go.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{go.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw go.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new g4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(go.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}h9();const m9={url:AV,storageKey:PV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function i_(e,t,n){return await n()}const Sl={};class qc{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qc.nextInstanceID,qc.nextInstanceID+=1,this.instanceID>0&&kr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},m9),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new p4({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=f4(a.fetch),this.lock=a.lock||i_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:kr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=v4:this.lock=i_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:m4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=a_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=a_(this.memoryStorage)),kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Sl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Sl[this.storageKey]=Object.assign(Object.assign({},Sl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Sl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Sl[this.storageKey]=Object.assign(Object.assign({},Sl[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${i4}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=qV(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),kr()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),u4(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xe(n)?{error:n}:{error:new Hw("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ea}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:u,password:h,options:m}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await jl(this.storage,this.storageKey)),i=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:Ea})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ea})}else throw new Hd("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:r_})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:r_})}else throw new Hd("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Wd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,i,o,l,c,d,u,h,m,p;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:y,wallet:g,statement:b,options:w}=t;let C;if(kr())if(typeof g=="object")C=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))C=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const _=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const S=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)v=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),x=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await C.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:y,error:g}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:UV(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ea});if(g)throw g;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Wd}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:g})}catch(y){if(Xe(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const n=await uo(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:o}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ea});if(await si(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Wd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Xe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,l=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ea}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Wd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await jl(this.storage,this.storageKey));const{error:h}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Hd("You must provide either an email or phone number.")}catch(l){if(Xe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ea});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Xe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await jl(this.storage,this.storageKey)),await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:o9})}catch(i){if(Xe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Aa;const{error:a}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Hd("You must provide either an email or phone number and a type")}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<_g:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await uo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=kg()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:gi}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Aa}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:gi})})}catch(n){if(Xe(n))return d4(n)&&(await this._removeSession(),await si(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Aa;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await jl(this.storage,this.storageKey));const{data:d,error:u}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:gi});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Aa;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=Cg(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Xe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Aa;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!kr())throw new Gd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new h0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new h0("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new Gd("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const p=m-u;p*1e3<=Rl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,u);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Xe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await uo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(c4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await si(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=VV(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await jl(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Xe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return kr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Xe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await GV(async a=>(a>0&&await HV(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ea})),(a,i)=>{const o=200*Math.pow(2,a);return i&&tf(i)&&Date.now()+o-r<Rl})}catch(r){if(this._debug(n,"error",r),Xe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),kr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await uo(this.storage,this.storageKey);if(a&&this.userStorage){let o=await uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Ml(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:kg()}else if(a&&!a.user&&!a.user){const o=await uo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await si(this.storage,this.storageKey+"-user"),await Ml(this.storage,this.storageKey,a)):a.user=kg()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<_g;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${_g}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),tf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Aa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new dx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Aa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Xe(i)){const o={session:null,error:i};return tf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ml(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=n_(a);await Ml(this.storage,this.storageKey,i)}else{const a=n_(n);await Ml(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await si(this.storage,this.storageKey),await si(this.storage,this.storageKey+"-code-verifier"),await si(this.storage,this.storageKey+"-user"),this.userStorage&&await si(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Rl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Rl}ms, refresh threshold is ${d0} ticks`),a<=d0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof x4)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await jl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await ot(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Cg(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+RV>a)return r;const{data:i,error:o}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};r=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Cg(r);n!=null&&n.allowExpired||e9(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=t9(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,zV(`${l}.${c}`)))throw new Xf("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}}qc.nextInstanceID=0;const y4=qc;class f9 extends y4{constructor(t){super(t)}}var p9=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class b4{constructor(t,n,r){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=EV(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:bV,realtime:jV,auth:Object.assign(Object.assign({},wV),{storageKey:d}),global:yV},h=TV(r??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=CV(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new U7(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new xV(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new y7(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return p9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f9({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new s4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const w4=(e,t,n)=>new b4(e,t,n);function x9(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}x9()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const g9=Object.freeze(Object.defineProperty({__proto__:null,AuthApiError:l4,AuthClient:y4,AuthError:cx,AuthImplicitGrantRedirectError:Gd,AuthInvalidCredentialsError:Hd,AuthInvalidJwtError:Xf,AuthInvalidTokenResponseError:Wd,AuthPKCEGrantCodeExchangeError:h0,AuthRetryableFetchError:Yf,AuthSessionMissingError:Aa,AuthUnknownError:Hw,AuthWeakPasswordError:m0,CustomAuthError:Ja,get FunctionRegion(){return Kf},FunctionsError:sx,FunctionsFetchError:UP,FunctionsHttpError:t0,FunctionsRelayError:e0,GoTrueAdminApi:p4,GoTrueClient:qc,NavigatorLockAcquireTimeoutError:g4,PostgrestError:B7,get REALTIME_LISTEN_TYPES(){return dc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return i0},get REALTIME_PRESENCE_LISTEN_EVENTS(){return a0},get REALTIME_SUBSCRIBE_STATES(){return na},RealtimeChannel:lx,RealtimeClient:s4,RealtimePresence:cc,SIGN_OUT_SCOPES:nf,SupabaseClient:b4,WebSocketFactory:ZP,createClient:w4,isAuthApiError:c4,isAuthError:Xe,isAuthImplicitGrantRedirectError:u4,isAuthRetryableFetchError:tf,isAuthSessionMissingError:d4,lockInternals:go,navigatorLock:v4},Symbol.toStringTag,{value:"Module"})),v9="https://jfolpnyipoocflcrachg.supabase.co",y9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg",L=w4(v9,y9,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"gemeos.supabase.auth",flowType:"pkce"}}),No=class No{constructor(){Bt(this,"currentTenantId",null);Bt(this,"cachedPermissions",new Map);Bt(this,"sessionCache",null);Bt(this,"sessionCacheTime",0);Bt(this,"sessionPromise",null);Bt(this,"CACHE_DURATION",5e3);Bt(this,"lastGoodSession",null)}static getInstance(){return No.instance||(No.instance=new No),No.instance}async getCurrentSession(){console.log("🔍 getCurrentSession: Starting...");const t=Date.now();if(this.sessionCache&&t-this.sessionCacheTime<this.CACHE_DURATION)return console.log("🔍 getCurrentSession: Returning cached session"),this.sessionCache;if(this.sessionPromise)return console.log("🔍 getCurrentSession: Waiting for existing request..."),this.sessionPromise;this.sessionPromise=this.fetchCurrentSession();try{const n=await this.sessionPromise;return this.sessionCache=n,this.sessionCacheTime=Date.now(),n}finally{this.sessionPromise=null}}async fetchCurrentSession(){var t;try{console.log("🔍 fetchCurrentSession: Getting session from Supabase...");const{data:n,error:r}=await L.auth.getSession();if(r)return console.warn("🔍 fetchCurrentSession: getSession error:",r),this.lastGoodSession;console.log("🔍 fetchCurrentSession: getSession() completed successfully");const a={data:n,error:null},{session:i}=n;if(console.log("🔍 fetchCurrentSession: Session call completed, session exists:",!!i),!(i!=null&&i.user))return console.log("🔍 fetchCurrentSession: No session found"),this.lastGoodSession;const o=i.user;console.log("🔍 fetchCurrentSession: User received:",o==null?void 0:o.email),console.log("🔍 getCurrentSession: Fetching user tenant associations...");let l=null,c=null;const{data:d,error:u}=await L.from("user_tenants").select("*").eq("user_id",o.id).eq("status","active");if(u)console.error("🔍 getCurrentSession: Error fetching user tenants:",u),c=u;else if(l=d,l&&l.length>0)for(const v of l){if(v.tenant_id){const{data:x}=await L.from("tenants").select("*").eq("id",v.tenant_id).single();v.tenants=x}if(v.role_id){const{data:x}=await L.from("user_roles").select("*").eq("id",v.role_id).single();v.user_roles=x}}let h=!1;l&&l.length>0&&(h=l.some(v=>{var x,y;return((x=v.user_roles)==null?void 0:x.name)==="platform_admin"||((y=v.user_roles)==null?void 0:y.name)==="super_admin"})),!h&&o.email==="admin@gemeos.ai"&&(h=!0);const m=(l==null?void 0:l.find(v=>v.is_primary))||(l==null?void 0:l[0]);console.log("🔍 getCurrentSession: User tenants found:",(l==null?void 0:l.length)||0),console.log("🔍 getCurrentSession: Is platform admin:",h),console.log("🔍 getCurrentSession: Primary tenant:",(t=m==null?void 0:m.tenants)==null?void 0:t.name);const p={user_id:o.id,email:o.email,tenants:l||[],current_tenant:m?{tenant_id:m.tenant_id,role_id:m.role_id,tenant:m.tenants,role:m.user_roles,is_primary:m.is_primary}:null,is_platform_admin:h};return this.lastGoodSession=p,p}catch(n){return console.error("🔍 fetchCurrentSession: Error:",n),null}}clearSessionCache(){console.log("🔍 Clearing session cache (logout)"),this.sessionCache=null,this.sessionCacheTime=0,this.sessionPromise=null,this.lastGoodSession=null}async logout(){console.log("🔍 Logging out user"),await L.auth.signOut(),this.clearSessionCache()}async switchTenant(t){const n=await this.getCurrentSession();if(!n)return!1;if(!n.tenants.some(a=>a.tenant_id===t))throw new AuthorizationError("You do not have access to this tenant");return this.currentTenantId=t,this.cachedPermissions.clear(),localStorage.setItem("current_tenant_id",t),!0}getCurrentTenantId(){return this.currentTenantId||localStorage.getItem("current_tenant_id")}async createTenant(t){const{data:n,error:r}=await L.from("tenants").insert(t).select().single();if(r)throw r;return n}async getTenant(t){const{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).single();return r?(console.error("Error fetching tenant:",r),null):n}async updateTenant(t,n){const{data:r,error:a}=await L.from("tenants").update(n).eq("id",t).select().single();if(a)throw a;return r}async inviteUser(t){const{data:n}=await L.from("profiles").select("user_id").eq("email",t.email).single();if(n)await this.assignRoleToUser({user_id:n.user_id,tenant_id:t.tenant_id,role:t.role});else{const{error:r}=await L.auth.admin.inviteUserByEmail(t.email,{data:{tenant_id:t.tenant_id,role:t.role}});if(r)throw r}}async assignRoleToUser(t){const{data:n}=await L.from("user_roles").select("id").eq("name",t.role).single();if(!n)throw new Error(`Role ${t.role} not found`);const{error:r}=await L.from("user_tenants").upsert({user_id:t.user_id,tenant_id:t.tenant_id,role_id:n.id,status:"active",joined_at:new Date().toISOString()});if(r)throw r}async removeUserFromTenant(t,n){const{error:r}=await L.from("user_tenants").update({status:"inactive"}).eq("user_id",t).eq("tenant_id",n);if(r)throw r}async hasPermission(t,n){const r=await this.getCurrentSession();if(!r)return!1;if(r.is_platform_admin)return!0;const a=this.getCurrentTenantId();if(!a)return!1;const{data:i,error:o}=await L.rpc("user_has_permission",{p_user_id:r.user_id,p_tenant_id:a,p_resource:t,p_action:n});return o?(console.error("Error checking permission:",o),!1):i||!1}async getUserPermissions(){var l;const t=await this.getCurrentSession();if(!t)return[];const n=this.getCurrentTenantId();if(!n)return[];const r=`${t.user_id}:${n}`;if(this.cachedPermissions.has(r))return this.cachedPermissions.get(r);const{data:a,error:i}=await L.from("role_permissions").select(`
        permissions (
          id,
          resource,
          action,
          description
        )
      `).eq("role_id",(l=t.current_tenant)==null?void 0:l.role_id).or(`tenant_id.eq.${n},tenant_id.is.null`);if(i)return console.error("Error fetching permissions:",i),[];const o=(a==null?void 0:a.flatMap(c=>c.permissions).filter(Boolean))||[];return this.cachedPermissions.set(r,o),o}async getTenantContext(){const t=await this.getCurrentSession();if(!t||!t.current_tenant)return null;const n=await this.getUserPermissions();return{tenant:t.current_tenant.tenant,user_role:t.current_tenant.role,permissions:n,can:(r,a)=>n.some(i=>i.resource===r&&i.action===a)}}async createAuditLog(t,n,r,a){const i=this.getCurrentTenantId(),{error:o}=await L.rpc("create_audit_log",{p_tenant_id:i,p_action:t,p_resource_type:n,p_resource_id:r,p_changes:a});o&&console.error("Error creating audit log:",o)}async getAuditLogs(t){const n=this.getCurrentTenantId();if(!n)return[];let r=L.from("audit_logs").select("*").eq("tenant_id",n).order("created_at",{ascending:!1});t!=null&&t.resource_type&&(r=r.eq("resource_type",t.resource_type)),t!=null&&t.user_id&&(r=r.eq("user_id",t.user_id)),t!=null&&t.start_date&&(r=r.gte("created_at",t.start_date.toISOString())),t!=null&&t.end_date&&(r=r.lte("created_at",t.end_date.toISOString()));const{data:a,error:i}=await r.limit(100);return i?(console.error("Error fetching audit logs:",i),[]):a||[]}clearCache(){this.cachedPermissions.clear()}async isPlatformAdmin(){const t=await this.getCurrentSession();return(t==null?void 0:t.is_platform_admin)||!1}async isTenantAdmin(){var n;const t=await this.getCurrentSession();return((n=t==null?void 0:t.current_tenant)==null?void 0:n.role.name)===SystemRole.TENANT_ADMIN}async isTeacher(){var n;const t=await this.getCurrentSession();return((n=t==null?void 0:t.current_tenant)==null?void 0:n.role.name)===SystemRole.TEACHER}async isStudent(){var n;const t=await this.getCurrentSession();return((n=t==null?void 0:t.current_tenant)==null?void 0:n.role.name)===SystemRole.STUDENT}};Bt(No,"instance");let f0=No;const Qe=f0.getInstance(),j4=f.createContext(void 0);function b9({children:e}){var x,y,g,b,w,C;const[t,n]=f.useState("authenticating"),[r,a]=f.useState(null),[i,o]=f.useState(null),[l,c]=f.useState(!1),[d,u]=f.useState(null),h=t==="authenticating",m=f.useCallback(async _=>{try{c(!0),await Qe.switchTenant(_);const S=await Qe.getCurrentSession();if(S){a(S);const N=await Qe.getTenantContext();o(N)}}catch(S){throw u(S),S}finally{c(!1)}},[]),p=f.useCallback((_,S)=>r!=null&&r.is_platform_admin?!0:(i==null?void 0:i.can(_,S))||!1,[r,i]);f.useEffect(()=>{let _=!1;const{data:{subscription:S}}=L.auth.onAuthStateChange(async(N,j)=>{var k;if(console.log("🔄 Auth state changed:",N,((k=j==null?void 0:j.user)==null?void 0:k.email)||"no user"),N==="SIGNED_OUT"||N==="USER_DELETED")console.log("🔄 User signed out, clearing state"),Qe.clearSessionCache(),a(null),o(null),n("unauthenticated");else if((N==="SIGNED_IN"||N==="TOKEN_REFRESHED")&&j!=null&&j.user){console.log("🔄 User authenticated/refreshed");const T={user_id:j.user.id,email:j.user.email,tenants:[],current_tenant:null,is_platform_admin:j.user.email==="admin@gemeos.ai"};a(T),n("authenticated"),c(!0),Qe.getCurrentSession().then(A=>{var R,F,O,U,M,B;A&&!_&&(console.log("🔄 Full session loaded:",{email:A.email,tenants:((R=A.tenants)==null?void 0:R.length)||0,isPlatformAdmin:A.is_platform_admin,currentTenant:(O=(F=A.current_tenant)==null?void 0:F.tenant)==null?void 0:O.name,role:(M=(U=A.current_tenant)==null?void 0:U.role)==null?void 0:M.name,roleId:(B=A.current_tenant)==null?void 0:B.role_id}),a(A),A.current_tenant&&Qe.getTenantContext().then(D=>{!_&&D&&o(D)}))}).catch(A=>{console.error("🔄 Error loading full session:",A)}).finally(()=>{_||c(!1)})}});return L.auth.getSession().then(({data:N})=>{var j;if(!_)if((j=N.session)!=null&&j.user){const k={user_id:N.session.user.id,email:N.session.user.email,tenants:[],current_tenant:null,is_platform_admin:N.session.user.email==="admin@gemeos.ai"};a(k),n("authenticated"),c(!0),console.log("🔄 Starting enrichment for user:",N.session.user.email),Qe.getCurrentSession().then(T=>{var A,R,F,O,U;T&&!_&&(console.log("🔄 Enrichment complete:",{email:T.email,tenants:((A=T.tenants)==null?void 0:A.length)||0,currentTenant:(F=(R=T.current_tenant)==null?void 0:R.tenant)==null?void 0:F.name,role:(U=(O=T.current_tenant)==null?void 0:O.role)==null?void 0:U.name,isPlatformAdmin:T.is_platform_admin}),a(T),T.current_tenant&&Qe.getTenantContext().then(M=>{!_&&M&&o(M)}))}).catch(T=>{console.error("🔄 Error loading initial full session:",T)}).finally(()=>{_||(console.log("🔄 Enrichment loading complete"),c(!1))})}else n("unauthenticated")}),()=>{console.log("🔄 Cleaning up auth state listener"),_=!0,S.unsubscribe()}},[]);const v={authState:t,session:r,user:r?{id:r.user_id,email:r.email}:null,tenantContext:i,loading:h,enrichmentLoading:l,error:d,switchTenant:m,refresh:async()=>{c(!0);try{const _=await Qe.getCurrentSession();if(_&&(a(_),_.current_tenant)){const S=await Qe.getTenantContext();o(S)}}finally{c(!1)}},hasPermission:p,isPlatformAdmin:(r==null?void 0:r.is_platform_admin)||!1,isTenantAdmin:((y=(x=r==null?void 0:r.current_tenant)==null?void 0:x.role)==null?void 0:y.name)==="tenant_admin"||!1,isTeacher:((b=(g=r==null?void 0:r.current_tenant)==null?void 0:g.role)==null?void 0:b.name)==="teacher"||!1,isStudent:((C=(w=r==null?void 0:r.current_tenant)==null?void 0:w.role)==null?void 0:C.name)==="student"||!1};return s.jsx(j4.Provider,{value:v,children:e})}function dn(){const e=f.useContext(j4);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function w9(e={}){const{session:t,tenantContext:n,loading:r}=dn(),[a,i]=f.useState(null);return f.useEffect(()=>{var l;if(r)return;let o=!0;t||(o=!1),e.requiredRole&&t&&(t.is_platform_admin||((l=t.current_tenant)==null?void 0:l.role.name)===e.requiredRole||(o=!1)),e.requiredPermission&&n&&(t!=null&&t.is_platform_admin||n.can(e.requiredPermission.resource,e.requiredPermission.action)||(o=!1)),i(o),!o&&e.redirectTo&&(window.location.href=e.redirectTo)},[t,n,r,e]),{authorized:a,loading:r,session:t}}var Eg="focusScope.autoFocusOnMount",Tg="focusScope.autoFocusOnUnmount",o_={bubbles:!1,cancelable:!0},j9="FocusScope",bh=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),d=$t(a),u=$t(i),h=f.useRef(null),m=He(t,x=>c(x)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let x=function(w){if(p.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:ii(h.current,{select:!0})},y=function(w){if(p.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||ii(h.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&ii(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const b=new MutationObserver(g);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),b.disconnect()}}},[r,l,p.paused]),f.useEffect(()=>{if(l){c_.add(p);const x=document.activeElement;if(!l.contains(x)){const g=new CustomEvent(Eg,o_);l.addEventListener(Eg,d),l.dispatchEvent(g),g.defaultPrevented||(N9(E9(N4(l)),{select:!0}),document.activeElement===x&&ii(l))}return()=>{l.removeEventListener(Eg,d),setTimeout(()=>{const g=new CustomEvent(Tg,o_);l.addEventListener(Tg,u),l.dispatchEvent(g),g.defaultPrevented||ii(x??document.body,{select:!0}),l.removeEventListener(Tg,u),c_.remove(p)},0)}}},[l,d,u,p]);const v=f.useCallback(x=>{if(!n&&!r||p.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,g=document.activeElement;if(y&&g){const b=x.currentTarget,[w,C]=S9(b);w&&C?!x.shiftKey&&g===C?(x.preventDefault(),n&&ii(w,{select:!0})):x.shiftKey&&g===w&&(x.preventDefault(),n&&ii(C,{select:!0})):g===b&&x.preventDefault()}},[n,r,p.paused]);return s.jsx(_e.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});bh.displayName=j9;function N9(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ii(r,{select:t}),document.activeElement!==n)return}function S9(e){const t=N4(e),n=l_(t,e),r=l_(t.reverse(),e);return[n,r]}function N4(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function l_(e,t){for(const n of e)if(!_9(n,{upTo:t}))return n}function _9(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function C9(e){return e instanceof HTMLInputElement&&"select"in e}function ii(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&C9(e)&&t&&e.select()}}var c_=k9();function k9(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=d_(e,t),e.unshift(t)},remove(t){var n;e=d_(e,t),(n=e[0])==null||n.resume()}}}function d_(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function E9(e){return e.filter(t=>t.tagName!=="A")}var Ag=0;function ux(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??u_()),document.body.insertAdjacentElement("beforeend",e[1]??u_()),Ag++,()=>{Ag===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ag--}},[])}function u_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Gn=function(){return Gn=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gn.apply(this,arguments)};function Gw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function ml(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})}function S4(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var cu="right-scroll-bar-position",du="width-before-scroll-bar",T9="with-scroll-bars-hidden",A9="--removed-body-scroll-bar-size";function Pg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function P9(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var I9=typeof window<"u"?f.useLayoutEffect:f.useEffect,h_=new WeakMap;function _4(e,t){var n=P9(null,function(r){return e.forEach(function(a){return Pg(a,r)})});return I9(function(){var r=h_.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||Pg(l,null)}),i.forEach(function(l){a.has(l)||Pg(l,o)})}h_.set(n,e)},[e]),n}function D9(e){return e}function R9(e,t){t===void 0&&(t=D9);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return a}function C4(e){e===void 0&&(e={});var t=R9(null);return t.options=Gn({async:!0,ssr:!1},e),t}var k4=function(e){var t=e.sideCar,n=Gw(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,Gn({},n))};k4.isSideCarExport=!0;function E4(e,t){return e.useMedium(t),k4}var T4=C4(),Ig=function(){},hx=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:Ig,onWheelCapture:Ig,onTouchMoveCapture:Ig}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,p=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,g=y===void 0?"div":y,b=e.gapMode,w=Gw(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,_=_4([n,t]),S=Gn(Gn({},w),a);return f.createElement(f.Fragment,null,u&&f.createElement(C,{sideCar:T4,removeScrollBar:d,shards:h,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:b}),o?f.cloneElement(f.Children.only(l),Gn(Gn({},S),{ref:_})):f.createElement(g,Gn({},S,{className:c,ref:_}),l))});hx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hx.classNames={fullWidth:du,zeroRight:cu};var M9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function L9(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=M9();return t&&e.setAttribute("nonce",t),e}function O9(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function F9(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $9=function(){var e=0,t=null;return{add:function(n){e==0&&(t=L9())&&(O9(t,n),F9(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},z9=function(){var e=$9();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Kw=function(){var e=z9(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},U9={left:0,top:0,right:0,gap:0},Dg=function(e){return parseInt(e||"",10)||0},B9=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Dg(n),Dg(r),Dg(a)]},V9=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return U9;var t=B9(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},q9=Kw(),uc="data-scroll-locked",W9=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(T9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(uc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(du,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(cu," .").concat(cu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(du," .").concat(du,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uc,`] {
    `).concat(A9,": ").concat(l,`px;
  }
`)},m_=function(){var e=parseInt(document.body.getAttribute(uc)||"0",10);return isFinite(e)?e:0},H9=function(){f.useEffect(function(){return document.body.setAttribute(uc,(m_()+1).toString()),function(){var e=m_()-1;e<=0?document.body.removeAttribute(uc):document.body.setAttribute(uc,e.toString())}},[])},A4=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;H9();var i=f.useMemo(function(){return V9(a)},[a]);return f.createElement(q9,{styles:W9(i,!t,a,n?"":"!important")})},p0=!1;if(typeof window<"u")try{var ym=Object.defineProperty({},"passive",{get:function(){return p0=!0,!0}});window.addEventListener("test",ym,ym),window.removeEventListener("test",ym,ym)}catch{p0=!1}var _l=p0?{passive:!1}:!1,G9=function(e){return e.tagName==="TEXTAREA"},P4=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!G9(e)&&n[t]==="visible")},K9=function(e){return P4(e,"overflowY")},Q9=function(e){return P4(e,"overflowX")},f_=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=I4(e,r);if(a){var i=D4(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Y9=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},X9=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},I4=function(e,t){return e==="v"?K9(t):Q9(t)},D4=function(e,t){return e==="v"?Y9(t):X9(t)},J9=function(e,t){return e==="h"&&t==="rtl"?-1:1},Z9=function(e,t,n,r,a){var i=J9(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{var p=D4(e,l),v=p[0],x=p[1],y=p[2],g=x-y-i*v;(v||g)&&I4(e,l)&&(h+=g,m+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(h)<1||!a)||!u&&(Math.abs(m)<1||!a))&&(d=!0),d},bm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},p_=function(e){return[e.deltaX,e.deltaY]},x_=function(e){return e&&"current"in e?e.current:e},eq=function(e,t){return e[0]===t[0]&&e[1]===t[1]},tq=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},nq=0,Cl=[];function sq(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),a=f.useState(nq++)[0],i=f.useState(Kw)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=S4([e.lockRef.current],(e.shards||[]).map(x_),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var g=bm(x),b=n.current,w="deltaX"in x?x.deltaX:b[0]-g[0],C="deltaY"in x?x.deltaY:b[1]-g[1],_,S=x.target,N=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in x&&N==="h"&&S.type==="range")return!1;var j=f_(N,S);if(!j)return!0;if(j?_=N:(_=N==="v"?"h":"v",j=f_(N,S)),!j)return!1;if(!r.current&&"changedTouches"in x&&(w||C)&&(r.current=_),!_)return!0;var k=r.current||_;return Z9(k,y,x,k==="h"?w:C,!0)},[]),c=f.useCallback(function(x){var y=x;if(!(!Cl.length||Cl[Cl.length-1]!==i)){var g="deltaY"in y?p_(y):bm(y),b=t.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&eq(_.delta,g)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(x_).filter(Boolean).filter(function(_){return _.contains(y.target)}),C=w.length>0?l(y,w[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),d=f.useCallback(function(x,y,g,b){var w={name:x,delta:y,target:g,should:b,shadowParent:rq(g)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(C){return C!==w})},1)},[]),u=f.useCallback(function(x){n.current=bm(x),r.current=void 0},[]),h=f.useCallback(function(x){d(x.type,p_(x),x.target,l(x,e.lockRef.current))},[]),m=f.useCallback(function(x){d(x.type,bm(x),x.target,l(x,e.lockRef.current))},[]);f.useEffect(function(){return Cl.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,_l),document.addEventListener("touchmove",c,_l),document.addEventListener("touchstart",u,_l),function(){Cl=Cl.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,_l),document.removeEventListener("touchmove",c,_l),document.removeEventListener("touchstart",u,_l)}},[]);var p=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(i,{styles:tq(a)}):null,p?f.createElement(A4,{gapMode:e.gapMode}):null)}function rq(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const aq=E4(T4,sq);var wh=f.forwardRef(function(e,t){return f.createElement(hx,Gn({},e,{ref:t,sideCar:aq}))});wh.classNames=hx.classNames;var iq=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},kl=new WeakMap,wm=new WeakMap,jm={},Rg=0,R4=function(e){return e&&(e.host||R4(e.parentNode))},oq=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=R4(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},lq=function(e,t,n,r){var a=oq(t,Array.isArray(e)?e:[e]);jm[n]||(jm[n]=new WeakMap);var i=jm[n],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))u(m);else try{var p=m.getAttribute(r),v=p!==null&&p!=="false",x=(kl.get(m)||0)+1,y=(i.get(m)||0)+1;kl.set(m,x),i.set(m,y),o.push(m),x===1&&v&&wm.set(m,!0),y===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return u(t),l.clear(),Rg++,function(){o.forEach(function(h){var m=kl.get(h)-1,p=i.get(h)-1;kl.set(h,m),i.set(h,p),m||(wm.has(h)||h.removeAttribute(r),wm.delete(h)),p||h.removeAttribute(n)}),Rg--,Rg||(kl=new WeakMap,kl=new WeakMap,wm=new WeakMap,jm={})}},jh=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=iq(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),lq(r,a,n,"aria-hidden")):function(){return null}},Qw="Dialog",[M4,L4]=es(Qw),[cq,Kr]=M4(Qw),O4=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d=!1,u]=Xs({prop:r,defaultProp:a,onChange:i});return s.jsx(cq,{scope:t,triggerRef:l,contentRef:c,contentId:Ws(),titleId:Ws(),descriptionId:Ws(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};O4.displayName=Qw;var F4="DialogTrigger",$4=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Kr(F4,n),i=He(t,a.triggerRef);return s.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Jw(a.open),...r,ref:i,onClick:ue(e.onClick,a.onOpenToggle)})});$4.displayName=F4;var Yw="DialogPortal",[dq,z4]=M4(Yw,{forceMount:void 0}),U4=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Kr(Yw,t);return s.jsx(dq,{scope:t,forceMount:n,children:f.Children.map(r,o=>s.jsx(xn,{present:n||i.open,children:s.jsx(ed,{asChild:!0,container:a,children:o})}))})};U4.displayName=Yw;var Zf="DialogOverlay",B4=f.forwardRef((e,t)=>{const n=z4(Zf,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Kr(Zf,e.__scopeDialog);return i.modal?s.jsx(xn,{present:r||i.open,children:s.jsx(uq,{...a,ref:t})}):null});B4.displayName=Zf;var uq=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Kr(Zf,n);return s.jsx(wh,{as:ds,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(_e.div,{"data-state":Jw(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Zo="DialogContent",V4=f.forwardRef((e,t)=>{const n=z4(Zo,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Kr(Zo,e.__scopeDialog);return s.jsx(xn,{present:r||i.open,children:i.modal?s.jsx(hq,{...a,ref:t}):s.jsx(mq,{...a,ref:t})})});V4.displayName=Zo;var hq=f.forwardRef((e,t)=>{const n=Kr(Zo,e.__scopeDialog),r=f.useRef(null),a=He(t,n.contentRef,r);return f.useEffect(()=>{const i=r.current;if(i)return jh(i)},[]),s.jsx(q4,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ue(e.onFocusOutside,i=>i.preventDefault())})}),mq=f.forwardRef((e,t)=>{const n=Kr(Zo,e.__scopeDialog),r=f.useRef(!1),a=f.useRef(!1);return s.jsx(q4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),q4=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Kr(Zo,n),c=f.useRef(null),d=He(t,c);return ux(),s.jsxs(s.Fragment,{children:[s.jsx(bh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(cl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Jw(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(pq,{titleId:l.titleId}),s.jsx(gq,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Xw="DialogTitle",W4=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Kr(Xw,n);return s.jsx(_e.h2,{id:a.titleId,...r,ref:t})});W4.displayName=Xw;var H4="DialogDescription",G4=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Kr(H4,n);return s.jsx(_e.p,{id:a.descriptionId,...r,ref:t})});G4.displayName=H4;var K4="DialogClose",Q4=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Kr(K4,n);return s.jsx(_e.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,()=>a.onOpenChange(!1))})});Q4.displayName=K4;function Jw(e){return e?"open":"closed"}var Y4="DialogTitleWarning",[fq,X4]=$F(Y4,{contentName:Zo,titleName:Xw,docsSlug:"dialog"}),pq=({titleId:e})=>{const t=X4(Y4),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},xq="DialogDescriptionWarning",gq=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${X4(xq).contentName}}.`;return f.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Zw=O4,J4=$4,ej=U4,Nh=B4,Sh=V4,_h=W4,Ch=G4,mx=Q4;const nn=Zw,kh=J4,vq=ej,Z4=f.forwardRef(({className:e,...t},n)=>s.jsx(Nh,{ref:n,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Z4.displayName=Nh.displayName;const Kt=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(vq,{children:[s.jsx(Z4,{}),s.jsxs(Sh,{ref:r,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(mx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Lt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Kt.displayName=Sh.displayName;const Qt=({className:e,...t})=>s.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Qt.displayName="DialogHeader";const Ui=({className:e,...t})=>s.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ui.displayName="DialogFooter";const Yt=f.forwardRef(({className:e,...t},n)=>s.jsx(_h,{ref:n,className:ne("text-lg font-semibold leading-none tracking-tight",e),...t}));Yt.displayName=_h.displayName;const Tn=f.forwardRef(({className:e,...t},n)=>s.jsx(Ch,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));Tn.displayName=Ch.displayName;const pe=f.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));pe.displayName="Input";var yq="Label",eI=f.forwardRef((e,t)=>s.jsx(_e.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eI.displayName=yq;var tI=eI;const bq=dl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=f.forwardRef(({className:e,...t},n)=>s.jsx(tI,{ref:n,className:ne(bq(),e),...t}));Q.displayName=tI.displayName;const tj=dl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),z=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?ds:"button";return s.jsx(o,{className:ne(tj({variant:t,size:n,className:e})),ref:i,...a})});z.displayName="Button";function fx(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var nj="Checkbox",[wq,ede]=es(nj),[jq,Nq]=wq(nj),nI=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,p]=f.useState(null),v=He(t,C=>p(C)),x=f.useRef(!1),y=m?u||!!m.closest("form"):!0,[g=!1,b]=Xs({prop:a,defaultProp:i,onChange:d}),w=f.useRef(g);return f.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const _=()=>b(w.current);return C.addEventListener("reset",_),()=>C.removeEventListener("reset",_)}},[m,b]),s.jsxs(jq,{scope:n,state:g,disabled:l,children:[s.jsx(_e.button,{type:"button",role:"checkbox","aria-checked":Bi(g)?"mixed":g,"aria-required":o,"data-state":aI(g),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onKeyDown:ue(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:ue(e.onClick,C=>{b(_=>Bi(_)?!0:!_),y&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),y&&s.jsx(Sq,{control:m,bubbles:!x.current,name:r,value:c,checked:g,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Bi(i)?!1:i})]})});nI.displayName=nj;var sI="CheckboxIndicator",rI=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Nq(sI,n);return s.jsx(xn,{present:r||Bi(i.state)||i.state===!0,children:s.jsx(_e.span,{"data-state":aI(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});rI.displayName=sI;var Sq=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i}=e,o=f.useRef(null),l=fx(n),c=Hp(t);f.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&p){const v=new Event("click",{bubbles:r});u.indeterminate=Bi(n),p.call(u,Bi(n)?!1:n),u.dispatchEvent(v)}},[l,n,r]);const d=f.useRef(Bi(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Bi(e){return e==="indeterminate"}function aI(e){return Bi(e)?"indeterminate":e?"checked":"unchecked"}var iI=nI,_q=rI;const Hr=f.forwardRef(({className:e,...t},n)=>s.jsx(iI,{ref:n,className:ne("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(_q,{className:ne("flex items-center justify-center text-current"),children:s.jsx(pn,{className:"h-4 w-4"})})}));Hr.displayName=iI.displayName;function Uo(e){var t,n,r,a,i,o;if(!e)return"/welcome";if(e.user){const l=e.user;if(l.email==="admin@gemeos.ai")return"/admin/dashboard";const c=(t=l.app_metadata)==null?void 0:t.role;if(c)return Nm(c);const d=(n=l.user_metadata)==null?void 0:n.role;if(d)return Nm(d);if(e.is_platform_admin)return"/admin/dashboard";if((a=(r=e.current_tenant)==null?void 0:r.role)!=null&&a.name)return Nm(e.current_tenant.role.name)}return e.is_platform_admin?"/admin/dashboard":(o=(i=e.current_tenant)==null?void 0:i.role)!=null&&o.name?Nm(e.current_tenant.role.name):"/tenant/dashboard"}function Nm(e){return{platform_admin:"/admin/dashboard",super_admin:"/admin/dashboard",tenant_admin:"/tenant/dashboard",teacher:"/teacher/dashboard",student:"/student/dashboard"}[e.toLowerCase()]||"/tenant/dashboard"}const oI=f.createContext({});function Cq(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const sj=typeof window<"u",kq=sj?f.useLayoutEffect:f.useEffect,rj=f.createContext(null);function aj(e,t){e.indexOf(t)===-1&&e.push(t)}function ij(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ha=(e,t,n)=>n>t?t:n<e?e:n;let ep=()=>{};const Ga={},lI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function cI(e){return typeof e=="object"&&e!==null}const dI=e=>/^0[^.\s]+$/u.test(e);function oj(e){let t;return()=>(t===void 0&&(t=e()),t)}const pr=e=>e,Eq=(e,t)=>n=>t(e(n)),Eh=(...e)=>e.reduce(Eq),Wu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class lj{constructor(){this.subscriptions=[]}add(t){return aj(this.subscriptions,t),()=>ij(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ma=e=>e*1e3,fa=e=>e/1e3;function uI(e,t){return t?e*(1e3/t):0}const hI=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Tq=1e-7,Aq=12;function Pq(e,t,n,r,a){let i,o,l=0;do o=t+(n-t)/2,i=hI(o,r,a)-e,i>0?n=o:t=o;while(Math.abs(i)>Tq&&++l<Aq);return o}function Th(e,t,n,r){if(e===t&&n===r)return pr;const a=i=>Pq(i,0,1,e,n);return i=>i===0||i===1?i:hI(a(i),t,r)}const mI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fI=e=>t=>1-e(1-t),pI=Th(.33,1.53,.69,.99),cj=fI(pI),xI=mI(cj),gI=e=>(e*=2)<1?.5*cj(e):.5*(2-Math.pow(2,-10*(e-1))),dj=e=>1-Math.sin(Math.acos(e)),vI=fI(dj),yI=mI(dj),Iq=Th(.42,0,1,1),Dq=Th(0,0,.58,1),bI=Th(.42,0,.58,1),Rq=e=>Array.isArray(e)&&typeof e[0]!="number",wI=e=>Array.isArray(e)&&typeof e[0]=="number",g_={linear:pr,easeIn:Iq,easeInOut:bI,easeOut:Dq,circIn:dj,circInOut:yI,circOut:vI,backIn:cj,backInOut:xI,backOut:pI,anticipate:gI},Mq=e=>typeof e=="string",v_=e=>{if(wI(e)){ep(e.length===4);const[t,n,r,a]=e;return Th(t,n,r,a)}else if(Mq(e))return ep(g_[e]!==void 0),g_[e];return e},Sm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],y_={value:null,addProjectionMetrics:null};function Lq(e,t){let n=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function d(h){o.has(h)&&(u.schedule(h),e()),c++,h(l)}const u={schedule:(h,m=!1,p=!1)=>{const x=p&&a?n:r;return m&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(d),t&&y_.value&&y_.value.frameloop[t].push(c),c=0,n.clear(),a=!1,i&&(i=!1,u.process(h))}};return u}const Oq=40;function jI(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Sm.reduce((w,C)=>(w[C]=Lq(i,t?C:void 0),w),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:p,postRender:v}=o,x=()=>{const w=Ga.useManualTiming?a.timestamp:performance.now();n=!1,Ga.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(w-a.timestamp,Oq),1)),a.timestamp=w,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),m.process(a),p.process(a),v.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(x))},y=()=>{n=!0,r=!0,a.isProcessing||e(x)};return{schedule:Sm.reduce((w,C)=>{const _=o[C];return w[C]=(S,N=!1,j=!1)=>(n||y(),_.schedule(S,N,j)),w},{}),cancel:w=>{for(let C=0;C<Sm.length;C++)o[Sm[C]].cancel(w)},state:a,steps:o}}const{schedule:zt,cancel:Xi,state:In,steps:Mg}=jI(typeof requestAnimationFrame<"u"?requestAnimationFrame:pr,!0);let sf;function Fq(){sf=void 0}const js={now:()=>(sf===void 0&&js.set(In.isProcessing||Ga.useManualTiming?In.timestamp:performance.now()),sf),set:e=>{sf=e,queueMicrotask(Fq)}},NI=e=>t=>typeof t=="string"&&t.startsWith(e),uj=NI("--"),$q=NI("var(--"),hj=e=>$q(e)?zq.test(e.split("/*")[0].trim()):!1,zq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ud={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hu={...ud,transform:e=>Ha(0,1,e)},_m={...ud,default:1},uu=e=>Math.round(e*1e5)/1e5,mj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uq(e){return e==null}const Bq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fj=(e,t)=>n=>!!(typeof n=="string"&&Bq.test(n)&&n.startsWith(e)||t&&!Uq(n)&&Object.prototype.hasOwnProperty.call(n,t)),SI=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,o,l]=r.match(mj);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Vq=e=>Ha(0,255,e),Lg={...ud,transform:e=>Math.round(Vq(e))},Ao={test:fj("rgb","red"),parse:SI("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Lg.transform(e)+", "+Lg.transform(t)+", "+Lg.transform(n)+", "+uu(Hu.transform(r))+")"};function qq(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const x0={test:fj("#"),parse:qq,transform:Ao.transform},Ah=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),oi=Ah("deg"),pa=Ah("%"),Be=Ah("px"),Wq=Ah("vh"),Hq=Ah("vw"),b_={...pa,parse:e=>pa.parse(e)/100,transform:e=>pa.transform(e*100)},Ql={test:fj("hsl","hue"),parse:SI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+pa.transform(uu(t))+", "+pa.transform(uu(n))+", "+uu(Hu.transform(r))+")"},hn={test:e=>Ao.test(e)||x0.test(e)||Ql.test(e),parse:e=>Ao.test(e)?Ao.parse(e):Ql.test(e)?Ql.parse(e):x0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ao.transform(e):Ql.transform(e),getAnimatableNone:e=>{const t=hn.parse(e);return t.alpha=0,hn.transform(t)}},Gq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Kq(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(mj))==null?void 0:t.length)||0)+(((n=e.match(Gq))==null?void 0:n.length)||0)>0}const _I="number",CI="color",Qq="var",Yq="var(",w_="${}",Xq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(Xq,c=>(hn.test(c)?(r.color.push(i),a.push(CI),n.push(hn.parse(c))):c.startsWith(Yq)?(r.var.push(i),a.push(Qq),n.push(c)):(r.number.push(i),a.push(_I),n.push(parseFloat(c))),++i,w_)).split(w_);return{values:n,split:l,indexes:r,types:a}}function kI(e){return Gu(e).values}function EI(e){const{split:t,types:n}=Gu(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const l=n[o];l===_I?i+=uu(a[o]):l===CI?i+=hn.transform(a[o]):i+=a[o]}return i}}const Jq=e=>typeof e=="number"?0:hn.test(e)?hn.getAnimatableNone(e):e;function Zq(e){const t=kI(e);return EI(e)(t.map(Jq))}const Ji={test:Kq,parse:kI,createTransformer:EI,getAnimatableNone:Zq};function Og(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eW({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;a=Og(c,l,e+1/3),i=Og(c,l,e),o=Og(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function tp(e,t){return n=>n>0?t:e}const Wt=(e,t,n)=>e+(t-e)*n,Fg=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},tW=[x0,Ao,Ql],nW=e=>tW.find(t=>t.test(e));function j_(e){const t=nW(e);if(!t)return!1;let n=t.parse(e);return t===Ql&&(n=eW(n)),n}const N_=(e,t)=>{const n=j_(e),r=j_(t);if(!n||!r)return tp(e,t);const a={...n};return i=>(a.red=Fg(n.red,r.red,i),a.green=Fg(n.green,r.green,i),a.blue=Fg(n.blue,r.blue,i),a.alpha=Wt(n.alpha,r.alpha,i),Ao.transform(a))},g0=new Set(["none","hidden"]);function sW(e,t){return g0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function rW(e,t){return n=>Wt(e,t,n)}function pj(e){return typeof e=="number"?rW:typeof e=="string"?hj(e)?tp:hn.test(e)?N_:oW:Array.isArray(e)?TI:typeof e=="object"?hn.test(e)?N_:aW:tp}function TI(e,t){const n=[...e],r=n.length,a=e.map((i,o)=>pj(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=a[o](i);return n}}function aW(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=pj(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function iW(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],l=e.values[o]??0;n[a]=l,r[i]++}return n}const oW=(e,t)=>{const n=Ji.createTransformer(t),r=Gu(e),a=Gu(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?g0.has(e)&&!a.values.length||g0.has(t)&&!r.values.length?sW(e,t):Eh(TI(iW(r,a),a.values),n):tp(e,t)};function AI(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Wt(e,t,n):pj(e)(e,t)}const lW=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>zt.update(t,n),stop:()=>Xi(t),now:()=>In.isProcessing?In.timestamp:js.now()}},PI=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},np=2e4;function xj(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<np;)t+=n,r=e.next(t);return t>=np?1/0:t}function cW(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(xj(r),np);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:fa(a)}}const dW=5;function II(e,t,n){const r=Math.max(t-dW,0);return uI(n-e(r),t-r)}const en={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$g=.001;function uW({duration:e=en.duration,bounce:t=en.bounce,velocity:n=en.velocity,mass:r=en.mass}){let a,i,o=1-t;o=Ha(en.minDamping,en.maxDamping,o),e=Ha(en.minDuration,en.maxDuration,fa(e)),o<1?(a=d=>{const u=d*o,h=u*e,m=u-n,p=v0(d,o),v=Math.exp(-h);return $g-m/p*v},i=d=>{const h=d*o*e,m=h*n+n,p=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-h),x=v0(Math.pow(d,2),o);return(-a(d)+$g>0?-1:1)*((m-p)*v)/x}):(a=d=>{const u=Math.exp(-d*e),h=(d-n)*e+1;return-$g+u*h},i=d=>{const u=Math.exp(-d*e),h=(n-d)*(e*e);return u*h});const l=5/e,c=mW(a,i,l);if(e=ma(e),isNaN(c))return{stiffness:en.stiffness,damping:en.damping,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const hW=12;function mW(e,t,n){let r=n;for(let a=1;a<hW;a++)r=r-e(r)/t(r);return r}function v0(e,t){return e*Math.sqrt(1-t*t)}const fW=["duration","bounce"],pW=["stiffness","damping","mass"];function S_(e,t){return t.some(n=>e[n]!==void 0)}function xW(e){let t={velocity:en.velocity,stiffness:en.stiffness,damping:en.damping,mass:en.mass,isResolvedFromDuration:!1,...e};if(!S_(e,pW)&&S_(e,fW))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Ha(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:en.mass,stiffness:a,damping:i}}else{const n=uW(e);t={...t,...n,mass:en.mass},t.isResolvedFromDuration=!0}return t}function sp(e=en.visualDuration,t=en.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=xW({...n,velocity:-fa(n.velocity||0)}),v=m||0,x=d/(2*Math.sqrt(c*u)),y=o-i,g=fa(Math.sqrt(c/u)),b=Math.abs(y)<5;r||(r=b?en.restSpeed.granular:en.restSpeed.default),a||(a=b?en.restDelta.granular:en.restDelta.default);let w;if(x<1){const _=v0(g,x);w=S=>{const N=Math.exp(-x*g*S);return o-N*((v+x*g*y)/_*Math.sin(_*S)+y*Math.cos(_*S))}}else if(x===1)w=_=>o-Math.exp(-g*_)*(y+(v+g*y)*_);else{const _=g*Math.sqrt(x*x-1);w=S=>{const N=Math.exp(-x*g*S),j=Math.min(_*S,300);return o-N*((v+x*g*y)*Math.sinh(j)+_*y*Math.cosh(j))/_}}const C={calculatedDuration:p&&h||null,next:_=>{const S=w(_);if(p)l.done=_>=h;else{let N=_===0?v:0;x<1&&(N=_===0?ma(v):II(w,_,S));const j=Math.abs(N)<=r,k=Math.abs(o-S)<=a;l.done=j&&k}return l.value=l.done?o:S,l},toString:()=>{const _=Math.min(xj(C),np),S=PI(N=>C.next(_*N).value,_,30);return _+"ms "+S},toTransition:()=>{}};return C}sp.applyToOptions=e=>{const t=cW(e,100,sp);return e.ease=t.ease,e.duration=ma(t.duration),e.type="keyframes",e};function y0({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],m={done:!1,value:h},p=j=>l!==void 0&&j<l||c!==void 0&&j>c,v=j=>l===void 0?c:c===void 0||Math.abs(l-j)<Math.abs(c-j)?l:c;let x=n*t;const y=h+x,g=o===void 0?y:o(y);g!==y&&(x=g-h);const b=j=>-x*Math.exp(-j/r),w=j=>g+b(j),C=j=>{const k=b(j),T=w(j);m.done=Math.abs(k)<=d,m.value=m.done?g:T};let _,S;const N=j=>{p(m.value)&&(_=j,S=sp({keyframes:[m.value,v(m.value)],velocity:II(w,j,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:j=>{let k=!1;return!S&&_===void 0&&(k=!0,C(j),N(j)),_!==void 0&&j>=_?S.next(j-_):(!k&&C(j),m)}}}function gW(e,t,n){const r=[],a=n||Ga.mix||AI,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||pr:t;l=Eh(c,l)}r.push(l)}return r}function vW(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(ep(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=gW(t,r,a),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const m=Wu(e[h],e[h+1],u);return l[h](m)};return n?u=>d(Ha(e[0],e[i-1],u)):d}function yW(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Wu(0,t,r);e.push(Wt(n,1,a))}}function bW(e){const t=[0];return yW(t,e.length-1),t}function wW(e,t){return e.map(n=>n*t)}function jW(e,t){return e.map(()=>t||bI).splice(0,e.length-1)}function hu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=Rq(r)?r.map(v_):v_(r),i={done:!1,value:t[0]},o=wW(n&&n.length===t.length?n:bW(t),e),l=vW(o,t,{ease:Array.isArray(a)?a:jW(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const NW=e=>e!==null;function gj(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(NW),l=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const SW={decay:y0,inertia:y0,tween:hu,keyframes:hu,spring:sp};function DI(e){typeof e.type=="string"&&(e.type=SW[e.type])}class vj{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const _W=e=>e/100;class yj extends vj{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==js.now()&&this.tick(js.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;DI(t);const{type:n=hu,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=n||hu;c!==hu&&typeof l[0]!="number"&&(this.mixKeyframes=Eh(_W,AI(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=xj(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:p,type:v,onUpdate:x,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-d*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?g<0:g>a;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let w=this.currentTime,C=r;if(h){const j=Math.min(this.currentTime,a)/l;let k=Math.floor(j),T=j%1;!T&&j>=1&&(T=1),T===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(m==="reverse"?(T=1-T,p&&(T-=p/l)):m==="mirror"&&(C=o)),w=Ha(0,1,T)*l}const _=b?{done:!1,value:u[0]}:C.next(w);i&&(_.value=i(_.value));let{done:S}=_;!b&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return N&&v!==y0&&(_.value=gj(u,this.options,y,this.speed)),x&&x(_.value),N&&this.finish(),_}then(t,n){return this.finished.then(t,n)}get duration(){return fa(this.calculatedDuration)}get time(){return fa(this.currentTime)}set time(t){var n;t=ma(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(js.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=fa(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:t=lW,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(js.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function CW(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Po=e=>e*180/Math.PI,b0=e=>{const t=Po(Math.atan2(e[1],e[0]));return w0(t)},kW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:b0,rotateZ:b0,skewX:e=>Po(Math.atan(e[1])),skewY:e=>Po(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},w0=e=>(e=e%360,e<0&&(e+=360),e),__=b0,C_=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),k_=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),EW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:C_,scaleY:k_,scale:e=>(C_(e)+k_(e))/2,rotateX:e=>w0(Po(Math.atan2(e[6],e[5]))),rotateY:e=>w0(Po(Math.atan2(-e[2],e[0]))),rotateZ:__,rotate:__,skewX:e=>Po(Math.atan(e[4])),skewY:e=>Po(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function j0(e){return e.includes("scale")?1:0}function N0(e,t){if(!e||e==="none")return j0(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=EW,a=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=kW,a=l}if(!a)return j0(t);const i=r[t],o=a[1].split(",").map(AW);return typeof i=="function"?i(o):o[i]}const TW=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return N0(n,t)};function AW(e){return parseFloat(e.trim())}const hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],md=new Set(hd),E_=e=>e===ud||e===Be,PW=new Set(["x","y","z"]),IW=hd.filter(e=>!PW.has(e));function DW(e){const t=[];return IW.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Bo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>N0(t,"x"),y:(e,{transform:t})=>N0(t,"y")};Bo.translateX=Bo.x;Bo.translateY=Bo.y;const Vo=new Set;let S0=!1,_0=!1,C0=!1;function RI(){if(_0){const e=Array.from(Vo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=DW(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_0=!1,S0=!1,Vo.forEach(e=>e.complete(C0)),Vo.clear()}function MI(){Vo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(_0=!0)})}function RW(){C0=!0,MI(),RI(),C0=!1}class bj{constructor(t,n,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Vo.add(this),S0||(S0=!0,zt.read(MI),zt.resolveKeyframes(RI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}CW(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Vo.delete(this)}cancel(){this.state==="scheduled"&&(Vo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const MW=e=>e.startsWith("--");function LW(e,t,n){MW(t)?e.style.setProperty(t,n):e.style[t]=n}const OW=oj(()=>window.ScrollTimeline!==void 0),FW={};function $W(e,t){const n=oj(e);return()=>FW[t]??n()}const LI=$W(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kd=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,T_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kd([0,.65,.55,1]),circOut:Kd([.55,0,1,.45]),backIn:Kd([.31,.01,.66,-.59]),backOut:Kd([.33,1.53,.69,.99])};function OI(e,t){if(e)return typeof e=="function"?LI()?PI(e,t):"ease-out":wI(e)?Kd(e):Array.isArray(e)?e.map(n=>OI(n,t)||T_.easeOut):T_[e]}function zW(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[t]:n};c&&(u.offset=c);const h=OI(l,a);Array.isArray(h)&&(u.easing=h);const m={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(u,m)}function FI(e){return typeof e=="function"&&"applyToOptions"in e}function UW({type:e,...t}){return FI(e)&&LI()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class BW extends vj{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,ep(typeof t.type!="string");const d=UW(t);this.animation=zW(n,r,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=gj(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):LW(n,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return fa(Number(t))}get time(){return fa(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ma(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&OW()?(this.animation.timeline=t,pr):n(this)}}const $I={anticipate:gI,backInOut:xI,circInOut:yI};function VW(e){return e in $I}function qW(e){typeof e.ease=="string"&&VW(e.ease)&&(e.ease=$I[e.ease])}const A_=10;class WW extends BW{constructor(t){qW(t),DI(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new yj({...o,autoplay:!1}),c=ma(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-A_).value,l.sample(c).value,A_),l.stop()}}const P_=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ji.test(e)||e==="0")&&!e.startsWith("url("));function HW(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function GW(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=P_(a,t),l=P_(i,t);return!o||!l?!1:HW(e)||(n==="spring"||FI(n))&&r}function k0(e){e.duration=0,e.type}const KW=new Set(["opacity","clipPath","filter","transform"]),QW=oj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function YW(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return QW()&&n&&KW.has(n)&&(n!=="transform"||!d)&&!c&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const XW=40;class JW extends vj{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){var v;super(),this.stop=()=>{var x,y;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=js.now();const m={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},p=(u==null?void 0:u.KeyframeResolver)||bj;this.keyframeResolver=new p(l,(x,y,g)=>this.onKeyframesResolved(x,y,m,!g),c,d,u),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=r;this.resolvedAt=js.now(),GW(t,i,o,l)||((Ga.instantAnimations||!c)&&(u==null||u(gj(t,r,n))),t[0]=t[t.length-1],k0(r),r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>XW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!d&&YW(m)?new WW({...m,element:m.motionValue.owner.current}):new yj(m);p.finished.then(()=>this.notifyFinished()).catch(pr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),RW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const ZW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eH(e){const t=ZW.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function zI(e,t,n=1){const[r,a]=eH(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return lI(o)?parseFloat(o):o}return hj(a)?zI(a,t,n+1):a}function wj(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const UI=new Set(["width","height","top","left","right","bottom",...hd]),tH={test:e=>e==="auto",parse:e=>e},BI=e=>t=>t.test(e),VI=[ud,Be,pa,oi,Hq,Wq,tH],I_=e=>VI.find(BI(e));function nH(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||dI(e):!0}const sH=new Set(["brightness","contrast","saturate","opacity"]);function rH(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(mj)||[];if(!r)return e;const a=n.replace(r,"");let i=sH.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const aH=/\b([a-z-]*)\(.*?\)/gu,E0={...Ji,getAnimatableNone:e=>{const t=e.match(aH);return t?t.map(rH).join(" "):e}},D_={...ud,transform:Math.round},iH={rotate:oi,rotateX:oi,rotateY:oi,rotateZ:oi,scale:_m,scaleX:_m,scaleY:_m,scaleZ:_m,skew:oi,skewX:oi,skewY:oi,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Hu,originX:b_,originY:b_,originZ:Be},jj={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...iH,zIndex:D_,fillOpacity:Hu,strokeOpacity:Hu,numOctaves:D_},oH={...jj,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:E0,WebkitFilter:E0},qI=e=>oH[e];function WI(e,t){let n=qI(e);return n!==E0&&(n=Ji),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const lH=new Set(["auto","none","0"]);function cH(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!lH.has(i)&&Gu(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=WI(n,a)}class dH extends bj{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),hj(d))){const u=zI(d,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!UI.has(r)||t.length!==2)return;const[a,i]=t,o=I_(a),l=I_(i);if(o!==l)if(E_(o)&&E_(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else Bo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||nH(t[a]))&&r.push(a);r.length&&cH(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Bo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function uH(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const HI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function hH(e){return cI(e)&&"offsetHeight"in e}const R_=30,mH=e=>!isNaN(parseFloat(e));class fH{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=js.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=js.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=mH(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new lj);const r=this.events[t].add(n);return t==="change"?()=>{r(),zt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=js.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>R_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,R_);return uI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wc(e,t){return new fH(e,t)}const{schedule:Nj,cancel:tde}=jI(queueMicrotask,!1),Pr={x:!1,y:!1};function GI(){return Pr.x||Pr.y}function pH(e){return e==="x"||e==="y"?Pr[e]?null:(Pr[e]=!0,()=>{Pr[e]=!1}):Pr.x||Pr.y?null:(Pr.x=Pr.y=!0,()=>{Pr.x=Pr.y=!1})}function KI(e,t){const n=uH(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function M_(e){return!(e.pointerType==="touch"||GI())}function xH(e,t,n={}){const[r,a,i]=KI(e,n),o=l=>{if(!M_(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const u=h=>{M_(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return r.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const QI=(e,t)=>t?e===t?!0:QI(e,t.parentElement):!1,Sj=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,gH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vH(e){return gH.has(e.tagName)||e.tabIndex!==-1}const rf=new WeakSet;function L_(e){return t=>{t.key==="Enter"&&e(t)}}function zg(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const yH=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=L_(()=>{if(rf.has(n))return;zg(n,"down");const a=L_(()=>{zg(n,"up")}),i=()=>zg(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function O_(e){return Sj(e)&&!GI()}function bH(e,t,n={}){const[r,a,i]=KI(e,n),o=l=>{const c=l.currentTarget;if(!O_(l))return;rf.add(c);const d=t(c,l),u=(p,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),rf.has(c)&&rf.delete(c),O_(p)&&typeof d=="function"&&d(p,{success:v})},h=p=>{u(p,c===window||c===document||n.useGlobalTarget||QI(c,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),hH(l)&&(l.addEventListener("focus",d=>yH(d,a)),!vH(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function YI(e){return cI(e)&&"ownerSVGElement"in e}function wH(e){return YI(e)&&e.tagName==="svg"}const Kn=e=>!!(e&&e.getVelocity),jH=[...VI,hn,Ji],NH=e=>jH.find(BI(e)),XI=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function SH(e=!0){const t=f.useContext(rj);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=f.useId();f.useEffect(()=>{if(e)return a(i)},[e]);const o=f.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const JI=f.createContext({strict:!1}),F_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hc={};for(const e in F_)Hc[e]={isEnabled:t=>F_[e].some(n=>!!t[n])};function _H(e){for(const t in e)Hc[t]={...Hc[t],...e[t]}}const CH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||CH.has(e)}let ZI=e=>!rp(e);function kH(e){typeof e=="function"&&(ZI=t=>t.startsWith("on")?!rp(t):e(t))}try{kH(require("@emotion/is-prop-valid").default)}catch{}function EH(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(ZI(a)||n===!0&&rp(a)||!t&&!rp(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const px=f.createContext({});function xx(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ku(e){return typeof e=="string"||Array.isArray(e)}const _j=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cj=["initial",..._j];function gx(e){return xx(e.animate)||Cj.some(t=>Ku(e[t]))}function eD(e){return!!(gx(e)||e.variants)}function TH(e,t){if(gx(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ku(n)?n:void 0,animate:Ku(r)?r:void 0}}return e.inherit!==!1?t:{}}function AH(e){const{initial:t,animate:n}=TH(e,f.useContext(px));return f.useMemo(()=>({initial:t,animate:n}),[$_(t),$_(n)])}function $_(e){return Array.isArray(e)?e.join(" "):e}const Qu={};function PH(e){for(const t in e)Qu[t]=e[t],uj(t)&&(Qu[t].isCSSVariable=!0)}function tD(e,{layout:t,layoutId:n}){return md.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Qu[e]||e==="opacity")}const IH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DH=hd.length;function RH(e,t,n){let r="",a=!0;for(let i=0;i<DH;i++){const o=hd[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=HI(l,jj[o]);if(!c){a=!1;const u=IH[o]||o;r+=`${u}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function kj(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(md.has(c)){o=!0;continue}else if(uj(c)){a[c]=d;continue}else{const u=HI(d,jj[c]);c.startsWith("origin")?(l=!0,i[c]=u):r[c]=u}}if(t.transform||(o||n?r.transform=RH(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${d} ${u}`}}const Ej=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nD(e,t,n){for(const r in t)!Kn(t[r])&&!tD(r,n)&&(e[r]=t[r])}function MH({transformTemplate:e},t){return f.useMemo(()=>{const n=Ej();return kj(n,t,e),Object.assign({},n.vars,n.style)},[t])}function LH(e,t){const n=e.style||{},r={};return nD(r,n,e),Object.assign(r,MH(e,t)),r}function OH(e,t){const n={},r=LH(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const FH={offset:"stroke-dashoffset",array:"stroke-dasharray"},$H={offset:"strokeDashoffset",array:"strokeDasharray"};function zH(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?FH:$H;e[i.offset]=Be.transform(-r);const o=Be.transform(t),l=Be.transform(n);e[i.array]=`${o} ${l}`}function sD(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(kj(e,l,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&zH(h,a,i,o,!1)}const rD=()=>({...Ej(),attrs:{}}),aD=e=>typeof e=="string"&&e.toLowerCase()==="svg";function UH(e,t,n,r){const a=f.useMemo(()=>{const i=rD();return sD(i,t,aD(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};nD(i,e.style,e),a.style={...i,...a.style}}return a}const BH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tj(e){return typeof e!="string"||e.includes("-")?!1:!!(BH.indexOf(e)>-1||/[A-Z]/u.test(e))}function VH(e,t,n,{latestValues:r},a,i=!1){const l=(Tj(e)?UH:OH)(t,r,a,e),c=EH(t,typeof e=="string",i),d=e!==f.Fragment?{...c,...l,ref:n}:{},{children:u}=t,h=f.useMemo(()=>Kn(u)?u.get():u,[u]);return f.createElement(e,{...d,children:h})}function z_(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Aj(e,t,n,r){if(typeof t=="function"){const[a,i]=z_(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=z_(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function af(e){return Kn(e)?e.get():e}function qH({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:WH(n,r,a,e),renderState:t()}}function WH(e,t,n,r){const a={},i=r(e,{});for(const m in i)a[m]=af(i[m]);let{initial:o,animate:l}=e;const c=gx(e),d=eD(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!xx(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const v=Aj(e,m[p]);if(v){const{transitionEnd:x,transition:y,...g}=v;for(const b in g){let w=g[b];if(Array.isArray(w)){const C=u?w.length-1:0;w=w[C]}w!==null&&(a[b]=w)}for(const b in x)a[b]=x[b]}}}return a}const iD=e=>(t,n)=>{const r=f.useContext(px),a=f.useContext(rj),i=()=>qH(e,t,r,a);return n?i():Cq(i)};function Pj(e,t,n){var i;const{style:r}=e,a={};for(const o in r)(Kn(r[o])||t.style&&Kn(t.style[o])||tD(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const HH=iD({scrapeMotionValuesFromProps:Pj,createRenderState:Ej});function oD(e,t,n){const r=Pj(e,t,n);for(const a in e)if(Kn(e[a])||Kn(t[a])){const i=hd.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const GH=iD({scrapeMotionValuesFromProps:oD,createRenderState:rD}),KH=Symbol.for("motionComponentSymbol");function Yl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function QH(e,t,n){return f.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Yl(n)&&(n.current=r))},[t])}const Ij=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YH="framerAppearId",lD="data-"+Ij(YH),cD=f.createContext({});function XH(e,t,n,r,a){var x,y;const{visualElement:i}=f.useContext(px),o=f.useContext(JI),l=f.useContext(rj),c=f.useContext(XI).reducedMotion,d=f.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=f.useContext(cD);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&JH(d.current,n,a,h);const m=f.useRef(!1);f.useInsertionEffect(()=>{u&&m.current&&u.update(n,l)});const p=n[lD],v=f.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,p)));return kq(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),v.current&&u.animationState&&u.animationState.animateChanges())}),f.useEffect(()=>{u&&(!v.current&&u.animationState&&u.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,p)}),v.current=!1),u.enteringChildren=void 0)}),u}function JH(e,t,n,r){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:dD(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Yl(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:d})}function dD(e){if(e)return e.options.allowProjection!==!1?e.projection:dD(e.parent)}function Ug(e,{forwardMotionProps:t=!1}={},n,r){n&&_H(n);const a=Tj(e)?GH:HH;function i(l,c){let d;const u={...f.useContext(XI),...l,layoutId:ZH(l)},{isStatic:h}=u,m=AH(l),p=a(l,h);if(!h&&sj){eG();const v=tG(u);d=v.MeasureLayout,m.visualElement=XH(e,p,u,r,v.ProjectionNode)}return s.jsxs(px.Provider,{value:m,children:[d&&m.visualElement?s.jsx(d,{visualElement:m.visualElement,...u}):null,VH(e,l,QH(p,m.visualElement,c),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=f.forwardRef(i);return o[KH]=e,o}function ZH({layoutId:e}){const t=f.useContext(oI).id;return t&&e!==void 0?t+"-"+e:e}function eG(e,t){f.useContext(JI).strict}function tG(e){const{drag:t,layout:n}=Hc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function nG(e,t){if(typeof Proxy>"u")return Ug;const n=new Map,r=(i,o)=>Ug(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Ug(o,void 0,e,t)),n.get(o))})}function uD({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function sG({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rG(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Bg(e){return e===void 0||e===1}function T0({scale:e,scaleX:t,scaleY:n}){return!Bg(e)||!Bg(t)||!Bg(n)}function vo(e){return T0(e)||hD(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function hD(e){return U_(e.x)||U_(e.y)}function U_(e){return e&&e!=="0%"}function ap(e,t,n){const r=e-n,a=t*r;return n+a}function B_(e,t,n,r,a){return a!==void 0&&(e=ap(e,a,r)),ap(e,n,r)+t}function A0(e,t=0,n=1,r,a){e.min=B_(e.min,t,n,r,a),e.max=B_(e.max,t,n,r,a)}function mD(e,{x:t,y:n}){A0(e.x,t.translate,t.scale,t.originPoint),A0(e.y,n.translate,n.scale,n.originPoint)}const V_=.999999999999,q_=1.0000000000001;function aG(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Jl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,mD(e,o)),r&&vo(i.latestValues)&&Jl(e,i.latestValues))}t.x<q_&&t.x>V_&&(t.x=1),t.y<q_&&t.y>V_&&(t.y=1)}function Xl(e,t){e.min=e.min+t,e.max=e.max+t}function W_(e,t,n,r,a=.5){const i=Wt(e.min,e.max,a);A0(e,t,n,i,r)}function Jl(e,t){W_(e.x,t.x,t.scaleX,t.scale,t.originX),W_(e.y,t.y,t.scaleY,t.scale,t.originY)}function fD(e,t){return uD(rG(e.getBoundingClientRect(),t))}function iG(e,t,n){const r=fD(e,n),{scroll:a}=t;return a&&(Xl(r.x,a.offset.x),Xl(r.y,a.offset.y)),r}const H_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:H_(),y:H_()}),G_=()=>({min:0,max:0}),an=()=>({x:G_(),y:G_()}),P0={current:null},pD={current:!1};function oG(){if(pD.current=!0,!!sj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>P0.current=e.matches;e.addEventListener("change",t),t()}else P0.current=!1}const lG=new WeakMap;function cG(e,t,n){for(const r in t){const a=t[r],i=n[r];if(Kn(a))e.addValue(r,a);else if(Kn(i))e.addValue(r,Wc(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,Wc(o!==void 0?o:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const K_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dG{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=js.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,zt.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=gx(n),this.isVariantNode=eD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const p=h[m];c[m]!==void 0&&Kn(p)&&p.set(c[m])}}mount(t){var n;this.current=t,lG.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),pD.current||oG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:P0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Xi(this.notifyUpdate),Xi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=md.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&zt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Hc){const n=Hc[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):an()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<K_.length;r++){const a=K_[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=cG(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Wc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(lI(r)||dI(r))?r=parseFloat(r):!NH(r)&&Ji.test(n)&&(r=WI(t,n)),this.setBaseTarget(t,Kn(r)?r.get():r)),Kn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Aj(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Kn(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new lj),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Nj.render(this.render)}}class xD extends dG{constructor(){super(...arguments),this.KeyframeResolver=dH}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function gD(e,{style:t,vars:n},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a==null||a.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function uG(e){return window.getComputedStyle(e)}class hG extends xD{constructor(){super(...arguments),this.type="html",this.renderInstance=gD}readValueFromInstance(t,n){var r;if(md.has(n))return(r=this.projection)!=null&&r.isProjecting?j0(n):TW(t,n);{const a=uG(t),i=(uj(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return fD(t,n)}build(t,n,r){kj(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Pj(t,n,r)}}const vD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mG(e,t,n,r){gD(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(vD.has(a)?a:Ij(a),t.attrs[a])}class fG extends xD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=an}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(md.has(n)){const r=qI(n);return r&&r.default||0}return n=vD.has(n)?n:Ij(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return oD(t,n,r)}build(t,n,r){sD(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){mG(t,n,r,a)}mount(t){this.isSVGTag=aD(t.tagName),super.mount(t)}}const pG=(e,t)=>Tj(e)?new fG(t):new hG(t,{allowProjection:e!==f.Fragment});function hc(e,t,n){const r=e.getProps();return Aj(r,t,n!==void 0?n:r.custom,e)}const I0=e=>Array.isArray(e);function xG(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Wc(n))}function gG(e){return I0(e)?e[e.length-1]||0:e}function vG(e,t){const n=hc(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const o in i){const l=gG(i[o]);xG(e,o,l)}}function yG(e){return!!(Kn(e)&&e.add)}function D0(e,t){const n=e.getValue("willChange");if(yG(n))return n.add(t);if(!n&&Ga.WillChange){const r=new Ga.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function yD(e){return e.props[lD]}const bG=e=>e!==null;function wG(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(bG),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}const jG={type:"spring",stiffness:500,damping:25,restSpeed:10},NG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),SG={type:"keyframes",duration:.8},_G={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CG=(e,{keyframes:t})=>t.length>2?SG:md.has(e)?e.startsWith("scale")?NG(t[1]):jG:_G;function kG({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const Dj=(e,t,n,r={},a,i)=>o=>{const l=wj(r,e)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ma(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};kG(l)||Object.assign(u,CG(e,u)),u.duration&&(u.duration=ma(u.duration)),u.repeatDelay&&(u.repeatDelay=ma(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(k0(u),u.delay===0&&(h=!0)),(Ga.instantAnimations||Ga.skipAnimations)&&(h=!0,k0(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const m=wG(u.keyframes,l);if(m!==void 0){zt.update(()=>{u.onUpdate(m),u.onComplete()});return}}return l.isSync?new yj(u):new JW(u)};function EG({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function bD(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(i=r);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const h=e.getValue(u,e.latestValues[u]??null),m=l[u];if(m===void 0||d&&EG(d,u))continue;const p={delay:n,...wj(i||{},u)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const g=yD(e);if(g){const b=window.MotionHandoffAnimation(g,u,zt);b!==null&&(p.startTime=b,x=!0)}}D0(e,u),h.start(Dj(u,h,m,e.shouldReduceMotion&&UI.has(u)?{type:!1}:p,e,x));const y=h.animation;y&&c.push(y)}return o&&Promise.all(c).then(()=>{zt.update(()=>{o&&vG(e,o)})}),c}function wD(e,t,n,r=0,a=1){const i=Array.from(e).sort((d,u)=>d.sortNodePosition(u)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(i,o):a===1?i*r:l-i*r}function R0(e,t,n={}){var c;const r=hc(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(bD(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=a;return TG(e,t,d,u,h,m,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function TG(e,t,n=0,r=0,a=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(R0(c,t,{...o,delay:n+(typeof r=="function"?0:r)+wD(e.variantChildren,c,r,a,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function AG(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>R0(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=R0(e,t,n);else{const a=typeof t=="function"?hc(e,t,n.custom):t;r=Promise.all(bD(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function jD(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const PG=Cj.length;function ND(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?ND(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<PG;n++){const r=Cj[n],a=e.props[r];(Ku(a)||a===!1)&&(t[r]=a)}return t}const IG=[..._j].reverse(),DG=_j.length;function RG(e){return t=>Promise.all(t.map(({animation:n,options:r})=>AG(e,n,r)))}function MG(e){let t=RG(e),n=Q_(),r=!0;const a=c=>(d,u)=>{var m;const h=hc(e,u,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:p,transitionEnd:v,...x}=h;d={...d,...x,...v}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=ND(e.parent)||{},h=[],m=new Set;let p={},v=1/0;for(let y=0;y<DG;y++){const g=IG[y],b=n[g],w=d[g]!==void 0?d[g]:u[g],C=Ku(w),_=g===c?b.isActive:null;_===!1&&(v=y);let S=w===u[g]&&w!==d[g]&&C;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&_===null||!w&&!b.prevProp||xx(w)||typeof w=="boolean")continue;const N=LG(b.prevProp,w);let j=N||g===c&&b.isActive&&!S&&C||y>v&&C,k=!1;const T=Array.isArray(w)?w:[w];let A=T.reduce(a(g),{});_===!1&&(A={});const{prevResolvedValues:R={}}=b,F={...R,...A},O=B=>{j=!0,m.has(B)&&(k=!0,m.delete(B)),b.needsAnimating[B]=!0;const D=e.getValue(B);D&&(D.liveStyle=!1)};for(const B in F){const D=A[B],E=R[B];if(p.hasOwnProperty(B))continue;let I=!1;I0(D)&&I0(E)?I=!jD(D,E):I=D!==E,I?D!=null?O(B):m.add(B):D!==void 0&&m.has(B)?O(B):b.protectedKeys[B]=!0}b.prevProp=w,b.prevResolvedValues=A,b.isActive&&(p={...p,...A}),r&&e.blockInitialAnimation&&(j=!1);const U=S&&N;j&&(!U||k)&&h.push(...T.map(B=>{const D={type:g};if(typeof B=="string"&&r&&!U&&e.manuallyAnimateOnMount&&e.parent){const{parent:E}=e,I=hc(E,B);if(E.enteringChildren&&I){const{delayChildren:q}=I.transition||{};D.delay=wD(E.enteringChildren,e,q)}}return{animation:B,options:D}}))}if(m.size){const y={};if(typeof d.initial!="boolean"){const g=hc(e,Array.isArray(d.initial)?d.initial[0]:d.initial);g&&g.transition&&(y.transition=g.transition)}m.forEach(g=>{const b=e.getBaseTarget(g),w=e.getValue(g);w&&(w.liveStyle=!0),y[g]=b??null}),h.push({animation:y})}let x=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(h):Promise.resolve()}function l(c,d){var h;if(n[c].isActive===d)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(c,d)}),n[c].isActive=d;const u=o(c);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Q_(),r=!0}}}function LG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jD(t,e):!1}function ho(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Q_(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}class so{constructor(t){this.isMounted=!1,this.node=t}update(){}}class OG extends so{constructor(t){super(t),t.animationState||(t.animationState=MG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();xx(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let FG=0;class $G extends so{constructor(){super(...arguments),this.id=FG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const zG={animation:{Feature:OG},exit:{Feature:$G}};function Yu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ph(e){return{point:{x:e.pageX,y:e.pageY}}}const UG=e=>t=>Sj(t)&&e(t,Ph(t));function mu(e,t,n,r){return Yu(e,t,UG(n),r)}const SD=1e-4,BG=1-SD,VG=1+SD,_D=.01,qG=0-_D,WG=0+_D;function os(e){return e.max-e.min}function HG(e,t,n){return Math.abs(e-t)<=n}function Y_(e,t,n,r=.5){e.origin=r,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=os(n)/os(t),e.translate=Wt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=BG&&e.scale<=VG||isNaN(e.scale))&&(e.scale=1),(e.translate>=qG&&e.translate<=WG||isNaN(e.translate))&&(e.translate=0)}function fu(e,t,n,r){Y_(e.x,t.x,n.x,r?r.originX:void 0),Y_(e.y,t.y,n.y,r?r.originY:void 0)}function X_(e,t,n){e.min=n.min+t.min,e.max=e.min+os(t)}function GG(e,t,n){X_(e.x,t.x,n.x),X_(e.y,t.y,n.y)}function J_(e,t,n){e.min=t.min-n.min,e.max=e.min+os(t)}function pu(e,t,n){J_(e.x,t.x,n.x),J_(e.y,t.y,n.y)}function ir(e){return[e("x"),e("y")]}const CD=({current:e})=>e?e.ownerDocument.defaultView:null,Z_=(e,t)=>Math.abs(e-t);function KG(e,t){const n=Z_(e.x,t.x),r=Z_(e.y,t.y);return Math.sqrt(n**2+r**2)}class kD{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=qg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=KG(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!v)return;const{point:x}=m,{timestamp:y}=In;this.history.push({...x,timestamp:y});const{onStart:g,onMove:b}=this.handlers;p||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Vg(p,this.transformPagePoint),zt.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=qg(m.type==="pointercancel"?this.lastMoveEventInfo:Vg(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,g),x&&x(m,g)},!Sj(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const l=Ph(t),c=Vg(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=In;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,qg(c,this.history)),this.removeListeners=Eh(mu(this.contextWindow,"pointermove",this.handlePointerMove),mu(this.contextWindow,"pointerup",this.handlePointerUp),mu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xi(this.updatePoint)}}function Vg(e,t){return t?{point:t(e.point)}:e}function eC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qg({point:e},t){return{point:e,delta:eC(e,ED(t)),offset:eC(e,QG(t)),velocity:YG(t,.1)}}function QG(e){return e[0]}function ED(e){return e[e.length-1]}function YG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=ED(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>ma(t)));)n--;if(!r)return{x:0,y:0};const i=fa(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function XG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Wt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Wt(n,e,r.max):Math.min(e,n)),e}function tC(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function JG(e,{top:t,left:n,bottom:r,right:a}){return{x:tC(e.x,n,a),y:tC(e.y,t,r)}}function nC(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function ZG(e,t){return{x:nC(e.x,t.x),y:nC(e.y,t.y)}}function eK(e,t){let n=.5;const r=os(e),a=os(t);return a>r?n=Wu(t.min,t.max-r,e.min):r>a&&(n=Wu(e.min,e.max-a,t.min)),Ha(0,1,n)}function tK(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const M0=.35;function nK(e=M0){return e===!1?e=0:e===!0&&(e=M0),{x:sC(e,"left","right"),y:sC(e,"top","bottom")}}function sC(e,t,n){return{min:rC(e,t),max:rC(e,n)}}function rC(e,t){return typeof e=="number"?e:e[t]||0}const sK=new WeakMap;class rK{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=an(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ph(h).point)},o=(h,m)=>{const{drag:p,dragPropagation:v,onDragStart:x}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pH(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ir(g=>{let b=this.getAxisMotionValue(g).get()||0;if(pa.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[g];C&&(b=os(C)*(parseFloat(b)/100))}}this.originPoint[g]=b}),x&&zt.postRender(()=>x(h,m)),D0(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:x,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=m;if(v&&this.currentDirection===null){this.currentDirection=aK(g),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),y&&y(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ir(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new kD(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:CD(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&zt.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!Cm(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=XG(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Yl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=JG(r.layoutBox,t):this.constraints=!1,this.elastic=nK(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ir(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=tK(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Yl(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=iG(r,a.root,this.visualElement.getTransformPagePoint());let o=ZG(a.layout.layoutBox,i);if(n){const l=n(sG(o));this.hasMutatedConstraints=!!l,l&&(o=uD(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ir(u=>{if(!Cm(u,n,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,p=a?40:1e7,v={type:"inertia",velocity:r?t[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return D0(this.visualElement,t),r.start(Dj(t,r,0,n,this.visualElement,!1))}stopAnimation(){ir(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ir(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ir(n=>{const{drag:r}=this.getProps();if(!Cm(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[n];i.set(t[n]-Wt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yl(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ir(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=eK({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ir(o=>{if(!Cm(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Wt(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;sK.set(this.visualElement,this);const t=this.visualElement.current,n=mu(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Yl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),zt.read(r);const o=Yu(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ir(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=M0,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Cm(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function aK(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class iK extends so{constructor(t){super(t),this.removeGroupControls=pr,this.removeListeners=pr,this.controls=new rK(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pr}unmount(){this.removeGroupControls(),this.removeListeners()}}const aC=e=>(t,n)=>{e&&zt.postRender(()=>e(t,n))};class oK extends so{constructor(){super(...arguments),this.removePointerDownListener=pr}onPointerDown(t){this.session=new kD(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CD(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:aC(t),onStart:aC(n),onMove:r,onEnd:(i,o)=>{delete this.session,a&&zt.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=mu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const of={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iC(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Id={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const n=iC(e,t.target.x),r=iC(e,t.target.y);return`${n}% ${r}%`}},lK={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=Ji.parse(e);if(a.length>5)return r;const i=Ji.createTransformer(e),o=typeof a[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=Wt(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};let Wg=!1;class cK extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;PH(dK),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),Wg&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),of.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Wg=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||zt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Nj.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;Wg=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function TD(e){const[t,n]=SH(),r=f.useContext(oI);return s.jsx(cK,{...e,layoutGroup:r,switchLayoutGroup:f.useContext(cD),isPresent:t,safeToRemove:n})}const dK={borderRadius:{...Id,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Id,borderTopRightRadius:Id,borderBottomLeftRadius:Id,borderBottomRightRadius:Id,boxShadow:lK};function uK(e,t,n){const r=Kn(e)?e:Wc(e);return r.start(Dj("",r,t,n)),r.animation}const hK=(e,t)=>e.depth-t.depth;class mK{constructor(){this.children=[],this.isDirty=!1}add(t){aj(this.children,t),this.isDirty=!0}remove(t){ij(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hK),this.isDirty=!1,this.children.forEach(t)}}function fK(e,t){const n=js.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Xi(r),e(i-t))};return zt.setup(r,!0),()=>Xi(r)}const AD=["TopLeft","TopRight","BottomLeft","BottomRight"],pK=AD.length,oC=e=>typeof e=="string"?parseFloat(e):e,lC=e=>typeof e=="number"||Be.test(e);function xK(e,t,n,r,a,i){a?(e.opacity=Wt(0,n.opacity??1,gK(r)),e.opacityExit=Wt(t.opacity??1,0,vK(r))):i&&(e.opacity=Wt(t.opacity??1,n.opacity??1,r));for(let o=0;o<pK;o++){const l=`border${AD[o]}Radius`;let c=cC(t,l),d=cC(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||lC(c)===lC(d)?(e[l]=Math.max(Wt(oC(c),oC(d),r),0),(pa.test(d)||pa.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Wt(t.rotate||0,n.rotate||0,r))}function cC(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gK=PD(0,.5,vI),vK=PD(.5,.95,pr);function PD(e,t,n){return r=>r<e?0:r>t?1:n(Wu(e,t,r))}function dC(e,t){e.min=t.min,e.max=t.max}function nr(e,t){dC(e.x,t.x),dC(e.y,t.y)}function uC(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function hC(e,t,n,r,a){return e-=t,e=ap(e,1/n,r),a!==void 0&&(e=ap(e,1/a,r)),e}function yK(e,t=0,n=1,r=.5,a,i=e,o=e){if(pa.test(t)&&(t=parseFloat(t),t=Wt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Wt(i.min,i.max,r);e===i&&(l-=t),e.min=hC(e.min,t,n,l,a),e.max=hC(e.max,t,n,l,a)}function mC(e,t,[n,r,a],i,o){yK(e,t[n],t[r],t[a],t.scale,i,o)}const bK=["x","scaleX","originX"],wK=["y","scaleY","originY"];function fC(e,t,n,r){mC(e.x,t,bK,n?n.x:void 0,r?r.x:void 0),mC(e.y,t,wK,n?n.y:void 0,r?r.y:void 0)}function pC(e){return e.translate===0&&e.scale===1}function ID(e){return pC(e.x)&&pC(e.y)}function xC(e,t){return e.min===t.min&&e.max===t.max}function jK(e,t){return xC(e.x,t.x)&&xC(e.y,t.y)}function gC(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function DD(e,t){return gC(e.x,t.x)&&gC(e.y,t.y)}function vC(e){return os(e.x)/os(e.y)}function yC(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NK{constructor(){this.members=[]}add(t){aj(this.members,t),t.scheduleRender()}remove(t){if(ij(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SK(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:p,skewY:v}=n;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Hg=["","X","Y","Z"],_K=1e3;let CK=0;function Gg(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function RD(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=yD(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",zt,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&RD(r)}function MD({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=CK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(TK),this.nodes.forEach(DK),this.nodes.forEach(RK),this.nodes.forEach(AK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new mK)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lj),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YI(o)&&!wH(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;zt.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,u&&u(),u=fK(m,250),of.hasAnimatedSinceResize&&(of.hasAnimatedSinceResize=!1,this.nodes.forEach(jC)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||$K,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=d.getProps(),g=!this.targetLayout||!DD(this.targetLayout,p),b=!h&&m;if(this.options.layoutRoot||this.resumeFrom||b||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...wj(v,"layout"),onPlay:x,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,b)}else h||jC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(wC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(IK),this.nodes.forEach(kK),this.nodes.forEach(EK)):this.nodes.forEach(wC),this.clearAllSnapshots();const l=js.now();In.delta=Ha(0,1e3/60,l-In.timestamp),In.timestamp=l,In.isProcessing=!0,Mg.update.process(In),Mg.preRender.process(In),Mg.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Nj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PK),this.sharedNodes.forEach(LK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!os(this.snapshot.measuredBox.x)&&!os(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=an(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ID(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||vo(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),zK(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return an();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(UK))){const{scroll:u}=this.root;u&&(Xl(l.x,u.offset.x),Xl(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=an();if(nr(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&nr(l,o),Xl(l.x,h.offset.x),Xl(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=an();nr(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Jl(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),vo(u.latestValues)&&Jl(c,u.latestValues)}return vo(this.latestValues)&&Jl(c,this.latestValues),c}removeTransform(o){const l=an();nr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!vo(d.latestValues))continue;T0(d.latestValues)&&d.updateSnapshot();const u=an(),h=d.measurePageBox();nr(u,h),fC(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return vo(this.latestValues)&&fC(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=an(),this.relativeTargetOrigin=an(),pu(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=an(),this.targetWithTransforms=an()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nr(this.target,this.layout.layoutBox),mD(this.target,this.targetDelta)):nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=an(),this.relativeTargetOrigin=an(),pu(this.relativeTargetOrigin,this.target,p.target),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||T0(this.parent.latestValues)||hD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===In.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;nr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;aG(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=an());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uC(this.prevProjectionDelta.x,this.projectionDelta.x),uC(this.prevProjectionDelta.y,this.projectionDelta.y)),fu(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!yC(this.projectionDelta.x,this.prevProjectionDelta.x)||!yC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=an(),p=c?c.source:void 0,v=this.layout?this.layout.source:void 0,x=p!==v,y=this.getStack(),g=!y||y.members.length<=1,b=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(FK));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const _=C/1e3;NC(h.x,o.x,_),NC(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OK(this.relativeTarget,this.relativeTargetOrigin,m,_),w&&jK(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=an()),nr(w,this.relativeTarget)),x&&(this.animationValues=u,xK(u,d,this.latestValues,_,b,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Xi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zt.update(()=>{of.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wc(0)),this.currentAnimation=uK(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_K),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&LD(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||an();const h=os(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=os(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}nr(l,c),Jl(l,u),fu(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new NK),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Gg("z",o,d,this.animationValues);for(let u=0;u<Hg.length;u++)Gg(`rotate${Hg[u]}`,o,d,this.animationValues),Gg(`skew${Hg[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=af(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=af(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!vo(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=SK(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const v in Qu){if(u[v]===void 0)continue;const{correct:x,applyTo:y,isCSSVariable:g}=Qu[v],b=h==="none"?u[v]:x(u[v],d);if(y){const w=y.length;for(let C=0;C<w;C++)o[y[C]]=b}else g?this.options.visualElement.renderState.vars[v]=b:o[v]=b}this.options.layoutId&&(o.pointerEvents=d===this?af(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(bC),this.root.sharedNodes.clear()}}}function kK(e){e.updateLayout()}function EK(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?ir(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],p=os(m);m.min=r[h].min,m.max=m.min+p}):LD(i,t.layoutBox,r)&&ir(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],p=os(r[h]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=Zl();fu(l,r,t.layoutBox);const c=Zl();o?fu(c,e.applyTransform(a,!0),t.measuredBox):fu(c,r,t.layoutBox);const d=!ID(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const v=an();pu(v,t.layoutBox,m.layoutBox);const x=an();pu(x,r,p.layoutBox),DD(v,x)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function TK(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function AK(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function PK(e){e.clearSnapshot()}function bC(e){e.clearMeasurements()}function wC(e){e.isLayoutDirty=!1}function IK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function jC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function DK(e){e.resolveTargetDelta()}function RK(e){e.calcProjection()}function MK(e){e.resetSkewAndRotation()}function LK(e){e.removeLeadSnapshot()}function NC(e,t,n){e.translate=Wt(t.translate,0,n),e.scale=Wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function SC(e,t,n,r){e.min=Wt(t.min,n.min,r),e.max=Wt(t.max,n.max,r)}function OK(e,t,n,r){SC(e.x,t.x,n.x,r),SC(e.y,t.y,n.y,r)}function FK(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $K={duration:.45,ease:[.4,0,.1,1]},_C=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),CC=_C("applewebkit/")&&!_C("chrome/")?Math.round:pr;function kC(e){e.min=CC(e.min),e.max=CC(e.max)}function zK(e){kC(e.x),kC(e.y)}function LD(e,t,n){return e==="position"||e==="preserve-aspect"&&!HG(vC(t),vC(n),.2)}function UK(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const BK=MD({attachResizeListener:(e,t)=>Yu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kg={current:void 0},OD=MD({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Kg.current){const e=new BK({});e.mount(window),e.setOptions({layoutScroll:!0}),Kg.current=e}return Kg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),VK={pan:{Feature:oK},drag:{Feature:iK,ProjectionNode:OD,MeasureLayout:TD}};function EC(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&zt.postRender(()=>i(t,Ph(t)))}class qK extends so{mount(){const{current:t}=this.node;t&&(this.unmount=xH(t,(n,r)=>(EC(this.node,r,"Start"),a=>EC(this.node,a,"End"))))}unmount(){}}class WK extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Eh(Yu(this.node.current,"focus",()=>this.onFocus()),Yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TC(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&zt.postRender(()=>i(t,Ph(t)))}class HK extends so{mount(){const{current:t}=this.node;t&&(this.unmount=bH(t,(n,r)=>(TC(this.node,r,"Start"),(a,{success:i})=>TC(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const L0=new WeakMap,Qg=new WeakMap,GK=e=>{const t=L0.get(e.target);t&&t(e)},KK=e=>{e.forEach(GK)};function QK({root:e,...t}){const n=e||document;Qg.has(n)||Qg.set(n,{});const r=Qg.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(KK,{root:e,...t})),r[a]}function YK(e,t,n){const r=QK(t);return L0.set(e,n),r.observe(e),()=>{L0.delete(e),r.unobserve(e)}}const XK={some:0,all:1};class JK extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:XK[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return YK(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(ZK(t,n))&&this.startObserver()}unmount(){}}function ZK({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const eQ={inView:{Feature:JK},tap:{Feature:HK},focus:{Feature:WK},hover:{Feature:qK}},tQ={layout:{ProjectionNode:OD,MeasureLayout:TD}},nQ={...zG,...eQ,...VK,...tQ},he=nG(nQ,pG);function sQ({onLogin:e,onRegistration:t}){return s.jsxs("section",{className:"section-gradient-primary relative min-h-screen flex items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 z-0",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1e1b4b] via-[#4c46a0] via-50% to-[#030213]"})}),s.jsx("div",{className:"section-transition-bottom"}),s.jsx(he.div,{className:"absolute top-0 right-0 w-1/2 h-full opacity-60",initial:{x:100,opacity:0},animate:{x:0,opacity:.6},transition:{duration:2,delay:.5},children:s.jsx("div",{className:"absolute top-0 right-0 w-full h-full bg-gradient-to-bl from-[#ec4899]/40 via-[#8b5cf6]/30 to-transparent rounded-full blur-3xl transform rotate-12 scale-150"})}),s.jsx(he.div,{className:"absolute bottom-0 left-0 w-2/3 h-2/3 opacity-40",initial:{x:-100,opacity:0},animate:{x:0,opacity:.4},transition:{duration:2,delay:1},children:s.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full bg-gradient-to-tr from-[#06b6d4]/50 via-[#8b5cf6]/30 to-transparent rounded-full blur-3xl transform -rotate-12"})}),s.jsxs(he.svg,{className:"absolute inset-0 w-full h-full opacity-30",viewBox:"0 0 1200 800",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:3,delay:1.5},children:[s.jsx(he.path,{d:"M 200,600 Q 400,200 800,400 T 1200,200",stroke:"url(#heroGradient1)",strokeWidth:"2",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.8},transition:{duration:2,delay:2}}),s.jsx(he.path,{d:"M 0,300 Q 300,100 600,300 T 1000,150",stroke:"url(#heroGradient2)",strokeWidth:"3",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.6},transition:{duration:2.5,delay:2.5}}),s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"heroGradient1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4"}),s.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),s.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]}),s.jsxs("linearGradient",{id:"heroGradient2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ec4899"}),s.jsx("stop",{offset:"50%",stopColor:"#f59e0b"}),s.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})]})]}),s.jsx(he.nav,{className:"absolute top-0 left-0 right-0 z-20 p-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},children:s.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[s.jsx(he.div,{className:"text-2xl font-bold text-white",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:"Gemeos"}),s.jsxs("div",{className:"hidden md:flex space-x-8",children:[["Platform","Solutions","Resources","About","Contact"].map((n,r)=>s.jsx(he.a,{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1*r,duration:.5},whileHover:{y:-2},children:n},n)),s.jsx(he.button,{onClick:e,className:"text-white/80 hover:text-white transition-colors duration-200",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},whileHover:{y:-2},children:"Login"})]})]})}),s.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-6",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[s.jsxs(he.div,{className:"space-y-8",initial:{opacity:0,x:-100},animate:{opacity:1,x:0},transition:{duration:1,delay:.3},children:[s.jsx(he.div,{className:"space-y-4",children:s.jsxs(he.h1,{className:"text-6xl md:text-7xl lg:text-8xl font-bold text-white leading-tight",initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:[s.jsx(he.span,{className:"block",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:"The Future"}),s.jsx(he.span,{className:"block",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.9},children:"of Learning"}),s.jsx(he.span,{className:"block",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.1},children:"is"}),s.jsx(he.span,{className:"block bg-gradient-to-r from-[#06b6d4] via-[#8b5cf6] to-[#ec4899] bg-clip-text text-transparent",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.3},children:"Personal."})]})}),s.jsxs(he.div,{className:"flex flex-col sm:flex-row gap-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.8,duration:.8},children:[s.jsx(z,{size:"lg",onClick:t,className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] hover:from-[#0891b2] hover:to-[#7c3aed] text-white px-8 py-4 text-lg shadow-2xl hover:shadow-[#06b6d4]/30 transition-all duration-300 hover:scale-105",children:"Request a Demo"}),s.jsxs(z,{size:"lg",variant:"outline",className:"border-2 border-white/30 text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm px-8 py-4 text-lg transition-all duration-300 hover:scale-105",children:[s.jsx(AA,{className:"w-5 h-5 mr-2"}),"See How It Works"]})]})]}),s.jsx(he.div,{className:"space-y-6 lg:pl-12",initial:{opacity:0,x:100},animate:{opacity:1,x:0},transition:{duration:1,delay:.8},children:s.jsx(he.div,{className:"bg-white/5 backdrop-blur-lg rounded-2xl p-8 border border-white/10",whileHover:{y:-5,boxShadow:"0 25px 50px rgba(0,0,0,0.2)"},transition:{type:"spring",stiffness:300},children:s.jsx(he.p,{className:"text-xl text-white/90 leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.8},children:"Gemeos helps schools and teachers with AI-driven tools that support educators and deliver adaptive, personalized learning across every classroom."})})})]})}),s.jsx(he.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:s.jsx(td,{className:"w-8 h-8 text-white/70"})})]})}const rQ=({src:e,alt:t,className:n="",fallback:r=null})=>{const[a,i]=f.useState(!1),[o,l]=f.useState(!0),c=()=>{i(!0),l(!1)},d=()=>{l(!1)};return a?r||s.jsx("div",{className:`bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center ${n}`,children:s.jsx("div",{className:"text-gray-500 text-center",children:s.jsx("div",{className:"text-sm",children:"Image unavailable"})})}):s.jsxs(s.Fragment,{children:[o&&s.jsx("div",{className:`bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse ${n}`}),s.jsx("img",{src:e,alt:t,className:`${n} ${o?"hidden":"block"}`,onError:c,onLoad:d})]})};function aQ({onRegistration:e}){return s.jsxs("section",{className:"section-gradient-secondary relative min-h-screen flex items-center justify-center px-4 overflow-hidden",children:[s.jsx("div",{className:"section-transition-top"}),s.jsx("div",{className:"section-transition-bottom"}),s.jsx("div",{className:"absolute inset-0 z-0",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030213] via-[#4c46a0] via-50% to-[#030213]"})}),s.jsx(he.div,{className:"absolute top-1/4 left-10 w-64 h-64 bg-gradient-to-r from-[#06b6d4]/10 to-[#8b5cf6]/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],x:[0,50,0],y:[0,-30,0]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),s.jsx(he.div,{className:"absolute bottom-1/4 right-10 w-48 h-48 bg-gradient-to-r from-[#8b5cf6]/10 to-[#06b6d4]/10 rounded-full blur-3xl",animate:{scale:[1,1.3,1],x:[0,-40,0],y:[0,30,0]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}}),s.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-20",children:[s.jsxs(he.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[s.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white mb-4",children:["Experience the"," ",s.jsx("span",{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] bg-clip-text text-transparent",children:"Platform"})]}),s.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"See how Gemeos AI transforms traditional learning into engaging, personalized experiences"})]}),s.jsxs("div",{className:"grid lg:grid-cols-12 gap-12 items-center",children:[s.jsx(he.div,{className:"lg:col-span-8",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsx("div",{className:"relative bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-lg rounded-2xl p-1 shadow-2xl border border-white/10",children:s.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[s.jsx(rQ,{src:"https://images.unsplash.com/photo-1636772523547-5577d04e8dc1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb2Rlcm4lMjBlZHVjYXRpb24lMjB0ZWNobm9sb2d5JTIwZGFzaGJvYXJkfGVufDF8fHx8MTc1NzIzMDQwMnww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",alt:"Platform Demo Preview",className:"w-full h-64 md:h-80 lg:h-96 object-cover transition-transform duration-500 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),s.jsx(he.div,{className:"absolute inset-0 flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.95},children:s.jsxs("div",{className:"relative",children:[s.jsx(he.div,{className:"absolute inset-0 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] rounded-full blur-xl opacity-75",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),s.jsx(z,{size:"lg",className:"relative bg-white/90 backdrop-blur-sm text-[#030213] hover:bg-white w-20 h-20 rounded-full shadow-2xl group-hover:shadow-[#06b6d4]/30 transition-all duration-300",children:s.jsx(AA,{className:"w-8 h-8 fill-current ml-1"})})]})}),s.jsx("div",{className:"absolute top-4 right-4 bg-black/80 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-medium",children:"4:32"})]})}),s.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[#06b6d4]/20 to-[#8b5cf6]/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})}),s.jsxs(he.div,{className:"lg:col-span-4 space-y-8",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,delay:.2},viewport:{once:!0},children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Watch Gemeos in Action"}),s.jsx("p",{className:"text-gray-300 leading-relaxed mb-6",children:"Discover how our AI-powered platform creates personalized learning experiences, adapts to student needs, and delivers measurable results in just minutes."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(he.div,{className:"flex items-center space-x-4 p-4 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10",whileHover:{scale:1.02,backgroundColor:"rgba(255, 255, 255, 0.08)"},transition:{type:"spring",stiffness:400,damping:10},children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#06b6d4] to-[#0891b2] rounded-lg flex items-center justify-center",children:s.jsx(et,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:"Personalized Learning"}),s.jsx("p",{className:"text-sm text-gray-400",children:"AI adapts to each student's pace"})]})]}),s.jsxs(he.div,{className:"flex items-center space-x-4 p-4 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10",whileHover:{scale:1.02,backgroundColor:"rgba(255, 255, 255, 0.08)"},transition:{type:"spring",stiffness:400,damping:10},children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#8b5cf6] to-[#7c3aed] rounded-lg flex items-center justify-center",children:s.jsx(qs,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:"Real-time Analytics"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Instant progress tracking"})]})]}),s.jsxs(he.div,{className:"flex items-center space-x-4 p-4 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10",whileHover:{scale:1.02,backgroundColor:"rgba(255, 255, 255, 0.08)"},transition:{type:"spring",stiffness:400,damping:10},children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#f59e0b] to-[#d97706] rounded-lg flex items-center justify-center",children:s.jsx(Us,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:"Engagement Boost"}),s.jsx("p",{className:"text-sm text-gray-400",children:"85% improvement in retention"})]})]})]}),s.jsx(he.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:s.jsx(z,{size:"lg",onClick:e,className:"w-full bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] hover:from-[#0891b2] hover:to-[#7c3aed] text-white shadow-xl hover:shadow-2xl hover:shadow-[#06b6d4]/20 transition-all duration-300",children:"Start Free Trial"})})]})]})]})]})}const V=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));V.displayName="Card";const G=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ne("flex flex-col space-y-1.5 p-6",e),...t}));G.displayName="CardHeader";const Y=f.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:ne("text-2xl font-semibold leading-none tracking-tight",e),...t}));Y.displayName="CardTitle";const we=f.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));we.displayName="CardDescription";const W=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ne("p-6 pt-0",e),...t}));W.displayName="CardContent";const iQ=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ne("flex items-center p-6 pt-0",e),...t}));iQ.displayName="CardFooter";function oQ(){const e=[{icon:On,title:"Upload Content",description:"Simply upload your educational materials and let our AI analyze and structure the content for optimal learning."},{icon:xa,title:"AI Processing",description:"Our advanced AI creates personalized learning paths, adaptive assessments, and interactive experiences."},{icon:q$,title:"Engage Students",description:"Students receive tailored content that adapts to their pace, style, and performance in real-time."}];return s.jsxs("section",{className:"section-gradient-primary relative min-h-screen flex items-center justify-center px-4 text-white overflow-hidden",children:[s.jsx("div",{className:"section-transition-top"}),s.jsx(he.div,{className:"absolute top-1/4 right-10 w-64 h-64 bg-gradient-to-r from-[#8b5cf6]/10 to-[#06b6d4]/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],x:[0,-40,0],y:[0,30,0]},transition:{duration:16,repeat:1/0,ease:"easeInOut"}}),s.jsx(he.div,{className:"absolute bottom-1/4 left-10 w-48 h-48 bg-gradient-to-r from-[#06b6d4]/10 to-[#8b5cf6]/10 rounded-full blur-3xl",animate:{scale:[1,1.3,1],x:[0,50,0],y:[0,-20,0]},transition:{duration:14,repeat:1/0,ease:"easeInOut"}}),s.jsxs("div",{className:"max-w-6xl mx-auto relative z-10 py-20",children:[s.jsxs(he.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"How It Works"}),s.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Transform your educational content into engaging, personalized learning experiences in three simple steps"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"hidden md:block absolute top-1/2 left-0 right-0 h-1 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] transform -translate-y-1/2 z-0"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8 relative z-10",children:e.map((t,n)=>{const r=t.icon;return s.jsx(he.div,{className:"relative",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:n*.2},viewport:{once:!0},children:s.jsxs(V,{className:"bg-white/5 backdrop-blur-lg border-white/10 p-8 hover:bg-white/10 transition-all duration-300",children:[s.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold",children:n+1}),s.jsxs("div",{className:"text-center",children:[s.jsx(he.div,{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-[#06b6d4]/20 to-[#8b5cf6]/20 rounded-full mb-6",animate:n===0?{y:[0,-5,0]}:n===1?{scale:[1,1.1,1],rotate:[0,5,0]}:{x:[0,5,0]},transition:{duration:2,repeat:1/0,delay:n*.5},children:s.jsx(r,{className:"w-8 h-8 text-[#06b6d4]"})}),s.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:t.title}),s.jsx("p",{className:"text-gray-300 leading-relaxed",children:t.description})]})]})},n)})})]})]}),s.jsx("div",{className:"section-transition-bottom"})]})}const lQ=dl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function X({className:e,variant:t,...n}){return s.jsx("div",{className:ne(lQ({variant:t}),e),...n})}function cQ(){return s.jsxs("section",{className:"section-gradient-secondary relative min-h-screen flex items-center justify-center px-4 overflow-hidden",children:[s.jsx("div",{className:"section-transition-top"}),s.jsx("div",{className:"absolute inset-0 z-0",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030213] via-[#4c46a0] via-50% to-[#14112e]"})}),s.jsx(he.div,{className:"absolute top-0 left-1/4 w-96 h-96 opacity-30",animate:{x:[0,100,-50,0],y:[0,-80,100,0],rotate:[0,180,360],scale:[1,1.2,.8,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},children:s.jsx("div",{className:"w-full h-full bg-gradient-to-r from-[#ec4899] to-[#06b6d4] rounded-full blur-3xl"})}),s.jsx(he.div,{className:"absolute bottom-1/4 right-1/4 w-72 h-72 opacity-20",animate:{x:[0,-80,120,0],y:[0,120,-80,0],rotate:[360,180,0],scale:[.8,1.3,1,.8]},transition:{duration:25,repeat:1/0,ease:"easeInOut"},children:s.jsx("div",{className:"w-full h-full bg-gradient-to-r from-[#8b5cf6] to-[#ec4899] rounded-full blur-3xl"})}),s.jsxs(he.svg,{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 1200 800",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:3,delay:1},children:[s.jsx(he.path,{d:"M 0,400 Q 300,200 600,400 T 1200,300",stroke:"url(#gradient1)",strokeWidth:"2",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.6},transition:{duration:2,delay:.5}}),s.jsx(he.path,{d:"M 0,500 Q 400,250 800,450 T 1200,350",stroke:"url(#gradient2)",strokeWidth:"3",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.4},transition:{duration:2.5,delay:1}}),s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4"}),s.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),s.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]}),s.jsxs("linearGradient",{id:"gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ec4899"}),s.jsx("stop",{offset:"50%",stopColor:"#f59e0b"}),s.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})]})]}),s.jsx("div",{className:"relative z-10 max-w-7xl mx-auto py-20",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[s.jsxs(he.div,{className:"space-y-8",initial:{opacity:0,x:-100},whileInView:{opacity:1,x:0},transition:{duration:1,delay:.2},viewport:{once:!0},children:[s.jsxs(he.div,{className:"space-y-4",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[s.jsxs(X,{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white px-4 py-2 text-sm",children:[s.jsx(Of,{className:"w-4 h-4 mr-2"}),"Next Generation Education"]}),s.jsxs("h2",{className:"text-5xl md:text-7xl lg:text-8xl font-bold text-white leading-tight",children:[s.jsx(he.span,{className:"block",initial:{opacity:0,y:100},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1},viewport:{once:!0},children:"Learning"}),s.jsx(he.span,{className:"block",initial:{opacity:0,y:100},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},viewport:{once:!0},children:"Deserves"}),s.jsx(he.span,{className:"block bg-gradient-to-r from-[#06b6d4] via-[#8b5cf6] to-[#ec4899] bg-clip-text text-transparent",initial:{opacity:0,y:100},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3},viewport:{once:!0},children:"Super AI."})]})]}),s.jsxs(he.div,{className:"flex flex-wrap gap-4",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.6},viewport:{once:!0},children:[s.jsxs(he.div,{className:"flex items-center bg-white/10 backdrop-blur-lg rounded-full px-4 py-2 border border-white/20",whileHover:{scale:1.05,y:-5},transition:{type:"spring",stiffness:300},children:[s.jsx(xa,{className:"w-5 h-5 text-[#06b6d4] mr-2"}),s.jsx("span",{className:"text-white text-sm",children:"AI-Powered"})]}),s.jsxs(he.div,{className:"flex items-center bg-white/10 backdrop-blur-lg rounded-full px-4 py-2 border border-white/20",whileHover:{scale:1.05,y:-5},transition:{type:"spring",stiffness:300},children:[s.jsx(X$,{className:"w-5 h-5 text-[#f59e0b] mr-2"}),s.jsx("span",{className:"text-white text-sm",children:"Lightning Fast"})]}),s.jsxs(he.div,{className:"flex items-center bg-white/10 backdrop-blur-lg rounded-full px-4 py-2 border border-white/20",whileHover:{scale:1.05,y:-5},transition:{type:"spring",stiffness:300},children:[s.jsx(Of,{className:"w-5 h-5 text-[#ec4899] mr-2"}),s.jsx("span",{className:"text-white text-sm",children:"Personalized"})]})]})]}),s.jsxs(he.div,{className:"space-y-8",initial:{opacity:0,x:100},whileInView:{opacity:1,x:0},transition:{duration:1,delay:.4},viewport:{once:!0},children:[s.jsxs(he.div,{className:"bg-white/5 backdrop-blur-lg rounded-2xl p-8 border border-white/10",whileHover:{y:-10,boxShadow:"0 25px 50px rgba(0,0,0,0.3)"},transition:{type:"spring",stiffness:300},children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Revolutionizing Education"}),s.jsx("p",{className:"text-gray-300 leading-relaxed mb-6",children:"Gemeos AI transforms traditional learning into dynamic, personalized experiences. Our platform adapts in real-time, creating unique pathways for every student while maintaining engagement through cutting-edge interactive technologies."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(he.div,{className:"flex items-center space-x-3",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{duration:.5,delay:.8},viewport:{once:!0},children:[s.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] rounded-full"}),s.jsx("span",{className:"text-gray-300",children:"Adaptive learning algorithms"})]}),s.jsxs(he.div,{className:"flex items-center space-x-3",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{duration:.5,delay:.9},viewport:{once:!0},children:[s.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-[#8b5cf6] to-[#ec4899] rounded-full"}),s.jsx("span",{className:"text-gray-300",children:"Real-time performance insights"})]}),s.jsxs(he.div,{className:"flex items-center space-x-3",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{duration:.5,delay:1},viewport:{once:!0},children:[s.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-[#ec4899] to-[#f59e0b] rounded-full"}),s.jsx("span",{className:"text-gray-300",children:"Immersive interactive content"})]})]})]}),s.jsxs(he.div,{className:"grid grid-cols-3 gap-4",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.8},viewport:{once:!0},children:[s.jsxs("div",{className:"text-center",children:[s.jsx(he.div,{className:"text-3xl font-bold text-white mb-1",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,delay:0},children:"95%"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Engagement Rate"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(he.div,{className:"text-3xl font-bold text-white mb-1",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,delay:.5},children:"3x"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Faster Learning"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(he.div,{className:"text-3xl font-bold text-white mb-1",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,delay:1},children:"100K+"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Students"})]})]})]})]})}),s.jsx(he.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:s.jsx("div",{className:"w-6 h-10 border-2 border-white/30 rounded-full flex justify-center",children:s.jsx(he.div,{className:"w-1 h-3 bg-white rounded-full mt-2",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})}),s.jsx("div",{className:"section-transition-bottom"})]})}function dQ(){const e=[{icon:W$,title:"Adaptive Learning Paths",description:"AI-powered personalization that adjusts to each student's learning style, pace, and preferences.",gradient:"from-[#06b6d4] to-[#8b5cf6]"},{icon:Bp,title:"Intelligent Content Creation",description:"Automatically generate quizzes, exercises, and interactive materials from your existing content.",gradient:"from-[#8b5cf6] to-[#ec4899]"},{icon:kw,title:"Gamification",description:"Motivate students with achievements, leaderboards, and progress tracking that makes learning fun.",gradient:"from-[#f59e0b] to-[#d97706]"},{icon:fh,title:"Advanced Analytics",description:"Comprehensive insights into learning patterns, performance metrics, and areas for improvement.",gradient:"from-[#ef4444] to-[#dc2626]"}];return s.jsxs("section",{className:`
        relative
        py-24
        overflow-hidden
        /* Dark hero-like backdrop */
        bg-[radial-gradient(1200px_600px_at_50%_0%,rgba(139,92,246,0.18),transparent_60%)]
        before:absolute before:inset-0 before:bg-gradient-to-b before:from-[#1e1b4b] before:via-[#1e1b4b] before:via-40% before:to-[#14112e]
        before:-z-10
      `,children:[s.jsx("div",{className:"pointer-events-none absolute -top-40 -left-40 h-[44rem] w-[44rem] rounded-full bg-[#8b5cf6]/20 blur-3xl"}),s.jsx("div",{className:"pointer-events-none absolute -bottom-40 -right-40 h-[36rem] w-[36rem] rounded-full bg-[#06b6d4]/20 blur-3xl"}),s.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6",children:[s.jsxs(he.div,{className:"text-center mb-16",initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Platform Pillars"}),s.jsx("p",{className:"text-lg md:text-xl text-white/80 max-w-3xl mx-auto",children:"Four core features that make Gemeos the most powerful AI-driven learning platform"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8",children:e.map((t,n)=>{const r=t.icon;return s.jsx(he.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:n*.08},className:"group",children:s.jsx(V,{className:`
                    h-full p-8
                    bg-white/5
                    border border-white/10
                    backdrop-blur-md
                    rounded-2xl
                    shadow-[0_10px_40px_rgba(0,0,0,0.25)]
                    transition-transform duration-300 hover:-translate-y-1.5
                  `,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`
                        inline-flex items-center justify-center
                        w-16 h-16 rounded-xl mb-6
                        text-white shadow-lg
                        bg-gradient-to-r ${t.gradient}
                      `,children:s.jsx(r,{className:"w-8 h-8"})}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t.title}),s.jsx("p",{className:"text-white/70 leading-relaxed",children:t.description}),s.jsx("div",{className:`
                        mt-6 h-1 rounded-full
                        bg-gradient-to-r ${t.gradient}
                        transform scale-x-0 group-hover:scale-x-100
                        transition-transform duration-300 origin-left
                      `})]})})},t.title)})})]})]})}function uQ({onRegistration:e,onLogin:t}){return s.jsxs("section",{className:"section-gradient-secondary relative min-h-screen flex items-center justify-center px-4 overflow-hidden",children:[s.jsx("div",{className:"section-transition-top"}),s.jsxs("div",{className:"absolute inset-0 z-0",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1e1b4b] via-[#4c46a0] via-40% to-[#030213]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent via-60% to-[#030213]/80"})]}),s.jsx(he.div,{className:"absolute top-0 left-0 w-1/2 h-full opacity-50",initial:{x:-100,opacity:0},animate:{x:0,opacity:.5},transition:{duration:2,delay:.5},children:s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-[#06b6d4]/40 via-[#8b5cf6]/30 to-transparent rounded-full blur-3xl transform -rotate-12 scale-150"})}),s.jsx(he.div,{className:"absolute bottom-0 right-0 w-2/3 h-2/3 opacity-30",initial:{x:100,opacity:0},animate:{x:0,opacity:.3},transition:{duration:2,delay:1},children:s.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full bg-gradient-to-tl from-[#ec4899]/40 via-[#8b5cf6]/25 to-transparent rounded-full blur-3xl transform rotate-12"})}),s.jsxs(he.svg,{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 1200 800",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:3,delay:1.5},children:[s.jsx(he.path,{d:"M 0,400 Q 300,200 600,400 T 1200,300",stroke:"url(#ctaGradient1)",strokeWidth:"2",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.6},transition:{duration:2,delay:2}}),s.jsx(he.path,{d:"M 200,600 Q 500,300 800,500 T 1200,400",stroke:"url(#ctaGradient2)",strokeWidth:"3",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.4},transition:{duration:2.5,delay:2.5}}),s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"ctaGradient1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),s.jsx("stop",{offset:"50%",stopColor:"#06b6d4"}),s.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]}),s.jsxs("linearGradient",{id:"ctaGradient2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ec4899"}),s.jsx("stop",{offset:"50%",stopColor:"#f59e0b"}),s.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})]})]}),s.jsx(he.div,{className:"absolute top-1/4 right-1/3 w-32 h-32 bg-gradient-to-r from-[#06b6d4]/15 to-[#8b5cf6]/15 rounded-full blur-xl",animate:{x:[0,50,-50,0],y:[0,-30,30,0],scale:[1,1.2,.8,1]},transition:{duration:20,repeat:1/0,ease:"linear"}}),s.jsx(he.div,{className:"absolute bottom-1/4 left-1/4 w-40 h-40 bg-gradient-to-r from-[#8b5cf6]/15 to-[#ec4899]/15 rounded-full blur-xl",animate:{x:[0,-40,60,0],y:[0,40,-20,0],scale:[1,.8,1.3,1]},transition:{duration:25,repeat:1/0,ease:"linear"}}),s.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center text-white py-20",children:[s.jsxs(he.h2,{className:"text-4xl md:text-6xl font-bold mb-6",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:["Ready to Build the"," ",s.jsx("span",{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] bg-clip-text text-transparent",children:"Future of Learning?"})]}),s.jsx(he.p,{className:"text-xl md:text-2xl text-gray-300 mb-10 max-w-2xl mx-auto",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},viewport:{once:!0},children:"Join thousands of educators who are already transforming their classrooms with AI-powered learning"}),s.jsxs(he.div,{className:"flex flex-col sm:flex-row gap-6 justify-center items-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.4},viewport:{once:!0},children:[s.jsx(he.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsxs(z,{size:"lg",onClick:e,className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] hover:from-[#0891b2] hover:to-[#7c3aed] text-white px-10 py-4 text-lg shadow-2xl relative overflow-hidden group",children:[s.jsx(he.div,{className:"absolute inset-0 bg-gradient-to-r from-[#8b5cf6] to-[#06b6d4] opacity-0 group-hover:opacity-100 transition-opacity duration-300",initial:!1,animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}),s.jsx("span",{className:"relative z-10",children:"Request a Demo"})]})}),s.jsx(he.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsxs(z,{size:"lg",variant:"ghost",onClick:t,className:"border-2 border-white/30 bg-transparent text-white hover:text-white hover:bg-white/10 backdrop-blur-sm px-10 py-4 text-lg hover:border-white/50 transition-all duration-300 !text-white",children:[s.jsx(ky,{className:"w-5 h-5 mr-2 !text-white"}),"Schedule a Call"]})})]}),s.jsxs(he.div,{className:"flex flex-wrap justify-center gap-6",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.6},viewport:{once:!0},children:[s.jsx(he.div,{whileHover:{scale:1.05},children:s.jsxs(X,{className:"bg-white/10 backdrop-blur-md text-white border border-white/20 px-6 py-3 text-base",children:[s.jsx(qs,{className:"w-5 h-5 mr-2 text-[#06b6d4]"}),"Quick Setup"]})}),s.jsx(he.div,{whileHover:{scale:1.05},children:s.jsxs(X,{className:"bg-white/10 backdrop-blur-md text-white border border-white/20 px-6 py-3 text-base",children:[s.jsx(Us,{className:"w-5 h-5 mr-2 text-[#8b5cf6]"}),"Proven Results"]})}),s.jsx(he.div,{whileHover:{scale:1.05},children:s.jsxs(X,{className:"bg-white/10 backdrop-blur-md text-white border border-white/20 px-6 py-3 text-base",children:[s.jsx(et,{className:"w-5 h-5 mr-2 text-[#f59e0b]"}),"Expert Support"]})})]}),s.jsxs(he.div,{className:"mt-20 pt-16 border-t border-white/10",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.8},viewport:{once:!0},children:[s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8 text-sm",children:[s.jsxs(he.div,{className:"space-y-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.9},viewport:{once:!0},children:[s.jsx("h3",{className:"text-white/90 font-medium text-base",children:"Company"}),s.jsxs("div",{className:"space-y-2 text-white/60",children:[s.jsx("p",{children:"© 2025 Gemeos Technologies Inc."}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($$,{className:"w-4 h-4 mt-1 flex-shrink-0 text-[#06b6d4]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Innovation District"}),s.jsx("p",{children:"San Francisco, CA 94103"}),s.jsx("p",{children:"United States"})]})]})]})]}),s.jsxs(he.div,{className:"space-y-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:1},viewport:{once:!0},children:[s.jsx("h3",{className:"text-white/90 font-medium text-base",children:"Contact"}),s.jsxs("div",{className:"space-y-3 text-white/60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ky,{className:"w-4 h-4 text-[#8b5cf6]"}),s.jsx("p",{children:"Tel: +1 (555) 123-4567"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(At,{className:"w-4 h-4 text-[#06b6d4]"}),s.jsx("p",{children:"hello@gemeos.ai"})]}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsx("p",{children:"Business License: AI-EDU-2025-SF"}),s.jsx("p",{children:"Tax ID: 94-1234567"})]})]})]}),s.jsxs(he.div,{className:"space-y-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:1.1},viewport:{once:!0},children:[s.jsx("h3",{className:"text-white/90 font-medium text-base",children:"Legal"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he.a,{href:"#",className:"block text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:"Privacy Policy"}),s.jsx(he.a,{href:"#",className:"block text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:"Terms of Service"}),s.jsx(he.a,{href:"#",className:"block text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:"Cookie Policy"}),s.jsx(he.a,{href:"#",className:"block text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:"Data Protection"})]})]}),s.jsxs(he.div,{className:"space-y-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:1.2},viewport:{once:!0},children:[s.jsx("h3",{className:"text-white/90 font-medium text-base",children:"Follow Us"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(he.a,{href:"#",className:"flex items-center gap-3 text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:[s.jsx(F$,{className:"w-5 h-5 text-[#0077B5]"}),s.jsx("span",{children:"LinkedIn"})]}),s.jsxs(he.a,{href:"#",className:"flex items-center gap-3 text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:[s.jsx(Y$,{className:"w-5 h-5 text-[#FF0000]"}),s.jsx("span",{children:"YouTube"})]}),s.jsxs(he.a,{href:"#",className:"flex items-center gap-3 text-white/60 hover:text-white/90 transition-colors duration-200",whileHover:{x:4},children:[s.jsx(L$,{className:"w-5 h-5 text-[#E4405F]"}),s.jsx("span",{children:"Instagram"})]})]})]})]}),s.jsx(he.div,{className:"mt-12 pt-8 border-t border-white/5 text-center",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:1.4},viewport:{once:!0},children:s.jsx("p",{className:"text-white/40 text-xs",children:"Built with passion for education • Transforming learning through AI • All rights reserved"})})]})]})]})}const hQ=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(!1),{toast:u}=at(),h=pt(),{session:m,authState:p}=dn();f.useEffect(()=>{if(p==="authenticated"&&m){const y=Uo(m);h(y)}},[p,m,h]);const v=()=>{const y=async g=>{g.preventDefault(),d(!0);const b=new FormData(g.currentTarget),w=b.get("loginEmail"),C=b.get("loginPassword");try{const{data:_,error:S}=await L.auth.signInWithPassword({email:w,password:C});if(S){u({title:"Login Failed",description:S.message,variant:"destructive"}),d(!1);return}u({title:"Login successful!",description:"Welcome back to Gemeos!"}),r(!1);const{data:N}=await L.auth.getSession(),j=Uo(N.session);h(j)}catch{u({title:"Login Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{d(!1)}};return s.jsx(nn,{open:n,onOpenChange:r,children:s.jsxs(Kt,{className:"sm:max-w-md",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{className:"text-2xl text-center text-gray-900",children:"Welcome Back"}),s.jsx(Tn,{className:"text-center text-gray-600",children:"Sign in to your account to continue"})]}),s.jsxs("form",{className:"space-y-4 mt-4",onSubmit:y,children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"loginEmail",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(At,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),s.jsx(pe,{id:"loginEmail",name:"loginEmail",type:"email",placeholder:"john@example.com",className:"pl-10 h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"loginPassword",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),s.jsx(pe,{id:"loginPassword",name:"loginPassword",type:a?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10 h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-3.5 hover:opacity-70",children:a?s.jsx($i,{className:"h-4 w-4 text-gray-400"}):s.jsx(fr,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsx(z,{type:"submit",className:"w-full h-[51px] font-semibold text-base rounded-lg transition-all duration-200 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] hover:from-[#0891b2] hover:to-[#7c3aed] text-white",disabled:c,children:c?"Logging in...":"Login"}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("a",{href:"#",className:"text-sm hover:underline text-blue-600",children:"Forgot password?"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",s.jsx("button",{type:"button",onClick:()=>{r(!1),t(!0)},className:"font-medium hover:underline text-blue-600",children:"Sign up here"})]})]})]})]})})},x=()=>{const y=async g=>{g.preventDefault(),d(!0);const b=new FormData(g.currentTarget),w=b.get("firstName"),C=b.get("lastName"),_=b.get("email"),S=b.get("password"),N=b.get("confirmPassword"),j=b.get("terms")==="on";if(!w||!C||!_||!S||!N){u({title:"Error",description:"Please fill in all fields.",variant:"destructive"}),d(!1);return}if(S!==N){u({title:"Error",description:"Passwords do not match.",variant:"destructive"}),d(!1);return}if(S.length<8){u({title:"Error",description:"Password must be at least 8 characters long.",variant:"destructive"}),d(!1);return}if(!j){u({title:"Error",description:"Please accept the Terms of Service and Privacy Policy.",variant:"destructive"}),d(!1);return}try{const{data:k,error:T}=await L.auth.signUp({email:_,password:S,options:{emailRedirectTo:`${window.location.origin}/`,data:{first_name:w,last_name:C,user_type:"teacher"}}});if(T){u({title:"Registration Failed",description:T.message,variant:"destructive"}),d(!1);return}u({title:"Registration successful!",description:"Welcome to Gemeos!"}),t(!1);const{data:A}=await L.auth.getSession(),R=Uo(A.session);h(R)}catch{u({title:"Registration Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{d(!1)}};return s.jsx(nn,{open:e,onOpenChange:t,children:s.jsxs(Kt,{className:"sm:max-w-md",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{className:"text-2xl text-center text-gray-900",children:"Create Your Free Account"}),s.jsx(Tn,{className:"text-center text-gray-600",children:"Get started with Gemeos in just a few steps"})]}),s.jsxs("form",{className:"space-y-4 mt-4",onSubmit:y,children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"firstName",children:"First Name"}),s.jsx(pe,{id:"firstName",name:"firstName",placeholder:"John",required:!0,className:"h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"lastName",children:"Last Name"}),s.jsx(pe,{id:"lastName",name:"lastName",placeholder:"Doe",required:!0,className:"h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(At,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),s.jsx(pe,{id:"email",name:"email",type:"email",placeholder:"john@example.com",className:"pl-10 h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),s.jsx(pe,{id:"password",name:"password",type:a?"text":"password",placeholder:"Min. 8 characters",className:"pl-10 pr-10 h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",required:!0,minLength:8}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-3.5 hover:opacity-70",children:a?s.jsx($i,{className:"h-4 w-4 text-gray-400"}):s.jsx(fr,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-400"}),s.jsx(pe,{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",placeholder:"Confirm your password",className:"pl-10 pr-10 h-11 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-3.5 hover:opacity-70",children:o?s.jsx($i,{className:"h-4 w-4 text-gray-400"}):s.jsx(fr,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hr,{id:"terms",name:"terms",required:!0}),s.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-600",children:["I accept the"," ",s.jsx("a",{href:"#",className:"hover:underline text-blue-600",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"#",className:"hover:underline text-blue-600",children:"Privacy Policy"})]})]}),s.jsx(z,{type:"submit",className:"w-full h-[51px] font-semibold text-base rounded-lg transition-all duration-200 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] hover:from-[#0891b2] hover:to-[#7c3aed] text-white",disabled:c,children:c?"Creating Account...":"Create Free Account"}),s.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",s.jsx("button",{type:"button",onClick:()=>{t(!1),r(!0)},className:"font-medium hover:underline text-blue-600",children:"Login here"})]})]})]})})};return p==="authenticating"?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s.jsxs("div",{className:"min-h-screen",children:[s.jsx(sQ,{onLogin:()=>r(!0),onRegistration:()=>t(!0)}),s.jsx(cQ,{}),s.jsx(dQ,{}),s.jsx(oQ,{}),s.jsx(aQ,{onRegistration:()=>t(!0)}),s.jsx(uQ,{onRegistration:()=>t(!0),onLogin:()=>r(!0)}),s.jsx(x,{}),s.jsx(v,{})]})};function mQ(e,t=[]){let n=[];function r(i,o){const l=f.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:p,...v}=h,x=(m==null?void 0:m[e][c])||l,y=f.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:y,children:p})}function u(h,m){const p=(m==null?void 0:m[e][c])||l,v=f.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,fQ(a,...t)]}function fQ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var pQ=f.createContext(void 0);function fd(e){const t=f.useContext(pQ);return e||t||"ltr"}var Yg="rovingFocusGroup.onEntryFocus",xQ={bubbles:!1,cancelable:!0},vx="RovingFocusGroup",[O0,FD,gQ]=$p(vx),[vQ,pd]=mQ(vx,[gQ]),[yQ,bQ]=vQ(vx),$D=f.forwardRef((e,t)=>s.jsx(O0.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(O0.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(wQ,{...e,ref:t})})}));$D.displayName=vx;var wQ=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=f.useRef(null),p=He(t,m),v=fd(i),[x=null,y]=Xs({prop:o,defaultProp:l,onChange:c}),[g,b]=f.useState(!1),w=$t(d),C=FD(n),_=f.useRef(!1),[S,N]=f.useState(0);return f.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(Yg,w),()=>j.removeEventListener(Yg,w)},[w]),s.jsx(yQ,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:x,onItemFocus:f.useCallback(j=>y(j),[y]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>N(j=>j+1),[]),onFocusableItemRemove:f.useCallback(()=>N(j=>j-1),[]),children:s.jsx(_e.div,{tabIndex:g||S===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:ue(e.onMouseDown,()=>{_.current=!0}),onFocus:ue(e.onFocus,j=>{const k=!_.current;if(j.target===j.currentTarget&&k&&!g){const T=new CustomEvent(Yg,xQ);if(j.currentTarget.dispatchEvent(T),!T.defaultPrevented){const A=C().filter(M=>M.focusable),R=A.find(M=>M.active),F=A.find(M=>M.id===x),U=[R,F,...A].filter(Boolean).map(M=>M.ref.current);BD(U,u)}}_.current=!1}),onBlur:ue(e.onBlur,()=>b(!1))})})}),zD="RovingFocusGroupItem",UD=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,...o}=e,l=Ws(),c=i||l,d=bQ(zD,n),u=d.currentTabStopId===c,h=FD(n),{onFocusableItemAdd:m,onFocusableItemRemove:p}=d;return f.useEffect(()=>{if(r)return m(),()=>p()},[r,m,p]),s.jsx(O0.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:s.jsx(_e.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:ue(e.onMouseDown,v=>{r?d.onItemFocus(c):v.preventDefault()}),onFocus:ue(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:ue(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=SQ(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=h().filter(b=>b.focusable).map(b=>b.ref.current);if(x==="last")g.reverse();else if(x==="prev"||x==="next"){x==="prev"&&g.reverse();const b=g.indexOf(v.currentTarget);g=d.loop?_Q(g,b+1):g.slice(b+1)}setTimeout(()=>BD(g))}})})})});UD.displayName=zD;var jQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function NQ(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function SQ(e,t,n){const r=NQ(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jQ[r]}function BD(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function _Q(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Rj=$D,Mj=UD,Lj="Radio",[CQ,VD]=es(Lj),[kQ,EQ]=CQ(Lj),qD=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[h,m]=f.useState(null),p=He(t,y=>m(y)),v=f.useRef(!1),x=h?d||!!h.closest("form"):!0;return s.jsxs(kQ,{scope:n,checked:a,disabled:o,children:[s.jsx(_e.button,{type:"button",role:"radio","aria-checked":a,"data-state":GD(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:p,onClick:ue(e.onClick,y=>{a||c==null||c(),x&&(v.current=y.isPropagationStopped(),v.current||y.stopPropagation())})}),x&&s.jsx(TQ,{control:h,bubbles:!v.current,name:r,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});qD.displayName=Lj;var WD="RadioIndicator",HD=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,i=EQ(WD,n);return s.jsx(xn,{present:r||i.checked,children:s.jsx(_e.span,{"data-state":GD(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});HD.displayName=WD;var TQ=e=>{const{control:t,checked:n,bubbles:r=!0,...a}=e,i=f.useRef(null),o=fx(n),l=Hp(t);return f.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[o,n,r]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function GD(e){return e?"checked":"unchecked"}var AQ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Oj="RadioGroup",[PQ,sde]=es(Oj,[pd,VD]),KD=pd(),QD=VD(),[IQ,DQ]=PQ(Oj),YD=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...m}=e,p=KD(n),v=fd(d),[x,y]=Xs({prop:i,defaultProp:a,onChange:h});return s.jsx(IQ,{scope:n,name:r,required:o,disabled:l,value:x,onValueChange:y,children:s.jsx(Rj,{asChild:!0,...p,orientation:c,dir:v,loop:u,children:s.jsx(_e.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...m,ref:t})})})});YD.displayName=Oj;var XD="RadioGroupItem",JD=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,i=DQ(XD,n),o=i.disabled||r,l=KD(n),c=QD(n),d=f.useRef(null),u=He(t,d),h=i.value===a.value,m=f.useRef(!1);return f.useEffect(()=>{const p=x=>{AQ.includes(x.key)&&(m.current=!0)},v=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",v)}},[]),s.jsx(Mj,{asChild:!0,...l,focusable:!o,active:h,children:s.jsx(qD,{disabled:o,required:i.required,checked:h,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:ue(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ue(a.onFocus,()=>{var p;m.current&&((p=d.current)==null||p.click())})})})});JD.displayName=XD;var RQ="RadioGroupIndicator",ZD=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=QD(n);return s.jsx(HD,{...a,...r,ref:t})});ZD.displayName=RQ;var eR=YD,tR=JD,MQ=ZD;const Fj=f.forwardRef(({className:e,...t},n)=>s.jsx(eR,{className:ne("grid gap-2",e),...t,ref:n}));Fj.displayName=eR.displayName;const $j=f.forwardRef(({className:e,...t},n)=>s.jsx(tR,{ref:n,className:ne("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(MQ,{className:"flex items-center justify-center",children:s.jsx(SA,{className:"h-2.5 w-2.5 fill-current text-current"})})}));$j.displayName=tR.displayName;const LQ=()=>{var h,m;const[e,t]=f.useState(""),n=pt(),{logout:r,getUserName:a,getUserEmail:i}=dn(),o=((h=a())==null?void 0:h.split(" ")[0])||((m=i())==null?void 0:m.split("@")[0])||"Teacher",l=[{id:"jazz",title:"Jazz Music",description:"Focuses on jazz theory, improvisation, and ensemble playing.",icon:_w},{id:"classical",title:"Classical Music",description:"Covers classical theory, repertoire, and performance techniques.",icon:yr},{id:"pop",title:"Pop Music",description:"Explores contemporary popular music theory, songwriting, and performance.",icon:B$},{id:"gmat",title:"GMAT",description:"Prepares students for the Graduate Management Admission Test, focusing on analytical, quantitative, verbal, and integrated reasoning skills.",icon:rt},{id:"ielts",title:"IELTS",description:"Prepares students for the International English Language Testing System, focusing on listening, reading, writing, and speaking skills.",icon:rt}],c=()=>{n("/teacher/dashboard")},d=()=>{n("/teacher/dashboard")},u=()=>{r()};return s.jsxs("div",{className:"min-h-screen bg-card",children:[s.jsx("header",{className:"bg-primary shadow-lg",children:s.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[s.jsx("div",{className:"text-primary-foreground text-2xl font-bold",children:"Gemeos"}),s.jsx(z,{variant:"outline",className:"border-primary-foreground text-primary-foreground bg-transparent hover:bg-primary-foreground hover:text-primary",onClick:u,children:"Logout"})]})}),s.jsxs("main",{className:"container mx-auto px-4 py-12 max-w-4xl",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("h1",{className:"text-4xl font-bold text-foreground mb-4",children:["Welcome, ",o,"! Let's Get Started."]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"To personalize your Gemeos experience, please choose your primary teaching domain. You can always add or manage additional domains later in Settings."})]}),s.jsx("div",{className:"mb-8",children:s.jsx(Fj,{value:e,onValueChange:t,children:s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:l.map(p=>s.jsxs("div",{children:[s.jsx($j,{value:p.id,id:p.id,className:"sr-only"}),s.jsx(Q,{htmlFor:p.id,className:"cursor-pointer",children:s.jsx(V,{className:`transition-all duration-200 hover:shadow-lg border-2 ${e===p.id?"border-accent bg-accent/5 shadow-md":"border-border hover:border-accent/50"}`,children:s.jsx(W,{className:"p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`p-3 rounded-full ${e===p.id?"bg-accent/20":"bg-muted"}`,children:s.jsx(p.icon,{className:`h-6 w-6 ${e===p.id?"text-accent":"text-muted-foreground"}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:p.title}),s.jsx("p",{className:"text-muted-foreground",children:p.description})]}),s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${e===p.id?"border-accent bg-accent":"border-muted-foreground"}`,children:e===p.id&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})})})})]},p.id))})})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[s.jsx(z,{onClick:c,disabled:!e,className:"bg-accent hover:bg-accent/90 text-accent-foreground px-8 py-3 text-lg font-semibold",size:"lg",children:"Continue"}),s.jsx(z,{variant:"ghost",onClick:d,className:"text-muted-foreground hover:text-foreground",children:"Skip for Now"})]})]})]})};var zj="Tabs",[OQ,rde]=es(zj,[pd]),nR=pd(),[FQ,Uj]=OQ(zj),sR=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=fd(l),[h,m]=Xs({prop:r,onChange:a,defaultProp:i});return s.jsx(FQ,{scope:n,baseId:Ws(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:s.jsx(_e.div,{dir:u,"data-orientation":o,...d,ref:t})})});sR.displayName=zj;var rR="TabsList",aR=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=Uj(rR,n),o=nR(n);return s.jsx(Rj,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(_e.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});aR.displayName=rR;var iR="TabsTrigger",oR=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=Uj(iR,n),l=nR(n),c=dR(o.baseId,r),d=uR(o.baseId,r),u=r===o.value;return s.jsx(Mj,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(_e.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ue(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ue(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ue(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(r)})})})});oR.displayName=iR;var lR="TabsContent",cR=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=Uj(lR,n),c=dR(l.baseId,r),d=uR(l.baseId,r),u=r===l.value,h=f.useRef(u);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(xn,{present:a||u,children:({present:m})=>s.jsx(_e.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});cR.displayName=lR;function dR(e,t){return`${e}-trigger-${t}`}function uR(e,t){return`${e}-content-${t}`}var $Q=sR,hR=aR,mR=oR,fR=cR;const Qr=$Q,wr=f.forwardRef(({className:e,...t},n)=>s.jsx(hR,{ref:n,className:ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));wr.displayName=hR.displayName;const Je=f.forwardRef(({className:e,...t},n)=>s.jsx(mR,{ref:n,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Je.displayName=mR.displayName;const Ze=f.forwardRef(({className:e,...t},n)=>s.jsx(fR,{ref:n,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ze.displayName=fR.displayName;function F0(e,[t,n]){return Math.min(n,Math.max(t,e))}var zQ=[" ","Enter","ArrowUp","ArrowDown"],UQ=[" ","Enter"],Ih="Select",[yx,bx,BQ]=$p(Ih),[xd,ade]=es(Ih,[BQ,no]),wx=no(),[VQ,ro]=xd(Ih),[qQ,WQ]=xd(Ih),pR=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:p,form:v}=e,x=wx(t),[y,g]=f.useState(null),[b,w]=f.useState(null),[C,_]=f.useState(!1),S=fd(d),[N=!1,j]=Xs({prop:r,defaultProp:a,onChange:i}),[k,T]=Xs({prop:o,defaultProp:l,onChange:c}),A=f.useRef(null),R=y?v||!!y.closest("form"):!0,[F,O]=f.useState(new Set),U=Array.from(F).map(M=>M.props.value).join(";");return s.jsx(Gp,{...x,children:s.jsxs(VQ,{required:p,scope:t,trigger:y,onTriggerChange:g,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:_,contentId:Ws(),value:k,onValueChange:T,open:N,onOpenChange:j,dir:S,triggerPointerDownPosRef:A,disabled:m,children:[s.jsx(yx.Provider,{scope:t,children:s.jsx(qQ,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(M=>{O(B=>new Set(B).add(M))},[]),onNativeOptionRemove:f.useCallback(M=>{O(B=>{const D=new Set(B);return D.delete(M),D})},[]),children:n})}),R?s.jsxs(zR,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:k,onChange:M=>T(M.target.value),disabled:m,form:v,children:[k===void 0?s.jsx("option",{value:""}):null,Array.from(F)]},U):null]})})};pR.displayName=Ih;var xR="SelectTrigger",gR=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=wx(n),o=ro(xR,n),l=o.disabled||r,c=He(t,o.onTriggerChange),d=bx(n),u=f.useRef("touch"),[h,m,p]=UR(x=>{const y=d().filter(w=>!w.disabled),g=y.find(w=>w.value===o.value),b=BR(y,x,g);b!==void 0&&o.onValueChange(b.value)}),v=x=>{l||(o.onOpenChange(!0),p()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(gh,{asChild:!0,...i,children:s.jsx(_e.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":$R(o.value)?"":void 0,...a,ref:c,onClick:ue(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&v(x)}),onPointerDown:ue(a.onPointerDown,x=>{u.current=x.pointerType;const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:ue(a.onKeyDown,x=>{const y=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(y&&x.key===" ")&&zQ.includes(x.key)&&(v(),x.preventDefault())})})})});gR.displayName=xR;var vR="SelectValue",yR=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=ro(vR,n),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=He(t,c.onValueNodeChange);return fn(()=>{d(u)},[d,u]),s.jsx(_e.span,{...l,ref:h,style:{pointerEvents:"none"},children:$R(c.value)?s.jsx(s.Fragment,{children:o}):i})});yR.displayName=vR;var HQ="SelectIcon",bR=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(_e.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});bR.displayName=HQ;var GQ="SelectPortal",wR=e=>s.jsx(ed,{asChild:!0,...e});wR.displayName=GQ;var el="SelectContent",jR=f.forwardRef((e,t)=>{const n=ro(el,e.__scopeSelect),[r,a]=f.useState();if(fn(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Qa.createPortal(s.jsx(NR,{scope:e.__scopeSelect,children:s.jsx(yx.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(SR,{...e,ref:t})});jR.displayName=el;var Ir=10,[NR,ao]=xd(el),KQ="SelectContentImpl",SR=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:x,avoidCollisions:y,...g}=e,b=ro(el,n),[w,C]=f.useState(null),[_,S]=f.useState(null),N=He(t,te=>C(te)),[j,k]=f.useState(null),[T,A]=f.useState(null),R=bx(n),[F,O]=f.useState(!1),U=f.useRef(!1);f.useEffect(()=>{if(w)return jh(w)},[w]),ux();const M=f.useCallback(te=>{const[ie,...ce]=R().map(je=>je.ref.current),[ve]=ce.slice(-1),me=document.activeElement;for(const je of te)if(je===me||(je==null||je.scrollIntoView({block:"nearest"}),je===ie&&_&&(_.scrollTop=0),je===ve&&_&&(_.scrollTop=_.scrollHeight),je==null||je.focus(),document.activeElement!==me))return},[R,_]),B=f.useCallback(()=>M([j,w]),[M,j,w]);f.useEffect(()=>{F&&B()},[F,B]);const{onOpenChange:D,triggerPointerDownPosRef:E}=b;f.useEffect(()=>{if(w){let te={x:0,y:0};const ie=ve=>{var me,je;te={x:Math.abs(Math.round(ve.pageX)-(((me=E.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((je=E.current)==null?void 0:je.y)??0))}},ce=ve=>{te.x<=10&&te.y<=10?ve.preventDefault():w.contains(ve.target)||D(!1),document.removeEventListener("pointermove",ie),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",ce,{capture:!0})}}},[w,D,E]),f.useEffect(()=>{const te=()=>D(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[D]);const[I,q]=UR(te=>{const ie=R().filter(me=>!me.disabled),ce=ie.find(me=>me.ref.current===document.activeElement),ve=BR(ie,te,ce);ve&&setTimeout(()=>ve.ref.current.focus())}),$=f.useCallback((te,ie,ce)=>{const ve=!U.current&&!ce;(b.value!==void 0&&b.value===ie||ve)&&(k(te),ve&&(U.current=!0))},[b.value]),P=f.useCallback(()=>w==null?void 0:w.focus(),[w]),Z=f.useCallback((te,ie,ce)=>{const ve=!U.current&&!ce;(b.value!==void 0&&b.value===ie||ve)&&A(te)},[b.value]),ee=r==="popper"?$0:_R,J=ee===$0?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:x,avoidCollisions:y}:{};return s.jsx(NR,{scope:n,content:w,viewport:_,onViewportChange:S,itemRefCallback:$,selectedItem:j,onItemLeave:P,itemTextRefCallback:Z,focusSelectedItem:B,selectedItemText:T,position:r,isPositioned:F,searchRef:I,children:s.jsx(wh,{as:ds,allowPinchZoom:!0,children:s.jsx(bh,{asChild:!0,trapped:b.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:ue(a,te=>{var ie;(ie=b.trigger)==null||ie.focus({preventScroll:!0}),te.preventDefault()}),children:s.jsx(cl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(ee,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:te=>te.preventDefault(),...g,...J,onPlaced:()=>O(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:ue(g.onKeyDown,te=>{const ie=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!ie&&te.key.length===1&&q(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let ve=R().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(te.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const me=te.target,je=ve.indexOf(me);ve=ve.slice(je+1)}setTimeout(()=>M(ve)),te.preventDefault()}})})})})})})});SR.displayName=KQ;var QQ="SelectItemAlignedPosition",_R=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=ro(el,n),o=ao(el,n),[l,c]=f.useState(null),[d,u]=f.useState(null),h=He(t,N=>u(N)),m=bx(n),p=f.useRef(!1),v=f.useRef(!0),{viewport:x,selectedItem:y,selectedItemText:g,focusSelectedItem:b}=o,w=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&y&&g){const N=i.trigger.getBoundingClientRect(),j=d.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),T=g.getBoundingClientRect();if(i.dir!=="rtl"){const me=T.left-j.left,je=k.left-me,Ye=N.left-je,Oe=N.width+Ye,Fe=Math.max(Oe,j.width),Ie=window.innerWidth-Ir,ct=F0(je,[Ir,Math.max(Ir,Ie-Fe)]);l.style.minWidth=Oe+"px",l.style.left=ct+"px"}else{const me=j.right-T.right,je=window.innerWidth-k.right-me,Ye=window.innerWidth-N.right-je,Oe=N.width+Ye,Fe=Math.max(Oe,j.width),Ie=window.innerWidth-Ir,ct=F0(je,[Ir,Math.max(Ir,Ie-Fe)]);l.style.minWidth=Oe+"px",l.style.right=ct+"px"}const A=m(),R=window.innerHeight-Ir*2,F=x.scrollHeight,O=window.getComputedStyle(d),U=parseInt(O.borderTopWidth,10),M=parseInt(O.paddingTop,10),B=parseInt(O.borderBottomWidth,10),D=parseInt(O.paddingBottom,10),E=U+M+F+D+B,I=Math.min(y.offsetHeight*5,E),q=window.getComputedStyle(x),$=parseInt(q.paddingTop,10),P=parseInt(q.paddingBottom,10),Z=N.top+N.height/2-Ir,ee=R-Z,J=y.offsetHeight/2,te=y.offsetTop+J,ie=U+M+te,ce=E-ie;if(ie<=Z){const me=A.length>0&&y===A[A.length-1].ref.current;l.style.bottom="0px";const je=d.clientHeight-x.offsetTop-x.offsetHeight,Ye=Math.max(ee,J+(me?P:0)+je+B),Oe=ie+Ye;l.style.height=Oe+"px"}else{const me=A.length>0&&y===A[0].ref.current;l.style.top="0px";const Ye=Math.max(Z,U+x.offsetTop+(me?$:0)+J)+ce;l.style.height=Ye+"px",x.scrollTop=ie-Z+x.offsetTop}l.style.margin=`${Ir}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,x,y,g,i.dir,r]);fn(()=>w(),[w]);const[C,_]=f.useState();fn(()=>{d&&_(window.getComputedStyle(d).zIndex)},[d]);const S=f.useCallback(N=>{N&&v.current===!0&&(w(),b==null||b(),v.current=!1)},[w,b]);return s.jsx(XQ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(_e.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});_R.displayName=QQ;var YQ="SelectPopperPosition",$0=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ir,...i}=e,o=wx(n);return s.jsx(Kp,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$0.displayName=YQ;var[XQ,Bj]=xd(el,{}),z0="SelectViewport",CR=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=ao(z0,n),o=Bj(z0,n),l=He(t,i.onViewportChange),c=f.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(yx.Slot,{scope:n,children:s.jsx(_e.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ue(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const p=Math.abs(c.current-u.scrollTop);if(p>0){const v=window.innerHeight-Ir*2,x=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),g=Math.max(x,y);if(g<v){const b=g+p,w=Math.min(v,b),C=b-w;h.style.height=w+"px",h.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});CR.displayName=z0;var kR="SelectGroup",[JQ,ZQ]=xd(kR),eY=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ws();return s.jsx(JQ,{scope:n,id:a,children:s.jsx(_e.div,{role:"group","aria-labelledby":a,...r,ref:t})})});eY.displayName=kR;var ER="SelectLabel",TR=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ZQ(ER,n);return s.jsx(_e.div,{id:a.id,...r,ref:t})});TR.displayName=ER;var ip="SelectItem",[tY,AR]=xd(ip),PR=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=ro(ip,n),c=ao(ip,n),d=l.value===r,[u,h]=f.useState(i??""),[m,p]=f.useState(!1),v=He(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,a)}),x=Ws(),y=f.useRef("touch"),g=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(tY,{scope:n,value:r,disabled:a,textId:x,isSelected:d,onItemTextChange:f.useCallback(b=>{h(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(yx.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:s.jsx(_e.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:ue(o.onFocus,()=>p(!0)),onBlur:ue(o.onBlur,()=>p(!1)),onClick:ue(o.onClick,()=>{y.current!=="mouse"&&g()}),onPointerUp:ue(o.onPointerUp,()=>{y.current==="mouse"&&g()}),onPointerDown:ue(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:ue(o.onPointerMove,b=>{var w;y.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:ue(o.onKeyDown,b=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&b.key===" "||(UQ.includes(b.key)&&g(),b.key===" "&&b.preventDefault())})})})})});PR.displayName=ip;var Qd="SelectItemText",IR=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=ro(Qd,n),l=ao(Qd,n),c=AR(Qd,n),d=WQ(Qd,n),[u,h]=f.useState(null),m=He(t,g=>h(g),c.onItemTextChange,g=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,g,c.value,c.disabled)}),p=u==null?void 0:u.textContent,v=f.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:y}=d;return fn(()=>(x(v),()=>y(v)),[x,y,v]),s.jsxs(s.Fragment,{children:[s.jsx(_e.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qa.createPortal(i.children,o.valueNode):null]})});IR.displayName=Qd;var DR="SelectItemIndicator",RR=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return AR(DR,n).isSelected?s.jsx(_e.span,{"aria-hidden":!0,...r,ref:t}):null});RR.displayName=DR;var U0="SelectScrollUpButton",MR=f.forwardRef((e,t)=>{const n=ao(U0,e.__scopeSelect),r=Bj(U0,e.__scopeSelect),[a,i]=f.useState(!1),o=He(t,r.onScrollButtonChange);return fn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(OR,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});MR.displayName=U0;var B0="SelectScrollDownButton",LR=f.forwardRef((e,t)=>{const n=ao(B0,e.__scopeSelect),r=Bj(B0,e.__scopeSelect),[a,i]=f.useState(!1),o=He(t,r.onScrollButtonChange);return fn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(OR,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});LR.displayName=B0;var OR=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=ao("SelectScrollButton",n),o=f.useRef(null),l=bx(n),c=f.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),fn(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(_e.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ue(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ue(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ue(a.onPointerLeave,()=>{c()})})}),nY="SelectSeparator",FR=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(_e.div,{"aria-hidden":!0,...r,ref:t})});FR.displayName=nY;var V0="SelectArrow",sY=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=wx(n),i=ro(V0,n),o=ao(V0,n);return i.open&&o.position==="popper"?s.jsx(Qp,{...a,...r,ref:t}):null});sY.displayName=V0;function $R(e){return e===""||e===void 0}var zR=f.forwardRef((e,t)=>{const{value:n,...r}=e,a=f.useRef(null),i=He(t,a),o=fx(n);return f.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[o,n]),s.jsx(mh,{asChild:!0,children:s.jsx("select",{...r,ref:i,defaultValue:n})})});zR.displayName="BubbleSelect";function UR(e){const t=$t(e),n=f.useRef(""),r=f.useRef(0),a=f.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function BR(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=rY(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function rY(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var aY=pR,VR=gR,iY=yR,oY=bR,lY=wR,qR=jR,cY=CR,WR=TR,HR=PR,dY=IR,uY=RR,GR=MR,KR=LR,QR=FR;const Ve=aY,qe=iY,ze=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(VR,{ref:r,className:ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(oY,{asChild:!0,children:s.jsx(td,{className:"h-4 w-4 opacity-50"})})]}));ze.displayName=VR.displayName;const YR=f.forwardRef(({className:e,...t},n)=>s.jsx(GR,{ref:n,className:ne("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(k$,{className:"h-4 w-4"})}));YR.displayName=GR.displayName;const XR=f.forwardRef(({className:e,...t},n)=>s.jsx(KR,{ref:n,className:ne("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(td,{className:"h-4 w-4"})}));XR.displayName=KR.displayName;const Ue=f.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(lY,{children:s.jsxs(qR,{ref:a,className:ne("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(YR,{}),s.jsx(cY,{className:ne("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(XR,{})]})}));Ue.displayName=qR.displayName;const hY=f.forwardRef(({className:e,...t},n)=>s.jsx(WR,{ref:n,className:ne("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));hY.displayName=WR.displayName;const le=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(HR,{ref:r,className:ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(uY,{children:s.jsx(pn,{className:"h-4 w-4"})})}),s.jsx(dY,{children:t})]}));le.displayName=HR.displayName;const mY=f.forwardRef(({className:e,...t},n)=>s.jsx(QR,{ref:n,className:ne("-mx-1 my-1 h-px bg-muted",e),...t}));mY.displayName=QR.displayName;const Gs=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:ne("w-full caption-bottom text-sm",e),...t})}));Gs.displayName="Table";const Ks=f.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:ne("[&_tr]:border-b",e),...t}));Ks.displayName="TableHeader";const Qs=f.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:ne("[&_tr:last-child]:border-0",e),...t}));Qs.displayName="TableBody";const fY=f.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));fY.displayName="TableFooter";const ut=f.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ut.displayName="TableRow";const Ee=f.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:ne("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ee.displayName="TableHead";const be=f.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:ne("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));be.displayName="TableCell";const pY=f.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:ne("mt-4 text-sm text-muted-foreground",e),...t}));pY.displayName="TableCaption";function JR({concepts:e,onConceptClick:t,onConceptDelete:n,onConceptUpdate:r,onAddChild:a,onStartLinking:i,onStartHierarchyChange:o,onManageRelationships:l,showApprovalActions:c=!1,onApproveConcept:d,onRejectConcept:u}){const h=new Map(e.map(x=>[x.id,x])),m=x=>{if(!x)return"–";const y=h.get(x);return y?y.name:"–"},p=x=>{const y=["bg-green-100 text-green-800 border-green-300","bg-green-100 text-green-800 border-green-300","bg-yellow-100 text-yellow-800 border-yellow-300","bg-orange-100 text-orange-800 border-orange-300","bg-red-100 text-red-800 border-red-300"];return y[Math.min(x,y.length-1)]},v=[...e].sort((x,y)=>x.name.localeCompare(y.name));return e.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No concepts found matching your search criteria."})}):s.jsx("div",{className:"overflow-hidden bg-white",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{className:"border-b bg-gray-50",children:[s.jsx(Ee,{className:"font-medium text-gray-600 w-12"}),s.jsx(Ee,{className:"font-medium text-gray-600",children:"Concept Name"}),s.jsx(Ee,{className:"font-medium text-gray-600",children:"Status"}),s.jsx(Ee,{className:"font-medium text-gray-600",children:"Level"}),s.jsx(Ee,{className:"font-medium text-gray-600",children:"Parent"}),s.jsx(Ee,{className:"font-medium text-gray-600 w-32",children:"Actions"})]})}),s.jsx(Qs,{children:v.map(x=>s.jsxs(ut,{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",onClick:()=>t==null?void 0:t(x),children:[s.jsx(be,{onClick:y=>y.stopPropagation(),children:s.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded-full bg-white"})}),s.jsx(be,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:x.name}),x.description&&s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:x.description})]})}),s.jsx(be,{children:s.jsx(X,{variant:x.status==="approved"||x.status==="confirmed"?"default":"secondary",className:x.status==="approved"||x.status==="confirmed"?"bg-green-100 text-green-800 hover:bg-green-100 border-green-300":x.status==="suggested"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100 border-yellow-300":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-300",children:x.status==="approved"||x.status==="confirmed"?"Approved":x.status==="suggested"?"Suggested":x.status})}),s.jsx(be,{children:s.jsxs(X,{variant:"outline",className:`${p(x.difficulty_level??0)} border`,children:["L",x.difficulty_level??0]})}),s.jsx(be,{className:"text-muted-foreground",children:m(x.parent_concept_id)}),s.jsx(be,{onClick:y=>y.stopPropagation(),children:s.jsx("div",{className:"flex items-center gap-1",children:c&&x.status==="suggested"?s.jsxs(s.Fragment,{children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),d==null||d(x.id)},className:"h-7 w-7 p-0 hover:bg-green-50 text-green-600 hover:text-green-700 transition-colors",title:"Approve concept",children:s.jsx(pn,{className:"h-3.5 w-3.5"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),u==null||u(x.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Reject concept",children:s.jsx(Lt,{className:"h-3.5 w-3.5"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),t==null||t(x)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Edit concept",children:s.jsx(ul,{className:"h-3.5 w-3.5 text-gray-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),a==null||a(x.id)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Add child concept",children:s.jsx(Pt,{className:"h-3.5 w-3.5 text-green-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),o==null||o(x)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Hierarchy management",children:s.jsx(Fu,{className:"h-3.5 w-3.5 text-purple-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),l==null||l(x)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Manage relationships",children:s.jsx(Nw,{className:"h-3.5 w-3.5 text-blue-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),n==null||n(x.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Delete concept",children:s.jsx(Ts,{className:"h-3.5 w-3.5"})})]})})})]},x.id))})]})})}const Fn=f.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Fn.displayName="Textarea";var xY="Separator",AC="horizontal",gY=["horizontal","vertical"],ZR=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=AC,...a}=e,i=vY(r)?r:AC,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(_e.div,{"data-orientation":i,...l,...a,ref:t})});ZR.displayName=xY;function vY(e){return gY.includes(e)}var eM=ZR;const cn=f.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(eM,{ref:a,decorative:n,orientation:t,className:ne("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));cn.displayName=eM.displayName;const yY=({concept:e,concepts:t,prerequisites:n,onClose:r,onSave:a,onDelete:i})=>{const[o,l]=f.useState(e),[c,d]=f.useState(!1);f.useEffect(()=>{l(e),d(!1)},[e]);const u=(w,C)=>{l(_=>({..._,[w]:C})),d(!0)},h=(w,C)=>{l(_=>({..._,metadata:{..._.metadata,[w]:C}})),d(!0)},m=()=>{a(o)},p=()=>{const w={...o,status:"confirmed"};l(w),a(w)},v=()=>{i(o.id)},x=w=>{switch(w){case"confirmed":return"default";case"ai_suggested":return"secondary";case"pending_review":return"outline";default:return"outline"}},y=t.filter(w=>w.id!==e.id&&w.parent_concept_id!==e.id),b=n.filter(w=>w.concept_id===e.id).map(w=>t.find(C=>C.id===w.prerequisite_concept_id)).filter(Boolean);return s.jsx("div",{className:"fixed inset-y-0 right-0 w-96 bg-background border-l shadow-lg z-50 overflow-y-auto",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Edit Concept"}),s.jsx(z,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(Lt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:x(o.status),children:o.status.replace("_"," ")}),o.status==="ai_suggested"&&s.jsx("span",{className:"text-sm text-muted-foreground",children:"AI Suggested"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"name",children:"Concept Name"}),s.jsx(pe,{id:"name",value:o.name,onChange:w=>u("name",w.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"description",children:"Description"}),s.jsx(Fn,{id:"description",value:o.description||"",onChange:w=>u("description",w.target.value),className:"mt-1",rows:3})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"parent",children:"Parent Concept"}),s.jsxs(Ve,{value:o.parent_concept_id||"none",onValueChange:w=>u("parent_concept_id",w==="none"?void 0:w),children:[s.jsx(ze,{className:"mt-1",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"none",children:"No Parent (Root Concept)"}),y.map(w=>s.jsx(le,{value:w.id,children:w.name},w.id))]})]})]})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Metadata"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"type",children:"Type"}),s.jsxs(Ve,{value:o.metadata.type||"theoretical",onValueChange:w=>h("type",w),children:[s.jsx(ze,{className:"mt-1",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"theoretical",children:"Theoretical"}),s.jsx(le,{value:"practical",children:"Practical"}),s.jsx(le,{value:"stylistic",children:"Stylistic"})]})]})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"difficulty",children:"Difficulty"}),s.jsxs(Ve,{value:o.metadata.difficulty||"beginner",onValueChange:w=>h("difficulty",w),children:[s.jsx(ze,{className:"mt-1",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"beginner",children:"Beginner"}),s.jsx(le,{value:"intermediate",children:"Intermediate"}),s.jsx(le,{value:"advanced",children:"Advanced"})]})]})]})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Prerequisites"}),s.jsxs(z,{variant:"outline",size:"sm",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Add"]})]}),b.length>0?s.jsx("div",{className:"space-y-2",children:b.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[s.jsx("span",{className:"text-sm",children:w.name}),s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(Lt,{className:"h-3 w-3"})})]},w.id))}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"No prerequisites set"})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-3",children:[o.status==="ai_suggested"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(z,{onClick:p,className:"flex-1",variant:"default",children:[s.jsx(pn,{className:"h-4 w-4 mr-2"}),"Approve"]}),s.jsx(z,{onClick:v,variant:"destructive",className:"flex-1",children:"Reject"})]}),s.jsxs(z,{onClick:m,disabled:!c,className:"w-full",variant:c?"default":"secondary",children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(z,{onClick:()=>{const w={...o,id:"",name:"",description:"",parent_concept_id:o.id,status:"confirmed"};console.log("Add sub-concept:",w)},variant:"outline",className:"flex-1",children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Sub-Concept"]}),s.jsx(z,{onClick:()=>i(o.id),variant:"outline",size:"default",className:"text-destructive hover:text-destructive",children:s.jsx(Ts,{className:"h-4 w-4"})})]})]})]})})};function bY(e){return yt({queryKey:["difficulty-level-labels",e||"global"],queryFn:async()=>{console.log("🔍 Fetching difficulty labels for domainId:",e);const{data:t,error:n}=await L.from("difficulty_level_labels").select("*");if(n)throw console.error("Error fetching difficulty level labels:",n),n;return console.log("🔍 Difficulty labels fetched:",t),(t??[]).sort((a,i)=>a.display_order!==i.display_order?a.display_order-i.display_order:a.level_value-i.level_value)},meta:{onError:t=>{console.error("useDifficultyLabels query error",t)}},staleTime:6e4})}const tM=({concepts:e,parentConceptId:t,domainId:n,onClose:r,onSave:a})=>{console.log("🔍 AddConceptModal props:",{parentConceptId:t,domainId:n,conceptsCount:e.length});const{data:i=[]}=bY(n),o=[{level_value:1,label:"Introductory"},{level_value:2,label:"Beginner"},{level_value:3,label:"Intermediate"},{level_value:4,label:"Advanced"},{level_value:5,label:"Expert"},{level_value:6,label:"Mastery"}],l=i.length>0?i:o,[c,d]=f.useState({name:"",description:"",parent_concept_id:t||"",difficulty_level:1,metadata:{}});f.useEffect(()=>{l.length>0&&d(g=>({...g,difficulty_level:l[0].level_value}))},[l]),f.useEffect(()=>{console.log("🔍 parentConceptId prop changed:",t),d(g=>{const b={...g,parent_concept_id:t||""};return console.log("🔍 Updated form data:",b),b})},[t]);const[u,h]=f.useState({}),m=(g,b)=>{d(w=>({...w,[g]:b})),u[g]&&h(w=>({...w,[g]:""}))},p=g=>{d(b=>({...b,difficulty_level:g}))},v=()=>{const g={};return c.name.trim()||(g.name="Concept name is required"),c.name.trim().length<3&&(g.name="Concept name must be at least 3 characters"),e.find(w=>w.name.toLowerCase()===c.name.toLowerCase().trim())&&(g.name="A concept with this name already exists"),h(g),Object.keys(g).length===0},x=g=>{if(g.preventDefault(),!v())return;if(!n){h({domain_id:"Domain ID is required"});return}const b={name:c.name.trim(),description:c.description.trim()||null,domain_id:n||"",parent_concept_id:c.parent_concept_id||null,status:"approved",generation_source:"human",source:"human",source_file_id:null,difficulty_level:c.difficulty_level,metadata:c.metadata||{}};a(b)},y=e;return s.jsx(nn,{open:!0,onOpenChange:r,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Create New Learning Concept"}),s.jsx(Tn,{children:"Add a new concept to your curriculum. You can organize it under a parent concept or create it as a root concept."})]}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"concept-name",children:"Concept Name *"}),s.jsx(pe,{id:"concept-name",value:c.name,onChange:g=>m("name",g.target.value),className:`mt-1 ${u.name?"border-destructive":""}`,placeholder:"e.g., Major Scales, Chord Progressions"}),u.name&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:u.name})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"concept-description",children:"Description"}),s.jsx(Fn,{id:"concept-description",value:c.description,onChange:g=>m("description",g.target.value),className:"mt-1",placeholder:"Describe what this concept covers...",rows:3})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"parent-concept",children:"Parent Concept"}),s.jsxs(Ve,{value:c.parent_concept_id,onValueChange:g=>m("parent_concept_id",g==="none"?"":g),children:[s.jsx(ze,{className:"mt-1",children:s.jsx(qe,{placeholder:"Select parent concept (optional)"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"none",children:"No Parent (Root Concept)"}),y.map(g=>s.jsx(le,{value:g.id,children:g.name},g.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"concept-difficulty",children:"Difficulty"}),s.jsxs(Ve,{value:c.difficulty_level.toString(),onValueChange:g=>p(parseInt(g)),children:[s.jsx(ze,{className:"mt-1",children:s.jsx(qe,{})}),s.jsx(Ue,{children:l.map(g=>s.jsx(le,{value:g.level_value.toString(),children:g.label},g.level_value))})]})]}),s.jsxs(Ui,{children:[s.jsx(z,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),s.jsx(z,{type:"submit",children:"Create Concept"})]})]})]})})},wY=dl("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ot=f.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:ne(wY({variant:t}),e),...n}));Ot.displayName="Alert";const mc=f.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:ne("mb-1 font-medium leading-none tracking-tight",e),...t}));mc.displayName="AlertTitle";const Ut=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ne("text-sm [&_p]:leading-relaxed",e),...t}));Ut.displayName="AlertDescription";function jY(e,t=[]){let n=[];function r(i,o){const l=f.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:p,...v}=h,x=(m==null?void 0:m[e][c])||l,y=f.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:y,children:p})}function u(h,m){const p=(m==null?void 0:m[e][c])||l,v=f.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,NY(a,...t)]}function NY(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var Vj="Progress",qj=100,[SY,ide]=jY(Vj),[_Y,CY]=SY(Vj),nM=f.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=kY,...o}=e;(a||a===0)&&!PC(a)&&console.error(EY(`${a}`,"Progress"));const l=PC(a)?a:qj;r!==null&&!IC(r,l)&&console.error(TY(`${r}`,"Progress"));const c=IC(r,l)?r:null,d=op(c)?i(c,l):void 0;return s.jsx(_Y,{scope:n,value:c,max:l,children:s.jsx(_e.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":op(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":aM(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});nM.displayName=Vj;var sM="ProgressIndicator",rM=f.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=CY(sM,n);return s.jsx(_e.div,{"data-state":aM(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});rM.displayName=sM;function kY(e,t){return`${Math.round(e/t*100)}%`}function aM(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function op(e){return typeof e=="number"}function PC(e){return op(e)&&!isNaN(e)&&e>0}function IC(e,t){return op(e)&&!isNaN(e)&&e<=t&&e>=0}function EY(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qj}\`.`}function TY(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var iM=nM,AY=rM;const Br=f.forwardRef(({className:e,value:t,...n},r)=>s.jsx(iM,{ref:r,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:s.jsx(AY,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Br.displayName=iM.displayName;var oM={exports:{}},PY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",IY=PY,DY=IY;function lM(){}function cM(){}cM.resetWarningCache=lM;var RY=function(){function e(r,a,i,o,l,c){if(c!==DY){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cM,resetWarningCache:lM};return n.PropTypes=n,n};oM.exports=RY();var MY=oM.exports;const jt=il(MY),LY=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Gc(e,t,n){const r=OY(e),{webkitRelativePath:a}=e,i=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof r.path!="string"&&DC(r,"path",i),DC(r,"relativePath",i),r}function OY(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const r=t.split(".").pop().toLowerCase(),a=LY.get(r);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function DC(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const FY=[".DS_Store","Thumbs.db"];function $Y(e){return ml(this,void 0,void 0,function*(){return lp(e)&&zY(e.dataTransfer)?qY(e.dataTransfer,e.type):UY(e)?BY(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?VY(e):[]})}function zY(e){return lp(e)}function UY(e){return lp(e)&&lp(e.target)}function lp(e){return typeof e=="object"&&e!==null}function BY(e){return q0(e.target.files).map(t=>Gc(t))}function VY(e){return ml(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>Gc(n))})}function qY(e,t){return ml(this,void 0,void 0,function*(){if(e.items){const n=q0(e.items).filter(a=>a.kind==="file");if(t!=="drop")return n;const r=yield Promise.all(n.map(WY));return RC(dM(r))}return RC(q0(e.files).map(n=>Gc(n)))})}function RC(e){return e.filter(t=>FY.indexOf(t.name)===-1)}function q0(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function WY(e){if(typeof e.webkitGetAsEntry!="function")return MC(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?uM(t):MC(e,t)}function dM(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?dM(n):[n]],[])}function MC(e,t){return ml(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const i=yield e.getAsFileSystemHandle();if(i===null)throw new Error(`${e} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,Gc(o)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return Gc(r,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function HY(e){return ml(this,void 0,void 0,function*(){return e.isDirectory?uM(e):GY(e)})}function uM(e){const t=e.createReader();return new Promise((n,r)=>{const a=[];function i(){t.readEntries(o=>ml(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(HY));a.push(l),i()}else try{const l=yield Promise.all(a);n(l)}catch(l){r(l)}}),o=>{r(o)})}i()})}function GY(e){return ml(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(r=>{const a=Gc(r,e.fullPath);t(a)},r=>{n(r)})})})}var Xg=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):a===l})}return!0};function LC(e){return YY(e)||QY(e)||mM(e)||KY()}function KY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YY(e){if(Array.isArray(e))return W0(e)}function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){hM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xu(e,t){return ZY(e)||JY(e,t)||mM(e,t)||XY()}function XY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mM(e,t){if(e){if(typeof e=="string")return W0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W0(e,t)}}function W0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,l;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw l}}return r}}function ZY(e){if(Array.isArray(e))return e}var eX=typeof Xg=="function"?Xg:Xg.default,tX="file-invalid-type",nX="file-too-large",sX="file-too-small",rX="too-many-files",aX=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:tX,message:"File type must be ".concat(r)}},$C=function(t){return{code:nX,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},zC=function(t){return{code:sX,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},iX={code:rX,message:"Too many files"};function fM(e,t){var n=e.type==="application/x-moz-file"||eX(e,t);return[n,n?null:aX(t)]}function pM(e,t,n){if(bo(e.size))if(bo(t)&&bo(n)){if(e.size>n)return[!1,$C(n)];if(e.size<t)return[!1,zC(t)]}else{if(bo(t)&&e.size<t)return[!1,zC(t)];if(bo(n)&&e.size>n)return[!1,$C(n)]}return[!0,null]}function bo(e){return e!=null}function oX(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,i=e.multiple,o=e.maxFiles,l=e.validator;return!i&&t.length>1||i&&o>=1&&t.length>o?!1:t.every(function(c){var d=fM(c,n),u=Xu(d,1),h=u[0],m=pM(c,r,a),p=Xu(m,1),v=p[0],x=l?l(c):null;return h&&v&&!x})}function cp(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function km(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function UC(e){e.preventDefault()}function lX(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function cX(e){return e.indexOf("Edge/")!==-1}function dX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return lX(e)||cX(e)}function Xr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t.some(function(l){return!cp(r)&&l&&l.apply(void 0,[r].concat(i)),cp(r)})}}function uX(){return"showOpenFilePicker"in window}function hX(e){if(bo(e)){var t=Object.entries(e).filter(function(n){var r=Xu(n,2),a=r[0],i=r[1],o=!0;return xM(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(gM))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var a=Xu(r,2),i=a[0],o=a[1];return FC(FC({},n),{},hM({},i,o))},{});return[{description:"Files",accept:t}]}return e}function mX(e){if(bo(e))return Object.entries(e).reduce(function(t,n){var r=Xu(n,2),a=r[0],i=r[1];return[].concat(LC(t),[a],LC(i))},[]).filter(function(t){return xM(t)||gM(t)}).join(",")}function fX(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function pX(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function xM(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function gM(e){return/^.*\.[\w]+$/.test(e)}var xX=["children"],gX=["open"],vX=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],yX=["refKey","onChange","onClick"];function bX(e){return NX(e)||jX(e)||vM(e)||wX()}function wX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NX(e){if(Array.isArray(e))return H0(e)}function Jg(e,t){return CX(e)||_X(e,t)||vM(e,t)||SX()}function SX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vM(e,t){if(e){if(typeof e=="string")return H0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H0(e,t)}}function H0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _X(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,l;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw l}}return r}}function CX(e){if(Array.isArray(e))return e}function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(n),!0).forEach(function(r){G0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dp(e,t){if(e==null)return{};var n=kX(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kX(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Wj=f.forwardRef(function(e,t){var n=e.children,r=dp(e,xX),a=jx(r),i=a.open,o=dp(a,gX);return f.useImperativeHandle(t,function(){return{open:i}},[i]),ge.createElement(f.Fragment,null,n(Vt(Vt({},o),{},{open:i})))});Wj.displayName="Dropzone";var yM={disabled:!1,getFilesFromEvent:$Y,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Wj.defaultProps=yM;Wj.propTypes={children:jt.func,accept:jt.objectOf(jt.arrayOf(jt.string)),multiple:jt.bool,preventDropOnDocument:jt.bool,noClick:jt.bool,noKeyboard:jt.bool,noDrag:jt.bool,noDragEventsBubbling:jt.bool,minSize:jt.number,maxSize:jt.number,maxFiles:jt.number,disabled:jt.bool,getFilesFromEvent:jt.func,onFileDialogCancel:jt.func,onFileDialogOpen:jt.func,useFsAccessApi:jt.bool,autoFocus:jt.bool,onDragEnter:jt.func,onDragLeave:jt.func,onDragOver:jt.func,onDrop:jt.func,onDropAccepted:jt.func,onDropRejected:jt.func,onError:jt.func,validator:jt.func};var K0={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function jx(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Vt(Vt({},yM),e),n=t.accept,r=t.disabled,a=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,u=t.onDragLeave,h=t.onDragOver,m=t.onDrop,p=t.onDropAccepted,v=t.onDropRejected,x=t.onFileDialogCancel,y=t.onFileDialogOpen,g=t.useFsAccessApi,b=t.autoFocus,w=t.preventDropOnDocument,C=t.noClick,_=t.noKeyboard,S=t.noDrag,N=t.noDragEventsBubbling,j=t.onError,k=t.validator,T=f.useMemo(function(){return mX(n)},[n]),A=f.useMemo(function(){return hX(n)},[n]),R=f.useMemo(function(){return typeof y=="function"?y:VC},[y]),F=f.useMemo(function(){return typeof x=="function"?x:VC},[x]),O=f.useRef(null),U=f.useRef(null),M=f.useReducer(EX,K0),B=Jg(M,2),D=B[0],E=B[1],I=D.isFocused,q=D.isFileDialogActive,$=f.useRef(typeof window<"u"&&window.isSecureContext&&g&&uX()),P=function(){!$.current&&q&&setTimeout(function(){if(U.current){var Ne=U.current.files;Ne.length||(E({type:"closeDialog"}),F())}},300)};f.useEffect(function(){return window.addEventListener("focus",P,!1),function(){window.removeEventListener("focus",P,!1)}},[U,q,F,$]);var Z=f.useRef([]),ee=function(Ne){O.current&&O.current.contains(Ne.target)||(Ne.preventDefault(),Z.current=[])};f.useEffect(function(){return w&&(document.addEventListener("dragover",UC,!1),document.addEventListener("drop",ee,!1)),function(){w&&(document.removeEventListener("dragover",UC),document.removeEventListener("drop",ee))}},[O,w]),f.useEffect(function(){return!r&&b&&O.current&&O.current.focus(),function(){}},[O,b,r]);var J=f.useCallback(function(de){j?j(de):console.error(de)},[j]),te=f.useCallback(function(de){de.preventDefault(),de.persist(),vt(de),Z.current=[].concat(bX(Z.current),[de.target]),km(de)&&Promise.resolve(a(de)).then(function(Ne){if(!(cp(de)&&!N)){var K=Ne.length,ae=K>0&&oX({files:Ne,accept:T,minSize:o,maxSize:i,multiple:l,maxFiles:c,validator:k}),ye=K>0&&!ae;E({isDragAccept:ae,isDragReject:ye,isDragActive:!0,type:"setDraggedFiles"}),d&&d(de)}}).catch(function(Ne){return J(Ne)})},[a,d,J,N,T,o,i,l,c,k]),ie=f.useCallback(function(de){de.preventDefault(),de.persist(),vt(de);var Ne=km(de);if(Ne&&de.dataTransfer)try{de.dataTransfer.dropEffect="copy"}catch{}return Ne&&h&&h(de),!1},[h,N]),ce=f.useCallback(function(de){de.preventDefault(),de.persist(),vt(de);var Ne=Z.current.filter(function(ae){return O.current&&O.current.contains(ae)}),K=Ne.indexOf(de.target);K!==-1&&Ne.splice(K,1),Z.current=Ne,!(Ne.length>0)&&(E({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),km(de)&&u&&u(de))},[O,u,N]),ve=f.useCallback(function(de,Ne){var K=[],ae=[];de.forEach(function(ye){var Re=fM(ye,T),Ge=Jg(Re,2),se=Ge[0],De=Ge[1],it=pM(ye,o,i),Jt=Jg(it,2),rn=Jt[0],mt=Jt[1],zn=k?k(ye):null;if(se&&rn&&!zn)K.push(ye);else{var Te=[De,mt];zn&&(Te=Te.concat(zn)),ae.push({file:ye,errors:Te.filter(function(re){return re})})}}),(!l&&K.length>1||l&&c>=1&&K.length>c)&&(K.forEach(function(ye){ae.push({file:ye,errors:[iX]})}),K.splice(0)),E({acceptedFiles:K,fileRejections:ae,isDragReject:ae.length>0,type:"setFiles"}),m&&m(K,ae,Ne),ae.length>0&&v&&v(ae,Ne),K.length>0&&p&&p(K,Ne)},[E,l,T,o,i,c,m,p,v,k]),me=f.useCallback(function(de){de.preventDefault(),de.persist(),vt(de),Z.current=[],km(de)&&Promise.resolve(a(de)).then(function(Ne){cp(de)&&!N||ve(Ne,de)}).catch(function(Ne){return J(Ne)}),E({type:"reset"})},[a,ve,J,N]),je=f.useCallback(function(){if($.current){E({type:"openDialog"}),R();var de={multiple:l,types:A};window.showOpenFilePicker(de).then(function(Ne){return a(Ne)}).then(function(Ne){ve(Ne,null),E({type:"closeDialog"})}).catch(function(Ne){fX(Ne)?(F(Ne),E({type:"closeDialog"})):pX(Ne)?($.current=!1,U.current?(U.current.value=null,U.current.click()):J(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):J(Ne)});return}U.current&&(E({type:"openDialog"}),R(),U.current.value=null,U.current.click())},[E,R,F,g,ve,J,A,l]),Ye=f.useCallback(function(de){!O.current||!O.current.isEqualNode(de.target)||(de.key===" "||de.key==="Enter"||de.keyCode===32||de.keyCode===13)&&(de.preventDefault(),je())},[O,je]),Oe=f.useCallback(function(){E({type:"focus"})},[]),Fe=f.useCallback(function(){E({type:"blur"})},[]),Ie=f.useCallback(function(){C||(dX()?setTimeout(je,0):je())},[C,je]),ct=function(Ne){return r?null:Ne},Me=function(Ne){return _?null:ct(Ne)},Le=function(Ne){return S?null:ct(Ne)},vt=function(Ne){N&&Ne.stopPropagation()},$n=f.useMemo(function(){return function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ne=de.refKey,K=Ne===void 0?"ref":Ne,ae=de.role,ye=de.onKeyDown,Re=de.onFocus,Ge=de.onBlur,se=de.onClick,De=de.onDragEnter,it=de.onDragOver,Jt=de.onDragLeave,rn=de.onDrop,mt=dp(de,vX);return Vt(Vt(G0({onKeyDown:Me(Xr(ye,Ye)),onFocus:Me(Xr(Re,Oe)),onBlur:Me(Xr(Ge,Fe)),onClick:ct(Xr(se,Ie)),onDragEnter:Le(Xr(De,te)),onDragOver:Le(Xr(it,ie)),onDragLeave:Le(Xr(Jt,ce)),onDrop:Le(Xr(rn,me)),role:typeof ae=="string"&&ae!==""?ae:"presentation"},K,O),!r&&!_?{tabIndex:0}:{}),mt)}},[O,Ye,Oe,Fe,Ie,te,ie,ce,me,_,S,r]),wt=f.useCallback(function(de){de.stopPropagation()},[]),gn=f.useMemo(function(){return function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ne=de.refKey,K=Ne===void 0?"ref":Ne,ae=de.onChange,ye=de.onClick,Re=dp(de,yX),Ge=G0({accept:T,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ct(Xr(ae,me)),onClick:ct(Xr(ye,wt)),tabIndex:-1},K,U);return Vt(Vt({},Ge),Re)}},[U,n,l,me,r]);return Vt(Vt({},D),{},{isFocused:I&&!r,getRootProps:$n,getInputProps:gn,rootRef:O,inputRef:U,open:ct(je)})}function EX(e,t){switch(t.type){case"focus":return Vt(Vt({},e),{},{isFocused:!0});case"blur":return Vt(Vt({},e),{},{isFocused:!1});case"openDialog":return Vt(Vt({},K0),{},{isFileDialogActive:!0});case"closeDialog":return Vt(Vt({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Vt(Vt({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Vt(Vt({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Vt({},K0);default:return e}}function VC(){}const TX=e=>e.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),bM=(e,t=50)=>{const n=t*1024*1024;return e.size>n?{isValid:!1,error:`File size exceeds ${t}MB limit`}:e.name?["application/pdf","text/plain","text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","image/jpeg","image/png","image/gif","audio/mpeg","audio/wav","video/mp4","video/avi"].includes(e.type)?{isValid:!0}:{isValid:!1,error:"File type not supported"}:{isValid:!1,error:"File must have a name"}},up=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]},wM=e=>yt({queryKey:["file-uploads",e],queryFn:async()=>{let t=L.from("file_uploads").select("*").order("uploaded_at",{ascending:!1});e&&(t=t.eq("domain_id",e));const{data:n,error:r}=await t;if(r)throw r;return n},enabled:!!e}),Nx=()=>{const[e,t]=f.useState({}),{toast:n}=at(),r=Nn(),a=En({mutationFn:async({files:i,domainId:o,domainName:l})=>{const c=[],d=TX(l);for(const u of i){const h=`${u.name}-${Date.now()}`;try{const m=bM(u);if(!m.isValid)throw new Error(m.error);t(b=>({...b,[h]:{file:u,progress:0,status:"uploading"}}));const{data:{session:p}}=await L.auth.getSession();if(!p)throw new Error("No authentication session found");console.log("🔍 useFileUpload - About to upload:",{fileName:u.name,domainSlug:d});const v=new FormData;v.append("file",u),v.append("domainId",o),v.append("domainSlug",d);const{data:x,error:y}=await L.functions.invoke("generic-upload",{body:v,headers:{Authorization:`Bearer ${p.access_token}`}});if(y)throw y;if(!x.success)throw new Error(x.error||"Upload failed");console.log("File uploaded successfully:",{fileName:u.name,gcsPath:x.gcsPath,responsePath:x.storagePath});const g=x;t(b=>({...b,[h]:{file:u,progress:100,status:"completed"}})),c.push(g.upload)}catch(m){throw console.error(`Error uploading ${u.name}:`,m),t(p=>({...p,[h]:{file:u,progress:0,status:"error",error:m.message}})),m}}return c},onSuccess:i=>{n({title:"Upload Successful",description:`${i.length} file(s) uploaded successfully`}),r.invalidateQueries({queryKey:["file-uploads"]}),setTimeout(()=>{t({})},3e3)},onError:i=>{n({title:"Upload Failed",description:i.message,variant:"destructive"})}});return{uploadFiles:a.mutate,isUploading:a.isPending,uploadProgress:e,clearProgress:()=>t({})}},AX=()=>{const{toast:e}=at(),t=Nn();return En({mutationFn:async n=>{const{error:r}=await L.from("file_uploads").delete().eq("id",n);if(r)throw r},onSuccess:()=>{e({title:"File Deleted",description:"File upload record has been deleted"}),t.invalidateQueries({queryKey:["file-uploads"]})},onError:n=>{e({title:"Delete Failed",description:n.message,variant:"destructive"})}})},PX=({domainId:e,domainName:t,onUploadComplete:n})=>{const[r,a]=f.useState([]),{uploadFiles:i,isUploading:o,uploadProgress:l}=Nx(),c=ge.useCallback(g=>{const b=[],w=[];g.forEach(C=>{const _=bM(C);_.isValid?b.push(C):w.push(`${C.name}: ${_.error}`)}),w.length>0&&console.error("File validation errors:",w),a(b)},[]),{getRootProps:d,getInputProps:u,isDragActive:h,fileRejections:m}=jx({onDrop:c,disabled:o,maxSize:50*1024*1024,accept:{"application/pdf":[".pdf"],"text/plain":[".txt"],"text/csv":[".csv"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"audio/mpeg":[".mp3"],"audio/wav":[".wav"],"video/mp4":[".mp4"]}}),p=async()=>{if(r.length!==0)try{await i({files:r,domainId:e,domainName:t}),a([]),n==null||n()}catch(g){console.error("Upload failed:",g)}},v=g=>{a(b=>b.filter((w,C)=>C!==g))},x=Object.entries(l),y=x.length>0;return s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center space-x-2",children:[s.jsx(On,{className:"h-5 w-5"}),s.jsx("span",{children:"Upload Training Materials"})]}),s.jsxs(we,{children:["Upload files to enhance AI training for the ",s.jsx("strong",{children:t})," domain. Files will be automatically processed and integrated into the learning system."]})]}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{...d(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-200 ${h?"border-primary bg-primary/5":o?"border-muted bg-muted/20 pointer-events-none opacity-50":"border-border hover:border-primary/50 hover:bg-muted/20"}`,children:[s.jsx("input",{...u()}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(On,{className:`mx-auto h-8 w-8 ${h?"text-primary":"text-muted-foreground"}`}),h?s.jsx("p",{className:"text-primary font-medium",children:"Drop your files here..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium",children:"Drag & drop files here, or click to select"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"PDF, Word, Excel, images, audio, and video files accepted (max 50MB)"})]})]})]}),m.length>0&&s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:s.jsx("div",{className:"space-y-1",children:m.map(({file:g,errors:b})=>{var w;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("strong",{children:[g.name,":"]})," ",(w=b[0])==null?void 0:w.message]},g.name)})})})]}),r.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-medium",children:["Selected Files (",r.length,")"]}),s.jsx("div",{className:"space-y-2",children:r.map((g,b)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(Es,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium truncate",children:g.name}),s.jsx(X,{variant:"outline",className:"text-xs",children:up(g.size)})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>v(b),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:s.jsx(Lt,{className:"h-3 w-3"})})]},b))}),s.jsx(z,{onClick:p,disabled:o||r.length===0,className:"w-full",children:o?"Uploading...":`Upload ${r.length} File${r.length!==1?"s":""}`})]}),y&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Upload Progress"}),x.map(([g,b])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx("span",{className:"text-sm truncate",children:b.file.name}),s.jsxs(X,{variant:b.status==="completed"?"default":b.status==="error"?"destructive":"secondary",children:[b.status==="completed"&&s.jsx(Lf,{className:"h-3 w-3 mr-1"}),b.status]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:up(b.file.size)})]}),b.status==="uploading"&&s.jsx(Br,{value:b.progress,className:"h-2"}),b.error&&s.jsx("p",{className:"text-xs text-destructive",children:b.error})]},g))]}),s.jsxs(Ot,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsxs(Ut,{className:"text-sm",children:[s.jsx("strong",{children:"How it works:"})," Your uploaded files will be processed by our AI system to enhance teaching recommendations and generate domain-specific content for the ",t," subject area."]})]})]})]})},IX=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),{toast:a}=at(),i=async()=>{try{r(!0);const{data:o,error:l}=await L.from("teacher_domains").select(`
          *,
          domain:domains(*)
        `).order("selected_at",{ascending:!1});if(l)throw l;t(o||[])}catch(o){console.error("Error fetching teacher domains:",o),a({title:"Error",description:"Failed to fetch your domain selections",variant:"destructive"})}finally{r(!1)}};return f.useEffect(()=>{i()},[]),{teacherDomains:e,loading:n,refetch:i}},DX=()=>{var N;const[e,t]=f.useState("learning-concepts"),[n,r]=f.useState(null),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(""),[u,h]=f.useState("all"),{teacherDomains:m,loading:p}=IX(),v=(N=m[0])==null?void 0:N.domain,{data:x=[],isLoading:y,refetch:g}=wM(v==null?void 0:v.id),b=[{id:"1",name:"Basic Music Theory",description:"Fundamental concepts of music including notes, scales, and intervals",domain_id:"music",status:"confirmed",metadata:{type:"theoretical",difficulty:"beginner"},teacher_id:"teacher-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",name:"Major Scales",description:"Understanding major scale patterns and construction",domain_id:"music",parent_concept_id:"1",status:"confirmed",metadata:{type:"theoretical",difficulty:"beginner"},teacher_id:"teacher-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",name:"Chord Progressions",description:"Common chord progressions and their applications",domain_id:"music",parent_concept_id:"2",status:"ai_suggested",metadata:{type:"practical",difficulty:"intermediate"},teacher_id:"teacher-1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],w=b.filter(j=>j.status==="ai_suggested").length,C=j=>{r(j),i(!0)},_=()=>{i(!1),r(null)},S=()=>{l(!0)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b bg-card",children:s.jsx("div",{className:"container mx-auto px-6 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Set Up Your Curriculum"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Design and organize your teaching concepts and learning paths"})]}),s.jsx(X,{variant:"outline",className:"text-sm",children:v?v.name:p?"Loading...":"No Domain Selected"})]})})}),s.jsx("div",{className:"container mx-auto px-6 py-6",children:s.jsxs(Qr,{value:e,onValueChange:t,className:"w-full",children:[s.jsxs(wr,{className:"grid w-full grid-cols-4",children:[s.jsx(Je,{value:"training-data",children:"Training Data"}),s.jsx(Je,{value:"learning-concepts",children:"Learning Concepts"}),s.jsx(Je,{value:"learning-paths",children:"Learning Paths"}),s.jsx(Je,{value:"assessments",children:"Assessments"})]}),s.jsx(Ze,{value:"training-data",className:"mt-6",children:s.jsx("div",{className:"space-y-6",children:v?s.jsxs(s.Fragment,{children:[s.jsx(PX,{domainId:v.id,domainName:v.name,onUploadComplete:g}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center space-x-2",children:[s.jsx(On,{className:"h-5 w-5"}),s.jsx("span",{children:"Your Training Materials"})]}),s.jsxs(we,{children:["Files you've uploaded for the ",v.name," domain"]})]}),s.jsx(W,{children:y?s.jsx("p",{className:"text-muted-foreground",children:"Loading your files..."}):x.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(On,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No files uploaded yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload your first training materials to get started"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm font-medium",children:[x.length," file",x.length!==1?"s":""," uploaded"]}),s.jsxs(X,{variant:"secondary",children:["Total: ",x.reduce((j,k)=>j+k.file_size,0)>0&&Math.round(x.reduce((j,k)=>j+k.file_size,0)/1024/1024*100)/100," MB"]})]}),s.jsxs("div",{className:"grid gap-2",children:[x.slice(0,5).map(j=>{var k,T,A,R;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-lg",children:(k=j.mime_type)!=null&&k.includes("pdf")?"📄":(T=j.mime_type)!=null&&T.includes("image")?"🖼️":(A=j.mime_type)!=null&&A.includes("audio")?"🎵":(R=j.mime_type)!=null&&R.includes("video")?"🎥":"📎"}),s.jsx("span",{className:"text-sm font-medium truncate max-w-[200px]",children:j.file_name})]}),s.jsxs(X,{variant:"outline",className:"text-xs",children:[Math.round(j.file_size/1024)," KB"]})]},j.id)}),x.length>5&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-2",children:["...and ",x.length-5," more files"]})]})]})})]})]}):s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center space-x-2",children:[s.jsx(I$,{className:"h-5 w-5"}),s.jsx("span",{children:"Select a Domain First"})]}),s.jsx(we,{children:"You need to select a teaching domain before you can upload training materials."})]}),s.jsx(W,{children:s.jsx(z,{onClick:()=>window.open("/teacher/domain-selection","_self"),className:"w-full sm:w-auto",children:"Go to Domain Selection"})})]})})}),s.jsx(Ze,{value:"learning-concepts",className:"mt-6",children:s.jsxs("div",{className:"space-y-6",children:[w>0&&s.jsx(V,{className:"border-accent bg-accent/10",children:s.jsxs(W,{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:"secondary",children:w}),s.jsx("span",{className:"text-sm text-foreground",children:"new AI-suggested concepts to review"})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>h("ai_suggested"),children:"Review Now"})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(pe,{placeholder:"Search concepts...",value:c,onChange:j=>d(j.target.value),className:"pl-10 w-64"})]}),s.jsxs(Ve,{value:u,onValueChange:h,children:[s.jsxs(ze,{className:"w-48",children:[s.jsx(bw,{className:"h-4 w-4 mr-2"}),s.jsx(qe,{})]}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Concepts"}),s.jsx(le,{value:"confirmed",children:"Confirmed Concepts"}),s.jsx(le,{value:"ai_suggested",children:"AI Suggested (Pending)"})]})]})]}),s.jsxs(z,{onClick:S,children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Custom Concept"]})]}),s.jsxs(V,{className:"min-h-[600px]",children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Learning Concepts"}),s.jsx(we,{children:"Manage and organize your concepts hierarchy. Click on concepts to edit, use actions to approve or reject AI suggestions."})]}),s.jsx(W,{className:"p-6",children:s.jsx(JR,{concepts:b,onConceptClick:C,adminMode:!1})})]})]})}),s.jsx(Ze,{value:"learning-paths",className:"mt-6",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Learning Paths"}),s.jsx(we,{children:"Create structured learning sequences and progression paths"})]}),s.jsx(W,{children:s.jsx("p",{className:"text-muted-foreground",children:"Learning Paths feature coming soon..."})})]})}),s.jsx(Ze,{value:"assessments",className:"mt-6",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Assessments"}),s.jsx(we,{children:"Design quizzes, exercises, and evaluation criteria"})]}),s.jsx(W,{children:s.jsx("p",{className:"text-muted-foreground",children:"Assessments feature coming soon..."})})]})})]})}),a&&n&&s.jsx(yY,{concept:n,concepts:b,prerequisites:[],onClose:_,onSave:j=>{console.log("Save concept:",j),_()},onDelete:j=>{console.log("Delete concept:",j),_()}}),o&&s.jsx(tM,{concepts:b,domainId:v==null?void 0:v.id,onClose:()=>l(!1),onSave:j=>{console.log("Create concept:",j),l(!1)}})]})},Hj=()=>{var o,l,c;const{user:e}=dn(),{data:t,isLoading:n}=yt({queryKey:["user-tenants",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:d,error:u}=await L.from("user_tenants").select(`
          tenant_id,
          role_id,
          status,
          is_primary,
          tenant:tenants(
            id,
            name,
            slug,
            description,
            status,
            subscription_tier
          ),
          role:user_roles(
            name,
            display_name
          )
        `).eq("user_id",e.id).eq("status","active").order("is_primary",{ascending:!1});if(u)throw u;return(d==null?void 0:d.map(h=>{var m;return{tenant_id:h.tenant_id,role_name:((m=h.role)==null?void 0:m.name)||"unknown",status:h.status,is_primary:h.is_primary,tenant:h.tenant}}))||[]},enabled:!!(e!=null&&e.id),staleTime:5*60*1e3}),r=((o=t==null?void 0:t[0])==null?void 0:o.tenant)||null,a=((l=t==null?void 0:t[0])==null?void 0:l.role_name)||null,i=((c=t==null?void 0:t[0])==null?void 0:c.is_primary)||!1;return{userTenants:t||[],currentTenant:r,currentTenantRole:a,isPrimaryTenant:i,isLoading:n,hasMultipleTenants:((t==null?void 0:t.length)||0)>1}},RX=5*60*1e3,Zg=new Map,jM=()=>{const{user:e}=dn(),{currentTenant:t}=Hj(),[n,r]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),c=f.useCallback(()=>`${(e==null?void 0:e.id)||"anonymous"}:${(t==null?void 0:t.id)||"no-tenant"}`,[e==null?void 0:e.id,t==null?void 0:t.id]),d=f.useCallback(x=>Date.now()-x.timestamp<RX&&x.userId===((e==null?void 0:e.id)||"anonymous")&&x.tenantId===((t==null?void 0:t.id)||null),[e==null?void 0:e.id,t==null?void 0:t.id]),u=f.useCallback(async()=>{if(!(e!=null&&e.id)){r([]),i(!1);return}try{i(!0),l(null);const x=c(),y=Zg.get(x);if(y&&d(y)){r(y.permissions),i(!1);return}const{data:g,error:b}=await L.rpc("get_user_permissions",{p_tenant_id:(t==null?void 0:t.id)||null});if(b)throw new Error(`Failed to load permissions: ${b.message}`);const w=g||[];Zg.set(x,{permissions:w,timestamp:Date.now(),userId:e.id,tenantId:(t==null?void 0:t.id)||null}),r(w)}catch(x){console.error("Error loading permissions:",x),l(x instanceof Error?x.message:"Unknown error"),r([])}finally{i(!1)}},[e==null?void 0:e.id,t==null?void 0:t.id,c,d]),h=f.useCallback((x,y="read")=>e!=null&&e.id?n.some(g=>g.role_name==="platform_admin")?!0:n.some(g=>g.expires_at&&new Date(g.expires_at)<new Date?!1:g.resource_key===x&&g.actions.includes(y)):!1,[e==null?void 0:e.id,n]),m=f.useCallback(x=>{const y={};return x.forEach(g=>{const b=`${g.resource}:${g.action||"read"}`;y[b]=h(g.resource,g.action)}),y},[h]),p=f.useCallback(x=>n.some(y=>y.role_name===x),[n]),v=f.useCallback(async()=>{const x=c();Zg.delete(x),await u()},[c,u]);return f.useEffect(()=>{u()},[u]),{permissions:n,checkPermission:h,checkBatchPermissions:m,hasRole:p,refreshPermissions:v,loading:a,error:o}},MX=(e,t="read")=>{const{checkPermission:n,loading:r}=jM();return{allowed:n(e,t),loading:r}},gd=({resource:e,action:t="read",fallback:n=null,showFallback:r=!0,children:a})=>{const{allowed:i,loading:o}=MX(e,t);return o?s.jsx("div",{className:"flex items-center justify-center p-4",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):i?s.jsx(s.Fragment,{children:a}):r?n||s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ha,{className:"h-4 w-4"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Access Denied"}),s.jsx("p",{className:"text-sm",children:"You don't have permission to access this resource."})]})]})}):null},LX=()=>{const{permissions:e,loading:t,error:n}=jM();return t?s.jsx("div",{children:"Loading permissions..."}):n?s.jsxs("div",{children:["Error loading permissions: ",n]}):s.jsxs("div",{className:"p-4 bg-gray-100 rounded border",children:[s.jsx("h3",{className:"font-bold mb-2",children:"Debug: Current User Permissions"}),s.jsx("div",{className:"space-y-2 text-sm",children:e.length===0?s.jsx("p",{children:"No permissions found"}):e.map((r,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-mono bg-gray-200 px-1 rounded",children:r.resource_key}),s.jsxs("span",{className:"text-gray-600",children:["[",r.actions.join(", "),"]"]}),s.jsxs("span",{className:"text-blue-600",children:["(",r.role_name,")"]})]},a))})]})},OX=()=>{const e=pt(),t={totalStudents:24,activeCourses:3,upcomingLessons:5,completedLessons:42},n=[{type:"lesson",title:"Piano Fundamentals - Lesson 3",time:"2 hours ago"},{type:"assessment",title:"Music Theory Quiz completed",time:"1 day ago"},{type:"concept",title:"Added new concept: Chord Progressions",time:"2 days ago"}],r=[{title:"Set Up Curriculum",description:"Create and organize your teaching concepts",action:()=>e("/teacher/settings/curriculum-setup"),icon:rt},{title:"Select Domains",description:"Choose your teaching specializations",action:()=>e("/teacher/domain-selection"),icon:Us}];return s.jsx(gd,{resource:"page:teacher_dashboard",action:"read",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Welcome back!"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Here's an overview of your teaching activities"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Students"}),s.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.totalStudents}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Active Courses"}),s.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.activeCourses}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Across 2 domains"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Upcoming Lessons"}),s.jsx(kn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.upcomingLessons}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Completed Lessons"}),s.jsx(Us,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.completedLessons}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12 from last month"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Quick Actions"}),s.jsx(we,{children:"Get started with setting up your teaching environment"})]}),s.jsx(W,{className:"space-y-3",children:r.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(a.icon,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:a.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]})]}),s.jsx(z,{onClick:a.action,variant:"outline",size:"sm",children:"Go"})]},i))})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Recent Activity"}),s.jsx(we,{children:"Your latest teaching activities and updates"})]}),s.jsx(W,{className:"space-y-3",children:n.map((a,i)=>s.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:"outline",className:"text-xs",children:a.type}),s.jsx("h4",{className:"font-medium text-sm",children:a.title})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.time})]})},i))})]})]})]})})},FX=()=>{const e=[{title:"User Management",description:"Manage student accounts and teacher profiles",icon:et,status:"Active",items:["View all users","Manage permissions","Account settings"]},{title:"Content Management",description:"Oversee curricula, concepts, and learning materials",icon:Es,status:"Active",items:["Review curricula","Manage domains","Content approval"]},{title:"Analytics & Reports",description:"View system metrics and generate reports",icon:fh,status:"Coming Soon",items:["Usage statistics","Performance reports","Export data"]},{title:"System Security",description:"Monitor security settings and access controls",icon:sn,status:"Active",items:["Security logs","Access controls","Audit trail"]}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Administration"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage system settings, users, and monitor platform health"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,n)=>s.jsxs(V,{className:"hover:shadow-md transition-shadow",children:[s.jsxs(G,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(t.icon,{className:"h-6 w-6 text-primary"}),s.jsx(Y,{className:"text-lg",children:t.title})]}),s.jsx(X,{variant:t.status==="Active"?"default":"secondary",children:t.status})]}),s.jsx(we,{children:t.description})]}),s.jsxs(W,{children:[s.jsx("div",{className:"space-y-2 mb-4",children:t.items.map((r,a)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:r})]},a))}),s.jsx(z,{variant:t.status==="Active"?"default":"secondary",className:"w-full",disabled:t.status!=="Active",children:t.status==="Active"?"Manage":"Coming Soon"})]})]},n))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-5 w-5"}),"Page Permissions"]}),s.jsx(we,{children:"Manage role-based access control for application pages"})]}),s.jsx(W,{children:s.jsx(z,{asChild:!0,children:s.jsx(is,{to:"/admin/page-permissions",children:"Manage Permissions"})})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(xa,{className:"h-5 w-5"}),"AI Feedback Settings"]}),s.jsx(we,{children:"Configure AI training feedback loops for each domain and learning aspect"})]}),s.jsx(W,{children:s.jsx(z,{asChild:!0,children:s.jsx(is,{to:"/admin/settings/feedback",children:"Manage AI Feedback"})})})]})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center space-x-2",children:[s.jsx(kt,{className:"h-5 w-5"}),s.jsx("span",{children:"System Overview"})]}),s.jsx(we,{children:"Quick overview of platform status and key metrics"})]}),s.jsx(W,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:"156"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:"23"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Teachers"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:"4"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Learning Domains"})]})]})})]})]})};var NM="AlertDialog",[$X,ode]=es(NM,[L4]),Za=L4(),SM=e=>{const{__scopeAlertDialog:t,...n}=e,r=Za(t);return s.jsx(Zw,{...r,...n,modal:!0})};SM.displayName=NM;var zX="AlertDialogTrigger",_M=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Za(n);return s.jsx(J4,{...a,...r,ref:t})});_M.displayName=zX;var UX="AlertDialogPortal",CM=e=>{const{__scopeAlertDialog:t,...n}=e,r=Za(t);return s.jsx(ej,{...r,...n})};CM.displayName=UX;var BX="AlertDialogOverlay",kM=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Za(n);return s.jsx(Nh,{...a,...r,ref:t})});kM.displayName=BX;var fc="AlertDialogContent",[VX,qX]=$X(fc),EM=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=Za(n),o=f.useRef(null),l=He(t,o),c=f.useRef(null);return s.jsx(fq,{contentName:fc,titleName:TM,docsSlug:"alert-dialog",children:s.jsx(VX,{scope:n,cancelRef:c,children:s.jsxs(Sh,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ue(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(fw,{children:r}),s.jsx(HX,{contentRef:o})]})})})});EM.displayName=fc;var TM="AlertDialogTitle",AM=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Za(n);return s.jsx(_h,{...a,...r,ref:t})});AM.displayName=TM;var PM="AlertDialogDescription",IM=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Za(n);return s.jsx(Ch,{...a,...r,ref:t})});IM.displayName=PM;var WX="AlertDialogAction",DM=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Za(n);return s.jsx(mx,{...a,...r,ref:t})});DM.displayName=WX;var RM="AlertDialogCancel",MM=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=qX(RM,n),i=Za(n),o=He(t,a);return s.jsx(mx,{...i,...r,ref:o})});MM.displayName=RM;var HX=({contentRef:e})=>{const t=`\`${fc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fc}\` by passing a \`${PM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},GX=SM,KX=_M,QX=CM,LM=kM,OM=EM,FM=DM,$M=MM,zM=AM,UM=IM;const Sx=GX,BM=KX,YX=QX,VM=f.forwardRef(({className:e,...t},n)=>s.jsx(LM,{className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));VM.displayName=LM.displayName;const Dh=f.forwardRef(({className:e,...t},n)=>s.jsxs(YX,{children:[s.jsx(VM,{}),s.jsx(OM,{ref:n,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Dh.displayName=OM.displayName;const Rh=({className:e,...t})=>s.jsx("div",{className:ne("flex flex-col space-y-2 text-center sm:text-left",e),...t});Rh.displayName="AlertDialogHeader";const Mh=({className:e,...t})=>s.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Mh.displayName="AlertDialogFooter";const Lh=f.forwardRef(({className:e,...t},n)=>s.jsx(zM,{ref:n,className:ne("text-lg font-semibold",e),...t}));Lh.displayName=zM.displayName;const Oh=f.forwardRef(({className:e,...t},n)=>s.jsx(UM,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));Oh.displayName=UM.displayName;const Fh=f.forwardRef(({className:e,...t},n)=>s.jsx(FM,{ref:n,className:ne(tj(),e),...t}));Fh.displayName=FM.displayName;const $h=f.forwardRef(({className:e,...t},n)=>s.jsx($M,{ref:n,className:ne(tj({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));$h.displayName=$M.displayName;const As=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!0),{toast:i}=at(),o=async()=>{try{if(a(!0),e){const{data:u,error:h}=await L.from("domains").select(`
            *,
            tenant_domains!inner(
              tenant_id,
              is_active
            )
          `).eq("tenant_domains.tenant_id",e).eq("tenant_domains.is_active",!0).order("name");if(h)throw h;n(u||[])}else{const{data:u,error:h}=await L.from("domains").select("*").order("name");if(h)throw h;n(u||[])}}catch(u){console.error("Error fetching domains:",u),i({title:"Error",description:"Failed to fetch domains",variant:"destructive"})}finally{a(!1)}},l=async u=>{try{const{data:h,error:m}=await L.from("domains").insert(u).select().single();if(m)throw m;return n(p=>[...p,h]),i({title:"Success",description:"Domain created successfully"}),h}catch(h){throw console.error("Error creating domain:",h),i({title:"Error",description:"Failed to create domain",variant:"destructive"}),h}},c=async(u,h)=>{try{const{data:m,error:p}=await L.from("domains").update(h).eq("id",u).select().single();if(p)throw p;return n(v=>v.map(x=>x.id===u?m:x)),i({title:"Success",description:"Domain updated successfully"}),m}catch(m){throw console.error("Error updating domain:",m),i({title:"Error",description:"Failed to update domain",variant:"destructive"}),m}},d=async u=>{try{const{error:h}=await L.from("domains").delete().eq("id",u);if(h)throw h;n(m=>m.filter(p=>p.id!==u)),i({title:"Success",description:"Domain deleted successfully"})}catch(h){throw console.error("Error deleting domain:",h),i({title:"Error",description:"Failed to delete domain",variant:"destructive"}),h}};return f.useEffect(()=>{o()},[e]),{domains:t,loading:r,createDomain:l,updateDomain:c,deleteDomain:d,refetch:o}},XX=[{value:"Music",label:"Music"},{value:"BookOpen",label:"Book Open"},{value:"Languages",label:"Languages"},{value:"Calculator",label:"Calculator"},{value:"Mic",label:"Microphone"},{value:"Palette",label:"Palette"},{value:"Code",label:"Code"},{value:"Globe",label:"Globe"}],qC=({domain:e,open:t,onClose:n,onSubmit:r})=>{const[a,i]=f.useState({id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",icon_name:(e==null?void 0:e.icon_name)||"BookOpen"}),[o,l]=f.useState(!1),[c,d]=f.useState({}),u=()=>{const p={};return a.name.trim()?a.name.trim().length<2&&(p.name="Domain name must be at least 2 characters"):p.name="Domain name is required",a.description.trim()?a.description.trim().length<10&&(p.description="Description must be at least 10 characters"):p.description="Description is required",e||(a.id.trim()?/^[a-z0-9_-]+$/.test(a.id)||(p.id="Domain ID can only contain lowercase letters, numbers, hyphens, and underscores"):p.id="Domain ID is required"),d(p),Object.keys(p).length===0},h=async p=>{if(p.preventDefault(),!!u()){l(!0);try{await r({id:a.id.trim(),name:a.name.trim(),description:a.description.trim(),icon_name:a.icon_name}),n(),i({id:"",name:"",description:"",icon_name:"BookOpen"})}catch{}finally{l(!1)}}},m=(p,v)=>{i(x=>({...x,[p]:v})),c[p]&&d(x=>({...x,[p]:""}))};return s.jsx(nn,{open:t,onOpenChange:n,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:e?"Edit Domain":"Create New Domain"}),s.jsx(Tn,{children:e?"Update the domain information below.":"Add a new learning domain to the platform."})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"domain-id",children:"Domain ID *"}),s.jsx(pe,{id:"domain-id",value:a.id,onChange:p=>m("id",p.target.value),className:c.id?"border-destructive":"",placeholder:"e.g., music, languages, mathematics",disabled:!!e}),c.id&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:c.id}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used internally. Cannot be changed after creation."})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"domain-name",children:"Domain Name *"}),s.jsx(pe,{id:"domain-name",value:a.name,onChange:p=>m("name",p.target.value),className:c.name?"border-destructive":"",placeholder:"e.g., Music Theory, English Language"}),c.name&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:c.name})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"domain-description",children:"Description *"}),s.jsx(Fn,{id:"domain-description",value:a.description,onChange:p=>m("description",p.target.value),className:c.description?"border-destructive":"",placeholder:"Describe what this domain covers...",rows:3}),c.description&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:c.description})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"domain-icon",children:"Icon"}),s.jsxs(Ve,{value:a.icon_name,onValueChange:p=>m("icon_name",p),children:[s.jsx(ze,{children:s.jsx(qe,{})}),s.jsx(Ue,{children:XX.map(p=>s.jsx(le,{value:p.value,children:p.label},p.value))})]})]}),s.jsxs(Ui,{children:[s.jsx(z,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),s.jsx(z,{type:"submit",disabled:o,children:o?"Saving...":e?"Update Domain":"Create Domain"})]})]})]})})};function Pe({className:e,...t}){return s.jsx("div",{className:ne("animate-pulse rounded-md bg-muted",e),...t})}const JX=()=>{const{domains:e,loading:t,createDomain:n,updateDomain:r,deleteDomain:a}=As(),[i,o]=f.useState(""),[l,c]=f.useState(!1),[d,u]=f.useState(),[h,m]=f.useState(),p=e.filter(g=>g.name.toLowerCase().includes(i.toLowerCase())||xi(g.description).toLowerCase().includes(i.toLowerCase())||g.id.toLowerCase().includes(i.toLowerCase())),v=async g=>{await n(g),c(!1)},x=async g=>{d&&(await r(d.id,g),u(void 0))},y=async()=>{h&&(await a(h.id),m(void 0))};return t?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{className:"h-8 w-64"}),s.jsx(Pe,{className:"h-4 w-96"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Pe,{className:"h-10 w-full"}),s.jsx(Pe,{className:"h-64 w-full"})]})]}):s.jsx(gd,{resource:"page:domain_management",action:"admin",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Domain Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Create and manage learning domains for the platform"})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-lg",children:"Overview"})}),s.jsx(W,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:e.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Domains"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:e.filter(g=>g.name.toLowerCase().includes("test")).length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Domains"})]}),s.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:new Set(e.map(g=>g.icon_name)).size}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Unique Icons"})]})]})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Manage Domains"}),s.jsx(we,{children:"Add, edit, or remove learning domains from the platform"})]}),s.jsxs(W,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(pe,{placeholder:"Search domains...",value:i,onChange:g=>o(g.target.value),className:"pl-10"})]}),s.jsxs(z,{onClick:()=>c(!0),children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Domain"]})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"ID"}),s.jsx(Ee,{children:"Name"}),s.jsx(Ee,{children:"Description"}),s.jsx(Ee,{children:"Icon"}),s.jsx(Ee,{children:"Created"}),s.jsx(Ee,{className:"text-right",children:"Actions"})]})}),s.jsx(Qs,{children:p.length===0?s.jsx(ut,{children:s.jsx(be,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:i?"No domains found matching your search.":"No domains found."})}):p.map(g=>s.jsxs(ut,{children:[s.jsx(be,{children:s.jsx(X,{variant:"outline",className:"font-mono text-xs",children:g.id})}),s.jsx(be,{className:"font-medium",children:g.name}),s.jsx(be,{className:"max-w-xs",children:s.jsx("div",{className:"truncate",children:xi(g.description)})}),s.jsx(be,{children:s.jsx(X,{variant:"secondary",children:g.icon_name})}),s.jsx(be,{className:"text-sm text-muted-foreground",children:new Date(g.created_at).toLocaleDateString()}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:()=>u(g),children:s.jsx(ul,{className:"h-3 w-3"})}),s.jsxs(Sx,{children:[s.jsx(BM,{asChild:!0,children:s.jsx(z,{variant:"outline",size:"sm",onClick:()=>m(g),children:s.jsx(Ts,{className:"h-3 w-3 text-destructive"})})}),s.jsxs(Dh,{children:[s.jsxs(Rh,{children:[s.jsx(Lh,{children:"Delete Domain"}),s.jsxs(Oh,{children:['Are you sure you want to delete the "',g.name,'" domain? This action cannot be undone and may affect existing curricula.']})]}),s.jsxs(Mh,{children:[s.jsx($h,{children:"Cancel"}),s.jsx(Fh,{onClick:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},g.id))})]})})]})]}),s.jsx(qC,{open:l,onClose:()=>c(!1),onSubmit:v}),s.jsx(qC,{domain:d,open:!!d,onClose:()=>u(void 0),onSubmit:x})]})})},ZX=e=>{const[t,n]=f.useState({learningGoalsCount:0,conceptsCount:0,exercisesCount:0}),[r,a]=f.useState(!0),{toast:i}=at(),o=async()=>{try{a(!0);const{count:l,error:c}=await L.from("concepts").select("*",{count:"exact",head:!0}).eq("domain_id",e).in("status",["approved","suggested","confirmed"]);if(c)throw c;const{data:d,error:u}=await L.from("concepts").select("id").eq("domain_id",e);if(u)throw u;const h=(d||[]).map(v=>v.id);let m=0;if(h.length>0){const{count:v,error:x}=await L.from("learning_goals").select("*",{count:"exact",head:!0}).in("concept_id",h);if(x)throw x;m=v||0}n({learningGoalsCount:m,conceptsCount:l||0,exercisesCount:0})}catch(l){console.error("Error fetching domain stats:",l),i({title:"Error",description:"Failed to fetch domain statistics",variant:"destructive"})}finally{a(!1)}};return f.useEffect(()=>{e&&o()},[e]),{stats:t,loading:r,refetch:o}},eJ=()=>{const[e,t]=f.useState({}),[n,r]=f.useState(!0),{toast:a}=at(),i=async()=>{try{r(!0);const{data:o,error:l}=await L.from("domains").select("id");if(l)throw l;const c=(o==null?void 0:o.map(async h=>{const{count:m,error:p}=await L.from("concepts").select("*",{count:"exact",head:!0}).eq("domain_id",h.id).in("status",["approved","suggested","confirmed"]);if(p)throw p;const{data:v,error:x}=await L.from("concepts").select("id").eq("domain_id",h.id);if(x)throw x;const y=(v||[]).map(b=>b.id);let g=0;if(y.length>0){const{count:b,error:w}=await L.from("learning_goals").select("*",{count:"exact",head:!0}).in("concept_id",y);if(w)throw w;g=b||0}return{domainId:h.id,stats:{learningGoalsCount:g,conceptsCount:m||0,exercisesCount:0}}}))||[],u=(await Promise.all(c)).reduce((h,m)=>(h[m.domainId]=m.stats,h),{});t(u)}catch(o){console.error("Error fetching all domains stats:",o),a({title:"Error",description:"Failed to fetch domains statistics",variant:"destructive"})}finally{r(!1)}};return f.useEffect(()=>{i()},[]),{domainsStats:e,loading:n,refetch:i}},tJ=({title:e,description:t,count:n,icon:r,onClick:a,badge:i})=>s.jsxs(V,{className:"cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50 group h-full",onClick:a,children:[s.jsx(G,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:s.jsx(r,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Y,{className:"text-lg group-hover:text-primary transition-colors",children:e}),n!==void 0&&s.jsx("div",{className:"text-2xl font-bold text-muted-foreground mt-1",children:n})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[i&&s.jsx(X,{variant:"secondary",className:"text-xs",children:i}),s.jsx(_n,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})]})]})}),s.jsx(W,{children:s.jsx(we,{className:"line-clamp-2",children:t})})]}),Gj=f.forwardRef(({...e},t)=>s.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));Gj.displayName="Breadcrumb";const Kj=f.forwardRef(({className:e,...t},n)=>s.jsx("ol",{ref:n,className:ne("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));Kj.displayName="BreadcrumbList";const hp=f.forwardRef(({className:e,...t},n)=>s.jsx("li",{ref:n,className:ne("inline-flex items-center gap-1.5",e),...t}));hp.displayName="BreadcrumbItem";const Qj=f.forwardRef(({asChild:e,className:t,...n},r)=>{const a=e?ds:"a";return s.jsx(a,{ref:r,className:ne("transition-colors hover:text-foreground",t),...n})});Qj.displayName="BreadcrumbLink";const Yj=f.forwardRef(({className:e,...t},n)=>s.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:ne("font-normal text-foreground",e),...t}));Yj.displayName="BreadcrumbPage";const Xj=({children:e,className:t,...n})=>s.jsx("li",{role:"presentation","aria-hidden":"true",className:ne("[&>svg]:size-3.5",t),...n,children:e??s.jsx(_n,{})});Xj.displayName="BreadcrumbSeparator";const qM=f.createContext(void 0);function WM({children:e}){const[t,n]=f.useState([]),r=f.useCallback(l=>{n(l)},[]),a=f.useCallback(l=>{n(c=>[...c,l])},[]),i=f.useCallback(l=>{n(c=>c.filter((d,u)=>u!==l))},[]),o=f.useCallback(()=>{n([])},[]);return s.jsx(qM.Provider,{value:{breadcrumbs:t,setBreadcrumbs:r,addBreadcrumb:a,removeBreadcrumb:i,clearBreadcrumbs:o},children:e})}function nJ(){const e=f.useContext(qM);if(e===void 0)throw new Error("useBreadcrumb must be used within a BreadcrumbProvider");return e}const _x=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!1),[i,o]=f.useState(null),{toast:l}=at(),c=(N,j)=>{var F,O;const k=N.display_order??Number.MAX_SAFE_INTEGER,T=j.display_order??Number.MAX_SAFE_INTEGER;if(k!==T)return k-T;const A=parseInt(((F=N.name.match(/^(\d+)/))==null?void 0:F[1])||"0",10),R=parseInt(((O=j.name.match(/^(\d+)/))==null?void 0:O[1])||"0",10);return A!==R?A-R:N.name.localeCompare(j.name)},d=async()=>{if(e){console.log("🔍 fetchConcepts called for domain:",e),a(!0),o(null),n([]);try{console.log("🔍 Fetching concepts for domain:",e),console.log("🔍 Current user auth info:",await L.auth.getUser());const{data:N,error:j}=await L.from("concepts").select("*").eq("domain_id",e).order("parent_concept_id",{ascending:!0,nullsFirst:!0}).order("display_order",{ascending:!0,nullsFirst:!1}).order("name",{ascending:!0});if(console.log("🔍 Raw Supabase response - data:",N),console.log("🔍 Raw Supabase response - error:",j),console.log("🔍 Data count:",(N==null?void 0:N.length)||0),j)throw console.error("🔍 Database fetch error:",j),j;console.log("🔍 === COMPLETE DATABASE RESPONSE ==="),console.log("🔍 Total concepts returned:",N==null?void 0:N.length),console.log("🔍 Suggested concepts returned:",N==null?void 0:N.filter(k=>k.status==="suggested").length),console.log("🔍 All unique statuses:",[...new Set((N==null?void 0:N.map(k=>k.status))||[])]),console.log("🔍 ALL suggested concepts details:",N==null?void 0:N.filter(k=>k.status==="suggested").map(k=>({id:k.id.slice(0,8),name:k.name,status:k.status,teacher_id:k.teacher_id}))),n(N||[]),console.log("🔍 React state updated with",N==null?void 0:N.length,"concepts")}catch(N){console.error("Error fetching concepts:",N),o(N instanceof Error?N.message:"Failed to fetch concepts"),l({title:"Error",description:"Failed to fetch concepts",variant:"destructive"})}finally{a(!1)}}},u=async(N,j,k)=>{try{let T=k;if(!T){const{data:{user:R},error:F}=await L.auth.getUser();if(F)throw F;if(!R)throw new Error("No authenticated user found");T=R.id}const{error:A}=await L.from("concepts").update({status:j,reviewed_by:T,reviewed_at:new Date().toISOString(),updated_by:T}).eq("id",N);if(A)throw A;return n(R=>R.map(F=>F.id===N?{...F,status:j,reviewed_by:T,reviewed_at:new Date().toISOString(),updated_by:T,updated_at:new Date().toISOString()}:F)),l({title:"Success",description:`Concept ${j==="approved"?"approved":"rejected"}`}),!0}catch(T){return console.error("Error updating concept status:",T),l({title:"Error",description:"Failed to update concept status",variant:"destructive"}),!1}},h=async(N,j)=>{try{const{error:k}=await L.from("concepts").update({parent_concept_id:j||null,updated_at:new Date().toISOString()}).eq("id",N);if(k)throw k;return n(T=>T.map(A=>A.id===N?{...A,parent_concept_id:j,updated_at:new Date().toISOString()}:A)),l({title:"Success",description:"Concept hierarchy updated"}),!0}catch(k){return console.error("Error updating concept parent:",k),l({title:"Error",description:"Failed to update concept hierarchy",variant:"destructive"}),!1}},m=async N=>{try{const j=t.find(D=>D.id===N);if(!j)return!1;const T=[...t.filter(D=>D.parent_concept_id===j.parent_concept_id)].sort(c),A=T.findIndex(D=>D.id===N);if(A<=0)return!1;const R=T[A-1],F=j.display_order??A,O=R.display_order??A-1,{error:U}=await L.from("concepts").update({display_order:O,updated_at:new Date().toISOString()}).eq("id",N);if(U)throw U;const{error:M}=await L.from("concepts").update({display_order:F,updated_at:new Date().toISOString()}).eq("id",R.id);if(M)throw M;const B=[...T].map(D=>D.id);return[B[A-1],B[A]]=[B[A],B[A-1]],await v(j.parent_concept_id??null,B),!0}catch(j){return console.error("Error moving concept up:",j),l({title:"Error",description:"Failed to move concept",variant:"destructive"}),!1}},p=async N=>{try{const j=t.find(D=>D.id===N);if(!j)return!1;const T=[...t.filter(D=>D.parent_concept_id===j.parent_concept_id)].sort(c),A=T.findIndex(D=>D.id===N);if(A>=T.length-1)return!1;const R=T[A+1],F=j.display_order??A,O=R.display_order??A+1,{error:U}=await L.from("concepts").update({display_order:O,updated_at:new Date().toISOString()}).eq("id",N);if(U)throw U;const{error:M}=await L.from("concepts").update({display_order:F,updated_at:new Date().toISOString()}).eq("id",R.id);if(M)throw M;const B=[...T].map(D=>D.id);return[B[A],B[A+1]]=[B[A+1],B[A]],await v(j.parent_concept_id??null,B),!0}catch(j){return console.error("Error moving concept down:",j),l({title:"Error",description:"Failed to move concept",variant:"destructive"}),!1}},v=async(N,j)=>{try{const k=new Date().toISOString(),A=t.filter(F=>(F.parent_concept_id??null)===N).filter(F=>!j.includes(F.id)).sort(c),R=[...j,...A.map(F=>F.id)];return await Promise.all(R.map((F,O)=>L.from("concepts").update({display_order:O,parent_concept_id:N,updated_at:k}).eq("id",F))),d(),!0}catch(k){return console.error("Error reordering concepts:",k),l({title:"Error",description:"Failed to reorder concepts",variant:"destructive"}),!1}},x=async(N,j,k)=>{try{let T=k;if(!T){const{data:{user:R},error:F}=await L.auth.getUser();if(F)throw F;if(!R)throw new Error("No authenticated user found");T=R.id}const{error:A}=await L.from("concepts").update({status:j,reviewed_by:T,reviewed_at:new Date().toISOString(),updated_by:T}).in("id",N);if(A)throw A;return n(R=>R.map(F=>N.includes(F.id)?{...F,status:j,reviewed_by:T,reviewed_at:new Date().toISOString(),updated_by:T,updated_at:new Date().toISOString()}:F)),l({title:"Success",description:`${N.length} concepts ${j==="approved"?"approved":"rejected"}`}),!0}catch(T){return console.error("Error bulk updating concepts:",T),l({title:"Error",description:"Failed to update concepts",variant:"destructive"}),!1}},y=async(N,j)=>{try{const{error:k}=await L.from("concepts").update({...j,updated_at:new Date().toISOString()}).eq("id",N);if(k)throw k;return n(T=>T.map(A=>A.id===N?{...A,...j,updated_at:new Date().toISOString()}:A)),l({title:"Success",description:"Concept updated successfully"}),!0}catch(k){return console.error("Error updating concept:",k),l({title:"Error",description:"Failed to update concept",variant:"destructive"}),!1}},g=async N=>{try{const{data:{user:j},error:k}=await L.auth.getUser();if(k)throw k;if(!j)throw new Error("No authenticated user found");console.log("🔍 Adding concept with data:",N),console.log("🔍 User ID:",j.id);const T={...N,created_by:j.id};console.log("🔍 Final insert data:",T);const{data:A,error:R}=await L.from("concepts").insert(T).select().single();if(console.log("🔍 Insert response:",{data:A,error:R}),R)throw console.error("🔍 Insert error details:",R),console.error("🔍 Full error object:",JSON.stringify(R,null,2)),console.error("🔍 Error message:",R.message),console.error("🔍 Error code:",R.code),console.error("🔍 Error details:",R.details),console.error("🔍 Error hint:",R.hint),R;return console.log("🔍 Successfully created concept:",A),console.log("🔍 New concept parent_concept_id:",A.parent_concept_id),console.log("🔍 New concept status:",A.status),console.log("🔍 Adding to concepts list. Current count:",t.length),n(F=>{const O=[...F,A];return console.log("🔍 Updated concepts list count:",O.length),O}),l({title:"Success",description:"Concept created successfully"}),A}catch(j){return console.error("Error adding concept:",j),l({title:"Error",description:"Failed to create concept",variant:"destructive"}),!1}},b=async N=>{try{if(t.some(T=>T.parent_concept_id===N))return l({title:"Error",description:"Cannot delete concept with child concepts. Please reassign or delete children first.",variant:"destructive"}),!1;const{error:k}=await L.from("concepts").delete().eq("id",N);if(k)throw k;return n(T=>T.filter(A=>A.id!==N)),l({title:"Success",description:"Concept deleted successfully"}),!0}catch(j){return console.error("Error deleting concept:",j),l({title:"Error",description:"Failed to delete concept",variant:"destructive"}),!1}},w=async(N,j,k)=>{var T,A,R,F,O,U,M,B,D;try{console.log("🎯 Saving mindmap position for concept:",N,"at position:",{x:j,y:k});const{data:E}=await L.auth.getSession();console.log("🎯 Current Supabase session:",(A=(T=E==null?void 0:E.session)==null?void 0:T.user)==null?void 0:A.id,(F=(R=E==null?void 0:E.session)==null?void 0:R.user)==null?void 0:F.email),console.log("🎯 Session access token exists:",!!((O=E==null?void 0:E.session)!=null&&O.access_token)),console.log("🎯 User role from JWT:",(B=(M=(U=E==null?void 0:E.session)==null?void 0:U.user)==null?void 0:M.app_metadata)==null?void 0:B.role);const{data:{user:I}}=await L.auth.getUser();if(!I)return console.error("🎯 No authenticated user - cannot save mindmap position"),l({title:"Authentication Required",description:"Please log in to save mindmap positions.",variant:"destructive"}),!1;if(!(E!=null&&E.session))return console.error("🎯 No valid Supabase session found"),l({title:"Session Expired",description:"Your session has expired. Please refresh the page and try again.",variant:"destructive"}),!1;const q=t.find(ie=>ie.id===N);if(!q)return console.error("🎯 Concept not found:",N),!1;const P={...q.metadata||{},mindmap_position:{x:j,y:k}};console.log("🎯 Current metadata:",q.metadata),console.log("🎯 Updated metadata:",P),console.log("🎯 User ID:",I.id,"Concept created_by:",q.created_by);const{data:Z,error:ee}=await L.rpc("debug_current_user_jwt");console.log("🎯 Debug auth function result:",Z,ee);const{data:J,error:te}=await L.from("concepts").update({metadata:P}).eq("id",N).select("id, metadata");if(console.log("🎯 Database update response:",{data:J,error:te}),te){if(console.error("🎯 Database update error:",te),te.code==="PGRST116"||(D=te.message)!=null&&D.includes("new row violates row-level security")){console.error("🎯 RLS policy violation - checking auth state");const{data:ie,error:ce}=await L.rpc("test_user_is_admin");console.log("🎯 Admin test result:",ie,ce),l({title:"Permission Denied",description:`You don't have permission to update this concept's position. Your ID: ${I.id}, Concept created by: ${q.created_by}`,variant:"destructive"})}else te.code==="PGRST301"?l({title:"Authentication Error",description:"Your session is invalid. Please refresh the page and log in again.",variant:"destructive"}):l({title:"Save Failed",description:`Could not save mindmap position: ${te.message}`,variant:"destructive"});return!1}return!J||J.length===0?(console.error("🎯 No data returned from update - possibly RLS policy blocked the update"),l({title:"Save Failed",description:"No data returned from server. Update may have been blocked by security policies.",variant:"destructive"}),!1):(console.log("🎯 Successfully saved position to database"),l({title:"Position Saved",description:"Mindmap position has been saved successfully."}),n(ie=>ie.map(ce=>ce.id===N?{...ce,metadata:P}:ce)),!0)}catch(E){return console.error("🎯 Error saving mindmap position:",E),l({title:"Save Error",description:"An unexpected error occurred while saving.",variant:"destructive"}),!1}},C=N=>{var T;const j=t.find(A=>A.id===N),k=((T=j==null?void 0:j.metadata)==null?void 0:T.mindmap_position)||null;return console.log("🎯 Getting mindmap position for concept:",N,"concept metadata:",JSON.stringify(j==null?void 0:j.metadata),"found position:",JSON.stringify(k)),k},_=async N=>{var j;try{const k=t.filter(T=>T.domain_id===N);for(const T of k)if((j=T.metadata)!=null&&j.mindmap_position){const A={...T.metadata};delete A.mindmap_position,await L.from("concepts").update({metadata:A,updated_at:new Date().toISOString()}).eq("id",T.id)}return d(),l({title:"Success",description:"Mindmap layout reset successfully"}),!0}catch(k){return console.error("Error clearing mindmap positions:",k),l({title:"Error",description:"Failed to reset mindmap layout",variant:"destructive"}),!1}};return f.useEffect(()=>{d()},[e]),{concepts:t,loading:r,error:i,refetch:d,updateConceptStatus:u,updateConceptParent:h,updateConcept:y,bulkUpdateStatus:x,addConcept:g,deleteConcept:b,moveConceptUp:m,moveConceptDown:p,reorderSiblings:v,saveMindmapPosition:w,getMindmapPosition:C,clearMindmapPositions:_,stats:(()=>{const N=t.reduce((j,k)=>(j[k.status]=(j[k.status]||0)+1,j),{});return{total:t.length,ai_suggested:N.suggested||0,approved:N.approved||N.confirmed||0,rejected:N.rejected||0}})()}},fl=e=>{const[t,n]=f.useState(null),[r,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(!1);return f.useEffect(()=>{if(!e){a(!1);return}(async()=>{try{a(!0),o(null);const u=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e);let h=L.from("domains").select("*");u?h=h.eq("id",e):h=h.ilike("name",e.replace(/-/g," "));const{data:m,error:p}=await h.single();if(p){if(!u){const{data:v,error:x}=await L.from("domains").select("*").ilike("name",`%${e.replace(/-/g," ")}%`).limit(1).single();if(x)throw new Error(`Domain not found: ${e}`);if(v){n(v),c(!0);return}}throw p}n(m),c(!0)}catch(u){console.error("Error fetching domain:",u),o(u instanceof Error?u.message:"Failed to fetch domain"),c(!1)}finally{a(!1)}})()},[e]),{domain:t,loading:r,error:i,isValidIdentifier:l}},mp=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function va(){const e=br(),{breadcrumbs:t,setBreadcrumbs:n}=nJ(),{domains:r}=As(),a=e.pathname.split("/").filter(Boolean),o=a[0]==="admin"&&(a[1]==="domain"||a[1]==="domains")?a[2]:"",l=a[1]==="domains",{domain:c}=fl(l?o:""),d=l?null:r.find(m=>m.id===o),u=c||d,{concepts:h}=_x((u==null?void 0:u.id)||"");return f.useEffect(()=>{const m=e.pathname.split("/").filter(Boolean),p=[];if(p.push({label:"Dashboard",href:"/tenant/dashboard"}),m[0]==="admin")if(m[1]==="learning-domains")p.push({label:"Learning Domains",href:"/admin/learning-domains"});else if((m[1]==="domain"||m[1]==="domains")&&m[2]){const v=m[2],x=m[1]==="domains",y=(u==null?void 0:u.name)||"Domain";if(p.push({label:y,href:x?`/admin/domains/${v}`:`/admin/domain/${v}`}),m[3]){const b={concepts:"concepts",goals:"goals",exercises:"exercises",upload:"upload","ai-guidance":"ai-guidance",tasks:"tasks",strategies:"strategies"}[m[3]]||m[3];if(p.push({label:b,href:x?`/admin/domains/${v}/${m[3]}`:`/admin/domain/${v}/${m[3]}`}),m[3]==="concepts"&&m[4]){const w=m[4],C=h.find(S=>S.id===w),_=(C==null?void 0:C.name)||"Concept";p.push({label:_,href:x?`/admin/domains/${v}/concepts/${w}`:`/admin/domain/${v}/concepts/${w}`})}else if(m[3]==="ai-guidance"&&m[4]){const w=m[4],C=w.charAt(0).toUpperCase()+w.slice(1).replace(/-/g," ");p.push({label:C,href:x?`/admin/domains/${v}/ai-guidance/${w}`:`/admin/domain/${v}/ai-guidance/${w}`}),m[5]==="examples"&&m[6]==="new"&&p.push({label:"Add Examples",href:x?`/admin/domains/${v}/ai-guidance/${w}/examples/new`:`/admin/domain/${v}/ai-guidance/${w}/examples/new`})}}}else if(m[1]==="upload"){p.push({label:"Learning Domains",href:"/admin/learning-domains"});const x=new URLSearchParams(e.search).get("domain");if(x&&r.length>0){const y=r.find(g=>g.id===x);y&&p.push({label:y.name,href:`/admin/domains/${u!=null&&u.name?u.name.toLowerCase().replace(/\s+/g,"-"):x}`})}p.push({label:"File Upload",href:"/admin/upload"})}else m[1]==="clients"?p.push({label:"Clients",href:"/admin/clients"}):m[1]==="permissions"&&p.push({label:"Permissions",href:"/admin/permissions"});p.length>0&&(p[p.length-1].isActive=!0),n(p)},[e.pathname,e.search,r,h,n]),t.length<=1?null:s.jsx(Gj,{children:s.jsx(Kj,{children:t.map((m,p)=>s.jsxs("div",{className:"flex items-center",children:[p>0&&s.jsx(Xj,{}),s.jsx(hp,{children:m.isActive?s.jsx(Yj,{children:m.label}):s.jsx(Qj,{asChild:!0,children:s.jsx(is,{to:m.href||"#",children:m.label})})})]},p))})})}function Ma({children:e,className:t=""}){return s.jsx("div",{className:`p-6 space-y-8 ${t}`,children:s.jsx("div",{className:"mx-auto max-w-7xl",children:e})})}const Jj=({onFilesSelected:e,uploadProgress:t,isUploading:n,disabled:r=!1})=>{const a=f.useCallback(u=>{e(u)},[e]),{getRootProps:i,getInputProps:o,isDragActive:l,fileRejections:c}=jx({onDrop:a,disabled:r||n,maxSize:50*1024*1024,accept:{"application/pdf":[".pdf"],"text/plain":[".txt"],"text/csv":[".csv"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"audio/mpeg":[".mp3"],"audio/wav":[".wav"],"video/mp4":[".mp4"],"video/avi":[".avi"]}}),d=Object.entries(t);return s.jsxs("div",{className:"space-y-4",children:[s.jsx(V,{className:`border-2 border-dashed transition-all duration-200 ${l?"border-primary bg-primary/5":r||n?"border-muted bg-muted/20":"border-border hover:border-primary/50"}`,children:s.jsx(W,{className:"p-8",children:s.jsxs("div",{...i(),className:`text-center cursor-pointer ${r||n?"pointer-events-none opacity-50":""}`,children:[s.jsx("input",{...o()}),s.jsx("div",{className:"mx-auto w-12 h-12 mb-4",children:s.jsx(On,{className:`w-full h-full ${l?"text-primary":"text-muted-foreground"}`})}),s.jsx("div",{className:"space-y-2",children:l?s.jsx("p",{className:"text-lg font-medium text-primary",children:"Drop the files here..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-lg font-medium",children:"Drag & drop files here, or click to select"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Supports PDF, Word, Excel, PowerPoint, images, audio, and video files"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum file size: 50MB"})]})})]})})}),c.length>0&&s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:s.jsx("div",{className:"space-y-1",children:c.map(({file:u,errors:h})=>{var m;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("strong",{children:[u.name,":"]})," ",(m=h[0])==null?void 0:m.message]},u.name)})})})]}),d.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Upload Progress"}),d.map(([u,h])=>s.jsxs(V,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(P$,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium truncate",children:h.file.name}),s.jsx(X,{variant:h.status==="completed"?"default":h.status==="error"?"destructive":"secondary",children:h.status})]}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:up(h.file.size)})]}),h.status==="uploading"&&s.jsx(Br,{value:h.progress,className:"mb-2"}),h.error&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:h.error})]},u))]})]})},sJ=()=>{var _;const{domainId:e}=Gr(),t=pt(),[n,r]=f.useState(!1),[a,i]=f.useState(null),{domains:o,loading:l}=As(),{stats:c,loading:d}=ZX(e||""),{uploadFiles:u,isUploading:h,uploadProgress:m}=Nx(),p=o.find(S=>S.id===e),v=l||d,x=S=>{var N;if(S==="upload")r(!0);else if(S==="ai-guidance")t(`/admin/domain/${e}/ai-guidance`);else if(S==="concepts"){const j=(p==null?void 0:p.slug)||((N=p==null?void 0:p.name)==null?void 0:N.toLowerCase().replace(/[^a-z0-9]/g,"-"))||e;t(`/admin/domain/${j}/concepts`)}else S==="goals"?t(`/admin/domain/${e}/goals`):console.log(`Navigate to ${S} for domain ${e}`)},y=S=>{i(S)},g=S=>{!e||!p||!a||u({files:S,domainId:e,domainName:p.name,contentType:a})},b=()=>{r(!1),i(null)},w=[{title:"Learning Concepts",description:"Manage learning concepts and their relationships",count:c==null?void 0:c.conceptsCount,icon:rt,section:"concepts"},{title:"Learning Goals",description:"Define and organize learning objectives",count:c==null?void 0:c.learningGoalsCount,icon:Xn,section:"goals"},{title:"Exercises",description:"Create and manage practice exercises",count:c==null?void 0:c.exercisesCount,icon:Wi,section:"exercises",badge:"Coming Soon"},{title:"Upload Data",description:"Upload and manage learning materials",icon:On,section:"upload"},{title:"AI Guidance",description:"AI-powered learning recommendations",icon:xa,section:"ai-guidance",badge:"Coming Soon"},{title:"Tasks",description:"Manage learning tasks and assignments",icon:$u,section:"tasks",badge:"Coming Soon"},{title:"Strategies",description:"Define learning strategies and methodologies",icon:Bp,section:"strategies",badge:"Coming Soon"},{title:"Gamification",description:"Add game elements to enhance learning motivation",icon:kw,section:"gamification",badge:"Coming Soon"},{title:"Motivation",description:"Track and boost learner motivation and engagement",icon:ww,section:"motivation",badge:"Coming Soon"}];if(v)return s.jsxs(Ma,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{className:"h-8 w-64"}),s.jsx(Pe,{className:"h-4 w-96"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Pe,{className:"h-32 w-full"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((S,N)=>s.jsx(Pe,{className:"h-32 w-full"},N))})]})]});if(!p)return s.jsx(Ma,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Domain Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested domain could not be found."}),s.jsxs(z,{onClick:()=>t("/admin/learning-domains"),children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Back to Learning Domains"]})]})});const C=[{type:"concept",title:"Learning Concepts",description:"Upload documents related to learning concepts and knowledge areas",icon:rt,color:"bg-blue-50 hover:bg-blue-100 border-blue-200",iconColor:"text-blue-600"},{type:"learning_goal",title:"Learning Goals",description:"Upload materials defining learning objectives and outcomes",icon:Xn,color:"bg-green-50 hover:bg-green-100 border-green-200",iconColor:"text-green-600"},{type:"exercise",title:"Exercises",description:"Upload practice exercises and assessment materials",icon:Wi,color:"bg-purple-50 hover:bg-purple-100 border-purple-200",iconColor:"text-purple-600"}];return s.jsxs(Ma,{children:[s.jsx(va,{}),n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),s.jsxs("p",{className:"text-muted-foreground mt-2",children:["Choose the type of content you want to upload for ",p.name,"."]})]}),s.jsxs(z,{variant:"ghost",onClick:b,children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}),a?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(X,{variant:"outline",className:"px-3 py-1",children:(_=C.find(S=>S.type===a))==null?void 0:_.title}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>i(null),children:"Change Type"})]})}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsx(Jj,{onFilesSelected:g,uploadProgress:m,isUploading:h,disabled:!e})})})]}):s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:C.map(S=>{const N=S.icon;return s.jsx(V,{className:`cursor-pointer transition-all duration-200 ${S.color}`,onClick:()=>y(S.type),children:s.jsxs(G,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-white",children:s.jsx(N,{className:`h-8 w-8 ${S.iconColor}`})}),s.jsx(Y,{className:"text-lg",children:S.title}),s.jsx(we,{className:"text-sm",children:S.description})]})},S.type)})})]}):s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{children:[p.name," Management"]}),s.jsx(we,{children:"Manage different aspects of this learning domain"})]}),s.jsx(W,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(S=>s.jsx(tJ,{title:S.title,description:S.description,count:S.count,icon:S.icon,onClick:()=>x(S.section),badge:S.badge},S.section))})})]})]})},HM=(e,t)=>{const[n,r]=f.useState(null),[a,i]=f.useState(!1),[o,l]=f.useState(null),c=f.useCallback(async()=>{if(e){i(!0),l(null);try{const d=t||e,{data:u,error:h}=await L.functions.invoke("check-guidance-status",{body:{domainId:d}});if(h)throw h;r(u)}catch(d){console.error("Error fetching guidance status:",d),l(d instanceof Error?d.message:"Failed to fetch guidance status")}finally{i(!1)}}},[e,t]);return f.useEffect(()=>{c()},[c]),{guidanceStatus:n,loading:a,error:o,refetch:c}};function rJ(e){return{concepts:rt,"concept-structuring":Fu,"learning-strategies":Xn,"evaluation-methods":$u,"content-formats":Es,"task-types":Wi,exercises:Wi,strategies:Bp,"learning-goals":Xn,"Learning-goals":Xn}[e]||kt}function aJ(e){return{concepts:'Rules for extracting "what to learn" from uploaded materials.',"concept-structuring":"How to build hierarchies and dependencies among concepts.","learning-strategies":"Guidelines for turning concepts into measurable objectives.","evaluation-methods":"Methods for assessing learning progress and outcomes.","content-formats":"Guidelines for content presentation and formatting.","task-types":"Different types of learning tasks and activities.",exercises:"Guidelines for creating exercises and practice activities.",strategies:"General learning and teaching strategies.","learning-goals":"Guidelines for defining and structuring learning objectives.","Learning-goals":"Guidelines for defining and structuring learning objectives."}[e]||"AI guidance configuration for this area."}const WC=()=>{const{domainId:e,slug:t}=Gr(),n=pt(),{domains:r,loading:a}=As(),i=t||e||"",{domain:o,loading:l}=fl(i),c=o||r.find(C=>C.id===e),{guidanceStatus:d,loading:u,error:h,refetch:m}=HM((c==null?void 0:c.id)||"",c==null?void 0:c.name),{toast:p}=at(),v=a||u||l,x=(d==null?void 0:d.areas.map(C=>({key:C.key,title:C.title,description:aJ(C.key),icon:rJ(C.key)})))||[],y=C=>{n(t?`/admin/domains/${t}/ai-guidance/${C}`:`/admin/domain/${e}/ai-guidance/${C}`)},g=C=>{console.log(`View guidance file for ${C}`),p({title:"Coming Soon",description:"File viewer will be available in the next update."})},b=C=>{if(!d)return null;const _=d.areas.find(S=>S.key===C);return _?_.exists?s.jsx(X,{variant:"default",children:"Configured"}):s.jsx(X,{variant:"secondary",children:"Not configured"}):s.jsx(X,{variant:"secondary",children:"Not configured"})},w=C=>{if(!d)return!1;const _=d.areas.find(S=>S.key===C);return(_==null?void 0:_.exists)||!1};return v?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{className:"h-8 w-64"}),s.jsx(Pe,{className:"h-4 w-96"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(5)].map((C,_)=>s.jsx(Pe,{className:"h-48 w-full"},_))})]}):c?h?s.jsxs("div",{className:"p-6",children:[s.jsx(va,{}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Error Loading Guidance"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"There was an error loading the guidance status. Please try again."}),s.jsx(z,{onClick:()=>m(),children:"Retry"})]})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(va,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"AI Guidance"}),s.jsx(X,{variant:"outline",children:c.name})]}),s.jsx("p",{className:"text-muted-foreground",children:"Configure AI guidance for different aspects of your learning domain"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.length>0?x.map(C=>{const _=C.icon,S=w(C.key);return s.jsxs(V,{className:"h-full",children:[s.jsx(G,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:s.jsx(_,{className:"h-5 w-5 text-primary"})}),s.jsx("div",{className:"flex-1",children:s.jsx(Y,{className:"text-lg",children:C.title})})]}),s.jsx("div",{className:"flex items-center",children:b(C.key)})]})}),s.jsxs(W,{className:"space-y-4",children:[s.jsx(we,{className:"line-clamp-2",children:S?C.description:"No guidance file yet."}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs(z,{onClick:()=>y(C.key),className:"w-full",children:[s.jsx(A$,{className:"h-4 w-4 mr-2"}),"Open"]}),s.jsxs(z,{variant:"outline",onClick:()=>g(C.key),disabled:!S,className:"w-full",children:[s.jsx(fr,{className:"h-4 w-4 mr-2"}),"View file"]})]})]})]},C.key)}):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"No guidance folders found for this domain yet."}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload some files to the domain first, then guidance folders will appear here automatically."})]})})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Domain Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested domain could not be found."}),s.jsxs(z,{onClick:()=>n("/admin/learning-domains"),children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Back to Learning Domains"]})]})})},iJ=(e,t,n)=>{const[r,a]=f.useState(null),[i,o]=f.useState(!1),[l,c]=f.useState(null),d=f.useCallback(async()=>{if(!e||!t||!n){console.log("Missing parameters:",{domainId:e,domainName:t,area:n});return}o(!0),c(null);try{const{data:h,error:m}=await L.functions.invoke("get-guidance-content",{body:{domainName:t,area:n}});if(m)throw m;a(h)}catch(h){console.error("Error fetching guidance content:",h),c(h instanceof Error?h.message:"Failed to fetch guidance content")}finally{o(!1)}},[e,t,n]);return f.useEffect(()=>{d()},[d]),{guidanceContent:r,loading:i,error:l,refetch:d,saveContent:async h=>{try{const{data:m,error:p}=await L.functions.invoke("save-guidance-content",{body:{domainName:t,area:n,content:h}});if(p)throw p;if(!m.success)throw new Error(m.error||"Failed to save guidance content");return a({content:h,exists:!0}),!0}catch(m){return console.error("Error saving guidance content:",m),!1}}}};function oJ(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const lJ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cJ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dJ={};function HC(e,t){return(dJ.jsx?cJ:lJ).test(e)}const uJ=/[ \t\n\f\r]/g;function hJ(e){return typeof e=="object"?e.type==="text"?GC(e.value):!1:GC(e)}function GC(e){return e.replace(uJ,"")===""}class zh{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}zh.prototype.normal={};zh.prototype.property={};zh.prototype.space=void 0;function GM(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new zh(n,r,t)}function Q0(e){return e.toLowerCase()}class Ps{constructor(t,n){this.attribute=n,this.property=t}}Ps.prototype.attribute="";Ps.prototype.booleanish=!1;Ps.prototype.boolean=!1;Ps.prototype.commaOrSpaceSeparated=!1;Ps.prototype.commaSeparated=!1;Ps.prototype.defined=!1;Ps.prototype.mustUseProperty=!1;Ps.prototype.number=!1;Ps.prototype.overloadedBoolean=!1;Ps.prototype.property="";Ps.prototype.spaceSeparated=!1;Ps.prototype.space=void 0;let mJ=0;const nt=pl(),un=pl(),Y0=pl(),xe=pl(),Ct=pl(),pc=pl(),Ds=pl();function pl(){return 2**++mJ}const X0=Object.freeze(Object.defineProperty({__proto__:null,boolean:nt,booleanish:un,commaOrSpaceSeparated:Ds,commaSeparated:pc,number:xe,overloadedBoolean:Y0,spaceSeparated:Ct},Symbol.toStringTag,{value:"Module"})),ev=Object.keys(X0);class Zj extends Ps{constructor(t,n,r,a){let i=-1;if(super(t,n),KC(this,"space",a),typeof r=="number")for(;++i<ev.length;){const o=ev[i];KC(this,ev[i],(r&X0[o])===X0[o])}}}Zj.prototype.defined=!0;function KC(e,t,n){n&&(e[t]=n)}function vd(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const i=new Zj(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Q0(r)]=r,n[Q0(i.attribute)]=r}return new zh(t,n,e.space)}const KM=vd({properties:{ariaActiveDescendant:null,ariaAtomic:un,ariaAutoComplete:null,ariaBusy:un,ariaChecked:un,ariaColCount:xe,ariaColIndex:xe,ariaColSpan:xe,ariaControls:Ct,ariaCurrent:null,ariaDescribedBy:Ct,ariaDetails:null,ariaDisabled:un,ariaDropEffect:Ct,ariaErrorMessage:null,ariaExpanded:un,ariaFlowTo:Ct,ariaGrabbed:un,ariaHasPopup:null,ariaHidden:un,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ct,ariaLevel:xe,ariaLive:null,ariaModal:un,ariaMultiLine:un,ariaMultiSelectable:un,ariaOrientation:null,ariaOwns:Ct,ariaPlaceholder:null,ariaPosInSet:xe,ariaPressed:un,ariaReadOnly:un,ariaRelevant:null,ariaRequired:un,ariaRoleDescription:Ct,ariaRowCount:xe,ariaRowIndex:xe,ariaRowSpan:xe,ariaSelected:un,ariaSetSize:xe,ariaSort:null,ariaValueMax:xe,ariaValueMin:xe,ariaValueNow:xe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function QM(e,t){return t in e?e[t]:t}function YM(e,t){return QM(e,t.toLowerCase())}const fJ=vd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:pc,acceptCharset:Ct,accessKey:Ct,action:null,allow:null,allowFullScreen:nt,allowPaymentRequest:nt,allowUserMedia:nt,alt:null,as:null,async:nt,autoCapitalize:null,autoComplete:Ct,autoFocus:nt,autoPlay:nt,blocking:Ct,capture:null,charSet:null,checked:nt,cite:null,className:Ct,cols:xe,colSpan:null,content:null,contentEditable:un,controls:nt,controlsList:Ct,coords:xe|pc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nt,defer:nt,dir:null,dirName:null,disabled:nt,download:Y0,draggable:un,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nt,formTarget:null,headers:Ct,height:xe,hidden:Y0,high:xe,href:null,hrefLang:null,htmlFor:Ct,httpEquiv:Ct,id:null,imageSizes:null,imageSrcSet:null,inert:nt,inputMode:null,integrity:null,is:null,isMap:nt,itemId:null,itemProp:Ct,itemRef:Ct,itemScope:nt,itemType:Ct,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nt,low:xe,manifest:null,max:null,maxLength:xe,media:null,method:null,min:null,minLength:xe,multiple:nt,muted:nt,name:null,nonce:null,noModule:nt,noValidate:nt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nt,optimum:xe,pattern:null,ping:Ct,placeholder:null,playsInline:nt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nt,referrerPolicy:null,rel:Ct,required:nt,reversed:nt,rows:xe,rowSpan:xe,sandbox:Ct,scope:null,scoped:nt,seamless:nt,selected:nt,shadowRootClonable:nt,shadowRootDelegatesFocus:nt,shadowRootMode:null,shape:null,size:xe,sizes:null,slot:null,span:xe,spellCheck:un,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xe,step:null,style:null,tabIndex:xe,target:null,title:null,translate:null,type:null,typeMustMatch:nt,useMap:null,value:un,width:xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ct,axis:null,background:null,bgColor:null,border:xe,borderColor:null,bottomMargin:xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nt,declare:nt,event:null,face:null,frame:null,frameBorder:null,hSpace:xe,leftMargin:xe,link:null,longDesc:null,lowSrc:null,marginHeight:xe,marginWidth:xe,noResize:nt,noHref:nt,noShade:nt,noWrap:nt,object:null,profile:null,prompt:null,rev:null,rightMargin:xe,rules:null,scheme:null,scrolling:un,standby:null,summary:null,text:null,topMargin:xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nt,disableRemotePlayback:nt,prefix:null,property:null,results:xe,security:null,unselectable:null},space:"html",transform:YM}),pJ=vd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ds,accentHeight:xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xe,amplitude:xe,arabicForm:null,ascent:xe,attributeName:null,attributeType:null,azimuth:xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xe,by:null,calcMode:null,capHeight:xe,className:Ct,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xe,diffuseConstant:xe,direction:null,display:null,dur:null,divisor:xe,dominantBaseline:null,download:nt,dx:null,dy:null,edgeMode:null,editable:null,elevation:xe,enableBackground:null,end:null,event:null,exponent:xe,externalResourcesRequired:null,fill:null,fillOpacity:xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:pc,g2:pc,glyphName:pc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xe,horizOriginX:xe,horizOriginY:xe,id:null,ideographic:xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xe,k:xe,k1:xe,k2:xe,k3:xe,k4:xe,kernelMatrix:Ds,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xe,overlineThickness:xe,paintOrder:null,panose1:null,path:null,pathLength:xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ct,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xe,pointsAtY:xe,pointsAtZ:xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ds,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ds,rev:Ds,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ds,requiredFeatures:Ds,requiredFonts:Ds,requiredFormats:Ds,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xe,specularExponent:xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xe,strikethroughThickness:xe,string:null,stroke:null,strokeDashArray:Ds,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xe,strokeOpacity:xe,strokeWidth:null,style:null,surfaceScale:xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ds,tabIndex:xe,tableValues:null,target:null,targetX:xe,targetY:xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ds,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xe,underlineThickness:xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xe,values:null,vAlphabetic:xe,vMathematical:xe,vectorEffect:null,vHanging:xe,vIdeographic:xe,version:null,vertAdvY:xe,vertOriginX:xe,vertOriginY:xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:QM}),XM=vd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),JM=vd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:YM}),ZM=vd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),xJ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},gJ=/[A-Z]/g,QC=/-[a-z]/g,vJ=/^data[-\w.:]+$/i;function yJ(e,t){const n=Q0(t);let r=t,a=Ps;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&vJ.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(QC,wJ);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!QC.test(i)){let o=i.replace(gJ,bJ);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=Zj}return new a(r,t)}function bJ(e){return"-"+e.toLowerCase()}function wJ(e){return e.charAt(1).toUpperCase()}const jJ=GM([KM,fJ,XM,JM,ZM],"html"),eN=GM([KM,pJ,XM,JM,ZM],"svg");function NJ(e){return e.join(" ").trim()}var tN={},YC=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,SJ=/\n/g,_J=/^\s*/,CJ=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,kJ=/^:\s*/,EJ=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,TJ=/^[;\s]*/,AJ=/^\s+|\s+$/g,PJ=`
`,XC="/",JC="*",wo="",IJ="comment",DJ="declaration",RJ=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(v){var x=v.match(SJ);x&&(n+=x.length);var y=v.lastIndexOf(PJ);r=~y?v.length-y:r+v.length}function i(){var v={line:n,column:r};return function(x){return x.position=new o(v),d(),x}}function o(v){this.start=v,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(v){var x=new Error(t.source+":"+n+":"+r+": "+v);if(x.reason=v,x.filename=t.source,x.line=n,x.column=r,x.source=e,!t.silent)throw x}function c(v){var x=v.exec(e);if(x){var y=x[0];return a(y),e=e.slice(y.length),x}}function d(){c(_J)}function u(v){var x;for(v=v||[];x=h();)x!==!1&&v.push(x);return v}function h(){var v=i();if(!(XC!=e.charAt(0)||JC!=e.charAt(1))){for(var x=2;wo!=e.charAt(x)&&(JC!=e.charAt(x)||XC!=e.charAt(x+1));)++x;if(x+=2,wo===e.charAt(x-1))return l("End of comment missing");var y=e.slice(2,x-2);return r+=2,a(y),e=e.slice(x),r+=2,v({type:IJ,comment:y})}}function m(){var v=i(),x=c(CJ);if(x){if(h(),!c(kJ))return l("property missing ':'");var y=c(EJ),g=v({type:DJ,property:ZC(x[0].replace(YC,wo)),value:y?ZC(y[0].replace(YC,wo)):wo});return c(TJ),g}}function p(){var v=[];u(v);for(var x;x=m();)x!==!1&&(v.push(x),u(v));return v}return d(),p()};function ZC(e){return e?e.replace(AJ,wo):wo}var MJ=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tN,"__esModule",{value:!0});tN.default=OJ;var LJ=MJ(RJ);function OJ(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,LJ.default)(e),a=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;a?t(o,l,i):l&&(n=n||{},n[o]=l)}}),n}var Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.camelCase=void 0;var FJ=/^--[a-zA-Z0-9_-]+$/,$J=/-([a-z])/g,zJ=/^[^-]+$/,UJ=/^-(webkit|moz|ms|o|khtml)-/,BJ=/^-(ms)-/,VJ=function(e){return!e||zJ.test(e)||FJ.test(e)},qJ=function(e,t){return t.toUpperCase()},ek=function(e,t){return"".concat(t,"-")},WJ=function(e,t){return t===void 0&&(t={}),VJ(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(BJ,ek):e=e.replace(UJ,ek),e.replace($J,qJ))};Cx.camelCase=WJ;var HJ=Mn&&Mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},GJ=HJ(tN),KJ=Cx;function J0(e,t){var n={};return!e||typeof e!="string"||(0,GJ.default)(e,function(r,a){r&&a&&(n[(0,KJ.camelCase)(r,t)]=a)}),n}J0.default=J0;var QJ=J0;const YJ=il(QJ),eL=tL("end"),nN=tL("start");function tL(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function XJ(e){const t=nN(e),n=eL(e);if(t&&n)return{start:t,end:n}}function xu(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?tk(e.position):"start"in e||"end"in e?tk(e):"line"in e||"column"in e?Z0(e):""}function Z0(e){return nk(e&&e.line)+":"+nk(e&&e.column)}function tk(e){return Z0(e&&e.start)+"-"+Z0(e&&e.end)}function nk(e){return e&&typeof e=="number"?e:1}class ts extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?a=t:!i.cause&&t&&(o=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=xu(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ts.prototype.file="";ts.prototype.name="";ts.prototype.reason="";ts.prototype.message="";ts.prototype.stack="";ts.prototype.column=void 0;ts.prototype.line=void 0;ts.prototype.ancestors=void 0;ts.prototype.cause=void 0;ts.prototype.fatal=void 0;ts.prototype.place=void 0;ts.prototype.ruleId=void 0;ts.prototype.source=void 0;const sN={}.hasOwnProperty,JJ=new Map,ZJ=/[A-Z]/g,eZ=new Set(["table","tbody","thead","tfoot","tr"]),tZ=new Set(["td","th"]),nL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function nZ(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=dZ(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=cZ(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?eN:jJ,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=sL(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function sL(e,t,n){if(t.type==="element")return sZ(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rZ(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return iZ(e,t,n);if(t.type==="mdxjsEsm")return aZ(e,t);if(t.type==="root")return oZ(e,t,n);if(t.type==="text")return lZ(e,t)}function sZ(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=eN,e.schema=a),e.ancestors.push(t);const i=aL(e,t.tagName,!1),o=uZ(e,t);let l=aN(e,t);return eZ.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!hJ(c):!0})),rL(e,o,i,t),rN(o,l),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function rZ(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ju(e,t.position)}function aZ(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ju(e,t.position)}function iZ(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=eN,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:aL(e,t.name,!0),o=hZ(e,t),l=aN(e,t);return rL(e,o,i,t),rN(o,l),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function oZ(e,t,n){const r={};return rN(r,aN(e,t)),e.create(t,e.Fragment,r,n)}function lZ(e,t){return t.value}function rL(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function rN(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function cZ(e,t,n){return r;function r(a,i,o,l){const d=Array.isArray(o.children)?n:t;return l?d(i,o,l):d(i,o)}}function dZ(e,t){return n;function n(r,a,i,o){const l=Array.isArray(i.children),c=nN(r);return t(a,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function uZ(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&sN.call(t.properties,a)){const i=mZ(e,a,t.properties[a]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&tZ.has(t.tagName)?r=l:n[o]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function hZ(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Ju(e,t.position);else{const a=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else Ju(e,t.position);else i=r.value===null?!0:r.value;n[a]=i}return n}function aN(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:JJ;for(;++r<t.children.length;){const i=t.children[r];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const d=a.get(c)||0;o=c+"-"+d,a.set(c,d+1)}}const l=sL(e,i,o);l!==void 0&&n.push(l)}return n}function mZ(e,t,n){const r=yJ(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?oJ(n):NJ(n)),r.property==="style"){let a=typeof n=="object"?n:fZ(e,String(n));return e.stylePropertyNameCase==="css"&&(a=pZ(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?xJ[r.property]||r.property:r.attribute,n]}}function fZ(e,t){try{return YJ(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new ts("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=nL+"#cannot-parse-style-attribute",a}}function aL(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,o;for(;++i<a.length;){const l=HC(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=o}else r=HC(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return sN.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ju(e)}function Ju(e,t){const n=new ts("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=nL+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pZ(e){const t={};let n;for(n in e)sN.call(e,n)&&(t[xZ(n)]=e[n]);return t}function xZ(e){let t=e.replace(ZJ,gZ);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function gZ(e){return"-"+e.toLowerCase()}const tv={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},vZ={};function yZ(e,t){const n=vZ,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return iL(e,r,a)}function iL(e,t,n){if(bZ(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return sk(e.children,t,n)}return Array.isArray(e)?sk(e,t,n):""}function sk(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=iL(e[a],t,n);return r.join("")}function bZ(e){return!!(e&&typeof e=="object")}const rk=document.createElement("i");function iN(e){const t="&"+e+";";rk.innerHTML=t;const n=rk.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ya(e,t,n,r){const a=e.length;let i=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function ur(e,t){return e.length>0?(ya(e,e.length,0,t),e):t}const ak={}.hasOwnProperty;function wZ(e){const t={};let n=-1;for(;++n<e.length;)jZ(t,e[n]);return t}function jZ(e,t){let n;for(n in t){const a=(ak.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){ak.call(a,o)||(a[o]=[]);const l=i[o];NZ(a[o],Array.isArray(l)?l:l?[l]:[])}}}function NZ(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ya(e,0,0,r)}function oL(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function xc(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const la=io(/[A-Za-z]/),Bs=io(/[\dA-Za-z]/),SZ=io(/[#-'*+\--9=?A-Z^-~]/);function eb(e){return e!==null&&(e<32||e===127)}const tb=io(/\d/),_Z=io(/[\dA-Fa-f]/),CZ=io(/[!-/:-@[-`{-~]/);function We(e){return e!==null&&e<-2}function ks(e){return e!==null&&(e<0||e===32)}function xt(e){return e===-2||e===-1||e===32}const kZ=io(new RegExp("\\p{P}|\\p{S}","u")),EZ=io(/\s/);function io(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function yd(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&Bs(e.charCodeAt(n+1))&&Bs(e.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),a=1):o="�"}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Tt(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return xt(c)?(e.enter(n),l(c)):t(c)}function l(c){return xt(c)&&i++<a?(e.consume(c),l):(e.exit(n),t(c))}}const TZ={tokenize:AZ};function AZ(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Tt(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return We(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const PZ={tokenize:IZ},ik={tokenize:DZ};function IZ(e){const t=this,n=[];let r=0,a,i,o;return l;function l(w){if(r<n.length){const C=n[r];return t.containerState=C[1],e.attempt(C[0].continuation,c,d)(w)}return d(w)}function c(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&b();const C=t.events.length;let _=C,S;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){S=t.events[_][1].end;break}g(r);let N=C;for(;N<t.events.length;)t.events[N][1].end={...S},N++;return ya(t.events,_+1,0,t.events.slice(C)),t.events.length=N,d(w)}return l(w)}function d(w){if(r===n.length){if(!a)return m(w);if(a.currentConstruct&&a.currentConstruct.concrete)return v(w);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ik,u,h)(w)}function u(w){return a&&b(),g(r),m(w)}function h(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,v(w)}function m(w){return t.containerState={},e.attempt(ik,p,v)(w)}function p(w){return r++,n.push([t.currentConstruct,t.containerState]),m(w)}function v(w){if(w===null){a&&b(),g(0),e.consume(w);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),x(w)}function x(w){if(w===null){y(e.exit("chunkFlow"),!0),g(0),e.consume(w);return}return We(w)?(e.consume(w),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),x)}function y(w,C){const _=t.sliceStream(w);if(C&&_.push(null),w.previous=i,i&&(i.next=w),i=w,a.defineSkip(w.start),a.write(_),t.parser.lazy[w.start.line]){let S=a.events.length;for(;S--;)if(a.events[S][1].start.offset<o&&(!a.events[S][1].end||a.events[S][1].end.offset>o))return;const N=t.events.length;let j=N,k,T;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){if(k){T=t.events[j][1].end;break}k=!0}for(g(r),S=N;S<t.events.length;)t.events[S][1].end={...T},S++;ya(t.events,j+1,0,t.events.slice(N)),t.events.length=S}}function g(w){let C=n.length;for(;C-- >w;){const _=n[C];t.containerState=_[1],_[0].exit.call(t,e)}n.length=w}function b(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function DZ(e,t,n){return Tt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ok(e){if(e===null||ks(e)||EZ(e))return 1;if(kZ(e))return 2}function oN(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const nb={name:"attention",resolveAll:RZ,tokenize:MZ};function RZ(e,t){let n=-1,r,a,i,o,l,c,d,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},m={...e[n][1].start};lk(h,-c),lk(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=ur(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=ur(d,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",i,t]]),d=ur(d,oN(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=ur(d,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,d=ur(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ya(e,r-1,n-r+3,d),n=r+d.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function MZ(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=ok(r);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const d=e.exit("attentionSequence"),u=ok(c),h=!u||u===2&&a||n.includes(c),m=!a||a===2&&u||n.includes(r);return d._open=!!(i===42?h:h&&(a||!m)),d._close=!!(i===42?m:m&&(u||!h)),t(c)}}function lk(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const LZ={name:"autolink",tokenize:OZ};function OZ(e,t,n){let r=0;return a;function a(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(p){return la(p)?(e.consume(p),o):p===64?n(p):d(p)}function o(p){return p===43||p===45||p===46||Bs(p)?(r=1,l(p)):d(p)}function l(p){return p===58?(e.consume(p),r=0,c):(p===43||p===45||p===46||Bs(p))&&r++<32?(e.consume(p),l):(r=0,d(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||eb(p)?n(p):(e.consume(p),c)}function d(p){return p===64?(e.consume(p),u):SZ(p)?(e.consume(p),d):n(p)}function u(p){return Bs(p)?h(p):n(p)}function h(p){return p===46?(e.consume(p),r=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):m(p)}function m(p){if((p===45||Bs(p))&&r++<63){const v=p===45?m:h;return e.consume(p),v}return n(p)}}const kx={partial:!0,tokenize:FZ};function FZ(e,t,n){return r;function r(i){return xt(i)?Tt(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||We(i)?t(i):n(i)}}const lL={continuation:{tokenize:zZ},exit:UZ,name:"blockQuote",tokenize:$Z};function $Z(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return xt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function zZ(e,t,n){const r=this;return a;function a(o){return xt(o)?Tt(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(lL,t,n)(o)}}function UZ(e){e.exit("blockQuote")}const cL={name:"characterEscape",tokenize:BZ};function BZ(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return CZ(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const dL={name:"characterReference",tokenize:VZ};function VZ(e,t,n){const r=this;let a=0,i,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),i=31,o=Bs,u(h))}function d(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=_Z,u):(e.enter("characterReferenceValue"),i=7,o=tb,u(h))}function u(h){if(h===59&&a){const m=e.exit("characterReferenceValue");return o===Bs&&!iN(r.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&a++<i?(e.consume(h),u):n(h)}}const ck={partial:!0,tokenize:WZ},dk={concrete:!0,name:"codeFenced",tokenize:qZ};function qZ(e,t,n){const r=this,a={partial:!0,tokenize:_};let i=0,o=0,l;return c;function c(S){return d(S)}function d(S){const N=r.events[r.events.length-1];return i=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,l=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(S)}function u(S){return S===l?(o++,e.consume(S),u):o<3?n(S):(e.exit("codeFencedFenceSequence"),xt(S)?Tt(e,h,"whitespace")(S):h(S))}function h(S){return S===null||We(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(ck,x,C)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(S))}function m(S){return S===null||We(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(S)):xt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Tt(e,p,"whitespace")(S)):S===96&&S===l?n(S):(e.consume(S),m)}function p(S){return S===null||We(S)?h(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),v(S))}function v(S){return S===null||We(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(S)):S===96&&S===l?n(S):(e.consume(S),v)}function x(S){return e.attempt(a,C,y)(S)}function y(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),g}function g(S){return i>0&&xt(S)?Tt(e,b,"linePrefix",i+1)(S):b(S)}function b(S){return S===null||We(S)?e.check(ck,x,C)(S):(e.enter("codeFlowValue"),w(S))}function w(S){return S===null||We(S)?(e.exit("codeFlowValue"),b(S)):(e.consume(S),w)}function C(S){return e.exit("codeFenced"),t(S)}function _(S,N,j){let k=0;return T;function T(U){return S.enter("lineEnding"),S.consume(U),S.exit("lineEnding"),A}function A(U){return S.enter("codeFencedFence"),xt(U)?Tt(S,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):R(U)}function R(U){return U===l?(S.enter("codeFencedFenceSequence"),F(U)):j(U)}function F(U){return U===l?(k++,S.consume(U),F):k>=o?(S.exit("codeFencedFenceSequence"),xt(U)?Tt(S,O,"whitespace")(U):O(U)):j(U)}function O(U){return U===null||We(U)?(S.exit("codeFencedFence"),N(U)):j(U)}}}function WZ(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const nv={name:"codeIndented",tokenize:GZ},HZ={partial:!0,tokenize:KZ};function GZ(e,t,n){const r=this;return a;function a(d){return e.enter("codeIndented"),Tt(e,i,"linePrefix",5)(d)}function i(d){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):We(d)?e.attempt(HZ,o,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||We(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function KZ(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):We(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):Tt(e,i,"linePrefix",5)(o)}function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):We(o)?a(o):n(o)}}const QZ={name:"codeText",previous:XZ,resolve:YZ,tokenize:JZ};function YZ(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function XZ(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function JZ(e,t,n){let r=0,a,i;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),a=0,u(h)):We(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||We(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),d)}function u(h){return h===96?(e.consume(h),a++,u):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",d(h))}}class ZZ{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Dd(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Dd(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Dd(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Dd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Dd(this.left,n.reverse())}}}function Dd(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function uL(e){const t={};let n=-1,r,a,i,o,l,c,d;const u=new ZZ(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,eee(u,n)),n=t[n],d=!0);else if(r[1]._container){for(i=n,a=void 0;i--;)if(o=u.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(u.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...u.get(a)[1].start},l=u.slice(a,n),l.unshift(r),u.splice(a,n-a+1,l))}}return ya(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function eee(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const i=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,h,m=-1,p=n,v=0,x=0;const y=[x];for(;p;){for(;e.get(++a)[1]!==p;);i.push(a),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(x=m+1,y.push(x),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),m=y.length;m--;){const g=l.slice(y[m],y[m+1]),b=i.pop();c.push([b,b+g.length-1]),e.splice(b,2,g)}for(c.reverse(),m=-1;++m<c.length;)d[v+c[m][0]]=v+c[m][1],v+=c[m][1]-c[m][0]-1;return d}const tee={resolve:see,tokenize:ree},nee={partial:!0,tokenize:aee};function see(e){return uL(e),e}function ree(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?i(l):We(l)?e.check(nee,o,i)(l):(e.consume(l),a)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function aee(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Tt(e,i,"linePrefix")}function i(o){if(o===null||We(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function hL(e,t,n,r,a,i,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(g){return g===60?(e.enter(r),e.enter(a),e.enter(i),e.consume(g),e.exit(i),m):g===null||g===32||g===41||eb(g)?n(g):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),x(g))}function m(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===62?(e.exit("chunkString"),e.exit(l),m(g)):g===null||g===60||We(g)?n(g):(e.consume(g),g===92?v:p)}function v(g){return g===60||g===62||g===92?(e.consume(g),p):p(g)}function x(g){return!u&&(g===null||g===41||ks(g))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(g)):u<d&&g===40?(e.consume(g),u++,x):g===41?(e.consume(g),u--,x):g===null||g===32||g===40||eb(g)?n(g):(e.consume(g),g===92?y:x)}function y(g){return g===40||g===41||g===92?(e.consume(g),x):x(g)}}function mL(e,t,n,r,a,i){const o=this;let l=0,c;return d;function d(p){return e.enter(r),e.enter(a),e.consume(p),e.exit(a),e.enter(i),u}function u(p){return l>999||p===null||p===91||p===93&&!c||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(e.exit(i),e.enter(a),e.consume(p),e.exit(a),e.exit(r),t):We(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||We(p)||l++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!xt(p)),p===92?m:h)}function m(p){return p===91||p===92||p===93?(e.consume(p),l++,h):h(p)}}function fL(e,t,n,r,a,i){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(a),e.consume(m),e.exit(a),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):(e.enter(i),d(m))}function d(m){return m===o?(e.exit(i),c(o)):m===null?n(m):We(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Tt(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||We(m)?(e.exit("chunkString"),d(m)):(e.consume(m),m===92?h:u)}function h(m){return m===o||m===92?(e.consume(m),u):u(m)}}function gu(e,t){let n;return r;function r(a){return We(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):xt(a)?Tt(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const iee={name:"definition",tokenize:lee},oee={partial:!0,tokenize:cee};function lee(e,t,n){const r=this;let a;return i;function i(p){return e.enter("definition"),o(p)}function o(p){return mL.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return a=xc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return ks(p)?gu(e,d)(p):d(p)}function d(p){return hL(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(oee,h,h)(p)}function h(p){return xt(p)?Tt(e,m,"whitespace")(p):m(p)}function m(p){return p===null||We(p)?(e.exit("definition"),r.parser.defined.push(a),t(p)):n(p)}}function cee(e,t,n){return r;function r(l){return ks(l)?gu(e,a)(l):n(l)}function a(l){return fL(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return xt(l)?Tt(e,o,"whitespace")(l):o(l)}function o(l){return l===null||We(l)?t(l):n(l)}}const dee={name:"hardBreakEscape",tokenize:uee};function uee(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return We(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const hee={name:"headingAtx",resolve:mee,tokenize:fee};function mee(e,t){let n=e.length-2,r=3,a,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ya(e,r,n-r+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function fee(e,t,n){let r=0;return a;function a(u){return e.enter("atxHeading"),i(u)}function i(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||ks(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||We(u)?(e.exit("atxHeading"),t(u)):xt(u)?Tt(e,l,"whitespace")(u):(e.enter("atxHeadingText"),d(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||ks(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),d)}}const pee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uk=["pre","script","style","textarea"],xee={concrete:!0,name:"htmlFlow",resolveTo:yee,tokenize:bee},gee={partial:!0,tokenize:jee},vee={partial:!0,tokenize:wee};function yee(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bee(e,t,n){const r=this;let a,i,o,l,c;return d;function d(P){return u(P)}function u(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),h}function h(P){return P===33?(e.consume(P),m):P===47?(e.consume(P),i=!0,x):P===63?(e.consume(P),a=3,r.interrupt?t:I):la(P)?(e.consume(P),o=String.fromCharCode(P),y):n(P)}function m(P){return P===45?(e.consume(P),a=2,p):P===91?(e.consume(P),a=5,l=0,v):la(P)?(e.consume(P),a=4,r.interrupt?t:I):n(P)}function p(P){return P===45?(e.consume(P),r.interrupt?t:I):n(P)}function v(P){const Z="CDATA[";return P===Z.charCodeAt(l++)?(e.consume(P),l===Z.length?r.interrupt?t:R:v):n(P)}function x(P){return la(P)?(e.consume(P),o=String.fromCharCode(P),y):n(P)}function y(P){if(P===null||P===47||P===62||ks(P)){const Z=P===47,ee=o.toLowerCase();return!Z&&!i&&uk.includes(ee)?(a=1,r.interrupt?t(P):R(P)):pee.includes(o.toLowerCase())?(a=6,Z?(e.consume(P),g):r.interrupt?t(P):R(P)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):i?b(P):w(P))}return P===45||Bs(P)?(e.consume(P),o+=String.fromCharCode(P),y):n(P)}function g(P){return P===62?(e.consume(P),r.interrupt?t:R):n(P)}function b(P){return xt(P)?(e.consume(P),b):T(P)}function w(P){return P===47?(e.consume(P),T):P===58||P===95||la(P)?(e.consume(P),C):xt(P)?(e.consume(P),w):T(P)}function C(P){return P===45||P===46||P===58||P===95||Bs(P)?(e.consume(P),C):_(P)}function _(P){return P===61?(e.consume(P),S):xt(P)?(e.consume(P),_):w(P)}function S(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,N):xt(P)?(e.consume(P),S):j(P)}function N(P){return P===c?(e.consume(P),c=null,k):P===null||We(P)?n(P):(e.consume(P),N)}function j(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||ks(P)?_(P):(e.consume(P),j)}function k(P){return P===47||P===62||xt(P)?w(P):n(P)}function T(P){return P===62?(e.consume(P),A):n(P)}function A(P){return P===null||We(P)?R(P):xt(P)?(e.consume(P),A):n(P)}function R(P){return P===45&&a===2?(e.consume(P),M):P===60&&a===1?(e.consume(P),B):P===62&&a===4?(e.consume(P),q):P===63&&a===3?(e.consume(P),I):P===93&&a===5?(e.consume(P),E):We(P)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(gee,$,F)(P)):P===null||We(P)?(e.exit("htmlFlowData"),F(P)):(e.consume(P),R)}function F(P){return e.check(vee,O,$)(P)}function O(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return P===null||We(P)?F(P):(e.enter("htmlFlowData"),R(P))}function M(P){return P===45?(e.consume(P),I):R(P)}function B(P){return P===47?(e.consume(P),o="",D):R(P)}function D(P){if(P===62){const Z=o.toLowerCase();return uk.includes(Z)?(e.consume(P),q):R(P)}return la(P)&&o.length<8?(e.consume(P),o+=String.fromCharCode(P),D):R(P)}function E(P){return P===93?(e.consume(P),I):R(P)}function I(P){return P===62?(e.consume(P),q):P===45&&a===2?(e.consume(P),I):R(P)}function q(P){return P===null||We(P)?(e.exit("htmlFlowData"),$(P)):(e.consume(P),q)}function $(P){return e.exit("htmlFlow"),t(P)}}function wee(e,t,n){const r=this;return a;function a(o){return We(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function jee(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(kx,t,n)}}const Nee={name:"htmlText",tokenize:See};function See(e,t,n){const r=this;let a,i,o;return l;function l(I){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(I),c}function c(I){return I===33?(e.consume(I),d):I===47?(e.consume(I),_):I===63?(e.consume(I),w):la(I)?(e.consume(I),j):n(I)}function d(I){return I===45?(e.consume(I),u):I===91?(e.consume(I),i=0,v):la(I)?(e.consume(I),b):n(I)}function u(I){return I===45?(e.consume(I),p):n(I)}function h(I){return I===null?n(I):I===45?(e.consume(I),m):We(I)?(o=h,B(I)):(e.consume(I),h)}function m(I){return I===45?(e.consume(I),p):h(I)}function p(I){return I===62?M(I):I===45?m(I):h(I)}function v(I){const q="CDATA[";return I===q.charCodeAt(i++)?(e.consume(I),i===q.length?x:v):n(I)}function x(I){return I===null?n(I):I===93?(e.consume(I),y):We(I)?(o=x,B(I)):(e.consume(I),x)}function y(I){return I===93?(e.consume(I),g):x(I)}function g(I){return I===62?M(I):I===93?(e.consume(I),g):x(I)}function b(I){return I===null||I===62?M(I):We(I)?(o=b,B(I)):(e.consume(I),b)}function w(I){return I===null?n(I):I===63?(e.consume(I),C):We(I)?(o=w,B(I)):(e.consume(I),w)}function C(I){return I===62?M(I):w(I)}function _(I){return la(I)?(e.consume(I),S):n(I)}function S(I){return I===45||Bs(I)?(e.consume(I),S):N(I)}function N(I){return We(I)?(o=N,B(I)):xt(I)?(e.consume(I),N):M(I)}function j(I){return I===45||Bs(I)?(e.consume(I),j):I===47||I===62||ks(I)?k(I):n(I)}function k(I){return I===47?(e.consume(I),M):I===58||I===95||la(I)?(e.consume(I),T):We(I)?(o=k,B(I)):xt(I)?(e.consume(I),k):M(I)}function T(I){return I===45||I===46||I===58||I===95||Bs(I)?(e.consume(I),T):A(I)}function A(I){return I===61?(e.consume(I),R):We(I)?(o=A,B(I)):xt(I)?(e.consume(I),A):k(I)}function R(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),a=I,F):We(I)?(o=R,B(I)):xt(I)?(e.consume(I),R):(e.consume(I),O)}function F(I){return I===a?(e.consume(I),a=void 0,U):I===null?n(I):We(I)?(o=F,B(I)):(e.consume(I),F)}function O(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||ks(I)?k(I):(e.consume(I),O)}function U(I){return I===47||I===62||ks(I)?k(I):n(I)}function M(I){return I===62?(e.consume(I),e.exit("htmlTextData"),e.exit("htmlText"),t):n(I)}function B(I){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),D}function D(I){return xt(I)?Tt(e,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):E(I)}function E(I){return e.enter("htmlTextData"),o(I)}}const lN={name:"labelEnd",resolveAll:Eee,resolveTo:Tee,tokenize:Aee},_ee={tokenize:Pee},Cee={tokenize:Iee},kee={tokenize:Dee};function Eee(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&ya(e,0,e.length,n),e}function Tee(e,t){let n=e.length,r=0,a,i,o,l;for(;n--;)if(a=e[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=ur(l,e.slice(i+1,i+r+3)),l=ur(l,[["enter",u,t]]),l=ur(l,oN(t.parser.constructs.insideSpan.null,e.slice(i+r+4,o-3),t)),l=ur(l,[["exit",u,t],e[o-2],e[o-1],["exit",d,t]]),l=ur(l,e.slice(o+1)),l=ur(l,[["exit",c,t]]),ya(e,i,e.length,l),e}function Aee(e,t,n){const r=this;let a=r.events.length,i,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){i=r.events[a][1];break}return l;function l(m){return i?i._inactive?h(m):(o=r.parser.defined.includes(xc(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(_ee,u,o?u:h)(m):m===91?e.attempt(Cee,u,o?d:h)(m):o?u(m):h(m)}function d(m){return e.attempt(kee,u,h)(m)}function u(m){return t(m)}function h(m){return i._balanced=!0,n(m)}}function Pee(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),a}function a(h){return ks(h)?gu(e,i)(h):i(h)}function i(h){return h===41?u(h):hL(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return ks(h)?gu(e,c)(h):u(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?fL(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function d(h){return ks(h)?gu(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Iee(e,t,n){const r=this;return a;function a(l){return mL.call(r,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(xc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function Dee(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const Ree={name:"labelStartImage",resolveAll:lN.resolveAll,tokenize:Mee};function Mee(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Lee={name:"labelStartLink",resolveAll:lN.resolveAll,tokenize:Oee};function Oee(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const sv={name:"lineEnding",tokenize:Fee};function Fee(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Tt(e,t,"linePrefix")}}const lf={name:"thematicBreak",tokenize:$ee};function $ee(e,t,n){let r=0,a;return i;function i(d){return e.enter("thematicBreak"),o(d)}function o(d){return a=d,l(d)}function l(d){return d===a?(e.enter("thematicBreakSequence"),c(d)):r>=3&&(d===null||We(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===a?(e.consume(d),r++,c):(e.exit("thematicBreakSequence"),xt(d)?Tt(e,l,"whitespace")(d):l(d))}}const xs={continuation:{tokenize:Vee},exit:Wee,name:"list",tokenize:Bee},zee={partial:!0,tokenize:Hee},Uee={partial:!0,tokenize:qee};function Bee(e,t,n){const r=this,a=r.events[r.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(p){const v=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:tb(p)){if(r.containerState.type||(r.containerState.type=v,e.enter(v,{_container:!0})),v==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(lf,n,d)(p):d(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return tb(p)&&++o<10?(e.consume(p),c):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),d(p)):n(p)}function d(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(kx,r.interrupt?n:u,e.attempt(zee,m,h))}function u(p){return r.containerState.initialBlankLine=!0,i++,m(p)}function h(p){return xt(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),m):n(p)}function m(p){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function Vee(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(kx,a,i);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Tt(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!xt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Uee,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Tt(e,e.attempt(xs,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function qee(e,t,n){const r=this;return Tt(e,a,"listItemIndent",r.containerState.size+1);function a(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(i):n(i)}}function Wee(e){e.exit(this.containerState.type)}function Hee(e,t,n){const r=this;return Tt(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const o=r.events[r.events.length-1];return!xt(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const hk={name:"setextUnderline",resolveTo:Gee,tokenize:Kee};function Gee(e,t){let n=e.length,r,a,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",o,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Kee(e,t,n){const r=this;let a;return i;function i(d){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),a=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===a?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),xt(d)?Tt(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||We(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const Qee={tokenize:Yee};function Yee(e){const t=this,n=e.attempt(kx,r,e.attempt(this.parser.constructs.flowInitial,a,Tt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(tee,a)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Xee={resolveAll:xL()},Jee=pL("string"),Zee=pL("text");function pL(e){return{resolveAll:xL(e==="text"?ete:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],i=n.attempt(a,o,l);return o;function o(u){return d(u)?i(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return d(u)?(n.exit("data"),i(u)):(n.consume(u),c)}function d(u){if(u===null)return!0;const h=a[u];let m=-1;if(h)for(;++m<h.length;){const p=h[m];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function xL(e){return t;function t(n,r){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(n,r):n}}function ete(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let i=a.length,o=-1,l=0,c;for(;i--;){const d=a[i];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const tte={42:xs,43:xs,45:xs,48:xs,49:xs,50:xs,51:xs,52:xs,53:xs,54:xs,55:xs,56:xs,57:xs,62:lL},nte={91:iee},ste={[-2]:nv,[-1]:nv,32:nv},rte={35:hee,42:lf,45:[hk,lf],60:xee,61:hk,95:lf,96:dk,126:dk},ate={38:dL,92:cL},ite={[-5]:sv,[-4]:sv,[-3]:sv,33:Ree,38:dL,42:nb,60:[LZ,Nee],91:Lee,92:[dee,cL],93:lN,95:nb,96:QZ},ote={null:[nb,Xee]},lte={null:[42,95]},cte={null:[]},dte=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:lte,contentInitial:nte,disable:cte,document:tte,flow:rte,flowInitial:ste,insideSpan:ote,string:ate,text:ite},Symbol.toStringTag,{value:"Module"}));function ute(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},i=[];let o=[],l=[];const c={attempt:N(_),check:N(S),consume:b,enter:w,exit:C,interrupt:N(S,{interrupt:!0})},d={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:e,previous:null,sliceSerialize:m,sliceStream:p,write:h};let u=t.tokenize.call(d,c);return t.resolveAll&&i.push(t),d;function h(A){return o=ur(o,A),y(),o[o.length-1]!==null?[]:(j(t,0),d.events=oN(i,d.events,d),d.events)}function m(A,R){return mte(p(A),R)}function p(A){return hte(o,A)}function v(){const{_bufferIndex:A,_index:R,line:F,column:O,offset:U}=r;return{_bufferIndex:A,_index:R,line:F,column:O,offset:U}}function x(A){a[A.line]=A.column,T()}function y(){let A;for(;r._index<o.length;){const R=o[r._index];if(typeof R=="string")for(A=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===A&&r._bufferIndex<R.length;)g(R.charCodeAt(r._bufferIndex));else g(R)}}function g(A){u=u(A)}function b(A){We(A)?(r.line++,r.column=1,r.offset+=A===-3?2:1,T()):A!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=A}function w(A,R){const F=R||{};return F.type=A,F.start=v(),d.events.push(["enter",F,d]),l.push(F),F}function C(A){const R=l.pop();return R.end=v(),d.events.push(["exit",R,d]),R}function _(A,R){j(A,R.from)}function S(A,R){R.restore()}function N(A,R){return F;function F(O,U,M){let B,D,E,I;return Array.isArray(O)?$(O):"tokenize"in O?$([O]):q(O);function q(J){return te;function te(ie){const ce=ie!==null&&J[ie],ve=ie!==null&&J.null,me=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return $(me)(ie)}}function $(J){return B=J,D=0,J.length===0?M:P(J[D])}function P(J){return te;function te(ie){return I=k(),E=J,J.partial||(d.currentConstruct=J),J.name&&d.parser.constructs.disable.null.includes(J.name)?ee():J.tokenize.call(R?Object.assign(Object.create(d),R):d,c,Z,ee)(ie)}}function Z(J){return A(E,I),U}function ee(J){return I.restore(),++D<B.length?P(B[D]):M}}}function j(A,R){A.resolveAll&&!i.includes(A)&&i.push(A),A.resolve&&ya(d.events,R,d.events.length-R,A.resolve(d.events.slice(R),d)),A.resolveTo&&(d.events=A.resolveTo(d.events,d))}function k(){const A=v(),R=d.previous,F=d.currentConstruct,O=d.events.length,U=Array.from(l);return{from:O,restore:M};function M(){r=A,d.previous=R,d.currentConstruct=F,d.events.length=O,l=U,T()}}function T(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function hte(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,i)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}i>0&&o.push(e[a].slice(0,i))}return o}function mte(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(i)}a=i===-2,r.push(o)}return r.join("")}function fte(e){const r={constructs:wZ([dte,...(e||{}).extensions||[]]),content:a(TZ),defined:[],document:a(PZ),flow:a(Qee),lazy:{},string:a(Jee),text:a(Zee)};return r;function a(i){return o;function o(l){return ute(r,i,l)}}}function pte(e){for(;!uL(e););return e}const mk=/[\0\t\n\r]/g;function xte(){let e=1,t="",n=!0,r;return a;function a(i,o,l){const c=[];let d,u,h,m,p;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,t="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(mk.lastIndex=h,d=mk.exec(i),m=d&&d.index!==void 0?d.index:i.length,p=i.charCodeAt(m),!d){t=i.slice(h);break}if(p===10&&h===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<m&&(c.push(i.slice(h,m)),e+=m-h),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const gte=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function vte(e){return e.replace(gte,yte)}function yte(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),i=a===120||a===88;return oL(n.slice(i?2:1),i?16:10)}return iN(n)||e}const gL={}.hasOwnProperty;function bte(e,t,n){return typeof t!="string"&&(n=t,t=void 0),wte(n)(pte(fte(n).document().write(xte()(e,t,!0))))}function wte(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Le),autolinkProtocol:k,autolinkEmail:k,atxHeading:i(Fe),blockQuote:i(ve),characterEscape:k,characterReference:k,codeFenced:i(me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(me,o),codeText:i(je,o),codeTextData:k,data:k,codeFlowValue:k,definition:i(Ye),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(Oe),hardBreakEscape:i(Ie),hardBreakTrailing:i(Ie),htmlFlow:i(ct,o),htmlFlowData:k,htmlText:i(ct,o),htmlTextData:k,image:i(Me),label:o,link:i(Le),listItem:i($n),listItemValue:m,listOrdered:i(vt,h),listUnordered:i(vt),paragraph:i(wt),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(Fe),strong:i(gn),thematicBreak:i(Ne)},exit:{atxHeading:c(),atxHeadingSequence:_,autolink:c(),autolinkEmail:ce,autolinkProtocol:ie,blockQuote:c(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:J,characterReference:te,codeFenced:c(y),codeFencedFence:x,codeFencedFenceInfo:p,codeFencedFenceMeta:v,codeFlowValue:T,codeIndented:c(g),codeText:c(U),codeTextData:T,data:T,definition:c(),definitionDestinationString:C,definitionLabelString:b,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(R),hardBreakTrailing:c(R),htmlFlow:c(F),htmlFlowData:T,htmlText:c(O),htmlTextData:T,image:c(B),label:E,labelText:D,lineEnding:A,link:c(M),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Z,resourceDestinationString:I,resourceTitleString:q,resource:$,setextHeading:c(j),setextHeadingLineSequence:N,setextHeadingText:S,strong:c(),thematicBreak:c()}};vL(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(K){let ae={type:"root",children:[]};const ye={stack:[ae],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:u,data:n},Re=[];let Ge=-1;for(;++Ge<K.length;)if(K[Ge][1].type==="listOrdered"||K[Ge][1].type==="listUnordered")if(K[Ge][0]==="enter")Re.push(Ge);else{const se=Re.pop();Ge=a(K,se,Ge)}for(Ge=-1;++Ge<K.length;){const se=t[K[Ge][0]];gL.call(se,K[Ge][1].type)&&se[K[Ge][1].type].call(Object.assign({sliceSerialize:K[Ge][2].sliceSerialize},ye),K[Ge][1])}if(ye.tokenStack.length>0){const se=ye.tokenStack[ye.tokenStack.length-1];(se[1]||fk).call(ye,void 0,se[0])}for(ae.position={start:ri(K.length>0?K[0][1].start:{line:1,column:1,offset:0}),end:ri(K.length>0?K[K.length-2][1].end:{line:1,column:1,offset:0})},Ge=-1;++Ge<t.transforms.length;)ae=t.transforms[Ge](ae)||ae;return ae}function a(K,ae,ye){let Re=ae-1,Ge=-1,se=!1,De,it,Jt,rn;for(;++Re<=ye;){const mt=K[Re];switch(mt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{mt[0]==="enter"?Ge++:Ge--,rn=void 0;break}case"lineEndingBlank":{mt[0]==="enter"&&(De&&!rn&&!Ge&&!Jt&&(Jt=Re),rn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:rn=void 0}if(!Ge&&mt[0]==="enter"&&mt[1].type==="listItemPrefix"||Ge===-1&&mt[0]==="exit"&&(mt[1].type==="listUnordered"||mt[1].type==="listOrdered")){if(De){let zn=Re;for(it=void 0;zn--;){const Te=K[zn];if(Te[1].type==="lineEnding"||Te[1].type==="lineEndingBlank"){if(Te[0]==="exit")continue;it&&(K[it][1].type="lineEndingBlank",se=!0),Te[1].type="lineEnding",it=zn}else if(!(Te[1].type==="linePrefix"||Te[1].type==="blockQuotePrefix"||Te[1].type==="blockQuotePrefixWhitespace"||Te[1].type==="blockQuoteMarker"||Te[1].type==="listItemIndent"))break}Jt&&(!it||Jt<it)&&(De._spread=!0),De.end=Object.assign({},it?K[it][1].start:mt[1].end),K.splice(it||Re,0,["exit",De,mt[2]]),Re++,ye++}if(mt[1].type==="listItemPrefix"){const zn={type:"listItem",_spread:!1,start:Object.assign({},mt[1].start),end:void 0};De=zn,K.splice(Re,0,["enter",zn,mt[2]]),Re++,ye++,Jt=void 0,rn=!0}}}return K[ae][1]._spread=se,ye}function i(K,ae){return ye;function ye(Re){l.call(this,K(Re),Re),ae&&ae.call(this,Re)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(K,ae,ye){this.stack[this.stack.length-1].children.push(K),this.stack.push(K),this.tokenStack.push([ae,ye||void 0]),K.position={start:ri(ae.start),end:void 0}}function c(K){return ae;function ae(ye){K&&K.call(this,ye),d.call(this,ye)}}function d(K,ae){const ye=this.stack.pop(),Re=this.tokenStack.pop();if(Re)Re[0].type!==K.type&&(ae?ae.call(this,K,Re[0]):(Re[1]||fk).call(this,K,Re[0]));else throw new Error("Cannot close `"+K.type+"` ("+xu({start:K.start,end:K.end})+"): it’s not open");ye.position.end=ri(K.end)}function u(){return yZ(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(K){if(this.data.expectingFirstListItemValue){const ae=this.stack[this.stack.length-2];ae.start=Number.parseInt(this.sliceSerialize(K),10),this.data.expectingFirstListItemValue=void 0}}function p(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.lang=K}function v(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.meta=K}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.value=K.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.value=K.replace(/(\r?\n|\r)$/g,"")}function b(K){const ae=this.resume(),ye=this.stack[this.stack.length-1];ye.label=ae,ye.identifier=xc(this.sliceSerialize(K)).toLowerCase()}function w(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.title=K}function C(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.url=K}function _(K){const ae=this.stack[this.stack.length-1];if(!ae.depth){const ye=this.sliceSerialize(K).length;ae.depth=ye}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function N(K){const ae=this.stack[this.stack.length-1];ae.depth=this.sliceSerialize(K).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function k(K){const ye=this.stack[this.stack.length-1].children;let Re=ye[ye.length-1];(!Re||Re.type!=="text")&&(Re=de(),Re.position={start:ri(K.start),end:void 0},ye.push(Re)),this.stack.push(Re)}function T(K){const ae=this.stack.pop();ae.value+=this.sliceSerialize(K),ae.position.end=ri(K.end)}function A(K){const ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=ae.children[ae.children.length-1];ye.position.end=ri(K.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ae.type)&&(k.call(this,K),T.call(this,K))}function R(){this.data.atHardBreak=!0}function F(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.value=K}function O(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.value=K}function U(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.value=K}function M(){const K=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";K.type+="Reference",K.referenceType=ae,delete K.url,delete K.title}else delete K.identifier,delete K.label;this.data.referenceType=void 0}function B(){const K=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";K.type+="Reference",K.referenceType=ae,delete K.url,delete K.title}else delete K.identifier,delete K.label;this.data.referenceType=void 0}function D(K){const ae=this.sliceSerialize(K),ye=this.stack[this.stack.length-2];ye.label=vte(ae),ye.identifier=xc(ae).toLowerCase()}function E(){const K=this.stack[this.stack.length-1],ae=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const Re=K.children;ye.children=Re}else ye.alt=ae}function I(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.url=K}function q(){const K=this.resume(),ae=this.stack[this.stack.length-1];ae.title=K}function $(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Z(K){const ae=this.resume(),ye=this.stack[this.stack.length-1];ye.label=ae,ye.identifier=xc(this.sliceSerialize(K)).toLowerCase(),this.data.referenceType="full"}function ee(K){this.data.characterReferenceType=K.type}function J(K){const ae=this.sliceSerialize(K),ye=this.data.characterReferenceType;let Re;ye?(Re=oL(ae,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Re=iN(ae);const Ge=this.stack[this.stack.length-1];Ge.value+=Re}function te(K){const ae=this.stack.pop();ae.position.end=ri(K.end)}function ie(K){T.call(this,K);const ae=this.stack[this.stack.length-1];ae.url=this.sliceSerialize(K)}function ce(K){T.call(this,K);const ae=this.stack[this.stack.length-1];ae.url="mailto:"+this.sliceSerialize(K)}function ve(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function je(){return{type:"inlineCode",value:""}}function Ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Oe(){return{type:"emphasis",children:[]}}function Fe(){return{type:"heading",depth:0,children:[]}}function Ie(){return{type:"break"}}function ct(){return{type:"html",value:""}}function Me(){return{type:"image",title:null,url:"",alt:null}}function Le(){return{type:"link",title:null,url:"",children:[]}}function vt(K){return{type:"list",ordered:K.type==="listOrdered",start:null,spread:K._spread,children:[]}}function $n(K){return{type:"listItem",spread:K._spread,checked:null,children:[]}}function wt(){return{type:"paragraph",children:[]}}function gn(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function Ne(){return{type:"thematicBreak"}}}function ri(e){return{line:e.line,column:e.column,offset:e.offset}}function vL(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?vL(e,r):jte(e,r)}}function jte(e,t){let n;for(n in t)if(gL.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function fk(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+xu({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+xu({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+xu({start:t.start,end:t.end})+") is still open")}function Nte(e){const t=this;t.parser=n;function n(r){return bte(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Ste(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function _te(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Cte(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function kte(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ete(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Tte(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=yd(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function Ate(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Pte(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function yL(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function Ite(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yL(e,t);const a={src:yd(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function Dte(e,t){const n={src:yd(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Rte(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Mte(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yL(e,t);const a={href:yd(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Lte(e,t){const n={href:yd(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ote(e,t,n){const r=e.all(t),a=n?Fte(n):bL(t),i={},o=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(a||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!a?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,d),e.applyData(t,d)}function Fte(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=bL(n[r])}return t}function bL(e){const t=e.spread;return t??e.children.length>1}function $te(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function zte(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ute(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Bte(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vte(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=nN(t.children[1]),c=eL(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function qte(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const h=t.children[c],m={},p=o?o[c]:void 0;p&&(m.align=p);let v={type:"element",tagName:i,properties:m,children:[]};h&&(v.children=e.all(h),e.patch(h,v),v=e.applyData(h,v)),d.push(v)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,u),e.applyData(t,u)}function Wte(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const pk=9,xk=32;function Hte(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const i=[];for(;r;)i.push(gk(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return i.push(gk(t.slice(a),a>0,!1)),i.join("")}function gk(e,t,n){let r=0,a=e.length;if(t){let i=e.codePointAt(r);for(;i===pk||i===xk;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(a-1);for(;i===pk||i===xk;)a--,i=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function Gte(e,t){const n={type:"text",value:Hte(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Kte(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Qte={blockquote:Ste,break:_te,code:Cte,delete:kte,emphasis:Ete,footnoteReference:Tte,heading:Ate,html:Pte,imageReference:Ite,image:Dte,inlineCode:Rte,linkReference:Mte,link:Lte,listItem:Ote,list:$te,paragraph:zte,root:Ute,strong:Bte,table:Vte,tableCell:Wte,tableRow:qte,text:Gte,thematicBreak:Kte,toml:Em,yaml:Em,definition:Em,footnoteDefinition:Em};function Em(){}const wL=-1,Ex=0,vu=1,fp=2,cN=3,dN=4,uN=5,hN=6,jL=7,NL=8,vk=typeof self=="object"?self:globalThis,Yte=(e,t)=>{const n=(a,i)=>(e.set(i,a),a),r=a=>{if(e.has(a))return e.get(a);const[i,o]=t[a];switch(i){case Ex:case wL:return n(o,a);case vu:{const l=n([],a);for(const c of o)l.push(r(c));return l}case fp:{const l=n({},a);for(const[c,d]of o)l[r(c)]=r(d);return l}case cN:return n(new Date(o),a);case dN:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case uN:{const l=n(new Map,a);for(const[c,d]of o)l.set(r(c),r(d));return l}case hN:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case jL:{const{name:l,message:c}=o;return n(new vk[l](c),a)}case NL:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new vk[i](o),a)};return r},yk=e=>Yte(new Map,e)(0),El="",{toString:Xte}={},{keys:Jte}=Object,Rd=e=>{const t=typeof e;if(t!=="object"||!e)return[Ex,t];const n=Xte.call(e).slice(8,-1);switch(n){case"Array":return[vu,El];case"Object":return[fp,El];case"Date":return[cN,El];case"RegExp":return[dN,El];case"Map":return[uN,El];case"Set":return[hN,El];case"DataView":return[vu,n]}return n.includes("Array")?[vu,n]:n.includes("Error")?[jL,n]:[fp,n]},Tm=([e,t])=>e===Ex&&(t==="function"||t==="symbol"),Zte=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},i=o=>{if(n.has(o))return n.get(o);let[l,c]=Rd(o);switch(l){case Ex:{let u=o;switch(c){case"bigint":l=NL,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return a([wL],o)}return a([l,u],o)}case vu:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),a([c,[...m]],o)}const u=[],h=a([l,u],o);for(const m of o)u.push(i(m));return h}case fp:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const u=[],h=a([l,u],o);for(const m of Jte(o))(e||!Tm(Rd(o[m])))&&u.push([i(m),i(o[m])]);return h}case cN:return a([l,o.toISOString()],o);case dN:{const{source:u,flags:h}=o;return a([l,{source:u,flags:h}],o)}case uN:{const u=[],h=a([l,u],o);for(const[m,p]of o)(e||!(Tm(Rd(m))||Tm(Rd(p))))&&u.push([i(m),i(p)]);return h}case hN:{const u=[],h=a([l,u],o);for(const m of o)(e||!Tm(Rd(m)))&&u.push(i(m));return h}}const{message:d}=o;return a([l,{name:c,message:d}],o)};return i},bk=(e,{json:t,lossy:n}={})=>{const r=[];return Zte(!(t||n),!!t,new Map,r)(e),r},pp=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?yk(bk(e,t)):structuredClone(e):(e,t)=>yk(bk(e,t));function ene(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function tne(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function nne(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ene,r=e.options.footnoteBackLabel||tne,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const u=e.all(d),h=String(d.identifier).toUpperCase(),m=yd(h.toLowerCase());let p=0;const v=[],x=e.footnoteCounts.get(h);for(;x!==void 0&&++p<=x;){v.length>0&&v.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,p);typeof b=="string"&&(b={type:"text",value:b}),v.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...v)}else u.push(...v);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(d,g),l.push(g)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...pp(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const SL=function(e){if(e==null)return ine;if(typeof e=="function")return Tx(e);if(typeof e=="object")return Array.isArray(e)?sne(e):rne(e);if(typeof e=="string")return ane(e);throw new Error("Expected function, string, or object as test")};function sne(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=SL(e[n]);return Tx(r);function r(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function rne(e){const t=e;return Tx(n);function n(r){const a=r;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function ane(e){return Tx(t);function t(n){return n&&n.type===e}}function Tx(e){return t;function t(n,r,a){return!!(one(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function ine(){return!0}function one(e){return e!==null&&typeof e=="object"&&"type"in e}const _L=[],lne=!0,wk=!1,cne="skip";function dne(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const i=SL(a),o=r?-1:1;l(e,void 0,[])();function l(c,d,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return m;function m(){let p=_L,v,x,y;if((!t||i(c,d,u[u.length-1]||void 0))&&(p=une(n(c,u)),p[0]===wk))return p;if("children"in c&&c.children){const g=c;if(g.children&&p[0]!==cne)for(x=(r?g.children.length:-1)+o,y=u.concat(g);x>-1&&x<g.children.length;){const b=g.children[x];if(v=l(b,x,y)(),v[0]===wk)return v;x=typeof v[1]=="number"?v[1]:x+o}}return p}}}function une(e){return Array.isArray(e)?e:typeof e=="number"?[lne,e]:e==null?_L:[e]}function CL(e,t,n,r){let a,i,o;typeof t=="function"&&typeof n!="function"?(i=void 0,o=t,a=n):(i=t,o=n,a=r),dne(e,i,l,a);function l(c,d){const u=d[d.length-1],h=u?u.children.indexOf(c):void 0;return o(c,h,u)}}const sb={}.hasOwnProperty,hne={};function mne(e,t){const n=t||hne,r=new Map,a=new Map,i=new Map,o={...Qte,...n.handlers},l={all:d,applyData:pne,definitionById:r,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:n,patch:fne,wrap:gne};return CL(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:a,m=String(u.identifier).toUpperCase();h.has(m)||h.set(m,u)}}),l;function c(u,h){const m=u.type,p=l.handlers[m];if(sb.call(l.handlers,m)&&p)return p(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in u){const{children:x,...y}=u,g=pp(y);return g.children=l.all(u),g}return pp(u)}return(l.options.unknownHandler||xne)(l,u,h)}function d(u){const h=[];if("children"in u){const m=u.children;let p=-1;for(;++p<m.length;){const v=l.one(m[p],u);if(v){if(p&&m[p-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=jk(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=jk(x.value))}Array.isArray(v)?h.push(...v):h.push(v)}}}return h}}function fne(e,t){e.position&&(t.position=XJ(e))}function pne(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,pp(i)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function xne(e,t){const n=t.data||{},r="value"in t&&!(sb.call(n,"hProperties")||sb.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function gne(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function jk(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Nk(e,t){const n=mne(e,t),r=n.one(e,void 0),a=nne(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function vne(e,t){return e&&"run"in e?async function(n,r){const a=Nk(n,{file:r,...t});await e.run(a,r)}:function(n,r){return Nk(n,{file:r,...e||t})}}function Sk(e){if(e)throw e}var cf=Object.prototype.hasOwnProperty,kL=Object.prototype.toString,_k=Object.defineProperty,Ck=Object.getOwnPropertyDescriptor,kk=function(t){return typeof Array.isArray=="function"?Array.isArray(t):kL.call(t)==="[object Array]"},Ek=function(t){if(!t||kL.call(t)!=="[object Object]")return!1;var n=cf.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&cf.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||cf.call(t,a)},Tk=function(t,n){_k&&n.name==="__proto__"?_k(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Ak=function(t,n){if(n==="__proto__")if(cf.call(t,n)){if(Ck)return Ck(t,n).value}else return;return t[n]},yne=function e(){var t,n,r,a,i,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)r=Ak(l,n),a=Ak(t,n),l!==a&&(u&&a&&(Ek(a)||(i=kk(a)))?(i?(i=!1,o=r&&kk(r)?r:[]):o=r&&Ek(r)?r:{},Tk(l,{name:n,newValue:e(u,o,a)})):typeof a<"u"&&Tk(l,{name:n,newValue:a}));return l};const rv=il(yne);function rb(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function bne(){const e=[],t={run:n,use:r};return t;function n(...a){let i=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...d){const u=e[++i];let h=-1;if(c){o(c);return}for(;++h<a.length;)(d[h]===null||d[h]===void 0)&&(d[h]=a[h]);a=d,u?wne(u,l)(...d):o(null,...d)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function wne(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(d){const u=d;if(l&&n)throw u;return a(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,a):c instanceof Error?a(c):i(c))}function a(o,...l){n||(n=!0,t(o,...l))}function i(o){a(null,o)}}const ta={basename:jne,dirname:Nne,extname:Sne,join:_ne,sep:"/"};function jne(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Uh(e);let n=0,r=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){n=a+1;break}}else r<0&&(i=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){n=a+1;break}}else o<0&&(i=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Nne(e){if(Uh(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Sne(e){Uh(e);let t=e.length,n=-1,r=0,a=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||n<0||i===0||i===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function _ne(...e){let t=-1,n;for(;++t<e.length;)Uh(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Cne(n)}function Cne(e){Uh(e);const t=e.codePointAt(0)===47;let n=kne(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function kne(e,t){let n="",r=0,a=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||i===1))if(a!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}}else if(n.length>0){n="",r=0,a=o,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else l===46&&i>-1?i++:i=-1}return n}function Uh(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ene={cwd:Tne};function Tne(){return"/"}function ab(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Ane(e){if(typeof e=="string")e=new URL(e);else if(!ab(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Pne(e)}function Pne(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const av=["history","path","basename","stem","extname","dirname"];class EL{constructor(t){let n;t?ab(t)?n={path:t}:typeof t=="string"||Ine(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Ene.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<av.length;){const i=av[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let a;for(a in n)av.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?ta.basename(this.path):void 0}set basename(t){ov(t,"basename"),iv(t,"basename"),this.path=ta.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ta.dirname(this.path):void 0}set dirname(t){Pk(this.basename,"dirname"),this.path=ta.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ta.extname(this.path):void 0}set extname(t){if(iv(t,"extname"),Pk(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ta.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ab(t)&&(t=Ane(t)),ov(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ta.basename(this.path,this.extname):void 0}set stem(t){ov(t,"stem"),iv(t,"stem"),this.path=ta.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new ts(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function iv(e,t){if(e&&e.includes(ta.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ta.sep+"`")}function ov(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Pk(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ine(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Dne=function(e){const r=this.constructor.prototype,a=r[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},Rne={}.hasOwnProperty;class mN extends Dne{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=bne()}copy(){const t=new mN;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(rv(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(dv("data",this.frozen),this.namespace[t]=n,this):Rne.call(this.namespace,t)&&this.namespace[t]||void 0:t?(dv("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Am(t),r=this.parser||this.Parser;return lv("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),lv("process",this.parser||this.Parser),cv("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(i,o){const l=Am(t),c=r.parse(l);r.run(c,l,function(u,h,m){if(u||!h||!m)return d(u);const p=h,v=r.stringify(p,m);One(v)?m.value=v:m.result=v,d(u,m)});function d(u,h){u||!h?o(u):i?i(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),lv("processSync",this.parser||this.Parser),cv("processSync",this.compiler||this.Compiler),this.process(t,a),Dk("processSync","process",n),r;function a(i,o){n=!0,Sk(i),r=o}}run(t,n,r){Ik(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,l){const c=Am(n);a.run(t,c,d);function d(u,h,m){const p=h||t;u?l(u):o?o(p):r(void 0,p,m)}}}runSync(t,n){let r=!1,a;return this.run(t,n,i),Dk("runSync","run",r),a;function i(o,l){Sk(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Am(n),a=this.compiler||this.Compiler;return cv("stringify",a),Ik(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(dv("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...h]=d;c(u,h)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(a.settings=rv(!0,a.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const h=d[u];i(h)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===d){m=h;break}if(m===-1)r.push([d,...u]);else if(u.length>0){let[p,...v]=u;const x=r[m][1];rb(x)&&rb(p)&&(p=rv(!0,x,p)),r[m]=[d,p,...v]}}}}const Mne=new mN().freeze();function lv(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function cv(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function dv(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ik(e){if(!rb(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Dk(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Am(e){return Lne(e)?e:new EL(e)}function Lne(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function One(e){return typeof e=="string"||Fne(e)}function Fne(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $ne="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Rk=[],Mk={allowDangerousHtml:!0},zne=/^(https?|ircs?|mailto|xmpp)$/i,Une=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Bne(e){const t=Vne(e),n=qne(e);return Wne(t.runSync(t.parse(n),n),e)}function Vne(e){const t=e.rehypePlugins||Rk,n=e.remarkPlugins||Rk,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Mk}:Mk;return Mne().use(Nte).use(n).use(vne,r).use(t)}function qne(e){const t=e.children||"",n=new EL;return typeof t=="string"&&(n.value=t),n}function Wne(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Hne;for(const u of Une)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+$ne+u.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),CL(e,d),nZ(e,{Fragment:s.Fragment,components:a,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function d(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in tv)if(Object.hasOwn(tv,p)&&Object.hasOwn(u.properties,p)){const v=u.properties[p],x=tv[p];(x===null||x.includes(u.tagName))&&(u.properties[p]=c(String(v||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):i?i.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,m)),p&&m&&typeof h=="number")return l&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function Hne(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||zne.test(e.slice(0,t))?e:""}const Gne=({content:e,isEmpty:t,areaTitle:n,onEdit:r})=>t?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Es,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsxs("h3",{className:"text-lg font-medium mb-2",children:["No ",n," Guidance Found"]}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Create guidance content for this area to help configure AI assistance."}),s.jsxs(z,{onClick:r,children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Create Guidance Content"]})]}):s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx(Bne,{children:typeof e=="string"?e:"```json\n"+JSON.stringify(e,null,2)+"\n```"})})});function Kne(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var fN="ScrollArea",[TL,lde]=es(fN),[Qne,jr]=TL(fN),AL=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=f.useState(null),[d,u]=f.useState(null),[h,m]=f.useState(null),[p,v]=f.useState(null),[x,y]=f.useState(null),[g,b]=f.useState(0),[w,C]=f.useState(0),[_,S]=f.useState(!1),[N,j]=f.useState(!1),k=He(t,A=>c(A)),T=fd(a);return s.jsx(Qne,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:_,onScrollbarXEnabledChange:S,scrollbarY:x,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:j,onCornerWidthChange:b,onCornerHeightChange:C,children:s.jsx(_e.div,{dir:T,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});AL.displayName=fN;var PL="ScrollAreaViewport",IL=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:a,nonce:i,...o}=e,l=jr(PL,n),c=f.useRef(null),d=He(t,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:i}),s.jsx(_e.div,{"data-radix-scroll-area-viewport":"",...o,asChild:a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:ase({asChild:a,children:r},u=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});IL.displayName=PL;var ja="ScrollAreaScrollbar",pN=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=jr(ja,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(Yne,{...r,ref:t,forceMount:n}):a.type==="scroll"?s.jsx(Xne,{...r,ref:t,forceMount:n}):a.type==="auto"?s.jsx(DL,{...r,ref:t,forceMount:n}):a.type==="always"?s.jsx(xN,{...r,ref:t}):null});pN.displayName=ja;var Yne=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=jr(ja,e.__scopeScrollArea),[i,o]=f.useState(!1);return f.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(xn,{present:n||i,children:s.jsx(DL,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Xne=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=jr(ja,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Px(()=>c("SCROLL_END"),100),[l,c]=Kne("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),f.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const p=d[u];h!==p&&(c("SCROLL"),o()),h=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),s.jsx(xn,{present:n||l!=="hidden",children:s.jsx(xN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ue(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ue(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),DL=f.forwardRef((e,t)=>{const n=jr(ja,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=f.useState(!1),l=e.orientation==="horizontal",c=Px(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return Kc(n.viewport,c),Kc(n.content,c),s.jsx(xn,{present:r||i,children:s.jsx(xN,{"data-state":i?"visible":"hidden",...a,ref:t})})}),xN=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=jr(ja,e.__scopeScrollArea),i=f.useRef(null),o=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=FL(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,p){return sse(m,o.current,l,p)}return n==="horizontal"?s.jsx(Jne,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=Lk(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?s.jsx(Zne,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=Lk(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Jne=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=jr(ja,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),d=He(t,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(ML,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ax(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),zL(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:gp(o.paddingLeft),paddingEnd:gp(o.paddingRight)}})}})}),Zne=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=jr(ja,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),d=He(t,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(ML,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ax(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const m=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),zL(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:gp(o.paddingTop),paddingEnd:gp(o.paddingBottom)}})}})}),[ese,RL]=TL(ja),ML=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=e,p=jr(ja,n),[v,x]=f.useState(null),y=He(t,k=>x(k)),g=f.useRef(null),b=f.useRef(""),w=p.viewport,C=r.content-r.viewport,_=$t(u),S=$t(c),N=Px(h,10);function j(k){if(g.current){const T=k.clientX-g.current.left,A=k.clientY-g.current.top;d({x:T,y:A})}}return f.useEffect(()=>{const k=T=>{const A=T.target;(v==null?void 0:v.contains(A))&&_(T,C)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,v,C,_]),f.useEffect(S,[r,S]),Kc(v,N),Kc(p.content,N),s.jsx(ese,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:$t(i),onThumbPointerUp:$t(o),onThumbPositionChange:S,onThumbPointerDown:$t(l),children:s.jsx(_e.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:ue(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),g.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),j(k))}),onPointerMove:ue(e.onPointerMove,j),onPointerUp:ue(e.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),xp="ScrollAreaThumb",LL=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=RL(xp,e.__scopeScrollArea);return s.jsx(xn,{present:n||a.hasThumb,children:s.jsx(tse,{ref:t,...r})})}),tse=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=jr(xp,n),o=RL(xp,n),{onThumbPositionChange:l}=o,c=He(t,h=>o.onThumbChange(h)),d=f.useRef(),u=Px(()=>{d.current&&(d.current(),d.current=void 0)},100);return f.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(u(),!d.current){const p=rse(h,l);d.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,u,l]),s.jsx(_e.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ue(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,x=h.clientY-p.top;o.onThumbPointerDown({x:v,y:x})}),onPointerUp:ue(e.onPointerUp,o.onThumbPointerUp)})});LL.displayName=xp;var gN="ScrollAreaCorner",OL=f.forwardRef((e,t)=>{const n=jr(gN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(nse,{...e,ref:t}):null});OL.displayName=gN;var nse=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=jr(gN,n),[i,o]=f.useState(0),[l,c]=f.useState(0),d=!!(i&&l);return Kc(a.scrollbarX,()=>{var h;const u=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Kc(a.scrollbarY,()=>{var h;const u=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?s.jsx(_e.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function gp(e){return e?parseInt(e,10):0}function FL(e,t){const n=e/t;return isNaN(n)?0:n}function Ax(e){const t=FL(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function sse(e,t,n,r="ltr"){const a=Ax(n),i=a/2,o=t||i,l=a-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return $L([c,d],h)(e)}function Lk(e,t,n="ltr"){const r=Ax(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],d=F0(e,c);return $L([0,o],[0,l])(d)}function $L(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function zL(e,t){return e>0&&e<t}var rse=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Px(e,t){const n=$t(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Kc(e,t){const n=$t(t);fn(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}function ase(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const a=f.Children.only(r);return f.cloneElement(a,{children:typeof t=="function"?t(a.props.children):t})}var UL=AL,ise=IL,ose=OL;const tl=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(UL,{ref:r,className:ne("relative overflow-hidden",e),...n,children:[s.jsx(ise,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(BL,{}),s.jsx(ose,{})]}));tl.displayName=UL.displayName;const BL=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(pN,{ref:r,orientation:t,className:ne("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(LL,{className:"relative flex-1 rounded-full bg-border"})}));BL.displayName=pN.displayName;const lse=({currentContent:e,onContentUpdate:t,areaTitle:n,onClose:r})=>{const[a,i]=f.useState([]),[o,l]=f.useState(""),[c,d]=f.useState(!1),[u,h]=f.useState(null);f.useEffect(()=>{const x={id:"welcome",role:"assistant",content:`Hi! I'm here to help you refine your ${n} guidance content. I can see your current content and help you improve it. What would you like to work on?`,timestamp:new Date};i([x])},[n]);const m=async()=>{if(!o.trim()||c)return;const x={id:Date.now().toString(),role:"user",content:o,timestamp:new Date};i(y=>[...y,x]),l(""),d(!0);try{const{data:y,error:g}=await L.functions.invoke("ai-guidance-chat",{body:{messages:[...a,x],currentContent:e,areaTitle:n}});if(g)throw g;const b={id:(Date.now()+1).toString(),role:"assistant",content:typeof y.response=="string"?y.response:JSON.stringify(y.response,null,2),timestamp:new Date};if(i(w=>[...w,b]),y.suggestedContent){const w=typeof y.suggestedContent=="string"?y.suggestedContent:JSON.stringify(y.suggestedContent,null,2);h(w)}}catch(y){console.error("Error sending message:",y);const g={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};i(b=>[...b,g])}finally{d(!1)}},p=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),m())},v=()=>{u&&(t(u),h(null))};return s.jsxs(V,{className:"w-full",children:[s.jsx(G,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Y,{className:"flex items-center gap-2 text-lg",children:[s.jsx(Jm,{className:"h-5 w-5"}),"AI Assistant"]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(Lt,{className:"h-4 w-4"})})]})}),s.jsxs(W,{className:"space-y-4 p-4",children:[s.jsx(tl,{className:"h-80 pr-4",children:s.jsxs("div",{className:"space-y-4",children:[a.map(x=>s.jsxs("div",{className:`flex items-start gap-3 ${x.role==="user"?"justify-end":"justify-start"}`,children:[x.role==="assistant"&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(Jm,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm ${x.role==="user"?"bg-primary text-primary-foreground ml-auto":"bg-muted"}`,children:[s.jsx("p",{className:"whitespace-pre-wrap",children:x.content}),s.jsx("p",{className:"text-xs opacity-70 mt-1",children:x.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),x.role==="user"&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0",children:s.jsx($c,{className:"h-4 w-4"})})]},x.id)),c&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(Jm,{className:"h-4 w-4 text-primary animate-pulse"})}),s.jsx("div",{className:"bg-muted rounded-lg px-3 py-2 text-sm",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),u&&s.jsxs(s.Fragment,{children:[s.jsx(cn,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Of,{className:"h-4 w-4 text-primary"}),"Suggested Content"]}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-sm overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:u})}),s.jsx(z,{onClick:v,size:"sm",className:"w-full",children:"Apply to Editor"})]})]}),s.jsx(cn,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(pe,{value:o,onChange:x=>l(x.target.value),onKeyPress:p,placeholder:"Ask me anything about your content...",disabled:c,className:"flex-1"}),s.jsx(z,{onClick:m,disabled:c||!o.trim(),size:"sm",children:s.jsx(Qo,{className:"h-4 w-4"})})]})]})]})},cse=({content:e,onChange:t,placeholder:n,areaTitle:r})=>{const[a,i]=f.useState(0),[o,l]=f.useState(!1),c=u=>{t(u),i(u.trim().split(/\s+/).filter(h=>h.length>0).length)},d=()=>{l(!o)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Es,{className:"h-4 w-4"}),s.jsxs("span",{children:[a," words"]})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:d,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Close Assistant"]}):s.jsxs(s.Fragment,{children:[s.jsx(U$,{className:"h-4 w-4 mr-2"}),"AI Assist"]})})]}),s.jsx(Fn,{value:e,onChange:u=>c(u.target.value),placeholder:n,className:"min-h-[400px] resize-none"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:s.jsxs("p",{children:["💡 Tip: Use Markdown formatting for headers, lists, and links. ",o?"The AI assistant is helping you refine your content below.":'Click "AI Assist" to get help editing specific sections.']})}),o&&s.jsx("div",{className:"border-t pt-6",children:s.jsx(lse,{currentContent:e,onContentUpdate:t,areaTitle:r||"Guidance",onClose:()=>l(!1)})})]})},dse=({domainId:e,domainName:t,area:n,onSuccess:r})=>{const[a,i]=f.useState(null),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState([]),{toast:m}=at(),p=(y,g)=>{const b=[];if(!y.snippet||typeof y.snippet!="string")b.push(`Line ${g}: Missing or invalid 'snippet' field`);else{const w=y.snippet.trim().split(/\s+/).filter(C=>C.length>0).length;(w<100||w>800)&&b.push(`Line ${g}: Snippet must be 100-800 words (found ${w})`)}return(!y.concepts||!Array.isArray(y.concepts)||y.concepts.length===0)&&b.push(`Line ${g}: Missing or empty 'concepts' array`),y.difficulty&&!["basic","intermediate","advanced"].includes(y.difficulty)&&b.push(`Line ${g}: Invalid difficulty level`),{valid:b.length===0,errors:b}},v=f.useCallback(async y=>{var b;const g=(b=y.target.files)==null?void 0:b[0];if(g){if(!g.name.endsWith(".jsonl")){h(["File must have .jsonl extension"]);return}i(g),l(!0),h([]),d([]);try{const C=(await g.text()).split(`
`).filter(N=>N.trim()),_=[],S=[];for(let N=0;N<C.length;N++)try{const j=JSON.parse(C[N]),{valid:k,errors:T}=p(j,N+1);if(!k){S.push(...T);continue}_.push({id:`imported_${Date.now()}_${N}`,snippet:j.snippet,concepts:j.concepts,notes:j.notes,difficulty:j.difficulty,created_at:new Date().toISOString()})}catch{S.push(`Line ${N+1}: Invalid JSON format`)}d(_),h(S)}catch{h(["Failed to read file"])}finally{l(!1)}}},[]),x=async()=>{if(c.length!==0)try{const y=c.map(C=>JSON.stringify(C)).join(`
`),{createClient:g}=await wa(async()=>{const{createClient:C}=await Promise.resolve().then(()=>g9);return{createClient:C}},void 0),b=g("https://jfolpnyipoocflcrachg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg"),{error:w}=await b.functions.invoke("save-guidance-content",{body:{domainName:t,area:n,content:y,type:"examples"}});if(w)throw w;m({title:"Import Successful",description:`Imported ${c.length} examples`}),r()}catch{m({title:"Import Failed",description:"Failed to import examples",variant:"destructive"})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"jsonl-file",children:"Select JSONL File"}),s.jsx(pe,{id:"jsonl-file",type:"file",accept:".jsonl",onChange:v,className:"mt-1"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload a JSONL file with examples. Each line should contain a JSON object with: snippet, concepts, notes (optional), difficulty (optional)"})]}),o&&s.jsxs(Ot,{children:[s.jsx(Es,{className:"h-4 w-4"}),s.jsx(Ut,{children:"Parsing file..."})]}),u.length>0&&s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:"Validation Errors:"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[u.slice(0,10).map((y,g)=>s.jsxs("li",{children:["• ",y]},g)),u.length>10&&s.jsxs("li",{children:["... and ",u.length-10," more errors"]})]})]})})]}),c.length>0&&s.jsxs(Ot,{children:[s.jsx(ln,{className:"h-4 w-4"}),s.jsx(Ut,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"font-medium",children:["Ready to import ",c.length," valid examples"]}),s.jsxs("div",{className:"text-xs space-y-1",children:[c.slice(0,3).map((y,g)=>s.jsxs("div",{className:"border-l-2 pl-2",children:[s.jsxs("p",{className:"font-medium",children:["Concepts: ",y.concepts.join(", ")]}),s.jsxs("p",{className:"text-muted-foreground",children:[y.snippet.substring(0,100),"..."]})]},g)),c.length>3&&s.jsxs("p",{className:"text-muted-foreground",children:["... and ",c.length-3," more"]})]})]})})]}),s.jsx("div",{className:"flex justify-end gap-2 pt-4",children:s.jsxs(z,{onClick:x,disabled:c.length===0||u.length>0,className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-4 w-4"}),"Import ",c.length," Examples"]})})]})},VL=(e,t,n)=>{const[r,a]=f.useState([]),[i,o]=f.useState(!1),[l,c]=f.useState(null),{toast:d}=at(),u=f.useCallback(async()=>{if(!(!e||!t||!n)){o(!0),c(null);try{const{data:p,error:v}=await L.functions.invoke("get-guidance-content",{body:{domainName:t,area:n,type:"examples"}});if(v)throw v;if(p!=null&&p.content){const x=p.content.split(`
`).filter(g=>g.trim()),y=[];for(const g of x)try{const b=JSON.parse(g);if(b.input&&b.output){const w=typeof b.input=="string"?b.input:JSON.stringify(b.input,null,2);y.push({id:crypto.randomUUID(),snippet:w,concepts:b.output.concepts||[],notes:b.output.notes,difficulty:b.output.difficulty,bloom_level:b.output.bloom_level,sequence_order:b.output.sequence_order,created_at:new Date().toISOString()})}else b.snippet&&y.push(b)}catch{console.warn("Failed to parse example line:",g)}a(y)}else a([])}catch(p){console.error("Error fetching examples:",p),c(p instanceof Error?p.message:"Failed to fetch examples"),a([])}finally{o(!1)}}},[e,t,n]),h=f.useCallback(async p=>{try{const v=p.map(y=>JSON.stringify({input:y.snippet,output:{concepts:y.concepts,notes:y.notes,difficulty:y.difficulty,bloom_level:y.bloom_level,sequence_order:y.sequence_order}})).join(`
`),{error:x}=await L.functions.invoke("save-guidance-content",{body:{domainName:t,area:n,content:v,type:"examples"}});if(x)throw x;return a(p),d({title:"Success",description:"Examples saved successfully"}),!0}catch(v){return console.error("Error saving examples:",v),d({title:"Error",description:"Failed to save examples",variant:"destructive"}),!1}},[t,n,d]),m=f.useCallback(async p=>{try{const v=r.filter(x=>x.id!==p);await h(v)}catch(v){console.error("Error deleting example:",v),d({title:"Error",description:"Failed to delete example",variant:"destructive"})}},[r,h,d]);return f.useEffect(()=>{u()},[u]),{examples:r,loading:i,error:l,saveExamples:h,deleteExample:m,refetch:u}},use=({domainId:e,domainName:t,area:n})=>{const[r,a]=f.useState("");f.useState(!1);const[i,o]=f.useState(!1);f.useState(null);const{examples:l,loading:c,saveExamples:d,deleteExample:u}=VL(e,t,n),h=(n||"").toLowerCase()==="learning-goals",m=l.filter(x=>{const y=r.toLowerCase(),g=xi(x.snippet).toLowerCase(),b=xi(x.notes).toLowerCase(),w=(x.concepts||[]).some(C=>xi(C).toLowerCase().includes(y));return g.includes(y)||w||b.includes(y)}),p=async x=>{await u(x)},v=x=>{switch(x){case"basic":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return c?s.jsx("div",{className:"p-4",children:"Loading examples..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("div",{className:"flex-1 max-w-sm",children:s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(pe,{placeholder:"Search examples...",value:r,onChange:x=>a(x.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(nn,{open:i,onOpenChange:o,children:[s.jsx(kh,{asChild:!0,children:s.jsxs(z,{variant:"outline",children:[s.jsx(On,{className:"h-4 w-4 mr-2"}),"Import JSONL"]})}),s.jsxs(Kt,{className:"max-w-2xl",children:[s.jsx(Qt,{children:s.jsx(Yt,{children:"Import Examples from JSONL"})}),s.jsx(dse,{domainId:e,domainName:t,area:n,onSuccess:()=>{o(!1),window.location.reload()}})]})]}),s.jsx(z,{variant:"default",onClick:async()=>{try{(await fetch("https://jfolpnyipoocflcrachg.supabase.co/functions/v1/publish-guidance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domainName:t,area:n,type:"examples"})})).ok&&console.log("Published successfully")}catch(x){console.error("Publish failed:",x)}},children:"Publish Examples"}),s.jsxs(z,{onClick:()=>{window.location.href=`/admin/domain/${e}/ai-guidance/${n}/examples/new`},children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Example"]})]})]}),s.jsx("div",{className:h?"space-y-2":"space-y-4",children:m.length===0?s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsx("p",{className:"text-muted-foreground text-center",children:r?"No examples match your search.":"No examples yet. Add your first example to get started."})})}):m.map(x=>s.jsx(V,{children:h?s.jsx(W,{className:"py-2",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("p",{className:"text-sm truncate flex-1",children:xi(x.snippet)}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0 text-xs text-muted-foreground",children:[x.bloom_level?s.jsx(X,{variant:"outline",children:x.bloom_level}):null,x.sequence_order!=null?s.jsxs(X,{variant:"outline",children:["#",x.sequence_order]}):null]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>p(x.id),children:s.jsx(Ts,{className:"h-4 w-4"})})]})}):s.jsxs(s.Fragment,{children:[s.jsx(G,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[x.difficulty&&s.jsx(X,{className:v(x.difficulty),children:x.difficulty}),s.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(x.created_at).toLocaleDateString()})]}),s.jsx("div",{className:"flex gap-1",children:s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>p(x.id),children:s.jsx(Ts,{className:"h-4 w-4"})})})]})}),s.jsxs(W,{className:"space-y-3",children:[s.jsx("div",{children:typeof x.snippet=="string"?s.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:x.snippet}):s.jsx("pre",{className:"text-xs bg-muted/50 rounded p-3 overflow-auto",children:JSON.stringify(x.snippet,null,2)})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Concepts:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:x.concepts.map((y,g)=>s.jsx(X,{variant:"secondary",className:"text-xs",children:xi(y)},g))})]}),x.notes!==void 0&&x.notes!==null&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Notes:"}),typeof x.notes=="string"?s.jsx("p",{className:"text-xs text-muted-foreground",children:x.notes}):s.jsx("pre",{className:"text-xs bg-muted/50 rounded p-3 overflow-auto",children:JSON.stringify(x.notes,null,2)})]})]})]})},x.id))})]})},Ok=()=>{const{domainId:e,slug:t,area:n}=Gr(),r=pt(),{toast:a}=at(),{domains:i,loading:o}=As(),[l,c]=f.useState(!1),[d,u]=f.useState(""),[h,m]=f.useState(!1),p=t||e||"",{domain:v,loading:x}=fl(p),y=v||(i==null?void 0:i.find(A=>A.id===e)),{guidanceStatus:g,loading:b}=HM((y==null?void 0:y.id)||"",y==null?void 0:y.name);console.log("DomainGuidanceEditor Debug:",{domainId:(y==null?void 0:y.id)||e,area:n,domain:y==null?void 0:y.name,domainsLoading:o,domainsCount:i==null?void 0:i.length});const{guidanceContent:w,loading:C,saveContent:_}=iJ((y==null?void 0:y.id)||"",(y==null?void 0:y.name)||"",n||"");f.useEffect(()=>{if(w){const A=w.content,R=typeof A=="string"?A:JSON.stringify(A,null,2);u(R)}},[w]);const S=(g==null?void 0:g.areas.find(A=>A.key===n))||{key:n||"",title:(n==null?void 0:n.split("-").map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" "))||"Unknown",gcsPath:"",exists:!1,lastModified:null};if(o||b||C)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Pe,{className:"h-8 w-64"}),s.jsx(Pe,{className:"h-4 w-96"}),s.jsx(Pe,{className:"h-96 w-full"})]})});if(!y)return s.jsx("div",{className:"p-6",children:s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsx("p",{className:"text-muted-foreground",children:"Domain not found"})})})});const N=()=>{r(t?`/admin/domains/${t}/ai-guidance`:`/admin/domain/${e}/ai-guidance`)},j=async()=>{m(!0);try{if(await _(d))a({title:"Success",description:"Guidance file saved successfully"}),c(!1);else throw new Error("Save failed")}catch{a({title:"Error",description:"Failed to save guidance file",variant:"destructive"})}finally{m(!1)}},k=()=>{if(c(!1),w){const A=w.content,R=typeof A=="string"?A:JSON.stringify(A,null,2);u(R)}},T=(w==null?void 0:w.exists)||!1;return s.jsxs("div",{className:"p-6",children:[s.jsx(va,{}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",onClick:N,children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Back to AI Guidance"]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:[S.title," Guidance"]}),s.jsxs("p",{className:"text-muted-foreground",children:[y.name," • AI Guidance Configuration"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[T&&!l&&s.jsxs(z,{variant:"outline",onClick:()=>c(!0),children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Edit"]}),(l||!T&&d.trim().length>0)&&s.jsxs(z,{onClick:j,disabled:h,children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]}),l&&T&&s.jsx(z,{variant:"outline",onClick:k,children:"Cancel"})]})]}),s.jsxs(Qr,{defaultValue:"guidance",className:"w-full",children:[s.jsxs(wr,{className:"grid w-full grid-cols-2",children:[s.jsx(Je,{value:"guidance",children:"Guidance"}),s.jsx(Je,{value:"examples",children:"Examples"})]}),s.jsx(Ze,{value:"guidance",className:"mt-6",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"flex items-center gap-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ti,{className:"h-5 w-5"}),"Editing ",S.title," Guidance"]}):s.jsxs(s.Fragment,{children:[s.jsx(fr,{className:"h-5 w-5"}),T?"Viewing":"Create"," ",S.title," Guidance"]})})}),s.jsx(W,{children:l||!T?s.jsx(cse,{content:d,onChange:u,placeholder:`Enter your ${S.title.toLowerCase()} guidance content here...`,areaTitle:S.title}):s.jsx(Gne,{content:d,isEmpty:!T,areaTitle:S.title,onEdit:()=>c(!0)})})]})}),s.jsx(Ze,{value:"examples",className:"mt-6",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"h-5 w-5"}),S.title," Examples"]})}),s.jsx(W,{children:s.jsx(use,{domainId:(y==null?void 0:y.id)||"",domainName:y.name,area:n||""})})]})})]})]})};function Pm(){return s.jsx("div",{className:"space-y-4",children:s.jsx(va,{})})}function hse({concepts:e,onConceptClick:t,onConceptDelete:n,onConceptUpdate:r,onAddChild:a,onStartLinking:i,onStartHierarchyChange:o,onManageRelationships:l,showApprovalActions:c=!1,onApproveConcept:d,onRejectConcept:u}){const[h,m]=f.useState(()=>{const w=e.map(C=>C.id);return new Set(w)}),p=f.useMemo(()=>new Map(e.map(w=>[w.id,w])),[e]),v=f.useMemo(()=>e.filter(w=>!w.parent_concept_id||!p.has(w.parent_concept_id)).sort((w,C)=>w.name.localeCompare(C.name)),[e,p]),x=w=>e.filter(C=>C.parent_concept_id===w).sort((C,_)=>C.name.localeCompare(_.name)),y=w=>{m(C=>{const _=new Set(C);return _.has(w)?_.delete(w):_.add(w),_})},g=w=>{const C=["bg-green-100 text-green-800 border-green-300","bg-green-100 text-green-800 border-green-300","bg-yellow-100 text-yellow-800 border-yellow-300","bg-orange-100 text-orange-800 border-orange-300","bg-red-100 text-red-800 border-red-300"];return C[Math.min(w,C.length-1)]},b=(w,C=0)=>{const _=x(w.id),S=_.length>0,N=h.has(w.id),j=w.difficulty_level??C;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center py-2 px-4 hover:bg-gray-50 group text-sm border-b border-gray-100 cursor-pointer",onClick:()=>{S?y(w.id):t==null||t(w)},children:[s.jsxs("div",{className:"flex-1 flex items-center gap-2",style:{paddingLeft:`${C*20}px`},children:[s.jsx("div",{className:"flex items-center justify-center w-4 h-4",children:S?s.jsx("button",{onClick:k=>{k.stopPropagation(),y(w.id)},className:"hover:bg-gray-100 rounded p-0.5 flex items-center justify-center w-4 h-4 transition-colors",children:N?s.jsx(td,{className:"h-3 w-3"}):s.jsx(_n,{className:"h-3 w-3"})}):s.jsx("div",{className:"w-4 h-4"})}),s.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded-full bg-white"}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"font-medium text-gray-900",children:w.name}),S&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["– ",_.length," child",_.length!==1?"ren":""]}),s.jsxs(X,{variant:"outline",className:`text-xs px-1.5 py-0.5 border ${g(j)}`,children:["L",j]})]})]}),s.jsx("div",{className:"w-32 flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:c&&w.status==="suggested"?s.jsxs(s.Fragment,{children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),d==null||d(w.id)},className:"h-7 w-7 p-0 hover:bg-green-50 text-green-600 hover:text-green-700 transition-colors",title:"Approve concept",children:s.jsx(pn,{className:"h-3.5 w-3.5"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),u==null||u(w.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Reject concept",children:s.jsx(Lt,{className:"h-3.5 w-3.5"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),t==null||t(w)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Edit concept",children:s.jsx(ul,{className:"h-3.5 w-3.5 text-gray-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),a==null||a(w.id)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Add child concept",children:s.jsx(Pt,{className:"h-3.5 w-3.5 text-green-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),o==null||o(w)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Hierarchy management",children:s.jsx(Fu,{className:"h-3.5 w-3.5 text-purple-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),l==null||l(w)},className:"h-7 w-7 p-0 hover:bg-gray-100 transition-colors",title:"Manage relationships",children:s.jsx(Nw,{className:"h-3.5 w-3.5 text-blue-600"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),n==null||n(w.id)},className:"h-7 w-7 p-0 hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",title:"Delete concept",children:s.jsx(Ts,{className:"h-3.5 w-3.5"})})]})})]}),S&&N&&s.jsx(s.Fragment,{children:_.map(k=>b(k,C+1))})]},w.id)};return v.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No concepts found matching your search criteria."})}):s.jsxs("div",{className:"overflow-hidden bg-white",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b bg-gray-50 font-medium text-gray-600",children:[s.jsx("div",{className:"flex-1",children:s.jsx("span",{children:"Concept Name"})}),s.jsx("div",{className:"w-32 text-right",children:s.jsx("span",{children:"Actions"})})]}),s.jsx("div",{children:v.map(w=>b(w))})]})}const mse=({domainId:e,domainSlug:t,domainName:n,onUploadComplete:r,onImportComplete:a})=>{var N,j;const[i,o]=f.useState(null),[l,c]=f.useState(0),[d,u]=f.useState(!1),[h,m]=f.useState(!1),[p,v]=f.useState(!1),{toast:x}=at();f.useEffect(()=>{(async()=>{try{const{data:T,error:A}=await L.from("file_uploads").select("*").eq("domain_id",e).eq("file_name","master_concept_list.md").order("created_at",{ascending:!1}).limit(1);if(A){console.error("Error checking existing file:",A);return}T&&T.length>0&&(console.log("🔍 Found existing upload:",T[0]),v(!0))}catch(T){console.error("Error checking existing file:",T)}})()},[e]),f.useEffect(()=>{console.log("🔍 MasterConceptUpload state:",{uploadComplete:p,isUploading:d,isImporting:h,hasFile:!!i})},[p,d,h,i]);const y=ge.useCallback(k=>{const T=k[0];T&&T.name.endsWith(".md")?o(T):x({title:"Invalid file type",description:"Please upload a .md (Markdown) file.",variant:"destructive"})},[x]),{getRootProps:g,getInputProps:b,isDragActive:w,fileRejections:C}=jx({onDrop:y,disabled:d||p,maxSize:10*1024*1024,accept:{"text/markdown":[".md"],"text/plain":[".md"]},multiple:!1}),_=async()=>{if(i){u(!0),c(0);try{const k=setInterval(()=>{c(O=>O>=90?(clearInterval(k),90):O+10)},200),T=new FormData,A=new File([i],"master_concept_list.md",{type:i.type});T.append("file",A),T.append("domainId",e),T.append("domainSlug",t||e),T.append("targetPath",`${e}/guidance/concepts/master_concept_list.md`);const{data:R,error:F}=await L.functions.invoke("upload-to-gcs",{body:T});if(clearInterval(k),c(100),F)throw F;v(!0),console.log("🎯 Upload completed, uploadComplete state set to true"),x({title:"Upload successful",description:"Master concept list uploaded successfully."}),r()}catch(k){console.error("Upload error:",k),x({title:"Upload failed",description:"Failed to upload the master concept list.",variant:"destructive"})}finally{u(!1)}}},S=async()=>{m(!0);try{const{data:k,error:T}=await L.functions.invoke("clear-and-reimport-concepts",{body:{domainId:e}});if(T)throw T;x({title:"Import successful",description:`Imported ${(k==null?void 0:k.conceptCount)||0} concepts successfully.`}),a()}catch(k){console.error("Import error:",k),x({title:"Import failed",description:"Failed to import concepts from the master list.",variant:"destructive"})}finally{m(!1)}};return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs(V,{className:"w-full max-w-2xl",children:[s.jsxs(G,{className:"text-center",children:[s.jsxs(Y,{className:"flex items-center justify-center space-x-2",children:[s.jsx(Es,{className:"h-6 w-6"}),s.jsx("span",{children:"Initialize Concept Map"})]}),s.jsxs(we,{children:["Upload the master_concept_list.md file for the ",s.jsx("strong",{children:n})," domain to create the foundational concept hierarchy."]})]}),s.jsxs(W,{className:"space-y-6",children:[p?s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[s.jsx(Lf,{className:"h-6 w-6"}),s.jsx("span",{className:"font-medium",children:"Upload Complete!"})]}),s.jsx("p",{className:"text-muted-foreground",children:"Your master concept list has been uploaded successfully. Click the button below to import and structure the concepts."}),s.jsx(z,{onClick:S,disabled:h,className:"w-full",size:"lg",children:h?"Importing Concepts...":"Import Concepts from Master List"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{...g(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200 ${w?"border-primary bg-primary/5":d?"border-muted bg-muted/20 pointer-events-none opacity-50":"border-border hover:border-primary/50 hover:bg-muted/20"}`,children:[s.jsx("input",{...b()}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(On,{className:`mx-auto h-12 w-12 ${w?"text-primary":"text-muted-foreground"}`}),w?s.jsx("p",{className:"text-primary font-medium text-lg",children:"Drop your master_concept_list.md file here..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium text-lg",children:"Drag & drop master_concept_list.md here, or click to select"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Only .md (Markdown) files accepted (max 10MB)"})]})]})]}),C.length>0&&s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:(j=(N=C[0])==null?void 0:N.errors[0])==null?void 0:j.message})]}),i&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Es,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:i.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(i.size/1024).toFixed(1)," KB"]})]})]}),s.jsx(Lf,{className:"h-5 w-5 text-green-600"})]}),d&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Uploading..."}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[l,"%"]})]}),s.jsx(Br,{value:l,className:"h-2"})]}),s.jsx(z,{onClick:_,disabled:d,className:"w-full",size:"lg",children:d?"Uploading...":"Upload Master Concept List"})]})]}),s.jsxs(Ot,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsxs(Ut,{className:"text-sm",children:[s.jsx("strong",{children:"File Format:"})," The master concept list should be a Markdown file with hierarchical structure using indentation (2 spaces per level) to define parent-child relationships."]})]})]})]})})},fse=()=>{const[e,t]=f.useState(!1),{toast:n}=at();return{triggerStructuring:async(a,i)=>{t(!0);try{console.log("Triggering concept structuring for domain:",i);const{data:o,error:l}=await L.functions.invoke("trigger-concept-structuring",{body:{domain_id:a,domain_slug:i}});if(l)throw console.error("Error triggering concept structuring:",l),l;return console.log("Concept structuring triggered successfully:",o),n({title:"AI Analysis Started",description:"The AI is analyzing your concepts to suggest better hierarchical structures. Check back in a few minutes for results."}),o}catch(o){throw console.error("Failed to trigger concept structuring:",o),n({title:"Failed to Start AI Analysis",description:o.message||"There was an error starting the AI concept analysis. Please try again.",variant:"destructive"}),o}finally{t(!1)}},isLoading:e}};var Fk=1,pse=.9,xse=.8,gse=.17,uv=.1,hv=.999,vse=.9999,yse=.99,bse=/[\\\/_+.#"@\[\(\{&]/,wse=/[\\\/_+.#"@\[\(\{&]/g,jse=/[\s-]/,qL=/[\s-]/g;function ib(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?Fk:yse;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(i),d=n.indexOf(c,a),u=0,h,m,p,v;d>=0;)h=ib(e,t,n,r,d+1,i+1,o),h>u&&(d===a?h*=Fk:bse.test(e.charAt(d-1))?(h*=xse,p=e.slice(a,d-1).match(wse),p&&a>0&&(h*=Math.pow(hv,p.length))):jse.test(e.charAt(d-1))?(h*=pse,v=e.slice(a,d-1).match(qL),v&&a>0&&(h*=Math.pow(hv,v.length))):(h*=gse,a>0&&(h*=Math.pow(hv,d-a))),e.charAt(d)!==t.charAt(i)&&(h*=vse)),(h<uv&&n.charAt(d-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(d-1)!==r.charAt(i))&&(m=ib(e,t,n,r,d+1,i+2,o),m*uv>h&&(h=m*uv)),h>u&&(u=h),d=n.indexOf(c,d+1);return o[l]=u,u}function $k(e){return e.toLowerCase().replace(qL," ")}function Nse(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,ib(e,t,$k(e),$k(t),0,0,{})}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},us.apply(null,arguments)}function gc(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Sse(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function WL(...e){return t=>e.forEach(n=>Sse(n,t))}function Bh(...e){return f.useCallback(WL(...e),e)}function _se(e,t=[]){let n=[];function r(i,o){const l=f.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:p,...v}=h,x=(m==null?void 0:m[e][c])||l,y=f.useMemo(()=>v,Object.values(v));return f.createElement(x.Provider,{value:y},p)}function u(h,m){const p=(m==null?void 0:m[e][c])||l,v=f.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,Cse(a,...t)]}function Cse(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const ob=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},kse=jb.useId||(()=>{});let Ese=0;function mv(e){const[t,n]=f.useState(kse());return ob(()=>{e||n(r=>r??String(Ese++))},[e]),e||(t?`radix-${t}`:"")}function nl(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Tse({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=Ase({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:r,l=nl(n),c=f.useCallback(d=>{if(i){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else a(d)},[i,e,a,l]);return[o,c]}function Ase({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,a=f.useRef(r),i=nl(t);return f.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),n}const vN=f.forwardRef((e,t)=>{const{children:n,...r}=e,a=f.Children.toArray(n),i=a.find(Ise);if(i){const o=i.props.children,l=a.map(c=>c===i?f.Children.count(o)>1?f.Children.only(null):f.isValidElement(o)?o.props.children:null:c);return f.createElement(lb,us({},r,{ref:t}),f.isValidElement(o)?f.cloneElement(o,void 0,l):null)}return f.createElement(lb,us({},r,{ref:t}),n)});vN.displayName="Slot";const lb=f.forwardRef((e,t)=>{const{children:n,...r}=e;return f.isValidElement(n)?f.cloneElement(n,{...Dse(r,n.props),ref:t?WL(t,n.ref):n.ref}):f.Children.count(n)>1?f.Children.only(null):null});lb.displayName="SlotClone";const Pse=({children:e})=>f.createElement(f.Fragment,null,e);function Ise(e){return f.isValidElement(e)&&e.type===Pse}function Dse(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{i(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}const Rse=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Nr=Rse.reduce((e,t)=>{const n=f.forwardRef((r,a)=>{const{asChild:i,...o}=r,l=i?vN:t;return f.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),f.createElement(l,us({},o,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Mse(e,t){e&&Qa.flushSync(()=>e.dispatchEvent(t))}function Lse(e,t=globalThis==null?void 0:globalThis.document){const n=nl(e);f.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const cb="dismissableLayer.update",Ose="dismissableLayer.pointerDownOutside",Fse="dismissableLayer.focusOutside";let zk;const $se=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zse=f.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,u=f.useContext($se),[h,m]=f.useState(null),p=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=f.useState({}),x=Bh(t,j=>m(j)),y=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(g),w=h?y.indexOf(h):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,S=Use(j=>{const k=j.target,T=[...u.branches].some(A=>A.contains(k));!_||T||(i==null||i(j),l==null||l(j),j.defaultPrevented||c==null||c())},p),N=Bse(j=>{const k=j.target;[...u.branches].some(A=>A.contains(k))||(o==null||o(j),l==null||l(j),j.defaultPrevented||c==null||c())},p);return Lse(j=>{w===u.layers.size-1&&(a==null||a(j),!j.defaultPrevented&&c&&(j.preventDefault(),c()))},p),f.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(zk=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Uk(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=zk)}},[h,p,r,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Uk())},[h,u]),f.useEffect(()=>{const j=()=>v({});return document.addEventListener(cb,j),()=>document.removeEventListener(cb,j)},[]),f.createElement(Nr.div,us({},d,{ref:x,style:{pointerEvents:C?_?"auto":"none":void 0,...e.style},onFocusCapture:gc(e.onFocusCapture,N.onFocusCapture),onBlurCapture:gc(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:gc(e.onPointerDownCapture,S.onPointerDownCapture)}))});function Use(e,t=globalThis==null?void 0:globalThis.document){const n=nl(e),r=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let d=function(){HL(Ose,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Bse(e,t=globalThis==null?void 0:globalThis.document){const n=nl(e),r=f.useRef(!1);return f.useEffect(()=>{const a=i=>{i.target&&!r.current&&HL(Fse,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Uk(){const e=new CustomEvent(cb);document.dispatchEvent(e)}function HL(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?Mse(a,i):a.dispatchEvent(i)}const fv="focusScope.autoFocusOnMount",pv="focusScope.autoFocusOnUnmount",Bk={bubbles:!1,cancelable:!0},Vse=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),d=nl(a),u=nl(i),h=f.useRef(null),m=Bh(t,x=>c(x)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let x=function(w){if(p.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:li(h.current,{select:!0})},y=function(w){if(p.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||li(h.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&li(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const b=new MutationObserver(g);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),b.disconnect()}}},[r,l,p.paused]),f.useEffect(()=>{if(l){qk.add(p);const x=document.activeElement;if(!l.contains(x)){const g=new CustomEvent(fv,Bk);l.addEventListener(fv,d),l.dispatchEvent(g),g.defaultPrevented||(qse(Qse(GL(l)),{select:!0}),document.activeElement===x&&li(l))}return()=>{l.removeEventListener(fv,d),setTimeout(()=>{const g=new CustomEvent(pv,Bk);l.addEventListener(pv,u),l.dispatchEvent(g),g.defaultPrevented||li(x??document.body,{select:!0}),l.removeEventListener(pv,u),qk.remove(p)},0)}}},[l,d,u,p]);const v=f.useCallback(x=>{if(!n&&!r||p.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,g=document.activeElement;if(y&&g){const b=x.currentTarget,[w,C]=Wse(b);w&&C?!x.shiftKey&&g===C?(x.preventDefault(),n&&li(w,{select:!0})):x.shiftKey&&g===w&&(x.preventDefault(),n&&li(C,{select:!0})):g===b&&x.preventDefault()}},[n,r,p.paused]);return f.createElement(Nr.div,us({tabIndex:-1},o,{ref:m,onKeyDown:v}))});function qse(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(li(r,{select:t}),document.activeElement!==n)return}function Wse(e){const t=GL(e),n=Vk(t,e),r=Vk(t.reverse(),e);return[n,r]}function GL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vk(e,t){for(const n of e)if(!Hse(n,{upTo:t}))return n}function Hse(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Gse(e){return e instanceof HTMLInputElement&&"select"in e}function li(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Gse(e)&&t&&e.select()}}const qk=Kse();function Kse(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Wk(e,t),e.unshift(t)},remove(t){var n;e=Wk(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function Wk(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Qse(e){return e.filter(t=>t.tagName!=="A")}const Yse=f.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...a}=e;return r?mw.createPortal(f.createElement(Nr.div,us({},a,{ref:t})),r):null});function Xse(e,t){return f.useReducer((n,r)=>{const a=t[n][r];return a??n},e)}const Ix=e=>{const{present:t,children:n}=e,r=Jse(t),a=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),i=Bh(r.ref,a.ref);return typeof n=="function"||r.isPresent?f.cloneElement(a,{ref:i}):null};Ix.displayName="Presence";function Jse(e){const[t,n]=f.useState(),r=f.useRef({}),a=f.useRef(e),i=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Xse(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=Im(r.current);i.current=l==="mounted"?d:"none"},[l]),ob(()=>{const d=r.current,u=a.current;if(u!==e){const m=i.current,p=Im(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ob(()=>{if(t){const d=h=>{const p=Im(r.current).includes(h.animationName);h.target===t&&p&&Qa.flushSync(()=>c("ANIMATION_END"))},u=h=>{h.target===t&&(i.current=Im(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Im(e){return(e==null?void 0:e.animationName)||"none"}let xv=0;function Zse(){f.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:Hk()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:Hk()),xv++,()=>{xv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),xv--}},[])}function Hk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var KL=C4(),gv=function(){},Dx=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:gv,onWheelCapture:gv,onTouchMoveCapture:gv}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,p=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,g=y===void 0?"div":y,b=Gw(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=m,C=_4([n,t]),_=Gn(Gn({},b),a);return f.createElement(f.Fragment,null,u&&f.createElement(w,{sideCar:KL,removeScrollBar:d,shards:h,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n}),o?f.cloneElement(f.Children.only(l),Gn(Gn({},_),{ref:C})):f.createElement(g,Gn({},_,{className:c,ref:C}),l))});Dx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dx.classNames={fullWidth:du,zeroRight:cu};var db=!1;if(typeof window<"u")try{var Dm=Object.defineProperty({},"passive",{get:function(){return db=!0,!0}});window.addEventListener("test",Dm,Dm),window.removeEventListener("test",Dm,Dm)}catch{db=!1}var Tl=db?{passive:!1}:!1,ere=function(e){return e.tagName==="TEXTAREA"},QL=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ere(e)&&n[t]==="visible")},tre=function(e){return QL(e,"overflowY")},nre=function(e){return QL(e,"overflowX")},Gk=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=YL(e,n);if(r){var a=XL(e,n),i=a[1],o=a[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},sre=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},rre=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},YL=function(e,t){return e==="v"?tre(t):nre(t)},XL=function(e,t){return e==="v"?sre(t):rre(t)},are=function(e,t){return e==="h"&&t==="rtl"?-1:1},ire=function(e,t,n,r,a){var i=are(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{var p=XL(e,l),v=p[0],x=p[1],y=p[2],g=x-y-i*v;(v||g)&&YL(e,l)&&(h+=g,m+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(h===0||!a)||!u&&(m===0||!a))&&(d=!0),d},Rm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Kk=function(e){return[e.deltaX,e.deltaY]},Qk=function(e){return e&&"current"in e?e.current:e},ore=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lre=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cre=0,Al=[];function dre(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),a=f.useState(cre++)[0],i=f.useState(function(){return Kw()})[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=S4([e.lockRef.current],(e.shards||[]).map(Qk),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(x,y){if("touches"in x&&x.touches.length===2)return!o.current.allowPinchZoom;var g=Rm(x),b=n.current,w="deltaX"in x?x.deltaX:b[0]-g[0],C="deltaY"in x?x.deltaY:b[1]-g[1],_,S=x.target,N=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in x&&N==="h"&&S.type==="range")return!1;var j=Gk(N,S);if(!j)return!0;if(j?_=N:(_=N==="v"?"h":"v",j=Gk(N,S)),!j)return!1;if(!r.current&&"changedTouches"in x&&(w||C)&&(r.current=_),!_)return!0;var k=r.current||_;return ire(k,y,x,k==="h"?w:C,!0)},[]),c=f.useCallback(function(x){var y=x;if(!(!Al.length||Al[Al.length-1]!==i)){var g="deltaY"in y?Kk(y):Rm(y),b=t.current.filter(function(_){return _.name===y.type&&_.target===y.target&&ore(_.delta,g)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(Qk).filter(Boolean).filter(function(_){return _.contains(y.target)}),C=w.length>0?l(y,w[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),d=f.useCallback(function(x,y,g,b){var w={name:x,delta:y,target:g,should:b};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(C){return C!==w})},1)},[]),u=f.useCallback(function(x){n.current=Rm(x),r.current=void 0},[]),h=f.useCallback(function(x){d(x.type,Kk(x),x.target,l(x,e.lockRef.current))},[]),m=f.useCallback(function(x){d(x.type,Rm(x),x.target,l(x,e.lockRef.current))},[]);f.useEffect(function(){return Al.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Tl),document.addEventListener("touchmove",c,Tl),document.addEventListener("touchstart",u,Tl),function(){Al=Al.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Tl),document.removeEventListener("touchmove",c,Tl),document.removeEventListener("touchstart",u,Tl)}},[]);var p=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(i,{styles:lre(a)}):null,p?f.createElement(A4,{gapMode:"margin"}):null)}const ure=E4(KL,dre);var JL=f.forwardRef(function(e,t){return f.createElement(Dx,Gn({},e,{ref:t,sideCar:ure}))});JL.classNames=Dx.classNames;const ZL="Dialog",[e5,cde]=_se(ZL),[hre,xl]=e5(ZL),mre=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d=!1,u]=Tse({prop:r,defaultProp:a,onChange:i});return f.createElement(hre,{scope:t,triggerRef:l,contentRef:c,contentId:mv(),titleId:mv(),descriptionId:mv(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:o},n)},t5="DialogPortal",[fre,n5]=e5(t5,{forceMount:void 0}),pre=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=xl(t5,t);return f.createElement(fre,{scope:t,forceMount:n},f.Children.map(r,o=>f.createElement(Ix,{present:n||i.open},f.createElement(Yse,{asChild:!0,container:a},o))))},ub="DialogOverlay",xre=f.forwardRef((e,t)=>{const n=n5(ub,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=xl(ub,e.__scopeDialog);return i.modal?f.createElement(Ix,{present:r||i.open},f.createElement(gre,us({},a,{ref:t}))):null}),gre=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=xl(ub,n);return f.createElement(JL,{as:vN,allowPinchZoom:!0,shards:[a.contentRef]},f.createElement(Nr.div,us({"data-state":r5(a.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),Zu="DialogContent",vre=f.forwardRef((e,t)=>{const n=n5(Zu,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=xl(Zu,e.__scopeDialog);return f.createElement(Ix,{present:r||i.open},i.modal?f.createElement(yre,us({},a,{ref:t})):f.createElement(bre,us({},a,{ref:t})))}),yre=f.forwardRef((e,t)=>{const n=xl(Zu,e.__scopeDialog),r=f.useRef(null),a=Bh(t,n.contentRef,r);return f.useEffect(()=>{const i=r.current;if(i)return jh(i)},[]),f.createElement(s5,us({},e,{ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gc(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:gc(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:gc(e.onFocusOutside,i=>i.preventDefault())}))}),bre=f.forwardRef((e,t)=>{const n=xl(Zu,e.__scopeDialog),r=f.useRef(!1),a=f.useRef(!1);return f.createElement(s5,us({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,i),!i.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),i.preventDefault()}r.current=!1,a.current=!1},onInteractOutside:i=>{var o,l;(o=e.onInteractOutside)===null||o===void 0||o.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=i.target;((l=n.triggerRef.current)===null||l===void 0?void 0:l.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}}))}),s5=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=xl(Zu,n),c=f.useRef(null),d=Bh(t,c);return Zse(),f.createElement(f.Fragment,null,f.createElement(Vse,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i},f.createElement(zse,us({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":r5(l.open)},o,{ref:d,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function r5(e){return e?"open":"closed"}const wre=mre,jre=pre,Nre=xre,Sre=vre;var Md='[cmdk-group=""]',vv='[cmdk-group-items=""]',_re='[cmdk-group-heading=""]',yN='[cmdk-item=""]',Yk=`${yN}:not([aria-disabled="true"])`,hb="cmdk-item-select",jo="data-value",Cre=(e,t,n)=>Nse(e,t,n),a5=f.createContext(void 0),Vh=()=>f.useContext(a5),i5=f.createContext(void 0),bN=()=>f.useContext(i5),o5=f.createContext(void 0),l5=f.forwardRef((e,t)=>{let n=Ll(()=>{var $,P;return{search:"",value:(P=($=e.value)!=null?$:e.defaultValue)!=null?P:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Ll(()=>new Set),a=Ll(()=>new Map),i=Ll(()=>new Map),o=Ll(()=>new Set),l=c5(e),{label:c,children:d,value:u,onValueChange:h,filter:m,shouldFilter:p,loop:v,disablePointerSelection:x=!1,vimBindings:y=!0,...g}=e,b=f.useId(),w=f.useId(),C=f.useId(),_=f.useRef(null),S=Ore();sl(()=>{if(u!==void 0){let $=u.trim();n.current.value=$,N.emit()}},[u]),sl(()=>{S(6,F)},[]);let N=f.useMemo(()=>({subscribe:$=>(o.current.add($),()=>o.current.delete($)),snapshot:()=>n.current,setState:($,P,Z)=>{var ee,J,te;if(!Object.is(n.current[$],P)){if(n.current[$]=P,$==="search")R(),T(),S(1,A);else if($==="value"&&(Z||S(5,F),((ee=l.current)==null?void 0:ee.value)!==void 0)){let ie=P??"";(te=(J=l.current).onValueChange)==null||te.call(J,ie);return}N.emit()}},emit:()=>{o.current.forEach($=>$())}}),[]),j=f.useMemo(()=>({value:($,P,Z)=>{var ee;P!==((ee=i.current.get($))==null?void 0:ee.value)&&(i.current.set($,{value:P,keywords:Z}),n.current.filtered.items.set($,k(P,Z)),S(2,()=>{T(),N.emit()}))},item:($,P)=>(r.current.add($),P&&(a.current.has(P)?a.current.get(P).add($):a.current.set(P,new Set([$]))),S(3,()=>{R(),T(),n.current.value||A(),N.emit()}),()=>{i.current.delete($),r.current.delete($),n.current.filtered.items.delete($);let Z=O();S(4,()=>{R(),(Z==null?void 0:Z.getAttribute("id"))===$&&A(),N.emit()})}),group:$=>(a.current.has($)||a.current.set($,new Set),()=>{i.current.delete($),a.current.delete($)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:x,listId:b,inputId:C,labelId:w,listInnerRef:_}),[]);function k($,P){var Z,ee;let J=(ee=(Z=l.current)==null?void 0:Z.filter)!=null?ee:Cre;return $?J($,n.current.search,P):0}function T(){if(!n.current.search||l.current.shouldFilter===!1)return;let $=n.current.filtered.items,P=[];n.current.filtered.groups.forEach(ee=>{let J=a.current.get(ee),te=0;J.forEach(ie=>{let ce=$.get(ie);te=Math.max(ce,te)}),P.push([ee,te])});let Z=_.current;U().sort((ee,J)=>{var te,ie;let ce=ee.getAttribute("id"),ve=J.getAttribute("id");return((te=$.get(ve))!=null?te:0)-((ie=$.get(ce))!=null?ie:0)}).forEach(ee=>{let J=ee.closest(vv);J?J.appendChild(ee.parentElement===J?ee:ee.closest(`${vv} > *`)):Z.appendChild(ee.parentElement===Z?ee:ee.closest(`${vv} > *`))}),P.sort((ee,J)=>J[1]-ee[1]).forEach(ee=>{let J=_.current.querySelector(`${Md}[${jo}="${encodeURIComponent(ee[0])}"]`);J==null||J.parentElement.appendChild(J)})}function A(){let $=U().find(Z=>Z.getAttribute("aria-disabled")!=="true"),P=$==null?void 0:$.getAttribute(jo);N.setState("value",P||void 0)}function R(){var $,P,Z,ee;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let J=0;for(let te of r.current){let ie=(P=($=i.current.get(te))==null?void 0:$.value)!=null?P:"",ce=(ee=(Z=i.current.get(te))==null?void 0:Z.keywords)!=null?ee:[],ve=k(ie,ce);n.current.filtered.items.set(te,ve),ve>0&&J++}for(let[te,ie]of a.current)for(let ce of ie)if(n.current.filtered.items.get(ce)>0){n.current.filtered.groups.add(te);break}n.current.filtered.count=J}function F(){var $,P,Z;let ee=O();ee&&((($=ee.parentElement)==null?void 0:$.firstChild)===ee&&((Z=(P=ee.closest(Md))==null?void 0:P.querySelector(_re))==null||Z.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function O(){var $;return($=_.current)==null?void 0:$.querySelector(`${yN}[aria-selected="true"]`)}function U(){var $;return Array.from(($=_.current)==null?void 0:$.querySelectorAll(Yk))}function M($){let P=U()[$];P&&N.setState("value",P.getAttribute(jo))}function B($){var P;let Z=O(),ee=U(),J=ee.findIndex(ie=>ie===Z),te=ee[J+$];(P=l.current)!=null&&P.loop&&(te=J+$<0?ee[ee.length-1]:J+$===ee.length?ee[0]:ee[J+$]),te&&N.setState("value",te.getAttribute(jo))}function D($){let P=O(),Z=P==null?void 0:P.closest(Md),ee;for(;Z&&!ee;)Z=$>0?Mre(Z,Md):Lre(Z,Md),ee=Z==null?void 0:Z.querySelector(Yk);ee?N.setState("value",ee.getAttribute(jo)):B($)}let E=()=>M(U().length-1),I=$=>{$.preventDefault(),$.metaKey?E():$.altKey?D(1):B(1)},q=$=>{$.preventDefault(),$.metaKey?M(0):$.altKey?D(-1):B(-1)};return f.createElement(Nr.div,{ref:t,tabIndex:-1,...g,"cmdk-root":"",onKeyDown:$=>{var P;if((P=g.onKeyDown)==null||P.call(g,$),!$.defaultPrevented)switch($.key){case"n":case"j":{y&&$.ctrlKey&&I($);break}case"ArrowDown":{I($);break}case"p":case"k":{y&&$.ctrlKey&&q($);break}case"ArrowUp":{q($);break}case"Home":{$.preventDefault(),M(0);break}case"End":{$.preventDefault(),E();break}case"Enter":if(!$.nativeEvent.isComposing&&$.keyCode!==229){$.preventDefault();let Z=O();if(Z){let ee=new Event(hb);Z.dispatchEvent(ee)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:$re},c),Rx(e,$=>f.createElement(i5.Provider,{value:N},f.createElement(a5.Provider,{value:j},$))))}),kre=f.forwardRef((e,t)=>{var n,r;let a=f.useId(),i=f.useRef(null),o=f.useContext(o5),l=Vh(),c=c5(e),d=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;sl(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=d5(a,i,[e.value,e.children,i],e.keywords),h=bN(),m=rl(S=>S.value&&S.value===u.current),p=rl(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(a)>0:!0);f.useEffect(()=>{let S=i.current;if(!(!S||e.disabled))return S.addEventListener(hb,v),()=>S.removeEventListener(hb,v)},[p,e.onSelect,e.disabled]);function v(){var S,N;x(),(N=(S=c.current).onSelect)==null||N.call(S,u.current)}function x(){h.setState("value",u.current,!0)}if(!p)return null;let{disabled:y,value:g,onSelect:b,forceMount:w,keywords:C,..._}=e;return f.createElement(Nr.div,{ref:eh([i,t]),..._,id:a,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!m,"data-disabled":!!y,"data-selected":!!m,onPointerMove:y||l.disablePointerSelection?void 0:x,onClick:y?void 0:v},e.children)}),Ere=f.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=f.useId(),l=f.useRef(null),c=f.useRef(null),d=f.useId(),u=Vh(),h=rl(p=>a||u.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);sl(()=>u.group(o),[]),d5(o,l,[e.value,e.heading,c]);let m=f.useMemo(()=>({id:o,forceMount:a}),[a]);return f.createElement(Nr.div,{ref:eh([l,t]),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&f.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),Rx(e,p=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},f.createElement(o5.Provider,{value:m},p))))}),Tre=f.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=f.useRef(null),i=rl(o=>!o.search);return!n&&!i?null:f.createElement(Nr.div,{ref:eh([a,t]),...r,"cmdk-separator":"",role:"separator"})}),Are=f.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=bN(),o=rl(u=>u.search),l=rl(u=>u.value),c=Vh(),d=f.useMemo(()=>{var u;let h=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${yN}[${jo}="${encodeURIComponent(l)}"]`);return h==null?void 0:h.getAttribute("id")},[]);return f.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),f.createElement(Nr.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),Pre=f.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=f.useRef(null),o=f.useRef(null),l=Vh();return f.useEffect(()=>{if(o.current&&i.current){let c=o.current,d=i.current,u,h=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let m=c.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(u),h.unobserve(c)}}},[]),f.createElement(Nr.div,{ref:eh([i,t]),...a,"cmdk-list":"",role:"listbox","aria-label":r,id:l.listId},Rx(e,c=>f.createElement("div",{ref:eh([o,l.listInnerRef]),"cmdk-list-sizer":""},c)))}),Ire=f.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...l}=e;return f.createElement(wre,{open:n,onOpenChange:r},f.createElement(jre,{container:o},f.createElement(Nre,{"cmdk-overlay":"",className:a}),f.createElement(Sre,{"aria-label":e.label,"cmdk-dialog":"",className:i},f.createElement(l5,{ref:t,...l}))))}),Dre=f.forwardRef((e,t)=>rl(n=>n.filtered.count===0)?f.createElement(Nr.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Rre=f.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return f.createElement(Nr.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Rx(e,o=>f.createElement("div",{"aria-hidden":!0},o)))}),Is=Object.assign(l5,{List:Pre,Item:kre,Input:Are,Group:Ere,Separator:Tre,Dialog:Ire,Empty:Dre,Loading:Rre});function Mre(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Lre(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function c5(e){let t=f.useRef(e);return sl(()=>{t.current=e}),t}var sl=typeof window>"u"?f.useEffect:f.useLayoutEffect;function Ll(e){let t=f.useRef();return t.current===void 0&&(t.current=e()),t}function eh(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function rl(e){let t=bN(),n=()=>e(t.snapshot());return f.useSyncExternalStore(t.subscribe,n,n)}function d5(e,t,n,r=[]){let a=f.useRef(),i=Vh();return sl(()=>{var o;let l=(()=>{var d;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=r.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(jo,l),a.current=l}),a}var Ore=()=>{let[e,t]=f.useState(),n=Ll(()=>new Map);return sl(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Fre(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Rx({asChild:e,children:t},n){return e&&f.isValidElement(t)?f.cloneElement(Fre(t),{ref:t.ref},n(t.props.children)):n(t)}var $re={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const wN=f.forwardRef(({className:e,...t},n)=>s.jsx(Is,{ref:n,className:ne("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));wN.displayName=Is.displayName;const jN=f.forwardRef(({className:e,...t},n)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Rn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(Is.Input,{ref:n,className:ne("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));jN.displayName=Is.Input.displayName;const NN=f.forwardRef(({className:e,...t},n)=>s.jsx(Is.List,{ref:n,className:ne("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));NN.displayName=Is.List.displayName;const SN=f.forwardRef((e,t)=>s.jsx(Is.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));SN.displayName=Is.Empty.displayName;const _N=f.forwardRef(({className:e,...t},n)=>s.jsx(Is.Group,{ref:n,className:ne("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));_N.displayName=Is.Group.displayName;const zre=f.forwardRef(({className:e,...t},n)=>s.jsx(Is.Separator,{ref:n,className:ne("-mx-1 h-px bg-border",e),...t}));zre.displayName=Is.Separator.displayName;const CN=f.forwardRef(({className:e,...t},n)=>s.jsx(Is.Item,{ref:n,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));CN.displayName=Is.Item.displayName;function Xk(){var Te;const{slug:e,domainSlug:t}=Gr(),n=pt(),r=e||t||"",{domain:a,loading:i,error:o}=fl(r),l=(a==null?void 0:a.id)||"",{concepts:c,loading:d,refetch:u,updateConceptStatus:h,updateConceptParent:m,updateConcept:p,bulkUpdateStatus:v,addConcept:x,deleteConcept:y,saveMindmapPosition:g,getMindmapPosition:b,clearMindmapPositions:w,moveConceptUp:C,moveConceptDown:_,stats:S}=_x(l);fse();const[N,j]=f.useState(""),[k,T]=f.useState("approved");f.useState(null);const[A,R]=f.useState(!1),[F,O]=f.useState(void 0),[U,M]=f.useState(null);f.useState(!1);const[B,D]=f.useState("tree"),[E,I]=f.useState(!1);f.useState(!1);const[q,$]=f.useState(!1),[P,Z]=f.useState(!1),[ee,J]=f.useState(null),[te,ie]=f.useState(""),[ce,ve]=f.useState(""),[me,je]=f.useState("is_related_to"),[Ye,Oe]=f.useState(!1),[Fe,Ie]=f.useState(null),[ct,Me]=f.useState(""),{user:Le,session:vt,authState:$n}=dn(),{toast:wt}=at();f.useEffect(()=>{console.log("🔍 Current concepts in React state:",c.length),console.log("🔍 Suggested concepts in state:",c.filter(re=>re.status==="suggested").length)},[c]);const gn=f.useMemo(()=>{const re=N.trim().toLowerCase();return console.log("🔍 Filtering concepts:",c.length,"with filter:",k,"query:",re),c.filter(Ae=>{const Un=typeof Ae.difficulty_level=="number"?` (L${Ae.difficulty_level})`:"",tr=(Ae.name+Un+" "+(Ae.description||"")).toLowerCase(),yl=re?tr.includes(re):!0;let Na=!1;return k==="all"?Na=!0:k==="approved"?Na=Ae.status==="approved":k==="pending"?Na=Ae.status==="suggested":k==="rejected"?Na=Ae.status==="rejected":k==="ai_suggested"?Na=Ae.status==="suggested"&&Ae.generation_source==="ai":Na=Ae.status===k,yl&&Na})},[c,N,k]);f.useMemo(()=>c.filter(re=>re.status==="approved"),[c]),f.useMemo(()=>c.filter(re=>re.status==="suggested"),[c]);const de=c.length===0,Ne=re=>{n(`/admin/domains/${r}/concepts/${re.id}`)},K=async()=>{U&&(await m(U.childId,U.parentId),M(null))};S.ai_suggested>0||S.approved>0;const ae=async()=>{$(!0);try{const{data:re,error:Ae}=await L.functions.invoke("clear-and-reimport-concepts",{body:{domainId:l}});if(console.log("Import response:",{data:re,error:Ae}),Ae)throw Ae;wt({title:"Import successful!",description:"Concepts have been cleared and re-imported with proper hierarchy."}),window.location.reload()}catch(re){console.error("Import error:",re),wt({title:"Import failed",description:re.message||"Failed to import concepts. Please try again.",variant:"destructive"})}finally{$(!1),I(!1)}};(Te=Le==null?void 0:Le.app_metadata)==null||Te.role;const ye=async re=>{console.log("🔍 handleAddConcept called with:",re);const Ae=await x({...re,domain_id:re.domain_id||l});console.log("🔍 addConcept result:",Ae),Ae&&(console.log("🔍 Concept added successfully, closing modal and refetching..."),R(!1),O(void 0),console.log("🔍 Waiting 500ms before refetch to allow database propagation..."),setTimeout(()=>{console.log("🔍 Now calling refetch..."),u()},500))},Re=async re=>{window.confirm("Are you sure you want to delete this concept? This action cannot be undone.")&&await y(re)},Ge=async re=>{await h(re,"approved")&&wt({title:"Concept Approved",description:"The concept has been approved successfully."})},se=async re=>{await h(re,"rejected")&&wt({title:"Concept Rejected",description:"The concept has been rejected.",variant:"destructive"})},De=[{value:"is_prerequisite_for",label:"Is a prerequisite for"},{value:"is_related_to",label:"Is related to"},{value:"contrasts_with",label:"Contrasts with"},{value:"is_a_practical_application_of",label:"Is a practical application of"}],it=re=>{J(re),ve(""),ie(""),je("is_related_to"),Z(!0)},Jt=re=>{n(`/admin/domains/${r}/concepts/${re.id}?tab=relationships`)},rn=re=>{console.log("Hierarchy change for:",re.name),Ie(re),Me(re.parent_concept_id||""),Oe(!0)},mt=async()=>{if(Fe)try{const re=ct===""?null:ct;await p(Fe.id,{parent_concept_id:re}),Oe(!1),Ie(null),Me("")}catch(re){console.error("Failed to update parent concept:",re)}},zn=async()=>{if(!ee||!ce){wt({title:"Missing information",description:"Please select a target concept and relationship type.",variant:"destructive"});return}if(ce===ee.id){wt({title:"Invalid selection",description:"Source and target concepts must be different.",variant:"destructive"});return}try{const{error:re}=await L.from("concept_relationships").insert([{concept_a_id:ee.id,concept_b_id:ce,relationship_type:me}]);if(re)throw re;wt({title:"Relationship created",description:"The concepts have been linked successfully."}),Z(!1),J(null),ve(""),ie("")}catch(re){console.error("Create link error:",re),wt({title:"Failed to create link",description:re.message||"Please try again.",variant:"destructive"})}};return $n==="authenticating"||d||i?s.jsxs(Ma,{children:[s.jsx(Pm,{}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):o||!a?s.jsxs(Ma,{children:[s.jsx(Pm,{}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Domain Not Found"}),s.jsx("p",{className:"text-gray-600",children:o||"The requested domain could not be found."})]})})]}):!Le||!vt?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs(V,{className:"w-full max-w-md",children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Authentication Required"}),s.jsx(we,{children:"You need to be logged in to access concepts. Please login to continue."})]}),s.jsx(W,{children:s.jsx(z,{onClick:()=>window.location.href="/",className:"w-full",children:"Go to Login"})})]})}):de&&!d?s.jsxs(Ma,{children:[s.jsx(Pm,{}),s.jsx(mse,{domainId:l,domainSlug:t||l,domainName:(a==null?void 0:a.name)||t||"Unknown Domain",onUploadComplete:()=>{},onImportComplete:()=>{window.location.reload()}})]}):s.jsxs(Ma,{children:[s.jsx(Pm,{}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h1",{className:"text-2xl font-medium text-gray-900",children:[(a==null?void 0:a.name)||"Domain"," Management"]}),s.jsxs(z,{onClick:()=>{O(void 0),R(!0)},className:"bg-black text-white hover:bg-black/90",children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Concept"]})]}),s.jsx("div",{className:"flex items-center justify-end gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bw,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(Ve,{value:k,onValueChange:T,children:[s.jsx(ze,{className:"w-[140px] bg-white",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"approved",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Approved"]})}),s.jsx(le,{value:"suggested",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"Suggested"]})}),s.jsx(le,{value:"pending",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Pending"]})}),s.jsx(le,{value:"rejected",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),"Rejected"]})}),s.jsx(le,{value:"ai_suggested",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"AI Suggested"]})}),s.jsx(le,{value:"confirmed",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Confirmed"]})}),s.jsx(le,{value:"active",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),"Active (All except Rejected)"]})}),s.jsx(le,{value:"all",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),"All Statuses"]})})]})]})]}),s.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md overflow-hidden",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>D("tree"),className:`flex items-center gap-2 rounded-none border-0 px-3 ${B==="tree"?"bg-black text-white hover:bg-black/90":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(Fu,{className:"h-4 w-4"}),"Tree"]}),s.jsx("div",{className:"w-px bg-gray-300 h-6"}),s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>D("list"),className:`flex items-center gap-2 rounded-none border-0 px-3 ${B==="list"?"bg-black text-white hover:bg-black/90":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(Sw,{className:"h-4 w-4"}),"List"]})]})]})}),s.jsx("div",{className:"bg-white border-b",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex space-x-0",children:[s.jsxs("button",{onClick:()=>T("all"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${k==="all"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All (",c.length,")"]}),s.jsxs("button",{onClick:()=>T("approved"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${k==="approved"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Approved (",c.filter(re=>re.status==="approved").length,")"]}),s.jsxs("button",{onClick:()=>T("pending"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${k==="pending"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending (",c.filter(re=>re.status==="suggested").length,")"]}),s.jsxs("button",{onClick:()=>T("rejected"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${k==="rejected"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Rejected (",c.filter(re=>re.status==="rejected").length,")"]}),s.jsxs("button",{onClick:()=>T("ai_suggested"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${k==="ai_suggested"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["AI Suggested (",c.filter(re=>re.status==="suggested"&&re.generation_source==="ai").length,")"]})]}),s.jsxs("div",{className:"relative mr-4",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search concepts...",value:N,onChange:re=>j(re.target.value),className:"pl-10 bg-gray-50 w-64"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border",children:B==="tree"?s.jsx("div",{className:"overflow-hidden",children:s.jsx(hse,{concepts:gn,onConceptClick:Ne,onConceptDelete:Re,onConceptUpdate:p,onAddChild:re=>{console.log("🔍 Add child clicked for parentId:",re);const Ae=c.find(Un=>Un.id===re);console.log("🔍 Parent concept found:",Ae==null?void 0:Ae.name,Ae),O(re),R(!0),console.log("🔍 Modal will open with selectedParentId:",re)},onStartLinking:it,onStartHierarchyChange:rn,onManageRelationships:Jt,showApprovalActions:k==="pending",onApproveConcept:Ge,onRejectConcept:se})}):s.jsx("div",{className:"overflow-hidden",children:s.jsx(JR,{concepts:gn,onConceptClick:Ne,onConceptDelete:Re,onConceptUpdate:p,onAddChild:re=>{console.log("🔍 Add child clicked for parentId:",re);const Ae=c.find(Un=>Un.id===re);console.log("🔍 Parent concept found:",Ae==null?void 0:Ae.name,Ae),O(re),R(!0),console.log("🔍 Modal will open with selectedParentId:",re)},onStartLinking:it,onStartHierarchyChange:rn,onManageRelationships:Jt,showApprovalActions:k==="pending",onApproveConcept:Ge,onRejectConcept:se})})})]}),s.jsx(Sx,{open:(U==null?void 0:U.open)||!1,onOpenChange:re=>!re&&M(null),children:s.jsxs(Dh,{children:[s.jsxs(Rh,{children:[s.jsx(Lh,{children:"Confirm Hierarchy Change"}),s.jsxs(Oh,{children:["Do you want to make ",s.jsxs("strong",{children:['"',U==null?void 0:U.parentName,'"']})," the parent of"," ",s.jsxs("strong",{children:['"',U==null?void 0:U.childName,'"']}),"?"]})]}),s.jsxs(Mh,{children:[s.jsx($h,{children:"Cancel"}),s.jsx(Fh,{onClick:K,children:"Confirm"})]})]})}),A&&s.jsx(tM,{concepts:c,parentConceptId:F,domainId:l,onClose:()=>{R(!1),O(void 0)},onSave:ye}),s.jsx(nn,{open:E,onOpenChange:I,children:s.jsxs(Kt,{children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Re-import Master Concepts"}),s.jsx(Tn,{children:"This will clear all existing concepts for this domain and re-import them from the master concept list file. This action cannot be undone."})]}),s.jsxs(Ui,{children:[s.jsx(z,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),s.jsx(z,{onClick:ae,disabled:q,className:"flex items-center gap-2",children:q?s.jsxs(s.Fragment,{children:[s.jsx(cs,{className:"h-4 w-4 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(On,{className:"h-4 w-4"}),"Re-import Concepts"]})})]})]})}),s.jsx(nn,{open:P,onOpenChange:Z,children:s.jsxs(Kt,{className:"sm:max-w-lg",children:[s.jsxs(Qt,{children:[s.jsxs(Yt,{className:"flex items-center gap-2",children:[s.jsx(Cy,{className:"h-4 w-4"})," Create Relationship"]}),s.jsx(Tn,{children:ee?s.jsxs("span",{children:["Linking from: ",s.jsx("strong",{children:ee.name})]}):"Choose a source concept to start linking."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Target concept"}),s.jsx("div",{className:"border rounded-md",children:s.jsxs(wN,{children:[s.jsx(jN,{placeholder:"Search concepts...",value:te,onValueChange:ie}),s.jsxs(NN,{children:[s.jsx(SN,{children:"No concepts found."}),s.jsx(_N,{children:c.filter(re=>re.id!==(ee==null?void 0:ee.id)).filter(re=>te?(re.name+" "+(re.description||"")).toLowerCase().includes(te.toLowerCase()):!0).map(re=>s.jsx(CN,{value:re.name,onSelect:()=>ve(re.id),children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{className:"truncate mr-3",children:re.name}),ce===re.id&&s.jsx(X,{variant:"secondary",className:"text-xs",children:"Selected"})]})},re.id))})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Relationship type"}),s.jsxs(Ve,{value:me,onValueChange:je,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select relationship type"})}),s.jsx(Ue,{children:De.map(re=>s.jsx(le,{value:re.value,children:re.label},re.value))})]})]}),s.jsxs(Ui,{children:[s.jsx(z,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),s.jsx(z,{onClick:zn,disabled:!ce||!ee,children:"Create Link"})]})]})}),s.jsx(nn,{open:Ye,onOpenChange:Oe,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsxs(Yt,{className:"flex items-center gap-2",children:[s.jsx(Fu,{className:"h-4 w-4"})," Change Parent Concept"]}),s.jsx(Tn,{children:Fe&&s.jsxs("span",{children:["Change parent for: ",s.jsx("strong",{children:Fe.name})]})})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Parent Concept"}),s.jsxs(Ve,{value:ct||"none",onValueChange:re=>Me(re==="none"?"":re),children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select parent concept or none"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"none",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{children:"None (Root level concept)"})})}),c.filter(re=>re.id!==(Fe==null?void 0:Fe.id)).sort((re,Ae)=>re.name.localeCompare(Ae.name)).map(re=>s.jsx(le,{value:re.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:re.name}),s.jsxs(X,{variant:"outline",className:"text-xs",children:["L",re.difficulty_level??0]})]})},re.id))]})]})]})}),s.jsxs(Ui,{children:[s.jsx(z,{variant:"outline",onClick:()=>Oe(!1),children:"Cancel"}),s.jsx(z,{onClick:mt,className:"bg-black text-white hover:bg-black/90",children:"Save Changes"})]})]})})]})}const Ure=e=>{const[t,n]=f.useState([]),[r,a]=f.useState(!1),{toast:i}=at(),o=f.useCallback(async()=>{if(!e)return;a(!0);const{data:h,error:m}=await L.from("concepts").select("id").eq("domain_id",e);if(m)throw console.error("Failed to load concepts for domain:",m),a(!1),m;const p=(h||[]).map(y=>y.id);if(p.length===0){n([]),a(!1);return}const{data:v,error:x}=await L.from("learning_goals").select("id, concept_id, goal_description, bloom_level, goal_type, sequence_order, status, created_at, metadata_json").in("concept_id",p).in("status",["suggested","approved","rejected"]).order("created_at",{ascending:!1});if(x)throw console.error("Failed to load learning goals:",x),a(!1),x;n(v||[]),a(!1)},[e]);f.useEffect(()=>{o().catch(()=>{})},[o]);const l=f.useMemo(()=>{const h=new Map;for(const m of t){const p=m.concept_id||"unlinked";h.has(p)||h.set(p,[]),h.get(p).push(m)}return h},[t]);return{goals:t,groupedByConcept:l,loading:r,refresh:o,approveGoal:async h=>{const{error:m}=await L.from("learning_goals").update({status:"approved"}).eq("id",h);if(m)throw console.error("Approve goal failed:",m),m;i({title:"Goal approved"}),await o()},rejectGoal:async h=>{const{error:m}=await L.from("learning_goals").update({status:"rejected"}).eq("id",h);if(m)throw console.error("Reject goal failed:",m),m;i({title:"Goal rejected"}),await o()},editGoal:async(h,m)=>{const{error:p}=await L.from("learning_goals").update({goal_description:m}).eq("id",h);if(p)throw console.error("Edit goal failed:",p),p;i({title:"Goal updated"}),await o()}}};var kN="Popover",[u5,dde]=es(kN,[no]),qh=no(),[Bre,oo]=u5(kN),h5=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=qh(t),c=f.useRef(null),[d,u]=f.useState(!1),[h=!1,m]=Xs({prop:r,defaultProp:a,onChange:i});return s.jsx(Gp,{...l,children:s.jsx(Bre,{scope:t,contentId:Ws(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:f.useCallback(()=>u(!0),[]),onCustomAnchorRemove:f.useCallback(()=>u(!1),[]),modal:o,children:n})})};h5.displayName=kN;var m5="PopoverAnchor",Vre=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=oo(m5,n),i=qh(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return f.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(gh,{...i,...r,ref:t})});Vre.displayName=m5;var f5="PopoverTrigger",p5=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=oo(f5,n),i=qh(n),o=He(t,a.triggerRef),l=s.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":b5(a.open),...r,ref:o,onClick:ue(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(gh,{asChild:!0,...i,children:l})});p5.displayName=f5;var EN="PopoverPortal",[qre,Wre]=u5(EN,{forceMount:void 0}),x5=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=oo(EN,t);return s.jsx(qre,{scope:t,forceMount:n,children:s.jsx(xn,{present:n||i.open,children:s.jsx(ed,{asChild:!0,container:a,children:r})})})};x5.displayName=EN;var Qc="PopoverContent",g5=f.forwardRef((e,t)=>{const n=Wre(Qc,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=oo(Qc,e.__scopePopover);return s.jsx(xn,{present:r||i.open,children:i.modal?s.jsx(Hre,{...a,ref:t}):s.jsx(Gre,{...a,ref:t})})});g5.displayName=Qc;var Hre=f.forwardRef((e,t)=>{const n=oo(Qc,e.__scopePopover),r=f.useRef(null),a=He(t,r),i=f.useRef(!1);return f.useEffect(()=>{const o=r.current;if(o)return jh(o)},[]),s.jsx(wh,{as:ds,allowPinchZoom:!0,children:s.jsx(v5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ue(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Gre=f.forwardRef((e,t)=>{const n=oo(Qc,e.__scopePopover),r=f.useRef(!1),a=f.useRef(!1);return s.jsx(v5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),v5=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,m=oo(Qc,n),p=qh(n);return ux(),s.jsx(bh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(cl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(Kp,{"data-state":b5(m.open),role:"dialog",id:m.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),y5="PopoverClose",Kre=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=oo(y5,n);return s.jsx(_e.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,()=>a.onOpenChange(!1))})});Kre.displayName=y5;var Qre="PopoverArrow",Yre=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qh(n);return s.jsx(Qp,{...a,...r,ref:t})});Yre.displayName=Qre;function b5(e){return e?"open":"closed"}var Xre=h5,Jre=p5,Zre=x5,w5=g5;const eae=Xre,tae=Jre,j5=f.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>s.jsx(Zre,{children:s.jsx(w5,{ref:a,align:t,sideOffset:n,className:ne("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));j5.displayName=w5.displayName;const nae=["Remember","Understand","Apply","Analyze","Evaluate","Create"],sae={suggested:{color:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Pending Review"},approved:{color:"bg-green-50 text-green-700 border-green-200",label:"Approved"},rejected:{color:"bg-red-50 text-red-700 border-red-200",label:"Rejected"},edited:{color:"bg-blue-50 text-blue-700 border-blue-200",label:"Edited"}};function rae({goal:e,onStatusChange:t,onEdit:n}){const[r,a]=f.useState(!1),[i,o]=f.useState(e.title||"Untitled Goal"),[l,c]=f.useState(e.goal_description),[d,u]=f.useState(e.bloomsLevel||e.bloom_level||"Apply"),h=()=>{n(e.id,{goal_description:l,bloom_level:d}),a(!1)},m=()=>{o(e.title||"Untitled Goal"),c(e.goal_description),u(e.bloomsLevel||e.bloom_level||"Apply"),a(!1)},p=sae[e.status];return s.jsxs(V,{className:"relative",children:[s.jsx(G,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[r?s.jsx(pe,{value:i,onChange:v=>o(v.target.value),className:"mb-2",placeholder:"Goal title..."}):s.jsx("h3",{className:"pr-4",children:e.title||e.goal_description.split(".")[0]||"Untitled Goal"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(X,{variant:"outline",className:p.color,children:p.label}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(rt,{className:"h-3 w-3"}),r?s.jsxs(Ve,{value:d,onValueChange:u,children:[s.jsx(ze,{className:"w-32 h-6 text-xs",children:s.jsx(qe,{})}),s.jsx(Ue,{children:nae.map(v=>s.jsx(le,{value:v,children:v},v))})]}):s.jsx("span",{children:e.bloomsLevel||e.bloom_level||"Apply"})]})]})]}),s.jsx("div",{className:"flex items-center gap-1",children:r?s.jsxs(s.Fragment,{children:[s.jsx(z,{size:"sm",variant:"ghost",onClick:h,className:"h-8 w-8 p-0",children:s.jsx(Oa,{className:"h-4 w-4"})}),s.jsx(z,{size:"sm",variant:"ghost",onClick:m,className:"h-8 w-8 p-0",children:s.jsx(Lt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(z,{size:"sm",variant:"ghost",onClick:()=>a(!0),className:"h-8 w-8 p-0",children:s.jsx(Ti,{className:"h-4 w-4"})}),e.status!=="approved"&&s.jsx(z,{size:"sm",variant:"ghost",onClick:()=>t(e.id,"approved"),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700 hover:bg-green-50",children:s.jsx(pn,{className:"h-4 w-4"})}),e.status!=="rejected"&&s.jsx(z,{size:"sm",variant:"ghost",onClick:()=>t(e.id,"rejected"),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Lt,{className:"h-4 w-4"})})]})})]})}),s.jsxs(W,{className:"pt-0",children:[r?s.jsx(Fn,{value:l,onChange:v=>c(v.target.value),placeholder:"Goal description...",className:"min-h-[80px]"}):s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.goal_description}),e.concepts&&e.concepts.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-4",children:e.concepts.map(v=>s.jsx(X,{variant:"secondary",className:"text-xs",children:v.replace("-"," ")},v))})]})]})}function aae({selectedConcept:e,onConceptSelect:t,concepts:n}){const[r,a]=f.useState(!1),[i,o]=f.useState(""),l=f.useMemo(()=>n.find(u=>u.id===e),[n,e]),c=u=>{u.stopPropagation(),t("")},d=f.useMemo(()=>{if(!i)return n;const u=i.toLowerCase();return n.filter(h=>{var m;return h.name.toLowerCase().includes(u)||((m=h.description)==null?void 0:m.toLowerCase().includes(u))})},[i,n]);return s.jsxs(eae,{open:r,onOpenChange:a,children:[s.jsx(tae,{asChild:!0,children:s.jsxs(z,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between h-auto min-h-[44px] p-3",children:[l?s.jsxs("div",{className:"flex items-center gap-2 text-left w-full",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"truncate",children:l.name}),l.description&&s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:l.description})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-auto",children:[s.jsx("button",{onClick:c,className:"h-4 w-4 flex items-center justify-center opacity-70 hover:opacity-100 transition-opacity",children:s.jsx(Lt,{className:"h-4 w-4"})}),s.jsx(Rn,{className:"h-4 w-4 opacity-70"})]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Rn,{className:"h-4 w-4"}),s.jsx("span",{children:"Type to search a concept..."})]}),!l&&s.jsx(td,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(j5,{className:"w-[600px] p-0",align:"start",children:s.jsxs(wN,{shouldFilter:!1,children:[s.jsx(jN,{placeholder:"Type to search concepts...",value:i,onValueChange:o}),s.jsxs(NN,{children:[s.jsx(SN,{children:s.jsxs("div",{className:"py-6 text-center text-sm",children:[s.jsx(Rn,{className:"mx-auto h-4 w-4 opacity-50 mb-2"}),'No concepts found matching "',i,'"']})}),s.jsx(tl,{className:"h-[400px]",children:s.jsx(_N,{children:d.sort((u,h)=>u.name.localeCompare(h.name)).map(u=>s.jsx(CN,{value:u.id,onSelect:h=>{t(h===e?"":h),a(!1),o("")},className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-3 w-full",children:[s.jsx(pn,{className:ne("h-4 w-4 flex-shrink-0",e===u.id?"opacity-100":"opacity-0")}),s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:u.name}),u.difficulty_level!==void 0&&s.jsxs(X,{variant:"outline",className:"text-xs",children:["L",u.difficulty_level]})]}),u.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-1",children:u.description})]})]})},u.id))})})]})]})})]})}function iae({goals:e,onGoalStatusChange:t,onEdit:n}){const[r,a]=f.useState("all"),i=c=>c?e.filter(d=>d.status===c):e,o=c=>e.filter(d=>d.status===c).length,l=(c,d)=>{n(c,d)};return s.jsxs(V,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(Xn,{className:"h-5 w-5"}),s.jsx("h2",{children:"Generated Learning Goals"}),s.jsxs(X,{variant:"secondary",children:[e.length," goals"]})]}),s.jsxs(Qr,{value:r,onValueChange:a,className:"w-full",children:[s.jsxs(wr,{className:"grid w-full grid-cols-5",children:[s.jsxs(Je,{value:"all",className:"relative",children:["All",s.jsx(X,{variant:"outline",className:"ml-2 text-xs",children:e.length})]}),s.jsxs(Je,{value:"suggested",className:"relative",children:["Pending",s.jsx(X,{variant:"outline",className:"ml-2 text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:o("suggested")})]}),s.jsxs(Je,{value:"approved",className:"relative",children:["Approved",s.jsx(X,{variant:"outline",className:"ml-2 text-xs bg-green-50 text-green-700 border-green-200",children:o("approved")})]}),s.jsxs(Je,{value:"rejected",className:"relative",children:["Rejected",s.jsx(X,{variant:"outline",className:"ml-2 text-xs bg-red-50 text-red-700 border-red-200",children:o("rejected")})]}),s.jsxs(Je,{value:"edited",className:"relative",children:["Edited",s.jsx(X,{variant:"outline",className:"ml-2 text-xs bg-blue-50 text-blue-700 border-blue-200",children:o("edited")})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx(Ze,{value:"all",className:"mt-0",children:s.jsx(Ld,{goals:i(),onStatusChange:t,onEdit:l})}),s.jsx(Ze,{value:"suggested",className:"mt-0",children:s.jsx(Ld,{goals:i("suggested"),onStatusChange:t,onEdit:l})}),s.jsx(Ze,{value:"approved",className:"mt-0",children:s.jsx(Ld,{goals:i("approved"),onStatusChange:t,onEdit:l})}),s.jsx(Ze,{value:"rejected",className:"mt-0",children:s.jsx(Ld,{goals:i("rejected"),onStatusChange:t,onEdit:l})}),s.jsx(Ze,{value:"edited",className:"mt-0",children:s.jsx(Ld,{goals:i("edited"),onStatusChange:t,onEdit:l})})]})]})]})}function Ld({goals:e,onStatusChange:t,onEdit:n}){return e.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Xn,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{children:"No learning goals in this category."})]}):s.jsx("div",{className:"space-y-4",children:e.map(r=>s.jsx(rae,{goal:r,onStatusChange:t,onEdit:n},r.id))})}function yv(){const{domainId:e,slug:t}=Gr(),[n]=ld(),r=n.get("conceptId"),{domains:a}=As(),i=t||e||"",{domain:o,loading:l,error:c}=fl(i),d=f.useMemo(()=>o||(e?a.find(O=>O.id===e||O.slug===e):a[0]),[o,a,e]),[u,h]=f.useState(r),[m,p]=f.useState([]),[v,x]=f.useState([]),[y,g]=f.useState(!1),[b,w]=f.useState(!1),{goals:C,approveGoal:_,rejectGoal:S,editGoal:N}=Ure((d==null?void 0:d.id)??e),{toast:j}=at();f.useEffect(()=>{if(!(d!=null&&d.id)&&!e)return;(async()=>{w(!0);try{const U=(d==null?void 0:d.id)??e,{data:M,error:B}=await L.from("concepts").select("id, name, description, difficulty_level, domain_id").eq("domain_id",U).eq("status","approved").order("name");if(B)throw B;p(M||[])}catch(U){console.error("Failed to load concepts:",U),j({title:"Failed to load concepts",description:"Please try refreshing the page.",variant:"destructive"})}finally{w(!1)}})()},[d==null?void 0:d.id,e,j]),f.useEffect(()=>{const O=C.map(U=>({...U,status:U.status||"suggested",title:U.goal_description.split(".")[0]+".",bloomsLevel:U.bloom_level,concepts:[u].filter(Boolean)}));x(O)},[C,u]);const k=async O=>{const U=m.find(D=>D.id===O);if(!U)return[];const M=U.name,B=[];return B.push({id:`goal-${O}-understanding`,concept_id:O,title:`Understand ${M} fundamentals`,goal_description:`Students will explain the basic principles and characteristics of ${M}, including its role in the domain and practical applications.`,bloom_level:"Understand",bloomsLevel:"Understand",goal_type:"learning_objective",sequence_order:1,status:"suggested",created_at:new Date().toISOString(),concepts:[O],metadata_json:null},{id:`goal-${O}-application`,concept_id:O,title:`Apply ${M} in practice`,goal_description:`Students will demonstrate practical application of ${M} in real-world scenarios and problem-solving contexts.`,bloom_level:"Apply",bloomsLevel:"Apply",goal_type:"learning_objective",sequence_order:2,status:"suggested",created_at:new Date().toISOString(),concepts:[O],metadata_json:null},{id:`goal-${O}-analysis`,concept_id:O,title:`Analyze ${M} in context`,goal_description:`Students will analyze examples of ${M} in various contexts, identifying key patterns and relationships with other concepts.`,bloom_level:"Analyze",bloomsLevel:"Analyze",goal_type:"learning_objective",sequence_order:3,status:"suggested",created_at:new Date().toISOString(),concepts:[O],metadata_json:null}),B},T=async()=>{if(u){g(!0);try{await new Promise(U=>setTimeout(U,2e3));const O=await k(u);x(O),j({title:"Goals Generated",description:`Generated ${O.length} learning goals for the selected concept.`})}catch{j({title:"Generation Failed",description:"Failed to generate learning goals. Please try again.",variant:"destructive"})}finally{g(!1)}}},A=async(O,U)=>{try{U==="approved"?await _(O):U==="rejected"&&await S(O),x(M=>M.map(B=>B.id===O?{...B,status:U}:B))}catch{j({title:"Status Update Failed",description:"Failed to update goal status. Please try again.",variant:"destructive"})}},R=async(O,U)=>{try{await N(O,U.goal_description||""),x(M=>M.map(B=>B.id===O?{...B,...U,status:"edited"}:B))}catch{j({title:"Edit Failed",description:"Failed to edit goal. Please try again.",variant:"destructive"})}},F=O=>{const U=m.find(M=>M.id===O);return(U==null?void 0:U.name)||O.replace(/-/g," ").replace(/\b\w/g,M=>M.toUpperCase())};return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsx(va,{}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(_w,{className:"h-8 w-8 text-primary"}),s.jsx("h1",{className:"text-3xl",children:"Learning Goals Management"})]}),s.jsx("p",{className:"text-muted-foreground",children:e?`Search and select a concept below to generate AI-suggested learning goals for ${(d==null?void 0:d.name)||"this domain"}.`:"Search and select a concept below to generate AI-suggested learning goals for your curriculum."}),!e&&a.length>0&&s.jsx("div",{className:"mt-4",children:s.jsx(V,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(rt,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium",children:"Domain:"}),s.jsxs(Ve,{value:(d==null?void 0:d.id)||"",onValueChange:O=>{window.location.reload()},children:[s.jsx(ze,{className:"w-full mt-1",children:s.jsx(qe,{placeholder:"Select a domain"})}),s.jsx(Ue,{children:a.map(O=>s.jsx(le,{value:O.id,children:O.name},O.id))})]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-stretch",children:[s.jsx("div",{className:"lg:col-span-2 flex",children:s.jsxs(V,{className:"p-6 flex-1",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-5 w-5"}),s.jsx("h2",{children:u?`Selected concept: ${F(u)}`:"Select concept or show the name of the selected concept"})]})}),b?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(Hn,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading concepts..."})]}):s.jsx(aae,{selectedConcept:u,onConceptSelect:O=>{h(O===u?null:O),x([])},concepts:m})]})}),s.jsx("div",{className:"flex flex-col",children:s.jsx(V,{className:"p-6 flex-1",children:s.jsx("div",{className:"space-y-1",children:s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs(z,{onClick:T,disabled:!u||y,className:"flex items-center gap-2",variant:"default",children:[s.jsx(xa,{className:"h-4 w-4"}),y?"Generating...":"AI Generate Goals"]}),s.jsxs(z,{onClick:()=>{console.log("Manual goal creation clicked"),j({title:"Coming Soon",description:"Manual goal creation will be available soon."})},disabled:!u,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Pt,{className:"h-4 w-4"}),"Create Goal Manually"]}),s.jsxs(z,{onClick:()=>{console.log("View exercises clicked"),j({title:"Coming Soon",description:"Exercise management will be available soon."})},disabled:!u,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Wi,{className:"h-4 w-4"}),"View Exercises"]})]})})})})]}),s.jsx("div",{className:"mt-12",children:s.jsx(iae,{goals:v,onGoalStatusChange:A,onEdit:R})})]})})}var N5={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(Mn,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},a,i=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,d={};function u(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var T=_(k);T.chunkSize=parseInt(T.chunkSize),k.step||k.chunk||(T.chunkSize=null),this._handle=new x(T),(this._handle.streamer=this)._config=T}).call(this,j),this.parseChunk=function(k,T){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let F=this._config.newline;F||(R=this._config.quoteChar||'"',F=this._handle.guessLineEndings(k,R)),k=[...k.split(F).slice(A)].join(F)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(R=this._config.beforeFirstChunk(k))!==void 0&&(k=R),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+k,R=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=R.meta.cursor,A=(this._finished||(this._partialLine=A.substring(k-this._baseIndex),this._baseIndex=k),R&&R.data&&(this._rowCount+=R.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:R,workerId:d.WORKER_ID,finished:A});else if(N(this._config.chunk)&&!T){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=R=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!A||!N(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(k){N(this._config.error)?this._config.error(k):o&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:k,finished:!1})}}function h(j){var k;(j=j||{}).chunkSize||(j.chunkSize=d.RemoteChunkSize),u.call(this,j),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),i||(k.onload=S(this._chunkLoaded,this),k.onerror=S(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var T,A=this._config.downloadRequestHeaders;for(T in A)k.setRequestHeader(T,A[T])}var R;this._config.chunkSize&&(R=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+R));try{k.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}i&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(T=>(T=T.getResponseHeader("Content-Range"))!==null?parseInt(T.substring(T.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(T){T=k.statusText||T,this._sendError(new Error(T))}}function m(j){(j=j||{}).chunkSize||(j.chunkSize=d.LocalChunkSize),u.call(this,j);var k,T,A=typeof FileReader<"u";this.stream=function(R){this._input=R,T=R.slice||R.webkitSlice||R.mozSlice,A?((k=new FileReader).onload=S(this._chunkLoaded,this),k.onerror=S(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),R=T.call(R,this._start,F)),k.readAsText(R,this._config.encoding));A||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(k.error)}}function p(j){var k;u.call(this,j=j||{}),this.stream=function(T){return k=T,this._nextChunk()},this._nextChunk=function(){var T,A;if(!this._finished)return T=this._config.chunkSize,k=T?(A=k.substring(0,T),k.substring(T)):(A=k,""),this._finished=!k,this.parseChunk(A)}}function v(j){u.call(this,j=j||{});var k=[],T=!0,A=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):T=!0},this._streamData=S(function(R){try{k.push(typeof R=="string"?R:R.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(F){this._streamError(F)}},this),this._streamError=S(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=S(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(j){var k,T,A,R,F=Math.pow(2,53),O=-F,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,D=0,E=0,I=!1,q=!1,$=[],P={data:[],errors:[],meta:{}};function Z(ie){return j.skipEmptyLines==="greedy"?ie.join("").trim()==="":ie.length===1&&ie[0].length===0}function ee(){if(P&&A&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),A=!1),j.skipEmptyLines&&(P.data=P.data.filter(function(me){return!Z(me)})),J()){let me=function(je,Ye){N(j.transformHeader)&&(je=j.transformHeader(je,Ye)),$.push(je)};if(P)if(Array.isArray(P.data[0])){for(var ie=0;J()&&ie<P.data.length;ie++)P.data[ie].forEach(me);P.data.splice(0,1)}else P.data.forEach(me)}function ce(me,je){for(var Ye=j.header?{}:[],Oe=0;Oe<me.length;Oe++){var Fe=Oe,Ie=me[Oe],Ie=((ct,Me)=>(Le=>(j.dynamicTypingFunction&&j.dynamicTyping[Le]===void 0&&(j.dynamicTyping[Le]=j.dynamicTypingFunction(Le)),(j.dynamicTyping[Le]||j.dynamicTyping)===!0))(ct)?Me==="true"||Me==="TRUE"||Me!=="false"&&Me!=="FALSE"&&((Le=>{if(U.test(Le)&&(Le=parseFloat(Le),O<Le&&Le<F))return 1})(Me)?parseFloat(Me):M.test(Me)?new Date(Me):Me===""?null:Me):Me)(Fe=j.header?Oe>=$.length?"__parsed_extra":$[Oe]:Fe,Ie=j.transform?j.transform(Ie,Fe):Ie);Fe==="__parsed_extra"?(Ye[Fe]=Ye[Fe]||[],Ye[Fe].push(Ie)):Ye[Fe]=Ie}return j.header&&(Oe>$.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+$.length+" fields but parsed "+Oe,E+je):Oe<$.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+$.length+" fields but parsed "+Oe,E+je)),Ye}var ve;P&&(j.header||j.dynamicTyping||j.transform)&&(ve=1,!P.data.length||Array.isArray(P.data[0])?(P.data=P.data.map(ce),ve=P.data.length):P.data=ce(P.data,0),j.header&&P.meta&&(P.meta.fields=$),E+=ve)}function J(){return j.header&&$.length===0}function te(ie,ce,ve,me){ie={type:ie,code:ce,message:ve},me!==void 0&&(ie.row=me),P.errors.push(ie)}N(j.step)&&(R=j.step,j.step=function(ie){P=ie,J()?ee():(ee(),P.data.length!==0&&(D+=ie.data.length,j.preview&&D>j.preview?T.abort():(P.data=P.data[0],R(P,B))))}),this.parse=function(ie,ce,ve){var me=j.quoteChar||'"',me=(j.newline||(j.newline=this.guessLineEndings(ie,me)),A=!1,j.delimiter?N(j.delimiter)&&(j.delimiter=j.delimiter(ie),P.meta.delimiter=j.delimiter):((me=((je,Ye,Oe,Fe,Ie)=>{var ct,Me,Le,vt;Ie=Ie||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var $n=0;$n<Ie.length;$n++){for(var wt,gn=Ie[$n],de=0,Ne=0,K=0,ae=(Le=void 0,new g({comments:Fe,delimiter:gn,newline:Ye,preview:10}).parse(je)),ye=0;ye<ae.data.length;ye++)Oe&&Z(ae.data[ye])?K++:(wt=ae.data[ye].length,Ne+=wt,Le===void 0?Le=wt:0<wt&&(de+=Math.abs(wt-Le),Le=wt));0<ae.data.length&&(Ne/=ae.data.length-K),(Me===void 0||de<=Me)&&(vt===void 0||vt<Ne)&&1.99<Ne&&(Me=de,ct=gn,vt=Ne)}return{successful:!!(j.delimiter=ct),bestDelimiter:ct}})(ie,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=me.bestDelimiter:(A=!0,j.delimiter=d.DefaultDelimiter),P.meta.delimiter=j.delimiter),_(j));return j.preview&&j.header&&me.preview++,k=ie,T=new g(me),P=T.parse(k,ce,ve),ee(),I?{meta:{paused:!0}}:P||{meta:{paused:!1}}},this.paused=function(){return I},this.pause=function(){I=!0,T.abort(),k=N(j.chunk)?"":k.substring(T.getCharIndex())},this.resume=function(){B.streamer._halted?(I=!1,B.streamer.parseChunk(k,!0)):setTimeout(B.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,T.abort(),P.meta.aborted=!0,N(j.complete)&&j.complete(P),k=""},this.guessLineEndings=function(je,me){je=je.substring(0,1048576);var me=new RegExp(y(me)+"([^]*?)"+y(me),"gm"),ve=(je=je.replace(me,"")).split("\r"),me=je.split(`
`),je=1<me.length&&me[0].length<ve[0].length;if(ve.length===1||je)return`
`;for(var Ye=0,Oe=0;Oe<ve.length;Oe++)ve[Oe][0]===`
`&&Ye++;return Ye>=ve.length/2?`\r
`:"\r"}}function y(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(j){var k=(j=j||{}).delimiter,T=j.newline,A=j.comments,R=j.step,F=j.preview,O=j.fastMode,U=null,M=!1,B=j.quoteChar==null?'"':j.quoteChar,D=B;if(j.escapeChar!==void 0&&(D=j.escapeChar),(typeof k!="string"||-1<d.BAD_DELIMITERS.indexOf(k))&&(k=","),A===k)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<d.BAD_DELIMITERS.indexOf(A))&&(A=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var E=0,I=!1;this.parse=function(q,$,P){if(typeof q!="string")throw new Error("Input must be a string");var Z=q.length,ee=k.length,J=T.length,te=A.length,ie=N(R),ce=[],ve=[],me=[],je=E=0;if(!q)return de();if(O||O!==!1&&q.indexOf(B)===-1){for(var Ye=q.split(T),Oe=0;Oe<Ye.length;Oe++){if(me=Ye[Oe],E+=me.length,Oe!==Ye.length-1)E+=T.length;else if(P)return de();if(!A||me.substring(0,te)!==A){if(ie){if(ce=[],vt(me.split(k)),Ne(),I)return de()}else vt(me.split(k));if(F&&F<=Oe)return ce=ce.slice(0,F),de(!0)}}return de()}for(var Fe=q.indexOf(k,E),Ie=q.indexOf(T,E),ct=new RegExp(y(D)+y(B),"g"),Me=q.indexOf(B,E);;)if(q[E]===B)for(Me=E,E++;;){if((Me=q.indexOf(B,Me+1))===-1)return P||ve.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ce.length,index:E}),wt();if(Me===Z-1)return wt(q.substring(E,Me).replace(ct,B));if(B===D&&q[Me+1]===D)Me++;else if(B===D||Me===0||q[Me-1]!==D){Fe!==-1&&Fe<Me+1&&(Fe=q.indexOf(k,Me+1));var Le=$n((Ie=Ie!==-1&&Ie<Me+1?q.indexOf(T,Me+1):Ie)===-1?Fe:Math.min(Fe,Ie));if(q.substr(Me+1+Le,ee)===k){me.push(q.substring(E,Me).replace(ct,B)),q[E=Me+1+Le+ee]!==B&&(Me=q.indexOf(B,E)),Fe=q.indexOf(k,E),Ie=q.indexOf(T,E);break}if(Le=$n(Ie),q.substring(Me+1+Le,Me+1+Le+J)===T){if(me.push(q.substring(E,Me).replace(ct,B)),gn(Me+1+Le+J),Fe=q.indexOf(k,E),Me=q.indexOf(B,E),ie&&(Ne(),I))return de();if(F&&ce.length>=F)return de(!0);break}ve.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ce.length,index:E}),Me++}}else if(A&&me.length===0&&q.substring(E,E+te)===A){if(Ie===-1)return de();E=Ie+J,Ie=q.indexOf(T,E),Fe=q.indexOf(k,E)}else if(Fe!==-1&&(Fe<Ie||Ie===-1))me.push(q.substring(E,Fe)),E=Fe+ee,Fe=q.indexOf(k,E);else{if(Ie===-1)break;if(me.push(q.substring(E,Ie)),gn(Ie+J),ie&&(Ne(),I))return de();if(F&&ce.length>=F)return de(!0)}return wt();function vt(K){ce.push(K),je=E}function $n(K){var ae=0;return ae=K!==-1&&(K=q.substring(Me+1,K))&&K.trim()===""?K.length:ae}function wt(K){return P||(K===void 0&&(K=q.substring(E)),me.push(K),E=Z,vt(me),ie&&Ne()),de()}function gn(K){E=K,vt(me),me=[],Ie=q.indexOf(T,E)}function de(K){if(j.header&&!$&&ce.length&&!M){var ae=ce[0],ye=Object.create(null),Re=new Set(ae);let Ge=!1;for(let se=0;se<ae.length;se++){let De=ae[se];if(ye[De=N(j.transformHeader)?j.transformHeader(De,se):De]){let it,Jt=ye[De];for(;it=De+"_"+Jt,Jt++,Re.has(it););Re.add(it),ae[se]=it,ye[De]++,Ge=!0,(U=U===null?{}:U)[it]=De}else ye[De]=1,ae[se]=De;Re.add(De)}Ge&&console.warn("Duplicate headers found and renamed."),M=!0}return{data:ce,errors:ve,meta:{delimiter:k,linebreak:T,aborted:I,truncated:!!K,cursor:je+($||0),renamedHeaders:U}}}function Ne(){R(de()),ce=[],ve=[]}},this.abort=function(){I=!0},this.getCharIndex=function(){return E}}function b(j){var k=j.data,T=l[k.workerId],A=!1;if(k.error)T.userError(k.error,k.file);else if(k.results&&k.results.data){var R={abort:function(){A=!0,w(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(N(T.userStep)){for(var F=0;F<k.results.data.length&&(T.userStep({data:k.results.data[F],errors:k.results.errors,meta:k.results.meta},R),!A);F++);delete k.results}else N(T.userChunk)&&(T.userChunk(k.results,R,k.file),delete k.results)}k.finished&&!A&&w(k.workerId,k.results)}function w(j,k){var T=l[j];N(T.userComplete)&&T.userComplete(k),T.terminate(),delete l[j]}function C(){throw new Error("Not implemented.")}function _(j){if(typeof j!="object"||j===null)return j;var k,T=Array.isArray(j)?[]:{};for(k in j)T[k]=_(j[k]);return T}function S(j,k){return function(){j.apply(k,arguments)}}function N(j){return typeof j=="function"}return d.parse=function(j,k){var T=(k=k||{}).dynamicTyping||!1;if(N(T)&&(k.dynamicTypingFunction=T,T={}),k.dynamicTyping=T,k.transform=!!N(k.transform)&&k.transform,!k.worker||!d.WORKERS_SUPPORTED)return T=null,d.NODE_STREAM_INPUT,typeof j=="string"?(j=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(j),T=new(k.download?h:p)(k)):j.readable===!0&&N(j.read)&&N(j.on)?T=new v(k):(r.File&&j instanceof File||j instanceof Object)&&(T=new m(k)),T.stream(j);(T=(()=>{var A;return!!d.WORKERS_SUPPORTED&&(A=(()=>{var R=r.URL||r.webkitURL||null,F=n.toString();return d.BLOB_URL||(d.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(A=new r.Worker(A)).onmessage=b,A.id=c++,l[A.id]=A)})()).userStep=k.step,T.userChunk=k.chunk,T.userComplete=k.complete,T.userError=k.error,k.step=N(k.step),k.chunk=N(k.chunk),k.complete=N(k.complete),k.error=N(k.error),delete k.worker,T.postMessage({input:j,config:k,workerId:T.id})},d.unparse=function(j,k){var T=!1,A=!0,R=",",F=`\r
`,O='"',U=O+O,M=!1,B=null,D=!1,E=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||d.BAD_DELIMITERS.filter(function($){return k.delimiter.indexOf($)!==-1}).length||(R=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(T=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(M=k.skipEmptyLines),typeof k.newline=="string"&&(F=k.newline),typeof k.quoteChar=="string"&&(O=k.quoteChar),typeof k.header=="boolean"&&(A=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");B=k.columns}k.escapeChar!==void 0&&(U=k.escapeChar+O),k.escapeFormulae instanceof RegExp?D=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(D=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(O),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return I(null,j,M);if(typeof j[0]=="object")return I(B||Object.keys(j[0]),j,M)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||B),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),I(j.fields||[],j.data||[],M);throw new Error("Unable to serialize unrecognized input");function I($,P,Z){var ee="",J=(typeof $=="string"&&($=JSON.parse($)),typeof P=="string"&&(P=JSON.parse(P)),Array.isArray($)&&0<$.length),te=!Array.isArray(P[0]);if(J&&A){for(var ie=0;ie<$.length;ie++)0<ie&&(ee+=R),ee+=q($[ie],ie);0<P.length&&(ee+=F)}for(var ce=0;ce<P.length;ce++){var ve=(J?$:P[ce]).length,me=!1,je=J?Object.keys(P[ce]).length===0:P[ce].length===0;if(Z&&!J&&(me=Z==="greedy"?P[ce].join("").trim()==="":P[ce].length===1&&P[ce][0].length===0),Z==="greedy"&&J){for(var Ye=[],Oe=0;Oe<ve;Oe++){var Fe=te?$[Oe]:Oe;Ye.push(P[ce][Fe])}me=Ye.join("").trim()===""}if(!me){for(var Ie=0;Ie<ve;Ie++){0<Ie&&!je&&(ee+=R);var ct=J&&te?$[Ie]:Ie;ee+=q(P[ce][ct],Ie)}ce<P.length-1&&(!Z||0<ve&&!je)&&(ee+=F)}}return ee}function q($,P){var Z,ee;return $==null?"":$.constructor===Date?JSON.stringify($).slice(1,25):(ee=!1,D&&typeof $=="string"&&D.test($)&&($="'"+$,ee=!0),Z=$.toString().replace(E,U),(ee=ee||T===!0||typeof T=="function"&&T($,P)||Array.isArray(T)&&T[P]||((J,te)=>{for(var ie=0;ie<te.length;ie++)if(-1<J.indexOf(te[ie]))return!0;return!1})(Z,d.BAD_DELIMITERS)||-1<Z.indexOf(R)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?O+Z+O:Z)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=g,d.ParserHandle=x,d.NetworkStreamer=h,d.FileStreamer=m,d.StringStreamer=p,d.ReadableStreamStreamer=v,r.jQuery&&((a=r.jQuery).fn.parse=function(j){var k=j.config||{},T=[];return this.each(function(F){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)T.push({file:this.files[O],inputElem:this,instanceConfig:a.extend({},k)})}),A(),this;function A(){if(T.length===0)N(j.complete)&&j.complete();else{var F,O,U,M,B=T[0];if(N(j.before)){var D=j.before(B.file,B.inputElem);if(typeof D=="object"){if(D.action==="abort")return F="AbortError",O=B.file,U=B.inputElem,M=D.reason,void(N(j.error)&&j.error({name:F},O,U,M));if(D.action==="skip")return void R();typeof D.config=="object"&&(B.instanceConfig=a.extend(B.instanceConfig,D.config))}else if(D==="skip")return void R()}var E=B.instanceConfig.complete;B.instanceConfig.complete=function(I){N(E)&&E(I,B.file,B.inputElem),R()},d.parse(B.file,B.instanceConfig)}}function R(){T.splice(0,1),A()}}),o&&(r.onmessage=function(j){j=j.data,d.WORKER_ID===void 0&&j&&(d.WORKER_ID=j.workerId),typeof j.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(j.input,j.config),finished:!0}):(r.File&&j.input instanceof File||j.input instanceof Object)&&(j=d.parse(j.input,j.config))&&r.postMessage({workerId:d.WORKER_ID,results:j,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(m.prototype=Object.create(u.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(v.prototype=Object.create(u.prototype)).constructor=v,d})})(N5);var oae=N5.exports;const Jk=il(oae),Zk=()=>{const e=pt(),{domainId:t,area:n}=Gr(),{domains:r}=As(),a=f.useMemo(()=>r==null?void 0:r.find(U=>U.id===t),[r,t]),i=(a==null?void 0:a.name)||"",{toast:o}=at(),{examples:l,saveExamples:c}=VL(t||"",i,n||""),[d,u]=f.useState([]),[h,m]=f.useState(""),[p,v]=f.useState(null),[x,y]=f.useState("manual"),[g,b]=f.useState([{snippet:""}]),[w,C]=f.useState(!0),[_,S]=f.useState([]),N=f.useMemo(()=>d.find(U=>U.id===p)||null,[d,p]);f.useEffect(()=>{const U=`Add Examples — ${(a==null?void 0:a.name)||"Domain"}`;document.title=U;const M=`Add learning goal examples for ${(a==null?void 0:a.name)||"your domain"} in ${n||""}.`;let B=document.querySelector('meta[name="description"]');B||(B=document.createElement("meta"),B.setAttribute("name","description"),document.head.appendChild(B)),B.setAttribute("content",M)},[a==null?void 0:a.name,n]),f.useEffect(()=>{(async()=>{if(!t)return;const{data:M,error:B}=await L.from("concepts").select("id, name").eq("domain_id",t).eq("status","approved").order("name",{ascending:!0});B||u((M==null?void 0:M.map(D=>({id:D.id,name:D.name})))||[])})()},[t]);const j=f.useMemo(()=>{const U=h.trim().toLowerCase();return U?d.filter(M=>M.name.toLowerCase().includes(U)):d},[d,h]),k=()=>b(U=>[...U,{snippet:""}]),T=U=>b(M=>M.filter((B,D)=>D!==U)),A=()=>{if(!N){o({title:"Select a concept first"});return}const U=[{concept_id:N.id,concept_name:N.name,goal_description:"",bloom_level:"",goal_type:"",sequence_order:"",approved:"yes"}],M=Jk.unparse(U,{header:!0}),B=new Blob([M],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(B),E=document.createElement("a");E.href=D,E.download=`${i||"domain"}_${n||"area"}_learning_goals_template.csv`,E.click(),URL.revokeObjectURL(D)},R=U=>{Jk.parse(U,{header:!0,skipEmptyLines:!0,complete:M=>{const B=M.data||[],D=[];for(const E of B){const I=(E.goal_description||"").toString().trim(),q=(E.snippet||"").toString().trim(),$=I||q,P=(E.concept_name||"").toString().trim(),Z=(E.concept_id||"").toString().trim(),ee=(E.difficulty||"").toString().trim().toLowerCase(),J=(E.notes||"").toString(),te=(E.approved??"yes").toString().trim().toLowerCase(),ie=["yes","true","1","y"].includes(te),ce=(E.bloom_level||"").toString().trim()||null,ve=(E.goal_type||"").toString().trim()||null,me=(E.sequence_order??"").toString().trim(),je=me===""?null:Number(me);!$||!P&&!Z||D.push({id:crypto.randomUUID(),snippet:$,concepts:[P||""],notes:J||void 0,difficulty:ee==="basic"||ee==="intermediate"||ee==="advanced"?ee:void 0,created_at:new Date().toISOString(),concept_id:Z||void 0,approved:ie,bloom_level:ce,goal_type:ve,sequence_order:je})}S(D),o({title:"CSV parsed",description:`${D.length} examples ready`})},error:()=>{o({title:"CSV error",description:"Failed to parse CSV",variant:"destructive"})}})},F=f.useCallback(async()=>{if(!N){o({title:"Please select a concept",variant:"destructive"});return}const U=[N.name],M=g.filter(D=>D.snippet.trim().length>0).map(D=>({id:crypto.randomUUID(),snippet:D.snippet.trim(),concepts:U,created_at:new Date().toISOString()}));if(M.length===0){o({title:"Nothing to save",description:"Add at least one valid example"});return}if(await c([...l||[],...M])){try{const D=M.map(q=>({concept_id:N.id,goal_description:q.snippet,approved:w})),{data:E,error:I}=await L.functions.invoke("enrich-and-save-learning-goals",{body:{goals:D}});if(I)throw I;o({title:"Learning goals updated",description:`${(E==null?void 0:E.inserted)??0} approved, ${(E==null?void 0:E.skipped_duplicates)??0} skipped as duplicates`})}catch(D){o({title:"Learning goals insert failed",description:(D==null?void 0:D.message)||"See logs",variant:"destructive"})}e(`/admin/domain/${t}/ai-guidance/${n}`)}},[N,g,l,c,e,t,n,o,w]),O=f.useCallback(async()=>{if(_.length===0){o({title:"No examples parsed",variant:"destructive"});return}if(await c([...l||[],..._])){try{const M=_.map(B=>{var E;const D=B.concept_id||((E=d.find(I=>{var q;return I.name===(((q=B.concepts)==null?void 0:q[0])||"")}))==null?void 0:E.id);return D?{concept_id:D,goal_description:B.snippet,bloom_level:B.bloom_level??null,goal_type:B.goal_type??null,sequence_order:B.sequence_order??null,approved:B.approved??!0}:null}).filter(Boolean);if(M.length>0){const{data:B,error:D}=await L.functions.invoke("enrich-and-save-learning-goals",{body:{goals:M}});if(D)throw D;o({title:"Learning goals updated",description:`${(B==null?void 0:B.inserted)??0} approved, ${(B==null?void 0:B.skipped_duplicates)??0} skipped as duplicates`})}}catch(M){o({title:"Learning goals insert failed",description:(M==null?void 0:M.message)||"See logs",variant:"destructive"})}e(`/admin/domain/${t}/ai-guidance/${n}`)}},[_,l,c,e,t,n,o,d]);return s.jsxs("div",{className:"p-6",children:[s.jsx(va,{}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs(z,{variant:"ghost",onClick:()=>e(`/admin/domain/${t}/ai-guidance/${n}`),children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Back to Examples"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Add Examples"}),s.jsxs("p",{className:"text-muted-foreground",children:[i," • ",n]})]}),s.jsx("div",{})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_320px]",children:[s.jsxs("div",{children:[s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Select concepts"})}),s.jsx(W,{children:s.jsx(pe,{placeholder:"Search concepts...",value:h,onChange:U=>m(U.target.value)})})]}),s.jsx(cn,{className:"my-6"}),s.jsxs(Qr,{value:x,onValueChange:U=>y(U),children:[s.jsxs(wr,{children:[s.jsx(Je,{value:"manual",children:"Add manually"}),s.jsx(Je,{value:"bulk",children:"Bulk upload"})]}),s.jsx(Ze,{value:"manual",className:"mt-6",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Examples"})}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-4",children:[g.map((U,M)=>s.jsxs("div",{className:"border rounded p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Example #",M+1]}),g.length>1&&s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>T(M),children:s.jsx(Ts,{className:"h-4 w-4"})})]}),s.jsx(Fn,{placeholder:"Enter example snippet (text or code)",value:U.snippet,onChange:B=>b(D=>D.map((E,I)=>I===M?{...E,snippet:B.target.value}:E))})]},M)),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs(z,{variant:"outline",onClick:k,children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"})," Add another"]}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[s.jsx(Hr,{id:"manual-approved",checked:w,onCheckedChange:U=>C(!!U)}),s.jsx(Q,{htmlFor:"manual-approved",className:"text-sm",children:"Mark as approved in learning goals"})]}),s.jsxs(z,{onClick:F,children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"})," Save examples"]})]})]})})]})}),s.jsx(Ze,{value:"bulk",className:"mt-6",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Bulk upload via CSV"})}),s.jsx(W,{children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{variant:"outline",onClick:A,children:[s.jsx(CA,{className:"h-4 w-4 mr-2"})," Download template"]}),s.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:U=>U.target.files&&R(U.target.files[0])}),s.jsxs("span",{className:"inline-flex items-center gap-2 border rounded px-3 py-2",children:[s.jsx(On,{className:"h-4 w-4"})," Upload filled CSV"]})]})]}),_.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.length," examples parsed"]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(z,{onClick:O,disabled:_.length===0,children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"})," Save examples"]})})]})})]})})]})]}),s.jsx("aside",{className:"lg:sticky top-20 h-fit",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Concepts"})}),s.jsx(W,{children:s.jsxs("div",{className:"max-h-[420px] overflow-auto",children:[s.jsx(Fj,{value:p??"",onValueChange:U=>v(U),children:j.map(U=>s.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[s.jsx($j,{value:U.id,id:`concept-${U.id}`}),s.jsx("label",{htmlFor:`concept-${U.id}`,className:"text-sm leading-none cursor-pointer",children:U.name})]},U.id))}),j.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No concepts found"}),N&&s.jsx("div",{className:"mt-3",children:s.jsx(X,{variant:"secondary",children:N.name})})]})})]})})]})]})},lae=()=>s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(Gj,{children:s.jsxs(Kj,{children:[s.jsx(hp,{children:s.jsx(Qj,{href:"/tenant/dashboard",children:"Dashboard"})}),s.jsx(Xj,{}),s.jsx(hp,{children:s.jsx(Yj,{children:"Clients"})})]})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Clients"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage client organizations and their users"})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-primary/10",children:s.jsx(Yn,{className:"h-8 w-8 text-primary"})})}),s.jsx(Y,{className:"text-2xl",children:"Client Management"}),s.jsx(we,{className:"text-lg",children:"This feature is coming soon"})]}),s.jsxs(W,{className:"text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-6",children:"The client management system will allow you to:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[s.jsx(et,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),s.jsx("div",{className:"font-medium",children:"Manage Organizations"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Create and configure client organizations"})]}),s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[s.jsx(Jn,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),s.jsx("div",{className:"font-medium",children:"User Access"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Control user permissions and access levels"})]}),s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[s.jsx(Yn,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),s.jsx("div",{className:"font-medium",children:"Domain Assignment"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Assign learning domains to client organizations"})]})]})]})]})]});var TN="Collapsible",[cae,ude]=es(TN),[dae,AN]=cae(TN),S5=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c=!1,d]=Xs({prop:r,defaultProp:a,onChange:o});return s.jsx(dae,{scope:n,disabled:i,contentId:Ws(),open:c,onOpenToggle:f.useCallback(()=>d(u=>!u),[d]),children:s.jsx(_e.div,{"data-state":IN(c),"data-disabled":i?"":void 0,...l,ref:t})})});S5.displayName=TN;var _5="CollapsibleTrigger",C5=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=AN(_5,n);return s.jsx(_e.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":IN(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:ue(e.onClick,a.onOpenToggle)})});C5.displayName=_5;var PN="CollapsibleContent",k5=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=AN(PN,e.__scopeCollapsible);return s.jsx(xn,{present:n||a.open,children:({present:i})=>s.jsx(uae,{...r,ref:t,present:i})})});k5.displayName=PN;var uae=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,o=AN(PN,n),[l,c]=f.useState(r),d=f.useRef(null),u=He(t,d),h=f.useRef(0),m=h.current,p=f.useRef(0),v=p.current,x=o.open||l,y=f.useRef(x),g=f.useRef();return f.useEffect(()=>{const b=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(b)},[]),fn(()=>{const b=d.current;if(b){g.current=g.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();h.current=w.height,p.current=w.width,y.current||(b.style.transitionDuration=g.current.transitionDuration,b.style.animationName=g.current.animationName),c(r)}},[o.open,r]),s.jsx(_e.div,{"data-state":IN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:u,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:x&&a})});function IN(e){return e?"open":"closed"}var hae=S5;const mae=hae,fae=C5,pae=k5,xae=({files:e,loading:t,onDelete:n,isDeleting:r})=>{const a=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=o=>o.startsWith("image/")?"🖼️":o.startsWith("video/")?"🎥":o.startsWith("audio/")?"🎵":o.includes("pdf")?"📄":o.includes("word")||o.includes("document")?"📝":o.includes("sheet")||o.includes("excel")?"📊":o.includes("presentation")||o.includes("powerpoint")?"📈":"📎";return t?s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Uploaded Files"}),s.jsx(we,{children:"Loading files..."})]}),s.jsx(W,{children:s.jsx("div",{className:"space-y-3",children:[...Array(3)].map((o,l)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Pe,{className:"h-4 w-4"}),s.jsx(Pe,{className:"h-4 flex-1"}),s.jsx(Pe,{className:"h-4 w-20"}),s.jsx(Pe,{className:"h-8 w-8"})]},l))})})]}):!e||e.length===0?s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Uploaded Files"}),s.jsx(we,{children:"No files uploaded yet"})]}),s.jsx(W,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(M$,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Upload your first file to get started"})]})})]}):s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Uploaded Files"}),s.jsxs(we,{children:[e.length," file",e.length!==1?"s":""," uploaded"]})]}),s.jsx(W,{children:s.jsx("div",{className:"rounded-md border",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"File"}),s.jsx(Ee,{children:"Size"}),s.jsx(Ee,{children:"Type"}),s.jsx(Ee,{children:"Uploaded"}),s.jsx(Ee,{children:"By"}),s.jsx(Ee,{className:"w-[50px]"})]})}),s.jsx(Qs,{children:e.map(o=>{var l,c;return s.jsxs(ut,{children:[s.jsx(be,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:i(o.mime_type||"")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-sm",children:o.file_name}),s.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:o.storage_path})]})]})}),s.jsx(be,{className:"text-sm",children:up(o.file_size)}),s.jsx(be,{children:s.jsx(X,{variant:"outline",className:"text-xs",children:((c=(l=o.mime_type)==null?void 0:l.split("/")[1])==null?void 0:c.toUpperCase())||"Unknown"})}),s.jsx(be,{className:"text-sm",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(kn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{children:a(o.uploaded_at)})]})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx($c,{className:"h-3 w-3 text-muted-foreground"}),s.jsx(X,{variant:o.uploaded_by_type==="admin"?"default":"secondary",children:o.uploaded_by_type})]})}),s.jsx(be,{children:s.jsxs(Sx,{children:[s.jsx(BM,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",disabled:r,children:s.jsx(Ts,{className:"h-4 w-4"})})}),s.jsxs(Dh,{children:[s.jsxs(Rh,{children:[s.jsx(Lh,{children:"Delete File"}),s.jsxs(Oh,{children:['Are you sure you want to delete "',o.file_name,'"? This action cannot be undone and will only remove the database record. The file will remain in Google Cloud Storage.']})]}),s.jsxs(Mh,{children:[s.jsx($h,{children:"Cancel"}),s.jsx(Fh,{onClick:()=>n(o.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})})]},o.id)})})]})})})]})},gae=()=>{var _;const[e,t]=f.useState(""),[n,r]=f.useState(null),[a,i]=f.useState(!1),[o]=ld(),{domains:l,loading:c}=As(),{data:d=[],isLoading:u}=wM(e),{uploadFiles:h,isUploading:m,uploadProgress:p,clearProgress:v}=Nx(),x=AX();f.useEffect(()=>{const S=o.get("domain");S&&l&&l.length>0&&!e&&t(S)},[o,l,e]);const y=l==null?void 0:l.find(S=>S.id===e),g=S=>{!e||!y||!n||h({files:S,domainId:e,domainName:y.name,contentType:n})},b=S=>{x.mutate(S)},w=d.length;d.reduce((S,N)=>S+N.file_size,0);const C=[{type:"concept",title:"Learning Concepts",description:"Upload documents related to learning concepts and knowledge areas",icon:rt,color:"bg-blue-50 hover:bg-blue-100 border-blue-200",iconColor:"text-blue-600"},{type:"learning_goal",title:"Learning Goals",description:"Upload materials defining learning objectives and outcomes",icon:Xn,color:"bg-green-50 hover:bg-green-100 border-green-200",iconColor:"text-green-600"},{type:"exercise",title:"Exercises",description:"Upload practice exercises and assessment materials",icon:Wi,color:"bg-purple-50 hover:bg-purple-100 border-purple-200",iconColor:"text-purple-600"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx(va,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),s.jsxs("p",{className:"text-muted-foreground mt-2",children:["Choose the type of content you want to upload for ",(y==null?void 0:y.name)||"the selected learning domain","."]})]}),n?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(X,{variant:"outline",className:"px-3 py-1",children:(_=C.find(S=>S.type===n))==null?void 0:_.title}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>r(null),children:"Change Type"})]})}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsx(Jj,{onFilesSelected:g,uploadProgress:p,isUploading:m,disabled:!e})})})]}):s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:C.map(S=>{const N=S.icon;return s.jsx(V,{className:`cursor-pointer transition-all duration-200 ${S.color}`,onClick:()=>r(S.type),children:s.jsxs(G,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-white",children:s.jsx(N,{className:`h-8 w-8 ${S.iconColor}`})}),s.jsx(Y,{className:"text-lg",children:S.title}),s.jsx(we,{className:"text-sm",children:S.description})]})},S.type)})}),e&&s.jsxs(s.Fragment,{children:[s.jsx(cn,{}),s.jsxs(mae,{open:a,onOpenChange:i,children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Uploaded Files (",w,")"]}),s.jsx(fae,{asChild:!0,children:s.jsxs(z,{variant:"ghost",size:"sm",className:"p-2",children:[a?s.jsx(td,{className:"h-4 w-4"}):s.jsx(_n,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Toggle uploaded files"})]})})]}),s.jsx(pae,{className:"space-y-2",children:s.jsx(xae,{files:d,loading:u,onDelete:b,isDeleting:x.isPending})})]})]})]})},vae=()=>yt({queryKey:["user-accessible-paths"],queryFn:async()=>{var i;const{data:{session:e}}=await L.auth.getSession();if(!(e!=null&&e.user))return[];if(e.user.email==="admin@gemeos.ai"){console.log("🔐 Platform admin detected, granting universal access");const{data:o,error:l}=await L.from("pages").select("path");if(l)throw console.error("Error fetching all pages for admin:",l),l;return(o==null?void 0:o.map(c=>c.path))||[]}const n=(i=e.user.app_metadata)==null?void 0:i.role;if(!n)return[];const{data:r,error:a}=await L.from("page_permissions").select(`
          page:pages!inner(path)
        `).eq("role",n).eq("is_active",!0);if(a)throw a;return(r==null?void 0:r.map(o=>o.page.path))||[]}}),yae=()=>yt({queryKey:["all-page-permissions"],queryFn:async()=>{const{data:e,error:t}=await L.from("pages").select("*").order("path");if(t)throw t;const{data:n,error:r}=await L.from("page_permissions").select("*");if(r)throw r;return(e==null?void 0:e.map(a=>({...a,permissions:(n==null?void 0:n.filter(i=>i.page_id===a.id))||[]})))||[]}}),bae=()=>{const[e,t]=f.useState(!1);return{updatePermission:async(r,a,i)=>{t(!0);try{const{error:o}=await L.from("page_permissions").upsert({page_id:r,role:a,is_active:i,updated_at:new Date().toISOString()},{onConflict:"page_id,role"});if(o)throw o;return!0}catch(o){throw console.error("Error updating page permission:",o),o}finally{t(!1)}},isLoading:e}},e2=["admin","teacher","student"];function t2(){const{data:e,isLoading:t}=yae(),{updatePermission:n,isLoading:r}=bae(),{toast:a}=at(),i=Nn(),o=async(c,d,u)=>{try{await n(c,d,u),i.invalidateQueries({queryKey:["all-page-permissions"]}),a({title:"Permission Updated",description:`Successfully ${u?"enabled":"disabled"} ${d} access.`})}catch{a({title:"Error",description:"Failed to update permission. Please try again.",variant:"destructive"})}},l=(c,d)=>{const u=c.find(h=>h.role===d);return(u==null?void 0:u.is_active)||!1};return t?s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"h-8 w-64 mb-2"}),s.jsx(Pe,{className:"h-4 w-96"})]}),Array.from({length:3}).map((c,d)=>s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Pe,{className:"h-6 w-48"}),s.jsx(Pe,{className:"h-4 w-32"})]}),s.jsx(W,{children:s.jsx("div",{className:"flex space-x-8",children:e2.map(u=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pe,{className:"h-4 w-4"}),s.jsx(Pe,{className:"h-4 w-16"})]},u))})})]},d))]}):s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Page Permissions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage which user roles can access different pages in the application."})]}),s.jsx("div",{className:"space-y-4",children:e==null?void 0:e.map(c=>s.jsxs(V,{children:[s.jsx(G,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx(Y,{className:"text-lg",children:c.description}),s.jsx(we,{children:s.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:c.path})})]})})}),s.jsx(W,{children:s.jsx("div",{className:"flex space-x-8",children:e2.map(d=>{const u=l(c.permissions,d);return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hr,{id:`${c.id}-${d}`,checked:u,disabled:r,onCheckedChange:h=>o(c.id,d,!!h)}),s.jsx("label",{htmlFor:`${c.id}-${d}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.jsxs(X,{variant:u?"default":"secondary",className:"capitalize",children:[u?s.jsx(pn,{className:"h-3 w-3 mr-1"}):s.jsx(Lt,{className:"h-3 w-3 mr-1"}),d]})})]},d)})})})]},c.id))})]})}var DN="Switch",[wae,hde]=es(DN),[jae,Nae]=wae(DN),E5=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,p]=f.useState(null),v=He(t,w=>p(w)),x=f.useRef(!1),y=m?u||!!m.closest("form"):!0,[g=!1,b]=Xs({prop:a,defaultProp:i,onChange:d});return s.jsxs(jae,{scope:n,checked:g,disabled:l,children:[s.jsx(_e.button,{type:"button",role:"switch","aria-checked":g,"aria-required":o,"data-state":P5(g),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ue(e.onClick,w=>{b(C=>!C),y&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),y&&s.jsx(Sae,{control:m,bubbles:!x.current,name:r,value:c,checked:g,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});E5.displayName=DN;var T5="SwitchThumb",A5=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Nae(T5,n);return s.jsx(_e.span,{"data-state":P5(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});A5.displayName=T5;var Sae=e=>{const{control:t,checked:n,bubbles:r=!0,...a}=e,i=f.useRef(null),o=fx(n),l=Hp(t);return f.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P5(e){return e?"checked":"unchecked"}var I5=E5,_ae=A5;const Nt=f.forwardRef(({className:e,...t},n)=>s.jsx(I5,{className:ne("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(_ae,{className:ne("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Nt.displayName=I5.displayName;const Cae=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!1),[a,i]=f.useState(null),o=async()=>{r(!0),i(null);try{const{data:d,error:u}=await L.from("domain_feedback_config").select("*").order("domain_id",{ascending:!0}).order("aspect",{ascending:!0});if(u)throw u;t(d||[])}catch(d){console.error("Error fetching feedback configs:",d),i(d instanceof Error?d.message:"Failed to fetch feedback configs")}finally{r(!1)}},l=async(d,u)=>{try{const{error:h}=await L.from("domain_feedback_config").update({is_enabled:u}).eq("id",d);if(h)throw h;t(m=>m.map(p=>p.id===d?{...p,is_enabled:u}:p))}catch(h){console.error("Error updating feedback config:",h),i(h instanceof Error?h.message:"Failed to update feedback config")}},c=async(d,u)=>{var v,x,y,g;const{data:h}=await L.from("domain_feedback_config").select("is_enabled").eq("domain_id",d).eq("aspect",u).maybeSingle();if(!(h!=null&&h.is_enabled))return{approved_items:[],rejected_items:[]};let m=[],p=[];try{if(u==="concepts"){const[b,w]=await Promise.all([L.from("concepts").select("name").eq("domain_id",d).eq("status","approved"),L.from("concepts").select("name").eq("domain_id",d).eq("status","rejected")]);m=((v=b.data)==null?void 0:v.map(C=>C.name))||[],p=((x=w.data)==null?void 0:x.map(C=>C.name))||[]}else if(u==="learning_goals"){const{data:b,error:w}=await L.from("concepts").select("id").eq("domain_id",d);if(w)return console.error("Error fetching concepts for learning goals feedback:",w),{approved_items:[],rejected_items:[]};const C=(b||[]).map(N=>N.id);if(C.length===0)return{approved_items:[],rejected_items:[]};const[_,S]=await Promise.all([L.from("learning_goals").select("goal_description, concept_id, status").in("concept_id",C).eq("status","approved"),L.from("learning_goals").select("goal_description, concept_id, status").in("concept_id",C).eq("status","rejected")]);m=((y=_.data)==null?void 0:y.map(N=>N.goal_description))||[],p=((g=S.data)==null?void 0:g.map(N=>N.goal_description))||[]}}catch(b){console.error("Error fetching feedback data:",b)}return{approved_items:m,rejected_items:p}};return f.useEffect(()=>{o()},[]),{configs:e,loading:n,error:a,refetch:o,updateConfig:l,getFeedbackData:c}},kae=()=>{const{configs:e,loading:t,updateConfig:n}=Cae(),{domains:r,loading:a}=As(),[i,o]=f.useState(null),l=async(m,p)=>{o(m);try{await n(m,!p),yy({title:"Settings updated",description:`Feedback loop ${p?"disabled":"enabled"} successfully.`})}catch{yy({title:"Error",description:"Failed to update feedback settings.",variant:"destructive"})}finally{o(null)}},c=m=>{switch(m){case"concepts":return s.jsx(xa,{className:"h-4 w-4"});case"learning_goals":return s.jsx(Xn,{className:"h-4 w-4"});case"exercises":return s.jsx($u,{className:"h-4 w-4"});case"strategies":return s.jsx(kt,{className:"h-4 w-4"});case"gamification":return s.jsx(D$,{className:"h-4 w-4"});case"tasks":return s.jsx($u,{className:"h-4 w-4"});case"motivation":return s.jsx(ww,{className:"h-4 w-4"});default:return s.jsx(kt,{className:"h-4 w-4"})}},d=m=>{switch(m){case"concepts":return"Concepts";case"learning_goals":return"Learning Goals";case"exercises":return"Exercises";case"strategies":return"Learning Strategies";case"gamification":return"Gamification";case"tasks":return"Tasks";case"motivation":return"Motivation";default:return m.charAt(0).toUpperCase()+m.slice(1)}},u=m=>{switch(m){case"concepts":return"AI will learn from approved/rejected concepts to improve future suggestions";case"learning_goals":return"AI will learn from approved/rejected learning goals to improve future suggestions";case"exercises":return"AI will learn from approved/rejected exercises to improve future suggestions";case"strategies":return"AI will learn from approved/rejected learning strategies to improve future suggestions";case"gamification":return"AI will learn from approved/rejected gamification elements to improve future suggestions";case"tasks":return"AI will learn from approved/rejected tasks to improve future suggestions";case"motivation":return"AI will learn from approved/rejected motivation techniques to improve future suggestions";default:return`AI feedback learning for ${m}`}};if(t||a)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Hn,{className:"h-8 w-8 animate-spin"})});const h=e.reduce((m,p)=>(m[p.domain_id]||(m[p.domain_id]=[]),m[p.domain_id].push(p),m),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Feedback Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Configure AI training feedback loops for each domain and learning aspect."})]}),s.jsx("div",{className:"grid gap-6",children:r.map(m=>{const p=h[m.id]||[];return s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[m.icon_name&&s.jsx("span",{className:"text-xl",children:m.icon_name}),m.name]}),s.jsx(we,{children:xi(m.description)})]}),s.jsx(W,{children:s.jsx("div",{className:"space-y-4",children:p.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No feedback configurations found for this domain."}):p.map(v=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[c(v.aspect),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:d(v.aspect)}),s.jsx(X,{variant:v.is_enabled?"default":"secondary",children:v.is_enabled?"Enabled":"Disabled"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:u(v.aspect)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[i===v.id&&s.jsx(Hn,{className:"h-4 w-4 animate-spin"}),s.jsx(Nt,{checked:v.is_enabled,onCheckedChange:()=>l(v.id,v.is_enabled),disabled:i===v.id})]})]},v.id))})})]},m.id)})})]})};function Eae(){const e=pt(),{session:t}=dn(),n=()=>{const r=Uo(t);e(r)};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs(V,{className:"w-full max-w-md",children:[s.jsxs(G,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:s.jsx(PA,{className:"h-6 w-6 text-destructive"})}),s.jsx(Y,{className:"text-2xl",children:"Access Denied"}),s.jsx(we,{children:"You don't have permission to access this page."})]}),s.jsxs(W,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please contact your administrator if you believe this is an error."}),s.jsxs("div",{className:"flex justify-center space-x-2",children:[s.jsx(z,{variant:"outline",onClick:()=>e(-1),children:"Go Back"}),s.jsx(z,{onClick:n,children:"My Dashboard"})]})]})]})})}const Tae=()=>{const e=br();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},bv=768;function Aae(){const[e,t]=f.useState(void 0);return f.useEffect(()=>{const n=window.matchMedia(`(max-width: ${bv-1}px)`),r=()=>{t(window.innerWidth<bv)};return n.addEventListener("change",r),t(window.innerWidth<bv),()=>n.removeEventListener("change",r)},[]),!!e}const Pae=Zw,Iae=ej,D5=f.forwardRef(({className:e,...t},n)=>s.jsx(Nh,{className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));D5.displayName=Nh.displayName;const Dae=dl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),R5=f.forwardRef(({side:e="right",className:t,children:n,...r},a)=>s.jsxs(Iae,{children:[s.jsx(D5,{}),s.jsxs(Sh,{ref:a,className:ne(Dae({side:e}),t),...r,children:[n,s.jsxs(mx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Lt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));R5.displayName=Sh.displayName;const Rae=f.forwardRef(({className:e,...t},n)=>s.jsx(_h,{ref:n,className:ne("text-lg font-semibold text-foreground",e),...t}));Rae.displayName=_h.displayName;const Mae=f.forwardRef(({className:e,...t},n)=>s.jsx(Ch,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));Mae.displayName=Ch.displayName;const Lae="sidebar:state",Oae=60*60*24*7,Fae="16rem",$ae="18rem",zae="3rem",Uae="b",M5=f.createContext(null);function Wh(){const e=f.useContext(M5);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const L5=f.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:a,children:i,...o},l)=>{const c=Aae(),[d,u]=f.useState(!1),[h,m]=f.useState(e),p=t??h,v=f.useCallback(b=>{const w=typeof b=="function"?b(p):b;n?n(w):m(w),document.cookie=`${Lae}=${w}; path=/; max-age=${Oae}`},[n,p]),x=f.useCallback(()=>c?u(b=>!b):v(b=>!b),[c,v,u]);f.useEffect(()=>{const b=w=>{w.key===Uae&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),x())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[x]);const y=p?"expanded":"collapsed",g=f.useMemo(()=>({state:y,open:p,setOpen:v,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:x}),[y,p,v,c,d,u,x]);return s.jsx(M5.Provider,{value:g,children:s.jsx(pP,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":Fae,"--sidebar-width-icon":zae,...a},className:ne("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:i})})})});L5.displayName="SidebarProvider";const O5=f.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:a,...i},o)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u}=Wh();return n==="none"?s.jsx("div",{className:ne("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:a}):l?s.jsx(Pae,{open:d,onOpenChange:u,...i,children:s.jsx(R5,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":$ae},side:e,children:s.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):s.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[s.jsx("div",{className:ne("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),s.jsx("div",{className:ne("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:s.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});O5.displayName="Sidebar";const Bae=f.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:a}=Wh();return s.jsxs(z,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ne("h-7 w-7",e),onClick:i=>{t==null||t(i),a()},...n,children:[s.jsx(V$,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Bae.displayName="SidebarTrigger";const Vae=f.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Wh();return s.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ne("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});Vae.displayName="SidebarRail";const qae=f.forwardRef(({className:e,...t},n)=>s.jsx("main",{ref:n,className:ne("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));qae.displayName="SidebarInset";const Wae=f.forwardRef(({className:e,...t},n)=>s.jsx(pe,{ref:n,"data-sidebar":"input",className:ne("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));Wae.displayName="SidebarInput";const F5=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"header",className:ne("flex flex-col gap-2 p-2",e),...t}));F5.displayName="SidebarHeader";const $5=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"footer",className:ne("flex flex-col gap-2 p-2",e),...t}));$5.displayName="SidebarFooter";const Hae=f.forwardRef(({className:e,...t},n)=>s.jsx(cn,{ref:n,"data-sidebar":"separator",className:ne("mx-2 w-auto bg-sidebar-border",e),...t}));Hae.displayName="SidebarSeparator";const z5=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"content",className:ne("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));z5.displayName="SidebarContent";const Er=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group",className:ne("relative flex w-full min-w-0 flex-col p-2",e),...t}));Er.displayName="SidebarGroup";const Yd=f.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const a=t?ds:"div";return s.jsx(a,{ref:r,"data-sidebar":"group-label",className:ne("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Yd.displayName="SidebarGroupLabel";const Gae=f.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const a=t?ds:"button";return s.jsx(a,{ref:r,"data-sidebar":"group-action",className:ne("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});Gae.displayName="SidebarGroupAction";const Tr=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group-content",className:ne("w-full text-sm",e),...t}));Tr.displayName="SidebarGroupContent";const Ar=f.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu",className:ne("flex w-full min-w-0 flex-col gap-1",e),...t}));Ar.displayName="SidebarMenu";const rr=f.forwardRef(({className:e,...t},n)=>s.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ne("group/menu-item relative",e),...t}));rr.displayName="SidebarMenuItem";const Kae=dl("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ar=f.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:a,className:i,...o},l)=>{const c=e?ds:"button",{isMobile:d,state:u}=Wh(),h=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:ne(Kae({variant:n,size:r}),i),...o});return a?(typeof a=="string"&&(a={children:a}),s.jsxs(LU,{children:[s.jsx(OU,{asChild:!0,children:h}),s.jsx(xP,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});ar.displayName="SidebarMenuButton";const Qae=f.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},a)=>{const i=t?ds:"button";return s.jsx(i,{ref:a,"data-sidebar":"menu-action",className:ne("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});Qae.displayName="SidebarMenuAction";const Yae=f.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ne("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));Yae.displayName="SidebarMenuBadge";const Xae=f.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const a=f.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ne("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&s.jsx(Pe,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(Pe,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});Xae.displayName="SidebarMenuSkeleton";const ci=f.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ne("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));ci.displayName="SidebarMenuSub";const di=f.forwardRef(({...e},t)=>s.jsx("li",{ref:t,...e}));di.displayName="SidebarMenuSubItem";const ui=f.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...a},i)=>{const o=e?ds:"a";return s.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:ne("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});ui.displayName="SidebarMenuSubButton";const Jae=[{title:"Domain Selection",url:"/teacher/domain-selection",icon:rt},{title:"Create Class",url:"/teacher/classes/create",icon:Pt},{title:"Curriculum Setup",url:"/teacher/settings/curriculum-setup",icon:yr}],Zae=[{title:"Overview",url:"/teacher/administration",icon:kt},{title:"Domain Management",url:"/teacher/administration/domains",icon:rt},{title:"Learning Goals",url:"/teacher/administration/learning-goals",icon:Xn}],eie=[{title:"Platform Admin Dashboard",url:"/admin/dashboard",icon:Hi},{title:"Tenant Dashboard",url:"/tenant/dashboard",icon:kn},{title:"Learning Domains",url:"/admin/learning-domains",icon:rt},{title:"Clients",url:"/admin/clients",icon:Yn},{title:"AI Training",url:"/admin/ai-training",icon:xa},{title:"Design System",url:"/admin/design-system",icon:Hi}],n2=[{title:"Platform Admin Dashboard",url:"/admin/dashboard",icon:Hi},{title:"Tenant Dashboard",url:"/tenant/dashboard",icon:kn},{title:"Teacher Dashboard",url:"/teacher/dashboard",icon:yr},{title:"Student Dashboard",url:"/student/dashboard",icon:et}],s2=[{title:"Tenants",url:"/admin/tenants",icon:Yn},{title:"Teachers",url:"/admin/teachers",icon:et},{title:"Classes",url:"/teacher/classes/create",icon:rt},{title:"Students",url:"/admin/students",icon:yr}],r2=[{title:"Domain Administration",url:"/admin/domains/dashboard",icon:kt},{title:"Learning Goals",url:"/admin/domains/jazz-music/goals",icon:Xn},{title:"AI Guidance",url:"/admin/domains/jazz-music/ai-guidance",icon:xa},{title:"Guidance Editor",url:"/admin/domains/jazz-music/ai-guidance/content",icon:Es},{title:"Examples",url:"/admin/domains/jazz-music/ai-guidance/content/examples/new",icon:Pt}],a2=[{title:"Access control",url:"/admin/rbac-management",icon:IA},{title:"Access Management",url:"/admin/access-management",icon:sn},{title:"AI Settings",url:"/admin/ai-training",icon:xa},{title:"Feedback Settings",url:"/admin/settings/feedback",icon:xa},{title:"File Upload",url:"/admin/upload",icon:On}],i2=[{title:"Login",url:"/login",icon:et},{title:"Register",url:"/register",icon:IA},{title:"Forgot Password",url:"/forgot-password",icon:sn}],o2=[{title:"Domain Card Demo",url:"/admin/domain-admin-demo",icon:Hi},{title:"Welcome Page",url:"/welcome",icon:jw},{title:"Auth Page",url:"/auth",icon:et},{title:"Unauthorized",url:"/unauthorized",icon:sn}],tie=[{title:"Welcome Page",url:"/welcome",icon:jw},{title:"Auth Page",url:"/auth",icon:et},{title:"Unauthorized",url:"/unauthorized",icon:sn}],Pl=({items:e,title:t,icon:n,isVisible:r,onMouseEnter:a,onMouseLeave:i,isValidPage:o})=>r?s.jsxs("div",{className:"absolute left-full ml-2 top-0 z-50 min-w-[240px] max-w-[280px] bg-[#1a1b3a] border border-gray-700 rounded-lg shadow-xl opacity-100 visible transition-all duration-200 ease-out transform origin-left",onMouseEnter:a,onMouseLeave:i,children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-700 text-white font-medium",children:[s.jsx(n,{className:"h-4 w-4"}),s.jsx("span",{children:t})]}),s.jsx("div",{className:"py-2",children:e.filter(l=>o(l.url)).map(l=>s.jsxs(sr,{to:l.url,className:({isActive:c})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors ${c?"bg-white/15 text-white font-medium":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[s.jsx(l.icon,{className:"h-4 w-4"}),s.jsx("span",{children:l.title})]},l.title))})]}):null;function nie(){const{state:e,toggleSidebar:t}=Wh(),r=br().pathname,[a,i]=f.useState(r.startsWith("/teacher/administration"));f.useState(!1);const[o,l]=f.useState(r.startsWith("/admin/dashboard")||r.startsWith("/tenant/dashboard")||r.startsWith("/teacher/dashboard")||r.startsWith("/student/dashboard")),[c,d]=f.useState(r.startsWith("/admin/tenants")||r.startsWith("/admin/teachers")||r.startsWith("/admin/students")),[u,h]=f.useState(r.startsWith("/admin/domains")),[m,p]=f.useState(r.startsWith("/admin/rbac")||r.startsWith("/admin/access-management")||r.startsWith("/admin/ai-training")||r.startsWith("/admin/settings")||r.startsWith("/admin/upload")),[v,x]=f.useState(!1),[y,g]=f.useState(!1),[b,w]=f.useState(null),C=f.useRef({}),{data:_=[]}=vae(),{isPlatformAdmin:S}=dn(),N=S,j=M=>{e==="collapsed"&&(C.current[M]&&clearTimeout(C.current[M]),C.current[M]=setTimeout(()=>{w(M)},150))},k=M=>{e==="collapsed"&&(C.current[M]&&(clearTimeout(C.current[M]),delete C.current[M]),setTimeout(()=>{w(B=>B===M?null:B)},100))},T=M=>{e==="collapsed"&&w(B=>B===M?null:M)};f.useEffect(()=>()=>{Object.values(C.current).forEach(M=>{clearTimeout(M)})},[]);const A=M=>N?!0:_.includes(M),R=N?[]:Jae.filter(M=>A(M.url)),F=N?[]:Zae.filter(M=>A(M.url));N&&eie.filter(M=>A(M.url));const O=M=>{if(N)return!0;if(M.includes(":")&&!M.includes("472a6e02-8733-431a-bb76-5d517767cab7"))return!1;const B=["/welcome","/unauthorized","/auth","/login","/register","/forgot-password"];return A(M)||B.includes(M)},U=M=>{if(N)return!0;const B=["/welcome","/unauthorized","/auth"];return A(M)||B.includes(M)};return s.jsxs(O5,{collapsible:"icon",className:"bg-[#1a1b3a] border-r border-gray-700",children:[s.jsx(F5,{className:"p-4 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 group-data-[collapsible=icon]:justify-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] rounded-lg flex items-center justify-center text-sm font-bold text-white",children:"G"}),s.jsx("span",{className:"font-semibold text-white group-data-[collapsible=icon]:hidden",children:"Gemeos"})]}),s.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-700 transition-colors text-white group-data-[collapsible=icon]:hidden",children:e==="expanded"?s.jsx(Lt,{size:20}):s.jsx(z$,{size:20})})]})}),s.jsxs(z5,{className:"bg-[#1a1b3a]",children:[s.jsx(Er,{children:s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsx(rr,{children:s.jsxs("div",{className:"relative",onMouseEnter:()=>j("dashboards"),onMouseLeave:()=>k("dashboards"),children:[s.jsxs(ar,{onClick:()=>{e==="collapsed"?T("dashboards"):l(!o)},className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between bg-white/5 border border-white/20",tooltip:"Dashboard",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Dashboard"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${o?"rotate-90":""}`})]}),e!=="collapsed"&&o&&s.jsx(ci,{className:"ml-0 mt-2 space-y-1 border-l-0",children:n2.filter(M=>O(M.url)).map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${B?"bg-[#2d2e5f] text-white font-medium":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))}),s.jsx(Pl,{items:n2,title:"Dashboard",icon:kn,isVisible:e==="collapsed"&&b==="dashboards",onMouseEnter:()=>j("dashboards"),onMouseLeave:()=>k("dashboards"),isValidPage:O})]})})})})}),N&&s.jsx(Er,{children:s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsx(rr,{children:s.jsxs("div",{className:"relative",onMouseEnter:()=>j("admin-management"),onMouseLeave:()=>k("admin-management"),children:[s.jsxs(ar,{onClick:()=>{e==="collapsed"?T("admin-management"):d(!c)},className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between bg-white/5 border border-white/20",tooltip:"Admin & Management",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kt,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Admin & Management"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${c?"rotate-90":""}`})]}),e!=="collapsed"&&c&&s.jsx(ci,{className:"ml-0 mt-2 space-y-1 border-l-0",children:s2.filter(M=>O(M.url)).map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${B?"bg-[#2d2e5f] text-white font-medium":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))}),s.jsx(Pl,{items:s2,title:"Admin & Management",icon:kt,isVisible:e==="collapsed"&&b==="admin-management",onMouseEnter:()=>j("admin-management"),onMouseLeave:()=>k("admin-management"),isValidPage:O})]})})})})}),N&&s.jsx(Er,{children:s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsx(rr,{children:s.jsxs("div",{className:"relative",onMouseEnter:()=>j("domain-admin"),onMouseLeave:()=>k("domain-admin"),children:[s.jsxs(ar,{onClick:()=>{e==="collapsed"?T("domain-admin"):h(!u)},className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between bg-white/5 border border-white/20",tooltip:"Domain Administration",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Domain Administration"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${u?"rotate-90":""}`})]}),e!=="collapsed"&&u&&s.jsx(ci,{className:"ml-0 mt-2 space-y-1 border-l-0",children:r2.filter(M=>O(M.url)).map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${B?"bg-[#2d2e5f] text-white font-medium":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))}),s.jsx(Pl,{items:r2,title:"Domain Administration",icon:rt,isVisible:e==="collapsed"&&b==="domain-admin",onMouseEnter:()=>j("domain-admin"),onMouseLeave:()=>k("domain-admin"),isValidPage:O})]})})})})}),N&&s.jsx(Er,{children:s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsx(rr,{children:s.jsxs("div",{className:"relative",onMouseEnter:()=>j("system"),onMouseLeave:()=>k("system"),children:[s.jsxs(ar,{onClick:()=>{e==="collapsed"?T("system"):p(!m)},className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between bg-white/5 border border-white/20",tooltip:"System",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kt,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"System"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${m?"rotate-90":""}`})]}),e!=="collapsed"&&m&&s.jsx(ci,{className:"ml-0 mt-2 space-y-1 border-l-0",children:a2.filter(M=>O(M.url)).map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${B?"bg-[#2d2e5f] text-white font-medium":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))}),s.jsx(Pl,{items:a2,title:"System",icon:kt,isVisible:e==="collapsed"&&b==="system",onMouseEnter:()=>j("system"),onMouseLeave:()=>k("system"),isValidPage:O})]})})})})}),!N&&R.length>0&&s.jsxs(Er,{children:[s.jsx(Yd,{className:"text-gray-400 text-xs font-semibold uppercase tracking-wider group-data-[collapsible=icon]:hidden",children:"Teaching Tools"}),s.jsx(Tr,{children:s.jsx(Ar,{children:R.map(M=>s.jsx(rr,{children:s.jsx(ar,{asChild:!0,tooltip:M.title,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-white ${B?"bg-[#2d2e5f] text-white font-medium":"hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:M.title})]})})},M.title))})})]}),!N&&F.length>0&&s.jsxs(Er,{children:[s.jsx(Yd,{className:"text-gray-400 text-xs font-semibold uppercase tracking-wider group-data-[collapsible=icon]:hidden",children:"Management"}),s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsxs(rr,{children:[s.jsxs(ar,{onClick:()=>i(!a),className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between",tooltip:"Administration",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kt,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Administration"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${a?"rotate-90":""}`})]}),a&&s.jsx(ci,{className:"ml-8 mt-1 space-y-1 border-l-0",children:F.map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-2 px-3 py-1 text-sm transition-colors ${B?"text-white font-medium":"text-gray-300 hover:text-white"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))})]})})})]}),!N&&(A("/admin/page-permissions")||A("/admin/upload"))&&s.jsxs(Er,{children:[s.jsx(Yd,{className:"text-gray-400 text-xs font-semibold uppercase tracking-wider group-data-[collapsible=icon]:hidden",children:"Admin"}),s.jsx(Tr,{children:s.jsxs(Ar,{children:[A("/admin/upload")&&s.jsx(rr,{children:s.jsx(ar,{asChild:!0,tooltip:"File Upload",children:s.jsxs(sr,{to:"/admin/upload",className:({isActive:M})=>`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-white ${M?"bg-[#2d2e5f] text-white font-medium":"hover:bg-gray-700"}`,children:[s.jsx(On,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"File Upload"})]})})}),A("/admin/page-permissions")&&s.jsx(rr,{children:s.jsx(ar,{asChild:!0,tooltip:"Page Permissions",children:s.jsxs(sr,{to:"/admin/page-permissions",className:({isActive:M})=>`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-white ${M?"bg-[#2d2e5f] text-white font-medium":"hover:bg-gray-700"}`,children:[s.jsx(kt,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Page Permissions"})]})})})]})})]}),N&&s.jsx(Er,{children:s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsx(rr,{children:s.jsxs("div",{className:"relative",onMouseEnter:()=>j("authentication"),onMouseLeave:()=>k("authentication"),children:[s.jsxs(ar,{onClick:()=>{e==="collapsed"?T("authentication"):x(!v)},className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between bg-white/5 border border-white/20",tooltip:"Authentication",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sn,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Authentication"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${v?"rotate-90":""}`})]}),e!=="collapsed"&&v&&s.jsx(ci,{className:"ml-0 mt-2 space-y-1 border-l-0",children:i2.filter(M=>O(M.url)).map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${B?"bg-[#2d2e5f] text-white font-medium":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))}),s.jsx(Pl,{items:i2,title:"Authentication",icon:sn,isVisible:e==="collapsed"&&b==="authentication",onMouseEnter:()=>j("authentication"),onMouseLeave:()=>k("authentication"),isValidPage:O})]})})})})}),N&&s.jsx(Er,{children:s.jsx(Tr,{children:s.jsx(Ar,{children:s.jsx(rr,{children:s.jsxs("div",{className:"relative",onMouseEnter:()=>j("development"),onMouseLeave:()=>k("development"),children:[s.jsxs(ar,{onClick:()=>{e==="collapsed"?T("development"):g(!y)},className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-white w-full justify-between bg-white/5 border border-white/20",tooltip:"Development",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hi,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Development"})]}),s.jsx(_n,{className:`h-4 w-4 transition-transform group-data-[collapsible=icon]:hidden ${y?"rotate-90":""}`})]}),e!=="collapsed"&&y&&s.jsx(ci,{className:"ml-0 mt-2 space-y-1 border-l-0",children:o2.filter(M=>O(M.url)).map(M=>s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${B?"bg-[#2d2e5f] text-white font-medium":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{children:M.title})]})})},M.title))}),s.jsx(Pl,{items:o2,title:"Development",icon:Hi,isVisible:e==="collapsed"&&b==="development",onMouseEnter:()=>j("development"),onMouseLeave:()=>k("development"),isValidPage:O})]})})})})}),!N&&s.jsxs(Er,{children:[s.jsx(Yd,{className:"text-gray-400 text-xs font-semibold uppercase tracking-wider group-data-[collapsible=icon]:hidden",children:"Quick Access"}),s.jsx(Tr,{children:s.jsx(Ar,{children:tie.filter(M=>U(M.url)).map(M=>s.jsx(rr,{children:s.jsx(ar,{asChild:!0,tooltip:M.title,children:s.jsxs(sr,{to:M.url,className:({isActive:B})=>`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-white ${B?"bg-[#2d2e5f] text-white font-medium":"hover:bg-gray-700"}`,children:[s.jsx(M.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:M.title})]})})},M.title))})})]})]}),N&&s.jsxs($5,{className:"p-4 border-t border-gray-700 bg-[#1a1b3a] group-data-[collapsible=icon]:hidden",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Students"}),s.jsx("div",{className:"text-lg font-semibold text-white",children:"289/500"}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] h-2 rounded-full",style:{width:"57.8%"}})})]})]})}var mb=["Enter"," "],sie=["ArrowDown","PageUp","Home"],U5=["ArrowUp","PageDown","End"],rie=[...sie,...U5],aie={ltr:[...mb,"ArrowRight"],rtl:[...mb,"ArrowLeft"]},iie={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hh="Menu",[th,oie,lie]=$p(Hh),[gl,B5]=es(Hh,[lie,no,pd]),Mx=no(),V5=pd(),[cie,vl]=gl(Hh),[die,Gh]=gl(Hh),q5=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=Mx(t),[c,d]=f.useState(null),u=f.useRef(!1),h=$t(i),m=fd(a);return f.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(Gp,{...l,children:s.jsx(cie,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:s.jsx(die,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:r})})})};q5.displayName=Hh;var uie="MenuAnchor",RN=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Mx(n);return s.jsx(gh,{...a,...r,ref:t})});RN.displayName=uie;var MN="MenuPortal",[hie,W5]=gl(MN,{forceMount:void 0}),H5=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=vl(MN,t);return s.jsx(hie,{scope:t,forceMount:n,children:s.jsx(xn,{present:n||i.open,children:s.jsx(ed,{asChild:!0,container:a,children:r})})})};H5.displayName=MN;var xr="MenuContent",[mie,LN]=gl(xr),G5=f.forwardRef((e,t)=>{const n=W5(xr,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=vl(xr,e.__scopeMenu),o=Gh(xr,e.__scopeMenu);return s.jsx(th.Provider,{scope:e.__scopeMenu,children:s.jsx(xn,{present:r||i.open,children:s.jsx(th.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(fie,{...a,ref:t}):s.jsx(pie,{...a,ref:t})})})})}),fie=f.forwardRef((e,t)=>{const n=vl(xr,e.__scopeMenu),r=f.useRef(null),a=He(t,r);return f.useEffect(()=>{const i=r.current;if(i)return jh(i)},[]),s.jsx(ON,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ue(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pie=f.forwardRef((e,t)=>{const n=vl(xr,e.__scopeMenu);return s.jsx(ON,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ON=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...x}=e,y=vl(xr,n),g=Gh(xr,n),b=Mx(n),w=V5(n),C=oie(n),[_,S]=f.useState(null),N=f.useRef(null),j=He(t,N,y.onContentChange),k=f.useRef(0),T=f.useRef(""),A=f.useRef(0),R=f.useRef(null),F=f.useRef("right"),O=f.useRef(0),U=v?wh:f.Fragment,M=v?{as:ds,allowPinchZoom:!0}:void 0,B=E=>{var te,ie;const I=T.current+E,q=C().filter(ce=>!ce.disabled),$=document.activeElement,P=(te=q.find(ce=>ce.ref.current===$))==null?void 0:te.textValue,Z=q.map(ce=>ce.textValue),ee=kie(Z,I,P),J=(ie=q.find(ce=>ce.textValue===ee))==null?void 0:ie.ref.current;(function ce(ve){T.current=ve,window.clearTimeout(k.current),ve!==""&&(k.current=window.setTimeout(()=>ce(""),1e3))})(I),J&&setTimeout(()=>J.focus())};f.useEffect(()=>()=>window.clearTimeout(k.current),[]),ux();const D=f.useCallback(E=>{var q,$;return F.current===((q=R.current)==null?void 0:q.side)&&Tie(E,($=R.current)==null?void 0:$.area)},[]);return s.jsx(mie,{scope:n,searchRef:T,onItemEnter:f.useCallback(E=>{D(E)&&E.preventDefault()},[D]),onItemLeave:f.useCallback(E=>{var I;D(E)||((I=N.current)==null||I.focus(),S(null))},[D]),onTriggerLeave:f.useCallback(E=>{D(E)&&E.preventDefault()},[D]),pointerGraceTimerRef:A,onPointerGraceIntentChange:f.useCallback(E=>{R.current=E},[]),children:s.jsx(U,{...M,children:s.jsx(bh,{asChild:!0,trapped:a,onMountAutoFocus:ue(i,E=>{var I;E.preventDefault(),(I=N.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(cl,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:s.jsx(Rj,{asChild:!0,...w,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:ue(c,E=>{g.isUsingKeyboardRef.current||E.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Kp,{role:"menu","aria-orientation":"vertical","data-state":cO(y.open),"data-radix-menu-content":"",dir:g.dir,...b,...x,ref:j,style:{outline:"none",...x.style},onKeyDown:ue(x.onKeyDown,E=>{const q=E.target.closest("[data-radix-menu-content]")===E.currentTarget,$=E.ctrlKey||E.altKey||E.metaKey,P=E.key.length===1;q&&(E.key==="Tab"&&E.preventDefault(),!$&&P&&B(E.key));const Z=N.current;if(E.target!==Z||!rie.includes(E.key))return;E.preventDefault();const J=C().filter(te=>!te.disabled).map(te=>te.ref.current);U5.includes(E.key)&&J.reverse(),_ie(J)}),onBlur:ue(e.onBlur,E=>{E.currentTarget.contains(E.target)||(window.clearTimeout(k.current),T.current="")}),onPointerMove:ue(e.onPointerMove,nh(E=>{const I=E.target,q=O.current!==E.clientX;if(E.currentTarget.contains(I)&&q){const $=E.clientX>O.current?"right":"left";F.current=$,O.current=E.clientX}}))})})})})})})});G5.displayName=xr;var xie="MenuGroup",FN=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(_e.div,{role:"group",...r,ref:t})});FN.displayName=xie;var gie="MenuLabel",K5=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(_e.div,{...r,ref:t})});K5.displayName=gie;var vp="MenuItem",l2="menu.itemSelect",Lx=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=f.useRef(null),o=Gh(vp,e.__scopeMenu),l=LN(vp,e.__scopeMenu),c=He(t,i),d=f.useRef(!1),u=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(l2,{bubbles:!0,cancelable:!0});h.addEventListener(l2,p=>r==null?void 0:r(p),{once:!0}),pw(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(Q5,{...a,ref:c,disabled:n,onClick:ue(e.onClick,u),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:ue(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ue(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||mb.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Lx.displayName=vp;var Q5=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=LN(vp,n),l=V5(n),c=f.useRef(null),d=He(t,c),[u,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[i.children]),s.jsx(th.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:s.jsx(Mj,{asChild:!0,...l,focusable:!r,children:s.jsx(_e.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:ue(e.onPointerMove,nh(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(e.onPointerLeave,nh(v=>o.onItemLeave(v))),onFocus:ue(e.onFocus,()=>h(!0)),onBlur:ue(e.onBlur,()=>h(!1))})})})}),vie="MenuCheckboxItem",Y5=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(tO,{scope:e.__scopeMenu,checked:n,children:s.jsx(Lx,{role:"menuitemcheckbox","aria-checked":yp(n)?"mixed":n,...a,ref:t,"data-state":zN(n),onSelect:ue(a.onSelect,()=>r==null?void 0:r(yp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Y5.displayName=vie;var X5="MenuRadioGroup",[yie,bie]=gl(X5,{value:void 0,onValueChange:()=>{}}),J5=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=$t(r);return s.jsx(yie,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(FN,{...a,ref:t})})});J5.displayName=X5;var Z5="MenuRadioItem",eO=f.forwardRef((e,t)=>{const{value:n,...r}=e,a=bie(Z5,e.__scopeMenu),i=n===a.value;return s.jsx(tO,{scope:e.__scopeMenu,checked:i,children:s.jsx(Lx,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":zN(i),onSelect:ue(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});eO.displayName=Z5;var $N="MenuItemIndicator",[tO,wie]=gl($N,{checked:!1}),nO=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=wie($N,n);return s.jsx(xn,{present:r||yp(i.checked)||i.checked===!0,children:s.jsx(_e.span,{...a,ref:t,"data-state":zN(i.checked)})})});nO.displayName=$N;var jie="MenuSeparator",sO=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(_e.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});sO.displayName=jie;var Nie="MenuArrow",rO=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Mx(n);return s.jsx(Qp,{...a,...r,ref:t})});rO.displayName=Nie;var Sie="MenuSub",[mde,aO]=gl(Sie),Xd="MenuSubTrigger",iO=f.forwardRef((e,t)=>{const n=vl(Xd,e.__scopeMenu),r=Gh(Xd,e.__scopeMenu),a=aO(Xd,e.__scopeMenu),i=LN(Xd,e.__scopeMenu),o=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(RN,{asChild:!0,...d,children:s.jsx(Q5,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":cO(n.open),...e,ref:Fp(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ue(e.onPointerMove,nh(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ue(e.onPointerLeave,nh(h=>{var p,v;u();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const x=(v=n.content)==null?void 0:v.dataset.side,y=x==="right",g=y?-5:5,b=m[y?"left":"right"],w=m[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:b,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:b,y:m.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ue(e.onKeyDown,h=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||aie[r.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});iO.displayName=Xd;var oO="MenuSubContent",lO=f.forwardRef((e,t)=>{const n=W5(xr,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=vl(xr,e.__scopeMenu),o=Gh(xr,e.__scopeMenu),l=aO(oO,e.__scopeMenu),c=f.useRef(null),d=He(t,c);return s.jsx(th.Provider,{scope:e.__scopeMenu,children:s.jsx(xn,{present:r||i.open,children:s.jsx(th.Slot,{scope:e.__scopeMenu,children:s.jsx(ON,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ue(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ue(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ue(e.onKeyDown,u=>{var p;const h=u.currentTarget.contains(u.target),m=iie[o.dir].includes(u.key);h&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),u.preventDefault())})})})})})});lO.displayName=oO;function cO(e){return e?"open":"closed"}function yp(e){return e==="indeterminate"}function zN(e){return yp(e)?"indeterminate":e?"checked":"unchecked"}function _ie(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Cie(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function kie(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Cie(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Eie(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i].x,c=t[i].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}function Tie(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Eie(n,t)}function nh(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Aie=q5,Pie=RN,Iie=H5,Die=G5,Rie=FN,Mie=K5,Lie=Lx,Oie=Y5,Fie=J5,$ie=eO,zie=nO,Uie=sO,Bie=rO,Vie=iO,qie=lO,UN="DropdownMenu",[Wie,fde]=es(UN,[B5]),fs=B5(),[Hie,dO]=Wie(UN),uO=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=fs(t),d=f.useRef(null),[u=!1,h]=Xs({prop:a,defaultProp:i,onChange:o});return s.jsx(Hie,{scope:t,triggerId:Ws(),triggerRef:d,contentId:Ws(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(Aie,{...c,open:u,onOpenChange:h,dir:r,modal:l,children:n})})};uO.displayName=UN;var hO="DropdownMenuTrigger",mO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=dO(hO,n),o=fs(n);return s.jsx(Pie,{asChild:!0,...o,children:s.jsx(_e.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Fp(t,i.triggerRef),onPointerDown:ue(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ue(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});mO.displayName=hO;var Gie="DropdownMenuPortal",fO=e=>{const{__scopeDropdownMenu:t,...n}=e,r=fs(t);return s.jsx(Iie,{...r,...n})};fO.displayName=Gie;var pO="DropdownMenuContent",xO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=dO(pO,n),i=fs(n),o=f.useRef(!1);return s.jsx(Die,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:ue(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ue(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xO.displayName=pO;var Kie="DropdownMenuGroup",Qie=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Rie,{...a,...r,ref:t})});Qie.displayName=Kie;var Yie="DropdownMenuLabel",gO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Mie,{...a,...r,ref:t})});gO.displayName=Yie;var Xie="DropdownMenuItem",vO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Lie,{...a,...r,ref:t})});vO.displayName=Xie;var Jie="DropdownMenuCheckboxItem",yO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Oie,{...a,...r,ref:t})});yO.displayName=Jie;var Zie="DropdownMenuRadioGroup",eoe=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Fie,{...a,...r,ref:t})});eoe.displayName=Zie;var toe="DropdownMenuRadioItem",bO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx($ie,{...a,...r,ref:t})});bO.displayName=toe;var noe="DropdownMenuItemIndicator",wO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(zie,{...a,...r,ref:t})});wO.displayName=noe;var soe="DropdownMenuSeparator",jO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Uie,{...a,...r,ref:t})});jO.displayName=soe;var roe="DropdownMenuArrow",aoe=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Bie,{...a,...r,ref:t})});aoe.displayName=roe;var ioe="DropdownMenuSubTrigger",NO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(Vie,{...a,...r,ref:t})});NO.displayName=ioe;var ooe="DropdownMenuSubContent",SO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fs(n);return s.jsx(qie,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});SO.displayName=ooe;var loe=uO,coe=mO,doe=fO,_O=xO,CO=gO,kO=vO,EO=yO,TO=bO,AO=wO,PO=jO,IO=NO,DO=SO;const Ox=loe,Fx=coe,uoe=f.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(IO,{ref:a,className:ne("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(_n,{className:"ml-auto h-4 w-4"})]}));uoe.displayName=IO.displayName;const hoe=f.forwardRef(({className:e,...t},n)=>s.jsx(DO,{ref:n,className:ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));hoe.displayName=DO.displayName;const Kh=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(doe,{children:s.jsx(_O,{ref:r,sideOffset:t,className:ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Kh.displayName=_O.displayName;const $s=f.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(kO,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));$s.displayName=kO.displayName;const moe=f.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(EO,{ref:a,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(AO,{children:s.jsx(pn,{className:"h-4 w-4"})})}),t]}));moe.displayName=EO.displayName;const foe=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(TO,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(AO,{children:s.jsx(SA,{className:"h-2 w-2 fill-current"})})}),t]}));foe.displayName=TO.displayName;const BN=f.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(CO,{ref:r,className:ne("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));BN.displayName=CO.displayName;const VN=f.forwardRef(({className:e,...t},n)=>s.jsx(PO,{ref:n,className:ne("-mx-1 my-1 h-px bg-muted",e),...t}));VN.displayName=PO.displayName;var qN="Avatar",[poe,pde]=es(qN),[xoe,RO]=poe(qN),MO=f.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=f.useState("idle");return s.jsx(xoe,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(_e.span,{...r,ref:t})})});MO.displayName=qN;var LO="AvatarImage",OO=f.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=RO(LO,n),l=goe(r,i.referrerPolicy),c=$t(d=>{a(d),o.onImageLoadingStatusChange(d)});return fn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(_e.img,{...i,ref:t,src:r}):null});OO.displayName=LO;var FO="AvatarFallback",$O=f.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=RO(FO,n),[o,l]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(_e.span,{...a,ref:t}):null});$O.displayName=FO;function goe(e,t){const[n,r]=f.useState("idle");return fn(()=>{if(!e){r("error");return}let a=!0;const i=new window.Image,o=l=>()=>{a&&r(l)};return r("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=e,t&&(i.referrerPolicy=t),()=>{a=!1}},[e,t]),n}var zO=MO,UO=OO,BO=$O;const al=f.forwardRef(({className:e,...t},n)=>s.jsx(zO,{ref:n,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));al.displayName=zO.displayName;const voe=f.forwardRef(({className:e,...t},n)=>s.jsx(UO,{ref:n,className:ne("aspect-square h-full w-full",e),...t}));voe.displayName=UO.displayName;const $x=f.forwardRef(({className:e,...t},n)=>s.jsx(BO,{ref:n,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));$x.displayName=BO.displayName;const VO=()=>{var d,u,h,m,p,v;const{session:e,loading:t,isPlatformAdmin:n}=dn();if(t)return s.jsx("div",{className:"h-8 w-8 rounded-full bg-muted animate-pulse"});const r=e==null?void 0:e.email,a=((u=(d=e==null?void 0:e.current_tenant)==null?void 0:d.tenant)==null?void 0:u.name)||"User",i=((m=(h=e==null?void 0:e.current_tenant)==null?void 0:h.role)==null?void 0:m.display_name)||((v=(p=e==null?void 0:e.current_tenant)==null?void 0:p.role)==null?void 0:v.name),o=async()=>{await L.auth.signOut()},l=()=>{var x;if(n){const y=r||"",b=y.split("@")[0].split(/[._-]/);return b.length>=2?(b[0][0]+b[b.length-1][0]).toUpperCase():((x=y[0])==null?void 0:x.toUpperCase())||"PA"}else return a?a.split(" ").map(y=>y[0]).join("").toUpperCase():r?r[0].toUpperCase():"U"},c=a||r||"User";return s.jsxs(Ox,{children:[s.jsx(Fx,{asChild:!0,children:s.jsx(z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsx(al,{className:"h-8 w-8",children:s.jsx($x,{className:"bg-primary text-primary-foreground text-xs",children:l()})})})}),s.jsxs(Kh,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(BN,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:c}),r&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(At,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r})]}),i&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(Ey,{className:"h-3 w-3 text-muted-foreground"}),s.jsx(X,{variant:"secondary",className:"text-xs px-1 py-0",children:i})]})]})}),s.jsx(VN,{}),s.jsxs($s,{onClick:o,className:"cursor-pointer",children:[s.jsx(EA,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Log out"})]})]})]})};function df({children:e}){return pt(),s.jsx(WM,{children:s.jsx(L5,{defaultOpen:!0,children:s.jsxs("div",{className:"min-h-screen flex w-full bg-gray-50",children:[s.jsx(nie,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("header",{className:"h-14 border-b bg-background flex items-center justify-end px-4",children:s.jsx(VO,{})}),s.jsx("main",{className:"flex-1",children:e})]})]})})})}function c2({label:e="Domain",value:t,onChange:n,placeholder:r="Select a domain"}){const{domains:a}=As(),i=f.useMemo(()=>(a||[]).map(o=>({id:o.id,name:o.name,slug:o.slug})),[a]);return s.jsxs("div",{className:"space-y-2",children:[e&&s.jsx(Q,{className:"text-foreground",children:e}),s.jsxs(Ve,{value:t||"",onValueChange:o=>n(o||null),children:[s.jsx(ze,{className:"w-full",children:s.jsx(qe,{placeholder:r})}),s.jsx(Ue,{children:(i||[]).map(o=>s.jsx(le,{value:o.id,children:o.name},o.id))})]})]})}function yoe({domainId:e,label:t="Concept",value:n,onChange:r,placeholder:a="Select a concept"}){const{concepts:i}=_x(e||""),o=f.useMemo(()=>(i||[]).map(l=>({id:l.id,name:l.name})),[i]);return s.jsxs("div",{className:"space-y-2",children:[t&&s.jsx(Q,{className:"text-foreground",children:t}),s.jsxs(Ve,{value:n||"",onValueChange:l=>r(l||null),disabled:!e,children:[s.jsx(ze,{className:"w-full",children:s.jsx(qe,{placeholder:a})}),s.jsx(Ue,{children:(o||[]).map(l=>s.jsx(le,{value:l.id,children:l.name},l.id))})]})]})}const $r={all:["ai-training-settings"],global:()=>[...$r.all,"global"],domain:e=>[...$r.all,"domain",e||"none"],concept:e=>[...$r.all,"concept",e||"none"],effective:e=>[...$r.all,"effective",e.domainId||"none",e.conceptId||"none"]};async function vc(e){let n=L.from("ai_training_settings").select("*").limit(1);e.scope&&(n=n.eq("scope",e.scope)),e.domain_id!==void 0&&(n=n.eq("domain_id",e.domain_id)),e.concept_id!==void 0&&(n=n.eq("concept_id",e.concept_id));const{data:r,error:a}=await n.maybeSingle();if(a&&a.code!=="PGRST116")throw a;return r??null}function boe(){return yt({queryKey:$r.global(),queryFn:()=>vc({scope:"global"})})}function woe(e){return yt({queryKey:$r.domain(e),queryFn:()=>e?vc({scope:"domain",domain_id:e}):Promise.resolve(null),enabled:!!e})}function joe(e){return yt({queryKey:$r.concept(e),queryFn:()=>e?vc({scope:"concept",concept_id:e}):Promise.resolve(null),enabled:!!e})}function Noe(e){const{conceptId:t,domainId:n}=e;return yt({queryKey:$r.effective({conceptId:t||null,domainId:n||null}),queryFn:async()=>{if(t){const a=await vc({scope:"concept",concept_id:t});if(a)return a}if(n){const a=await vc({scope:"domain",domain_id:n});if(a)return a}return await vc({scope:"global"})},enabled:!!(t||n)})}function Soe(){const e=Nn();return En({mutationFn:async t=>{const n={model_name:t.model_name??"gemini-2.5-flash",region:t.region??"europe-west4",temperature:t.temperature??.2,top_p:t.top_p??.95,max_output_tokens:t.max_output_tokens??512,candidate_count:t.candidate_count??5,style_similarity_min:t.style_similarity_min??.8,duplicate_similarity_max:t.duplicate_similarity_max??.92,apply_strict_filter:t.apply_strict_filter??!0,fallback_to_bootstrap:t.fallback_to_bootstrap??!0,enabled:t.enabled??!0},r=L;if(t.scope==="global"){const l={...n,scope:"global",domain_id:null,concept_id:null},{data:c,error:d}=await r.from("ai_training_settings").upsert(l,{onConflict:"scope"}).select().maybeSingle();if(d)throw d;return c}if(t.scope==="domain"){const l={...n,scope:"domain",domain_id:t.domain_id,concept_id:null},{data:c,error:d}=await r.from("ai_training_settings").upsert(l,{onConflict:"scope,domain_id"}).select().maybeSingle();if(d)throw d;return c}const a={...n,scope:"concept",concept_id:t.concept_id,domain_id:null},{data:i,error:o}=await r.from("ai_training_settings").upsert(a,{onConflict:"scope,concept_id"}).select().maybeSingle();if(o)throw o;return i},meta:{onError:t=>{console.error("Failed to upsert AI training settings:",t)}},onSettled:async(t,n,r)=>{await e.invalidateQueries({queryKey:$r.all}),(r==null?void 0:r.scope)==="global"&&await e.invalidateQueries({queryKey:$r.global()})}})}function _oe(){const e=Nn();return En({mutationFn:async t=>{const n=L;if(t.scope==="domain"){const{error:a}=await n.from("ai_training_settings").delete().eq("scope","domain").eq("domain_id",t.domain_id);if(a)throw a;return}const{error:r}=await n.from("ai_training_settings").delete().eq("scope","concept").eq("concept_id",t.concept_id);if(r)throw r},meta:{onError:t=>{console.error("Failed to delete AI training settings override:",t)}},onSettled:async()=>{await e.invalidateQueries({queryKey:$r.all})}})}const Coe=["gemini-2.5-flash","gemini-1.5-flash-002","gemini-1.5-flash-8b"],koe=["europe-west4","us-central1"];function wv({initial:e,scope:t,targetIds:n,showDelete:r}){const{toast:a}=at(),i=Soe(),o=_oe(),[l,c]=f.useState((e==null?void 0:e.model_name)??"gemini-2.5-flash"),[d,u]=f.useState((e==null?void 0:e.region)??"europe-west4"),[h,m]=f.useState((e==null?void 0:e.temperature)??.2),[p,v]=f.useState((e==null?void 0:e.top_p)??.95),[x,y]=f.useState((e==null?void 0:e.max_output_tokens)??512),[g,b]=f.useState((e==null?void 0:e.candidate_count)??5),[w,C]=f.useState((e==null?void 0:e.style_similarity_min)??.8),[_,S]=f.useState((e==null?void 0:e.duplicate_similarity_max)??.92),[N,j]=f.useState((e==null?void 0:e.apply_strict_filter)??!0),[k,T]=f.useState((e==null?void 0:e.fallback_to_bootstrap)??!0),[A,R]=f.useState((e==null?void 0:e.enabled)??!0);f.useEffect(()=>{e&&(c(e.model_name),u(e.region),m(e.temperature),v(e.top_p),y(e.max_output_tokens),b(e.candidate_count),C(e.style_similarity_min),S(e.duplicate_similarity_max),j(e.apply_strict_filter),T(e.fallback_to_bootstrap),R(e.enabled))},[e==null?void 0:e.id]);const F=async()=>{const M={scope:t,model_name:l,region:d,temperature:Number(h),top_p:Number(p),max_output_tokens:Number(x),candidate_count:Number(g),style_similarity_min:Number(w),duplicate_similarity_max:Number(_),apply_strict_filter:!!N,fallback_to_bootstrap:!!k,enabled:!!A};t==="domain"&&(M.domain_id=n==null?void 0:n.domain_id),t==="concept"&&(M.concept_id=n==null?void 0:n.concept_id),console.log("Saving AI settings",M);const B=await i.mutateAsync(M);return a({title:"Saved",description:"AI Training settings updated."}),B},O=async()=>{t!=="global"&&(t==="domain"&&(n!=null&&n.domain_id)?(await o.mutateAsync({scope:"domain",domain_id:n.domain_id}),a({title:"Override removed",description:"Domain override deleted. Global settings now apply."})):t==="concept"&&(n!=null&&n.concept_id)&&(await o.mutateAsync({scope:"concept",concept_id:n.concept_id}),a({title:"Override removed",description:"Concept override deleted. Domain/global settings now apply."})))},U=(M,B,D)=>{const E=[`${M}`];return E.push(`min ${B}`),E.push(`max ${D}`),E.join(" • ")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"rounded-lg border divide-y divide-border",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Model"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose the Gemini model. Bigger models improve quality; smaller are faster and cheaper."})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs(Ve,{value:l,onValueChange:c,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select model"})}),s.jsx(Ue,{children:Coe.map(M=>s.jsx(le,{value:M,children:M},M))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Region"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vertex AI region. Pick the closest for lower latency and data residency needs."})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs(Ve,{value:d,onValueChange:u,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select region"})}),s.jsx(Ue,{children:koe.map(M=>s.jsx(le,{value:M,children:M},M))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Temperature"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls randomness. Lower is more deterministic; higher is more creative."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(pe,{type:"number",step:"0.05",min:"0",max:"1",value:h,onChange:M=>m(Number(M.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:U(h,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Top P"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Nucleus sampling. Lower values consider fewer tokens; 1 uses full distribution."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(pe,{type:"number",step:"0.01",min:"0",max:"1",value:p,onChange:M=>v(Number(M.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:U(p,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Max Output Tokens"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hard cap on response length. Higher allows longer answers but costs more."})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(pe,{type:"number",min:"1",value:x,onChange:M=>y(Number(M.target.value))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Candidate Count"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate multiple candidates. Improves choice at the cost of latency and tokens."})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(pe,{type:"number",min:"1",value:g,onChange:M=>b(Number(M.target.value))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Style Similarity Min"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accept only when cosine similarity to the desired style meets this threshold."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(pe,{type:"number",step:"0.01",min:"0",max:"1",value:w,onChange:M=>C(Number(M.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:U(w,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Duplicate Similarity Max"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Treat as duplicate when similarity to existing content is above this threshold."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(pe,{type:"number",step:"0.01",min:"0",max:"1",value:_,onChange:M=>S(Number(M.target.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:U(_,0,1)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Apply strict filter"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enforce the similarity thresholds strictly. May drop low‑quality outputs."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Nt,{checked:N,onCheckedChange:j,id:"apply_strict"}),s.jsx(Q,{htmlFor:"apply_strict",className:"text-foreground",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Fallback to bootstrap"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"If strict filtering rejects all results, fall back to a simple baseline."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Nt,{checked:k,onCheckedChange:T,id:"fallback_bootstrap"}),s.jsx(Q,{htmlFor:"fallback_bootstrap",className:"text-foreground",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4 p-4",children:[s.jsxs("div",{children:[s.jsx(Q,{className:"text-foreground",children:"Enabled"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Master switch for this scope. Turn off to disable AI generation here."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Nt,{checked:A,onCheckedChange:R,id:"enabled"}),s.jsx(Q,{htmlFor:"enabled",className:"text-foreground",children:"Enabled"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(z,{onClick:F,className:"shrink-0",children:"Save settings"}),r&&t!=="global"&&s.jsx(z,{variant:"destructive",onClick:O,className:"shrink-0",children:"Remove override"})]})]})}function Eoe(){const{search:e}=br();return f.useMemo(()=>new URLSearchParams(e),[e])}function Toe(){at();const e=Eoe(),t=pt(),n=e.get("domain"),r=e.get("conceptId"),{domains:a}=As(),i=f.useMemo(()=>!n||!a?null:a.find(y=>y.slug===n||y.id===n)||null,[a,n]),[o,l]=f.useState((i==null?void 0:i.id)||null),[c,d]=f.useState(r||null);f.useEffect(()=>{i!=null&&i.id&&l(i.id)},[i==null?void 0:i.id]);const{data:u}=boe(),{data:h}=woe(o||void 0),{data:m}=joe(c||void 0),{concepts:p}=_x(o||""),{data:v}=Noe({domainId:o,conceptId:c}),x=y=>{if(!y){d(null);return}c&&p&&!p.some(g=>g.id===c)&&d(null)};return f.useEffect(()=>{document.title="Admin AI Training Settings";const y=document.querySelector('meta[name="description"]');y&&y.setAttribute("content","Configure AI training settings: model, region, temperature, tokens, filters.")},[]),s.jsx(df,{children:s.jsxs("div",{className:"w-full px-4 md:px-6 py-4 md:py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-foreground",children:"AI Training Settings"}),s.jsx(z,{variant:"secondary",onClick:()=>t(-1),children:"Back"})]}),s.jsxs(Qr,{defaultValue:"global",className:"w-full",children:[s.jsxs(wr,{className:"grid grid-cols-3 w-full md:w-auto",children:[s.jsx(Je,{value:"global",children:"Global"}),s.jsx(Je,{value:"domain",children:"Domain"}),s.jsx(Je,{value:"concept",children:"Concept"})]}),s.jsx(Ze,{value:"global",className:"mt-4",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Global defaults"})}),s.jsx(W,{className:"space-y-6",children:s.jsx(wv,{scope:"global",initial:u||null})})]})}),s.jsx(Ze,{value:"domain",className:"mt-4",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Domain override"})}),s.jsxs(W,{className:"space-y-6",children:[s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:s.jsx(c2,{value:o,onChange:y=>{l(y),x(y)}})}),s.jsx(wv,{scope:"domain",initial:h||null,targetIds:{domain_id:o||void 0},showDelete:!0})]})]})}),s.jsx(Ze,{value:"concept",className:"mt-4",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Concept override"})}),s.jsxs(W,{className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(c2,{value:o,onChange:y=>{l(y),x(y)}}),s.jsx(yoe,{domainId:o||void 0,value:c,onChange:d})]}),s.jsx(wv,{scope:"concept",initial:m||null,targetIds:{concept_id:c||void 0},showDelete:!0})]})]})})]}),s.jsx("div",{className:"mt-6",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Effective settings preview"})}),s.jsx(W,{children:v?s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Scope"}),s.jsx("div",{className:"text-foreground font-medium",children:v.scope})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Model"}),s.jsxs("div",{className:"text-foreground",children:[v.model_name," (",v.region,")"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Temperature / TopP"}),s.jsxs("div",{className:"text-foreground",children:[v.temperature," / ",v.top_p]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Max Tokens / Candidates"}),s.jsxs("div",{className:"text-foreground",children:[v.max_output_tokens," / ",v.candidate_count]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Style min"}),s.jsx("div",{className:"text-foreground",children:v.style_similarity_min})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Duplicate max"}),s.jsx("div",{className:"text-foreground",children:v.duplicate_similarity_max})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground",children:"Flags"}),s.jsxs("div",{className:"text-foreground",children:["strict=",String(v.apply_strict_filter)," • fallback=",String(v.fallback_to_bootstrap)," • enabled=",String(v.enabled)]})]})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a domain and/or concept to preview the effective settings."})})]})})]})})}function Aoe({open:e,onOpenChange:t,currentConcept:n,concepts:r,onAddChild:a}){const[i,o]=f.useState(""),l=(p,v=new Set)=>{if(v.has(p))return v;v.add(p);const x=r.find(y=>y.id===p);return x!=null&&x.parent_concept_id&&l(x.parent_concept_id,v),v},c=f.useMemo(()=>{const p=l(n.id);return r.filter(v=>!(v.id===n.id||v.parent_concept_id===n.id||p.has(v.id)||i&&!v.name.toLowerCase().includes(i.toLowerCase())))},[r,n,i]),d=p=>{a(p),t(!1),o("")},u=()=>{t(!1),o("")},h=p=>{switch(p){case"approved":case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"suggested":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=p=>{switch(p){case"approved":case"confirmed":return"Approved";case"suggested":return"AI Suggested";case"pending":return"Pending";default:return p}};return s.jsx(nn,{open:e,onOpenChange:u,children:s.jsxs(Kt,{className:"max-w-4xl max-h-[80vh]",children:[s.jsxs(Qt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(Yt,{className:"text-2xl font-semibold",children:"Add Child Concept"}),s.jsxs("p",{className:"text-muted-foreground mt-1",children:['Select a concept to add as a child of "',n.name,'"']})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:u,className:"h-8 w-8 p-0",children:s.jsx(Lt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search concepts...",value:i,onChange:p=>o(p.target.value),className:"pl-10 bg-gray-50"})]}),s.jsx(tl,{className:"h-[500px] pr-4",children:c.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:i?s.jsxs("div",{children:[s.jsxs("p",{children:['No concepts found matching "',i,'"']}),s.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search terms"})]}):s.jsxs("div",{children:[s.jsx("p",{children:"No available concepts to add as children"}),s.jsx("p",{className:"text-sm mt-1",children:"All suitable concepts are either already children or ancestors of this concept"})]})}):s.jsx("div",{className:"space-y-3",children:c.map(p=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-lg",children:p.name}),s.jsxs(X,{variant:"outline",className:"text-xs bg-gray-50",children:["L",p.difficulty_level??0]}),s.jsx(X,{className:`text-xs ${h(p.status)}`,children:m(p.status)})]}),p.description&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:p.description})]}),s.jsxs(z,{size:"sm",onClick:()=>d(p.id),className:"ml-4 bg-black text-white hover:bg-black/90 flex-shrink-0",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Add"]})]},p.id))})})]})]})})}function Poe({concept:e,concepts:t,onBack:n,onUpdateConcept:r,onChangeParent:a,onNavigateToConcept:i}){const o=pt(),[l,c]=f.useState(()=>new URLSearchParams(window.location.search).get("tab")||"overview"),[d,u]=f.useState(!1),[h,m]=f.useState(!1),[p,v]=f.useState(e.description||""),[x,y]=f.useState(e.name),[g,b]=f.useState(!1),[w,C]=f.useState(!1),[_,S]=f.useState([]),[N,j]=f.useState(""),[k,T]=f.useState(""),[A,R]=f.useState(""),[F,O]=f.useState(!1),[U,M]=f.useState(!1);f.useState(null);const[B,D]=f.useState(""),[E,I]=f.useState(!1),[q,$]=f.useState(!1),[P,Z]=f.useState([]),[ee,J]=f.useState(e.difficulty_level??0),te=e.parent_concept_id?t.find(se=>se.id===e.parent_concept_id):null,ie=t.filter(se=>se.parent_concept_id===e.id),ce=se=>se===0?{label:"Foundational",color:"bg-blue-100 text-blue-800"}:se===1?{label:"Beginner",color:"bg-green-100 text-green-800"}:se===2?{label:"Intermediate",color:"bg-yellow-100 text-yellow-800"}:se===3?{label:"Advanced",color:"bg-orange-100 text-orange-800"}:{label:"Expert",color:"bg-red-100 text-red-800"},ve=ce(e.difficulty_level??0),me=()=>{r(e.id,{description:p}),u(!1)},je=()=>{v(e.description||""),u(!1)},Ye=()=>{r(e.id,{name:x}),m(!1)},Oe=()=>{y(e.name),m(!1)},Fe=se=>{i&&i(se)},Ie=se=>{i&&i(se)},ct=se=>{i&&i(se)},Me=se=>{a(se,void 0)},Le=se=>{a(se,e.id)},vt=async()=>{O(!0);try{const{data:se,error:De}=await L.from("concept_relationships").select("*").or(`concept_a_id.eq.${e.id},concept_b_id.eq.${e.id}`).eq("status","approved");!De&&se&&S(se)}catch(se){console.error("Failed to load relationships:",se)}O(!1)},$n=()=>{j(""),T(""),R(""),C(!0)},wt=async()=>{if(console.log("Save relationship clicked",{relationshipType:N,targetConceptId:k}),!N||!k){console.log("Missing required fields");return}M(!0);const se={domain_id:e.domain_id,concept_a_id:e.id,concept_b_id:k,relationship_kind:gn(N),status:"approved",metadata:{label:de(N),description:A||null}};console.log("Saving relationship data:",se);try{const{data:De,error:it}=await L.from("concept_relationships").insert([se]);console.log("Supabase response:",{data:De,error:it}),it?(console.error("Supabase error:",it),alert(`Failed to save relationship: ${it.message}`)):(C(!1),vt(),console.log("Relationship saved successfully"),j(""),T(""),R(""))}catch(De){console.error("Failed to save relationship:",De),alert("Failed to save relationship. Please try again.")}finally{M(!1)}},gn=se=>se==="is_prerequisite_for"?"prerequisite_of":se==="is_built_upon_by"?"builds_on":"related_to",de=se=>se==="is_prerequisite_for"?"Is a prerequisite of":se==="is_built_upon_by"?"Builds on":se==="is_related_to"?"Is related to":se==="contains"?"Contains":se.replace(/_/g," ").replace(/\b\w/g,De=>De.toUpperCase()),Ne=async se=>{try{const{error:De}=await L.from("concept_relationships").delete().eq("id",se);De||vt()}catch(De){console.error("Failed to delete relationship:",De)}},K=se=>{var rn;const De=se.concept_a_id===e.id,it=De?se.concept_b_id:se.concept_a_id;return{otherConcept:t.find(mt=>mt.id===it),direction:De?"outgoing":"incoming",displayType:se.relationship_kind,label:((rn=se.metadata)==null?void 0:rn.label)||se.relationship_kind.replace(/_/g," ")}},ae=async()=>{try{const{data:se,error:De}=await L.from("difficulty_level_labels").select("level_label").eq("level",e.difficulty_level??0).single();D(!De&&se?se.level_label:ce(e.difficulty_level??0).label)}catch(se){console.error("Failed to load difficulty label:",se),D(ce(e.difficulty_level??0).label)}},ye=async()=>{try{const{data:se,error:De}=await L.from("difficulty_level_labels").select("level, level_label").order("level");if(console.log("Difficulty levels response:",{data:se,error:De}),!De&&se)Z(se),console.log("Loaded difficulty levels:",se);else{console.error("Error loading difficulty levels:",De);const it=[{level:0,level_label:"Foundational"},{level:1,level_label:"Beginner"},{level:2,level_label:"Intermediate"},{level:3,level_label:"Advanced"},{level:4,level_label:"Expert"}];Z(it),console.log("Using fallback difficulty levels:",it)}}catch(se){console.error("Failed to load difficulty levels:",se),Z([{level:0,level_label:"Foundational"},{level:1,level_label:"Beginner"},{level:2,level_label:"Intermediate"},{level:3,level_label:"Advanced"},{level:4,level_label:"Expert"}])}},Re=()=>{r(e.id,{difficulty_level:ee}),$(!1),ae()},Ge=()=>{J(e.difficulty_level??0),$(!1)};return f.useEffect(()=>{vt(),ae(),ye()},[e.id]),s.jsxs("div",{className:"flex flex-col h-full bg-background",children:[s.jsx("div",{className:"bg-card border-b shadow-sm",children:s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-3 mb-4",children:h?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{value:x,onChange:se=>y(se.target.value),className:"text-3xl font-medium h-12 border-gray-300"}),s.jsx(z,{size:"sm",onClick:Ye,children:s.jsx(Oa,{className:"h-4 w-4"})}),s.jsx(z,{size:"sm",variant:"outline",onClick:Oe,children:s.jsx(Lt,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"text-3xl font-medium text-gray-900",children:e.name}),s.jsxs(X,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 font-medium",children:["Level ",e.difficulty_level??0]}),s.jsx(X,{className:e.status==="approved"||e.status==="confirmed"?"bg-green-100 text-green-800 hover:bg-green-100 border-green-200 font-medium":e.status==="suggested"?"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-200 font-medium":e.status==="pending"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100 border-yellow-200 font-medium":"bg-red-100 text-red-800 hover:bg-red-100 border-red-200 font-medium",children:e.status==="approved"||e.status==="confirmed"?"Approved":e.status==="suggested"?"AI Suggested":e.status==="pending"?"Pending":e.status})]})}),s.jsx("div",{className:"max-w-4xl",children:d?s.jsxs("div",{className:"space-y-3",children:[s.jsx(Fn,{value:p,onChange:se=>v(se.target.value),placeholder:"Enter concept description...",rows:3,className:"resize-none border-gray-200 bg-white"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{size:"sm",onClick:me,children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Save"]}),s.jsxs(z,{size:"sm",variant:"outline",onClick:je,children:[s.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):s.jsx("p",{className:"text-muted-foreground leading-relaxed text-lg",children:e.description||"No description available. Click the edit button to add one."})})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.status==="approved"&&s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{o(`/admin/domain/${e.domain_id}/goals?conceptId=${e.id}`)},className:"h-9 w-9 p-0 hover:bg-blue-50 rounded-md",title:"Learning goals",children:s.jsx(Xn,{className:"h-4 w-4 text-blue-600"})}),!d&&s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"h-9 w-9 p-0 hover:bg-gray-100 rounded-md",title:"Edit description",children:s.jsx(Ti,{className:"h-4 w-4"})})]})]})})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs(Qr,{value:l,onValueChange:c,className:"flex flex-col h-full",children:[s.jsx("div",{className:"border-b bg-card py-4",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsxs(wr,{className:"grid w-full grid-cols-3 h-11",children:[s.jsx(Je,{value:"overview",className:"text-sm font-medium",children:"Overview"}),s.jsx(Je,{value:"relationships",className:"text-sm font-medium",children:"Relationships"}),s.jsx(Je,{value:"settings",className:"text-sm font-medium",children:"Settings"})]})})}),s.jsx("div",{className:"flex-1 overflow-auto py-8",children:s.jsxs("div",{className:"container mx-auto px-6 max-w-6xl",children:[s.jsxs(Ze,{value:"overview",className:"space-y-6 mt-0",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(V,{children:s.jsx(W,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(et,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Parent & Children"}),s.jsxs("div",{className:"space-y-1",children:[te?s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx("span",{children:"↗"}),s.jsx("span",{children:te.name})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Root level concept"}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx("span",{children:"↘"}),s.jsxs("span",{children:[ie.length," child concept",ie.length!==1?"s":""]})]})]})]})]})})}),s.jsx(V,{children:s.jsx(W,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(bS,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Relationships"}),s.jsx("p",{className:"text-2xl font-semibold",children:_.length})]})]})})}),s.jsx(V,{children:s.jsx(W,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(fh,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Difficulty Level"}),s.jsx(X,{variant:"outline",className:`mt-1 ${ve.color} border-0`,children:B||ve.label})]})]})})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Y,{className:"text-lg",children:"Child Concepts"}),s.jsxs(z,{size:"sm",onClick:()=>b(!0),className:"bg-black text-white hover:bg-black/90",children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Child"]})]})}),ie.length>0&&s.jsx(W,{children:s.jsx("div",{className:"space-y-3",children:ie.map((se,De)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"w-2 h-2 bg-muted rounded-full flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-foreground",children:se.name}),se.description&&s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:se.description})]}),s.jsxs(X,{variant:"outline",className:"flex-shrink-0",children:["L",se.difficulty_level??0]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>Fe(se.id),title:"Edit concept",children:s.jsx(Ti,{className:"h-4 w-4 text-gray-600"})}),s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>Ie(se.id),title:"Manage relationships",children:s.jsx(bS,{className:"h-4 w-4 text-blue-600"})}),s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>ct(se.id),title:"Settings",children:s.jsx(kt,{className:"h-4 w-4 text-gray-600"})}),s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-red-50",onClick:()=>Me(se.id),title:"Remove child relationship",children:s.jsx(G$,{className:"h-4 w-4 text-gray-600 hover:text-red-600"})})]})]}),De<ie.length-1&&s.jsx(cn,{className:"mt-3"})]},se.id))})}),ie.length===0&&s.jsx(W,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No child concepts yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add a child concept to build the knowledge hierarchy"})]})})]})]}),s.jsxs(Ze,{value:"relationships",className:"space-y-8 mt-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Relationships"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage connections between this concept and others in the knowledge graph."})]}),s.jsxs(z,{className:"bg-black text-white hover:bg-black/90",onClick:$n,children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Relationship"]})]}),F?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):_.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx("p",{children:"No relationships configured yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add relationships to connect this concept with others"})]}):s.jsx("div",{className:"space-y-4",children:_.map(se=>{var Te;const{otherConcept:De,direction:it,displayType:Jt,label:rn}=K(se);if(!De)return null;const mt=(re,Ae)=>re==="prerequisite_of"?Ae==="outgoing"?s.jsx(pS,{className:"h-4 w-4"}):s.jsx(An,{className:"h-4 w-4"}):re==="builds_on"?Ae==="incoming"?s.jsx(pS,{className:"h-4 w-4"}):s.jsx(An,{className:"h-4 w-4"}):re==="related_to"?s.jsx(Cy,{className:"h-4 w-4"}):s.jsx(Cy,{className:"h-4 w-4"}),zn=re=>re==="prerequisite_of"?"bg-red-100 text-red-800":re==="builds_on"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800";return s.jsx(V,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[mt(Jt,it),s.jsx(X,{className:`${zn(Jt)} border-0`,children:rn}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:De.name}),((Te=se.metadata)==null?void 0:Te.description)&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:se.metadata.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",title:"Edit relationship",children:s.jsx(Ti,{className:"h-4 w-4"})}),s.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Ne(se.id),title:"Delete relationship",children:s.jsx(Ts,{className:"h-4 w-4"})})]})]})},se.id)})})]}),s.jsxs(Ze,{value:"settings",className:"space-y-8 mt-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Concept Settings"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Administrative settings and actions for this concept."})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-lg",children:"Hierarchy Management"})}),s.jsx(W,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Current Parent"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:te?te.name:"None (Root level concept)"}),s.jsxs(z,{variant:"outline",onClick:()=>I(!0),children:[s.jsx(kt,{className:"h-4 w-4 mr-2"}),"Change Parent Concept"]})]})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-lg",children:"Difficulty Level"})}),s.jsx(W,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Current Level"}),q?s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs(Ve,{value:ee.toString(),onValueChange:se=>J(parseInt(se)),children:[s.jsx(ze,{className:"w-full",children:s.jsx(qe,{placeholder:"Select difficulty level"})}),s.jsx(Ue,{children:P.length>0?P.map(se=>s.jsxs(le,{value:se.level.toString(),children:["Level ",se.level,": ",se.level_label]},se.level)):s.jsx(le,{value:"0",disabled:!0,children:"Loading levels..."})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{size:"sm",onClick:Re,children:[s.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Save"]}),s.jsxs(z,{size:"sm",variant:"outline",onClick:Ge,children:[s.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):s.jsxs("div",{className:"mt-2",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Level ",e.difficulty_level??0,": ",B||"Loading..."]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{console.log("Change Level clicked. Available levels:",P),$(!0)},children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Change Level"]})]})]})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-lg",children:"Concept Information"})}),s.jsx(W,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Current Level"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Level ",e.difficulty_level??0]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Status"}),s.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:e.status})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Child Concepts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ie.length})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Relationships"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:_.length})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Created By"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(X,{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200",children:"📝 Manual"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Created At"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"})]})]})})]})]})]})})]})}),s.jsx(Aoe,{open:g,onOpenChange:b,currentConcept:e,concepts:t,onAddChild:Le}),s.jsx(nn,{open:w,onOpenChange:C,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Add Relationship"}),s.jsxs(Tn,{children:['Create a new relationship between "',e.name,'" and another concept.']})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Relationship Type"}),s.jsxs(Ve,{value:N,onValueChange:j,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select relationship type"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"is_prerequisite_for",children:"Prerequisite: Must be learned before"}),s.jsx(le,{value:"is_built_upon_by",children:"Builds Upon: Extends this concept"}),s.jsx(le,{value:"is_related_to",children:"Related: Similar or connected concept"}),s.jsx(le,{value:"contains",children:"Contains: Includes as sub-concept"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Target Concept"}),s.jsxs(Ve,{value:k,onValueChange:T,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Search and select concept"})}),s.jsx(Ue,{children:t.filter(se=>se.id!==e.id).sort((se,De)=>se.name.localeCompare(De.name)).map(se=>s.jsx(le,{value:se.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:se.name}),s.jsxs(X,{variant:"outline",className:"text-xs",children:["L",se.difficulty_level??0]})]})},se.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),s.jsx(Fn,{value:A,onChange:se=>R(se.target.value),placeholder:"Add additional context about this relationship...",rows:3,className:"resize-none"})]})]}),s.jsxs(Ui,{children:[s.jsx(z,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),s.jsx(z,{onClick:wt,disabled:!N||!k||U,className:"bg-black text-white hover:bg-black/90",children:U?"Saving...":"Save Relationship"})]})]})}),s.jsx(nn,{open:E,onOpenChange:I,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Change Parent Concept"}),s.jsxs(Tn,{children:['Select a new parent concept for "',e.name,'" or make it a root-level concept.']})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Parent Concept"}),s.jsxs(Ve,{value:(te==null?void 0:te.id)||"none",onValueChange:se=>{se==="none"?a(e.id,void 0):a(e.id,se),I(!1)},children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select parent concept or none"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"none",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{children:"None (Root level concept)"})})}),t.filter(se=>se.id!==e.id).sort((se,De)=>se.name.localeCompare(De.name)).map(se=>s.jsx(le,{value:se.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:se.name}),s.jsxs(X,{variant:"outline",className:"text-xs",children:["L",se.difficulty_level??0]})]})},se.id))]})]})]})}),s.jsx(Ui,{children:s.jsx(z,{variant:"outline",onClick:()=>I(!1),children:"Cancel"})})]})})]})}function d2(){const{domainSlug:e,conceptId:t}=Gr(),n=pt(),r=e||"",{toast:a}=at(),[i,o]=f.useState(null),[l,c]=f.useState("");f.useState(!1);const[d,u]=f.useState([]),[h,m]=f.useState([]),[p,v]=f.useState([]);f.useState(!1),f.useState(""),f.useState(""),f.useState("is_related_to"),f.useState(!1);const[x,y]=f.useState(""),[g,b]=f.useState("");f.useEffect(()=>{(async()=>{if(!t){console.error("No conceptId provided");return}console.log("Fetching concept with ID:",t),console.log("Domain ID:",r);const{data:j,error:k}=await L.from("concepts").select("id,name,description,parent_concept_id,domain_id,status,difficulty_level,generation_source,source,source_file_id,created_at,updated_at,display_order,metadata,created_by,updated_by,reviewed_by,reviewed_at").eq("id",t).single();if(k){console.error("Concept fetch error:",k),console.error("Error details:",{code:k.code,message:k.message,details:k.details,hint:k.hint}),a({title:"Failed to load concept",description:k.message||"Unknown error occurred",variant:"destructive"});return}console.log("Successfully fetched concept:",j),o(j),c((j==null?void 0:j.description)||""),y((j==null?void 0:j.description)||""),document.title=`${j==null?void 0:j.name} – Concept Details`;const T=j!=null&&j.description?String(j.description).slice(0,150):"Concept detail workspace";let A=document.querySelector('meta[name="description"]');A||(A=document.createElement("meta"),A.name="description",document.head.appendChild(A)),A.content=`${j==null?void 0:j.name} – ${T}`;let R=document.querySelector('link[rel="canonical"]');if(R||(R=document.createElement("link"),R.rel="canonical",document.head.appendChild(R)),R.href=window.location.href,r){const{data:B,error:D}=await L.from("concepts").select("id,name,description,parent_concept_id,domain_id,status,difficulty_level,generation_source,source,source_file_id,created_at,updated_at,display_order,metadata,created_by,updated_by,reviewed_by,reviewed_at").eq("domain_id",r);D||u(B||[])}const{data:F,error:O}=await L.from("learning_goals").select("id, concept_id, goal_description, bloom_level, goal_type, sequence_order, status, created_at, metadata_json, created_by, updated_by, updated_at, review_status, reviewed_by, reviewed_at").eq("concept_id",t).order("created_at",{ascending:!1});O||m(F||[]);const{data:U,error:M}=await L.from("concept_relationships").select("id, domain_id, concept_a_id, concept_b_id, relationship_type, relationship_kind, metadata, created_at, status, source, created_by, updated_at").or(`concept_a_id.eq.${t},concept_b_id.eq.${t}`);M||v(U||[])})()},[t,r,a]),f.useMemo(()=>d.filter(N=>N.id!==t),[d,t]);const w=N=>{var k;const j=N.concept_a_id===t?N.concept_b_id:N.concept_a_id;return((k=d.find(T=>T.id===j))==null?void 0:k.name)||j},C=async(N,j)=>{const{error:k}=await L.from("concepts").update(j).eq("id",N);if(k){a({title:"Failed to update concept",description:k.message,variant:"destructive"});return}o(T=>T&&{...T,...j}),a({title:"Concept updated successfully"})},_=async(N,j)=>{const{error:k}=await L.from("concepts").update({parent_concept_id:j||null}).eq("id",N);if(k){a({title:"Failed to change parent",description:k.message,variant:"destructive"});return}if(r){const{data:T,error:A}=await L.from("concepts").select("id,name,description,parent_concept_id,domain_id,status,difficulty_level,generation_source,source,source_file_id,created_at,updated_at,display_order,metadata,created_by,updated_by,reviewed_by,reviewed_at").eq("domain_id",r);A||u(T||[])}a({title:"Parent relationship updated"})},S=N=>{n(`/admin/domain/${e}/concepts/${N}`)};return i?(h.filter(N=>N.status==="approved"),h.filter(N=>N.status==="suggested"),p.filter(N=>{const j=w(N).toLowerCase(),k=N.relationship_type.toLowerCase(),T=g.toLowerCase();return!T||j.includes(T)||k.includes(T)}),s.jsxs(Ma,{children:[s.jsx(va,{}),s.jsx(Poe,{concept:i,concepts:d,onBack:()=>n(-1),onUpdateConcept:C,onChangeParent:_,onNavigateToConcept:S})]})):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h1",{className:"text-xl font-semibold",children:"Loading…"})})})}const Ioe=()=>{const[e,t]=f.useState([]),[n,r]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(null),[u,h]=f.useState(""),[m,p]=f.useState(""),[v,x]=f.useState([]),[y,g]=f.useState(!1),b=["read","write","create","update","delete","admin"];f.useEffect(()=>{w()},[]);const w=async()=>{try{l(!0),d(null);const{data:N,error:j}=await L.from("user_roles").select("*").order("name");if(j)throw j;const{data:k,error:T}=await L.from("resources").select("*").order("category",{ascending:!0}).order("key",{ascending:!0});if(T)throw T;const{data:A,error:R}=await L.from("permission_details").select("*").order("role_name",{ascending:!0}).order("resource_key",{ascending:!0});if(R)throw R;t(N||[]),r(k||[]),i(A||[])}catch(N){console.error("Error loading permission data:",N),d(N instanceof Error?N.message:"Unknown error")}finally{l(!1)}},C=async()=>{if(!u||!m||v.length===0){d("Please select role, resource, and at least one action");return}try{const N=e.find(k=>k.id===u);if(!N)return;const{error:j}=await L.rpc("grant_permission",{p_role_name:N.name,p_resource_key:m,p_actions:v});if(j)throw j;await w(),h(""),p(""),x([]),g(!1),d(null)}catch(N){console.error("Error adding permission:",N),d(N instanceof Error?N.message:"Failed to add permission")}},_=async(N,j)=>{try{const k=e.find(A=>A.id===N);if(!k)return;const{error:T}=await L.rpc("revoke_permission",{p_role_name:k.name,p_resource_key:j});if(T)throw T;await w(),d(null)}catch(k){console.error("Error removing permission:",k),d(k instanceof Error?k.message:"Failed to remove permission")}},S=N=>{x(j=>j.includes(N)?j.filter(k=>k!==N):[...j,N])};return o?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.jsx(gd,{resource:"page:permission_management",action:"admin",fallback:s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:"You need platform admin privileges to manage permissions."})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Permission Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage roles, resources, and permissions for your application"})]}),s.jsxs(nn,{open:y,onOpenChange:g,children:[s.jsx(kh,{asChild:!0,children:s.jsxs(z,{children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Permission"]})}),s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsx(Qt,{children:s.jsx(Yt,{children:"Add New Permission"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Role"}),s.jsxs(Ve,{value:u,onValueChange:h,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select role"})}),s.jsx(Ue,{children:e.map(N=>s.jsx(le,{value:N.id,children:N.display_name},N.id))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Resource"}),s.jsxs(Ve,{value:m,onValueChange:p,children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select resource"})}),s.jsx(Ue,{children:n.map(N=>s.jsx(le,{value:N.key,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"outline",children:N.kind}),N.key]})},N.id))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Actions"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(N=>s.jsx(z,{variant:v.includes(N)?"default":"outline",size:"sm",onClick:()=>S(N),children:N},N))})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),s.jsx(z,{onClick:C,children:"Add Permission"})]})]})]})]})]}),c&&s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:c})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Roles"}),s.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(W,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Resources"}),s.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(W,{children:s.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Permissions"}),s.jsx(sn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(W,{children:s.jsx("div",{className:"text-2xl font-bold",children:a.length})})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Current Permissions"})}),s.jsxs(W,{children:[s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"Role"}),s.jsx(Ee,{children:"Resource"}),s.jsx(Ee,{children:"Actions"}),s.jsx(Ee,{children:"Expires"}),s.jsx(Ee,{children:"Actions"})]})}),s.jsx(Qs,{children:a.map(N=>s.jsxs(ut,{children:[s.jsx(be,{children:s.jsx("div",{children:s.jsx("div",{className:"font-medium",children:N.role_name})})}),s.jsx(be,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:N.resource_key}),s.jsx("div",{className:"text-sm text-gray-500",children:N.resource_description})]})}),s.jsx(be,{children:s.jsx("div",{className:"flex flex-wrap gap-1",children:N.actions.map(j=>s.jsx(X,{variant:"secondary",className:"text-xs",children:j},j))})}),s.jsx(be,{children:N.expires_at?s.jsx(X,{variant:"outline",children:new Date(N.expires_at).toLocaleDateString()}):s.jsx(X,{variant:"secondary",children:"Never"})}),s.jsx(be,{children:s.jsx(z,{variant:"destructive",size:"sm",onClick:()=>_(N.role_id,N.resource_key),children:s.jsx(Ts,{className:"h-4 w-4"})})})]},`${N.role_id}-${N.resource_key}`))})]}),a.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No permissions configured yet. Add some permissions to get started."})]})]})]})})},u2=()=>{const[e,t]=f.useState([]),[n,r]=f.useState([]),[a,i]=f.useState({}),[o,l]=f.useState(!0),[c,d]=f.useState(null),[u,h]=f.useState("pages"),[m,p]=f.useState("all"),[v,x]=f.useState("all"),[y,g]=f.useState(!1),[b,w]=f.useState(""),[C,_]=f.useState("page"),[S,N]=f.useState(""),[j,k]=f.useState("content"),T=["read","write","create","update","delete","admin"],A=["page","api","feature","entity"],R=["dashboard","content","users","system","api","feature"],F=n.filter(E=>{const I=m==="all"||E.kind===m,q=v==="all"||E.category===v;return I&&q}),O=[...new Set(n.map(E=>E.category))].sort();[{section:"Dashboard",icon:Hi,pages:n.filter(E=>E.kind==="page"&&E.key.includes("dashboard"))},{section:"Admin & Management",icon:sn,pages:n.filter(E=>E.kind==="page"&&(E.key.includes("tenant")||E.key.includes("teacher")||E.key.includes("student")||E.key.includes("class")||E.key.includes("access")))},{section:"Domain Management",icon:rt,pages:n.filter(E=>E.kind==="page"&&(E.key.includes("domain")||E.key.includes("concept")||E.key.includes("goal")||E.key.includes("ai-guidance")||E.key.includes("example")))},{section:"System",icon:kt,pages:n.filter(E=>E.kind==="page"&&(E.key.includes("rbac")||E.key.includes("upload")||E.key.includes("setting")||E.key.includes("feedback")))},{section:"Authentication",icon:et,pages:n.filter(E=>E.kind==="page"&&(E.key.includes("login")||E.key.includes("register")||E.key.includes("forgot")||E.key.includes("auth")||E.key.includes("invitation")))},{section:"Other Pages",icon:jw,pages:n.filter(E=>E.kind==="page"&&!E.key.includes("dashboard")&&!E.key.includes("tenant")&&!E.key.includes("teacher")&&!E.key.includes("student")&&!E.key.includes("class")&&!E.key.includes("access")&&!E.key.includes("domain")&&!E.key.includes("concept")&&!E.key.includes("goal")&&!E.key.includes("ai-guidance")&&!E.key.includes("example")&&!E.key.includes("rbac")&&!E.key.includes("upload")&&!E.key.includes("setting")&&!E.key.includes("feedback")&&!E.key.includes("login")&&!E.key.includes("register")&&!E.key.includes("forgot")&&!E.key.includes("auth")&&!E.key.includes("invitation"))}].filter(E=>E.pages.length>0);const U=f.useMemo(()=>{const E=["platform_admin","tenant_admin","teacher","student"];return e.sort((I,q)=>{const $=E.indexOf(I.name),P=E.indexOf(q.name);return($===-1?E.length:$)-(P===-1?E.length:P)})},[e]);f.useEffect(()=>{M()},[]);const M=async()=>{try{l(!0),d(null);const{data:E,error:I}=await L.from("user_roles").select("*").order("name");if(I)throw I;const{data:q,error:$}=await L.from("resources").select("*").eq("is_active",!0).order("category",{ascending:!0}).order("key",{ascending:!0});if($)throw $;const{data:P,error:Z}=await L.from("role_permissions").select("role_id, resource_id, actions");if(Z)throw Z;const ee={};E==null||E.forEach(J=>{ee[J.id]={},q==null||q.forEach(te=>{ee[J.id][te.id]=[]})}),P==null||P.forEach(J=>{ee[J.role_id]&&ee[J.role_id][J.resource_id]&&(ee[J.role_id][J.resource_id]=J.actions||[])}),t(E||[]),r(q||[]),i(ee)}catch(E){console.error("Error loading RBAC data:",E),d(E instanceof Error?E.message:"Unknown error")}finally{l(!1)}},B=async(E,I,q)=>{var $;try{const P=(($=a[E])==null?void 0:$[I])||[],Z=P.includes(q),ee=e.find(te=>te.id===E),J=n.find(te=>te.id===I);if(!ee||!J)return;if(Z){const te=P.filter(ie=>ie!==q);te.length===0?await L.rpc("revoke_permission",{p_role_name:ee.name,p_resource_key:J.key}):await L.rpc("grant_permission",{p_role_name:ee.name,p_resource_key:J.key,p_actions:te})}else{const te=[...P,q];await L.rpc("grant_permission",{p_role_name:ee.name,p_resource_key:J.key,p_actions:te})}i(te=>({...te,[E]:{...te[E],[I]:Z?P.filter(ie=>ie!==q):[...P,q]}}))}catch(P){console.error("Error toggling permission:",P),d(P instanceof Error?P.message:"Failed to update permission")}},D=async()=>{if(!b||!S){d("Resource key and description are required");return}try{const{error:E}=await L.from("resources").insert({key:b,kind:C,description:S,category:j,is_active:!0});if(E)throw E;w(""),N(""),_("page"),k("content"),g(!1),await M(),d(null)}catch(E){console.error("Error adding resource:",E),d(E instanceof Error?E.message:"Failed to add resource")}};return o?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.jsx(gd,{resource:"page:permission_management",action:"admin",fallback:s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:"You need platform admin privileges to manage RBAC permissions."})]}),children:s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"RBAC Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive role-based access control administration"})]}),c&&s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(Ut,{children:c})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"System Roles"}),s.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.filter(E=>E.is_system).length," system roles"]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Protected Resources"}),s.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Set(n.map(E=>E.category)).size," categories"]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Permissions"}),s.jsx(sn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Object.values(a).reduce((E,I)=>E+Object.values(I).reduce((q,$)=>q+$.length,0),0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all roles and resources"})]})]})]}),s.jsxs(Qr,{value:u,onValueChange:h,children:[s.jsxs(wr,{children:[s.jsxs(Je,{value:"pages",children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Pages"]}),s.jsxs(Je,{value:"features",children:[s.jsx(yS,{className:"h-4 w-4 mr-2"}),"Features"]}),s.jsxs(Je,{value:"matrix",children:[s.jsx(R$,{className:"h-4 w-4 mr-2"}),"Permission Matrix"]}),s.jsxs(Je,{value:"resources",children:[s.jsx(kt,{className:"h-4 w-4 mr-2"}),"Manage Resources"]}),s.jsxs(Je,{value:"debug",children:[s.jsx(xS,{className:"h-4 w-4 mr-2"}),"Debug Tools"]})]}),s.jsx(Ze,{value:"pages",className:"space-y-6",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Y,{children:[s.jsx(Es,{className:"h-4 w-4 inline mr-2"}),"Page Permissions"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage CRUD permissions for all pages with canonical names and URLs"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.filter(E=>E.kind==="page").length," pages total"]})]})}),s.jsx(W,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{className:"font-semibold",children:"Page Name"}),s.jsx(Ee,{className:"font-semibold",children:"URL"}),s.jsx(Ee,{className:"font-semibold",children:"Description"}),s.jsx(Ee,{className:"font-semibold",children:"Category"}),U.map(E=>s.jsx(Ee,{className:"text-center font-semibold",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm",children:E.display_name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:E.name})]})},E.id))]})}),s.jsx(Qs,{children:n.filter(E=>E.kind==="page").map(E=>{const q=($=>{const P=$.replace("page:",""),Z={admin_dashboard:{name:"Platform Admin Dashboard",url:"/admin/dashboard"},tenant_dashboard:{name:"Tenant Dashboard",url:"/tenant/dashboard"},teacher_dashboard:{name:"Teacher Dashboard",url:"/teacher/dashboard"},domain_selection:{name:"Domain Selection",url:"/teacher/domain-selection"},curriculum_setup:{name:"Curriculum Setup",url:"/teacher/settings/curriculum-setup"},class_creation:{name:"Class Creation",url:"/teacher/classes/create"},administration:{name:"Administration",url:"/teacher/administration"},domain_management:{name:"Domain Management",url:"/teacher/administration/domains"},learning_goals:{name:"Learning Goals",url:"/teacher/administration/learning-goals"},domains_dashboard:{name:"Domains Dashboard",url:"/admin/domains/dashboard"},domain_admin:{name:"Domain Admin",url:"/admin/domains/:slug"},domain_concepts:{name:"Domain Concepts",url:"/admin/domains/:slug/concepts"},concept_detail:{name:"Concept Detail",url:"/admin/domains/:slug/concepts/:id"},domain_goals:{name:"Domain Goals",url:"/admin/domains/:slug/goals"},ai_guidance:{name:"AI Guidance",url:"/admin/domains/:slug/ai-guidance"},guidance_editor:{name:"Guidance Editor",url:"/admin/domains/:slug/ai-guidance/:area"},add_examples:{name:"Add Examples",url:"/admin/domains/:slug/ai-guidance/:area/examples/new"},clients:{name:"Clients",url:"/admin/clients"},permissions:{name:"Permissions",url:"/admin/permissions"},upload:{name:"Upload",url:"/admin/upload"},page_permissions:{name:"Page Permissions",url:"/admin/page-permissions"},ai_training:{name:"AI Training",url:"/admin/ai-training"},feedback_settings:{name:"Feedback Settings",url:"/admin/settings/feedback"},rbac_permissions:{name:"RBAC Permissions",url:"/admin/rbac-permissions"},rbac_management:{name:"RBAC Management",url:"/admin/rbac-management"},access_management:{name:"Access Management",url:"/admin/access-management"},tenant_management:{name:"Tenant Management",url:"/admin/tenants"},create_tenant:{name:"Create Tenant",url:"/admin/tenants/create"},edit_tenant:{name:"Edit Tenant",url:"/admin/tenants/:id/edit"},tenant_detail:{name:"Tenant Detail",url:"/admin/tenants/:id"}};if(Z[P])return Z[P];const ee=P.replace(/_/g," ").replace(/\b\w/g,te=>te.toUpperCase()),J=`/${P.replace(/_/g,"/")}`;return{name:ee,url:J}})(E.key);return s.jsxs(ut,{className:"hover:bg-gray-50",children:[s.jsx(be,{className:"font-medium",children:q.name}),s.jsx(be,{className:"font-mono text-sm text-blue-600",children:q.url}),s.jsx(be,{className:"text-sm text-muted-foreground",children:E.description||"No description available"}),s.jsx(be,{children:s.jsx(X,{variant:"secondary",className:"text-xs",children:E.category})}),U.map($=>s.jsx(be,{className:"text-center px-2",children:s.jsx("div",{className:"inline-grid grid-cols-2 gap-0.5 mx-auto",children:["create","read","update","delete"].map(P=>{var ee,J;const Z=(J=(ee=a[$.id])==null?void 0:ee[E.id])==null?void 0:J.includes(P);return s.jsx(X,{variant:Z?"default":"outline",className:`cursor-pointer text-xs transition-colors w-6 h-6 flex items-center justify-center rounded-full ${Z?"bg-green-500 hover:bg-green-600 text-white":"hover:bg-gray-200"}`,onClick:()=>B($.id,E.id,P),children:P.charAt(0).toUpperCase()},P)})})},`${$.id}-${E.id}`))]},E.id)})})]})})})]})}),s.jsx(Ze,{value:"features",className:"space-y-4",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsxs(Y,{children:[s.jsx(yS,{className:"h-4 w-4 inline mr-2"}),"Feature Permissions"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Control access to specific features and functionality"})]})})}),s.jsx(W,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{className:"min-w-[200px]",children:"Feature"}),U.map(E=>s.jsx(Ee,{className:"text-center min-w-[150px]",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:E.display_name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:E.name})]})},E.id))]})}),s.jsx(Qs,{children:n.filter(E=>E.kind==="feature").map(E=>s.jsxs(ut,{children:[s.jsx(be,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:E.key.replace("feature:","")}),s.jsx("div",{className:"text-sm text-muted-foreground",children:E.description}),s.jsx("div",{className:"flex gap-1 mt-1",children:s.jsx(X,{variant:"secondary",className:"text-xs",children:E.category})})]})}),U.map(I=>s.jsx(be,{className:"text-center",children:s.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:["read","write","create","update","delete"].map(q=>{var P,Z;const $=(Z=(P=a[I.id])==null?void 0:P[E.id])==null?void 0:Z.includes(q);return s.jsx(X,{variant:$?"default":"outline",className:`cursor-pointer text-xs ${$?"bg-green-500 hover:bg-green-600":"hover:bg-gray-200"}`,onClick:()=>B(I.id,E.id,q),children:q},q)})})},`${I.id}-${E.id}`))]},E.id))})]})})})]})}),s.jsx(Ze,{value:"matrix",className:"space-y-4",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Y,{children:"Permission Matrix"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle permissions for each role and resource combination. Click action badges to grant/revoke permissions."})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{htmlFor:"resource-filter",className:"text-sm font-medium",children:"Kind:"}),s.jsxs(Ve,{value:m,onValueChange:p,children:[s.jsx(ze,{className:"w-32",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All"}),A.map(E=>s.jsx(le,{value:E,children:E},E))]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{htmlFor:"category-filter",className:"text-sm font-medium",children:"Category:"}),s.jsxs(Ve,{value:v,onValueChange:x,children:[s.jsx(ze,{className:"w-32",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All"}),O.map(E=>s.jsx(le,{value:E,children:E},E))]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",F.length," of ",n.length," resources"]})]})]})}),s.jsx(W,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{className:"min-w-[200px]",children:"Resource"}),U.map(E=>s.jsx(Ee,{className:"text-center min-w-[150px]",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:E.display_name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:E.name})]})},E.id))]})}),s.jsx(Qs,{children:F.map(E=>s.jsxs(ut,{children:[s.jsx(be,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:E.key}),s.jsx("div",{className:"text-sm text-muted-foreground",children:E.description}),s.jsxs("div",{className:"flex gap-1 mt-1",children:[s.jsx(X,{variant:"outline",className:"text-xs",children:E.kind}),s.jsx(X,{variant:"secondary",className:"text-xs",children:E.category})]})]})}),U.map(I=>s.jsx(be,{className:"text-center",children:s.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:T.map(q=>{var P,Z;const $=(Z=(P=a[I.id])==null?void 0:P[E.id])==null?void 0:Z.includes(q);return s.jsx(X,{variant:$?"default":"outline",className:`cursor-pointer text-xs ${$?"bg-green-500 hover:bg-green-600":"hover:bg-gray-200"}`,onClick:()=>B(I.id,E.id,q),children:q},q)})})},`${I.id}-${E.id}`))]},E.id))})]})})})]})}),s.jsx(Ze,{value:"resources",className:"space-y-4",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Y,{children:"Resource Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add new resources to the permission system"})]}),s.jsxs(nn,{open:y,onOpenChange:g,children:[s.jsx(kh,{asChild:!0,children:s.jsxs(z,{children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add Resource"]})}),s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsx(Qt,{children:s.jsx(Yt,{children:"Add New Resource"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"resource-key",children:"Resource Key"}),s.jsx(pe,{id:"resource-key",placeholder:"e.g., page:new_feature, api:new_endpoint",value:b,onChange:E=>w(E.target.value)})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"resource-kind",children:"Kind"}),s.jsxs(Ve,{value:C,onValueChange:_,children:[s.jsx(ze,{children:s.jsx(qe,{})}),s.jsx(Ue,{children:A.map(E=>s.jsx(le,{value:E,children:E},E))})]})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"resource-category",children:"Category"}),s.jsxs(Ve,{value:j,onValueChange:k,children:[s.jsx(ze,{children:s.jsx(qe,{})}),s.jsx(Ue,{children:R.map(E=>s.jsx(le,{value:E,children:E},E))})]})]}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"resource-description",children:"Description"}),s.jsx(pe,{id:"resource-description",placeholder:"Describe what this resource protects",value:S,onChange:E=>N(E.target.value)})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),s.jsx(z,{onClick:D,children:"Add Resource"})]})]})]})]})]})}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"text-sm font-medium",children:"Kind:"}),s.jsxs(Ve,{value:m,onValueChange:p,children:[s.jsx(ze,{className:"w-32",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All"}),A.map(E=>s.jsx(le,{value:E,children:E},E))]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"text-sm font-medium",children:"Category:"}),s.jsxs(Ve,{value:v,onValueChange:x,children:[s.jsx(ze,{className:"w-32",children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All"}),O.map(E=>s.jsx(le,{value:E,children:E},E))]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[F.length," resources"]})]}),O.map(E=>{const I=F.filter(q=>q.category===E);return I.length===0?null:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold capitalize mb-2",children:E}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:I.map(q=>s.jsx(V,{className:"p-3",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium text-sm",children:q.key}),s.jsx("div",{className:"text-xs text-muted-foreground",children:q.description}),s.jsx(X,{variant:"outline",className:"text-xs",children:q.kind})]})},q.id))})]},E)})]})})]})}),s.jsx(Ze,{value:"debug",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{children:[s.jsx(xS,{className:"h-4 w-4 inline mr-2"}),"Permission Debug Tools"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"View current user permissions and debug RBAC issues"})]}),s.jsx(W,{children:s.jsx(LX,{})})]})})]})]})})},Ke=({children:e})=>{var d,u;const t=br(),{session:n,authState:r,isPlatformAdmin:a,isTenantAdmin:i,isTeacher:o,enrichmentLoading:l}=dn();if(r==="authenticating")return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[s.jsx(Pe,{className:"h-8 w-full"}),s.jsx(Pe,{className:"h-4 w-3/4"}),s.jsx(Pe,{className:"h-4 w-1/2"})]})});if(r==="unauthenticated")return s.jsx(Os,{to:"/login",replace:!0,state:{from:t}});if(!l&&!a&&(!(n!=null&&n.tenants)||n.tenants.length===0)&&t.pathname!=="/no-access")return s.jsx(Os,{to:"/no-access",replace:!0});const c=t.pathname;if(c==="/admin/dashboard"){if(l)return console.log("🔐 RouteProtection: Admin dashboard - waiting for enrichment"),s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[s.jsx(Pe,{className:"h-8 w-full"}),s.jsx(Pe,{className:"h-4 w-3/4"}),s.jsx(Pe,{className:"h-4 w-1/2"})]})});if(!a)return i?s.jsx(Os,{to:"/tenant/dashboard",replace:!0}):o?s.jsx(Os,{to:"/teacher/dashboard",replace:!0}):s.jsx(Os,{to:"/unauthorized",replace:!0})}if(c==="/teacher/dashboard"){if(l)return console.log("🔐 RouteProtection: Teacher dashboard - waiting for enrichment"),s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[s.jsx(Pe,{className:"h-8 w-full"}),s.jsx(Pe,{className:"h-4 w-3/4"}),s.jsx(Pe,{className:"h-4 w-1/2"})]})});if(!a&&!i&&!o)return s.jsx(Os,{to:"/unauthorized",replace:!0})}if(c==="/tenant/dashboard"){if(l)return console.log("🔐 RouteProtection: Tenant dashboard - waiting for enrichment"),s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[s.jsx(Pe,{className:"h-8 w-full"}),s.jsx(Pe,{className:"h-4 w-3/4"}),s.jsx(Pe,{className:"h-4 w-1/2"})]})});if(console.log("🔐 RouteProtection: Tenant dashboard check:",{isPlatformAdmin:a,isTenantAdmin:i,isTeacher:o,email:n==null?void 0:n.email,role:(u=(d=n==null?void 0:n.current_tenant)==null?void 0:d.role)==null?void 0:u.name}),!a&&!i)return o?s.jsx(Os,{to:"/teacher/dashboard",replace:!0}):s.jsx(Os,{to:"/unauthorized",replace:!0})}return s.jsx(s.Fragment,{children:e})},Doe=()=>{const e=pt();return f.useEffect(()=>{e("/login",{replace:!0})},[e]),null},Roe=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(""),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(""),u=pt(),{session:h,authState:m}=dn();f.useEffect(()=>{if(m==="authenticated"&&h){const v=Uo(h);u(v,{replace:!0})}},[m,h,u]);const p=async v=>{v.preventDefault(),l(!0),d("");try{const{data:x,error:y}=await L.auth.signInWithPassword({email:e.trim(),password:n});if(y)throw y;if(x.user&&x.session){console.log("Login successful:",x.user.email);const g=Uo(x.session);u(g,{replace:!0});return}}catch(x){console.error("Login error:",x),d((x==null?void 0:x.message)||"Invalid email or password. Please try again."),l(!1)}};return m==="authenticated"&&h?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Redirecting to dashboard..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(is,{to:"/welcome",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[s.jsx(An,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(G,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(At,{className:"w-6 h-6 text-blue-600"})}),s.jsx(Y,{className:"text-2xl font-bold text-gray-900",children:"Welcome back"}),s.jsx(we,{className:"text-gray-600",children:"Sign in to your account to continue"})]}),s.jsxs(W,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:v=>t(v.target.value),className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:n,onChange:v=>r(v.target.value),className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?s.jsx($i,{className:"w-4 h-4"}):s.jsx(fr,{className:"w-4 h-4"})})]})]}),c&&s.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:c}),s.jsx("div",{className:"text-right",children:s.jsx(is,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:"Forgot your password?"})}),s.jsx(z,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:o||m==="authenticating",children:o?"Signing in...":"Sign in"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),s.jsx("div",{className:"text-center",children:s.jsx(is,{to:"/register",children:s.jsx(z,{variant:"outline",className:"w-full h-11 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Create new account"})})})]})]})]})})},Moe=()=>{const[e,t]=f.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,r]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(""),[u,h]=f.useState(!1),m=pt(),p=y=>{t({...e,[y.target.name]:y.target.value}),d("")},v=()=>e.password!==e.confirmPassword?(d("Passwords do not match"),!1):e.password.length<8?(d("Password must be at least 8 characters long"),!1):!e.firstName.trim()||!e.lastName.trim()?(d("First name and last name are required"),!1):!0,x=async y=>{if(y.preventDefault(),!!v()){l(!0),d("");try{console.log("Registration attempt:",e),await new Promise(g=>setTimeout(g,1500)),h(!0),setTimeout(()=>{m("/login")},2e3)}catch{d("Registration failed. Please try again.")}finally{l(!1)}}};return u?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(ln,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account created successfully!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You can now sign in with your new account."}),s.jsx("div",{className:"animate-pulse text-sm text-gray-500",children:"Redirecting to login page..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(is,{to:"/welcome",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[s.jsx(An,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(G,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx($c,{className:"w-6 h-6 text-blue-600"})}),s.jsx(Y,{className:"text-2xl font-bold text-gray-900",children:"Create your account"}),s.jsx(we,{className:"text-gray-600",children:"Join us and start your learning journey"})]}),s.jsxs(W,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700",children:"First name"}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"firstName",name:"firstName",type:"text",placeholder:"First name",value:e.firstName,onChange:p,className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700",children:"Last name"}),s.jsx(pe,{id:"lastName",name:"lastName",type:"text",placeholder:"Last name",value:e.lastName,onChange:p,className:"h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:p,className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"password",name:"password",type:n?"text":"password",placeholder:"Create a password",value:e.password,onChange:p,className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?s.jsx($i,{className:"w-4 h-4"}):s.jsx(fr,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirm password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",placeholder:"Confirm your password",value:e.confirmPassword,onChange:p,className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?s.jsx($i,{className:"w-4 h-4"}):s.jsx(fr,{className:"w-4 h-4"})})]})]}),c&&s.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:c}),s.jsx(z,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:o,children:o?"Creating account...":"Create account"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),s.jsx("div",{className:"text-center",children:s.jsx(is,{to:"/login",children:s.jsx(z,{variant:"outline",className:"w-full h-11 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Sign in instead"})})})]})]})]})})},Loe=()=>{const[e,t]=f.useState(""),[n,r]=f.useState(!1),[a,i]=f.useState(""),[o,l]=f.useState(!1),c=async d=>{d.preventDefault(),r(!0),i("");try{console.log("Password reset requested for:",e),await new Promise(u=>setTimeout(u,1500)),l(!0)}catch{i("Failed to send reset email. Please try again.")}finally{r(!1)}};return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(ln,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check your email"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",s.jsx("strong",{children:e})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or try again."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(z,{onClick:()=>l(!1),variant:"outline",className:"flex-1",children:"Try another email"}),s.jsx(is,{to:"/login",children:s.jsx(z,{className:"flex-1",children:"Back to login"})})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(is,{to:"/login",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[s.jsx(An,{className:"w-4 h-4 mr-2"}),"Back to login"]}),s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(G,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(At,{className:"w-6 h-6 text-blue-600"})}),s.jsx(Y,{className:"text-2xl font-bold text-gray-900",children:"Forgot your password?"}),s.jsx(we,{className:"text-gray-600",children:"No worries! Enter your email and we'll send you reset instructions."})]}),s.jsxs(W,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:d=>t(d.target.value),className:"pl-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),a&&s.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:a}),s.jsx(z,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:n,children:n?"Sending...":"Send reset instructions"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Remember your password?"})})]}),s.jsx("div",{className:"text-center",children:s.jsx(is,{to:"/login",children:s.jsx(z,{variant:"outline",className:"w-full h-11 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Back to login"})})}),s.jsxs("div",{className:"text-center text-sm text-gray-500",children:[s.jsx("p",{children:"Need help? Contact our support team"}),s.jsx(is,{to:"/support",className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Get support"})]})]})]})]})})},So=class So{constructor(){}static getInstance(){return So.instance||(So.instance=new So),So.instance}async sendEmail(t){try{const n=Qe.getCurrentTenantId();if(!n)throw new Error("No tenant context");const{data:{session:r}}=await L.auth.getSession();if(!(r!=null&&r.access_token))throw new Error("No authentication session found");const a=Array.isArray(t.to)?t.to:[t.to],i=[];for(const l of a){const{data:c,error:d}=await L.functions.invoke("send-email",{body:{to:l,subject:t.subject,html:t.html,text:t.text,from:t.from,fromName:t.fromName,replyTo:t.replyTo,tenantId:n,templateType:t.templateType,templateVariables:t.templateVariables,priority:t.priority},headers:{Authorization:`Bearer ${r.access_token}`}});d?(console.error("Error sending email:",d),i.push({success:!1,error:d.message})):i.push({success:!0,messageId:c==null?void 0:c.messageId})}if(a.length===1)return i[0];const o=i.filter(l=>l.success).length;return{success:o>0,messageId:`Sent ${o}/${a.length} emails`}}catch(n){return console.error("Error in sendEmail:",n),{success:!1,error:n.message||"Failed to send email"}}}async queueEmailForTenant(t,n){var r;try{console.log("🔍 [QA-EMAIL] Starting queueEmailForTenant with request:",{tenantId:t,templateType:n.templateType,to:n.to,priority:n.priority,relatedEntityType:n.relatedEntityType,relatedEntityId:n.relatedEntityId,templateVariablesKeys:Object.keys(n.templateVariables||{})}),console.log("🔍 [QA-EMAIL] Calling supabase.rpc queue_email with explicit tenant ID...");const{data:a,error:i}=await L.rpc("queue_email",{p_tenant_id:t,p_template_type:n.templateType,p_to_email:n.to,p_template_variables:n.templateVariables||{},p_priority:n.priority||"normal",p_scheduled_for:((r=n.scheduledFor)==null?void 0:r.toISOString())||null,p_related_entity_type:n.relatedEntityType||null,p_related_entity_id:n.relatedEntityId||null});if(console.log("🔍 [QA-EMAIL] RPC queue_email response:",{data:a,error:i}),i)throw console.error("❌ [QA-EMAIL] Error queueing email for tenant:",i),i;return console.log("✅ [QA-EMAIL] Email queued successfully for tenant, queue ID:",a),a}catch(a){throw console.error("❌ [QA-EMAIL] Error in queueEmailForTenant:",{error:a,errorMessage:a==null?void 0:a.message,errorCode:a==null?void 0:a.code,errorDetails:a==null?void 0:a.details,tenantId:t}),a}}async queueEmail(t){var n;try{console.log("🔍 [QA-EMAIL] Starting queueEmail with request:",{templateType:t.templateType,to:t.to,priority:t.priority,relatedEntityType:t.relatedEntityType,relatedEntityId:t.relatedEntityId,templateVariablesKeys:Object.keys(t.templateVariables||{})});const r=Qe.getCurrentTenantId();if(console.log("🔍 [QA-EMAIL] Current tenant ID:",r),!r)throw new Error("No tenant context");console.log("🔍 [QA-EMAIL] Calling supabase.rpc queue_email...");const{data:a,error:i}=await L.rpc("queue_email",{p_tenant_id:r,p_template_type:t.templateType,p_to_email:t.to,p_template_variables:t.templateVariables||{},p_priority:t.priority||"normal",p_scheduled_for:((n=t.scheduledFor)==null?void 0:n.toISOString())||null,p_related_entity_type:t.relatedEntityType||null,p_related_entity_id:t.relatedEntityId||null});if(console.log("🔍 [QA-EMAIL] RPC queue_email response:",{data:a,error:i}),i)throw console.error("❌ [QA-EMAIL] Error queueing email:",i),i;return console.log("✅ [QA-EMAIL] Email queued successfully, queue ID:",a),a}catch(r){throw console.error("❌ [QA-EMAIL] Error in queueEmail:",{error:r,errorMessage:r==null?void 0:r.message,errorCode:r==null?void 0:r.code,errorDetails:r==null?void 0:r.details}),r}}async sendTeacherInvitation(t,n,r,a){try{const i=await this.queueEmail({templateType:"teacher_invitation",to:t,templateVariables:{invite_link:n,inviter_name:r,tenant_name:a,expires_at:new Date(Date.now()+6048e5).toLocaleDateString()},priority:"high"});return i&&await this.processQueueItem(i),{success:!0,queueId:i||void 0}}catch(i){return console.error("Error sending teacher invitation:",i),{success:!1}}}async sendTenantAdminInvitation(t,n,r,a,i){try{const o=typeof window<"u"?window.location.origin:"https://gemeos.ai",l=`${o}/auth/signup?tenant=${a}&role=tenant_admin&email=${encodeURIComponent(t)}`,c=await this.queueEmailForTenant(n,{templateType:"tenant_admin_invitation",to:t,templateVariables:{invite_link:l,tenant_name:r,tenant_slug:a,tenant_id:n,inviter_name:i||"Platform Administrator",expires_at:new Date(Date.now()+7*24*60*60*1e3).toLocaleDateString(),support_email:"support@gemeos.ai",login_url:`${o}/auth/signin`},priority:"high",relatedEntityType:"tenant",relatedEntityId:n});return c&&await this.processQueueItemForTenant(c,n),console.log("✅ [QA-EMAIL] Tenant admin invitation queued and sent:",{email:t,tenantName:r,tenantSlug:a,queueId:c,inviteLink:l}),{success:!0,queueId:c||void 0}}catch(o){return console.error("❌ [QA-EMAIL] Error sending tenant admin invitation:",{error:o,errorMessage:(o==null?void 0:o.message)||"Unknown error",errorStack:o==null?void 0:o.stack,email:t,tenantId:n,tenantName:r,tenantSlug:a}),{success:!1,error:(o==null?void 0:o.message)||"Unknown error"}}}async sendPasswordReset(t,n,r){try{const a=await this.queueEmail({templateType:"password_reset",to:t,templateVariables:{reset_link:n,user_name:r||t},priority:"critical"});return a&&await this.processQueueItem(a),{success:!0,queueId:a||void 0}}catch(a){return console.error("Error sending password reset:",a),{success:!1}}}async sendWelcomeEmail(t,n,r){try{return{success:!0,queueId:await this.queueEmail({templateType:"welcome",to:t,templateVariables:{user_name:n,tenant_name:r,login_link:`${window.location.origin}/auth`},priority:"normal"})||void 0}}catch(a){return console.error("Error sending welcome email:",a),{success:!1}}}async testDirectEmail(t){try{const{data:{session:n}}=await L.auth.getSession();if(!(n!=null&&n.access_token))throw new Error("No authentication session found");console.log("🔍 [QA-EMAIL] Testing direct email sending...");const{data:r,error:a}=await L.functions.invoke("send-email-direct",{body:{to:t,subject:"Test Email from Gemeos",html:"<h1>Test Email</h1><p>This is a test email to verify the email function works.</p>",text:"Test Email - This is a test email to verify the email function works.",from:"Gemeos <noreply@gemeos.ai>"},headers:{Authorization:`Bearer ${n.access_token}`}});if(console.log("🔍 [QA-EMAIL] Direct email response:",{data:r,error:a}),a)throw console.error("❌ [QA-EMAIL] Direct email failed:",a),a;console.log("✅ [QA-EMAIL] Direct email sent successfully")}catch(n){throw console.error("❌ [QA-EMAIL] Error in testDirectEmail:",n),n}}async processQueueItemForTenant(t,n){var r;console.log("🔍 [QA-EMAIL] Processing queue item for tenant:",{queueId:t,tenantId:n});try{const{data:{session:a}}=await L.auth.getSession();if(console.log("🔍 [QA-EMAIL] Session available:",!!a),console.log("🔍 [QA-EMAIL] Access token available:",!!(a!=null&&a.access_token)),console.log("🔍 [QA-EMAIL] Access token (first 20 chars):",(r=a==null?void 0:a.access_token)==null?void 0:r.substring(0,20)),!(a!=null&&a.access_token))throw console.error("❌ [QA-EMAIL] No authentication session found"),new Error("No authentication session found");const i={Authorization:`Bearer ${a.access_token}`};console.log("🔍 [QA-EMAIL] Sending request to send-email function with headers:",{hasAuthorization:!!i.Authorization,authHeaderPrefix:i.Authorization.substring(0,20)});const{data:o,error:l}=await L.functions.invoke("send-email",{body:{queueId:t,tenantId:n},headers:i});if(console.log("🔍 [QA-EMAIL] send-email function response:",{data:o,error:l}),l){if(console.error("❌ [QA-EMAIL] Error invoking send-email function:",{message:l.message,name:l.name,context:l.context,details:l.details||l,stack:l.stack}),l.context&&l.context.body)try{if(l.context.body instanceof ReadableStream){const c=l.context.body.getReader(),{value:d}=await c.read(),u=new TextDecoder().decode(d);console.error("❌ [QA-EMAIL] Function error body (stream):",u)}else console.error("❌ [QA-EMAIL] Function error body (direct):",l.context.body)}catch(c){console.error("❌ [QA-EMAIL] Could not read error stream:",c),console.error("❌ [QA-EMAIL] Function error body (fallback):",l.context)}throw l}console.log("✅ [QA-EMAIL] Queue item processed successfully")}catch(a){throw console.error("❌ [QA-EMAIL] Error in processQueueItemForTenant:",a),a}}async processQueueItem(t){const n=Qe.getCurrentTenantId();if(!n)return;const{data:{session:r}}=await L.auth.getSession();if(!(r!=null&&r.access_token))throw new Error("No authentication session found");await L.functions.invoke("send-email",{body:{queueId:t,tenantId:n},headers:{Authorization:`Bearer ${r.access_token}`}})}async getTemplates(){const t=Qe.getCurrentTenantId();if(!t)return[];const{data:n,error:r}=await L.from("email_templates").select("*").or(`tenant_id.eq.${t},tenant_id.is.null`).order("template_type",{ascending:!0});return r?(console.error("Error fetching templates:",r),[]):n||[]}async getTemplate(t){const n=Qe.getCurrentTenantId();if(!n)return null;const{data:r,error:a}=await L.from("email_templates").select("*").eq("template_type",t).or(`tenant_id.eq.${n},tenant_id.is.null`).single();return a?(console.error("Error fetching template:",a),null):r}async saveTemplate(t){const n=Qe.getCurrentTenantId();if(!n)return null;const r={...t,tenant_id:n};if(t.id){const{data:a,error:i}=await L.from("email_templates").update(r).eq("id",t.id).select().single();return i?(console.error("Error updating template:",i),null):a}else{const{data:a,error:i}=await L.from("email_templates").insert(r).select().single();return i?(console.error("Error creating template:",i),null):a}}async deleteTemplate(t){const{error:n}=await L.from("email_templates").delete().eq("id",t);return n?(console.error("Error deleting template:",n),!1):!0}async getQueueItems(t){const n=Qe.getCurrentTenantId();if(!n)return[];let r=L.from("email_queue").select("*").eq("tenant_id",(t==null?void 0:t.tenant_id)||n).order("created_at",{ascending:!1});t!=null&&t.status&&(Array.isArray(t.status)?r=r.in("status",t.status):r=r.eq("status",t.status)),t!=null&&t.priority&&(r=r.eq("priority",t.priority)),t!=null&&t.scheduled_before&&(r=r.lte("scheduled_for",t.scheduled_before.toISOString())),t!=null&&t.limit&&(r=r.limit(t.limit)),t!=null&&t.offset&&(r=r.range(t.offset,t.offset+(t.limit||10)-1));const{data:a,error:i}=await r;return i?(console.error("Error fetching queue items:",i),[]):a||[]}async cancelQueueItem(t){const{error:n}=await L.from("email_queue").update({status:"cancelled"}).eq("id",t).in("status",["pending","queued"]);return n?(console.error("Error cancelling queue item:",n),!1):!0}async retryQueueItem(t){const{error:n}=await L.from("email_queue").update({status:"pending",attempts:0,error_message:null,error_details:null}).eq("id",t).eq("status","failed");return n?(console.error("Error retrying queue item:",n),!1):(await this.processQueueItem(t),!0)}async getEmailLogs(t){const n=Qe.getCurrentTenantId();if(!n)return[];let r=L.from("email_logs").select("*").eq("tenant_id",(t==null?void 0:t.tenant_id)||n).order("created_at",{ascending:!1});t!=null&&t.status&&(r=r.eq("status",t.status)),t!=null&&t.template_type&&(r=r.eq("template_type",t.template_type)),t!=null&&t.to_email&&(r=r.eq("to_email",t.to_email)),t!=null&&t.start_date&&(r=r.gte("created_at",t.start_date.toISOString())),t!=null&&t.end_date&&(r=r.lte("created_at",t.end_date.toISOString())),t!=null&&t.limit&&(r=r.limit(t.limit)),t!=null&&t.offset&&(r=r.range(t.offset,t.offset+(t.limit||10)-1));const{data:a,error:i}=await r;return i?(console.error("Error fetching email logs:",i),[]):a||[]}async getEmailStats(t,n){const r=Qe.getCurrentTenantId();if(!r)return{total_sent:0,total_delivered:0,total_opened:0,total_clicked:0,total_bounced:0,total_failed:0,delivery_rate:0,open_rate:0,click_rate:0,bounce_rate:0};let a=L.from("email_logs").select("status, opened_at, clicked_at").eq("tenant_id",r);t&&(a=a.gte("created_at",t.toISOString())),n&&(a=a.lte("created_at",n.toISOString()));const{data:i,error:o}=await a;if(o)return console.error("Error fetching email stats:",o),{total_sent:0,total_delivered:0,total_opened:0,total_clicked:0,total_bounced:0,total_failed:0,delivery_rate:0,open_rate:0,click_rate:0,bounce_rate:0};const l=i||[],c=l.filter(v=>v.status==="sent").length,d=l.filter(v=>v.status==="delivered").length,u=l.filter(v=>v.opened_at).length,h=l.filter(v=>v.clicked_at).length,m=l.filter(v=>v.status==="bounced").length,p=l.filter(v=>v.status==="failed").length;return{total_sent:c,total_delivered:d,total_opened:u,total_clicked:h,total_bounced:m,total_failed:p,delivery_rate:c>0?d/c*100:0,open_rate:d>0?u/d*100:0,click_rate:u>0?h/u*100:0,bounce_rate:c>0?m/c*100:0}}async getBlacklistedEmails(){const t=Qe.getCurrentTenantId();if(!t)return[];const{data:n,error:r}=await L.from("email_blacklist").select("*").eq("tenant_id",t).order("blacklisted_at",{ascending:!1});return r?(console.error("Error fetching blacklist:",r),[]):n||[]}async addToBlacklist(t,n){const r=Qe.getCurrentTenantId();if(!r)return!1;const{error:a}=await L.from("email_blacklist").insert({tenant_id:r,email:t,reason:n});return a?(console.error("Error adding to blacklist:",a),!1):!0}async removeFromBlacklist(t){const n=Qe.getCurrentTenantId();if(!n)return!1;const{error:r}=await L.from("email_blacklist").delete().eq("tenant_id",n).eq("email",t);return r?(console.error("Error removing from blacklist:",r),!1):!0}async getRateLimit(){const t=Qe.getCurrentTenantId();if(!t)return null;const{data:n,error:r}=await L.from("email_rate_limits").select("*").eq("tenant_id",t).single();return r?(console.error("Error fetching rate limit:",r),null):n}async updateRateLimits(t){const n=Qe.getCurrentTenantId();if(!n)return!1;const{error:r}=await L.from("email_rate_limits").upsert({tenant_id:n,...t});return r?(console.error("Error updating rate limits:",r),!1):!0}};Bt(So,"instance");let bp=So;const fb=bp.getInstance(),Ooe=Object.freeze(Object.defineProperty({__proto__:null,EmailService:bp,emailService:fb},Symbol.toStringTag,{value:"Module"}));class Foe{async createInvitation(t){var u,h,m;const n=await L.auth.getSession();if(!n.data.session)throw new Error("User must be authenticated to send invitations");const{data:r}=await L.from("user_tenants").select("id").eq("tenant_id",t.tenant_id).eq("user_id",n.data.session.user.id).single();if(r)throw new Error("User is already a member of this tenant");const{data:a}=await L.from("invitations").select("id").eq("email",t.email).eq("tenant_id",t.tenant_id).eq("status","pending").single();if(a)throw new Error("An invitation for this email already exists for this tenant");const{data:i,error:o}=await L.from("user_roles").select("id").eq("name",t.role).single();if(o||!i)throw new Error(`Role ${t.role} not found`);const l=new Date;l.setDate(l.getDate()+(t.expires_in_days||7));const{data:c,error:d}=await L.from("invitations").insert({email:t.email,tenant_id:t.tenant_id,role_id:i.id,role_name:t.role,status:"pending",expires_at:l.toISOString(),invited_by:n.data.session.user.id}).select(`
        *,
        tenant:tenants(id, name, slug),
        role:user_roles(id, name, display_name)
      `).single();if(d)throw console.error("Error creating invitation:",d),new Error(`Failed to create invitation: ${d.message}`);console.log("🔍 [INVITATION] Invitation created successfully:",{id:c.id,email:c.email,tenant:c.tenant,role:c.role,hasEmailService:!!fb});try{const p={invitation_id:c.id,tenant_name:((u=c.tenant)==null?void 0:u.name)||"Organization",tenant_slug:((h=c.tenant)==null?void 0:h.slug)||"org",tenant_id:t.tenant_id,inviter_name:"Administrator",role_name:((m=c.role)==null?void 0:m.display_name)||t.role,expires_at:l.toLocaleDateString(),support_email:"support@gemeos.ai"};console.log("🔍 [INVITATION] Email template variables:",p),await fb.queueEmailForTenant(t.tenant_id,{templateType:"invitation",to:t.email,templateVariables:p,priority:"high"})}catch(p){console.error("Error sending invitation email:",p)}return c}async getInvitations(t={}){let n=L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        role:user_roles(id, name, display_name)
      `).order("created_at",{ascending:!1});t.tenant_id&&(n=n.eq("tenant_id",t.tenant_id)),t.status&&(n=n.eq("status",t.status)),t.role&&(n=n.eq("role_name",t.role));const{data:r,error:a}=await n;if(a)throw console.error("Error fetching invitations:",a),new Error(`Failed to fetch invitations: ${a.message}`);return r||[]}async getInvitation(t){const{data:n,error:r}=await L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        role:user_roles(id, name, display_name)
      `).eq("id",t).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching invitation:",r),new Error(`Failed to fetch invitation: ${r.message}`)}return n}async getInvitationByToken(t){return this.getInvitation(t)}async getPendingInvitationByTenant(t){console.log("🔍 Looking for pending invitations for tenant:",t);let n=t;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)){const{data:c,error:d}=await L.from("tenants").select("id").eq("slug",t).single();if(d||!c)return console.log("🔍 Could not find tenant by slug:",t),null;n=c.id,console.log("🔍 Resolved tenant slug to ID:",n)}const{data:a,error:i}=await L.from("invitations").select("id, email, status, expires_at, created_at").eq("tenant_id",n).order("created_at",{ascending:!1});i?console.error("❌ Error fetching all invitations:",i):console.log("🔍 All invitations for tenant:",a);const{data:o,error:l}=await L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        role:user_roles(id, name, display_name)
      `).eq("tenant_id",n).eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(1).maybeSingle();return l?(console.error("❌ Error fetching invitation by tenant:",l),null):(console.log("🔍 Pending invitation query result:",o?`Found invitation ${o.id}`:"No matching pending invitations"),o)}async acceptInvitation(t,n){const r=await this.getInvitation(t);if(!r)throw new Error("Invitation not found");if(r.status!=="pending")throw new Error("Invitation is no longer valid");if(new Date(r.expires_at)<new Date)throw await L.from("invitations").update({status:"expired"}).eq("id",t),new Error("Invitation has expired");const{error:a}=await L.from("user_tenants").insert({user_id:n,tenant_id:r.tenant_id,role_id:r.role_id,status:"active",is_primary:!1,joined_at:new Date().toISOString()});if(a)throw console.error("Error adding user to tenant:",a),new Error(`Failed to accept invitation: ${a.message}`);const{error:i}=await L.from("invitations").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("id",t);i&&console.error("Error updating invitation status:",i)}async cancelInvitation(t){const{error:n}=await L.from("invitations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",t);if(n)throw console.error("Error cancelling invitation:",n),new Error(`Failed to cancel invitation: ${n.message}`)}async resendInvitation(t){const n=new Date;n.setDate(n.getDate()+7);const{data:r,error:a}=await L.from("invitations").update({expires_at:n.toISOString(),status:"pending",updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        tenant:tenants(id, name, slug),
        role:user_roles(id, name, display_name)
      `).single();if(a)throw console.error("Error resending invitation:",a),new Error(`Failed to resend invitation: ${a.message}`);return r}async getTenantPendingInvitations(t){return this.getInvitations({tenant_id:t,status:"pending"})}async getInvitationsSentByUser(t){const{data:n,error:r}=await L.from("invitations").select(`
        *,
        tenant:tenants(id, name, slug),
        role:user_roles(id, name, display_name)
      `).eq("invited_by",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user invitations:",r),new Error(`Failed to fetch invitations: ${r.message}`);return n||[]}async cleanupExpiredInvitations(){const{data:t,error:n}=await L.from("invitations").update({status:"expired"}).eq("status","pending").lt("expires_at",new Date().toISOString()).select("id");if(n)throw console.error("Error cleaning up expired invitations:",n),new Error(`Failed to cleanup expired invitations: ${n.message}`);return(t==null?void 0:t.length)||0}async getInvitationStats(t){const{count:n}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t),{count:r}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","pending"),{count:a}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","accepted"),{count:i}=await L.from("invitations").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","expired");return{total_invitations:n||0,pending_invitations:r||0,accepted_invitations:a||0,expired_invitations:i||0}}}const Fa=new Foe,$oe=()=>{var U,M,B;const e=pt(),[t]=ld(),n=t.get("tenant"),r=t.get("invitationId"),a=t.get("token"),[i,o]=f.useState(null),[l,c]=f.useState(""),[d,u]=f.useState(""),[h,m]=f.useState(!1),[p,v]=f.useState(!1),[x,y]=f.useState(!0),[g,b]=f.useState(!1),[w,C]=f.useState(""),[_,S]=f.useState(!1),[N,j]=f.useState({score:0,requirements:{minLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1}});f.useEffect(()=>{k()},[a,r,n]),f.useEffect(()=>{T(l)},[l]);const k=async()=>{const D=a||r;try{y(!0);let E=null;if(D)try{E=await Fa.getInvitationByToken(D)}catch(I){console.log("🔍 Failed to load invitation by token:",I)}if(!E&&n&&(console.log("🔍 No invitation found with token, trying tenant fallback:",n),console.log("🔍 Available URL parameters:",{token:a,invitationId:r,tenantSlug:n}),E=await Fa.getPendingInvitationByTenant(n),console.log("🔍 Tenant fallback result:",E?"Found invitation":"No invitation found")),!E){C("Invitation not found. The link may be invalid or has already been used."),y(!1);return}if(new Date(E.expires_at)<new Date){C("This invitation has expired. Please contact your administrator for a new invitation."),y(!1);return}if(E.status!=="pending"){C("This invitation has already been used or cancelled."),y(!1);return}o(E),C("")}catch(E){console.error("Error loading invitation:",E),C("Failed to load invitation. Please try again or contact support.")}finally{y(!1)}},T=D=>{const E={minLength:D.length>=8,hasUppercase:/[A-Z]/.test(D),hasLowercase:/[a-z]/.test(D),hasNumber:/\d/.test(D)},I=Object.values(E).filter(Boolean).length;j({score:I,requirements:E})},A=()=>N.score===0?"bg-gray-200":N.score===1?"bg-red-500":N.score===2?"bg-orange-500":N.score===3?"bg-yellow-500":"bg-green-500",R=()=>N.score===0?"":N.score===1?"Weak":N.score===2?"Fair":N.score===3?"Good":"Strong",F=()=>l!==d?(C("Passwords do not match"),!1):N.score<4?(C("Please meet all password requirements"),!1):!0,O=async D=>{if(D.preventDefault(),!(!F()||!i)){b(!0),C("");try{const{data:E,error:I}=await L.auth.signUp({email:i.email,password:l});if(I)throw new Error(`Failed to create account: ${I.message}`);if(!E.user)throw new Error("Failed to create user account");console.log("✅ Created user account:",E.user.email);const{data:q,error:$}=await L.auth.signInWithPassword({email:i.email,password:l});if($)throw new Error(`Failed to sign in: ${$.message}`);if(!q.user)throw new Error("Failed to authenticate user");await Fa.acceptInvitation(i.id,q.user.id),S(!0),setTimeout(async()=>{const{data:P}=await L.auth.getSession(),Z=Uo(P.session);e(Z,{replace:!0})},2e3)}catch(E){console.error("Error accepting invitation:",E),C(E.message||"Failed to activate account. Please try again."),b(!1)}}};return x?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Loading invitation..."})]})}):!i&&w?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-orange-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(G,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(ft,{className:"w-8 h-8 text-red-600"})}),s.jsx(Y,{className:"text-2xl font-bold text-gray-900",children:"Invalid Invitation"})]}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs(Ot,{className:"border-red-200 bg-red-50",children:[s.jsx(ft,{className:"h-4 w-4 text-red-600"}),s.jsx(Ut,{className:"text-red-800",children:w})]}),s.jsx("div",{className:"text-center",children:s.jsx(is,{to:"/welcome",children:s.jsxs(z,{variant:"outline",className:"w-full",children:[s.jsx(An,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})})]})]})})}):_?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(ln,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account Activated Successfully!"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Welcome to ",(U=i==null?void 0:i.tenant)==null?void 0:U.name,". You're being redirected to your dashboard..."]}),s.jsx("div",{className:"animate-pulse text-sm text-gray-500",children:"Redirecting to dashboard..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(G,{className:"text-center pb-6",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Jn,{className:"w-6 h-6 text-blue-600"})}),s.jsx(Y,{className:"text-2xl font-bold text-gray-900",children:"Accept Invitation"}),s.jsx(we,{className:"text-gray-600",children:"Set your password to activate your account"})]}),s.jsxs(W,{className:"space-y-6",children:[i&&s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[s.jsx(Yn,{className:"w-4 h-4 mr-2 text-blue-600"}),s.jsxs("span",{children:["Organization: ",s.jsx("strong",{children:(M=i.tenant)==null?void 0:M.name})]})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[s.jsx(sn,{className:"w-4 h-4 mr-2 text-blue-600"}),s.jsxs("span",{children:["Role: ",s.jsx("strong",{children:((B=i.role)==null?void 0:B.display_name)||i.role_name})]})]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Invited by Administrator"})]}),s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"password",type:h?"text":"password",placeholder:"Create a strong password",value:l,onChange:D=>c(D.target.value),className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:g}),s.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?s.jsx($i,{className:"w-4 h-4"}):s.jsx(fr,{className:"w-4 h-4"})})]}),l&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Password strength"}),s.jsx("span",{className:"text-xs font-medium text-gray-700",children:R()})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all ${A()}`,style:{width:`${N.score/4*100}%`}})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`text-xs flex items-center ${N.requirements.minLength?"text-green-600":"text-gray-400"}`,children:[s.jsx(ln,{className:"w-3 h-3 mr-1"}),"At least 8 characters"]}),s.jsxs("div",{className:`text-xs flex items-center ${N.requirements.hasUppercase?"text-green-600":"text-gray-400"}`,children:[s.jsx(ln,{className:"w-3 h-3 mr-1"}),"One uppercase letter"]}),s.jsxs("div",{className:`text-xs flex items-center ${N.requirements.hasLowercase?"text-green-600":"text-gray-400"}`,children:[s.jsx(ln,{className:"w-3 h-3 mr-1"}),"One lowercase letter"]}),s.jsxs("div",{className:`text-xs flex items-center ${N.requirements.hasNumber?"text-green-600":"text-gray-400"}`,children:[s.jsx(ln,{className:"w-3 h-3 mr-1"}),"One number"]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(pe,{id:"confirmPassword",type:p?"text":"password",placeholder:"Confirm your password",value:d,onChange:D=>u(D.target.value),className:"pl-10 pr-10 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:g}),s.jsx("button",{type:"button",onClick:()=>v(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?s.jsx($i,{className:"w-4 h-4"}):s.jsx(fr,{className:"w-4 h-4"})})]})]}),w&&s.jsxs(Ot,{className:"border-red-200 bg-red-50",children:[s.jsx(ft,{className:"h-4 w-4 text-red-600"}),s.jsx(Ut,{className:"text-red-800",children:w})]}),s.jsx(z,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-sky-600 to-cyan-600 hover:from-sky-700 hover:to-cyan-700 text-white font-medium border-0",disabled:g||N.score<4,children:g?"Setting Password...":"Set Password & Accept Invitation"})]}),s.jsxs("div",{className:"text-center text-sm text-gray-500",children:["Need help? Contact your administrator or"," ",s.jsx(is,{to:"/support",className:"text-blue-600 hover:underline",children:"support team"})]})]})]})})})};function zoe(){const e=pt(),[t,n]=f.useState("list"),[r,a]=f.useState(""),i={teachers:{value:12,change:"+2 from last month",trend:"up"},students:{value:289,change:"+23 from last month",trend:"up"},classes:{value:28,change:"+5 this month",trend:"up"},messages:{value:7,label:"Unread messages"}},o=[{id:"1",name:"Sarah Chen",initials:"SC",status:"online",domains:["Piano","Music Theory"],classes:3,students:24,notifications:1,avatarColor:"primary"},{id:"2",name:"Marcus Rodriguez",initials:"MR",status:"online",domains:["Guitar","Composition"],classes:2,students:18,notifications:0,avatarColor:"secondary"},{id:"3",name:"Emma Thompson",initials:"ET",status:"away",domains:["Violin","Orchestra"],classes:2,students:15,notifications:1,avatarColor:"tertiary"},{id:"4",name:"David Kim",initials:"DK",status:"offline",domains:["Music Production","Audio Engineering"],classes:3,students:12,notifications:0,avatarColor:"primary"},{id:"5",name:"Lisa Wang",initials:"LW",status:"online",domains:["Jazz Performance"],classes:1,students:8,notifications:1,avatarColor:"secondary"}],l=d=>{switch(d){case"primary":return"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6]";case"secondary":return"bg-gradient-to-r from-[#8b5cf6] to-[#ec4899]";case"tertiary":return"bg-gradient-to-r from-[#f59e0b] to-[#d97706]";default:return"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6]"}},c=d=>{switch(d){case"online":return"bg-green-400";case"away":return"bg-yellow-400";case"offline":return"bg-gray-400";default:return"bg-gray-400"}};return s.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Manage your music academy with AI-powered tools"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Harmony Music Academy"}),s.jsx(X,{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white px-2 py-1 rounded-full text-xs font-medium",children:"Premium Plan"})]}),s.jsx(al,{className:"h-10 w-10 bg-gradient-to-r from-[#8b5cf6] to-[#ec4899] text-white text-sm rounded-full flex items-center justify-center font-medium",children:"HA"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Teachers"}),s.jsx(et,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.teachers.value}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),i.teachers.change]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Students"}),s.jsx(yr,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.students.value}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),i.students.change]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Classes"}),s.jsx(rt,{className:"h-4 w-4 text-pink-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.classes.value}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),i.classes.change]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"New Messages"}),s.jsx(At,{className:"h-4 w-4 text-amber-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.messages.value}),s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:i.messages.label})]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsx(G,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx(Y,{className:"text-lg font-semibold text-gray-900",children:"Teachers Overview"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your academy faculty and track their progress"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white hover:from-[#0891b2] hover:to-[#7c3aed] px-4 py-2 rounded-md font-medium transition-all duration-200 flex items-center gap-2",onClick:()=>e("/teacher/create"),children:[s.jsx(Jn,{className:"w-4 h-4"}),"Add Teacher"]}),s.jsxs(z,{variant:"outline",className:"border border-gray-300 text-gray-700 hover:bg-gray-50 px-4 py-2 rounded-md font-medium transition-all duration-200 flex items-center gap-2",children:[s.jsx(Pt,{className:"w-4 h-4"}),"Add Class"]}),s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>n("list"),className:`p-2 rounded transition-colors ${t==="list"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:s.jsx(Sw,{className:"w-5 h-5"})}),s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>n("statistics"),className:`p-2 rounded transition-colors ${t==="statistics"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:s.jsx(O$,{className:"w-5 h-5"})})]})]})}),s.jsxs(W,{children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(pe,{placeholder:"Search teachers by name or domain...",value:r,onChange:d=>a(d.target.value),className:"pl-10 pr-4 py-2 w-full border-gray-300 rounded-md"})]})}),t==="list"?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Teacher Name"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Domains Taught"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Classes"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Students"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Notifications"})]})}),s.jsx("tbody",{children:o.map(d=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(al,{className:`h-8 w-8 ${l(d.avatarColor)} text-white text-xs rounded-full flex items-center justify-center font-medium`,children:d.initials}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border border-white ${c(d.status)}`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:d.name}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:d.status})]})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:d.domains.map((u,h)=>s.jsx(X,{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium",children:u},h))})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(rt,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:d.classes})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yr,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:d.students})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("div",{className:"flex items-center justify-center",children:d.notifications>0?s.jsxs("div",{className:"relative",children:[s.jsx(Ou,{className:"w-5 h-5 text-amber-500"}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}):s.jsx(Ou,{className:"w-5 h-5 text-gray-300"})})})]},d.id))})]})}):s.jsx(Uoe,{})]})]})]})}function Uoe(){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Student Enrollment Trends"})}),s.jsx(W,{children:s.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-50 rounded",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"Student enrollment chart"})})})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Class Distribution"})}),s.jsx(W,{children:s.jsx("div",{className:"h-48 flex items-center justify-center bg-gray-50 rounded",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"Class distribution by domain"})})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx(G,{className:"pb-2",children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Average Class Size"})}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"14.5"}),s.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+2.3 from last month"})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx(G,{className:"pb-2",children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Teacher Utilization"})}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"87%"}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Above target"})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx(G,{className:"pb-2",children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Student Retention"})}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"94%"}),s.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+1% improvement"})]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Domain Performance Overview"})}),s.jsx(W,{children:s.jsx("div",{className:"space-y-3",children:["Piano","Guitar","Violin","Music Theory","Composition"].map((e,t)=>{const n=65+Math.random()*30;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-32 text-sm text-gray-700",children:e}),s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] h-2 rounded-full",style:{width:`${n}%`}})}),s.jsxs("div",{className:"text-sm text-gray-600 w-12 text-right",children:[Math.round(n),"%"]})]},e)})})})]})]})}function Boe(){if(typeof document<"u"){document.title="Admin Dashboard | Gemeos";const e=document.querySelector('meta[name="description"]');if(e)e.setAttribute("content","Admin dashboard for managing your academy with AI-powered tools.");else{const n=document.createElement("meta");n.name="description",n.content="Admin dashboard for managing your academy with AI-powered tools.",document.head.appendChild(n)}const t=document.querySelector('link[rel="canonical"]');if(t)t.setAttribute("href",window.location.origin+"/tenant/dashboard");else{const n=document.createElement("link");n.setAttribute("rel","canonical"),n.setAttribute("href",window.location.origin+"/tenant/dashboard"),document.head.appendChild(n)}}return s.jsx(zoe,{})}class Voe{async createTenant(t){if(!/^[a-z0-9-]+$/.test(t.slug))throw new Error("Slug must contain only lowercase letters, numbers, and hyphens");const{data:n}=await L.from("tenants").select("id").eq("slug",t.slug).maybeSingle();if(n)throw new Error("Tenant slug is already taken");const{data:r,error:a}=await L.from("tenants").insert({name:t.name,slug:t.slug,description:t.description||null,subscription_tier:t.subscription_tier||"free",max_users:t.max_users||10,max_domains:t.max_domains||2,status:t.status||"active",settings:t.settings||{}}).select().single();if(a)throw console.error("Error creating tenant:",a),new Error(`Failed to create tenant: ${a.message}`);return r}async getTenantById(t){console.log("🔍 [TENANT-SERVICE] Loading complete tenant data for:",t);try{const{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).single();if(r)return console.error("❌ [TENANT-SERVICE] Error loading tenant:",r),null;if(!n)return console.error("❌ [TENANT-SERVICE] Tenant not found:",t),null;const{data:a,error:i}=await L.from("domains").select("id, name, slug").order("name"),{data:o,error:l}=await L.from("tenant_domains").select("domain_id, settings").eq("tenant_id",t);i&&console.error("❌ [TENANT-SERVICE] Error loading domains:",i);const c=new Map((o||[]).map(x=>[x.domain_id,x])),d=(a||[]).map(x=>{var y;return{id:x.id,name:x.name,slug:x.slug,assigned:c.has(x.id),settings:((y=c.get(x.id))==null?void 0:y.settings)||{}}}),{data:u,error:h}=await L.from("user_tenants").select(`
          id,
          user_id,
          status,
          created_at
        `).eq("tenant_id",t);h&&console.error("❌ [TENANT-SERVICE] Error loading admins:",h);const m=(u||[]).map(x=>({id:x.id,email:`user-${x.user_id.substring(0,8)}@tenant.com`,role:"tenant_admin",status:x.status,created_at:x.created_at})),p={global_max_teachers:n.max_users||50,global_max_students:n.max_users?n.max_users*10:500,enforce_limits:!0},v={basic:n,domains:d,admins:m,limits:p,settings:n.settings||{}};return console.log("✅ [TENANT-SERVICE] Loaded complete tenant data:",{tenantId:t,domainsCount:d.length,assignedDomains:d.filter(x=>x.assigned).length,adminsCount:m.length}),v}catch(n){return console.error("❌ [TENANT-SERVICE] Error loading tenant data:",n),null}}async getTenants(t={}){let n=L.from("tenants").select("*").order("created_at",{ascending:!1});t.status&&(n=n.eq("status",t.status)),t.subscription_tier&&(n=n.eq("subscription_tier",t.subscription_tier)),t.search&&(n=n.or(`name.ilike.%${t.search}%, slug.ilike.%${t.search}%`));const{data:r,error:a}=await n;if(a)throw console.error("Error fetching tenants:",a),new Error(`Failed to fetch tenants: ${a.message}`);return r||[]}async getTenant(t){const{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).maybeSingle();if(r)throw console.error("Error fetching tenant:",r),new Error(`Failed to fetch tenant: ${r.message}`);return n}async getTenantBySlug(t){const{data:n,error:r}=await L.from("tenants").select("*").eq("slug",t).maybeSingle();if(r)throw console.error("Error fetching tenant by slug:",r),new Error(`Failed to fetch tenant: ${r.message}`);return n}async updateTenant(t,n){const{data:r,error:a}=await L.from("tenants").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw console.error("Error updating tenant:",a),new Error(`Failed to update tenant: ${a.message}`);return r}async deleteTenant(t){const{error:n}=await L.from("tenants").update({status:"inactive",updated_at:new Date().toISOString()}).eq("id",t);if(n)throw console.error("Error deleting tenant:",n),new Error(`Failed to delete tenant: ${n.message}`)}async getTenantStats(t){const{count:n}=await L.from("user_tenants").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("status","active"),{count:r}=await L.from("tenant_domains").select("*",{count:"exact",head:!0}).eq("tenant_id",t);return{active_users:n||0,assigned_domains:r||0}}async isSlugAvailable(t){const{data:n}=await L.from("tenants").select("id").eq("slug",t).maybeSingle();return!n}generateSlug(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}}const Qn=new Voe,qoe=Object.freeze(Object.defineProperty({__proto__:null,tenantService:Qn},Symbol.toStringTag,{value:"Module"}));class Woe{async getDashboardStats(){try{return{tenants:(await Qn.getTenants()).length,teachers:63,students:1614,classes:132,newMessages:23}}catch(t){return console.error("Error fetching platform dashboard stats:",t),{tenants:5,teachers:63,students:1614,classes:132,newMessages:23}}}async getTenantGrowthStats(){try{const{data:t,error:n}=await L.from("tenants").select("created_at, status").order("created_at",{ascending:!1});if(n)return console.error("Error fetching tenant growth stats:",n),{currentMonth:0,previousMonth:0};const r=new Date,a=new Date(r.getFullYear(),r.getMonth(),1),i=new Date(r.getFullYear(),r.getMonth()-1,1),o=(t||[]).filter(c=>new Date(c.created_at)>=a).length,l=(t||[]).filter(c=>{const d=new Date(c.created_at);return d>=i&&d<a}).length;return{currentMonth:o,previousMonth:l}}catch(t){return console.error("Error calculating tenant growth:",t),{currentMonth:0,previousMonth:0}}}async getTenantHeaderInfo(){try{const t=await Qn.getTenants();if(t.length>0){const n=t[0],a=n.name.split(" ").slice(0,2).map(i=>i[0]).join("").toUpperCase();return{name:n.name,initials:a,subscription_tier:n.subscription_tier}}return{name:"Harmony Music Academy",initials:"HM",subscription_tier:"premium"}}catch(t){return console.error("Error fetching tenant header info:",t),{name:"Harmony Music Academy",initials:"HM",subscription_tier:"premium"}}}}const h2=new Woe;function Hoe(){const{session:e,isPlatformAdmin:t}=dn(),n=pt(),[r,a]=f.useState(""),[i,o]=f.useState("list"),[l,c]=f.useState({tenants:0,teachers:0,students:0,classes:0,newMessages:0}),[d,u]=f.useState(!0),[h,m]=f.useState([]),[p,v]=f.useState(!0),[x,y]=f.useState({name:"Loading...",initials:"--",subscription_tier:"loading"});f.useEffect(()=>{(async()=>{try{u(!0),v(!0);const[N,j,k]=await Promise.all([h2.getDashboardStats(),Qn.getTenants(),h2.getTenantHeaderInfo()]);c(N),m(j),y(k)}catch(N){console.error("Error loading dashboard data:",N)}finally{u(!1),v(!1)}})()},[]),f.useEffect(()=>{document.title="Platform Admin Dashboard - Gemeos";const S=document.querySelector('link[rel="canonical"]');if(S)S.setAttribute("href",window.location.origin+"/admin/dashboard");else{const N=document.createElement("link");N.setAttribute("rel","canonical"),N.setAttribute("href",window.location.origin+"/admin/dashboard"),document.head.appendChild(N)}},[]);const g=(S,N)=>{const j=["San Francisco, CA","New York, NY","Los Angeles, CA","Chicago, IL","Austin, TX","Seattle, WA","Boston, MA","Denver, CO"];return{...S,teachers:Math.floor(Math.random()*25)+5,classes:Math.floor(Math.random()*40)+10,students:Math.floor(Math.random()*600)+50,hasNotifications:Math.random()>.6,location:j[N%j.length]}},w=(()=>{var S;if(t){const N=(e==null?void 0:e.email)||"",j=N.split("@")[0],k=j.split(/[._-]/);let T="",A="Platform Admin";return k.length>=2?(T=(k[0][0]+k[k.length-1][0]).toUpperCase(),A=k.map(R=>R.charAt(0).toUpperCase()+R.slice(1)).join(" ")):(T=((S=N[0])==null?void 0:S.toUpperCase())||"PA",A=j.charAt(0).toUpperCase()+j.slice(1)),{name:A,initials:T,subscription_tier:null}}else return{name:x.name,initials:x.initials,subscription_tier:x.subscription_tier}})(),_=h.map((S,N)=>g(S,N)).filter(S=>S.name.toLowerCase().includes(r.toLowerCase())||S.location&&S.location.toLowerCase().includes(r.toLowerCase()));return s.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Platform Admin Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Manage your music academy with AI-powered tools"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.name}),w.subscription_tier&&s.jsxs(X,{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${w.subscription_tier==="premium"?"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white":w.subscription_tier==="basic"?"bg-blue-100 text-blue-800":w.subscription_tier==="enterprise"?"bg-purple-100 text-purple-800":(w.subscription_tier==="free","bg-gray-100 text-gray-800")}`,children:[w.subscription_tier," Plan"]})]}),s.jsx(VO,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Tenants"}),s.jsx(jS,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(W,{children:[d?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin text-gray-400"}),s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"})]}):s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.tenants}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),"+1 this month"]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Teachers"}),s.jsx(yr,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(W,{children:[d?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin text-gray-400"}),s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"})]}):s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.teachers}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),"+5 this month"]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Students"}),s.jsx(et,{className:"h-4 w-4 text-pink-600"})]}),s.jsxs(W,{children:[d?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin text-gray-400"}),s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"})]}):s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.students}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),"+47 this month"]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Classes"}),s.jsx(wS,{className:"h-4 w-4 text-amber-600"})]}),s.jsxs(W,{children:[d?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin text-gray-400"}),s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"})]}):s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.classes}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),"+8 this month"]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"New Messages"}),s.jsx(At,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(W,{children:[d?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin text-gray-400"}),s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"})]}):s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.newMessages}),s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"From all tenants"})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i==="list"?"Tenant Management":"Platform Statistics"}),s.jsx("p",{className:"text-gray-600 text-sm",children:i==="list"?"Manage tenants and monitor their activity across the platform":"Analytics and insights across all tenants"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[i==="list"&&s.jsxs(z,{onClick:()=>n("/admin/tenants/create?step=basic"),className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white hover:from-[#0891b2] hover:to-[#7c3aed] px-4 py-2 rounded-md font-medium transition-all duration-200",children:[s.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Tenant"]}),s.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>o("list"),className:`p-2 rounded-md transition-all duration-200 ${i==="list"?"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white":"text-gray-500 hover:text-gray-700"}`,title:"List View",children:s.jsx(Sw,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>o("statistics"),className:`p-2 rounded-md transition-all duration-200 ${i==="statistics"?"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white":"text-gray-500 hover:text-gray-700"}`,title:"Statistics View",children:s.jsx(vS,{className:"w-4 h-4"})})]})]})]})}),s.jsx(W,{children:i==="list"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tenants by name or location...",value:r,onChange:S=>a(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200"})]}),s.jsx("div",{className:"overflow-x-auto",children:p?s.jsxs("div",{className:"flex justify-center items-center py-12",children:[s.jsx(Hn,{className:"h-8 w-8 animate-spin text-gray-400"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading tenants..."})]}):s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Tenant Name"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"# Teachers"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"# Classes"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"# Students"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Notifications"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),s.jsxs("tbody",{children:[_.map(S=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(al,{className:"h-10 w-10 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white text-sm",children:S.name.split(" ").map(N=>N[0]).join("").slice(0,2)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:S.name}),s.jsx("div",{className:"text-xs text-gray-500",children:S.location})]})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(yr,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-900",children:S.teachers})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(wS,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-900",children:S.classes})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(et,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-900",children:S.students})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("div",{className:"flex items-center justify-center",children:S.hasNotifications?s.jsxs("div",{className:"relative",children:[s.jsx(Ou,{className:"w-5 h-5 text-amber-500"}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}):s.jsx(Ou,{className:"w-5 h-5 text-gray-300"})})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("button",{onClick:()=>n(`/admin/tenants/${S.id}`),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit tenant",children:s.jsx(ul,{className:"w-4 h-4"})})})]},S.id)),!p&&_.length===0&&h.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-12 text-center text-gray-500",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(jS,{className:"w-12 h-12 text-gray-300 mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tenants yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Get started by creating your first tenant"})]})})}),!p&&_.length===0&&h.length>0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Rn,{className:"w-8 h-8 text-gray-300 mb-2"}),s.jsxs("p",{children:['No tenants found matching "',r,'"']}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your search terms"})]})})})]})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Exercise Creation - Last 4 Weeks"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"AI-generated vs Teacher-created exercises"})]}),s.jsx(W,{children:s.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center relative",children:s.jsxs("div",{className:"text-center",children:[s.jsx(vS,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"AI Created: 2,847"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Teacher Created: 1,203"})]})]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"70% AI-generated content"})]})]})})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Learning Plan Progress"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Student adherence to designed learning paths"})]}),s.jsx(W,{children:s.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center relative",children:s.jsxs("div",{className:"text-center",children:[s.jsx(yw,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Not on track: 10% (161 students)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-700",children:"On track: 60% (967 students)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Over performing: 30% (486 students)"})]})]})})]})})})]})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs(V,{children:[s.jsx(G,{children:s.jsx("h4",{className:"font-semibold text-gray-900",children:"Platform Usage"})}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Daily Active Users"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"1,247"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Weekly Active Users"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"4,892"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Avg. Session Duration"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"24m 35s"})]})]})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx("h4",{className:"font-semibold text-gray-900",children:"Content Metrics"})}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Exercises"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"4,050"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"87.2%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Avg. Score"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"84.6%"})]})]})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx("h4",{className:"font-semibold text-gray-900",children:"System Health"})}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Uptime"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:"99.98%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Response Time"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"127ms"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"API Calls/min"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"2,847"})]})]})})]})]})]})})]})]})}function Goe({stats:e}){const t=[{title:"Total Domains",value:e.totalDomains,icon:_A,description:"Active learning domains"},{title:"Total Concepts",value:e.totalConcepts,icon:rt,description:"Concepts across all domains"},{title:"Learning Goals",value:e.totalLearningGoals,icon:Xn,description:"Defined learning objectives"},{title:"Total Exercises",value:e.totalExercises,icon:Es,description:"Practice exercises available"}];return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(n=>s.jsxs(V,{className:"min-h-[var(--admin-stat-card-min-h)] bg-surface-card border-0 shadow-sm hover:shadow-md transition-shadow duration-200 rounded-lg",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium text-dashboard-primary",children:n.title}),s.jsx(n.icon,{className:"h-5 w-5 text-dashboard-secondary"})]}),s.jsxs(W,{className:"pt-2 pb-4",children:[s.jsx("div",{className:"mt-2 text-2xl font-bold text-dashboard-primary",children:n.value.toLocaleString()}),s.jsx("p",{className:"text-xs text-dashboard-text-muted mt-1",children:n.description})]})]},n.title))})}function Koe({domain:e,onManage:t,onViewAnalytics:n}){const a=(i=>{switch(i==null?void 0:i.toLowerCase()){case"active":return{badge:"bg-[#22C55E] text-white border-0 font-medium",indicator:"bg-[#22C55E]"};case"draft":return{badge:"bg-[#F59E0B] text-white border-0 font-medium",indicator:"bg-[#F59E0B]"};case"archived":return{badge:"bg-[#7E7BB3] text-white border-0 font-medium",indicator:"bg-[#7E7BB3]"};default:return{badge:"bg-[#7E7BB3] text-white border-0 font-medium",indicator:"bg-[#7E7BB3]"}}})(e.status);return s.jsxs(V,{className:ne("relative overflow-hidden","bg-white rounded-lg","border border-[#E5E7EB]","shadow-sm hover:shadow-lg","transition-all duration-200","hover:scale-[1.01]","cursor-default"),children:[s.jsx("div",{className:ne("absolute top-0 left-0 right-0 h-1",a.indicator)}),s.jsxs(G,{className:"p-6 pb-4 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(Y,{className:"text-xl font-semibold text-[#110D59] truncate",children:e.name})}),s.jsx(X,{className:ne("px-3 py-1 text-xs uppercase tracking-wider","rounded-full",a.badge),children:e.status})]}),s.jsx(we,{className:"text-sm text-[#7E7BB3] leading-relaxed line-clamp-2 min-h-[2.5rem]",children:e.description})]}),s.jsxs(W,{className:"p-6 pt-0 space-y-6",children:[s.jsx("div",{className:"bg-[#F1F2F4] rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#110D59]/10 mx-auto",children:s.jsx(rt,{className:"h-5 w-5 text-[#110D59]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-[#110D59]",children:e.concepts}),s.jsx("div",{className:"text-xs text-[#7E7BB3] font-medium mt-0.5",children:"Concepts"})]})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#28246F]/10 mx-auto",children:s.jsx(Xn,{className:"h-5 w-5 text-[#28246F]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-[#28246F]",children:e.learningGoals}),s.jsx("div",{className:"text-xs text-[#7E7BB3] font-medium mt-0.5",children:"Goals"})]})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#A3D1FC]/20 mx-auto",children:s.jsx(Wi,{className:"h-5 w-5 text-[#0B5FAE]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-[#0B5FAE]",children:e.exercises}),s.jsx("div",{className:"text-xs text-[#7E7BB3] font-medium mt-0.5",children:"Exercises"})]})]})]})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#7E7BB3]",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsxs("span",{children:["Last updated: ",new Date(e.lastUpdated).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>t(e.id),className:ne("flex-1 h-[51px] rounded-lg","bg-[#0E77D9] text-white","font-medium text-sm","flex items-center justify-center gap-2","transition-all duration-200","hover:bg-[#0E77D9]/90","active:bg-[#0E77D9]/85","focus:outline-none focus:ring-2 focus:ring-[#0E77D9] focus:ring-offset-2"),children:[s.jsx(kt,{className:"h-4 w-4"}),"Manage"]}),s.jsxs("button",{onClick:()=>n(e.id),className:ne("flex-1 h-[51px] rounded-lg","bg-[#0B5FAE] text-white","font-medium text-sm","flex items-center justify-center gap-2","transition-all duration-200","hover:bg-[#0B5FAE]/90","active:bg-[#0B5FAE]/85","focus:outline-none focus:ring-2 focus:ring-[#0B5FAE] focus:ring-offset-2"),children:[s.jsx(fh,{className:"h-4 w-4"}),"Analytics"]})]})]})]})}function Qoe({domains:e,onCreateNew:t,onManageDomain:n,onViewAnalytics:r}){const[a,i]=f.useState(""),[o,l]=f.useState("all"),c=[{id:"sample-1",name:"IELTS",description:"Prepares students for the International English Language Testing System, focusing on listening, reading, writing, and speaking skills.",status:"active",concepts:0,learningGoals:0,exercises:0,lastUpdated:"31.8.2025"},{id:"sample-2",name:"GMAT",description:"Prepares students for the Graduate Management Admission Test, focusing on analytical, quantitative, verbal, and integrated reasoning skills.",status:"active",concepts:0,learningGoals:0,exercises:0,lastUpdated:"31.8.2025"},{id:"sample-3",name:"Jazz music",description:"This domain focuses on mastering jazz, exploring its rich harmony, fluid rhythm, and improvisation techniques. It offers a comprehensive path to developing instrumental technique, ear training, and an understanding of the vast repertoire and styles of jazz",status:"active",concepts:62,learningGoals:0,exercises:0,lastUpdated:"31.8.2025"}],d=e.length===0?c:e,u=f.useMemo(()=>{let h=d.filter(m=>{const p=m.name.toLowerCase().includes(a.toLowerCase())||m.description.toLowerCase().includes(a.toLowerCase()),v=o==="all"||m.status===o;return p&&v});return h.sort((m,p)=>new Date(p.lastUpdated).getTime()-new Date(m.lastUpdated).getTime()),h},[d,a,o]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dashboard-text-muted h-4 w-4"}),s.jsx(pe,{placeholder:"Search domains...",value:a,onChange:h=>i(h.target.value),className:"pl-10 bg-surface-card border-dashboard-bg focus:border-dashboard-accent focus:ring-dashboard-accent/20 text-dashboard-primary placeholder:text-dashboard-text-muted"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(Ve,{value:o,onValueChange:l,children:[s.jsxs(ze,{className:"w-36 bg-surface-card border-dashboard-bg text-dashboard-primary",children:[s.jsx(bw,{className:"h-4 w-4 mr-2 text-dashboard-secondary"}),s.jsx(qe,{placeholder:"Status"})]}),s.jsxs(Ue,{className:"bg-surface-card border-dashboard-bg",children:[s.jsx(le,{value:"all",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"All Status"}),s.jsx(le,{value:"active",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"Active"}),s.jsx(le,{value:"draft",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"Draft"}),s.jsx(le,{value:"archived",className:"text-dashboard-primary hover:bg-dashboard-bg/50",children:"Archived"})]})]})})]}),s.jsxs(z,{onClick:t,className:"whitespace-nowrap bg-dashboard-primary hover:bg-dashboard-secondary text-white border-0 shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Create New Domain"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(h=>s.jsx(Koe,{domain:h,onManage:n,onViewAnalytics:r},h.id))}),u.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-dashboard-text-muted text-sm",children:a||o!=="all"?"No domains match your search criteria.":"No domains found."})})]})}class Yoe{async getEffectiveConcepts(t,n){try{const{data:r,error:a}=await L.rpc("effective_concepts",{p_tenant_id:t,p_user_id:n});if(a)throw a;return r||[]}catch(r){throw console.error("Error fetching effective concepts:",r),r}}async getConceptsForDomain(t,n,r){try{const{data:a,error:i}=await L.rpc("effective_concepts_for_domain",{p_domain_id:t,p_tenant_id:n,p_user_id:r});if(i)throw i;return a||[]}catch(a){throw console.error("Error fetching concepts for domain:",a),a}}async getEffectiveLearningGoals(t,n){try{const{data:r,error:a}=await L.rpc("effective_learning_goals",{p_tenant_id:t,p_user_id:n});if(a)throw a;return r||[]}catch(r){throw console.error("Error fetching effective learning goals:",r),r}}async getLearningGoalsForConcept(t,n,r){try{const{data:a,error:i}=await L.rpc("effective_learning_goals_for_concept",{p_concept_id:t,p_tenant_id:n,p_user_id:r});if(i)throw i;return a||[]}catch(a){throw console.error("Error fetching learning goals for concept:",a),a}}async getEffectiveExercises(t,n){try{const{data:r,error:a}=await L.rpc("effective_exercises",{p_tenant_id:t,p_user_id:n});if(a)throw a;return r||[]}catch(r){throw console.error("Error fetching effective exercises:",r),r}}async updateConceptOverride(t,n,r){var a;try{const i=await this.getCurrentTenantId(),o=r==="teacher"?(a=(await L.auth.getUser()).data.user)==null?void 0:a.id:void 0,l={base_concept_id:t,scope:r,tenant_id:i,teacher_id:o,...n,version:(n.version||0)+1},{data:c,error:d}=await L.from("concept_overrides").upsert(l,{onConflict:"base_concept_id,scope,tenant_id,teacher_id"}).select().single();if(d)throw d;return c}catch(i){throw console.error("Error updating concept override:",i),i}}async updateLearningGoalOverride(t,n,r){var a;try{const i=await this.getCurrentTenantId(),o=r==="teacher"?(a=(await L.auth.getUser()).data.user)==null?void 0:a.id:void 0,l={base_goal_id:t,scope:r,tenant_id:i,teacher_id:o,...n,version:(n.version||0)+1},{data:c,error:d}=await L.from("learning_goal_overrides").upsert(l,{onConflict:"base_goal_id,scope,tenant_id,teacher_id"}).select().single();if(d)throw d;return c}catch(i){throw console.error("Error updating learning goal override:",i),i}}async updateExerciseOverride(t,n,r){var a;try{const i=await this.getCurrentTenantId(),o=r==="teacher"?(a=(await L.auth.getUser()).data.user)==null?void 0:a.id:void 0,l={base_exercise_id:t,scope:r,tenant_id:i,teacher_id:o,...n,version:(n.version||0)+1},{data:c,error:d}=await L.from("exercise_overrides").upsert(l,{onConflict:"base_exercise_id,scope,tenant_id,teacher_id"}).select().single();if(d)throw d;return c}catch(i){throw console.error("Error updating exercise override:",i),i}}async revertToParent(t,n,r){var a;try{const i=await this.getCurrentTenantId(),o=r==="teacher"?(a=(await L.auth.getUser()).data.user)==null?void 0:a.id:void 0,l=`${t==="learning_goal"?"learning_goal":t}_overrides`,d={[t==="learning_goal"?"base_goal_id":t==="concept"?"base_concept_id":"base_exercise_id"]:n,scope:r,tenant_id:i,...r==="teacher"&&{teacher_id:o}},{error:u}=await L.from(l).update({deleted_at:new Date().toISOString(),change_reason:"Reverted to parent version"}).match(d);if(u)throw u}catch(i){throw console.error("Error reverting to parent:",i),i}}async getTenantContentSummary(t){try{const{data:n,error:r}=await L.rpc("get_tenant_content_summary",{p_tenant_id:t});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching tenant content summary:",n),n}}async getCurrentTenantId(){const{data:t,error:n}=await L.rpc("get_current_tenant_id");if(n||!t)throw new Error("Unable to determine current tenant context");return t}async isPlatformAdmin(){try{const{data:t}=await L.rpc("auth_is_platform_admin");return t||!1}catch{return!1}}async getCurrentTenantRole(t){try{const n=t||await this.getCurrentTenantId(),{data:r}=await L.rpc("auth_tenant_role",{p_tenant_id:n});return r}catch{return null}}}const m2=new Yoe,Xoe=()=>{const{user:e}=dn(),{currentTenant:t}=Hj();return yt({queryKey:["content-permissions",e==null?void 0:e.id,t==null?void 0:t.id],queryFn:async()=>{const n=await m2.isPlatformAdmin(),r=await m2.getCurrentTenantRole();return{isPlatformAdmin:n,tenantRole:r,canEditTenantContent:n||r==="tenant_admin",canEditTeacherContent:n||r==="tenant_admin"||r==="teacher",canViewContent:!!(r||n)}},staleTime:10*60*1e3,enabled:!!(e!=null&&e.id&&(t!=null&&t.id))})};function Joe(){const e=pt(),{data:t}=Xoe(),{currentTenant:n}=Hj(),r=t!=null&&t.isPlatformAdmin||n==null?void 0:n.id,{domains:a}=As(r),{domainsStats:i}=eJ(),o=f.useMemo(()=>{const h=a.length,m=a.reduce((p,v)=>{const x=i[v.id]||{conceptsCount:0,learningGoalsCount:0,exercisesCount:0};return p.totalConcepts+=x.conceptsCount||0,p.totalLearningGoals+=x.learningGoalsCount||0,p.totalExercises+=x.exercisesCount||0,p},{totalConcepts:0,totalLearningGoals:0,totalExercises:0});return{totalDomains:h,totalConcepts:m.totalConcepts,totalLearningGoals:m.totalLearningGoals,totalExercises:m.totalExercises}},[a,i]),l=f.useMemo(()=>a.map(h=>{const m=i[h.id]||{conceptsCount:0,learningGoalsCount:0,exercisesCount:0};return{id:h.id,name:h.name,description:h.description,status:"active",concepts:m.conceptsCount||0,learningGoals:m.learningGoalsCount||0,exercises:m.exercisesCount||0,lastUpdated:h.updated_at||h.created_at}}),[a,i]);if(typeof document<"u"){document.title="Domains Dashboard | Gemeos";const h=document.querySelector('meta[name="description"]');if(h)h.setAttribute("content","Domains dashboard for managing learning domains and educational content.");else{const p=document.createElement("meta");p.name="description",p.content="Domains dashboard for managing learning domains and educational content.",document.head.appendChild(p)}const m=document.querySelector('link[rel="canonical"]');if(m)m.setAttribute("href",window.location.origin+"/admin/domains/dashboard");else{const p=document.createElement("link");p.setAttribute("rel","canonical"),p.setAttribute("href",window.location.origin+"/admin/domains/dashboard"),document.head.appendChild(p)}}const c=()=>{e("/admin/learning-domains")},d=h=>{const m=l.find(p=>p.id===h);if(m){const p=mp(m.name);e(`/admin/domains/${p}`)}else e(`/admin/domain/${h}`)},u=h=>{const m=l.find(p=>p.id===h);if(m){const p=mp(m.name);e(`/admin/domains/${p}`)}else e(`/admin/domain/${h}`)};return s.jsx(gd,{resource:"page:dashboard",action:"read",children:s.jsx(Ma,{className:"bg-dashboard-bg min-h-screen",children:s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-dashboard-primary mb-3",children:"Domains Dashboard"}),s.jsx("h2",{className:"text-xl font-semibold text-dashboard-secondary mb-4",children:"Domain Overview"}),s.jsx("p",{className:"text-dashboard-text-muted text-base leading-relaxed",children:"Get a high-level view of your learning domains' content and performance metrics."})]}),s.jsx(Goe,{stats:o})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-dashboard-secondary mb-4",children:"Learning Domains"}),s.jsx("p",{className:"text-dashboard-text-muted text-base leading-relaxed",children:"Manage your learning domains, view their statistics, and access detailed management tools."})]}),s.jsx(Qoe,{domains:l,onCreateNew:c,onManageDomain:d,onViewAnalytics:u})]})]})})})}function _a({title:e,description:t,icon:n,count:r,comingSoon:a,highlighted:i=!1,onClick:o,colorScheme:l="purple"}){const d=(()=>{switch(l){case"blue":return{bg:"bg-[#A3D1FC]/20",icon:"text-[#0B5FAE]",stat:"text-[#0B5FAE]"};case"green":return{bg:"bg-[#22C55E]/10",icon:"text-[#22C55E]",stat:"text-[#22C55E]"};default:return{bg:"bg-[#110D59]/10",icon:"text-[#110D59]",stat:"text-[#110D59]"}}})();return s.jsxs(V,{className:ne("relative overflow-hidden h-full","bg-white rounded-lg","border border-[#E5E7EB]","shadow-sm hover:shadow-lg","transition-all duration-200","cursor-pointer group"),onClick:o,children:[i&&s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-[#110D59]"}),s.jsxs(G,{className:"p-6 pb-4 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("div",{className:ne("flex items-center justify-center w-10 h-10 rounded-full",d.bg),children:s.jsx(n,{className:ne("h-5 w-5",d.icon)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[a?s.jsx(X,{className:"px-3 py-1 text-xs uppercase tracking-wider rounded-full bg-[#7E7BB3] text-white border-0",children:"Coming Soon"}):r!==void 0?s.jsx("div",{className:ne("text-2xl font-bold",d.stat),children:r}):null,s.jsx(_n,{className:"h-5 w-5 text-[#7E7BB3] group-hover:text-[#110D59] transition-colors"})]})]}),s.jsx("div",{children:s.jsx(Y,{className:"text-lg font-semibold text-[#110D59] group-hover:text-[#0B5FAE] transition-colors",children:e})})]}),s.jsxs(W,{className:"p-6 pt-0 flex flex-col flex-1",children:[s.jsx(we,{className:"text-sm text-[#55555F] leading-relaxed line-clamp-2 min-h-[2.5rem] flex-1",children:t}),!a&&s.jsx("div",{className:"mt-4",children:s.jsxs("button",{className:ne("w-full h-[51px] rounded-lg","bg-[#0E77D9] text-white","font-medium text-sm","flex items-center justify-center gap-2","transition-all duration-200","hover:bg-[#0E77D9]/90","active:bg-[#0E77D9]/85","focus:outline-none focus:ring-2 focus:ring-[#0E77D9] focus:ring-offset-2"),onClick:u=>{u.stopPropagation(),o==null||o()},children:[s.jsx(kt,{className:"h-4 w-4"}),"Manage"]})})]})]})}function Zoe({domainName:e}){const t=pt(),{domainId:n,slug:r}=Gr(),[a,i]=f.useState(!1),{domains:o}=As(),{uploadFiles:l,isUploading:c,uploadProgress:d}=Nx(),u=r||n||"",{domain:h}=fl(u),m=h||o.find(g=>g.id===n),p=r||mp(m?m.name:e),v={conceptsCount:74,goalsCount:28,tasksCount:15,strategiesCount:8},x=g=>{!n||!m||(console.log("AdminDomainPage - handleFilesSelected called with:",{domainId:n,domainName:m.name,filesCount:g.length}),l({files:g,domainId:n,domainName:m.name}))},y=()=>{i(!1)};return s.jsx("div",{className:"p-6 space-y-8",children:s.jsxs("div",{className:"mx-auto max-w-7xl",children:[s.jsx(va,{}),a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),s.jsxs("p",{className:"text-[#55555F] mt-2",children:["Choose the type of content you want to upload for ",e,"."]})]}),s.jsxs(z,{variant:"ghost",onClick:y,children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsx(Jj,{onFilesSelected:x,uploadProgress:d,isUploading:c,disabled:!n})})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-semibold mb-2 text-[#110D59]",children:e}),s.jsx("p",{className:"text-[#55555F]",children:"Manage all aspects of your learning domain from this control center"})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-[#110D59]",children:"Learning Setup & Content Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx(_a,{title:"Learning Concepts",description:"Number of concepts in the domain; manage concepts and relationships.",icon:rt,count:v.conceptsCount,colorScheme:"purple",onClick:()=>t(`/admin/domains/${p}/concepts`)}),s.jsx(_a,{title:"Learning Goals",description:"Number of learning objectives; define and organize them.",icon:Xn,count:v.goalsCount,colorScheme:"blue",onClick:()=>t(`/admin/domains/${p}/goals`)}),s.jsx(_a,{title:"Exercises",description:"Create and manage practice activities.",icon:Wi,colorScheme:"blue",comingSoon:!0,onClick:()=>console.log("Exercises coming soon")}),s.jsx(_a,{title:"Tasks",description:"Manage types of tasks used in this domain.",icon:$u,count:v.tasksCount,onClick:()=>console.log("Navigate to Tasks")}),s.jsx(_a,{title:"Strategies",description:"Define learning strategies and methodologies for this domain.",icon:Bp,count:v.strategiesCount,onClick:()=>console.log("Navigate to Strategies")})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-[#110D59]",children:"Intelligent Assistance & Teacher Tools"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx(_a,{title:"Train the AI",description:"Train the AI (your digital twin) to support teaching and content creation.",icon:Jm,onClick:()=>t(`/admin/domains/${p}/ai-guidance`)}),s.jsx(_a,{title:"Upload Data",description:"Upload and manage learning materials, datasets, and resources for AI training and content delivery.",icon:On,onClick:()=>i(!0)})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6 text-[#110D59]",children:"Motivation & Engagement"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(_a,{title:"Gamification",description:"Add game elements to boost learning motivation.",icon:kw,comingSoon:!0,onClick:()=>console.log("Gamification coming soon")}),s.jsx(_a,{title:"Motivation",description:"Tools to track and boost learner engagement.",icon:ww,comingSoon:!0,onClick:()=>console.log("Motivation tools coming soon")})]})]})]})]})})}function f2(){const{slug:e,domainId:t}=Gr(),n=e||t||"",{domain:r,loading:a,error:i}=fl(n);return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i||!r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Domain Not Found"}),s.jsx("p",{className:"text-gray-600",children:i||"The requested domain could not be found."})]})}):s.jsx(Zoe,{domainName:r.name})}const p2={free:{tier:"free",max_users:10,max_domains:1,max_storage_gb:1,features:["basic_features"]},basic:{tier:"basic",max_users:50,max_domains:5,max_storage_gb:10,features:["basic_features","email_support"]},premium:{tier:"premium",max_users:500,max_domains:20,max_storage_gb:100,features:["advanced_analytics","custom_branding","api_access","priority_support"]},enterprise:{tier:"enterprise",max_users:-1,max_domains:-1,max_storage_gb:-1,features:["all_features","dedicated_support","sla","custom_integrations"]}},_o=class _o{constructor(){}static getInstance(){return _o.instance||(_o.instance=new _o),_o.instance}async ensureTenantAdmin(){const t=await Qe.isTenantAdmin(),n=await Qe.hasPermission("tenants","update");if(!t&&!n)throw new Error("Not authorized to perform this operation")}async ensureCanManageUsers(){const t=await Qe.isTenantAdmin(),n=await Qe.hasPermission("users","create");if(!t&&!n)throw new Error("Not authorized to manage users")}async ensureCanManageDomains(){const t=await Qe.isTenantAdmin(),n=await Qe.hasPermission("domains","assign");if(!t&&!n)throw new Error("Not authorized to manage domains")}getCurrentTenantId(){const t=Qe.getCurrentTenantId();if(!t)throw new Error("No tenant context available");return t}async createTeacher(t){var r;if(await this.ensureCanManageUsers(),!t.email||!t.email.includes("@"))throw new Error("Invalid teacher data");if(!t.firstName||!t.lastName)throw new Error("Invalid teacher data");const n=this.getCurrentTenantId();try{const{data:a,error:i}=await L.from("profiles").insert({email:t.email,first_name:t.firstName,last_name:t.lastName}).select().single();if(i)throw i;const{data:o,error:l}=await L.from("user_roles").select("id").eq("name","teacher").single();if(l)throw new Error("Teacher role not found");const{error:c}=await L.from("user_tenants").upsert({user_id:a.user_id,tenant_id:n,role_id:o.id,status:"active",joined_at:new Date().toISOString()});if(c)throw c;return t.domains&&t.domains.length>0&&await this.assignTeacherToDomains(a.user_id,t.domains),await Qe.createAuditLog("teacher.create","users",a.user_id,{email:t.email,domains:t.domains}),{user_id:a.user_id,email:t.email,first_name:t.firstName,last_name:t.lastName,status:"active",domains:t.domains||[]}}catch(a){throw(r=a.message)!=null&&r.includes("Duplicate")?new Error("Duplicate email"):a}}async assignTeacherToDomains(t,n){await this.ensureCanManageDomains();const r=this.getCurrentTenantId(),{data:a,error:i}=await L.from("user_domains").select("domain_id").eq("user_id",t).eq("tenant_id",r);if(i)throw i;const o=(a==null?void 0:a.map(d=>d.domain_id))||[],l=n.filter(d=>!o.includes(d)),c=o.filter(d=>!n.includes(d));if(c.length>0){const{error:d}=await L.from("user_domains").delete().eq("user_id",t).in("domain_id",c);if(d)throw d}if(l.length>0){const d=l.map(h=>({user_id:t,domain_id:h,tenant_id:r})),{error:u}=await L.from("user_domains").insert(d);if(u)throw u}return await Qe.createAuditLog("teacher.assign_domains","users",t,{domains:n}),!0}async suspendTeacher(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{error:r}=await L.from("user_tenants").update({status:"suspended",updated_at:new Date().toISOString()}).eq("user_id",t).eq("tenant_id",n);if(r)throw r;return await Qe.createAuditLog("teacher.suspend","users",t,{status:"suspended"}),!0}async reactivateTeacher(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{error:r}=await L.from("user_tenants").update({status:"active",updated_at:new Date().toISOString()}).eq("user_id",t).eq("tenant_id",n);if(r)throw r;return await Qe.createAuditLog("teacher.reactivate","users",t,{status:"active"}),!0}async getTeachers(t){if(!await Qe.hasPermission("users","read"))throw new Error("Not authorized to view teachers");const a={p_tenant_id:this.getCurrentTenantId()};t!=null&&t.status&&(a.p_status=t.status),t!=null&&t.domainId&&(a.p_domain_id=t.domainId);const{data:i,error:o}=await L.rpc("get_tenant_teachers",a);if(o)throw o;return i||[]}async getTeacherStatistics(t){const n=this.getCurrentTenantId(),{data:r,error:a}=await L.rpc("get_teacher_statistics",{p_teacher_id:t,p_tenant_id:n});if(a)throw a;return r}async updateTenantSettings(t){if(!await Qe.isTenantAdmin())throw new Error("Not authorized to update tenant settings");const r=this.getCurrentTenantId();if(t.max_users||t.max_domains){const{data:o}=await L.from("tenants").select("subscription_tier").eq("id",r).single();if(o){const l=p2[o.subscription_tier];if(t.max_users&&l.max_users!==-1&&t.max_users>l.max_users)throw new Error("Exceeds subscription tier limits");if(t.max_domains&&l.max_domains!==-1&&t.max_domains>l.max_domains)throw new Error("Exceeds subscription tier limits")}}const{data:a,error:i}=await L.from("tenants").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(i)throw i;return await Qe.createAuditLog("tenant.update_settings","tenants",r,t),a}async getTenantSettings(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.from("tenants").select("*").eq("id",t).single();if(r)throw r;return n}async getTenantUsageStatistics(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.rpc("get_tenant_usage_statistics",{p_tenant_id:t});if(r)throw r;return n}async getSubscriptionLimits(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.from("tenants").select("subscription_tier").eq("id",t).single();if(r)throw r;return p2[n.subscription_tier]}async enableDomainForTenant(t){await this.ensureCanManageDomains();const n=this.getCurrentTenantId(),r=await this.getTenantUsageStatistics();if(r.max_domains!==-1&&r.total_domains>=r.max_domains)throw new Error("Domain limit reached for tenant");const{data:a}=await L.from("tenant_domains").select("is_active").eq("tenant_id",n).eq("domain_id",t).single();if(a){if(!a.is_active){const{error:i}=await L.from("tenant_domains").update({is_active:!0,updated_at:new Date().toISOString()}).eq("tenant_id",n).eq("domain_id",t).select().single();if(i)throw i}}else{const{error:i}=await L.from("tenant_domains").insert({tenant_id:n,domain_id:t,is_active:!0,max_teachers:10,max_students:100}).select().single();if(i)throw i}return await Qe.createAuditLog("domain.enable","domains",t,{tenant_id:n,is_active:!0}),!0}async disableDomainForTenant(t){await this.ensureCanManageDomains();const n=this.getCurrentTenantId(),{error:r}=await L.from("tenant_domains").update({is_active:!1,updated_at:new Date().toISOString()}).eq("tenant_id",n).eq("domain_id",t).select().single();if(r)throw r;return await Qe.createAuditLog("domain.disable","domains",t,{tenant_id:n,is_active:!1}),!0}async getTenantDomains(t){const r={p_tenant_id:this.getCurrentTenantId()};t!=null&&t.activeOnly&&(r.p_active_only=!0);const{data:a,error:i}=await L.rpc("get_tenant_domains",r);if(i)throw i;return a||[]}async getDomainUsageStatistics(t){const n=this.getCurrentTenantId(),{data:r,error:a}=await L.rpc("get_domain_usage_statistics",{p_domain_id:t,p_tenant_id:n});if(a)throw a;return r}async sendTeacherInvitation(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{data:r}=await L.from("invitations").select("status").eq("email",t.email).eq("tenant_id",n).eq("status","pending").single();if(r)throw new Error("User already has a pending invitation");const a=new Date;a.setDate(a.getDate()+7);const{data:i,error:o}=await L.from("invitations").insert({email:t.email,tenant_id:n,role:"teacher",status:"pending",token:crypto.randomUUID(),expires_at:a.toISOString(),metadata:{first_name:t.firstName,last_name:t.lastName,domains:t.domains,message:t.message}}).select().single();if(o)throw o;const{error:l}=await L.rpc("send_invitation_email",{p_invitation_id:i.id});return l&&console.error("Failed to send invitation email:",l),await Qe.createAuditLog("invitation.send","invitations",i.id,{email:t.email,role:"teacher"}),i}async resendInvitation(t){await this.ensureCanManageUsers();const{data:n}=await L.from("invitations").select("status").eq("id",t).single();if(!n)throw new Error("Invitation not found");if(n.status==="accepted")throw new Error("Invitation has already been accepted");const r=new Date;r.setDate(r.getDate()+7);const{error:a}=await L.from("invitations").update({expires_at:r.toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;const{error:i}=await L.rpc("send_invitation_email",{p_invitation_id:t});return i&&console.error("Failed to resend invitation email:",i),await Qe.createAuditLog("invitation.resend","invitations",t,null),!0}async cancelInvitation(t){await this.ensureCanManageUsers();const{error:n}=await L.from("invitations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return await Qe.createAuditLog("invitation.cancel","invitations",t,{status:"cancelled"}),!0}async getPendingInvitations(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.from("invitations").select("*").eq("tenant_id",t).eq("status","pending").order("created_at",{ascending:!1});if(r)throw r;return n||[]}async getInvitationStatistics(){const t=this.getCurrentTenantId(),{data:n,error:r}=await L.rpc("get_invitation_statistics",{p_tenant_id:t});if(r)throw r;return n}async bulkSuspendTeachers(t){await this.ensureCanManageUsers();const n=this.getCurrentTenantId(),{error:r}=await L.from("user_tenants").update({status:"suspended",updated_at:new Date().toISOString()}).eq("tenant_id",n).in("user_id",t);if(r)throw r;return await Qe.createAuditLog("teacher.bulk_suspend","users",null,{teacher_ids:t}),!0}async bulkAssignDomains(t){await this.ensureCanManageDomains();for(const n of t)await this.assignTeacherToDomains(n.teacherId,n.domains);return await Qe.createAuditLog("teacher.bulk_assign_domains","users",null,{assignments:t}),!0}};Bt(_o,"instance");let pb=_o;const Ns=pb.getInstance();function qO({onClose:e,onSuccess:t}){const{toast:n}=at(),[r,a]=f.useState({email:"",firstName:"",lastName:"",domains:[]}),[i,o]=f.useState({}),{data:l=[]}=yt({queryKey:["tenant-domains-active"],queryFn:()=>Ns.getTenantDomains({activeOnly:!0})}),c=En({mutationFn:m=>Ns.createTeacher(m),onSuccess:()=>{n({title:"Teacher Created",description:"The teacher account has been created successfully."}),t()},onError:m=>{n({title:"Error",description:m.message||"Failed to create teacher account.",variant:"destructive"})}}),d=()=>{const m={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(m.email="Invalid email address"):m.email="Email is required",r.firstName||(m.firstName="First name is required"),r.lastName||(m.lastName="Last name is required"),o(m),Object.keys(m).length===0},u=m=>{m.preventDefault(),d()&&c.mutate(r)},h=m=>{a(p=>({...p,domains:p.domains.includes(m)?p.domains.filter(v=>v!==m):[...p.domains,m]}))};return s.jsx(nn,{open:!0,onOpenChange:e,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Create New Teacher"}),s.jsx(Tn,{children:"Add a new teacher to your organization. They will receive an invitation email."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",children:"Email Address"}),s.jsx(pe,{id:"email",type:"email",value:r.email,onChange:m=>a({...r,email:m.target.value}),placeholder:"teacher@example.com"}),i.email&&s.jsx("p",{className:"text-sm text-destructive",children:i.email})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"firstName",children:"First Name"}),s.jsx(pe,{id:"firstName",value:r.firstName,onChange:m=>a({...r,firstName:m.target.value}),placeholder:"John"}),i.firstName&&s.jsx("p",{className:"text-sm text-destructive",children:i.firstName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"lastName",children:"Last Name"}),s.jsx(pe,{id:"lastName",value:r.lastName,onChange:m=>a({...r,lastName:m.target.value}),placeholder:"Doe"}),i.lastName&&s.jsx("p",{className:"text-sm text-destructive",children:i.lastName})]})]}),l.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{children:"Assign to Domains"}),s.jsx("div",{className:"border rounded-md p-4 space-y-2 max-h-40 overflow-y-auto",children:l.map(m=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hr,{id:m.domain_id,checked:r.domains.includes(m.domain_id),onCheckedChange:()=>h(m.domain_id)}),s.jsx(Q,{htmlFor:m.domain_id,className:"text-sm font-normal cursor-pointer",children:m.domain_name})]},m.domain_id))})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(z,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),s.jsx(z,{type:"submit",disabled:c.isPending,children:c.isPending?"Creating...":"Create Teacher"})]})]})]})})}function ele({onClose:e,onSuccess:t}){const{toast:n}=at(),[r,a]=f.useState({email:"",firstName:"",lastName:"",domains:[],message:""}),[i,o]=f.useState({}),{data:l=[]}=yt({queryKey:["tenant-domains-active"],queryFn:()=>Ns.getTenantDomains({activeOnly:!0})}),c=En({mutationFn:m=>Ns.sendTeacherInvitation(m),onSuccess:()=>{n({title:"Invitation Sent",description:"The invitation has been sent successfully."}),t()},onError:m=>{n({title:"Error",description:m.message||"Failed to send invitation.",variant:"destructive"})}}),d=()=>{const m={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(m.email="Invalid email address"):m.email="Email is required",r.firstName||(m.firstName="First name is required"),r.lastName||(m.lastName="Last name is required"),o(m),Object.keys(m).length===0},u=m=>{m.preventDefault(),d()&&c.mutate(r)},h=m=>{a(p=>({...p,domains:p.domains.includes(m)?p.domains.filter(v=>v!==m):[...p.domains,m]}))};return s.jsx(nn,{open:!0,onOpenChange:e,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Send Teacher Invitation"}),s.jsx(Tn,{children:"Invite a new teacher to join your organization. They will receive an email with instructions."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",children:"Email Address"}),s.jsx(pe,{id:"email",type:"email",value:r.email,onChange:m=>a({...r,email:m.target.value}),placeholder:"teacher@example.com"}),i.email&&s.jsx("p",{className:"text-sm text-destructive",children:i.email})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"firstName",children:"First Name"}),s.jsx(pe,{id:"firstName",value:r.firstName,onChange:m=>a({...r,firstName:m.target.value}),placeholder:"John"}),i.firstName&&s.jsx("p",{className:"text-sm text-destructive",children:i.firstName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"lastName",children:"Last Name"}),s.jsx(pe,{id:"lastName",value:r.lastName,onChange:m=>a({...r,lastName:m.target.value}),placeholder:"Doe"}),i.lastName&&s.jsx("p",{className:"text-sm text-destructive",children:i.lastName})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"message",children:"Personal Message (Optional)"}),s.jsx(Fn,{id:"message",value:r.message,onChange:m=>a({...r,message:m.target.value}),placeholder:"Welcome to our school! We're excited to have you join our team...",rows:3})]}),l.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{children:"Pre-assign Domains"}),s.jsx("div",{className:"border rounded-md p-4 space-y-2 max-h-40 overflow-y-auto",children:l.map(m=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hr,{id:`invite-${m.domain_id}`,checked:r.domains.includes(m.domain_id),onCheckedChange:()=>h(m.domain_id)}),s.jsx(Q,{htmlFor:`invite-${m.domain_id}`,className:"text-sm font-normal cursor-pointer",children:m.domain_name})]},m.domain_id))})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(z,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),s.jsx(z,{type:"submit",disabled:c.isPending,children:c.isPending?"Sending...":"Send Invitation"})]})]})]})})}function tle(){const{session:e,isTenantAdmin:t,hasPermission:n,authState:r}=dn(),a=pt(),i=Nn(),[o,l]=f.useState(!1),[c,d]=f.useState(!1),u=n("users","create"),h=n("domains","assign"),m=n("tenants","update"),{data:p,isLoading:v}=yt({queryKey:["tenant-settings"],queryFn:()=>Ns.getTenantSettings(),enabled:!!e}),{data:x,isLoading:y,error:g,refetch:b}=yt({queryKey:["tenant-usage"],queryFn:()=>Ns.getTenantUsageStatistics(),enabled:!!e}),{data:w=[],isLoading:C}=yt({queryKey:["tenant-teachers"],queryFn:()=>Ns.getTeachers(),enabled:!!e&&u}),{data:_=[],isLoading:S}=yt({queryKey:["tenant-domains"],queryFn:()=>Ns.getTenantDomains(),enabled:!!e&&h}),N=w.filter(F=>F.status==="active").length,j=w.filter(F=>F.status==="suspended").length,k=_.filter(F=>F.is_active).length;_.filter(F=>!F.is_active).length;const T=x&&x.max_users>0&&x.total_users/x.max_users>.9,A=x&&x.max_domains>0&&x.total_domains/x.max_domains>.9,R=()=>{i.invalidateQueries({queryKey:["tenant-usage"]}),i.invalidateQueries({queryKey:["tenant-teachers"]}),i.invalidateQueries({queryKey:["tenant-domains"]})};return r==="authenticating"||v?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{"data-testid":"loading-spinner",className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):!t&&!u&&!h&&!m?s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(mc,{children:"Access Denied"}),s.jsx(Ut,{children:"You don't have permission to access the tenant administration dashboard."})]})}):g?s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(mc,{children:"Error"}),s.jsxs(Ut,{children:["Failed to load dashboard data. Please try again.",s.jsx(z,{onClick:()=>b(),variant:"outline",size:"sm",className:"ml-2",children:"Retry"})]})]})}):s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:(p==null?void 0:p.name)||"Tenant Administration"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's teachers, domains, and settings"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"secondary",className:"text-sm",children:p!=null&&p.subscription_tier?p.subscription_tier.charAt(0).toUpperCase()+p.subscription_tier.slice(1):"Free"}),s.jsx(z,{onClick:R,variant:"outline",size:"icon",children:s.jsx(cs,{className:"h-4 w-4"})})]})]}),(T||A)&&s.jsxs(Ot,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(mc,{children:"Approaching Limits"}),s.jsxs(Ut,{children:[T&&s.jsxs("p",{children:["Approaching user limit (",x==null?void 0:x.total_users," / ",x==null?void 0:x.max_users,")"]}),A&&s.jsxs("p",{children:["Approaching domain limit (",x==null?void 0:x.total_domains," / ",x==null?void 0:x.max_domains,")"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(x==null?void 0:x.total_users)||0," / ",(x==null?void 0:x.max_users)||"∞"]}),(x==null?void 0:x.max_users)>0&&s.jsx(Br,{value:x.total_users/x.max_users*100,className:"mt-2"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Domains"}),s.jsx(Js,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(x==null?void 0:x.total_domains)||0," / ",(x==null?void 0:x.max_domains)||"∞"]}),(x==null?void 0:x.max_domains)>0&&s.jsx(Br,{value:x.total_domains/x.max_domains*100,className:"mt-2"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Storage"}),s.jsx(_A,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(x==null?void 0:x.storage_used_gb)||0," GB / ",(x==null?void 0:x.storage_limit_gb)||"∞"," GB"]}),(x==null?void 0:x.storage_limit_gb)>0&&s.jsx(Br,{value:x.storage_used_gb/x.storage_limit_gb*100,className:"mt-2"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Active Teachers"}),s.jsx(yw,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:N}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j>0&&`${j} Suspended`})]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Quick Actions"}),s.jsx(we,{children:"Common administrative tasks"})]}),s.jsxs(W,{className:"flex flex-wrap gap-2",children:[u&&s.jsxs(z,{onClick:()=>l(!0),children:[s.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Add Teacher"]}),h&&s.jsxs(z,{variant:"outline",onClick:()=>a("/admin/domains"),children:[s.jsx(Js,{className:"mr-2 h-4 w-4"}),"Manage Domains"]}),u&&s.jsxs(z,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(Qo,{className:"mr-2 h-4 w-4"}),"Send Invitation"]}),m&&s.jsxs(z,{variant:"outline",onClick:()=>a("/admin/settings"),children:[s.jsx(kt,{className:"mr-2 h-4 w-4"}),"Settings"]})]})]}),s.jsxs(Qr,{defaultValue:"teachers",className:"space-y-4",children:[s.jsxs(wr,{className:"grid grid-cols-4 w-full",children:[s.jsx(Je,{value:"teachers",children:"Teachers"}),s.jsx(Je,{value:"domains",children:"Domains"}),m&&s.jsx(Je,{value:"settings",children:"Settings"}),s.jsx(Je,{value:"invitations",children:"Invitations"})]}),s.jsx(Ze,{value:"teachers",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Teachers Overview"}),s.jsxs(we,{children:[w.length," Total • ",N," Active • ",j," Suspended"]})]}),s.jsx(W,{children:C?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{className:"h-12 w-full"}),s.jsx(Pe,{className:"h-12 w-full"})]}):w.length>0?s.jsxs("div",{className:"space-y-2",children:[w.slice(0,5).map(F=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[F.first_name," ",F.last_name]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:F.email})]}),s.jsx(X,{variant:F.status==="active"?"default":"secondary",children:F.status})]},F.user_id)),w.length>5&&s.jsx(z,{variant:"link",className:"w-full",onClick:()=>a("/admin/teachers"),children:"View All Teachers →"})]}):s.jsx("p",{className:"text-muted-foreground",children:"No teachers found"})})]})}),s.jsx(Ze,{value:"domains",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Domain Overview"}),s.jsxs(we,{children:[_.length," Total Domains • ",k," Active"]})]}),s.jsx(W,{children:s.jsx("div",{"data-testid":"domain-usage-chart",className:"h-64 flex items-center justify-center border rounded",children:s.jsx("p",{className:"text-muted-foreground",children:"Domain Usage Chart"})})})]})}),m&&s.jsx(Ze,{value:"settings",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Tenant Settings"}),s.jsx(we,{children:"Configure your organization settings"})]}),s.jsx(W,{children:s.jsx(z,{onClick:()=>a("/admin/settings"),children:"Open Settings →"})})]})}),s.jsx(Ze,{value:"invitations",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Invitations"}),s.jsx(we,{children:"Manage pending invitations"})]}),s.jsx(W,{children:s.jsx(z,{onClick:()=>a("/admin/invitations"),children:"Manage Invitations →"})})]})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Recent Activity"}),s.jsx(we,{children:"Latest actions in your organization"})]}),s.jsx(W,{children:s.jsx("div",{className:"space-y-2",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Activity feed will be displayed here"})})})]}),o&&s.jsx(qO,{onClose:()=>l(!1),onSuccess:()=>{l(!1),i.invalidateQueries({queryKey:["tenant-teachers"]})}}),c&&s.jsx(ele,{onClose:()=>d(!1),onSuccess:()=>{d(!1)}})]})}function nle({teacher:e,onClose:t,onSuccess:n}){const{toast:r}=at(),[a,i]=f.useState([]);f.useEffect(()=>{i(e.domains||[])},[e]);const{data:o=[],isLoading:l}=yt({queryKey:["tenant-domains-active"],queryFn:()=>Ns.getTenantDomains({activeOnly:!0})}),c=En({mutationFn:()=>Ns.assignTeacherToDomains(e.user_id,a),onSuccess:()=>{r({title:"Domains Updated",description:"Teacher domain assignments have been updated."}),n()},onError:h=>{r({title:"Error",description:h.message||"Failed to update domain assignments.",variant:"destructive"})}}),d=h=>{i(m=>m.includes(h)?m.filter(p=>p!==h):[...m,h])},u=()=>{c.mutate()};return s.jsx(nn,{open:!0,onOpenChange:t,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Manage Domain Assignments"}),s.jsxs(Tn,{children:["Assign domains to ",e.first_name," ",e.last_name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:"outline",children:e.email}),s.jsx(X,{variant:e.status==="active"?"default":"secondary",children:e.status})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Hn,{className:"h-6 w-6 animate-spin"})}):o.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"No active domains available for assignment."}):s.jsx("div",{className:"border rounded-md p-4 space-y-2 max-h-60 overflow-y-auto",children:o.map(h=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hr,{id:`assign-${h.domain_id}`,checked:a.includes(h.domain_id),onCheckedChange:()=>d(h.domain_id)}),s.jsx(Q,{htmlFor:`assign-${h.domain_id}`,className:"text-sm font-normal cursor-pointer",children:h.domain_name})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[h.teacher_count," teachers"]}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:[h.student_count," students"]})]})]},h.domain_id))}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," domain(s) selected"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(z,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(z,{onClick:u,disabled:c.isPending||l,children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Hn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Assignments"})]})]})]})]})})}function sle(){const{toast:e}=at(),t=Nn(),[n,r]=f.useState(""),[a,i]=f.useState("all"),[o,l]=f.useState([]),[c,d]=f.useState(!1),[u,h]=f.useState(null),{data:m=[],isLoading:p,error:v}=yt({queryKey:["teachers",a],queryFn:()=>Ns.getTeachers(a!=="all"?{status:a}:void 0)}),x=En({mutationFn:S=>Ns.suspendTeacher(S),onSuccess:()=>{e({title:"Teacher Suspended",description:"The teacher account has been suspended."}),t.invalidateQueries({queryKey:["teachers"]})},onError:S=>{e({title:"Error",description:S.message||"Failed to suspend teacher.",variant:"destructive"})}}),y=En({mutationFn:S=>Ns.reactivateTeacher(S),onSuccess:()=>{e({title:"Teacher Reactivated",description:"The teacher account has been reactivated."}),t.invalidateQueries({queryKey:["teachers"]})},onError:S=>{e({title:"Error",description:S.message||"Failed to reactivate teacher.",variant:"destructive"})}}),g=En({mutationFn:S=>Ns.bulkSuspendTeachers(S),onSuccess:()=>{e({title:"Teachers Suspended",description:`${o.length} teacher(s) have been suspended.`}),l([]),t.invalidateQueries({queryKey:["teachers"]})},onError:S=>{e({title:"Error",description:S.message||"Failed to suspend teachers.",variant:"destructive"})}}),b=m.filter(S=>{const N=n.toLowerCase();return S.email.toLowerCase().includes(N)||S.first_name.toLowerCase().includes(N)||S.last_name.toLowerCase().includes(N)}),w=S=>{l(S?b.map(N=>N.user_id):[])},C=(S,N)=>{l(N?[...o,S]:o.filter(j=>j!==S))},_=()=>{o.length>0&&g.mutate(o)};return v?s.jsx("div",{className:"p-6",children:s.jsx(V,{children:s.jsx(W,{className:"p-6",children:s.jsx("p",{className:"text-destructive",children:"Failed to load teachers. Please try again."})})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Teacher Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage teacher accounts and permissions"})]}),s.jsxs(z,{onClick:()=>d(!0),children:[s.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Add Teacher"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Teachers"}),s.jsx(yw,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(W,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Active"}),s.jsx(ln,{className:"h-4 w-4 text-green-600"})]}),s.jsx(W,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.filter(S=>S.status==="active").length})})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Suspended"}),s.jsx(_y,{className:"h-4 w-4 text-red-600"})]}),s.jsx(W,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.filter(S=>S.status==="suspended").length})})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rn,{className:"h-5 w-5 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search teachers...",value:n,onChange:S=>r(S.target.value),className:"w-64"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Ve,{value:a,onValueChange:S=>i(S),children:[s.jsx(ze,{className:"w-40",children:s.jsx(qe,{placeholder:"Filter by status"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:"active",children:"Active"}),s.jsx(le,{value:"suspended",children:"Suspended"}),s.jsx(le,{value:"invited",children:"Invited"})]})]}),o.length>0&&s.jsxs(z,{variant:"destructive",onClick:_,disabled:g.isPending,children:["Suspend Selected (",o.length,")"]})]})]})}),s.jsx(W,{children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{className:"w-12",children:s.jsx(Hr,{checked:o.length===b.length&&b.length>0,onCheckedChange:w})}),s.jsx(Ee,{children:"Name"}),s.jsx(Ee,{children:"Email"}),s.jsx(Ee,{children:"Status"}),s.jsx(Ee,{children:"Domains"}),s.jsx(Ee,{className:"text-right",children:"Actions"})]})}),s.jsx(Qs,{children:p?s.jsx(ut,{children:s.jsx(be,{colSpan:6,className:"text-center py-8",children:"Loading teachers..."})}):b.length===0?s.jsx(ut,{children:s.jsx(be,{colSpan:6,className:"text-center py-8",children:"No teachers found"})}):b.map(S=>{var N;return s.jsxs(ut,{children:[s.jsx(be,{children:s.jsx(Hr,{checked:o.includes(S.user_id),onCheckedChange:j=>C(S.user_id,j)})}),s.jsxs(be,{className:"font-medium",children:[S.first_name," ",S.last_name]}),s.jsx(be,{children:S.email}),s.jsx(be,{children:s.jsx(X,{variant:S.status==="active"?"default":S.status==="suspended"?"destructive":"secondary",children:S.status})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Js,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:((N=S.domains)==null?void 0:N.length)||0})]})}),s.jsx(be,{className:"text-right",children:s.jsxs(Ox,{children:[s.jsx(Fx,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(T$,{className:"h-4 w-4"})})}),s.jsxs(Kh,{align:"end",children:[s.jsx(BN,{children:"Actions"}),s.jsx(VN,{}),s.jsxs($s,{onClick:()=>h(S),children:[s.jsx(Js,{className:"mr-2 h-4 w-4"}),"Manage Domains"]}),S.status==="active"?s.jsxs($s,{onClick:()=>x.mutate(S.user_id),className:"text-destructive",children:[s.jsx(_y,{className:"mr-2 h-4 w-4"}),"Suspend"]}):s.jsxs($s,{onClick:()=>y.mutate(S.user_id),className:"text-green-600",children:[s.jsx(ln,{className:"mr-2 h-4 w-4"}),"Reactivate"]})]})]})})]},S.user_id)})})]})})]}),c&&s.jsx(qO,{onClose:()=>d(!1),onSuccess:()=>{d(!1),t.invalidateQueries({queryKey:["teachers"]})}}),u&&s.jsx(nle,{teacher:u,onClose:()=>h(null),onSuccess:()=>{h(null),t.invalidateQueries({queryKey:["teachers"]})}})]})}function Mm(){pt();const{authorized:e,loading:t}=w9({requiredRole:"tenant_admin",redirectTo:"/unauthorized"});return t?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(Hn,{className:"h-8 w-8 animate-spin"})}):e?s.jsx(gd,{resource:"page:tenant_admin",action:"read",children:s.jsx("div",{className:"container mx-auto py-6",children:s.jsxs(Vd,{children:[s.jsx(Ce,{index:!0,element:s.jsx(tle,{})}),s.jsx(Ce,{path:"teachers",element:s.jsx(rle,{})}),s.jsx(Ce,{path:"domains",element:s.jsx(ale,{})}),s.jsx(Ce,{path:"settings",element:s.jsx(ile,{})}),s.jsx(Ce,{path:"invitations",element:s.jsx(ole,{})}),s.jsx(Ce,{path:"*",element:s.jsx(Os,{to:"/admin",replace:!0})})]})})}):s.jsx(Os,{to:"/unauthorized",replace:!0})}function rle(){return s.jsx("div",{className:"space-y-6",children:s.jsx(sle,{})})}function ale(){const{hasPermission:e}=dn();return e("domains","assign")?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Domain Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Domain management interface will be implemented here."})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to manage domains."})})}function ile(){const{hasPermission:e}=dn();return e("tenants","update")?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Tenant Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Tenant settings interface will be implemented here."})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to manage tenant settings."})})}function ole(){const{hasPermission:e}=dn();return e("users","invite")?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Invitations"}),s.jsx("p",{className:"text-muted-foreground",children:"Invitations management interface will be implemented here."})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to manage invitations."})})}const Co=class Co{constructor(){Bt(this,"cache",new Map);Bt(this,"CACHE_TTL",5*60*1e3);Bt(this,"auditLoggingEnabled",!1);Bt(this,"currentTenantId",null)}static getInstance(){return Co.instance||(Co.instance=new Co),Co.instance}async checkAccess(t,n){var r,a;try{const{data:{session:i},error:o}=await L.auth.getSession();if(o||!(i!=null&&i.user))return!1;const l=i.user.id,c=i.user.email;if(((r=i.user.app_metadata)==null?void 0:r.is_platform_admin)===!0||c==="admin@gemeos.ai")return this.auditLoggingEnabled&&await this.createAuditLog({action:"permission_check",resource_type:t,resource_action:n,user_id:l,result:!0}),!0;const u=`${l}:${t}:${n}`,h=this.cache.get(u);if(h&&Date.now()-h.timestamp<this.CACHE_TTL)return this.auditLoggingEnabled&&await this.createAuditLog({action:"permission_check",resource_type:t,resource_action:n,user_id:l,result:h.value}),h.value;const m=(a=i.user.app_metadata)==null?void 0:a.role;if(!m)return!1;const{data:p,error:v}=await L.from("role_permissions").select("*, permission:permissions!inner(*)").eq("permission.resource",t).eq("permission.action",n).eq("role_id",m).maybeSingle(),x=!!p&&!v;return this.cache.set(u,{value:x,timestamp:Date.now()}),this.auditLoggingEnabled&&await this.createAuditLog({action:"permission_check",resource_type:t,resource_action:n,user_id:l,result:x}),x}catch(i){return console.error("Error checking access:",i),!1}}async checkAccessWithDetails(t,n){var r,a,i;try{if(await this.checkAccess(t,n))return{hasAccess:!0};const{data:{session:l}}=await L.auth.getSession(),c=((a=(r=l==null?void 0:l.user)==null?void 0:r.app_metadata)==null?void 0:a.role)||"unknown",{data:d}=await L.from("role_permissions").select("role:roles!inner(name)").eq("permission.resource",t).eq("permission.action",n).limit(1).maybeSingle();return{hasAccess:!1,reason:`User with role '${c}' has insufficient permissions for ${n} on ${t}`,requiredRole:(i=d==null?void 0:d.role)==null?void 0:i.name}}catch{return{hasAccess:!1,reason:"Error checking permissions"}}}async canAccessRoute(t){var n,r;try{const{data:{session:a},error:i}=await L.auth.getSession();if(i||!(a!=null&&a.user))return!1;if(((n=a.user.app_metadata)==null?void 0:n.is_platform_admin)===!0||a.user.email==="admin@gemeos.ai")return!0;const l=(r=a.user.app_metadata)==null?void 0:r.role;if(!l)return!1;let{data:c}=await L.from("pages").select("id, path").eq("path",t).maybeSingle();if(!c){const{data:u}=await L.from("pages").select("id, path"),h=u==null?void 0:u.find(m=>{if(!m.path.includes(":"))return!1;const p=m.path.replace(/:[\w-]+/g,"[^/]+");return new RegExp(`^${p}$`).test(t)});h&&(c=h)}if(!c)return!1;const{data:d}=await L.from("page_permissions").select("*").eq("page_id",c.id).eq("role",l).eq("is_active",!0).maybeSingle();return!!d}catch(a){return console.error("Error checking route access:",a),!1}}async checkMultiplePermissions(t){var r,a;const n={};try{const{data:{session:i},error:o}=await L.auth.getSession();if(o||!(i!=null&&i.user))return t.forEach(h=>{n[`${h.resource}:${h.action}`]=!1}),n;if(((r=i.user.app_metadata)==null?void 0:r.is_platform_admin)===!0||i.user.email==="admin@gemeos.ai")return t.forEach(h=>{n[`${h.resource}:${h.action}`]=!0}),n;const c=(a=i.user.app_metadata)==null?void 0:a.role;if(!c)return t.forEach(h=>{n[`${h.resource}:${h.action}`]=!1}),n;const d=t.map(h=>`(resource.eq.${h.resource},action.eq.${h.action})`),{data:u}=await L.from("role_permissions").select("permission:permissions!inner(resource, action)").eq("role_id",c).in("permission.resource",t.map(h=>h.resource));return t.forEach(h=>{const m=u==null?void 0:u.some(p=>{var v,x;return((v=p.permission)==null?void 0:v.resource)===h.resource&&((x=p.permission)==null?void 0:x.action)===h.action});n[`${h.resource}:${h.action}`]=!!m}),n}catch(i){return console.error("Error checking multiple permissions:",i),t.forEach(o=>{n[`${o.resource}:${o.action}`]=!1}),n}}async updatePermission(t,n,r,a){try{await this.createAuditLog({action:"permission_update",resource_type:"permission",changes:{user_id:t,resource:n,action:r,granted:a}}),a?await L.from("user_permissions").upsert({user_id:t,resource:n,action:r,created_at:new Date().toISOString()}):await L.from("user_permissions").delete().eq("user_id",t).eq("resource",n).eq("action",r),this.clearUserCache(t)}catch(i){throw console.error("Error updating permission:",i),i}}async bulkUpdatePermissions(t){try{for(const n of t)await this.updatePermission(n.user_id,n.resource,n.action,n.granted)}catch(n){throw console.error("Error in bulk permission update:",n),n}}async switchTenant(t){this.currentTenantId=t,this.cache.clear(),localStorage.setItem("current_tenant_id",t)}clearUserCache(t){const n=[];this.cache.forEach((r,a)=>{a.startsWith(`${t}:`)&&n.push(a)}),n.forEach(r=>this.cache.delete(r))}clearCache(){this.cache.clear()}getCacheSize(){return this.cache.size}enableAuditLogging(t){this.auditLoggingEnabled=t}async createAuditLog(t){var n;try{const{data:{session:r}}=await L.auth.getSession();await L.from("audit_logs").insert({tenant_id:this.currentTenantId,user_id:t.user_id||((n=r==null?void 0:r.user)==null?void 0:n.id),action:t.action,resource_type:t.resource_type,resource_id:t.resource_id,changes:{...t.changes,resource_action:t.resource_action,result:t.result},created_at:new Date().toISOString()})}catch(r){console.error("Error creating audit log:",r)}}async getUserAccessibleRoutes(){var t,n;try{const{data:{session:r},error:a}=await L.auth.getSession();if(a||!(r!=null&&r.user))return[];if(((t=r.user.app_metadata)==null?void 0:t.is_platform_admin)===!0||r.user.email==="admin@gemeos.ai"){const{data:c}=await L.from("pages").select("path");return(c==null?void 0:c.map(d=>d.path))||[]}const o=(n=r.user.app_metadata)==null?void 0:n.role;if(!o)return[];const{data:l}=await L.from("page_permissions").select("page:pages!inner(path)").eq("role",o).eq("is_active",!0);return(l==null?void 0:l.map(c=>c.page.path))||[]}catch(r){return console.error("Error getting accessible routes:",r),[]}}};Bt(Co,"instance");let xb=Co;const Il=xb.getInstance();function lle({open:e,onClose:t,onSuccess:n}){const{toast:r}=at(),a=Nn(),[i,o]=f.useState({name:"",slug:"",description:"",subscription_tier:"free",max_users:10,max_domains:2,status:"active",settings:{}}),[l,c]=f.useState({checking:!1,available:null}),[d,u]=f.useState({});f.useEffect(()=>{if(i.name&&!i.slug){const x=Qn.generateSlug(i.name);o(y=>({...y,slug:x}))}},[i.name,i.slug]),f.useEffect(()=>{const y=setTimeout(async()=>{if(!i.slug||i.slug.length<3){c({checking:!1,available:null});return}c({checking:!0,available:null});try{const g=await Qn.isSlugAvailable(i.slug);c({checking:!1,available:g})}catch{c({checking:!1,available:null})}},500);return()=>clearTimeout(y)},[i.slug]);const h=En({mutationFn:x=>Qn.createTenant(x),onSuccess:()=>{r({title:"Tenant Created",description:"The tenant has been created successfully."}),a.invalidateQueries({queryKey:["tenants"]}),n(),v()},onError:x=>{r({title:"Error",description:x.message||"Failed to create tenant.",variant:"destructive"})}}),m=()=>{var y,g;const x={};return(y=i.name)!=null&&y.trim()||(x.name="Company name is required"),(g=i.slug)!=null&&g.trim()?/^[a-z0-9-]+$/.test(i.slug)?l.available===!1&&(x.slug="This slug is already taken"):x.slug="Slug must contain only lowercase letters, numbers, and hyphens":x.slug="Slug is required",i.max_users&&i.max_users<1&&(x.max_users="Max users must be at least 1"),i.max_domains&&i.max_domains<1&&(x.max_domains="Max domains must be at least 1"),u(x),Object.keys(x).length===0},p=x=>{x.preventDefault(),m()&&l.available!==!1&&h.mutate(i)},v=()=>{o({name:"",slug:"",description:"",subscription_tier:"free",max_users:10,max_domains:2,status:"active",settings:{}}),u({}),c({checking:!1,available:null}),t()};return s.jsx(nn,{open:e,onOpenChange:v,children:s.jsxs(Kt,{className:"sm:max-w-[600px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Create New Tenant"}),s.jsx(Tn,{children:"Create a new company tenant that can have users and learning domains assigned to it."})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"name",children:"Company Name *"}),s.jsx(pe,{id:"name",value:i.name,onChange:x=>o({...i,name:x.target.value}),placeholder:"e.g., Acme Corporation"}),d.name&&s.jsx("p",{className:"text-sm text-destructive",children:d.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"slug",children:"Slug (URL identifier) *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"slug",value:i.slug,onChange:x=>o({...i,slug:x.target.value.toLowerCase()}),placeholder:"acme-corp",className:"pr-10"}),s.jsxs("div",{className:"absolute right-3 top-3",children:[l.checking&&s.jsx(Hn,{className:"h-4 w-4 animate-spin text-muted-foreground"}),!l.checking&&l.available===!0&&s.jsx(ln,{className:"h-4 w-4 text-green-600"}),!l.checking&&l.available===!1&&s.jsx(ft,{className:"h-4 w-4 text-destructive"})]})]}),i.slug&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["URL: https://yourdomain.com/",i.slug]}),d.slug&&s.jsx("p",{className:"text-sm text-destructive",children:d.slug}),l.available===!1&&s.jsx("p",{className:"text-sm text-destructive",children:"This slug is already taken"}),l.available===!0&&s.jsx("p",{className:"text-sm text-green-600",children:"Slug is available"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"description",children:"Description"}),s.jsx(Fn,{id:"description",value:i.description,onChange:x=>o({...i,description:x.target.value}),placeholder:"Brief description of the company or organization...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"subscription_tier",children:"Subscription Tier"}),s.jsxs(Ve,{value:i.subscription_tier,onValueChange:x=>o({...i,subscription_tier:x}),children:[s.jsx(ze,{children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"free",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"secondary",children:"Free"}),s.jsx("span",{children:"Basic features"})]})}),s.jsx(le,{value:"basic",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"outline",children:"Basic"}),s.jsx("span",{children:"Standard features"})]})}),s.jsx(le,{value:"premium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{variant:"default",children:"Premium"}),s.jsx("span",{children:"Advanced features"})]})}),s.jsx(le,{value:"enterprise",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{className:"bg-purple-600",children:"Enterprise"}),s.jsx("span",{children:"All features"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"status",children:"Status"}),s.jsxs(Ve,{value:i.status,onValueChange:x=>o({...i,status:x}),children:[s.jsx(ze,{children:s.jsx(qe,{})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"active",children:"Active"}),s.jsx(le,{value:"trial",children:"Trial"}),s.jsx(le,{value:"suspended",children:"Suspended"}),s.jsx(le,{value:"inactive",children:"Inactive"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"max_users",children:"Max Users"}),s.jsx(pe,{id:"max_users",type:"number",min:"1",value:i.max_users,onChange:x=>o({...i,max_users:parseInt(x.target.value)||10})}),d.max_users&&s.jsx("p",{className:"text-sm text-destructive",children:d.max_users})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"max_domains",children:"Max Learning Domains"}),s.jsx(pe,{id:"max_domains",type:"number",min:"1",value:i.max_domains,onChange:x=>o({...i,max_domains:parseInt(x.target.value)||2})}),d.max_domains&&s.jsx("p",{className:"text-sm text-destructive",children:d.max_domains})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(z,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),s.jsx(z,{type:"submit",disabled:h.isPending||l.checking||l.available===!1,children:h.isPending?"Creating...":"Create Tenant"})]})]})]})})}function cle({onEditTenant:e,onViewTenant:t,onAssignDomains:n,onInviteTenantAdmin:r}){const{toast:a}=at(),i=Nn(),[o,l]=f.useState({}),[c,d]=f.useState(""),{data:u=[],isLoading:h,error:m,refetch:p}=yt({queryKey:["tenants",o],queryFn:()=>Qn.getTenants(o)}),v=En({mutationFn:_=>Qn.deleteTenant(_),onSuccess:()=>{a({title:"Tenant Deleted",description:"The tenant has been deactivated successfully."}),i.invalidateQueries({queryKey:["tenants"]})},onError:_=>{a({title:"Error",description:_.message||"Failed to delete tenant.",variant:"destructive"})}}),x=u.filter(_=>!c||_.name.toLowerCase().includes(c.toLowerCase())||_.slug.toLowerCase().includes(c.toLowerCase())),y=_=>{d(_)},g=(_,S)=>{l(N=>({...N,[_]:S==="all"?void 0:S}))},b=_=>{const S={active:"default",trial:"secondary",suspended:"destructive",inactive:"outline"};return s.jsx(X,{variant:S[_],children:_})},w=_=>{const S={free:"bg-gray-100 text-gray-800",basic:"bg-blue-100 text-blue-800",premium:"bg-purple-100 text-purple-800",enterprise:"bg-gold-100 text-gold-800"};return s.jsx(X,{className:S[_]||"bg-gray-100 text-gray-800",children:_})},C=_=>{confirm(`Are you sure you want to deactivate "${_.name}"? This action will set the tenant status to inactive.`)&&v.mutate(_.id)};return m?s.jsxs("div",{className:"text-center py-8 text-destructive",children:[s.jsxs("p",{children:["Error loading tenants: ",m.message]}),s.jsxs(z,{onClick:()=>p(),variant:"outline",className:"mt-2",children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Rn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search tenants...",value:c,onChange:_=>y(_.target.value),className:"pl-10"})]}),s.jsxs(Ve,{value:o.status||"all",onValueChange:_=>g("status",_),children:[s.jsx(ze,{className:"w-32",children:s.jsx(qe,{placeholder:"Status"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:"active",children:"Active"}),s.jsx(le,{value:"trial",children:"Trial"}),s.jsx(le,{value:"suspended",children:"Suspended"}),s.jsx(le,{value:"inactive",children:"Inactive"})]})]}),s.jsxs(Ve,{value:o.subscription_tier||"all",onValueChange:_=>g("subscription_tier",_),children:[s.jsx(ze,{className:"w-36",children:s.jsx(qe,{placeholder:"Tier"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Tiers"}),s.jsx(le,{value:"free",children:"Free"}),s.jsx(le,{value:"basic",children:"Basic"}),s.jsx(le,{value:"premium",children:"Premium"}),s.jsx(le,{value:"enterprise",children:"Enterprise"})]})]}),s.jsx(z,{onClick:()=>p(),variant:"outline",size:"icon",children:s.jsx(cs,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"Company"}),s.jsx(Ee,{children:"Status"}),s.jsx(Ee,{children:"Subscription"}),s.jsx(Ee,{children:"Users"}),s.jsx(Ee,{children:"Domains"}),s.jsx(Ee,{children:"Created"}),s.jsx(Ee,{className:"text-right",children:"Actions"})]})}),s.jsx(Qs,{children:h?s.jsx(ut,{children:s.jsx(be,{colSpan:7,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(cs,{className:"h-4 w-4 animate-spin mr-2"}),"Loading tenants..."]})})}):x.length===0?s.jsx(ut,{children:s.jsxs(be,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[s.jsx(Yn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No tenants found"}),c&&s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})}):x.map(_=>s.jsxs(ut,{children:[s.jsx(be,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:_.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:_.slug})]})}),s.jsx(be,{children:b(_.status)}),s.jsx(be,{children:w(_.subscription_tier)}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:["0/",_.max_users]})]})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(rt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:["0/",_.max_domains]})]})}),s.jsx(be,{className:"text-sm text-muted-foreground",children:new Date(_.created_at).toLocaleDateString()}),s.jsx(be,{className:"text-right",children:s.jsxs(Ox,{children:[s.jsx(Fx,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"icon",children:s.jsx(kA,{className:"h-4 w-4"})})}),s.jsxs(Kh,{align:"end",children:[t&&s.jsxs($s,{onClick:()=>t(_),children:[s.jsx(fr,{className:"h-4 w-4 mr-2"}),"View Details"]}),r&&s.jsxs($s,{onClick:()=>r(_),children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Invite Admin"]}),n&&s.jsxs($s,{onClick:()=>n(_),children:[s.jsx(Nw,{className:"h-4 w-4 mr-2"}),"Assign Domains"]}),e&&s.jsxs($s,{onClick:()=>e(_),children:[s.jsx(ul,{className:"h-4 w-4 mr-2"}),"Edit Tenant"]}),s.jsxs($s,{onClick:()=>C(_),className:"text-destructive",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},_.id))})]})}),x.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",x.length," of ",u.length," tenants"]})]})}class dle{async getAllDomains(){const{data:t,error:n}=await L.from("domains").select("*").order("name");if(n)throw console.error("Error fetching domains:",n),new Error(`Failed to fetch domains: ${n.message}`);return t||[]}async getTenantDomains(t){const{data:n,error:r}=await L.from("tenant_domains").select(`
        *,
        domain:domains(*)
      `).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching tenant domains:",r),new Error(`Failed to fetch tenant domains: ${r.message}`);return n||[]}async getAllTenantDomainAssignments(){const{data:t,error:n}=await L.from("tenant_domains").select(`
        *,
        domain:domains(*),
        tenant:tenants(name)
      `).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching tenant domain assignments:",n),new Error(`Failed to fetch assignments: ${n.message}`);return(t||[]).map(r=>{var a;return{...r,tenant_name:((a=r.tenant)==null?void 0:a.name)||"Unknown Tenant"}})}async assignDomainToTenant(t){const{data:n}=await L.from("tenant_domains").select("id").eq("tenant_id",t.tenant_id).eq("domain_id",t.domain_id).single();if(n)throw new Error("Domain is already assigned to this tenant");const{data:r,error:a}=await L.from("tenant_domains").insert({tenant_id:t.tenant_id,domain_id:t.domain_id,is_active:t.is_active??!0,max_teachers:t.max_teachers??5,max_students:t.max_students??100}).select(`
        *,
        domain:domains(*)
      `).single();if(a)throw console.error("Error assigning domain to tenant:",a),new Error(`Failed to assign domain: ${a.message}`);return r}async updateTenantDomainAssignment(t,n){const{data:r,error:a}=await L.from("tenant_domains").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select(`
        *,
        domain:domains(*)
      `).single();if(a)throw console.error("Error updating tenant domain assignment:",a),new Error(`Failed to update assignment: ${a.message}`);return r}async removeDomainFromTenant(t){const{error:n}=await L.from("tenant_domains").delete().eq("id",t);if(n)throw console.error("Error removing domain assignment:",n),new Error(`Failed to remove domain assignment: ${n.message}`)}async bulkAssignDomainsToTenant(t,n,r={}){const{data:a}=await L.from("tenant_domains").select("domain_id").eq("tenant_id",t).in("domain_id",n),i=(a==null?void 0:a.map(u=>u.domain_id))||[],o=n.filter(u=>!i.includes(u));if(o.length===0)throw new Error("All selected domains are already assigned to this tenant");const l=o.map(u=>({tenant_id:t,domain_id:u,is_active:!0,max_teachers:r.max_teachers??5,max_students:r.max_students??100})),{data:c,error:d}=await L.from("tenant_domains").insert(l).select(`
        *,
        domain:domains(*)
      `);if(d)throw console.error("Error bulk assigning domains:",d),new Error(`Failed to assign domains: ${d.message}`);return c||[]}async getUnassignedDomainsForTenant(t){const n=await this.getAllDomains(),a=(await this.getTenantDomains(t)).map(i=>i.domain_id);return n.filter(i=>!a.includes(i.id))}async getDomainAssignmentStats(){const{count:t}=await L.from("tenant_domains").select("*",{count:"exact",head:!0}),{count:n}=await L.from("tenant_domains").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:r}=await L.from("domains").select("*",{count:"exact",head:!0}),{data:a}=await L.from("tenant_domains").select("tenant_id").distinct();return{total_assignments:t||0,active_assignments:n||0,total_domains:r||0,tenants_with_assignments:(a==null?void 0:a.length)||0}}}const yu=new dle,x2=e=>{const n=e&&{music:_w,calculator:C$,globe:Js,palette:Cw,"book-open":rt}[e]||rt;return s.jsx(n,{className:"h-5 w-5"})};function ule({tenant:e,open:t,onClose:n,onSuccess:r}){const{toast:a}=at(),i=Nn(),[o,l]=f.useState([]),[c,d]=f.useState(""),[u,h]=f.useState({max_teachers:5,max_students:100}),{data:m=[],isLoading:p}=yt({queryKey:["domains"],queryFn:()=>yu.getAllDomains()}),{data:v=[],isLoading:x}=yt({queryKey:["tenant-domains",e==null?void 0:e.id],queryFn:()=>e!=null&&e.id?yu.getTenantDomains(e.id):Promise.resolve([]),enabled:!!(e!=null&&e.id)}),y=v.map(N=>N.domain_id),g=m.filter(N=>!y.includes(N.id)&&(N.name.toLowerCase().includes(c.toLowerCase())||N.description.toLowerCase().includes(c.toLowerCase()))),b=En({mutationFn:N=>yu.bulkAssignDomainsToTenant(N.tenantId,N.domainIds,N.settings),onSuccess:N=>{a({title:"Domains Assigned",description:`Successfully assigned ${N.length} domain(s) to ${e==null?void 0:e.name}.`}),i.invalidateQueries({queryKey:["tenant-domains"]}),i.invalidateQueries({queryKey:["tenants"]}),r(),_()},onError:N=>{a({title:"Assignment Failed",description:N.message||"Failed to assign domains.",variant:"destructive"})}}),w=N=>{l(j=>j.includes(N)?j.filter(k=>k!==N):[...j,N])},C=()=>{!e||o.length===0||b.mutate({tenantId:e.id,domainIds:o,settings:u})},_=()=>{l([]),d(""),h({max_teachers:5,max_students:100}),n()},S=p||x;return s.jsx(nn,{open:t,onOpenChange:_,children:s.jsxs(Kt,{className:"sm:max-w-[700px] max-h-[90vh]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:"Assign Learning Domains"}),s.jsxs(Tn,{children:["Assign learning domains to ",s.jsx("strong",{children:e==null?void 0:e.name}),". Tenant admins will only be able to access and manage users within these assigned domains."]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium",children:"Current Assignments"}),s.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-muted/50 rounded-lg min-h-[60px]",children:S?s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{className:"text-sm",children:"Loading current assignments..."})]}):v.length===0?s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"No domains currently assigned"})]}):v.map(N=>{var j;return s.jsxs(X,{variant:"secondary",className:"flex items-center gap-2",children:[N.domain&&x2(N.domain.icon_name),((j=N.domain)==null?void 0:j.name)||"Unknown Domain"]},N.id)})})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"domain-search",children:"Search Available Domains"}),s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{id:"domain-search",placeholder:"Search domains...",value:c,onChange:N=>d(N.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{children:["Available Domains (",g.length,")"]}),s.jsx(tl,{className:"h-[300px] border rounded-lg p-4",children:S?s.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[s.jsx(Hn,{className:"h-4 w-4 animate-spin mr-2"}),"Loading domains..."]}):g.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[s.jsx(rt,{className:"h-12 w-12 mb-4 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No available domains found"}),s.jsx("p",{className:"text-sm",children:c?"Try adjusting your search terms":"All domains are already assigned"})]}):s.jsx("div",{className:"space-y-3",children:g.map(N=>s.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx(Hr,{checked:o.includes(N.id),onCheckedChange:()=>w(N.id),className:"mt-1"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[x2(N.icon_name),s.jsx("h4",{className:"font-medium",children:N.name})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:N.description})]})]},N.id))})})]}),o.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(cn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Q,{className:"text-sm font-medium",children:"Assignment Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"max-teachers",className:"text-sm",children:"Max Teachers per Domain"}),s.jsx(pe,{id:"max-teachers",type:"number",min:"1",value:u.max_teachers,onChange:N=>h(j=>({...j,max_teachers:parseInt(N.target.value)||5}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"max-students",className:"text-sm",children:"Max Students per Domain"}),s.jsx(pe,{id:"max-students",type:"number",min:"1",value:u.max_students,onChange:N=>h(j=>({...j,max_students:parseInt(N.target.value)||100}))})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"h-4 w-4 text-green-600"}),o.length," domain(s) selected"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(z,{type:"button",variant:"outline",onClick:_,children:"Cancel"}),s.jsx(z,{onClick:C,disabled:o.length===0||b.isPending,children:b.isPending?"Assigning...":`Assign ${o.length} Domain(s)`})]})]})]})})}function hle(){const{data:e,isLoading:t,refetch:n}=yt({queryKey:["domain-assignment-stats"],queryFn:()=>yu.getDomainAssignmentStats()}),{data:r=[],isLoading:a,refetch:i}=yt({queryKey:["all-tenant-domain-assignments"],queryFn:()=>yu.getAllTenantDomainAssignments()}),o=t||a,l=()=>{n(),i()},c=d=>d?s.jsxs(X,{variant:"default",className:"flex items-center gap-1",children:[s.jsx(ln,{className:"h-3 w-3"}),"Active"]}):s.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-3 w-3"}),"Inactive"]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Domains"}),s.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:o?"...":(e==null?void 0:e.total_domains)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Available learning domains"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Assignments"}),s.jsx(Us,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:o?"...":(e==null?void 0:e.total_assignments)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Domain-tenant assignments"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Active Assignments"}),s.jsx(ln,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:o?"...":(e==null?void 0:e.active_assignments)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active assignments"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Tenants with Domains"}),s.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:o?"...":(e==null?void 0:e.tenants_with_assignments)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tenants with assigned domains"})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Y,{children:"Domain Assignments"}),s.jsx(we,{children:"Overview of all tenant-domain assignments in the system"})]}),s.jsxs(z,{onClick:l,variant:"outline",size:"sm",children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsxs(W,{children:[s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"Tenant"}),s.jsx(Ee,{children:"Domain"}),s.jsx(Ee,{children:"Status"}),s.jsx(Ee,{children:"Max Teachers"}),s.jsx(Ee,{children:"Max Students"}),s.jsx(Ee,{children:"Assigned"})]})}),s.jsx(Qs,{children:o?s.jsx(ut,{children:s.jsx(be,{colSpan:6,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(cs,{className:"h-4 w-4 animate-spin mr-2"}),"Loading assignments..."]})})}):r.length===0?s.jsx(ut,{children:s.jsx(be,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ft,{className:"h-12 w-12 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No domain assignments found"}),s.jsx("p",{className:"text-sm",children:"Create tenants and assign domains to get started"})]})})}):r.slice(0,10).map(d=>{var u;return s.jsxs(ut,{children:[s.jsx(be,{children:s.jsx("div",{className:"font-medium",children:d.tenant_name})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rt,{className:"h-4 w-4 text-muted-foreground"}),((u=d.domain)==null?void 0:u.name)||"Unknown Domain"]})}),s.jsx(be,{children:c(d.is_active)}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:d.max_teachers})]})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:d.max_students})]})}),s.jsx(be,{className:"text-sm text-muted-foreground",children:new Date(d.created_at).toLocaleDateString()})]},d.id)})})]})}),r.length>10&&s.jsxs("div",{className:"text-sm text-muted-foreground mt-4 text-center",children:["Showing first 10 of ",r.length," assignments"]})]})]})]})}var WO=(e=>(e.PLATFORM_ADMIN="platform_admin",e.TENANT_ADMIN="tenant_admin",e.TEACHER="teacher",e.STUDENT="student",e))(WO||{});function mle({tenant:e,open:t,onClose:n,onSuccess:r}){const{toast:a}=at(),i=Nn(),[o,l]=f.useState({email:"",message:"",expires_in_days:7}),c=En({mutationFn:m=>Fa.createInvitation(m),onSuccess:m=>{a({title:"Invitation Sent",description:`Tenant admin invitation has been sent to ${m.email}.`}),i.invalidateQueries({queryKey:["invitations"]}),i.invalidateQueries({queryKey:["tenant-invitations"]}),r(),u()},onError:m=>{a({title:"Invitation Failed",description:m.message||"Failed to send invitation.",variant:"destructive"})}}),d=()=>{if(!e||!o.email.trim())return;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){a({title:"Invalid Email",description:"Please enter a valid email address.",variant:"destructive"});return}c.mutate({email:o.email.trim(),tenant_id:e.id,role:WO.TENANT_ADMIN,expires_in_days:o.expires_in_days})},u=()=>{l({email:"",message:"",expires_in_days:7}),n()},h=o.email.trim().length>0;return s.jsx(nn,{open:t,onOpenChange:u,children:s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsxs(Yt,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),"Invite Tenant Administrator"]}),s.jsxs(Tn,{children:["Send an invitation to a user to become an administrator for ",s.jsx("strong",{children:e==null?void 0:e.name}),". They will be able to manage users and content within this tenant."]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[s.jsx(Yn,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e==null?void 0:e.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.slug})]})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(At,{className:"h-4 w-4"}),"Email Address"]}),s.jsx(pe,{id:"email",type:"email",placeholder:"admin@example.com",value:o.email,onChange:m=>l(p=>({...p,email:m.target.value})),className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-4 w-4"}),"Role"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(sn,{className:"h-3 w-3"}),"Tenant Administrator"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Full tenant management permissions"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"expiry",className:"flex items-center gap-2",children:[s.jsx(kn,{className:"h-4 w-4"}),"Invitation Expires In"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{id:"expiry",type:"number",min:"1",max:"30",value:o.expires_in_days,onChange:m=>l(p=>({...p,expires_in_days:parseInt(m.target.value)||7})),className:"w-20"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"message",children:"Personal Message (Optional)"}),s.jsx(Fn,{id:"message",placeholder:"Welcome to the team! This invitation will give you admin access to manage...",value:o.message,onChange:m=>l(p=>({...p,message:m.target.value})),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"flex gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx(ft,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:"What happens next:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"The user will receive an invitation email"}),s.jsx("li",{children:"They can accept the invitation to join as tenant admin"}),s.jsx("li",{children:"They will have full access to manage this tenant"}),s.jsx("li",{children:"You can track invitation status in the invitations list"})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:h&&s.jsxs("span",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(ln,{className:"h-4 w-4"}),"Ready to send"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(z,{type:"button",variant:"outline",onClick:u,children:"Cancel"}),s.jsx(z,{onClick:d,disabled:!h||c.isPending,className:"min-w-[120px]",children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Hn,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(At,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})]})})}function fle({tenantId:e,showTenantColumn:t=!1}){const{toast:n}=at(),r=Nn(),[a,i]=f.useState({tenant_id:e}),[o,l]=f.useState(""),{data:c=[],isLoading:d,error:u,refetch:h}=yt({queryKey:["invitations",a],queryFn:()=>Fa.getInvitations(a)}),m=En({mutationFn:_=>Fa.cancelInvitation(_),onSuccess:()=>{n({title:"Invitation Cancelled",description:"The invitation has been cancelled successfully."}),r.invalidateQueries({queryKey:["invitations"]})},onError:_=>{n({title:"Error",description:_.message||"Failed to cancel invitation.",variant:"destructive"})}}),p=En({mutationFn:_=>Fa.resendInvitation(_),onSuccess:()=>{n({title:"Invitation Resent",description:"The invitation has been resent with a new expiration date."}),r.invalidateQueries({queryKey:["invitations"]})},onError:_=>{n({title:"Error",description:_.message||"Failed to resend invitation.",variant:"destructive"})}}),v=c.filter(_=>{var S;return!o||_.email.toLowerCase().includes(o.toLowerCase())||((S=_.tenant)==null?void 0:S.name.toLowerCase().includes(o.toLowerCase()))}),x=_=>{l(_)},y=(_,S)=>{i(N=>({...N,[_]:S==="all"?void 0:S}))},g=_=>{const N={pending:{variant:"default",icon:qs,color:"text-blue-600"},accepted:{variant:"default",icon:ln,color:"text-green-600"},expired:{variant:"secondary",icon:ft,color:"text-orange-600"},cancelled:{variant:"destructive",icon:Lt,color:"text-red-600"}}[_],j=N.icon;return s.jsxs(X,{variant:N.variant,className:"flex items-center gap-1",children:[s.jsx(j,{className:`h-3 w-3 ${N.color}`}),_]})},b=_=>{const S={platform_admin:"bg-purple-100 text-purple-800",tenant_admin:"bg-blue-100 text-blue-800",teacher:"bg-green-100 text-green-800",student:"bg-gray-100 text-gray-800"};return s.jsxs(X,{className:`flex items-center gap-1 ${S[_]||"bg-gray-100 text-gray-800"}`,children:[s.jsx(sn,{className:"h-3 w-3"}),_.replace("_"," ")]})},w=_=>{confirm(`Are you sure you want to cancel the invitation for "${_.email}"?`)&&m.mutate(_.id)},C=_=>{confirm(`Resend invitation to "${_.email}"? This will extend the expiration date.`)&&p.mutate(_.id)};return u?s.jsxs("div",{className:"text-center py-8 text-destructive",children:[s.jsxs("p",{children:["Error loading invitations: ",u.message]}),s.jsxs(z,{onClick:()=>h(),variant:"outline",className:"mt-2",children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Rn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search invitations...",value:o,onChange:_=>x(_.target.value),className:"pl-10"})]}),s.jsxs(Ve,{value:a.status||"all",onValueChange:_=>y("status",_),children:[s.jsx(ze,{className:"w-32",children:s.jsx(qe,{placeholder:"Status"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:"pending",children:"Pending"}),s.jsx(le,{value:"accepted",children:"Accepted"}),s.jsx(le,{value:"expired",children:"Expired"}),s.jsx(le,{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs(Ve,{value:a.role||"all",onValueChange:_=>y("role",_),children:[s.jsx(ze,{className:"w-36",children:s.jsx(qe,{placeholder:"Role"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Roles"}),s.jsx(le,{value:"tenant_admin",children:"Tenant Admin"}),s.jsx(le,{value:"teacher",children:"Teacher"}),s.jsx(le,{value:"student",children:"Student"})]})]}),s.jsx(z,{onClick:()=>h(),variant:"outline",size:"icon",children:s.jsx(cs,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"Email"}),t&&s.jsx(Ee,{children:"Tenant"}),s.jsx(Ee,{children:"Role"}),s.jsx(Ee,{children:"Status"}),s.jsx(Ee,{children:"Invited By"}),s.jsx(Ee,{children:"Expires"}),s.jsx(Ee,{className:"text-right",children:"Actions"})]})}),s.jsx(Qs,{children:d?s.jsx(ut,{children:s.jsx(be,{colSpan:t?7:6,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(cs,{className:"h-4 w-4 animate-spin mr-2"}),"Loading invitations..."]})})}):v.length===0?s.jsx(ut,{children:s.jsx(be,{colSpan:t?7:6,className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(At,{className:"h-12 w-12 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No invitations found"}),o&&s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})}):v.map(_=>{var S,N,j;return s.jsxs(ut,{children:[s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(At,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:_.email})]})}),t&&s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(S=_.tenant)==null?void 0:S.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:(N=_.tenant)==null?void 0:N.slug})]})]})}),s.jsx(be,{children:b(_.role_name)}),s.jsx(be,{children:g(_.status)}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(et,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:((j=_.invited_by_user)==null?void 0:j.email)||"Unknown"})]})}),s.jsx(be,{className:"text-sm text-muted-foreground",children:new Date(_.expires_at).toLocaleDateString()}),s.jsx(be,{className:"text-right",children:s.jsxs(Ox,{children:[s.jsx(Fx,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"icon",children:s.jsx(kA,{className:"h-4 w-4"})})}),s.jsxs(Kh,{align:"end",children:[_.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs($s,{onClick:()=>C(_),children:[s.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Resend Invitation"]}),s.jsxs($s,{onClick:()=>w(_),className:"text-destructive",children:[s.jsx(K$,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),_.status==="expired"&&s.jsxs($s,{onClick:()=>C(_),children:[s.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Send New Invitation"]})]})]})})]},_.id)})})]})}),v.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",v.length," of ",c.length," invitations"]})]})}function ple({tenantId:e}){const{data:t,isLoading:n,refetch:r}=yt({queryKey:["invitation-stats",e],queryFn:()=>e?Fa.getInvitationStats(e):Promise.resolve(null),enabled:!!e}),{data:a=[],isLoading:i,refetch:o}=yt({queryKey:["recent-invitations",e],queryFn:()=>Fa.getInvitations({tenant_id:e})}),l=n||i,c=()=>{r(),o()},d=h=>{switch(h){case"pending":return s.jsx(qs,{className:"h-3 w-3 text-blue-600"});case"accepted":return s.jsx(ln,{className:"h-3 w-3 text-green-600"});case"expired":return s.jsx(ft,{className:"h-3 w-3 text-orange-600"});case"cancelled":return s.jsx(Lt,{className:"h-3 w-3 text-red-600"});default:return s.jsx(At,{className:"h-3 w-3"})}},u=h=>{switch(h){case"pending":return"text-blue-600";case"accepted":return"text-green-600";case"expired":return"text-orange-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Invitations"}),s.jsx(At,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:l?"...":(t==null?void 0:t.total_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time invitations sent"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Pending"}),s.jsx(qs,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l?"...":(t==null?void 0:t.pending_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting response"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Accepted"}),s.jsx(ln,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:l?"...":(t==null?void 0:t.accepted_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully joined"})]})]}),s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Expired"}),s.jsx(ft,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l?"...":(t==null?void 0:t.expired_invitations)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Need to be resent"})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Y,{children:"Recent Invitations"}),s.jsxs(we,{children:["Latest invitation activity",e?" for this tenant":""]})]}),s.jsxs(z,{onClick:c,variant:"outline",size:"sm",children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsx(W,{children:s.jsx("div",{className:"space-y-4",children:l?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(cs,{className:"h-4 w-4 animate-spin mr-2"}),"Loading invitations..."]}):a.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(At,{className:"h-12 w-12 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No invitations found"}),s.jsx("p",{className:"text-sm",children:"Send your first invitation to get started"})]})}):s.jsxs("div",{className:"space-y-3",children:[a.slice(0,5).map(h=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[d(h.status),s.jsx("span",{className:"font-medium",children:h.email})]}),s.jsx(X,{variant:"outline",className:"text-xs",children:h.role_name.replace("_"," ")}),h.tenant&&s.jsx(X,{variant:"secondary",className:"text-xs",children:h.tenant.name})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[s.jsx("span",{className:u(h.status),children:h.status}),s.jsx("span",{children:new Date(h.created_at).toLocaleDateString()})]})]},h.id)),a.length>5&&s.jsxs("div",{className:"text-sm text-muted-foreground text-center pt-2 border-t",children:["Showing 5 of ",a.length," invitations"]})]})})})]})]})}const xle=["users","domains","concepts","learning_goals","reports"],gle=["create","read","update","delete"],g2=["platform_admin","tenant_admin","teacher","student"];function vle(){const{isPlatformAdmin:e,session:t}=dn(),n=Nn(),[r,a]=f.useState(new Set),[i,o]=f.useState({open:!1,title:"",description:"",action:()=>{}}),[l,c]=f.useState(!1),{data:d}=yt({queryKey:["accessible-routes"],queryFn:()=>Il.getUserAccessibleRoutes()});yt({queryKey:["permission-matrix"],queryFn:async()=>{const g=[];for(const b of xle)for(const w of gle)g.push({resource:b,action:w});return Il.checkMultiplePermissions(g)}});const{data:u}=yt({queryKey:["audit-logs"],queryFn:async()=>{const{data:g,error:b}=await L.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);if(b)throw b;return g||[]}}),h=f.useMemo(()=>Il.getCacheSize(),[l]);En({mutationFn:async({userId:g,resource:b,action:w,granted:C})=>{await Il.updatePermission(g,b,w,C)},onSuccess:()=>{n.invalidateQueries({queryKey:["permission-matrix"]}),lo.success("Permission updated successfully")},onError:()=>{lo.error("Failed to update permission")}});const m=En({mutationFn:async g=>{await Il.bulkUpdatePermissions(g)},onSuccess:()=>{n.invalidateQueries({queryKey:["permission-matrix"]}),lo.success("Permissions updated successfully"),a(new Set)},onError:()=>{lo.error("Failed to update permissions")}}),p=()=>{Il.clearCache(),c(!0),lo.success("Cache cleared successfully"),setTimeout(()=>c(!1),3e3)},v=()=>{const g=Array.from(r).map(b=>{const[w,C,_]=b.split(":");return{user_id:_,resource:w,action:C,granted:!0}});m.mutate(g)},x=()=>{const g=Array.from(r).map(b=>{const[w,C,_]=b.split(":");return{user_id:_,resource:w,action:C,granted:!1}});m.mutate(g)},y=()=>{if(!u)return;const g=[["Timestamp","User","Action","Resource","Details"].join(","),...u.map(_=>[_.created_at,_.user_id,_.action,_.resource_type||"",JSON.stringify(_.changes||{})].join(","))].join(`
`),b=new Blob([g],{type:"text/csv"}),w=URL.createObjectURL(b),C=document.createElement("a");C.href=w,C.download=`audit-logs-${new Date().toISOString()}.csv`,C.click(),lo.success("Audit logs exported")};return e?s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Access Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Centralized permission and role management system"})]}),s.jsx("div",{"data-testid":"platform-admin-badge",className:"flex items-center gap-2",children:s.jsxs(X,{variant:"default",className:"bg-primary px-4 py-2",children:[s.jsx(Ey,{className:"h-4 w-4 mr-2"}),"Platform Admin"]})})]}),s.jsxs(Ot,{className:"border-primary",children:[s.jsx(Ey,{className:"h-4 w-4 text-primary"}),s.jsx(mc,{className:"text-primary",children:"Universal Access Enabled"}),s.jsx(Ut,{children:"As a platform administrator, you have complete access to all system resources and features. Your permissions bypass all access controls."})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Quick Actions"})}),s.jsxs(W,{className:"flex gap-3",children:[s.jsxs(z,{"data-testid":"quick-action-grant-all",onClick:()=>o({open:!0,title:"Grant All Permissions",description:"Grant all permissions to selected roles?",action:v}),children:[s.jsx(Lf,{className:"h-4 w-4 mr-2"}),"Grant All"]}),s.jsxs(z,{"data-testid":"quick-action-revoke-all",variant:"destructive",onClick:()=>o({open:!0,title:"Revoke All Permissions",description:"Are you sure you want to revoke all permissions? This action cannot be undone.",action:x}),children:[s.jsx(_y,{className:"h-4 w-4 mr-2"}),"Revoke All"]}),s.jsxs(z,{"data-testid":"quick-action-reset-defaults",variant:"outline",onClick:()=>o({open:!0,title:"Reset to Defaults",description:"Reset all permissions to system defaults?",action:()=>lo.info("Reset functionality coming soon")}),children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Reset Defaults"]})]})]}),s.jsxs(Qr,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(wr,{className:"grid w-full grid-cols-6",children:[s.jsx(Je,{value:"overview",children:"Overview"}),s.jsx(Je,{value:"roles",children:"Roles"}),s.jsx(Je,{value:"tenants",children:"Tenants"}),s.jsx(Je,{value:"invitations",children:"Invitations"}),s.jsx(Je,{value:"audit","data-testid":"tab-audit-log",children:"Audit Log"}),s.jsx(Je,{value:"performance","data-testid":"tab-performance",children:"Performance"})]}),s.jsxs(Ze,{value:"overview",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Access Status"})}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:"All Routes Accessible"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Full System Control"})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Active Sessions"})}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"1"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t==null?void 0:t.email})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Accessible Routes"})}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(d==null?void 0:d.length)||0}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All system routes"})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{children:"Platform Admin Privileges"})}),s.jsx(W,{children:s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Universal Access"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be modified for security reasons"})]}),s.jsx(Nt,{checked:!0,disabled:!0,"data-testid":"toggle-platform-admin"})]})})]})]}),s.jsx(Ze,{value:"roles",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Role Hierarchy"}),s.jsx(we,{children:"System roles and their inheritance relationships"})]}),s.jsx(W,{children:s.jsx("div",{"data-testid":"role-hierarchy",className:"space-y-4",children:g2.map((g,b)=>s.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-muted",children:[s.jsx(X,{variant:g==="platform_admin"?"default":"secondary",children:g.replace("_"," ").toUpperCase()}),b>0&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["inherits from ",g2[b-1].replace("_"," ")]})]},g))})})]})}),s.jsx(Ze,{value:"audit",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Audit Log"}),s.jsx(we,{children:"Track all permission changes and access attempts"})]}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ve,{"data-testid":"audit-filter-action",children:[s.jsx(ze,{className:"w-48",children:s.jsx(qe,{placeholder:"Filter by action"})}),s.jsxs(Ue,{children:[s.jsx(le,{value:"all",children:"All Actions"}),s.jsx(le,{value:"permission_grant",children:"Permission Grant"}),s.jsx(le,{value:"permission_revoke",children:"Permission Revoke"}),s.jsx(le,{value:"permission_update",children:"Permission Update"})]})]}),s.jsxs(z,{"data-testid":"export-audit-logs",onClick:y,variant:"outline",children:[s.jsx(CA,{className:"h-4 w-4 mr-2"}),"Export"]})]}),s.jsx("div",{"data-testid":"audit-log-table",className:"overflow-x-auto",children:s.jsxs(Gs,{children:[s.jsx(Ks,{children:s.jsxs(ut,{children:[s.jsx(Ee,{children:"Timestamp"}),s.jsx(Ee,{children:"User"}),s.jsx(Ee,{children:"Action"}),s.jsx(Ee,{children:"Resource"}),s.jsx(Ee,{children:"Details"})]})}),s.jsx(Qs,{children:u==null?void 0:u.map(g=>s.jsxs(ut,{children:[s.jsx(be,{children:new Date(g.created_at).toLocaleString()}),s.jsx(be,{children:g.user_id}),s.jsx(be,{children:g.action}),s.jsx(be,{children:g.resource_type}),s.jsx(be,{children:s.jsx("code",{className:"text-xs",children:JSON.stringify(g.changes||{},null,2)})})]},g.id))})]})})]})})]})}),s.jsx(Ze,{value:"tenants",className:"space-y-4",children:s.jsx(yle,{})}),s.jsx(Ze,{value:"invitations",className:"space-y-4",children:s.jsx(ble,{})}),s.jsx(Ze,{value:"performance",className:"space-y-4",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Performance Metrics"}),s.jsx(we,{children:"Monitor system performance and cache statistics"})]}),s.jsx(W,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Permission Cache"}),s.jsxs("p",{className:"text-2xl font-bold",children:["Cache Size: ",h," entries"]})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cache Management"}),s.jsxs(z,{"data-testid":"clear-cache-button",onClick:p,variant:"outline",className:"mt-2",children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Clear Cache"]}),l&&s.jsx("p",{className:"text-sm text-green-600 mt-2",children:"Cache cleared successfully"})]})]})})]})})]}),s.jsx(Sx,{open:i.open,onOpenChange:g=>o(b=>({...b,open:g})),children:s.jsxs(Dh,{children:[s.jsxs(Rh,{children:[s.jsx(Lh,{children:i.title}),s.jsx(Oh,{children:i.description})]}),s.jsxs(Mh,{children:[s.jsx($h,{"data-testid":"cancel-action",children:"Cancel"}),s.jsx(Fh,{"data-testid":"confirm-action",onClick:i.action,children:"Confirm"})]})]})})]}):s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Ot,{variant:"destructive",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(mc,{children:"Access Denied"}),s.jsx(Ut,{children:"Only platform administrators can access this page."})]})})}function yle(){const[e,t]=f.useState(!1),[n,r]=f.useState(null),[a,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState(null),m=()=>{},p=w=>{r(w)},v=w=>{r(w)},x=w=>{l(w),i(!0)},y=()=>{l(null)},g=w=>{h(w),d(!0)},b=()=>{h(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(hle,{}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(gS,{className:"h-5 w-5"}),"Tenant Management"]}),s.jsx(we,{children:"Create and manage company tenants and their domain assignments"})]}),s.jsxs(z,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[s.jsx(gS,{className:"h-4 w-4"}),"Create Tenant"]})]})}),s.jsx(W,{children:s.jsx(cle,{onEditTenant:p,onViewTenant:v,onAssignDomains:x,onInviteTenantAdmin:g})})]}),s.jsx(lle,{open:e,onClose:()=>t(!1),onSuccess:m}),s.jsx(ule,{tenant:o,open:a,onClose:()=>{i(!1),l(null)},onSuccess:y}),s.jsx(mle,{tenant:u,open:c,onClose:()=>{d(!1),h(null)},onSuccess:b})]})}function ble(){const[e,t]=f.useState("tenant-admins");return s.jsx("div",{className:"space-y-6",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),"User Invitations"]}),s.jsx(we,{children:"Send invitations to create new user accounts with appropriate roles"})]}),s.jsx(W,{children:s.jsxs(Qr,{value:e,onValueChange:t,children:[s.jsxs(wr,{className:"grid w-full grid-cols-3",children:[s.jsx(Je,{value:"tenant-admins",children:"Tenant Admins"}),s.jsx(Je,{value:"teachers",children:"Teachers"}),s.jsx(Je,{value:"students",children:"Students"})]}),s.jsx(Ze,{value:"tenant-admins",className:"space-y-4",children:s.jsx(wle,{})}),s.jsx(Ze,{value:"teachers",className:"space-y-4",children:s.jsx(jle,{})}),s.jsx(Ze,{value:"students",className:"space-y-4",children:s.jsx(Nle,{})})]})})]})})}function wle(){return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ple,{}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(At,{className:"h-5 w-5"}),"Tenant Admin Invitations"]}),s.jsx(we,{children:"Manage tenant administrator invitations across all tenants"})]}),s.jsx(W,{children:s.jsx(fle,{showTenantColumn:!0})})]})]})}function jle(){return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invite Teachers"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform admin can invite teachers to any tenant"})]}),s.jsxs(z,{className:"flex items-center gap-2",children:[s.jsx(Qo,{className:"h-4 w-4"}),"Send Invitation"]})]}),s.jsx("div",{className:"border rounded-lg p-6 bg-muted/50",children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"font-medium",children:"Teacher Invitation Form"}),s.jsx("p",{className:"text-sm",children:"Form fields: First Name, Last Name, Email, Tenant Selection"}),s.jsx("p",{className:"text-sm mt-2",children:"✓ Can assign to any tenant"}),s.jsx("p",{className:"text-sm",children:"✓ Domain assignment happens separately"})]})})]})}function Nle(){return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invite Students"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform admin can invite students to any tenant"})]}),s.jsxs(z,{className:"flex items-center gap-2",children:[s.jsx(Qo,{className:"h-4 w-4"}),"Send Invitation"]})]}),s.jsx("div",{className:"border rounded-lg p-6 bg-muted/50",children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"font-medium",children:"Student Invitation Form"}),s.jsx("p",{className:"text-sm",children:"Form fields: First Name, Last Name, Email, Tenant Selection"}),s.jsx("p",{className:"text-sm mt-2",children:"✓ Can assign to any tenant"}),s.jsx("p",{className:"text-sm",children:"✓ Teachers can also invite students within their tenant"})]})})]})}const Sle={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg",VITE_SUPABASE_URL:"https://jfolpnyipoocflcrachg.supabase.co"},v2=e=>{let t;const n=new Set,r=(u,h)=>{const m=typeof u=="function"?u(t):u;if(!Object.is(m,t)){const p=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(v=>v(t,p))}},a=()=>t,c={setState:r,getState:a,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Sle?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,a,c);return c},_le=e=>e?v2(e):v2;var HO={exports:{}},GO={},KO={exports:{}},QO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc=f;function Cle(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kle=typeof Object.is=="function"?Object.is:Cle,Ele=Yc.useState,Tle=Yc.useEffect,Ale=Yc.useLayoutEffect,Ple=Yc.useDebugValue;function Ile(e,t){var n=t(),r=Ele({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return Ale(function(){a.value=n,a.getSnapshot=t,jv(a)&&i({inst:a})},[e,n,t]),Tle(function(){return jv(a)&&i({inst:a}),e(function(){jv(a)&&i({inst:a})})},[e]),Ple(n),n}function jv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kle(e,n)}catch{return!0}}function Dle(e,t){return t()}var Rle=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dle:Ile;QO.useSyncExternalStore=Yc.useSyncExternalStore!==void 0?Yc.useSyncExternalStore:Rle;KO.exports=QO;var Mle=KO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx=f,Lle=Mle;function Ole(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fle=typeof Object.is=="function"?Object.is:Ole,$le=Lle.useSyncExternalStore,zle=zx.useRef,Ule=zx.useEffect,Ble=zx.useMemo,Vle=zx.useDebugValue;GO.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var i=zle(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Ble(function(){function c(p){if(!d){if(d=!0,u=p,p=r(p),a!==void 0&&o.hasValue){var v=o.value;if(a(v,p))return h=v}return h=p}if(v=h,Fle(u,p))return v;var x=r(p);return a!==void 0&&a(v,x)?(u=p,v):(u=p,h=x)}var d=!1,u,h,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,a]);var l=$le(e,i[0],i[1]);return Ule(function(){o.hasValue=!0,o.value=l},[l]),Vle(l),l};HO.exports=GO;var qle=HO.exports;const Wle=il(qle),YO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg",VITE_SUPABASE_URL:"https://jfolpnyipoocflcrachg.supabase.co"},{useDebugValue:Hle}=ge,{useSyncExternalStoreWithSelector:Gle}=Wle;let y2=!1;const Kle=e=>e;function Qle(e,t=Kle,n){(YO?"production":void 0)!=="production"&&n&&!y2&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),y2=!0);const r=Gle(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Hle(r),r}const Yle=e=>{(YO?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?_le(e):e,n=(r,a)=>Qle(t,r,a);return Object.assign(n,t),n},WN=e=>Yle,uf={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmb2xwbnlpcG9vY2ZsY3JhY2hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTQxOTcsImV4cCI6MjA2ODkzMDE5N30.Z1vfzimy6x_B6cMLKeMS_91UXctePwSgMJsIgwQPrzg",VITE_SUPABASE_URL:"https://jfolpnyipoocflcrachg.supabase.co"},gb=new Map,Lm=e=>{const t=gb.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Xle=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=gb.get(n.name);if(r)return{type:"tracked",store:e,...r};const a={connection:t.connect(n),stores:{}};return gb.set(n.name,a),{type:"tracked",store:e,...a}},Jle=(e,t={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:l,...c}=t;let d;try{d=(i??(uf?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return(uf?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,a);const{connection:u,...h}=Xle(l,d,c);let m=!0;a.setState=(x,y,g)=>{const b=n(x,y);if(!m)return b;const w=g===void 0?{type:o||"anonymous"}:typeof g=="string"?{type:g}:g;return l===void 0?(u==null||u.send(w,r()),b):(u==null||u.send({...w,type:`${l}/${w.type}`},{...Lm(c.name),[l]:a.getState()}),b)};const p=(...x)=>{const y=m;m=!1,n(...x),m=y},v=e(a.setState,r,a);if(h.type==="untracked"?u==null||u.init(v):(h.stores[h.store]=a,u==null||u.init(Object.fromEntries(Object.entries(h.stores).map(([x,y])=>[x,x===h.store?v:y.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let x=!1;const y=a.dispatch;a.dispatch=(...g)=>{(uf?"production":void 0)!=="production"&&g[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),y(...g)}}return u.subscribe(x=>{var y;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Nv(x.payload,g=>{if(g.type==="__setState"){if(l===void 0){p(g.state);return}Object.keys(g.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=g.state[l];if(b==null)return;JSON.stringify(a.getState())!==JSON.stringify(b)&&p(b);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(g)});case"DISPATCH":switch(x.payload.type){case"RESET":return p(v),l===void 0?u==null?void 0:u.init(a.getState()):u==null?void 0:u.init(Lm(c.name));case"COMMIT":if(l===void 0){u==null||u.init(a.getState());return}return u==null?void 0:u.init(Lm(c.name));case"ROLLBACK":return Nv(x.state,g=>{if(l===void 0){p(g),u==null||u.init(a.getState());return}p(g[l]),u==null||u.init(Lm(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Nv(x.state,g=>{if(l===void 0){p(g);return}JSON.stringify(a.getState())!==JSON.stringify(g[l])&&p(g[l])});case"IMPORT_STATE":{const{nextLiftedState:g}=x.payload,b=(y=g.computedStates.slice(-1)[0])==null?void 0:y.state;if(!b)return;p(l===void 0?b:b[l]),u==null||u.send(null,g);return}case"PAUSE_RECORDING":return m=!m}return}}),v},HN=Jle,Nv=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function Zle(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=n.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>n.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>n.removeItem(a)}}const sh=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return sh(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return sh(r)(n)}}}},ece=(e,t)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,g)=>({...g,...y}),...t},o=!1;const l=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const u=sh(i.serialize),h=()=>{const y=i.partialize({...r()});let g;const b=u({state:y,version:i.version}).then(w=>d.setItem(i.name,w)).catch(w=>{g=w});if(g)throw g;return b},m=a.setState;a.setState=(y,g)=>{m(y,g),h()};const p=e((...y)=>{n(...y),h()},r,a);let v;const x=()=>{var y;if(!d)return;o=!1,l.forEach(b=>b(r()));const g=((y=i.onRehydrateStorage)==null?void 0:y.call(i,r()))||void 0;return sh(d.getItem.bind(d))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var w;return v=i.merge(b,(w=r())!=null?w:p),n(v,!0),h()}).then(()=>{g==null||g(v,void 0),o=!0,c.forEach(b=>b(v))}).catch(b=>{g==null||g(void 0,b)})};return a.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(d=y.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},x(),v||p},tce=(e,t)=>(n,r,a)=>{let i={storage:Zle(()=>localStorage),partialize:x=>x,version:0,merge:(x,y)=>({...y,...x}),...t},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...x)},r,a);const u=()=>{const x=i.partialize({...r()});return d.setItem(i.name,{state:x,version:i.version})},h=a.setState;a.setState=(x,y)=>{h(x,y),u()};const m=e((...x)=>{n(...x),u()},r,a);a.getInitialState=()=>m;let p;const v=()=>{var x,y;if(!d)return;o=!1,l.forEach(b=>{var w;return b((w=r())!=null?w:m)});const g=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(x=r())!=null?x:m))||void 0;return sh(d.getItem.bind(d))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[C,_]=b;if(p=i.merge(_,(w=r())!=null?w:m),n(p,!0),C)return u()}).then(()=>{g==null||g(p,void 0),p=r(),o=!0,c.forEach(b=>b(p))}).catch(b=>{g==null||g(void 0,b)})};return a.persist={setOptions:x=>{i={...i,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||v(),p||m},nce=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((uf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ece(e,t)):tce(e,t),XO=nce,Dl={basic:{name:"",slug:"",description:"",status:"active",subscription_tier:"free"},domains:{selectedDomainIds:[],domainSettings:new Map},limits:{global_max_teachers:50,global_max_students:500,enforce_limits:!0},admins:{invitations:[]},settings:{features:{analytics:!0,reporting:!0,advanced_permissions:!1,custom_branding:!1},customization:{theme:"default",logo_url:"",primary_color:"#2563eb"}}},Mt=WN()(HN(XO((e,t)=>({data:Dl,currentStep:"basic",completedSteps:new Set,isOpen:!1,isLoading:!1,mode:"create",editingTenantId:void 0,errors:{},setCurrentStep:n=>{e({currentStep:n},!1,"setCurrentStep")},markStepComplete:n=>{e(r=>({completedSteps:new Set([...r.completedSteps,n])}),!1,"markStepComplete")},markStepIncomplete:n=>{e(r=>{const a=new Set(r.completedSteps);return a.delete(n),{completedSteps:a}},!1,"markStepIncomplete")},updateBasicInfo:n=>{if(e(r=>({data:{...r.data,basic:{...r.data.basic,...n}}}),!1,"updateBasicInfo"),n.name&&!t().data.basic.slug){const r=n.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");e(a=>({data:{...a.data,basic:{...a.data.basic,slug:r}}}),!1,"autoGenerateSlug")}},updateDomainAssignment:n=>{e(r=>({data:{...r.data,domains:{...r.data.domains,...n}}}),!1,"updateDomainAssignment")},updateGlobalLimits:n=>{e(r=>({data:{...r.data,limits:{...r.data.limits,...n}}}),!1,"updateGlobalLimits")},updateAdminInvitations:n=>{e(r=>({data:{...r.data,admins:{...r.data.admins,...n}}}),!1,"updateAdminInvitations")},updateSettings:n=>{e(r=>({data:{...r.data,settings:{...r.data.settings,...n}}}),!1,"updateSettings")},openCreateWizard:()=>{e({isOpen:!0,mode:"create",editingTenantId:void 0,currentStep:"basic",completedSteps:new Set,data:{...Dl},errors:{}},!1,"openCreateWizard")},openEditWizard:(n,r)=>{e({isOpen:!0,mode:"edit",editingTenantId:n,currentStep:"basic",completedSteps:new Set(["basic","domains","limits","admins","settings"]),data:{...Dl,...r},errors:{}},!1,"openEditWizard")},closeWizard:()=>{e({isOpen:!1,currentStep:"basic",completedSteps:new Set,errors:{}},!1,"closeWizard")},resetWizard:()=>{e({data:Dl,currentStep:"basic",completedSteps:new Set,errors:{},editingTenantId:void 0},!1,"resetWizard")},initializeCreateMode:()=>{e({isOpen:!1,mode:"create",editingTenantId:void 0,currentStep:"basic",completedSteps:new Set,data:{...Dl},errors:{}},!1,"initializeCreateMode")},initializeEditMode:(n,r)=>{e({isOpen:!1,mode:"edit",editingTenantId:n,currentStep:"basic",completedSteps:new Set(["basic","domains","limits","admins","settings"]),data:{...Dl,...r},errors:{}},!1,"initializeEditMode")},validateStep:async n=>{console.log(`🔍 [QA] Validating step: ${n}`);const{data:r}=t(),a=[];switch(n){case"basic":if(r.basic.name.trim()||a.push("Tenant name is required"),r.basic.slug.trim()||a.push("Tenant slug is required"),r.basic.slug.length<3&&a.push("Slug must be at least 3 characters"),/^[a-z0-9-]+$/.test(r.basic.slug)||a.push("Slug can only contain lowercase letters, numbers, and hyphens"),r.basic.slug.trim())try{const{tenantService:i}=await wa(async()=>{const{tenantService:l}=await Promise.resolve().then(()=>qoe);return{tenantService:l}},void 0);await i.isSlugAvailable(r.basic.slug)||a.push("This slug is already taken. Please choose a different one.")}catch(i){console.error("Error checking slug availability:",i),a.push("Unable to verify slug availability. Please try again.")}break;case"domains":r.domains.selectedDomainIds.length===0&&a.push("At least one domain must be selected");break;case"limits":r.limits.global_max_teachers<1&&a.push("Maximum teachers must be at least 1"),r.limits.global_max_students<1&&a.push("Maximum students must be at least 1");break;case"admins":r.admins.invitations.length===0&&a.push("At least one tenant admin invitation is required");for(const i of r.admins.invitations){if(!i.email.trim()){a.push("All admin invitations must have valid email addresses");break}/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||a.push(`Invalid email address: ${i.email}`)}break}return console.log(`🔍 [QA] Validation results for ${n}:`,{valid:a.length===0,errorCount:a.length,errors:a}),a.length>0?(e(i=>({errors:{...i.errors,[n]:a}}),!1,"setValidationErrors"),!1):(e(i=>{const o={...i.errors};return delete o[n],{errors:o}},!1,"clearValidationErrors"),!0)},setErrors:n=>{e({errors:n},!1,"setErrors")},clearErrors:()=>{e({errors:{}},!1,"clearErrors")},setLoading:n=>{e({isLoading:n},!1,"setLoading")}}),{name:"tenant-wizard-store",partialize:e=>({currentStep:e.currentStep,completedSteps:Array.from(e.completedSteps),data:{...e.data,admins:{invitations:[]}}}),onRehydrateStorage:()=>e=>{e&&Array.isArray(e.completedSteps)&&(e.completedSteps=new Set(e.completedSteps))}}),{name:"tenant-wizard"})),sce=()=>{const e=Mt(a=>a.data.basic),t=Mt(a=>a.updateBasicInfo),n=Mt(a=>a.errors.basic||[]),r=Mt(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("basic")}},rce=()=>{const e=Mt(a=>a.data.domains),t=Mt(a=>a.updateDomainAssignment),n=Mt(a=>a.errors.domains||[]),r=Mt(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("domains")}},ace=()=>{const e=Mt(a=>a.data.limits),t=Mt(a=>a.updateGlobalLimits),n=Mt(a=>a.errors.limits||[]),r=Mt(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("limits")}},ice=()=>{const e=Mt(a=>a.data.admins),t=Mt(a=>a.updateAdminInvitations),n=Mt(a=>a.errors.admins||[]),r=Mt(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("admins")}},oce=()=>{const e=Mt(a=>a.data.settings),t=Mt(a=>a.updateSettings),n=Mt(a=>a.errors.settings||[]),r=Mt(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("settings")}},b2=[{value:"active",label:"Active",color:"bg-green-100 text-green-800"},{value:"trial",label:"Trial",color:"bg-blue-100 text-blue-800"},{value:"suspended",label:"Suspended",color:"bg-yellow-100 text-yellow-800"},{value:"inactive",label:"Inactive",color:"bg-gray-100 text-gray-800"}],w2=[{value:"free",label:"Free",description:"Basic features with limitations"},{value:"basic",label:"Basic",description:"Standard features for small teams"},{value:"premium",label:"Premium",description:"Advanced features for growing organizations"},{value:"enterprise",label:"Enterprise",description:"Full features with priority support"}],GN=()=>{const{data:e,update:t,errors:n}=sce(),[r,a]=f.useState([]),[i,o]=f.useState(!1),l=async u=>{if(!u)return;o(!0);const h=[],m=Qn.generateSlug(u);try{await Qn.isSlugAvailable(m)&&h.push(m);for(let v=2;v<=5;v++){const x=`${m}-${v}`;if(await Qn.isSlugAvailable(x)&&h.push(x),h.length>=3)break}if(h.length<3){const v=new Date().getFullYear(),x=`${m}-${v}`;await Qn.isSlugAvailable(x)&&h.push(x)}a(h)}catch(p){console.error("Error generating slug suggestions:",p)}finally{o(!1)}};f.useEffect(()=>{n.some(h=>h.includes("slug")&&h.includes("taken"))&&e.name?l(e.name):a([])},[n,e.name]);const c=b2.find(u=>u.value===e.status),d=w2.find(u=>u.value===e.subscription_tier);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"tenant-name",className:"text-sm font-medium",children:"Tenant Name *"}),s.jsx(pe,{id:"tenant-name",placeholder:"Enter tenant name (e.g., Acme University)",value:e.name,onChange:u=>t({name:u.target.value}),className:n.some(u=>u.includes("name"))?"border-destructive":""}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"The display name for this tenant that users will see"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"tenant-slug",className:"text-sm font-medium",children:"Tenant Slug *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"gemeos.ai/"}),s.jsx(pe,{id:"tenant-slug",placeholder:"tenant-slug",value:e.slug,onChange:u=>t({slug:u.target.value.toLowerCase()}),className:n.some(u=>u.includes("slug"))?"border-destructive":""})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier used in URLs. Only lowercase letters, numbers, and hyphens allowed."}),r.length>0&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Suggested alternatives:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.map(u=>s.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>t({slug:u}),className:"h-7 text-xs bg-white hover:bg-blue-50 border-blue-300",children:u},u)),s.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:()=>l(e.name),disabled:i,className:"h-7 text-xs bg-white hover:bg-blue-50 border-blue-300",children:[s.jsx(cs,{className:`h-3 w-3 mr-1 ${i?"animate-spin":""}`}),"More"]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"tenant-description",className:"text-sm font-medium",children:"Description"}),s.jsx(Fn,{id:"tenant-description",placeholder:"Brief description of the tenant organization...",value:e.description||"",onChange:u=>t({description:u.target.value}),className:"min-h-[80px] resize-none",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Optional description for internal reference"}),s.jsxs("span",{children:[(e.description||"").length,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium",children:"Status *"}),s.jsxs(Ve,{value:e.status,onValueChange:u=>t({status:u}),children:[s.jsx(ze,{children:s.jsx(qe,{children:c&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(X,{variant:"outline",className:c.color,children:c.label})})})}),s.jsx(Ue,{children:b2.map(u=>s.jsx(le,{value:u.value,children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(X,{variant:"outline",className:u.color,children:u.label})})},u.value))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Current operational status of the tenant"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium",children:"Subscription Tier *"}),s.jsxs(Ve,{value:e.subscription_tier,onValueChange:u=>t({subscription_tier:u}),children:[s.jsx(ze,{children:s.jsx(qe,{children:d&&s.jsx("span",{className:"font-medium capitalize",children:d.label})})}),s.jsx(Ue,{children:w2.map(u=>s.jsx(le,{value:u.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium capitalize",children:u.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:u.description})]})},u.value))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Determines available features and limitations"})]})]}),e.name&&s.jsxs("div",{className:"p-4 border rounded-lg bg-muted/30",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Preview"}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-bold text-primary",children:e.name.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:e.name}),e.slug&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["gemeos.ai/",e.slug]}),e.description&&s.jsx("div",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c&&s.jsx(X,{variant:"outline",className:c.color+" text-xs",children:c.label}),s.jsx(X,{variant:"outline",className:"text-xs capitalize",children:e.subscription_tier})]})]})]})]})]})},KN=()=>{const{data:e,update:t,errors:n}=rce(),{domains:r,isLoading:a}=As(),i=l=>{const c=[...e.selectedDomainIds],d=new Map(e.domainSettings),u=c.indexOf(l);u===-1?(c.push(l),d.set(l,{max_teachers:10,max_students:100})):(c.splice(u,1),d.delete(l)),t({selectedDomainIds:c,domainSettings:d})},o=(l,c,d)=>{const u=new Map(e.domainSettings),h=u.get(l)||{max_teachers:10,max_students:100};u.set(l,{...h,[c]:d}),t({domainSettings:u})};return a?s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(4)].map((l,c)=>s.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"},c))})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Select Learning Domains"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which learning domains this tenant will have access to. You can configure individual limits for each domain, or use global limits from the next step."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:"Available Domains"}),s.jsxs(X,{variant:"outline",children:[e.selectedDomainIds.length," selected"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r==null?void 0:r.map(l=>{const c=e.selectedDomainIds.includes(l.id),d=e.domainSettings.get(l.id);return s.jsxs(V,{className:`cursor-pointer transition-all hover:shadow-md ${c?"ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>i(l.id),children:[s.jsx(G,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Js,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(Y,{className:"text-base",children:l.name}),s.jsx(we,{className:"text-sm",children:l.description||"No description available"})]})]}),c&&s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:s.jsx(pn,{className:"h-4 w-4 text-primary-foreground"})})]})}),c&&d&&s.jsxs(W,{className:"pt-0",children:[s.jsx(cn,{className:"mb-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(H$,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Domain Limits"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(Q,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(et,{className:"h-3 w-3"}),"Max Teachers"]}),s.jsx(pe,{type:"number",min:"1",value:d.max_teachers,onChange:u=>o(l.id,"max_teachers",Math.max(1,parseInt(u.target.value)||1)),onClick:u=>u.stopPropagation(),className:"h-8"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(Q,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(yr,{className:"h-3 w-3"}),"Max Students"]}),s.jsx(pe,{type:"number",min:"1",value:d.max_students,onChange:u=>o(l.id,"max_students",Math.max(1,parseInt(u.target.value)||1)),onClick:u=>u.stopPropagation(),className:"h-8"})]})]})]})]})]},l.id)})})]}),e.selectedDomainIds.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg bg-muted/30",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Selected Domains Summary"}),s.jsx("div",{className:"space-y-2",children:e.selectedDomainIds.map(l=>{const c=r==null?void 0:r.find(u=>u.id===l),d=e.domainSettings.get(l);return!c||!d?null:s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-background rounded border",children:[s.jsx("div",{className:"font-medium",children:c.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("span",{children:[d.max_teachers," teachers"]}),s.jsxs("span",{children:[d.max_students," students"]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>i(l),className:"h-6 px-2 text-xs text-destructive hover:text-destructive",children:"Remove"})]})]},l)})}),s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Total Domain Limits:"}),s.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[s.jsxs("span",{children:[Array.from(e.domainSettings.values()).reduce((l,c)=>l+c.max_teachers,0)," teachers max"]}),s.jsxs("span",{children:[Array.from(e.domainSettings.values()).reduce((l,c)=>l+c.max_students,0)," students max"]})]})]})})]}),e.selectedDomainIds.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Js,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No domains selected yet"}),s.jsx("p",{className:"text-sm",children:"Click on domains above to add them to this tenant"})]})]})},QN=()=>{const{data:e,update:t,errors:n}=ace();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ua,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-1",children:"Global User Limits"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Set the maximum number of teachers and students allowed across all domains for this tenant. These limits override individual domain limits when enforced."})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(et,{className:"h-5 w-5 text-primary"}),"Teacher Limit"]}),s.jsx(we,{children:"Maximum number of teachers allowed in this tenant"})]}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"max-teachers",className:"text-sm font-medium",children:"Maximum Teachers *"}),s.jsx(pe,{id:"max-teachers",type:"number",min:"1",max:"10000",placeholder:"50",value:e.global_max_teachers,onChange:i=>t({global_max_teachers:Math.max(1,parseInt(i.target.value)||1)}),className:n.some(i=>i.includes("teacher"))?"border-destructive":""}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: 10-100 for most organizations"})]}),0>0]})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(yr,{className:"h-5 w-5 text-primary"}),"Student Limit"]}),s.jsx(we,{children:"Maximum number of students allowed in this tenant"})]}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"max-students",className:"text-sm font-medium",children:"Maximum Students *"}),s.jsx(pe,{id:"max-students",type:"number",min:"1",max:"100000",placeholder:"500",value:e.global_max_students,onChange:i=>t({global_max_students:Math.max(1,parseInt(i.target.value)||1)}),className:n.some(i=>i.includes("student"))?"border-destructive":""}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: 100-5000 for most organizations"})]}),0>0]})})]})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-5 w-5 text-primary"}),"Limit Enforcement"]}),s.jsx(we,{children:"Control how strictly these limits are enforced"})]}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{htmlFor:"enforce-limits",className:"text-sm font-medium",children:"Enforce Limits"}),s.jsx(X,{variant:e.enforce_limits?"default":"secondary",children:e.enforce_limits?"Enabled":"Disabled"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e.enforce_limits?"Users cannot exceed the configured limits":"Limits are advisory only - users can exceed them"})]}),s.jsx(Nt,{id:"enforce-limits",checked:e.enforce_limits,onCheckedChange:i=>t({enforce_limits:i})})]}),!e.enforce_limits&&s.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(PA,{className:"h-4 w-4 text-amber-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-amber-800",children:[s.jsx("div",{className:"font-medium",children:"Limits Not Enforced"}),s.jsx("div",{children:"When disabled, these limits serve as guidelines only. Administrators can still add users beyond these limits."})]})]})})]})})]}),s.jsxs(V,{className:"bg-primary/5",children:[s.jsx(G,{children:s.jsx(Y,{className:"text-base",children:"Limits Summary"})}),s.jsxs(W,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:e.global_max_teachers.toLocaleString()}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Maximum Teachers"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:e.global_max_students.toLocaleString()}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Maximum Students"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Users Allowed:"}),s.jsx("span",{className:"font-semibold",children:(e.global_max_teachers+e.global_max_students).toLocaleString()})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Enforcement:"}),s.jsx(X,{variant:e.enforce_limits?"default":"secondary",children:e.enforce_limits?"Strict":"Advisory"})]})]})]})]}),s.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ua,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("div",{className:"font-medium mb-1",children:"Recommendations"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Set teacher limits based on your organization size and growth plans"}),s.jsx("li",{children:"• Student limits should account for multiple classes and future enrollment"}),s.jsx("li",{children:"• Enable enforcement for production tenants to prevent unexpected costs"}),s.jsx("li",{children:"• You can adjust these limits later from the tenant settings"})]})]})]})})]})},YN=()=>{const{data:e,update:t,errors:n}=ice(),{mode:r}=Mt(),[a,i]=f.useState(""),[o,l]=f.useState(""),c=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),d=()=>{if(l(""),!a.trim()){l("Email address is required");return}if(!c(a)){l("Please enter a valid email address");return}if(e.invitations.some(x=>x.email.toLowerCase()===a.toLowerCase())){l("This email address is already invited");return}const v=[...e.invitations,{email:a,role:"tenant_admin",sendImmediately:!0}];t({invitations:v}),i("")},u=p=>{const v=e.invitations.filter(x=>x.email!==p);t({invitations:v})},h=(p,v,x)=>{const y=e.invitations.map(g=>g.email===p?{...g,[v]:x}:g);t({invitations:y})},m=p=>{p.key==="Enter"&&d()};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ua,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-1",children:"Tenant Administrator Invitations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Invite people to manage this tenant. Tenant administrators can manage domains, invite teachers and students, and configure tenant settings."})]})]})}),r==="edit"&&s.jsx(V,{className:"border-blue-200 bg-blue-50",children:s.jsx(W,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ua,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Edit Mode: Existing Admins"}),s.jsx("p",{className:"text-sm text-blue-700",children:"The list below shows existing tenant administrators. When you save changes, existing users will receive password reset emails instead of invitation emails. New administrators added here will receive invitation emails."})]})]})})}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5 text-primary"}),r==="edit"?"Add New Administrator":"Add Administrator"]}),s.jsx(we,{children:r==="edit"?"Add a new administrator to this tenant (will receive invitation email)":"Send an invitation to a new tenant administrator"})]}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(Q,{htmlFor:"admin-email",className:"text-sm font-medium",children:"Email Address"}),s.jsx(pe,{id:"admin-email",type:"email",placeholder:"admin@example.com",value:a,onChange:p=>{i(p.target.value),l("")},onKeyPress:m,className:o?"border-destructive":""}),o&&s.jsx("p",{className:"text-xs text-destructive",children:o})]}),s.jsx("div",{className:"pt-7",children:s.jsxs(z,{onClick:d,disabled:!a.trim(),children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Add"]})})]})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(At,{className:"h-5 w-5 text-primary"}),"Pending Invitations"]}),s.jsxs(X,{variant:"outline",children:[e.invitations.length," invitation",e.invitations.length!==1?"s":""]})]}),s.jsx(we,{children:"Manage administrator invitations for this tenant"})]}),s.jsx(W,{children:e.invitations.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Jn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"font-medium mb-1",children:"No administrators invited yet"}),s.jsx("p",{className:"text-sm",children:"Add email addresses above to invite tenant administrators"})]}):s.jsx("div",{className:"space-y-3",children:e.invitations.map((p,v)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(At,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:p.email}),s.jsxs(X,{variant:"outline",className:"text-xs",children:[s.jsx(sn,{className:"h-3 w-3 mr-1"}),"Tenant Admin"]})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:s.jsx("div",{className:"flex items-center gap-1",children:p.sendImmediately?s.jsxs(s.Fragment,{children:[s.jsx(Qo,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"text-green-600",children:"Send immediately"})]}):s.jsxs(s.Fragment,{children:[s.jsx(qs,{className:"h-3 w-3 text-amber-600"}),s.jsx("span",{className:"text-amber-600",children:"Send later"})]})})})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>u(p.email),className:"text-destructive hover:text-destructive",children:s.jsx(Ts,{className:"h-4 w-4"})})]}),s.jsx(cn,{className:"my-3"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Q,{htmlFor:`send-${v}`,className:"text-sm",children:"Send invitation email immediately after tenant creation"}),s.jsx(Nt,{id:`send-${v}`,checked:p.sendImmediately,onCheckedChange:x=>h(p.email,"sendImmediately",x)})]})]},p.email))})})]}),s.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2 text-blue-900",children:[s.jsx(sn,{className:"h-5 w-5"}),"Tenant Administrator Permissions"]})}),s.jsxs(W,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:"User Management"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Invite and manage teachers"}),s.jsx("li",{children:"• Invite and manage students"}),s.jsx("li",{children:"• Assign users to domains"}),s.jsx("li",{children:"• View user activity and progress"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium",children:"Tenant Configuration"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Manage domain assignments"}),s.jsx("li",{children:"• Configure user limits"}),s.jsx("li",{children:"• Customize tenant settings"}),s.jsx("li",{children:"• Generate usage reports"})]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded border",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs text-blue-700",children:[s.jsx("div",{className:"font-medium",children:"Important:"}),s.jsx("div",{children:"Tenant administrators have full control over this tenant but cannot access other tenants or platform administration features."})]})]})})]})]}),e.invitations.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg bg-muted/30",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Invitation Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Total invitations:"}),s.jsx("span",{className:"font-medium",children:e.invitations.length})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Send immediately:"}),s.jsx("span",{className:"font-medium",children:e.invitations.filter(p=>p.sendImmediately).length})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Send later:"}),s.jsx("span",{className:"font-medium",children:e.invitations.filter(p=>!p.sendImmediately).length})]})]}),e.invitations.some(p=>!p.sendImmediately)&&s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(ua,{className:"h-3 w-3"}),s.jsx("span",{children:'Invitations marked "Send later" will be created but not sent. You can send them manually from the tenant management page.'})]})})]})]})},j2={analytics:{title:"Analytics & Reporting",icon:fh,features:[{key:"analytics",name:"Usage Analytics",description:"Track user activity, learning progress, and engagement metrics",recommended:!0},{key:"advanced_reporting",name:"Advanced Reporting",description:"Generate detailed reports, export data, and create custom dashboards",premium:!0},{key:"real_time_metrics",name:"Real-time Metrics",description:"Live updates of user activity and system performance",premium:!0}]},collaboration:{title:"Collaboration & Communication",icon:Q$,features:[{key:"team_collaboration",name:"Team Collaboration",description:"Enable teachers to collaborate on content and share resources",recommended:!0},{key:"messaging_system",name:"Internal Messaging",description:"Built-in messaging system for tenant members",premium:!0},{key:"announcement_system",name:"Announcements",description:"Broadcast important messages to all users in the tenant",recommended:!0}]},customization:{title:"Branding & Customization",icon:Cw,features:[{key:"custom_branding",name:"Custom Branding",description:"Upload logos, customize colors, and personalize the interface",premium:!0},{key:"white_label",name:"White Label",description:"Remove Gemeos branding and use your own",enterprise:!0},{key:"custom_domains",name:"Custom Domains",description:"Use your own domain name (e.g., learning.yourcompany.com)",enterprise:!0}]},integrations:{title:"Integrations & API",icon:E$,features:[{key:"api_access",name:"API Access",description:"Integrate with external systems using our REST API",premium:!0},{key:"sso_integration",name:"Single Sign-On (SSO)",description:"Connect with SAML, OIDC, or Active Directory",enterprise:!0},{key:"webhook_notifications",name:"Webhook Notifications",description:"Receive real-time notifications about user events",premium:!0}]}},XN=()=>{const{data:e,update:t,errors:n}=oce(),{toast:r}=at(),a=f.useRef(null),[i,o]=f.useState(!1),[l,c]=f.useState(e.customization.logo_url||null),d=y=>{const g={...e.features,[y]:!e.features[y]};t({features:g})},u=(y,g)=>{const b={...e.customization,[y]:g};t({customization:b})},h=async y=>{if(!y)return;if(!["image/png","image/jpeg","image/jpg","image/svg+xml"].includes(y.type)){r({title:"Invalid file type",description:"Please upload a PNG, JPG, or SVG file",variant:"destructive"});return}if(y.size>2*1024*1024){r({title:"File too large",description:"Please upload a file smaller than 2MB",variant:"destructive"});return}o(!0);try{const b=URL.createObjectURL(y);c(b);const w=new FileReader;w.onload=C=>{var S;const _=(S=C.target)==null?void 0:S.result;u("logo_url",_),r({title:"Logo uploaded",description:"Logo has been uploaded successfully"})},w.readAsDataURL(y)}catch(b){console.error("Error uploading logo:",b),r({title:"Upload failed",description:"Failed to upload logo. Please try again.",variant:"destructive"})}finally{o(!1)}},m=y=>{var b;const g=(b=y.target.files)==null?void 0:b[0];g&&h(g)},p=()=>{c(null),u("logo_url",""),a.current&&(a.current.value="")},v=y=>y.enterprise?s.jsx(X,{variant:"outline",className:"text-xs bg-purple-100 text-purple-700 border-purple-200",children:"Enterprise"}):y.premium?s.jsx(X,{variant:"outline",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:"Premium"}):y.recommended?s.jsx(X,{variant:"outline",className:"text-xs bg-green-100 text-green-700 border-green-200",children:"Recommended"}):null,x=Object.values(e.features).filter(Boolean).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ua,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-1",children:"Tenant Configuration"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure features, branding, and customization options for this tenant. You can modify these settings later from the tenant management dashboard."})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Feature Configuration"}),s.jsxs(X,{variant:"outline",children:[x," feature",x!==1?"s":""," enabled"]})]}),Object.entries(j2).map(([y,g])=>s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(g.icon,{className:"h-5 w-5 text-primary"}),g.title]})}),s.jsx(W,{children:s.jsx("div",{className:"space-y-4",children:g.features.map(b=>s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"font-medium",children:b.name}),v(b)]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),s.jsx(Nt,{checked:e.features[b.key]||!1,onCheckedChange:()=>d(b.key),className:"ml-4"})]},b.key))})})]},y))]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(Cw,{className:"h-5 w-5 text-primary"}),"Branding & Customization"]}),s.jsx(we,{children:"Customize the look and feel of this tenant"})]}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(Q,{className:"font-medium",children:"Color Theme"}),s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{value:"default",name:"Default",color:"#2563eb"},{value:"green",name:"Green",color:"#059669"},{value:"purple",name:"Purple",color:"#7c3aed"},{value:"orange",name:"Orange",color:"#ea580c"}].map(y=>s.jsxs("button",{onClick:()=>u("theme",y.value),className:`p-3 border rounded-lg text-center transition-all ${e.customization.theme===y.value?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-muted hover:border-primary/50"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full mx-auto mb-2",style:{backgroundColor:y.color}}),s.jsx("div",{className:"text-xs font-medium",children:y.name})]},y.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"primary-color",className:"font-medium",children:"Custom Primary Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pe,{id:"primary-color",type:"color",value:e.customization.primary_color||"#2563eb",onChange:y=>u("primary_color",y.target.value),className:"w-20 h-10 p-1 cursor-pointer"}),s.jsx(pe,{type:"text",placeholder:"#2563eb",value:e.customization.primary_color||"",onChange:y=>u("primary_color",y.target.value),className:"flex-1 font-mono"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This color will be used for buttons, links, and accents throughout the interface"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"font-medium",children:"Logo"}),s.jsxs("div",{className:"space-y-3",children:[l?s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Current Logo"}),s.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:p,className:"text-destructive hover:text-destructive",children:[s.jsx(Lt,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),s.jsx("div",{className:"flex items-center justify-center bg-muted/30 rounded border p-4",children:s.jsx("img",{src:l,alt:"Logo preview",className:"max-h-16 max-w-32 object-contain"})})]}):s.jsxs("div",{className:"border border-dashed border-muted rounded-lg p-6 text-center cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>{var y;return(y=a.current)==null?void 0:y.click()},children:[s.jsx(On,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Click to upload logo"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Recommended: 200x60px PNG, JPG, or SVG (max 2MB)"})]}),s.jsx("input",{ref:a,type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml",onChange:m,className:"hidden"}),l&&s.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>{var y;return(y=a.current)==null?void 0:y.click()},disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent mr-2"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(On,{className:"h-4 w-4 mr-2"}),"Change Logo"]})})]})]})]})})]}),s.jsxs(V,{className:"bg-primary/5",children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(Of,{className:"h-5 w-5 text-primary"}),"Configuration Summary"]})}),s.jsxs(W,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Enabled Features"}),s.jsxs("div",{className:"space-y-1",children:[Object.entries(e.features).filter(([,y])=>y).map(([y])=>{const g=Object.values(j2).flatMap(b=>b.features).find(b=>b.key===y);return g?s.jsxs("div",{className:"text-xs text-muted-foreground",children:["• ",g.name]},y):null}),x===0&&s.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No features enabled"})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Customization"}),s.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsxs("div",{children:["• Theme: ",e.customization.theme||"Default"]}),s.jsxs("div",{children:["• Primary Color: ",e.customization.primary_color||"#2563eb"]}),s.jsxs("div",{children:["• Logo: ",e.customization.logo_url?"Custom":"Default"]})]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ua,{className:"h-4 w-4"}),s.jsx("span",{children:"These settings can be modified later from the tenant settings page"})]})})]})]})]})};class lce{constructor(){Bt(this,"cache",new Map);Bt(this,"TTL",3e4)}set(t,n){this.cache.set(t,{data:n,timestamp:Date.now()})}get(t){const n=this.cache.get(t);return n?Date.now()-n.timestamp>this.TTL?(this.cache.delete(t),null):n.data:null}invalidate(t){if(!t)this.cache.clear();else for(const n of this.cache.keys())n.includes(t)&&this.cache.delete(n)}}class cce{constructor(t){Bt(this,"queryClient");Bt(this,"statsCache");Bt(this,"realtimeChannel",null);Bt(this,"statsUpdateQueue");Bt(this,"updateCallbacks");this.queryClient=t,this.statsCache=new lce,this.statsUpdateQueue=new Map,this.updateCallbacks=new Set,this.initializeRealtimeSubscription()}async getTenantsWithStats(t={}){var u;const{page:n=1,pageSize:r=20,search:a,status:i,sortBy:o="name",sortOrder:l="asc"}=t,c=JSON.stringify(t),d=this.statsCache.get(c);if(d)return console.log("Returning cached tenant stats"),d;try{const{data:h,error:m}=await L.rpc("get_tenants_with_stats",{p_page:n,p_page_size:r,p_search:a||null,p_status:i||null,p_sort_by:o,p_sort_order:l});if(m)throw m;const p=((u=h==null?void 0:h[0])==null?void 0:u.total_count)||0,v=(h||[]).map(({total_count:y,...g})=>g);if(p===0&&n===1)return console.log("🔄 [TENANT-SERVICE] Materialized view returned 0 results, trying fallback query..."),this.getFallbackTenantList(t);const x={data:v,total:p,page:n,pageSize:r,totalPages:Math.ceil(p/r)};return this.statsCache.set(c,x),n*r<p&&this.prefetchNextPage({...t,page:n+1}),x}catch(h){return console.error("❌ [TENANT-SERVICE] Error fetching tenants with stats:",h),console.log("🔄 [TENANT-SERVICE] Using fallback query due to error..."),this.getFallbackTenantList(t)}}async getTenantWithStats(t){const n=this.statsCache.get(`tenant-${t}`);if(n)return n;const{data:r,error:a}=await L.from("tenant_statistics").select("*").eq("tenant_id",t).single();return a?(console.error("Error fetching tenant stats:",a),null):(this.statsCache.set(`tenant-${t}`,r),r)}async batchFetchStatistics(t){if(t.length===0)return new Map;const{data:n,error:r}=await L.rpc("batch_get_tenant_stats",{tenant_ids:t});return r?(console.error("Error batch fetching stats:",r),new Map):new Map((n||[]).map(a=>[a.tenant_id,{tenant_id:a.tenant_id,domain_count:a.domain_count,teacher_count:a.teacher_count,student_count:a.student_count}]))}async createTenantWithWizardData(t){console.log("🏗️ [QA-DB] Starting enhanced tenant creation service");try{const{data:{session:n}}=await L.auth.getSession();console.log("🏗️ [QA-DB] Current session:",n?"authenticated":"not authenticated"),console.log("🏗️ [QA-DB] Step 1: Creating tenant record");const r={name:t.basic.name,slug:t.basic.slug,description:t.basic.description,status:t.basic.status,subscription_tier:t.basic.subscription_tier,max_users:t.limits.global_max_teachers+t.limits.global_max_students,settings:{...t.settings,limits:{max_teachers:t.limits.global_max_teachers,max_students:t.limits.global_max_students,enforce_limits:t.limits.enforce_limits}}};console.log("🏗️ [QA-DB] Inserting tenant data:",r);const{data:a,error:i}=await L.from("tenants").insert(r).select().single();if(console.log("🏗️ [QA-DB] Raw tenant creation result:",{tenant:a,tenantError:i}),i)throw i;if(!a)throw new Error("Tenant creation succeeded but no tenant data returned");console.log("✅ [QA-DB] Step 1 completed: Tenant created",{tenantId:a.id,tenantName:a.name,tenantSlug:a.slug});const{error:o}=await L.rpc("add_creator_to_tenant",{p_tenant_id:a.id,p_role_name:"tenant_admin"});if(o?console.error("⚠️ [QA-DB] add_creator_to_tenant failed:",o):console.log("✅ [QA-DB] Creator added to tenant via RPC"),console.log("🏗️ [QA-DB] Step 2: Creating domain assignments"),t.domains.selectedDomainIds.length>0){const c=t.domains.selectedDomainIds.map(u=>{const h=t.domains.domainSettings.get(u)||{max_teachers:5,max_students:100};return{tenant_id:a.id,domain_id:u,is_active:!0,max_teachers:h.max_teachers,max_students:h.max_students}}),{error:d}=await L.from("tenant_domains").insert(c);if(d)throw d;console.log("✅ [QA-DB] Step 2 completed: Domain assignments created",{domainsAssigned:t.domains.selectedDomainIds.length,domainIds:t.domains.selectedDomainIds})}if(console.log("🏗️ [QA-DB] Step 3: Creating admin invitations"),t.admins.invitations.length>0){const{data:c,error:d}=await L.from("user_roles").select("id, name").in("name",t.admins.invitations.map(x=>x.role));if(d)throw d;const u=new Map((c==null?void 0:c.map(x=>[x.name,x.id]))||[]),h=t.admins.invitations.map(x=>{const y=u.get(x.role);if(!y)throw new Error(`Role '${x.role}' not found in database`);return{tenant_id:a.id,email:x.email,role_id:y,role_name:x.role,status:"pending",expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString(),invited_by:(n==null?void 0:n.user.id)||a.created_by}}),{data:m,error:p}=await L.from("invitations").insert(h).select("*");if(p)throw p;console.log("✅ [QA-DB] Step 3 completed: Admin invitations created",{invitationsCreated:t.admins.invitations.length,emails:t.admins.invitations.map(x=>x.email)}),console.log("🏗️ [QA-DB] Step 4: Sending invitation emails");const v=t.admins.invitations.filter(x=>x.sendImmediately);for(const x of v){const y=m==null?void 0:m.find(g=>g.email===x.email);y&&await this.sendInvitationEmail(a.id,y)}console.log("✅ [QA-DB] Step 4 completed: Invitation emails sent")}console.log("🏗️ [QA-DB] Step 5: Refreshing materialized view and invalidating cache");try{const{error:c}=await L.rpc("refresh_tenant_statistics");c?console.error("⚠️ [QA-DB] Warning: Could not refresh materialized view:",c):console.log("✅ [QA-DB] Materialized view refreshed successfully")}catch(c){console.error("⚠️ [QA-DB] Warning: Could not refresh materialized view:",c)}this.statsCache.invalidate(),this.queryClient.invalidateQueries({queryKey:["tenants-grid"]}),this.queryClient.invalidateQueries({queryKey:["tenants-grid"],exact:!1});const l={tenant:a,domainsAssigned:t.domains.selectedDomainIds.length,invitationsSent:t.admins.invitations.length};return console.log("✅ [QA-DB] All database operations completed successfully:",l),l}catch(n){throw console.error("❌ [QA-DB] Enhanced tenant service failed:",n),n}}async updateTenant(t,n){this.queryClient.setQueryData(["tenant",t],r=>({...r,...n}));try{const{data:r,error:a}=await L.from("tenants").update(n).eq("id",t).select().single();if(a)throw a;return this.statsCache.invalidate(`tenant-${t}`),r}catch(r){throw this.queryClient.invalidateQueries({queryKey:["tenant",t]}),r}}initializeRealtimeSubscription(){this.realtimeChannel=L.channel("tenant-stats-updates").on("postgres_changes",{event:"*",schema:"public",table:"user_tenants"},t=>this.handleStatsUpdate(t)).on("postgres_changes",{event:"*",schema:"public",table:"tenant_domains"},t=>this.handleStatsUpdate(t)).subscribe()}handleStatsUpdate(t){var a,i;const n=((a=t.new)==null?void 0:a.tenant_id)||((i=t.old)==null?void 0:i.tenant_id);if(!n)return;this.statsUpdateQueue.has(n)&&clearTimeout(this.statsUpdateQueue.get(n));const r=setTimeout(async()=>{await this.refreshTenantStats(n),this.statsUpdateQueue.delete(n)},500);this.statsUpdateQueue.set(n,r)}async refreshTenantStats(t){try{const n=await this.getTenantWithStats(t);n&&(this.updateCallbacks.forEach(r=>{r({tenant_id:t,domain_count:n.domain_count,teacher_count:n.teacher_count,student_count:n.student_count})}),this.queryClient.invalidateQueries({queryKey:["tenant-stats",t]})),await L.rpc("refresh_single_tenant_stats",{p_tenant_id:t})}catch(n){console.error("Error refreshing tenant stats:",n)}}onStatsUpdate(t){return this.updateCallbacks.add(t),()=>{this.updateCallbacks.delete(t)}}async prefetchNextPage(t){this.queryClient.prefetchQuery({queryKey:["tenants-grid",t],queryFn:()=>this.getTenantsWithStats(t),staleTime:6e4})}async getFallbackTenantList(t){console.log("✅ [TENANT-SERVICE] Using fallback tenant query from base table");const{page:n=1,pageSize:r=20,search:a,status:i}=t,o=(n-1)*r,l=o+r-1;let c=L.from("tenants").select("*",{count:"exact"}).range(o,l).order("name");i&&(c=c.eq("status",i)),a&&(c=c.or(`name.ilike.%${a}%,slug.ilike.%${a}%`));const{data:d,error:u,count:h}=await c;if(u)throw u;return{data:(d||[]).map(p=>({tenant_id:p.id,name:p.name,slug:p.slug,description:p.description,status:p.status,subscription_tier:p.subscription_tier,settings:p.settings,domain_count:0,teacher_count:0,student_count:0,admin_count:0,total_users:0,last_activity:p.updated_at,created_at:p.created_at})),total:h||0,page:n,pageSize:r,totalPages:Math.ceil((h||0)/r)}}async sendInvitationEmail(t,n){console.log("📧 [QA-EMAIL] Preparing to send invitation email:",{email:n.email,role:n.role_name,tenantId:t,invitationId:n.id});try{const{data:r,error:a}=await L.from("tenants").select("name, slug").eq("id",t).single();if(a||!r)throw console.error("❌ [QA-EMAIL] Failed to fetch tenant info:",a),new Error("Failed to fetch tenant information for email");const{emailService:i}=await wa(async()=>{const{emailService:l}=await Promise.resolve().then(()=>Ooe);return{emailService:l}},void 0),o=await i.queueEmailForTenant(t,{templateType:"invitation",to:n.email,templateVariables:{invitation_id:n.id,tenant_name:r.name,tenant_slug:r.slug,tenant_id:t,inviter_name:"Platform Administrator",role_name:n.role_name,expires_at:new Date(n.expires_at).toLocaleDateString(),support_email:"support@gemeos.ai"},priority:"high",relatedEntityType:"tenant",relatedEntityId:t});if(o){const l=i.processQueueItemForTenant;l&&await l.call(i,o,t),console.log("✅ [QA-EMAIL] Invitation email sent successfully:",{email:n.email,tenantName:r.name,queueId:o,invitationId:n.id})}else throw new Error("Failed to queue invitation email")}catch(r){console.error("❌ [QA-EMAIL] Error in sendInvitationEmail:",{error:r,errorMessage:r instanceof Error?r.message:"Unknown error",errorStack:r instanceof Error?r.stack:void 0,tenantId:t,email:n.email,invitationId:n.id}),console.warn("⚠️ [QA-EMAIL] Email sending failed but tenant creation will continue")}}async forceRefreshStatistics(){const{error:t}=await L.rpc("refresh_tenant_statistics");if(t)throw console.error("Error refreshing statistics:",t),t;this.statsCache.invalidate(),this.queryClient.invalidateQueries({queryKey:["tenants-grid"]})}destroy(){this.realtimeChannel&&L.removeChannel(this.realtimeChannel),this.statsUpdateQueue.forEach(t=>clearTimeout(t)),this.statsUpdateQueue.clear(),this.updateCallbacks.clear(),this.statsCache.invalidate()}}let Sv=null;function JN(e){return Sv||(Sv=new cce(e)),Sv}const Jr=[{key:"basic",title:"Basic Information",description:"Tenant name, slug, and general settings",icon:Yn},{key:"domains",title:"Domain Assignment",description:"Select learning domains for this tenant",icon:Js},{key:"limits",title:"User Limits",description:"Set global teacher and student limits",icon:et},{key:"admins",title:"Admin Invitations",description:"Invite tenant administrators",icon:Jn},{key:"settings",title:"Settings",description:"Features and customization options",icon:kt}],dce=()=>{var k;const{isOpen:e,mode:t,currentStep:n,completedSteps:r,errors:a,isLoading:i,data:o,closeWizard:l,setCurrentStep:c,markStepComplete:d,markStepIncomplete:u,validateStep:h,setLoading:m}=Mt(),p=Nn(),{toast:v}=at(),x=Jr.findIndex(T=>T.key===n),y=Jr[x],g=(x+1)/Jr.length*100,b=async()=>{if(await h(n))if(d(n),N)await w();else{const A=Math.min(x+1,Jr.length-1);c(Jr[A].key)}else u(n)},w=async()=>{var T;m(!0);try{const A=JN(p),R={basic:o.basic,domains:o.domains,limits:o.limits,admins:o.admins,settings:o.settings};console.log("🚀 [QA] Starting tenant creation process"),console.log("🚀 [QA] Wizard data validation:",{basicInfo:{name:o.basic.name,slug:o.basic.slug,status:o.basic.status,tier:o.basic.subscription_tier},domains:{count:o.domains.selectedDomainIds.length,ids:o.domains.selectedDomainIds},limits:o.limits,admins:{invitationCount:o.admins.invitations.length,emails:o.admins.invitations.map(O=>O.email)}}),console.log("🚀 [QA] Calling enhanced tenant service...");const F=await A.createTenantWithWizardData(R);console.log("✅ [QA] Tenant created successfully:",F),console.log("✅ [QA] Database operations completed:",{tenantId:(T=F.tenant)==null?void 0:T.id,domainsAssigned:F.domainsAssigned,invitationsSent:F.invitationsSent,timestamp:new Date().toISOString()}),v({title:"Tenant Created",description:`${o.basic.name} has been created successfully with ${o.admins.invitations.length} admin invitation(s) sent`}),console.log("✅ [QA] Closing wizard and refreshing data..."),console.log("🔄 [QA] Invalidating all tenant-related queries..."),await p.invalidateQueries({queryKey:["tenants"]}),await p.invalidateQueries({queryKey:["tenants-grid"]}),await p.invalidateQueries({queryKey:["tenants-grid"],exact:!1}),await p.refetchQueries({queryKey:["tenants-grid"],type:"active"}),p.removeQueries({queryKey:["tenants-grid"],exact:!1}),console.log("✅ [QA] Cache invalidation completed"),l(),console.log("✅ [QA] Tenant creation workflow completed successfully")}catch(A){console.error("❌ [QA] Tenant creation failed:",A),console.error("❌ [QA] Error details:",{code:A==null?void 0:A.code,message:A==null?void 0:A.message,details:A==null?void 0:A.details,timestamp:new Date().toISOString()});let R="Failed to create tenant. Please try again.";A&&typeof A=="object"&&"code"in A?A.code==="23505"&&"details"in A?A.details.includes("slug")?R="This tenant slug is already taken. Please choose a different slug and try again.":R="A tenant with this information already exists. Please check your details and try again.":A.code==="23502"?R="Some required information is missing. Please fill in all required fields.":A.code==="PGRST204"?A.message.includes("role")?R="There was an issue with role assignment. Please try again or contact support.":R="Database schema error. Please try again or contact support.":A.code==="23503"?R="Some referenced data is invalid. Please check your selections and try again.":A.code==="42703"&&(R="Database structure issue. Please contact support."):A instanceof Error&&(R=A.message),v({title:"Creation Failed",description:R,variant:"destructive"})}finally{m(!1)}},C=()=>{const T=Math.max(x-1,0);c(Jr[T].key)},_=T=>{(Jr.findIndex(R=>R.key===T)<x||r.has(n))&&c(T)},S=x===0,N=x===Jr.length-1,j=()=>{switch(n){case"basic":return s.jsx(GN,{});case"domains":return s.jsx(KN,{});case"limits":return s.jsx(QN,{});case"admins":return s.jsx(YN,{});case"settings":return s.jsx(XN,{});default:return null}};return e?s.jsx(nn,{open:e,onOpenChange:l,children:s.jsxs(Kt,{className:"max-w-4xl max-h-[90vh] flex flex-col p-0",children:[s.jsxs(Qt,{className:"px-6 pt-6 pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Yt,{className:"text-2xl",children:t==="create"?"Create New Tenant":"Edit Tenant"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y.description})]}),s.jsx(z,{variant:"ghost",size:"icon",onClick:l,children:s.jsx(Lt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Step ",x+1," of ",Jr.length]}),s.jsxs("span",{children:[Math.round(g),"% complete"]})]}),s.jsx(Br,{value:g,className:"h-2"})]})]}),s.jsxs("div",{className:"flex-1 flex min-h-0",children:[s.jsx("div",{className:"w-64 border-r bg-muted/30 p-4 space-y-2",children:Jr.map((T,A)=>{var M,B,D;const R=T.key===n,F=r.has(T.key),O=((M=a[T.key])==null?void 0:M.length)>0,U=A<=x||F;return s.jsxs("button",{onClick:()=>U&&_(T.key),disabled:!U,className:ne("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-colors","hover:bg-background/50 disabled:cursor-not-allowed",R&&"bg-background shadow-sm border",!U&&"opacity-50"),children:[s.jsx("div",{className:ne("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",F&&"bg-green-100 text-green-700",R&&!F&&"bg-primary text-primary-foreground",!R&&!F&&"bg-muted text-muted-foreground",O&&"bg-destructive/10 text-destructive"),children:F?s.jsx(pn,{className:"h-4 w-4"}):s.jsx(T.icon,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:ne("font-medium text-sm",R&&"text-foreground",!R&&"text-muted-foreground"),children:T.title}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5 leading-tight",children:T.description}),O&&s.jsxs(X,{variant:"destructive",className:"text-xs mt-1",children:[(B=a[T.key])==null?void 0:B.length," error",((D=a[T.key])==null?void 0:D.length)!==1?"s":""]})]})]},T.key)})}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:s.jsxs("div",{className:"max-w-2xl",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(y.icon,{className:"h-5 w-5 text-primary"}),s.jsx("h2",{className:"text-xl font-semibold",children:y.title})]}),s.jsx("p",{className:"text-muted-foreground",children:y.description}),((k=a[n])==null?void 0:k.length)>0&&s.jsxs("div",{className:"mt-4 p-3 border border-destructive/20 bg-destructive/5 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-destructive mb-1",children:"Please fix the following issues:"}),s.jsx("ul",{className:"text-sm text-destructive space-y-0.5",children:a[n].map((T,A)=>s.jsxs("li",{children:["• ",T]},A))})]})]}),j()]})}),s.jsx(cn,{}),s.jsxs("div",{className:"p-6 flex items-center justify-between",children:[s.jsxs(z,{variant:"outline",onClick:C,disabled:S||i,className:"gap-2",children:[s.jsx(ph,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-2",children:N?s.jsx(z,{onClick:b,disabled:i,className:"gap-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),t==="create"?"Creating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"h-4 w-4"}),t==="create"?"Create Tenant":"Save Changes"]})}):s.jsxs(z,{onClick:b,disabled:i,className:"gap-2",children:["Next",s.jsx(_n,{className:"h-4 w-4"})]})})]})]})]})]})}):null},uce=()=>{const e=pt(),{openCreateWizard:t}=Mt(),{toast:n}=at(),[r,a]=f.useState([]),[i,o]=f.useState(!0);f.useEffect(()=>{l()},[]);const l=async()=>{try{console.log("🔍 [TENANT-LIST] Loading tenants..."),o(!0);const u=await Qn.getTenants();console.log("✅ [TENANT-LIST] Loaded tenants:",u.length,"tenants"),console.log("✅ [TENANT-LIST] Tenant data:",u),a(u)}catch(u){console.error("❌ [TENANT-LIST] Error loading tenants:",u),n({title:"Error Loading Tenants",description:"Failed to load tenant list. Please try again.",variant:"destructive"})}finally{o(!1)}},c=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),d=u=>{switch(u){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Tenant Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage all tenants, their domains, and user assignments"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{onClick:()=>e("/admin/tenants/create"),className:"gap-2",children:[s.jsx(Pt,{className:"h-4 w-4"}),"Add Tenant (New)"]}),s.jsxs(z,{onClick:t,variant:"outline",className:"gap-2",children:[s.jsx(Pt,{className:"h-4 w-4"}),"Add Tenant (Modal)"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s.jsxs(V,{children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Y,{className:"text-sm font-medium",children:"Total Tenants"}),s.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(W,{children:i?s.jsx(Pe,{className:"h-8 w-16"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.length===0?"No tenants yet":"Active tenants"})]})})]})}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Tenant List"}),s.jsx(we,{children:i?"Loading tenants...":`${r.length} tenant(s) found`})]}),s.jsx(W,{children:i?s.jsx("div",{className:"space-y-4",children:[1,2,3].map(u=>s.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[s.jsx(Pe,{className:"h-12 w-12 rounded"}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(Pe,{className:"h-4 w-48"}),s.jsx(Pe,{className:"h-3 w-24"})]}),s.jsx(Pe,{className:"h-6 w-16"})]},u))}):r.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Yn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No tenants found"}),s.jsx("p",{className:"text-sm",children:"Get started by creating your first tenant."})]}):s.jsx("div",{className:"space-y-4",children:r.map(u=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Yn,{className:"h-8 w-8 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:u.name}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Slug: ",u.slug]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(kn,{className:"h-3 w-3"}),"Created ",c(u.created_at)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(et,{className:"h-3 w-3"}),u.subscription_tier," tier"]})]}),u.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(X,{className:d(u.status),children:u.status}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:()=>e(`/admin/tenants/${u.id}`),className:"border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all duration-200",children:"Edit"}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>e(`/admin/tenants/${u.id}/edit`),className:"text-blue-600 border-blue-200 hover:bg-blue-50 transition-all duration-200",children:"Wizard"})]})]})]},u.id))})})]}),s.jsx(dce,{})]})},_r=[{key:"basic",title:"Basic Information",description:"Tenant name, slug, and general settings",icon:Yn},{key:"domains",title:"Domain Assignment",description:"Select learning domains for this tenant",icon:Js},{key:"limits",title:"User Limits",description:"Set global teacher and student limits",icon:et},{key:"admins",title:"Admin Invitations",description:"Invite tenant administrators",icon:Jn},{key:"settings",title:"Settings",description:"Features and customization options",icon:kt}],hce=()=>{var R;const e=pt(),[t,n]=ld(),r=Nn(),{toast:a}=at(),{currentStep:i,completedSteps:o,errors:l,isLoading:c,data:d,setCurrentStep:u,markStepComplete:h,markStepIncomplete:m,validateStep:p,setLoading:v,initializeCreateMode:x,resetWizard:y}=Mt();f.useEffect(()=>{x();const F=t.get("step");F&&_r.find(O=>O.key===F)&&u(F)},[x,t,u]),f.useEffect(()=>{i!==t.get("step")&&n({step:i},{replace:!0})},[i,t,n]);const g=_r.findIndex(F=>F.key===i),b=_r[g],w=(g+1)/_r.length*100,C=async()=>{if(await p(i))if(h(i),T)await _();else{const O=Math.min(g+1,_r.length-1);u(_r[O].key)}else m(i)},_=async()=>{v(!0);try{const F=JN(r),O={basic:d.basic,domains:d.domains,limits:d.limits,admins:d.admins,settings:d.settings};console.log("🚀 [CREATE-TENANT-PAGE] Starting tenant creation process"),console.log("🚀 [CREATE-TENANT-PAGE] Wizard data validation:",{basicInfo:{name:d.basic.name,slug:d.basic.slug,status:d.basic.status,tier:d.basic.subscription_tier},domains:{count:d.domains.selectedDomainIds.length,ids:d.domains.selectedDomainIds},limits:d.limits,admins:{invitationCount:d.admins.invitations.length,emails:d.admins.invitations.map(M=>M.email)}});const U=await F.createTenantWithWizardData(O);console.log("✅ [CREATE-TENANT-PAGE] Tenant created successfully:",U),a({title:"Tenant Created",description:`${d.basic.name} has been created successfully with ${d.admins.invitations.length} admin invitation(s) sent`}),await r.invalidateQueries({queryKey:["tenants"]}),await r.invalidateQueries({queryKey:["tenants-grid"]}),await r.refetchQueries({queryKey:["tenants-grid"],type:"active"}),y(),e("/admin/dashboard",{replace:!0})}catch(F){console.error("❌ [CREATE-TENANT-PAGE] Tenant creation failed:",F);let O="Failed to create tenant. Please try again.";F&&typeof F=="object"&&"code"in F?F.code==="23505"&&"details"in F&&(F.details.includes("slug")?O="This tenant slug is already taken. Please choose a different slug and try again.":O="A tenant with this information already exists. Please check your details and try again."):F instanceof Error&&(O=F.message),a({title:"Creation Failed",description:O,variant:"destructive"})}finally{v(!1)}},S=()=>{const F=Math.max(g-1,0);u(_r[F].key)},N=F=>{(_r.findIndex(U=>U.key===F)<g||o.has(i))&&u(F)},j=()=>{y(),e("/admin/dashboard")},k=g===0,T=g===_r.length-1,A=()=>{switch(i){case"basic":return s.jsx(GN,{});case"domains":return s.jsx(KN,{});case"limits":return s.jsx(QN,{});case"admins":return s.jsx(YN,{});case"settings":return s.jsx(XN,{});default:return null}};return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:j,className:"gap-2",children:[s.jsx(An,{className:"h-4 w-4"}),"Back to Tenants"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Create New Tenant"}),s.jsx("p",{className:"text-muted-foreground",children:b.description})]})]}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Step ",g+1," of ",_r.length,": ",b.title]}),s.jsxs("span",{children:[Math.round(w),"% complete"]})]}),s.jsx(Br,{value:w,className:"h-2"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{className:"text-lg",children:"Steps"}),s.jsx(we,{children:"Complete all steps to create your tenant"})]}),s.jsx(W,{className:"space-y-2",children:_r.map((F,O)=>{var E,I,q;const U=F.key===i,M=o.has(F.key),B=((E=l[F.key])==null?void 0:E.length)>0,D=O<=g||M;return s.jsxs("button",{onClick:()=>D&&N(F.key),disabled:!D,className:ne("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-colors","hover:bg-accent disabled:cursor-not-allowed",U&&"bg-accent border border-border",!D&&"opacity-50"),children:[s.jsx("div",{className:ne("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",M&&"bg-green-100 text-green-700",U&&!M&&"bg-primary text-primary-foreground",!U&&!M&&"bg-muted text-muted-foreground",B&&"bg-destructive/10 text-destructive"),children:M?s.jsx(pn,{className:"h-4 w-4"}):s.jsx(F.icon,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:ne("font-medium text-sm",U&&"text-foreground",!U&&"text-muted-foreground"),children:F.title}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5 leading-tight",children:F.description}),B&&s.jsxs(X,{variant:"destructive",className:"text-xs mt-1",children:[(I=l[F.key])==null?void 0:I.length," error",((q=l[F.key])==null?void 0:q.length)!==1?"s":""]})]})]},F.key)})})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsx(V,{children:s.jsxs(G,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b.icon,{className:"h-6 w-6 text-primary"}),s.jsxs("div",{children:[s.jsx(Y,{className:"text-xl",children:b.title}),s.jsx(we,{children:b.description})]})]}),((R=l[i])==null?void 0:R.length)>0&&s.jsxs("div",{className:"mt-4 p-3 border border-destructive/20 bg-destructive/5 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-destructive mb-1",children:"Please fix the following issues:"}),s.jsx("ul",{className:"text-sm text-destructive space-y-0.5",children:l[i].map((F,O)=>s.jsxs("li",{children:["• ",F]},O))})]})]})}),s.jsx(V,{children:s.jsx(W,{className:"p-6",children:A()})}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(z,{variant:"outline",onClick:S,disabled:k||c,className:"gap-2",children:[s.jsx(ph,{className:"h-4 w-4"}),"Previous"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{variant:"ghost",onClick:j,disabled:c,children:"Cancel"}),T?s.jsx(z,{onClick:C,disabled:c,className:"gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"h-4 w-4"}),"Create Tenant"]})}):s.jsxs(z,{onClick:C,disabled:c,className:"gap-2",children:["Next",s.jsx(_n,{className:"h-4 w-4"})]})]})]})})})]})]})]})},Cr=[{key:"basic",title:"Basic Information",description:"Tenant name, slug, and general settings",icon:Yn},{key:"domains",title:"Domain Assignment",description:"Select learning domains for this tenant",icon:Js},{key:"limits",title:"User Limits",description:"Set global teacher and student limits",icon:et},{key:"admins",title:"Admin Invitations",description:"Invite tenant administrators",icon:Jn},{key:"settings",title:"Settings",description:"Features and customization options",icon:kt}],mce=()=>{var B;const e=pt(),{tenantId:t}=Gr(),[n,r]=ld(),a=Nn(),{toast:i}=at(),{currentStep:o,completedSteps:l,errors:c,isLoading:d,data:u,setCurrentStep:h,markStepComplete:m,markStepIncomplete:p,validateStep:v,setLoading:x,initializeEditMode:y,resetWizard:g}=Mt(),[b,w]=ge.useState(!0),[C,_]=ge.useState(null);f.useEffect(()=>{(async()=>{if(!t){_("Tenant ID not provided"),w(!1);return}try{w(!0),console.log("🔍 [EDIT-TENANT-PAGE] Loading tenant data for ID:",t);const E=await Qn.getTenantById(t);if(!E){_("Tenant not found");return}console.log("✅ [EDIT-TENANT-PAGE] Loaded complete tenant data:",E);const I={basic:{name:E.basic.name,slug:E.basic.slug,description:E.basic.description||"",status:E.basic.status,subscription_tier:E.basic.subscription_tier},domains:{selectedDomainIds:E.domains.filter($=>$.assigned).map($=>$.id),domainSettings:new Map(E.domains.filter($=>$.assigned).map($=>[$.id,$.settings||{max_teachers:10,max_students:100}]))},limits:E.limits,admins:{invitations:E.admins.map($=>({email:$.email,role:"tenant_admin",sendImmediately:!1}))},settings:E.settings};y(t,I);const q=n.get("step");q&&Cr.find($=>$.key===q)&&h(q)}catch(E){console.error("❌ [EDIT-TENANT-PAGE] Failed to load tenant:",E),_("Failed to load tenant data")}finally{w(!1)}})()},[t,y,n,h]),f.useEffect(()=>{o!==n.get("step")&&r({step:o},{replace:!0})},[o,n,r]);const S=Cr.findIndex(D=>D.key===o),N=Cr[S],j=(S+1)/Cr.length*100,k=async()=>{if(await v(o))if(m(o),U)await T();else{const E=Math.min(S+1,Cr.length-1);h(Cr[E].key)}else p(o)},T=async()=>{if(t){x(!0);try{const D=JN(a);console.log("🚀 [EDIT-TENANT-PAGE] Starting tenant update process for ID:",t),console.log("🚀 [EDIT-TENANT-PAGE] Updated data:",{basicInfo:{name:u.basic.name,slug:u.basic.slug,status:u.basic.status,tier:u.basic.subscription_tier}}),i({title:"Tenant Updated",description:`${u.basic.name} has been updated successfully`}),await a.invalidateQueries({queryKey:["tenants"]}),await a.invalidateQueries({queryKey:["tenants-grid"]}),await a.refetchQueries({queryKey:["tenants-grid"],type:"active"}),g(),e("/admin/tenants",{replace:!0})}catch(D){console.error("❌ [EDIT-TENANT-PAGE] Tenant update failed:",D);let E="Failed to update tenant. Please try again.";D instanceof Error&&(E=D.message),i({title:"Update Failed",description:E,variant:"destructive"})}finally{x(!1)}}},A=()=>{const D=Math.max(S-1,0);h(Cr[D].key)},R=D=>{(Cr.findIndex(I=>I.key===D)<S||l.has(o))&&h(D)},F=()=>{g(),e("/admin/tenants")},O=S===0,U=S===Cr.length-1,M=()=>{switch(o){case"basic":return s.jsx(GN,{});case"domains":return s.jsx(KN,{});case"limits":return s.jsx(QN,{});case"admins":return s.jsx(YN,{});case"settings":return s.jsx(XN,{});default:return null}};return b?s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",disabled:!0,children:[s.jsx(An,{className:"h-4 w-4"}),"Back to Tenants"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Pe,{className:"h-8 w-64 mb-2"}),s.jsx(Pe,{className:"h-4 w-96"})]})]}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsx(Pe,{className:"h-2 w-full"})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Pe,{className:"h-6 w-16"}),s.jsx(Pe,{className:"h-4 w-full"})]}),s.jsx(W,{className:"space-y-2",children:[1,2,3,4,5].map(D=>s.jsx(Pe,{className:"h-16 w-full"},D))})]})}),s.jsx("div",{className:"lg:col-span-3",children:s.jsx(V,{children:s.jsx(W,{className:"p-6",children:s.jsx(Pe,{className:"h-64 w-full"})})})})]})]}):C?s.jsx("div",{className:"container mx-auto py-6",children:s.jsx(V,{children:s.jsxs(W,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(ft,{className:"h-12 w-12 text-destructive mb-4"}),s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Failed to Load Tenant"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:C}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>e("/admin/tenants"),children:"Back to Tenants"}),s.jsx(z,{onClick:()=>window.location.reload(),children:"Try Again"})]})]})})}):s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:F,className:"gap-2",children:[s.jsx(An,{className:"h-4 w-4"}),"Back to Tenants"]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h1",{className:"text-3xl font-bold",children:["Edit Tenant: ",u.basic.name]}),s.jsx("p",{className:"text-muted-foreground",children:N.description})]})]}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Step ",S+1," of ",Cr.length,": ",N.title]}),s.jsxs("span",{children:[Math.round(j),"% complete"]})]}),s.jsx(Br,{value:j,className:"h-2"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{className:"text-lg",children:"Steps"}),s.jsx(we,{children:"Update tenant information"})]}),s.jsx(W,{className:"space-y-2",children:Cr.map((D,E)=>{var Z,ee,J;const I=D.key===o,q=l.has(D.key),$=((Z=c[D.key])==null?void 0:Z.length)>0,P=E<=S||q;return s.jsxs("button",{onClick:()=>P&&R(D.key),disabled:!P,className:ne("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-colors","hover:bg-accent disabled:cursor-not-allowed",I&&"bg-accent border border-border",!P&&"opacity-50"),children:[s.jsx("div",{className:ne("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",q&&"bg-green-100 text-green-700",I&&!q&&"bg-primary text-primary-foreground",!I&&!q&&"bg-muted text-muted-foreground",$&&"bg-destructive/10 text-destructive"),children:q?s.jsx(pn,{className:"h-4 w-4"}):s.jsx(D.icon,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:ne("font-medium text-sm",I&&"text-foreground",!I&&"text-muted-foreground"),children:D.title}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5 leading-tight",children:D.description}),$&&s.jsxs(X,{variant:"destructive",className:"text-xs mt-1",children:[(ee=c[D.key])==null?void 0:ee.length," error",((J=c[D.key])==null?void 0:J.length)!==1?"s":""]})]})]},D.key)})})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsx(V,{children:s.jsxs(G,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(N.icon,{className:"h-6 w-6 text-primary"}),s.jsxs("div",{children:[s.jsx(Y,{className:"text-xl",children:N.title}),s.jsx(we,{children:N.description})]})]}),((B=c[o])==null?void 0:B.length)>0&&s.jsxs("div",{className:"mt-4 p-3 border border-destructive/20 bg-destructive/5 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-destructive mb-1",children:"Please fix the following issues:"}),s.jsx("ul",{className:"text-sm text-destructive space-y-0.5",children:c[o].map((D,E)=>s.jsxs("li",{children:["• ",D]},E))})]})]})}),s.jsx(V,{children:s.jsx(W,{className:"p-6",children:M()})}),s.jsx(V,{children:s.jsx(W,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(z,{variant:"outline",onClick:A,disabled:O||d,className:"gap-2",children:[s.jsx(ph,{className:"h-4 w-4"}),"Previous"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{variant:"ghost",onClick:F,disabled:d,children:"Cancel"}),U?s.jsx(z,{onClick:k,disabled:d,className:"gap-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"h-4 w-4"}),"Save Changes"]})}):s.jsxs(z,{onClick:k,disabled:d,className:"gap-2",children:["Next",s.jsx(_n,{className:"h-4 w-4"})]})]})]})})})]})]})]})},N2=[{value:"active",label:"Active",color:"bg-green-100 text-green-800"},{value:"trial",label:"Trial",color:"bg-blue-100 text-blue-800"},{value:"suspended",label:"Suspended",color:"bg-yellow-100 text-yellow-800"},{value:"inactive",label:"Inactive",color:"bg-gray-100 text-gray-800"}],S2=[{value:"free",label:"Free",description:"Basic features with limitations",color:"bg-gray-100 text-gray-800"},{value:"basic",label:"Basic",description:"Standard features for small teams",color:"bg-blue-100 text-blue-800"},{value:"premium",label:"Premium",description:"Advanced features for growing organizations",color:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white"},{value:"enterprise",label:"Enterprise",description:"Full features with priority support",color:"bg-gradient-to-r from-[#8b5cf6] to-[#ec4899] text-white"}],fce=()=>{const e=pt(),{tenantId:t}=Gr(),{toast:n}=at(),[r,a]=f.useState(!0),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(null),[h,m]=f.useState(null),[p,v]=f.useState("basic");f.useEffect(()=>{(async()=>{if(!t){c("Tenant ID not provided"),a(!1);return}try{a(!0),console.log("🔍 [TENANT-EDIT] Loading tenant data for:",t);const k=await Qn.getTenantById(t);if(!k){c("Tenant not found");return}const T={basic:{name:k.basic.name,slug:k.basic.slug,description:k.basic.description||"",status:k.basic.status,subscription_tier:k.basic.subscription_tier},domains:k.domains,admins:k.admins,limits:k.limits,settings:k.settings};u(T),m(JSON.parse(JSON.stringify(T))),console.log("✅ [TENANT-EDIT] Loaded tenant data:",T)}catch(k){console.error("❌ [TENANT-EDIT] Failed to load tenant:",k),c("Failed to load tenant data")}finally{a(!1)}})()},[t]);const x=()=>!d||!h?!1:JSON.stringify(d)!==JSON.stringify(h),y=async()=>{if(!(!d||!t)){o(!0);try{console.log("💾 [TENANT-EDIT] Saving tenant changes:",d),await new Promise(j=>setTimeout(j,1e3)),n({title:"Tenant Updated",description:`${d.basic.name} has been updated successfully`}),m(JSON.parse(JSON.stringify(d))),console.log("✅ [TENANT-EDIT] Tenant saved successfully"),setTimeout(()=>{e("/admin/dashboard")},500)}catch(j){console.error("❌ [TENANT-EDIT] Failed to save tenant:",j),n({title:"Save Failed",description:"Failed to save tenant changes. Please try again.",variant:"destructive"})}finally{o(!1)}}},g=()=>{x()?confirm("You have unsaved changes. Are you sure you want to leave without saving?")&&e("/admin/dashboard"):e("/admin/dashboard")},b=(j,k)=>{d&&u({...d,basic:{...d.basic,[j]:k}})},w=(j,k)=>{d&&u({...d,limits:{...d.limits,[j]:k}})},C=j=>{d&&u({...d,domains:d.domains.map(k=>k.id===j?{...k,assigned:!k.assigned}:k)})};if(r)return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",disabled:!0,children:[s.jsx(An,{className:"h-4 w-4"}),"Back to Tenants"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Pe,{className:"h-8 w-64 mb-2"}),s.jsx(Pe,{className:"h-4 w-96"})]})]}),s.jsx(V,{children:s.jsx(W,{className:"p-6",children:s.jsx(Pe,{className:"h-64 w-full"})})})]});if(l)return s.jsx("div",{className:"container mx-auto py-6",children:s.jsx(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:s.jsxs(W,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(ft,{className:"h-12 w-12 text-red-500 mb-4"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Tenant"}),s.jsx("p",{className:"text-gray-600 mb-4",children:l}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(z,{variant:"outline",onClick:()=>e("/admin/dashboard"),children:"Back to Tenants"}),s.jsx(z,{onClick:()=>window.location.reload(),children:"Try Again"})]})]})})});if(!d)return null;const _=N2.find(j=>j.value===d.basic.status),S=S2.find(j=>j.value===d.basic.subscription_tier),N=d.domains.filter(j=>j.assigned).length;return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:g,className:"gap-2 text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:[s.jsx(An,{className:"h-4 w-4"}),"Back to Tenants"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Tenant"}),s.jsx("p",{className:"text-gray-600",children:d.basic.name})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[x()&&s.jsxs(X,{className:"bg-amber-100 text-amber-800 text-xs px-2 py-1 rounded-full font-medium",children:[s.jsx(ft,{className:"w-3 h-3 mr-1"}),"Unsaved Changes"]}),s.jsx(z,{variant:"outline",onClick:g,className:"border border-gray-300 text-gray-700 hover:bg-gray-50 px-4 py-2 rounded-md font-medium transition-all duration-200",children:"Cancel"}),s.jsx(z,{onClick:y,disabled:!x()||i,className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white hover:from-[#0891b2] hover:to-[#7c3aed] px-4 py-2 rounded-md font-medium transition-all duration-200 disabled:opacity-50",children:i?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Saving..."]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"w-4 h-4"}),"Save Changes"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Status"}),s.jsx(sn,{className:"h-4 w-4 text-blue-600"})]}),s.jsx(W,{children:_&&s.jsx(X,{className:`${_.color} px-2 py-1 rounded-full text-xs font-medium`,children:_.label})})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Subscription"}),s.jsx(Us,{className:"h-4 w-4 text-purple-600"})]}),s.jsx(W,{children:S&&s.jsx(X,{className:`${S.color} px-2 py-1 rounded-full text-xs font-medium`,children:S.label})})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Domains"}),s.jsx(Js,{className:"h-4 w-4 text-pink-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:N}),s.jsxs("p",{className:"text-xs text-gray-500",children:["of ",d.domains.length," available"]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Admins"}),s.jsx(et,{className:"h-4 w-4 text-amber-600"})]}),s.jsxs(W,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.admins.length}),s.jsx("p",{className:"text-xs text-gray-500",children:"active administrators"})]})]})]}),s.jsx(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:s.jsxs(Qr,{value:p,onValueChange:v,className:"w-full",children:[s.jsx(G,{className:"p-6 pb-0",children:s.jsxs(wr,{className:"grid w-full grid-cols-4 bg-gray-100 rounded-lg p-1",children:[s.jsxs(Je,{value:"basic",className:"flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200",children:[s.jsx(Yn,{className:"w-4 h-4"}),"Basic Info"]}),s.jsxs(Je,{value:"domains",className:"flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200",children:[s.jsx(Js,{className:"w-4 h-4"}),"Domains"]}),s.jsxs(Je,{value:"users",className:"flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200",children:[s.jsx(et,{className:"w-4 h-4"}),"Users & Limits"]}),s.jsxs(Je,{value:"settings",className:"flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200",children:[s.jsx(kt,{className:"w-4 h-4"}),"Settings"]})]})}),s.jsxs(W,{className:"p-6 pt-6",children:[s.jsxs(Ze,{value:"basic",className:"space-y-6 mt-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Basic Information"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Update tenant name, slug, and general settings"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"tenant-name",className:"text-sm font-medium text-gray-700",children:"Tenant Name *"}),s.jsx(pe,{id:"tenant-name",value:d.basic.name,onChange:j=>b("name",j.target.value),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500",children:"The display name for this tenant"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"tenant-slug",className:"text-sm font-medium text-gray-700",children:"Tenant Slug *"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"gemeos.ai/"}),s.jsx(pe,{id:"tenant-slug",value:d.basic.slug,onChange:j=>b("slug",j.target.value.toLowerCase()),className:"flex-1"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Unique identifier used in URLs"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"tenant-description",className:"text-sm font-medium text-gray-700",children:"Description"}),s.jsx(Fn,{id:"tenant-description",value:d.basic.description,onChange:j=>b("description",j.target.value),className:"min-h-[80px] resize-none",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Optional description for internal reference"}),s.jsxs("span",{children:[d.basic.description.length,"/500"]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Status *"}),s.jsxs(Ve,{value:d.basic.status,onValueChange:j=>b("status",j),children:[s.jsx(ze,{children:s.jsx(qe,{children:_&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(X,{className:`${_.color} px-2 py-1 rounded-full text-xs font-medium`,children:_.label})})})}),s.jsx(Ue,{children:N2.map(j=>s.jsx(le,{value:j.value,children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(X,{className:`${j.color} px-2 py-1 rounded-full text-xs font-medium`,children:j.label})})},j.value))})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Current operational status"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Subscription Tier *"}),s.jsxs(Ve,{value:d.basic.subscription_tier,onValueChange:j=>b("subscription_tier",j),children:[s.jsx(ze,{children:s.jsx(qe,{children:S&&s.jsx("span",{className:"font-medium capitalize",children:S.label})})}),s.jsx(Ue,{children:S2.map(j=>s.jsx(le,{value:j.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium capitalize",children:j.label}),s.jsx("div",{className:"text-xs text-gray-500",children:j.description})]})},j.value))})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Determines available features and limitations"})]}),s.jsxs(V,{className:"border border-gray-200 bg-gray-50",children:[s.jsx(G,{className:"pb-3",children:s.jsx(Y,{className:"text-sm font-medium text-gray-700",children:"Preview"})}),s.jsx(W,{className:"pt-0",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-medium text-white",children:d.basic.name.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:d.basic.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["gemeos.ai/",d.basic.slug]}),d.basic.description&&s.jsx("div",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:d.basic.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[_&&s.jsx(X,{className:`${_.color} text-xs px-2 py-1 rounded-full font-medium`,children:_.label}),s.jsx(X,{className:`${(S==null?void 0:S.color)||"bg-gray-100 text-gray-800"} text-xs px-2 py-1 rounded-full font-medium`,children:S==null?void 0:S.label})]})]})]})})]})]})]})]}),s.jsxs(Ze,{value:"domains",className:"space-y-6 mt-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Domain Assignments"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Select which learning domains are available to this tenant"})]}),s.jsx("div",{className:"space-y-4",children:d.domains.map(j=>s.jsx(V,{className:`border transition-all duration-200 ${j.assigned?"border-blue-200 bg-blue-50":"border-gray-200 bg-white"}`,children:s.jsx(W,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Nt,{checked:j.assigned,onCheckedChange:()=>C(j.id),className:"data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-[#06b6d4] data-[state=checked]:to-[#8b5cf6]"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),s.jsx("p",{className:"text-sm text-gray-600",children:j.slug})]})]}),j.assigned&&s.jsxs(X,{className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white px-2 py-1 rounded-full text-xs font-medium",children:[s.jsx(pn,{className:"w-3 h-3 mr-1"}),"Assigned"]})]})})},j.id))}),N===0&&s.jsx(V,{className:"border border-yellow-200 bg-yellow-50",children:s.jsxs(W,{className:"p-4 flex items-center gap-3",children:[s.jsx(ft,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-900",children:"No Domains Assigned"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"This tenant won't have access to any learning domains. Select at least one domain above."})]})]})})]}),s.jsxs(Ze,{value:"users",className:"space-y-6 mt-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Users & Limits"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Manage user limits and existing administrators"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{children:[s.jsx(Y,{className:"text-lg font-semibold text-gray-900",children:"User Limits"}),s.jsx(we,{children:"Set maximum number of users for this tenant"})]}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Max Teachers"}),s.jsx(pe,{type:"number",value:d.limits.global_max_teachers,onChange:j=>w("global_max_teachers",parseInt(j.target.value)||0),min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Max Students"}),s.jsx(pe,{type:"number",value:d.limits.global_max_students,onChange:j=>w("global_max_students",parseInt(j.target.value)||0),min:"0"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Q,{className:"text-sm font-medium text-gray-700",children:"Enforce Limits"}),s.jsx(Nt,{checked:d.limits.enforce_limits,onCheckedChange:j=>w("enforce_limits",j)})]})]})]}),s.jsxs(V,{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs(G,{children:[s.jsx(Y,{className:"text-lg font-semibold text-gray-900",children:"Current Administrators"}),s.jsx(we,{children:"Existing tenant administrators (read-only)"})]}),s.jsxs(W,{className:"space-y-3",children:[d.admins.length===0?s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(et,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No administrators found"})]}):d.admins.map(j=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-white",children:j.email.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 text-sm",children:j.email}),s.jsx("div",{className:"text-xs text-gray-500",children:j.role})]}),s.jsx(X,{className:j.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:j.status})]},j.id)),s.jsx(V,{className:"border border-blue-200 bg-blue-50",children:s.jsx(W,{className:"p-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ua,{className:"h-4 w-4 text-blue-600 mt-0.5"}),s.jsx("div",{children:s.jsx("p",{className:"text-xs text-blue-700",children:"Administrator management (add/remove admins) will be available in a future update. Existing admins will receive password reset emails when changes are saved."})})]})})})]})]})]})]}),s.jsxs(Ze,{value:"settings",className:"space-y-6 mt-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Tenant Settings"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Configure features and customization options"})]}),s.jsx(V,{className:"border border-blue-200 bg-blue-50",children:s.jsxs(W,{className:"p-4 flex items-center gap-3",children:[s.jsx(kt,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900",children:"Settings Configuration"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Advanced settings configuration will be available in a future update."})]})]})})]})]})]})})]})},_v={basic:{email:"",firstName:"",lastName:"",phoneNumber:"",sendInvitation:!0,temporaryPassword:""},domains:{additionalDomains:[],teachingModalities:["in-person","online"]},schedule:{availability:{monday:{available:!0,start:"09:00",end:"17:00"},tuesday:{available:!0,start:"09:00",end:"17:00"},wednesday:{available:!0,start:"09:00",end:"17:00"},thursday:{available:!0,start:"09:00",end:"17:00"},friday:{available:!0,start:"09:00",end:"17:00"},saturday:{available:!1},sunday:{available:!1}},timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,minClassDuration:60,maxClassesPerDay:6,bufferBetweenClasses:15},permissions:{permissions:{canCreateClasses:!0,canManageStudents:!0,canViewReports:!1,canManageDomainContent:!1},accessRestrictions:{restrictToOwnStudents:!0,restrictToOwnClasses:!0},isLeadTeacher:!1,canApproveEnrollments:!1},review:{notificationPreferences:{emailNotifications:!0,smsNotifications:!1,inAppNotifications:!0},createInitialClass:!1,sendWelcomeEmail:!0}},bd=WN()(HN((e,t)=>({mode:"create",currentStep:"basic",completedSteps:new Set,data:_v,errors:{},isLoading:!1,isDirty:!1,setMode:n=>e({mode:n}),setTeacherId:n=>e({teacherId:n}),setCurrentStep:n=>e({currentStep:n}),markStepComplete:n=>e(r=>({completedSteps:new Set([...r.completedSteps,n])})),markStepIncomplete:n=>e(r=>{const a=new Set(r.completedSteps);return a.delete(n),{completedSteps:a}}),updateData:(n,r)=>e(a=>({data:{...a.data,[n]:{...a.data[n],...r}},isDirty:!0})),setData:n=>e(r=>({data:{...r.data,...n},isDirty:!0})),setErrors:(n,r)=>e(a=>({errors:{...a.errors,[n]:r}})),clearErrors:n=>e(r=>{if(n){const a={...r.errors};return delete a[n],{errors:a}}return{errors:{}}}),setLoading:n=>e({isLoading:n}),validateStep:n=>{const r=t(),a=r.data[n],i=[];switch(n){case"basic":const o=a;o.email||i.push("Email is required"),o.firstName||i.push("First name is required"),o.lastName||i.push("Last name is required"),!o.sendInvitation&&!o.temporaryPassword&&i.push("Password is required when not sending invitation");break;case"domains":const l=a;l.primaryDomain||i.push("Primary domain is required"),l.teachingModalities.length===0&&i.push("At least one teaching modality is required");break;case"schedule":Object.values(a.availability).some(u=>u.available)||i.push("At least one day must be available");break}return i.length>0?(r.setErrors(n,i),!1):(r.clearErrors(n),!0)},canNavigateToStep:n=>{const r=t(),a=["basic","domains","schedule","permissions","review"],i=a.indexOf(n),o=a.indexOf(r.currentStep);if(i<o)return!0;for(let l=0;l<i;l++)if(!r.completedSteps.has(a[l]))return!1;return!0},resetWizard:()=>e({mode:"create",teacherId:void 0,currentStep:"basic",completedSteps:new Set,data:_v,errors:{},isLoading:!1,isDirty:!1}),initializeCreateMode:()=>{t().resetWizard(),e({mode:"create"})},initializeEditMode:(n,r)=>{e({mode:"edit",teacherId:n,currentStep:"basic",completedSteps:new Set(["basic","domains","schedule","permissions"]),data:{..._v,...r},errors:{},isLoading:!1,isDirty:!1})}}),{name:"teacher-wizard-store"})),pce=()=>{const{data:e,updateData:t,errors:n}=bd(),r=e.basic,a=(i,o)=>{t("basic",{[i]:o})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(At,{className:"h-4 w-4 text-gray-500"}),"Email Address",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pe,{id:"email",type:"email",placeholder:"teacher@example.com",value:r.email,onChange:i=>a("email",i.target.value),className:"max-w-md"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This will be used for login and communications"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"firstName",className:"flex items-center gap-2",children:[s.jsx($c,{className:"h-4 w-4 text-gray-500"}),"First Name",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pe,{id:"firstName",placeholder:"John",value:r.firstName,onChange:i=>a("firstName",i.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"lastName",className:"flex items-center gap-2",children:["Last Name",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pe,{id:"lastName",placeholder:"Doe",value:r.lastName,onChange:i=>a("lastName",i.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"phone",className:"flex items-center gap-2",children:[s.jsx(ky,{className:"h-4 w-4 text-gray-500"}),"Phone Number",s.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"(Optional)"})]}),s.jsx(pe,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",value:r.phoneNumber||"",onChange:i=>a("phoneNumber",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Q,{htmlFor:"sendInvitation",className:"text-base",children:"Send Invitation Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send an email invitation for the teacher to set up their account"})]}),s.jsx(Nt,{id:"sendInvitation",checked:r.sendInvitation,onCheckedChange:i=>a("sendInvitation",i)})]}),!r.sendInvitation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"password",className:"flex items-center gap-2",children:[s.jsx(ha,{className:"h-4 w-4 text-gray-500"}),"Temporary Password",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pe,{id:"password",type:"password",placeholder:"Enter a temporary password",value:r.temporaryPassword||"",onChange:i=>a("temporaryPassword",i.target.value),className:"max-w-md"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The teacher will be required to change this on first login"})]})]}),s.jsxs(Ot,{children:[s.jsx(ua,{className:"h-4 w-4"}),s.jsx(Ut,{children:r.sendInvitation?"An invitation email will be sent to the teacher's email address with instructions to set up their account.":"The teacher will need to use the temporary password to log in for the first time and will be prompted to create a new password."})]}),n.basic&&n.basic.length>0&&s.jsx(Ot,{variant:"destructive",children:s.jsx(Ut,{children:s.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.basic.map((i,o)=>s.jsx("li",{children:i},o))})})})]})},Om=[{id:"1",name:"Piano",category:"Instruments"},{id:"2",name:"Guitar",category:"Instruments"},{id:"3",name:"Violin",category:"Instruments"},{id:"4",name:"Music Theory",category:"Theory"},{id:"5",name:"Composition",category:"Theory"},{id:"6",name:"Orchestra",category:"Ensemble"},{id:"7",name:"Jazz Performance",category:"Performance"},{id:"8",name:"Music Production",category:"Technology"},{id:"9",name:"Audio Engineering",category:"Technology"}],_2=[{value:"basic",label:"Basic",color:"bg-gray-100 text-gray-700"},{value:"intermediate",label:"Intermediate",color:"bg-blue-100 text-blue-700"},{value:"advanced",label:"Advanced",color:"bg-purple-100 text-purple-700"},{value:"expert",label:"Expert",color:"bg-green-100 text-green-700"}],xce=()=>{const{data:e,updateData:t,errors:n}=bd(),r=e.domains,[a,i]=f.useState(""),o=h=>{const m=Om.find(p=>p.id===h);m&&t("domains",{primaryDomain:{id:m.id,name:m.name,certificationLevel:"intermediate"}})},l=()=>{var p;if(!a)return;const h=Om.find(v=>v.id===a);if(!h)return;((p=r.primaryDomain)==null?void 0:p.id)===h.id||r.additionalDomains.some(v=>v.id===h.id)||(t("domains",{additionalDomains:[...r.additionalDomains,{id:h.id,name:h.name,certificationLevel:"basic"}]}),i(""))},c=h=>{t("domains",{additionalDomains:r.additionalDomains.filter(m=>m.id!==h)})},d=(h,m,p)=>{p&&r.primaryDomain?t("domains",{primaryDomain:{...r.primaryDomain,certificationLevel:m}}):t("domains",{additionalDomains:r.additionalDomains.map(v=>v.id===h?{...v,certificationLevel:m}:v)})},u=h=>{const m=r.teachingModalities||[],p=m.includes(h)?m.filter(v=>v!==h):[...m,h];t("domains",{teachingModalities:p})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2 text-base font-semibold",children:[s.jsx(rt,{className:"h-4 w-4 text-gray-500"}),"Primary Teaching Domain",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select the main subject this teacher will be teaching"}),r.primaryDomain?s.jsx(V,{className:"max-w-md",children:s.jsx(W,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:r.primaryDomain.name}),s.jsxs(Ve,{value:r.primaryDomain.certificationLevel,onValueChange:h=>d(r.primaryDomain.id,h,!0),children:[s.jsx(ze,{className:"h-7 text-xs mt-1",children:s.jsx(qe,{})}),s.jsx(Ue,{children:_2.map(h=>s.jsx(le,{value:h.value,children:h.label},h.value))})]})]})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>t("domains",{primaryDomain:void 0}),children:"Change"})]})})}):s.jsxs(Ve,{onValueChange:o,children:[s.jsx(ze,{className:"max-w-md",children:s.jsx(qe,{placeholder:"Choose primary domain"})}),s.jsx(Ue,{children:Om.map(h=>s.jsx(le,{value:h.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:h.name}),s.jsx(X,{variant:"outline",className:"text-xs",children:h.category})]})},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2 text-base font-semibold",children:[s.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),"Additional Domains",s.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"(Optional)"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add other subjects this teacher can teach"}),s.jsxs("div",{className:"flex gap-2 max-w-md",children:[s.jsxs(Ve,{value:a,onValueChange:i,children:[s.jsx(ze,{className:"flex-1",children:s.jsx(qe,{placeholder:"Select a domain"})}),s.jsx(Ue,{children:Om.filter(h=>{var m;return((m=r.primaryDomain)==null?void 0:m.id)!==h.id&&!r.additionalDomains.some(p=>p.id===h.id)}).map(h=>s.jsx(le,{value:h.id,children:h.name},h.id))})]}),s.jsx(z,{onClick:l,disabled:!a,children:"Add"})]}),r.additionalDomains.length>0&&s.jsx("div",{className:"space-y-2 mt-3",children:r.additionalDomains.map(h=>s.jsx(V,{className:"max-w-md",children:s.jsx(W,{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-medium text-sm",children:h.name}),s.jsxs(Ve,{value:h.certificationLevel,onValueChange:m=>d(h.id,m,!1),children:[s.jsx(ze,{className:"h-7 text-xs w-32",children:s.jsx(qe,{})}),s.jsx(Ue,{children:_2.map(m=>s.jsx(le,{value:m.value,children:m.label},m.value))})]})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>c(h.id),children:s.jsx(Lt,{className:"h-4 w-4"})})]})})},h.id))})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsx(Q,{className:"text-base font-semibold",children:"Teaching Preferences"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"maxStudents",className:"flex items-center gap-2 text-sm",children:[s.jsx(et,{className:"h-4 w-4 text-gray-500"}),"Max Students"]}),s.jsx(pe,{id:"maxStudents",type:"number",placeholder:"e.g., 30",value:r.maxStudents||"",onChange:h=>t("domains",{maxStudents:parseInt(h.target.value)||void 0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{htmlFor:"classSize",className:"flex items-center gap-2 text-sm",children:[s.jsx(yr,{className:"h-4 w-4 text-gray-500"}),"Preferred Class Size"]}),s.jsx(pe,{id:"classSize",type:"number",placeholder:"e.g., 8",value:r.preferredClassSize||"",onChange:h=>t("domains",{preferredClassSize:parseInt(h.target.value)||void 0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2 text-sm",children:[s.jsx(Hi,{className:"h-4 w-4 text-gray-500"}),"Teaching Modalities",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"flex gap-4",children:["in-person","online","hybrid"].map(h=>{var m;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hr,{id:h,checked:((m=r.teachingModalities)==null?void 0:m.includes(h))||!1,onCheckedChange:()=>u(h)}),s.jsx(Q,{htmlFor:h,className:"text-sm font-normal capitalize cursor-pointer",children:h})]},h)})})]})]}),n.domains&&n.domains.length>0&&s.jsx(Ot,{variant:"destructive",children:s.jsx(Ut,{children:s.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.domains.map((h,m)=>s.jsx("li",{children:h},m))})})})]})},gce=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],C2=Array.from({length:24},(e,t)=>`${t.toString().padStart(2,"0")}:00`),vce=()=>{const{data:e,updateData:t}=bd(),n=e.schedule,r=(a,i,o)=>{t("schedule",{availability:{...n.availability,[a]:{...n.availability[a],[i]:o}}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2 text-base font-semibold",children:[s.jsx(kn,{className:"h-4 w-4 text-gray-500"}),"Weekly Availability"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Set the teacher's regular working hours"})]}),s.jsx("div",{className:"space-y-3",children:gce.map(a=>s.jsx(V,{children:s.jsx(W,{className:"p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx(Nt,{checked:n.availability[a].available,onCheckedChange:i=>r(a,"available",i)}),s.jsx(Q,{className:"capitalize w-24",children:a}),n.availability[a].available&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ve,{value:n.availability[a].start||"09:00",onValueChange:i=>r(a,"start",i),children:[s.jsx(ze,{className:"w-24",children:s.jsx(qe,{})}),s.jsx(Ue,{children:C2.map(i=>s.jsx(le,{value:i,children:i},i))})]}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsxs(Ve,{value:n.availability[a].end||"17:00",onValueChange:i=>r(a,"end",i),children:[s.jsx(ze,{className:"w-24",children:s.jsx(qe,{})}),s.jsx(Ue,{children:C2.map(i=>s.jsx(le,{value:i,children:i},i))})]})]})]})})})},a))}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2 text-sm",children:[s.jsx(qs,{className:"h-4 w-4 text-gray-500"}),"Min Class Duration (minutes)"]}),s.jsx(pe,{type:"number",value:n.minClassDuration,onChange:a=>t("schedule",{minClassDuration:parseInt(a.target.value)||60})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"text-sm",children:"Max Classes Per Day"}),s.jsx(pe,{type:"number",value:n.maxClassesPerDay,onChange:a=>t("schedule",{maxClassesPerDay:parseInt(a.target.value)||6})})]})]})]})},yce=()=>{const{data:e,updateData:t}=bd(),n=e.permissions,r=(i,o)=>{t("permissions",{permissions:{...n.permissions,[i]:o}})},a=(i,o)=>{t("permissions",{accessRestrictions:{...n.accessRestrictions,[i]:o}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{className:"flex items-center gap-2 text-base font-semibold",children:[s.jsx(sn,{className:"h-4 w-4 text-gray-500"}),"System Permissions"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure what this teacher can do in the system"})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm",children:"Core Permissions"})}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"canCreateClasses",children:"Create Classes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow teacher to create and manage classes"})]})]}),s.jsx(Nt,{id:"canCreateClasses",checked:n.permissions.canCreateClasses,onCheckedChange:i=>r("canCreateClasses",i)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(et,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"canManageStudents",children:"Manage Students"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, and manage student enrollments"})]})]}),s.jsx(Nt,{id:"canManageStudents",checked:n.permissions.canManageStudents,onCheckedChange:i=>r("canManageStudents",i)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Es,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"canViewReports",children:"View Reports"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Access performance and analytics reports"})]})]}),s.jsx(Nt,{id:"canViewReports",checked:n.permissions.canViewReports,onCheckedChange:i=>r("canViewReports",i)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"canManageDomainContent",children:"Manage Domain Content"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Edit curriculum and learning materials"})]})]}),s.jsx(Nt,{id:"canManageDomainContent",checked:n.permissions.canManageDomainContent,onCheckedChange:i=>r("canManageDomainContent",i)})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm",children:"Access Restrictions"})}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(et,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"restrictToOwnStudents",children:"Restrict to Own Students"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Can only view and manage their own students"})]})]}),s.jsx(Nt,{id:"restrictToOwnStudents",checked:n.accessRestrictions.restrictToOwnStudents,onCheckedChange:i=>a("restrictToOwnStudents",i)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"restrictToOwnClasses",children:"Restrict to Own Classes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Can only view and manage their own classes"})]})]}),s.jsx(Nt,{id:"restrictToOwnClasses",checked:n.accessRestrictions.restrictToOwnClasses,onCheckedChange:i=>a("restrictToOwnClasses",i)})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm",children:"Special Roles"})}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(_$,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"isLeadTeacher",children:"Lead Teacher"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Can mentor and oversee other teachers"})]})]}),s.jsx(Nt,{id:"isLeadTeacher",checked:n.isLeadTeacher,onCheckedChange:i=>t("permissions",{isLeadTeacher:i})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ln,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"canApproveEnrollments",children:"Approve Enrollments"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Can approve or reject student enrollment requests"})]})]}),s.jsx(Nt,{id:"canApproveEnrollments",checked:n.canApproveEnrollments,onCheckedChange:i=>t("permissions",{canApproveEnrollments:i})})]})]})]})]})},bce=()=>{const{data:e,updateData:t}=bd(),n=e.review,r=(a,i)=>{t("review",{notificationPreferences:{...n.notificationPreferences,[a]:i}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Ot,{children:[s.jsx(ua,{className:"h-4 w-4"}),s.jsx(Ut,{children:"Please review the teacher information below. You can go back to any step to make changes."})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2 text-sm",children:[s.jsx($c,{className:"h-4 w-4"}),"Basic Information"]})}),s.jsxs(W,{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Name:"}),s.jsxs("span",{className:"font-medium",children:[e.basic.firstName," ",e.basic.lastName]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Email:"}),s.jsx("span",{className:"font-medium",children:e.basic.email})]}),e.basic.phoneNumber&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),s.jsx("span",{className:"font-medium",children:e.basic.phoneNumber})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Account Setup:"}),s.jsx(X,{variant:e.basic.sendInvitation?"default":"secondary",children:e.basic.sendInvitation?"Email Invitation":"Temporary Password"})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2 text-sm",children:[s.jsx(rt,{className:"h-4 w-4"}),"Teaching Domains"]})}),s.jsxs(W,{className:"space-y-3 text-sm",children:[e.domains.primaryDomain&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground mb-1",children:"Primary Domain:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(X,{className:"bg-primary/10 text-primary",children:e.domains.primaryDomain.name}),s.jsx(X,{variant:"outline",className:"text-xs",children:e.domains.primaryDomain.certificationLevel})]})]}),e.domains.additionalDomains.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground mb-1",children:"Additional Domains:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.domains.additionalDomains.map(a=>s.jsx(X,{variant:"secondary",children:a.name},a.id))})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[s.jsx("span",{className:"text-muted-foreground",children:"Teaching Modalities:"}),s.jsx("div",{className:"flex gap-1",children:e.domains.teachingModalities.map(a=>s.jsx(X,{variant:"outline",className:"text-xs capitalize",children:a},a))})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2 text-sm",children:[s.jsx(kn,{className:"h-4 w-4"}),"Schedule"]})}),s.jsx(W,{className:"text-sm",children:s.jsx("div",{className:"space-y-1",children:Object.entries(e.schedule.availability).filter(([a,i])=>i.available).map(([a,i])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-muted-foreground capitalize",children:[a,":"]}),s.jsxs("span",{className:"font-medium",children:[i.start," - ",i.end]})]},a))})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2 text-sm",children:[s.jsx(sn,{className:"h-4 w-4"}),"Permissions"]})}),s.jsx(W,{className:"text-sm",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(e.permissions.permissions).filter(([a,i])=>i).map(([a])=>s.jsxs(X,{variant:"secondary",className:"text-xs",children:[s.jsx(ln,{className:"h-3 w-3 mr-1"}),a.replace(/([A-Z])/g," $1").replace("can ","")]},a)),e.permissions.isLeadTeacher&&s.jsx(X,{className:"bg-amber-100 text-amber-800 text-xs",children:"Lead Teacher"})]})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ou,{className:"h-4 w-4"}),"Notification Preferences"]})}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Q,{htmlFor:"emailNotifications",className:"text-sm",children:"Email Notifications"}),s.jsx(Nt,{id:"emailNotifications",checked:n.notificationPreferences.emailNotifications,onCheckedChange:a=>r("emailNotifications",a)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Q,{htmlFor:"smsNotifications",className:"text-sm",children:"SMS Notifications"}),s.jsx(Nt,{id:"smsNotifications",checked:n.notificationPreferences.smsNotifications,onCheckedChange:a=>r("smsNotifications",a)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Q,{htmlFor:"inAppNotifications",className:"text-sm",children:"In-App Notifications"}),s.jsx(Nt,{id:"inAppNotifications",checked:n.notificationPreferences.inAppNotifications,onCheckedChange:a=>r("inAppNotifications",a)})]})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-sm",children:"After Creation"})}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"sendWelcomeEmail",className:"text-sm",children:"Send Welcome Email"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a welcome message to the teacher"})]}),s.jsx(Nt,{id:"sendWelcomeEmail",checked:n.sendWelcomeEmail,onCheckedChange:a=>t("review",{sendWelcomeEmail:a})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"createInitialClass",className:"text-sm",children:"Create Initial Class"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Set up a first class for this teacher"})]}),s.jsx(Nt,{id:"createInitialClass",checked:n.createInitialClass,onCheckedChange:a=>t("review",{createInitialClass:a})})]})]})]})]})},ps=[{key:"basic",title:"Basic Information",description:"Teacher name, email, and contact details",icon:Jn},{key:"domains",title:"Domain Assignment",description:"Teaching subjects and expertise",icon:Js},{key:"schedule",title:"Schedule & Availability",description:"Working hours and preferences",icon:kn},{key:"permissions",title:"Permissions & Access",description:"System access and capabilities",icon:sn},{key:"review",title:"Review & Confirm",description:"Summary and final settings",icon:Es}],wce=()=>{const e=pt(),[t,n]=ld(),r=Nn(),{toast:a}=at();dn();const{currentStep:i,completedSteps:o,errors:l,isLoading:c,data:d,setCurrentStep:u,markStepComplete:h,markStepIncomplete:m,validateStep:p,setLoading:v,initializeCreateMode:x,resetWizard:y}=bd();f.useEffect(()=>{x();const j=t.get("step");j&&ps.find(k=>k.key===j)&&u(j)},[]),f.useEffect(()=>{n({step:i})},[i,n]);const g=ps.findIndex(j=>j.key===i),b=(g+1)/ps.length*100,w=j=>{const k=ps.findIndex(A=>A.key===j);(k<=g||ps.slice(0,k).every(A=>o.has(A.key)))&&u(j)},C=()=>{if(p(i)){h(i);const j=g+1;j<ps.length&&u(ps[j].key)}},_=()=>{const j=g-1;j>=0&&u(ps[j].key)},S=async()=>{v(!0);try{console.log("Creating teacher with data:",d),a({title:"Teacher Created",description:`${d.basic.firstName} ${d.basic.lastName} has been successfully added.`}),r.invalidateQueries({queryKey:["tenant-teachers"]}),e("/tenant/dashboard")}catch{a({title:"Error",description:"Failed to create teacher. Please try again.",variant:"destructive"})}finally{v(!1)}},N=()=>{switch(i){case"basic":return s.jsx(pce,{});case"domains":return s.jsx(xce,{});case"schedule":return s.jsx(vce,{});case"permissions":return s.jsx(yce,{});case"review":return s.jsx(bce,{});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>e("/tenant/dashboard"),className:"gap-2",children:[s.jsx(An,{className:"h-4 w-4"}),"Back to Dashboard"]}),s.jsx(cn,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Create New Teacher"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new teacher to your academy"})]})]}),s.jsxs(X,{variant:"secondary",children:["Step ",g+1," of ",ps.length]})]})})}),s.jsx("div",{className:"bg-white border-b",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsx(Br,{value:b,className:"h-1"})})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[s.jsx("div",{className:"col-span-3",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsx(Y,{className:"text-base",children:"Setup Progress"})}),s.jsx(W,{className:"p-0",children:s.jsx("nav",{className:"space-y-1 p-4",children:ps.map((j,k)=>{const T=j.icon,A=j.key===i,R=o.has(j.key),F=k<=g||ps.slice(0,k).every(O=>o.has(O.key));return s.jsxs("button",{onClick:()=>w(j.key),disabled:!F,className:ne("w-full flex items-start gap-3 rounded-lg px-3 py-2 text-left transition-colors",A&&"bg-primary/10 text-primary",!A&&F&&"hover:bg-gray-100",!F&&"opacity-50 cursor-not-allowed"),children:[s.jsx("div",{className:ne("mt-0.5 rounded-full p-1",A&&"bg-primary text-white",R&&!A&&"bg-green-100 text-green-600",!A&&!R&&"bg-gray-100 text-gray-400"),children:R&&!A?s.jsx(pn,{className:"h-3 w-3"}):s.jsx(T,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:ne("font-medium text-sm",!A&&!F&&"text-gray-400"),children:j.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]})]},j.key)})})})]})}),s.jsx("div",{className:"col-span-9",children:s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[(()=>{const j=ps[g].icon;return s.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:s.jsx(j,{className:"h-5 w-5 text-primary"})})})(),s.jsxs("div",{children:[s.jsx(Y,{children:ps[g].title}),s.jsx(we,{children:ps[g].description})]})]})}),s.jsxs(W,{children:[s.jsx("div",{className:"min-h-[400px]",children:N()}),l[i]&&l[i].length>0&&s.jsx("div",{className:"mt-4 rounded-lg bg-red-50 p-4",children:s.jsx("ul",{className:"list-disc list-inside space-y-1",children:l[i].map((j,k)=>s.jsx("li",{className:"text-sm text-red-600",children:j},k))})}),s.jsxs("div",{className:"mt-6 flex items-center justify-between pt-6 border-t",children:[s.jsxs(z,{variant:"outline",onClick:_,disabled:g===0,children:[s.jsx(ph,{className:"mr-2 h-4 w-4"}),"Previous"]}),i==="review"?s.jsx(z,{onClick:S,disabled:c,className:"bg-gradient-to-r from-[#06b6d4] to-[#8b5cf6] text-white hover:from-[#0891b2] hover:to-[#7c3aed]",children:c?"Creating...":"Create Teacher"}):s.jsxs(z,{onClick:C,children:["Next",s.jsx(_n,{className:"ml-2 h-4 w-4"})]})]})]})]})})]})})]})},Cv={domain:{selectedDomainId:null,availableDomains:[]},configuration:{className:"",description:"",difficultyLevelId:null,frequency:"weekly",allowsStudentMessages:!1,maxStudents:30},sessions:[],students:{students:[],defaultCustomMessage:""}},wp=["domain","configuration","sessions","students","review"],JO=e=>wp.indexOf(e),jce=e=>{const t=JO(e);return t>=0&&t<wp.length-1?wp[t+1]:null},Nce=e=>{const t=JO(e);return t>0?wp[t-1]:null},St=WN()(HN(XO((e,t)=>({data:Cv,currentStep:"domain",completedSteps:new Set,isOpen:!1,isLoading:!1,isSubmitting:!1,errors:{},setCurrentStep:n=>{e({currentStep:n},!1,"setCurrentStep")},markStepComplete:n=>{e(r=>({completedSteps:new Set([...r.completedSteps,n])}),!1,"markStepComplete")},markStepIncomplete:n=>{e(r=>{const a=new Set(r.completedSteps);return a.delete(n),{completedSteps:a}},!1,"markStepIncomplete")},goToNextStep:()=>{const{currentStep:n}=t(),r=jce(n);r&&e({currentStep:r},!1,"goToNextStep")},goToPreviousStep:()=>{const{currentStep:n}=t(),r=Nce(n);r&&e({currentStep:r},!1,"goToPreviousStep")},updateDomainSelection:n=>{e(r=>({data:{...r.data,domain:{...r.data.domain,...n}}}),!1,"updateDomainSelection")},updateClassConfiguration:n=>{if(e(r=>({data:{...r.data,configuration:{...r.data.configuration,...n}}}),!1,"updateClassConfiguration"),n.className===void 0&&n.difficultyLevelId){const{data:r}=t(),a=r.domain.availableDomains.find(o=>o.id===r.domain.selectedDomainId),i=a==null?void 0:a.difficultyLevels.find(o=>o.id===n.difficultyLevelId);if(a&&i&&!r.configuration.className){const o=`${i.level_name} ${a.name}`;e(l=>({data:{...l.data,configuration:{...l.data.configuration,className:o}}}),!1,"autoGenerateClassName")}}},updateSessions:n=>{e(r=>({data:{...r.data,sessions:n}}),!1,"updateSessions")},addSession:n=>{e(r=>({data:{...r.data,sessions:[...r.data.sessions,{...n,id:`temp-${Date.now()}-${Math.random()}`}]}}),!1,"addSession")},updateSession:(n,r)=>{e(a=>({data:{...a.data,sessions:a.data.sessions.map((i,o)=>o===n?{...i,...r}:i)}}),!1,"updateSession")},removeSession:n=>{e(r=>({data:{...r.data,sessions:r.data.sessions.filter((a,i)=>i!==n)}}),!1,"removeSession")},updateStudentManagement:n=>{e(r=>({data:{...r.data,students:{...r.data.students,...n}}}),!1,"updateStudentManagement")},addStudent:n=>{e(r=>({data:{...r.data,students:{...r.data.students,students:[...r.data.students.students,{...n,id:`temp-${Date.now()}-${Math.random()}`}]}}}),!1,"addStudent")},updateStudent:(n,r)=>{e(a=>({data:{...a.data,students:{...a.data.students,students:a.data.students.students.map((i,o)=>o===n?{...i,...r}:i)}}}),!1,"updateStudent")},removeStudent:n=>{e(r=>({data:{...r.data,students:{...r.data.students,students:r.data.students.students.filter((a,i)=>i!==n)}}}),!1,"removeStudent")},openWizard:()=>{e({isOpen:!0,currentStep:"domain",completedSteps:new Set,errors:{}},!1,"openWizard")},closeWizard:()=>{e({isOpen:!1,currentStep:"domain",completedSteps:new Set,errors:{}},!1,"closeWizard")},resetWizard:()=>{e({data:{...Cv,domain:{...Cv.domain,availableDomains:t().data.domain.availableDomains}},currentStep:"domain",completedSteps:new Set,errors:{}},!1,"resetWizard")},validateStep:async n=>{const{data:r}=t(),a=[];switch(n){case"domain":r.domain.selectedDomainId||a.push("Please select a domain for your class");break;case"configuration":r.configuration.className.trim()||a.push("Class name is required"),r.configuration.className.length<3&&a.push("Class name must be at least 3 characters"),r.configuration.difficultyLevelId||a.push("Please select a difficulty level"),r.configuration.maxStudents<1&&a.push("Maximum students must be at least 1"),r.configuration.maxStudents>100&&a.push("Maximum students cannot exceed 100");break;case"sessions":r.sessions.length===0&&a.push("At least one class session is required");for(const[o,l]of r.sessions.entries())l.sessionDate||a.push(`Session ${o+1}: Date is required`),l.startTime||a.push(`Session ${o+1}: Start time is required`),l.endTime||a.push(`Session ${o+1}: End time is required`),l.startTime&&l.endTime&&l.startTime>=l.endTime&&a.push(`Session ${o+1}: End time must be after start time`);break;case"students":r.students.students.length===0&&a.push("At least one student is required");const i=new Set;for(const[o,l]of r.students.students.entries()){l.firstName.trim()||a.push(`Student ${o+1}: First name is required`),l.lastName.trim()||a.push(`Student ${o+1}: Last name is required`),l.email.trim()||a.push(`Student ${o+1}: Email is required`);const c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;l.email&&!c.test(l.email)&&a.push(`Student ${o+1}: Invalid email address`),l.email&&(i.has(l.email.toLowerCase())?a.push(`Duplicate email address: ${l.email}`):i.add(l.email.toLowerCase()))}break}return a.length>0?(e(i=>({errors:{...i.errors,[n]:a}}),!1,"setValidationErrors"),!1):(e(i=>{const o={...i.errors};return delete o[n],{errors:o}},!1,"clearValidationErrors"),!0)},setErrors:n=>{e({errors:n},!1,"setErrors")},clearErrors:()=>{e({errors:{}},!1,"clearErrors")},setLoading:n=>{e({isLoading:n},!1,"setLoading")},setSubmitting:n=>{e({isSubmitting:n},!1,"setSubmitting")},loadAvailableDomains:async()=>{e({isLoading:!0},!1,"loadAvailableDomains");try{const{classService:n}=await wa(async()=>{const{classService:a}=await import("./class.service-BR28QEyd.js");return{classService:a}},[]),r=await n.getAvailableDomainsForTeacher();e(a=>({data:{...a.data,domain:{...a.data.domain,availableDomains:r.map(i=>({id:i.id,name:i.name,description:i.description,difficultyLevels:i.difficulty_levels}))}},isLoading:!1}),!1,"setAvailableDomains"),r.length===1&&e(a=>({data:{...a.data,domain:{...a.data.domain,selectedDomainId:r[0].id}}}),!1,"autoSelectSingleDomain")}catch(n){console.error("Failed to load available domains:",n),e({isLoading:!1},!1,"loadAvailableDomainsError")}}}),{name:"class-wizard-store",partialize:e=>({currentStep:e.currentStep,completedSteps:Array.from(e.completedSteps),data:{...e.data,students:{...e.data.students,students:[]}}}),onRehydrateStorage:()=>e=>{e&&Array.isArray(e.completedSteps)&&(e.completedSteps=new Set(e.completedSteps))}}),{name:"class-wizard"})),Sce=()=>{const e=St(a=>a.data.domain),t=St(a=>a.updateDomainSelection),n=St(a=>a.errors.domain||[]),r=St(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("domain")}},_ce=()=>{const e=St(a=>a.data.configuration),t=St(a=>a.updateClassConfiguration),n=St(a=>a.errors.configuration||[]),r=St(a=>a.validateStep);return{data:e,update:t,errors:n,validate:()=>r("configuration")}},Cce=()=>{const e=St(l=>l.data.sessions),t=St(l=>l.updateSessions),n=St(l=>l.addSession),r=St(l=>l.updateSession),a=St(l=>l.removeSession),i=St(l=>l.errors.sessions||[]),o=St(l=>l.validateStep);return{sessions:e,updateSessions:t,addSession:n,updateSession:r,removeSession:a,errors:i,validate:()=>o("sessions")}},kce=()=>{const e=St(l=>l.data.students),t=St(l=>l.updateStudentManagement),n=St(l=>l.addStudent),r=St(l=>l.updateStudent),a=St(l=>l.removeStudent),i=St(l=>l.errors.students||[]),o=St(l=>l.validateStep);return{data:e,update:t,addStudent:n,updateStudent:r,removeStudent:a,errors:i,validate:()=>o("students")}};function Ece(){var a;const{data:e,update:t}=Sce(),n=i=>{t({selectedDomainId:i})},r=i=>{switch(i.toLowerCase()){case"mathematics":return s.jsx(yr,{className:"h-6 w-6"});case"science":return s.jsx(rt,{className:"h-6 w-6"});case"language arts":return s.jsx(et,{className:"h-6 w-6"});default:return s.jsx(rt,{className:"h-6 w-6"})}};return e.availableDomains.length===0?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Select Domain"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading your available domains..."})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(i=>s.jsxs(V,{className:"cursor-pointer",children:[s.jsx(G,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pe,{className:"h-6 w-6 rounded"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"h-5 w-24"}),s.jsx(Pe,{className:"h-3 w-32"})]})]})}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{className:"h-3 w-full"}),s.jsx(Pe,{className:"h-3 w-3/4"}),s.jsx("div",{className:"flex gap-1 mt-3",children:[1,2,3,4].map(o=>s.jsx(Pe,{className:"h-5 w-16"},o))})]})})]},i))})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Select Domain"}),s.jsx("p",{className:"text-muted-foreground",children:"Choose the learning domain for your class. This will determine the available difficulty levels and content areas."})]}),e.availableDomains.length===1&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:e.availableDomains[0].name})," has been automatically selected as it's your only available domain."]})]})}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.availableDomains.map(i=>{const o=e.selectedDomainId===i.id;return s.jsxs(V,{className:`cursor-pointer transition-all hover:shadow-md ${o?"ring-2 ring-primary border-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>n(i.id),children:[s.jsxs(G,{className:"pb-3",children:[s.jsxs(Y,{className:"flex items-center gap-3 text-base",children:[s.jsx("div",{className:`p-2 rounded-lg ${o?"bg-primary text-primary-foreground":"bg-muted"}`,children:r(i.name)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:i.name}),o&&s.jsx(X,{variant:"secondary",className:"mt-1",children:"Selected"})]})]}),s.jsx(we,{children:i.description})]}),s.jsx(W,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium mb-2",children:"Available Difficulty Levels"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:i.difficultyLevels.map(l=>s.jsx(X,{variant:"outline",className:"text-xs",style:{borderColor:l.color_code,color:l.color_code},children:l.level_name},l.id))})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.difficultyLevels.length," difficulty levels available"]})]})})]},i.id)})}),e.selectedDomainId&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),s.jsxs("p",{className:"text-sm text-green-700",children:[s.jsx("strong",{children:"Domain selected:"})," ",(a=e.availableDomains.find(i=>i.id===e.selectedDomainId))==null?void 0:a.name]})]})})]})}const k2=[{value:"weekly",label:"Weekly",description:"Class meets once every week",icon:s.jsx(qs,{className:"h-4 w-4"})},{value:"bi-weekly",label:"Bi-weekly",description:"Class meets every two weeks",icon:s.jsx(qs,{className:"h-4 w-4"})},{value:"monthly",label:"Monthly",description:"Class meets once per month",icon:s.jsx(qs,{className:"h-4 w-4"})}];function Tce(){var i;const{data:e,update:t}=_ce(),n=St(o=>o.data.domain.availableDomains.find(l=>l.id===o.data.domain.selectedDomainId)),r=(o,l)=>{t({[o]:l})},a=n==null?void 0:n.difficultyLevels.find(o=>o.id===e.difficultyLevelId);return s.jsxs("div",{className:"space-y-8",children:[n&&s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(X,{variant:"secondary",children:"Selected Domain"}),s.jsx("h4",{className:"font-semibold",children:n.name})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.description})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(et,{className:"h-5 w-5"}),"Class Information"]}),s.jsx(we,{children:"Set up the basic details for your class"})]}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"className",children:"Class Name *"}),s.jsx(pe,{id:"className",value:e.className,onChange:o=>r("className",o.target.value),placeholder:"e.g., Advanced Mathematics, Beginner Science"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"A descriptive name that students will see when they join your class"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"description",children:"Description (Optional)"}),s.jsx(Fn,{id:"description",value:e.description,onChange:o=>r("description",o.target.value),placeholder:"Describe what students will learn in this class...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"maxStudents",children:"Maximum Students *"}),s.jsx(pe,{id:"maxStudents",type:"number",min:1,max:100,value:e.maxStudents,onChange:o=>r("maxStudents",parseInt(o.target.value)||1)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"The maximum number of students who can join this class (1-100)"})]})]})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsx(Y,{children:"Difficulty Level *"}),s.jsx(we,{children:"Choose the appropriate difficulty level for your students"})]}),s.jsx(W,{children:n?s.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.difficultyLevels.map(o=>{const l=e.difficultyLevelId===o.id;return s.jsx(V,{className:`cursor-pointer transition-all hover:shadow-sm ${l?"ring-2 ring-primary border-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>r("difficultyLevelId",o.id),children:s.jsx(W,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(X,{variant:"outline",style:{borderColor:o.color_code,color:o.color_code,backgroundColor:`${o.color_code}10`},children:["Level ",o.level_order]}),s.jsx("h4",{className:"font-semibold",children:o.level_name})]}),o.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o.description})]}),l&&s.jsx(X,{variant:"secondary",children:"Selected"})]})})},o.id)})}):s.jsx("p",{className:"text-muted-foreground",children:"Please select a domain first to see available difficulty levels."})})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(qs,{className:"h-5 w-5"}),"Schedule & Settings"]}),s.jsx(we,{children:"Configure how often your class meets and communication settings"})]}),s.jsxs(W,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(Q,{children:"Class Frequency *"}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:k2.map(o=>{const l=e.frequency===o.value;return s.jsx(V,{className:`cursor-pointer transition-all hover:shadow-sm ${l?"ring-2 ring-primary border-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>r("frequency",o.value),children:s.jsx(W,{className:"p-4 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${l?"bg-primary text-primary-foreground":"bg-muted"}`,children:o.icon}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm",children:o.label}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o.description})]}),l&&s.jsx(X,{variant:"secondary",className:"mt-1",children:"Selected"})]})})},o.value)})})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Q,{className:"text-base font-medium",children:"Communication Settings"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(TA,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx(Q,{htmlFor:"allowsStudentMessages",className:"text-sm font-medium",children:"Allow Student Messages"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Students can send you direct messages about the class"})]})]}),s.jsx(Nt,{id:"allowsStudentMessages",checked:e.allowsStudentMessages,onCheckedChange:o=>r("allowsStudentMessages",o)})]})]})]})]}),e.className&&a&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Configuration Summary"}),s.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Class:"})," ",e.className]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Domain:"})," ",n==null?void 0:n.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Level:"})," ",a.level_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Frequency:"})," ",(i=k2.find(o=>o.value===e.frequency))==null?void 0:i.label]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Max Students:"})," ",e.maxStudents]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Student Messages:"})," ",e.allowsStudentMessages?"Enabled":"Disabled"]})]})]})]})}const ZO=[{value:"UTC",label:"UTC (Coordinated Universal Time)"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"GMT (Greenwich Mean Time)"},{value:"Europe/Paris",label:"CET (Central European Time)"},{value:"Asia/Tokyo",label:"JST (Japan Standard Time)"},{value:"Australia/Sydney",label:"AEST (Australian Eastern Time)"}];function E2({session:e,sessionIndex:t,onSave:n,trigger:r}){const[a,i]=f.useState(!1),[o,l]=f.useState(()=>({sessionName:(e==null?void 0:e.sessionName)||"",sessionDate:(e==null?void 0:e.sessionDate)||"",startTime:(e==null?void 0:e.startTime)||"",endTime:(e==null?void 0:e.endTime)||"",timeZone:(e==null?void 0:e.timeZone)||"UTC"})),c=()=>{n(o,t),i(!1)},d=e!==void 0;return s.jsxs(nn,{open:a,onOpenChange:i,children:[s.jsx(kh,{asChild:!0,children:r}),s.jsxs(Kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:d?"Edit Session":"Add New Session"}),s.jsx(Tn,{children:"Set up the schedule for this class session. All times will be displayed in the selected time zone."})]}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"sessionName",children:"Session Name (Optional)"}),s.jsx(pe,{id:"sessionName",value:o.sessionName||"",onChange:u=>l({...o,sessionName:u.target.value}),placeholder:"e.g., Introduction to Algebra, Lab Session 1"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"sessionDate",children:"Date *"}),s.jsx(pe,{id:"sessionDate",type:"date",value:o.sessionDate,onChange:u=>l({...o,sessionDate:u.target.value}),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"timeZone",children:"Time Zone *"}),s.jsxs(Ve,{value:o.timeZone,onValueChange:u=>l({...o,timeZone:u}),children:[s.jsx(ze,{children:s.jsx(qe,{placeholder:"Select timezone"})}),s.jsx(Ue,{children:ZO.map(u=>s.jsx(le,{value:u.value,children:u.label},u.value))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"startTime",children:"Start Time *"}),s.jsx(pe,{id:"startTime",type:"time",value:o.startTime,onChange:u=>l({...o,startTime:u.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"endTime",children:"End Time *"}),s.jsx(pe,{id:"endTime",type:"time",value:o.endTime,onChange:u=>l({...o,endTime:u.target.value})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(z,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(z,{onClick:c,children:d?"Update Session":"Add Session"})]})]})]})]})}function Ace(){const{sessions:e,addSession:t,updateSession:n,removeSession:r}=Cce(),a=(l,c)=>{c!==void 0?n(c,l):t(l)},i=(l,c,d)=>{var m,p;const u=new Date(`${l}T${c}`),h=((m=ZO.find(v=>v.value===d))==null?void 0:m.label)||d;return{date:u.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),time:`${c} ${((p=h.split("(")[1])==null?void 0:p.replace(")",""))||d}`}},o=(l,c)=>{const d=new Date(`2000-01-01T${l}`),h=new Date(`2000-01-01T${c}`).getTime()-d.getTime(),m=Math.floor(h/(1e3*60*60)),p=Math.floor(h%(1e3*60*60)/(1e3*60));return m>0?`${m}h ${p}m`:`${p}m`};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Schedule Class Sessions"}),s.jsx("p",{className:"text-muted-foreground",children:"Add one or more sessions for your class. Each session represents a meeting time where you'll teach your students."})]}),s.jsx("div",{className:"flex justify-start",children:s.jsx(E2,{onSave:a,trigger:s.jsxs(z,{className:"flex items-center gap-2",children:[s.jsx(Pt,{className:"h-4 w-4"}),"Add Session"]})})}),e.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h5",{className:"font-medium text-sm text-muted-foreground",children:["Scheduled Sessions (",e.length,")"]}),s.jsx("div",{className:"space-y-3",children:e.map((l,c)=>{const{date:d,time:u}=i(l.sessionDate,l.startTime,l.timeZone),h=o(l.startTime,l.endTime);return s.jsx(V,{className:"relative",children:s.jsx(W,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(X,{variant:"outline",className:"font-mono text-xs",children:["Session ",c+1]}),l.sessionName&&s.jsx("h6",{className:"font-medium",children:l.sessionName})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:d})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qs,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:u}),s.jsx(X,{variant:"secondary",className:"text-xs",children:h})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(E2,{session:l,sessionIndex:c,onSave:a,trigger:s.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(ul,{className:"h-4 w-4"})})}),s.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>r(c),children:s.jsx(Ts,{className:"h-4 w-4"})})]})]})})},l.id||c)})})]}):s.jsx(V,{className:"border-dashed",children:s.jsxs(G,{className:"text-center py-8",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-muted rounded-lg flex items-center justify-center mb-4",children:s.jsx(kn,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx(Y,{className:"text-lg",children:"No Sessions Added Yet"}),s.jsx(we,{children:'Click "Add Session" above to schedule your first class session.'})]})}),e.length>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Schedule Summary"}),s.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[s.jsxs("p",{children:[s.jsx("strong",{children:e.length})," session",e.length!==1?"s":""," scheduled"]}),e.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"First Session:"})," ",i(e[0].sessionDate,e[0].startTime,e[0].timeZone).date]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Latest Session:"})," ",i(e[e.length-1].sessionDate,e[e.length-1].startTime,e[e.length-1].timeZone).date]})]})]})]})]})}function T2({student:e,studentIndex:t,onSave:n,trigger:r,defaultMessage:a}){const[i,o]=f.useState(!1),[l,c]=f.useState(()=>({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",customMessage:(e==null?void 0:e.customMessage)||a||""})),d=()=>{n(l,t),o(!1),e||c({firstName:"",lastName:"",email:"",customMessage:a||""})},u=e!==void 0;return s.jsxs(nn,{open:i,onOpenChange:o,children:[s.jsx(kh,{asChild:!0,children:r}),s.jsxs(Kt,{className:"sm:max-w-[600px]",children:[s.jsxs(Qt,{children:[s.jsx(Yt,{children:u?"Edit Student":"Add New Student"}),s.jsx(Tn,{children:"Add student information and customize their invitation message."})]}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"firstName",children:"First Name *"}),s.jsx(pe,{id:"firstName",value:l.firstName,onChange:h=>c({...l,firstName:h.target.value}),placeholder:"John"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"lastName",children:"Last Name *"}),s.jsx(pe,{id:"lastName",value:l.lastName,onChange:h=>c({...l,lastName:h.target.value}),placeholder:"Doe"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"email",children:"Email Address *"}),s.jsx(pe,{id:"email",type:"email",value:l.email,onChange:h=>c({...l,email:h.target.value}),placeholder:"john.doe@example.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{htmlFor:"customMessage",children:"Custom Invitation Message (Optional)"}),s.jsx(Fn,{id:"customMessage",value:l.customMessage||"",onChange:h=>c({...l,customMessage:h.target.value}),placeholder:"Add a personal message that will be included in the invitation email...",rows:4}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be included in the invitation email sent to the student."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(z,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(z,{onClick:d,children:u?"Update Student":"Add Student"})]})]})]})]})}function Pce(){const{data:e,update:t,addStudent:n,updateStudent:r,removeStudent:a}=kce(),i=(c,d)=>{d!==void 0?r(d,c):n(c)},o=(c,d)=>`${c.charAt(0)}${d.charAt(0)}`.toUpperCase(),l=c=>{t({defaultCustomMessage:c})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Add Students"}),s.jsx("p",{className:"text-muted-foreground",children:"Add students who will be invited to join your class. Each student will receive an invitation email."})]}),s.jsxs(V,{children:[s.jsxs(G,{children:[s.jsxs(Y,{className:"flex items-center gap-2 text-base",children:[s.jsx(At,{className:"h-5 w-5"}),"Default Invitation Message"]}),s.jsx(we,{children:"This message will be pre-filled for each student invitation. You can customize it for individual students."})]}),s.jsx(W,{children:s.jsx(Fn,{value:e.defaultCustomMessage,onChange:c=>l(c.target.value),placeholder:"Welcome to my class! I'm excited to have you join us for this learning journey...",rows:3})})]}),s.jsx("div",{className:"flex justify-start",children:s.jsx(T2,{onSave:i,defaultMessage:e.defaultCustomMessage,trigger:s.jsxs(z,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-4 w-4"}),"Add Student"]})})}),e.students.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h5",{className:"font-medium text-sm text-muted-foreground",children:["Students to Invite (",e.students.length,")"]}),s.jsxs(X,{variant:"outline",children:[e.students.length," invitation",e.students.length!==1?"s":""," will be sent"]})]}),s.jsx("div",{className:"space-y-3",children:e.students.map((c,d)=>s.jsx(V,{children:s.jsx(W,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(al,{className:"h-10 w-10",children:s.jsx($x,{className:"text-sm",children:o(c.firstName,c.lastName)})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{children:[s.jsxs("h6",{className:"font-medium",children:[c.firstName," ",c.lastName]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(At,{className:"h-3 w-3"}),c.email]})]}),c.customMessage&&s.jsxs("div",{className:"mt-2 p-2 bg-muted rounded text-xs",children:[s.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"Custom message:"}),s.jsx("p",{className:"line-clamp-2",children:c.customMessage})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(T2,{student:c,studentIndex:d,onSave:i,defaultMessage:e.defaultCustomMessage,trigger:s.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(ul,{className:"h-4 w-4"})})}),s.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>a(d),children:s.jsx(Ts,{className:"h-4 w-4"})})]})]})})},c.id||d))})]}):s.jsx(V,{className:"border-dashed",children:s.jsxs(G,{className:"text-center py-8",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-muted rounded-lg flex items-center justify-center mb-4",children:s.jsx(et,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx(Y,{className:"text-lg",children:"No Students Added Yet"}),s.jsx(we,{children:'Click "Add Student" above to start building your class roster.'})]})}),e.students.length>0&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Invitation Summary"}),s.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[s.jsxs("p",{children:[s.jsx("strong",{children:e.students.length})," student",e.students.length!==1?"s":""," will be invited"]}),s.jsx("p",{children:s.jsx("strong",{children:"Invitations will be sent to:"})}),s.jsxs("ul",{className:"ml-4 space-y-1",children:[e.students.slice(0,5).map((c,d)=>s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-600 rounded-full"}),c.firstName," ",c.lastName," (",c.email,")"]},d)),e.students.length>5&&s.jsxs("li",{className:"text-green-700 italic",children:["...and ",e.students.length-5," more"]})]})]})]})]})}const Ice=[{value:"UTC",label:"UTC (Coordinated Universal Time)"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"GMT (Greenwich Mean Time)"},{value:"Europe/Paris",label:"CET (Central European Time)"},{value:"Asia/Tokyo",label:"JST (Japan Standard Time)"},{value:"Australia/Sydney",label:"AEST (Australian Eastern Time)"}],Dce={weekly:"Weekly","bi-weekly":"Bi-weekly",monthly:"Monthly"};function Rce(){const{data:e,setCurrentStep:t}=St(),n=e.domain.availableDomains.find(c=>c.id===e.domain.selectedDomainId),r=n==null?void 0:n.difficultyLevels.find(c=>c.id===e.configuration.difficultyLevelId),a=(c,d,u)=>{var p,v;const h=new Date(`${c}T${d}`),m=((p=Ice.find(x=>x.value===u))==null?void 0:p.label)||u;return{date:h.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),time:`${d} ${((v=m.split("(")[1])==null?void 0:v.replace(")",""))||u}`}},i=(c,d)=>`${c.charAt(0)}${d.charAt(0)}`.toUpperCase(),o=c=>{switch(c){case"domain":return e.domain.selectedDomainId?"complete":"incomplete";case"configuration":return e.configuration.className&&e.configuration.difficultyLevelId?"complete":"incomplete";case"sessions":return e.sessions.length>0?"complete":"incomplete";case"students":return e.students.students.length>0?"complete":"incomplete";default:return"incomplete"}},l=({status:c})=>c==="complete"?s.jsx(ln,{className:"h-5 w-5 text-green-600"}):s.jsx(ft,{className:"h-5 w-5 text-orange-500"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium mb-2",children:"Review Your Class"}),s.jsx("p",{className:"text-muted-foreground",children:"Please review all the details below before creating your class. You can go back to any step to make changes."})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(l,{status:o("domain")}),s.jsx(rt,{className:"h-5 w-5"}),"Domain & Configuration"]})}),s.jsxs(W,{className:"space-y-4",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"DOMAIN"}),s.jsx("p",{className:"font-medium",children:(n==null?void 0:n.name)||"Not selected"}),(n==null?void 0:n.description)&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.description})]}),s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"DIFFICULTY LEVEL"}),s.jsx("div",{className:"flex items-center gap-2",children:r?s.jsxs(s.Fragment,{children:[s.jsx(X,{variant:"outline",style:{borderColor:r.color_code,color:r.color_code,backgroundColor:`${r.color_code}10`},children:r.level_name}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Level ",r.level_order]})]}):s.jsx("p",{children:"Not selected"})})]})]}),s.jsx(cn,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"CLASS NAME"}),s.jsx("p",{className:"font-medium",children:e.configuration.className||"Not provided"})]}),e.configuration.description&&s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"DESCRIPTION"}),s.jsx("p",{className:"text-sm",children:e.configuration.description})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"FREQUENCY"}),s.jsx("p",{className:"font-medium",children:Dce[e.configuration.frequency]})]}),s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"MAX STUDENTS"}),s.jsx("p",{className:"font-medium",children:e.configuration.maxStudents})]}),s.jsxs("div",{children:[s.jsx(mo,{className:"text-sm font-medium text-muted-foreground",children:"STUDENT MESSAGES"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(TA,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("p",{className:"font-medium",children:e.configuration.allowsStudentMessages?"Enabled":"Disabled"})]})]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{className:"text-sm text-primary hover:underline",onClick:()=>t("configuration"),children:"Edit Configuration →"})})]})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(l,{status:o("sessions")}),s.jsx(kn,{className:"h-5 w-5"}),"Class Sessions (",e.sessions.length,")"]})}),s.jsx(W,{children:e.sessions.length>0?s.jsxs("div",{className:"space-y-3",children:[e.sessions.map((c,d)=>{const{date:u,time:h}=a(c.sessionDate,c.startTime,c.timeZone);return s.jsx("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(X,{variant:"outline",className:"text-xs",children:["Session ",d+1]}),c.sessionName&&s.jsx("span",{className:"font-medium text-sm",children:c.sessionName})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(kn,{className:"h-3 w-3"}),u]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"h-3 w-3"}),h]})]})]})},c.id||d)}),s.jsx("div",{className:"text-right",children:s.jsx("button",{className:"text-sm text-primary hover:underline",onClick:()=>t("sessions"),children:"Edit Sessions →"})})]}):s.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[s.jsx(kn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No sessions scheduled"}),s.jsx("button",{className:"text-sm text-primary hover:underline mt-1",onClick:()=>t("sessions"),children:"Add Sessions →"})]})})]}),s.jsxs(V,{children:[s.jsx(G,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(l,{status:o("students")}),s.jsx(et,{className:"h-5 w-5"}),"Students (",e.students.students.length,")"]})}),s.jsx(W,{children:e.students.students.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-3",children:[e.students.students.slice(0,5).map((c,d)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(al,{className:"h-8 w-8",children:s.jsx($x,{className:"text-xs",children:i(c.firstName,c.lastName)})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-medium text-sm",children:[c.firstName," ",c.lastName]}),s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(At,{className:"h-3 w-3"}),c.email]})]}),c.customMessage&&s.jsx(X,{variant:"outline",className:"text-xs",children:"Custom message"})]},c.id||d)),e.students.students.length>5&&s.jsxs("p",{className:"text-sm text-muted-foreground text-center py-2",children:["...and ",e.students.students.length-5," more students"]})]}),s.jsx(cn,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:e.students.students.length})," invitation",e.students.students.length!==1?"s":""," will be sent"]}),s.jsx("button",{className:"text-sm text-primary hover:underline",onClick:()=>t("students"),children:"Edit Students →"})]})]}):s.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[s.jsx(et,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No students added"}),s.jsx("button",{className:"text-sm text-primary hover:underline mt-1",onClick:()=>t("students"),children:"Add Students →"})]})})]}),s.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-6",children:[s.jsx("h4",{className:"font-semibold text-primary mb-3",children:"Ready to Create Class"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Class will be created:"}),s.jsx(X,{variant:"outline",children:"Active"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Invitation emails will be sent:"}),s.jsxs(X,{variant:"outline",children:[e.students.students.length," students"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Sessions scheduled:"}),s.jsxs(X,{variant:"outline",children:[e.sessions.length," sessions"]})]})]})]})]})}function mo({className:e,children:t,...n}){return s.jsx("label",{className:`block text-xs font-medium text-muted-foreground uppercase tracking-wide ${e}`,...n,children:t})}const Od={domain:{title:"Select Domain",description:"Choose the learning domain for your class",component:Ece},configuration:{title:"Class Configuration",description:"Set up your class details and difficulty level",component:Tce},sessions:{title:"Schedule Sessions",description:"Add your class sessions and schedules",component:Ace},students:{title:"Add Students",description:"Invite students to your class",component:Pce},review:{title:"Review & Create",description:"Review your class details and create the class",component:Rce}},Ca=["domain","configuration","sessions","students","review"];function Mce(){const{isOpen:e,currentStep:t,completedSteps:n,isLoading:r,isSubmitting:a,errors:i,closeWizard:o,setCurrentStep:l,goToNextStep:c,goToPreviousStep:d,validateStep:u,markStepComplete:h}=St();if(!e)return null;const m=Ca.indexOf(t),p=m===0,v=m===Ca.length-1,x=Od[t].component,y=async()=>{await u(t)&&(h(t),v?g():c())},g=async()=>{const{setSubmitting:b,data:w}=St.getState();try{b(!0);const{classService:C}=await wa(async()=>{const{classService:S}=await import("./class.service-BR28QEyd.js");return{classService:S}},[]),_=await C.createClass(w);if(_.success)console.log("Class created successfully:",{classId:_.class_id,sessionsCreated:_.sessions_created,invitationsSent:_.invitations_sent}),o();else throw new Error("Failed to create class")}catch(C){console.error("Failed to create class:",C)}finally{b(!1)}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm p-2 sm:p-4",children:s.jsxs("div",{className:"relative w-full max-w-5xl h-full max-h-[95vh] bg-background border rounded-lg shadow-lg flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-lg sm:text-2xl font-semibold truncate",children:"Create New Class"}),s.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:Od[t].description})]}),s.jsx(z,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8 shrink-0",children:s.jsx(Lt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex flex-1 min-h-0 flex-col sm:flex-row",children:[s.jsx("div",{className:"w-full sm:w-64 border-b sm:border-b-0 sm:border-r bg-muted/50",children:s.jsx(tl,{className:"h-full",children:s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("nav",{className:"space-y-2",children:Ca.map((b,w)=>{const C=b===t,_=n.has(b),S=w===0||n.has(Ca[w-1]);return s.jsxs("button",{onClick:()=>S&&l(b),disabled:!S,className:`
                          w-full text-left p-3 rounded-lg border transition-all
                          ${C?"bg-primary text-primary-foreground border-primary":S?"bg-background border-border hover:bg-accent hover:text-accent-foreground":"bg-muted border-muted-foreground/20 text-muted-foreground cursor-not-allowed"}
                        `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`
                            flex items-center justify-center w-6 h-6 rounded-full text-xs font-medium
                            ${_?"bg-green-500 text-white":C?"bg-primary-foreground text-primary":"bg-muted-foreground/20 text-muted-foreground"}
                          `,children:_?s.jsx(pn,{className:"h-3 w-3"}):w+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm truncate",children:Od[b].title}),C&&s.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Step ",w+1," of ",Ca.length]})]})]}),i[b]&&i[b].length>0&&s.jsxs(X,{variant:"destructive",className:"mt-2 text-xs",children:[i[b].length," error",i[b].length!==1?"s":""]})]},b)})})})})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s.jsx(tl,{className:"flex-1",children:s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxs(X,{variant:"outline",className:"text-xs",children:["Step ",m+1," of ",Ca.length]}),s.jsx("h3",{className:"text-xl font-semibold",children:Od[t].title})]}),s.jsx("p",{className:"text-muted-foreground",children:Od[t].description})]}),s.jsx(cn,{className:"mb-6"}),i[t]&&i[t].length>0&&s.jsxs("div",{className:"mb-6 p-4 border border-destructive/20 bg-destructive/10 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-destructive mb-2",children:"Please fix the following issues:"}),s.jsx("ul",{className:"space-y-1",children:i[t].map((b,w)=>s.jsxs("li",{className:"text-sm text-destructive flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-destructive rounded-full"}),b]},w))})]}),s.jsx("div",{className:"space-y-6",children:s.jsx(x,{})})]})}),s.jsxs("div",{className:"border-t p-4 sm:p-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs(z,{variant:"outline",onClick:d,disabled:p||a,className:"flex items-center gap-2",children:[s.jsx(ph,{className:"h-4 w-4"}),"Previous"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(z,{variant:"ghost",onClick:o,disabled:a,children:"Cancel"}),s.jsx(z,{onClick:y,disabled:r||a,className:"flex items-center gap-2 min-w-[120px]",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-r-transparent"}),"Creating..."]}):v?s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"h-4 w-4"}),"Create Class"]}):s.jsxs(s.Fragment,{children:["Next",s.jsx(_n,{className:"h-4 w-4"})]})})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{children:["Progress: ",m+1," of ",Ca.length]}),s.jsxs("span",{children:["(",Math.round((m+1)/Ca.length*100),"%)"]})]}),s.jsx("div",{className:"w-full bg-muted h-2 rounded-full",children:s.jsx("div",{className:"h-2 bg-primary rounded-full transition-all duration-300",style:{width:`${(m+1)/Ca.length*100}%`}})})]})]})]})]})]})})}function Lce(){const{session:e,isTeacher:t,isPlatformAdmin:n,isTenantAdmin:r}=dn(),{openWizard:a,loadAvailableDomains:i}=St();f.useEffect(()=>{e&&(t||n||r)&&i()},[e,t,n,r,i]);const o=t||n||r;return e?o?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Create New Class"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Set up a new class and invite students to join your learning community."})]}),s.jsx(X,{variant:"outline",className:"h-6",children:"Teacher Dashboard"})]})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[s.jsxs(V,{children:[s.jsx(G,{className:"pb-3",children:s.jsxs(Y,{className:"flex items-center gap-2 text-base",children:[s.jsx(rt,{className:"h-5 w-5 text-primary"}),"Select Domain"]})}),s.jsx(W,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the learning domain and difficulty level for your class."})})]}),s.jsxs(V,{children:[s.jsx(G,{className:"pb-3",children:s.jsxs(Y,{className:"flex items-center gap-2 text-base",children:[s.jsx(kn,{className:"h-5 w-5 text-primary"}),"Schedule Sessions"]})}),s.jsx(W,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up your class schedule and meeting times."})})]}),s.jsxs(V,{children:[s.jsx(G,{className:"pb-3",children:s.jsxs(Y,{className:"flex items-center gap-2 text-base",children:[s.jsx(et,{className:"h-5 w-5 text-primary"}),"Invite Students"]})}),s.jsx(W,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add students and send them invitation emails."})})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs(V,{className:"border-dashed border-2 p-8",children:[s.jsxs(G,{children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:s.jsx(Pt,{className:"h-8 w-8 text-primary"})}),s.jsx(Y,{className:"text-xl",children:"Ready to Create Your First Class?"}),s.jsx(we,{className:"text-base",children:"Our step-by-step wizard will guide you through setting up your class, scheduling sessions, and inviting students."})]}),s.jsxs(W,{children:[s.jsxs(z,{onClick:a,size:"lg",className:"text-base px-8 py-3",children:[s.jsx(Pt,{className:"h-5 w-5 mr-2"}),"Create New Class"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Takes about 5-10 minutes to complete"})]})]})}),s.jsxs("div",{className:"mt-12 bg-muted/50 rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Need Help Getting Started?"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Class Creation Tips:"}),s.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[s.jsx("li",{children:"• Choose a clear, descriptive class name"}),s.jsx("li",{children:"• Set appropriate difficulty level for your students"}),s.jsx("li",{children:"• Schedule regular sessions for better engagement"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Student Invitations:"}),s.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[s.jsx("li",{children:"• Students will receive email invitations automatically"}),s.jsx("li",{children:"• Customize invitation messages for each student"}),s.jsx("li",{children:"• Students can join with a simple click"})]})]})]})]})]}),s.jsx(Mce,{})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"Only teachers and administrators can create classes."})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Authentication Required"}),s.jsx("p",{className:"text-muted-foreground",children:"Please sign in to create classes."})]})})}function Oce(){const e=pt(),{user:t}=dn(),n=async()=>{await L.auth.signOut(),e("/")},r=()=>{window.location.href=`mailto:support@gemeos.ai?subject=Access Request&body=User ${t==null?void 0:t.email} is requesting access to the Gemeos platform.`};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs(V,{className:"max-w-lg w-full shadow-xl",children:[s.jsxs(G,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-red-100 p-4 rounded-full",children:s.jsx(ft,{className:"h-12 w-12 text-red-600"})})}),s.jsx(Y,{className:"text-2xl font-bold",children:"No Access to Platform"}),s.jsx(we,{className:"text-lg mt-2",children:"Your account doesn't have access to any tenants"})]}),s.jsxs(W,{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.jsx("strong",{children:"Logged in as:"})}),s.jsx("p",{className:"text-sm font-medium",children:t==null?void 0:t.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Why am I seeing this?"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"Your account exists but hasn't been assigned to any tenant"}),s.jsx("li",{children:"You may be a new user waiting for approval"}),s.jsx("li",{children:"Your tenant access may have been revoked"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"What can I do?"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"Contact your tenant administrator for access"}),s.jsx("li",{children:"Request access using the button below"}),s.jsx("li",{children:"Sign out and try a different account"})]})]}),s.jsxs("div",{className:"space-y-3 pt-4",children:[s.jsxs(z,{onClick:r,className:"w-full bg-indigo-600 hover:bg-indigo-700",children:[s.jsx(At,{className:"mr-2 h-4 w-4"}),"Request Access"]}),s.jsxs(z,{onClick:n,variant:"outline",className:"w-full",children:[s.jsx(EA,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})]})})}const Fce=new JU,$ce=()=>s.jsx(sB,{client:Fce,children:s.jsx(b9,{children:s.jsx(pP,{children:s.jsxs(WM,{children:[s.jsx(D8,{}),s.jsx(lz,{}),s.jsx(c7,{children:s.jsxs(Vd,{children:[s.jsx(Ce,{path:"/",element:s.jsx(Os,{to:"/welcome",replace:!0})}),s.jsx(Ce,{path:"/welcome",element:s.jsx(hQ,{})}),s.jsx(Ce,{path:"/welcome-figma",element:s.jsx(Os,{to:"/welcome",replace:!0})}),s.jsx(Ce,{path:"/auth",element:s.jsx(Doe,{})}),s.jsx(Ce,{path:"/login",element:s.jsx(Roe,{})}),s.jsx(Ce,{path:"/register",element:s.jsx(Moe,{})}),s.jsx(Ce,{path:"/forgot-password",element:s.jsx(Loe,{})}),s.jsx(Ce,{path:"/accept-invite",element:s.jsx($oe,{})}),s.jsx(Ce,{path:"/teacher/*",element:s.jsx(df,{children:s.jsxs(Vd,{children:[s.jsx(Ce,{path:"dashboard",element:s.jsx(Ke,{children:s.jsx(OX,{})})}),s.jsx(Ce,{path:"domain-selection",element:s.jsx(Ke,{children:s.jsx(LQ,{})})}),s.jsx(Ce,{path:"settings/curriculum-setup",element:s.jsx(Ke,{children:s.jsx(DX,{})})}),s.jsx(Ce,{path:"classes/create",element:s.jsx(Ke,{children:s.jsx(Lce,{})})}),s.jsx(Ce,{path:"administration",element:s.jsx(Ke,{children:s.jsx(FX,{})})}),s.jsx(Ce,{path:"administration/domains",element:s.jsx(Ke,{children:s.jsx(JX,{})})}),s.jsx(Ce,{path:"administration/learning-goals",element:s.jsx(Ke,{children:s.jsx(yv,{})})})]})})}),s.jsx(Ce,{path:"/admin/*",element:s.jsx(df,{children:s.jsxs(Vd,{children:[s.jsx(Ce,{index:!0,element:s.jsx(Ke,{children:s.jsx(Os,{to:"/admin/dashboard",replace:!0})})}),s.jsx(Ce,{path:"teachers",element:s.jsx(Ke,{children:s.jsx(Mm,{})})}),s.jsx(Ce,{path:"domains",element:s.jsx(Ke,{children:s.jsx(Mm,{})})}),s.jsx(Ce,{path:"settings",element:s.jsx(Ke,{children:s.jsx(Mm,{})})}),s.jsx(Ce,{path:"invitations",element:s.jsx(Ke,{children:s.jsx(Mm,{})})}),s.jsx(Ce,{path:"dashboard",element:s.jsx(Ke,{children:s.jsx(Hoe,{})})}),s.jsx(Ce,{path:"domains/dashboard",element:s.jsx(Ke,{children:s.jsx(Joe,{})})}),s.jsx(Ce,{path:"domain/domain_old",element:s.jsx(Ke,{children:s.jsx(sJ,{})})}),s.jsx(Ce,{path:"domains/:slug",element:s.jsx(Ke,{children:s.jsx(f2,{})})}),s.jsx(Ce,{path:"domains/:slug/concepts",element:s.jsx(Ke,{children:s.jsx(Xk,{})})}),s.jsx(Ce,{path:"domains/:slug/concepts/:conceptId",element:s.jsx(Ke,{children:s.jsx(d2,{})})}),s.jsx(Ce,{path:"domains/:slug/goals",element:s.jsx(Ke,{children:s.jsx(yv,{})})}),s.jsx(Ce,{path:"domains/:slug/ai-guidance",element:s.jsx(Ke,{children:s.jsx(WC,{})})}),s.jsx(Ce,{path:"domains/:slug/ai-guidance/:area",element:s.jsx(Ke,{children:s.jsx(Ok,{})})}),s.jsx(Ce,{path:"domains/:slug/ai-guidance/:area/examples/new",element:s.jsx(Ke,{children:s.jsx(Zk,{})})}),s.jsx(Ce,{path:"domain/:domainId",element:s.jsx(Ke,{children:s.jsx(f2,{})})}),s.jsx(Ce,{path:"domain/:domainSlug/concepts",element:s.jsx(Ke,{children:s.jsx(Xk,{})})}),s.jsx(Ce,{path:"domain/:domainSlug/concepts/:conceptId",element:s.jsx(Ke,{children:s.jsx(d2,{})})}),s.jsx(Ce,{path:"domain/:domainId/goals",element:s.jsx(Ke,{children:s.jsx(yv,{})})}),s.jsx(Ce,{path:"domain/:domainId/ai-guidance",element:s.jsx(Ke,{children:s.jsx(WC,{})})}),s.jsx(Ce,{path:"domain/:domainId/ai-guidance/:area",element:s.jsx(Ke,{children:s.jsx(Ok,{})})}),s.jsx(Ce,{path:"domain/:domainId/ai-guidance/:area/examples/new",element:s.jsx(Ke,{children:s.jsx(Zk,{})})}),s.jsx(Ce,{path:"clients",element:s.jsx(Ke,{children:s.jsx(lae,{})})}),s.jsx(Ce,{path:"permissions",element:s.jsx(Ke,{children:s.jsx(t2,{})})}),s.jsx(Ce,{path:"upload",element:s.jsx(Ke,{children:s.jsx(gae,{})})}),s.jsx(Ce,{path:"page-permissions",element:s.jsx(Ke,{children:s.jsx(t2,{})})}),s.jsx(Ce,{path:"ai-training",element:s.jsx(Ke,{children:s.jsx(Toe,{})})}),s.jsx(Ce,{path:"settings/feedback",element:s.jsx(Ke,{children:s.jsx(kae,{})})}),s.jsx(Ce,{path:"rbac-permissions",element:s.jsx(Ke,{children:s.jsx(Ioe,{})})}),s.jsx(Ce,{path:"permissions",element:s.jsx(Ke,{children:s.jsx(u2,{})})}),s.jsx(Ce,{path:"rbac-management",element:s.jsx(Ke,{children:s.jsx(u2,{})})}),s.jsx(Ce,{path:"access-management",element:s.jsx(Ke,{children:s.jsx(vle,{})})}),s.jsx(Ce,{path:"tenants",element:s.jsx(Ke,{children:s.jsx(uce,{})})}),s.jsx(Ce,{path:"tenants/create",element:s.jsx(Ke,{children:s.jsx(hce,{})})}),s.jsx(Ce,{path:"teacher/create",element:s.jsx(Ke,{children:s.jsx(wce,{})})}),s.jsx(Ce,{path:"tenants/:tenantId/edit",element:s.jsx(Ke,{children:s.jsx(mce,{})})}),s.jsx(Ce,{path:"tenants/:tenantId",element:s.jsx(Ke,{children:s.jsx(fce,{})})})]})})}),s.jsx(Ce,{path:"/tenant/*",element:s.jsx(df,{children:s.jsx(Vd,{children:s.jsx(Ce,{path:"dashboard",element:s.jsx(Ke,{children:s.jsx(Boe,{})})})})})}),s.jsx(Ce,{path:"/no-access",element:s.jsx(Oce,{})}),s.jsx(Ce,{path:"/unauthorized",element:s.jsx(Eae,{})}),s.jsx(Ce,{path:"*",element:s.jsx(Tae,{})})]})})]})})})});JT(document.getElementById("root")).render(s.jsx($ce,{}));export{L as s};
